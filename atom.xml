<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>REN WEI&#39;S BLOG</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-06-24T12:19:08.092Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>William Ren</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Bitwise And Array LEETCODE-100-DAY3</title>
    <link href="http://yoursite.com/2020/06/24/Bitwise-And-Array-LEETCODE-100-DAY3/"/>
    <id>http://yoursite.com/2020/06/24/Bitwise-And-Array-LEETCODE-100-DAY3/</id>
    <published>2020-06-24T06:34:14.000Z</published>
    <updated>2020-06-24T12:19:08.092Z</updated>
    
    <content type="html"><![CDATA[<h1 id="66-Plus-One"><a href="#66-Plus-One" class="headerlink" title="66. Plus One"></a><a href="https://leetcode.com/problems/plus-one/" target="_blank" rel="noopener">66. Plus One</a></h1><p>Given a <strong>non-empty</strong> array of digits representing a non-negative integer, plus one to the integer.</p><p>The digits are stored such that the most significant digit is at the head of the list, and each element in the array contain a single digit.</p><p>You may assume the integer does not contain any leading zero, except the number 0 itself.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,3]</span><br><span class="line">Output: [1,2,4]</span><br><span class="line">Explanation: The array represents the integer 123.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [4,3,2,1]</span><br><span class="line">Output: [4,3,2,2]</span><br><span class="line">Explanation: The array represents the integer 4321.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//case1 1011 1012</span></span><br><span class="line"><span class="comment">//case2 1099 1100</span></span><br><span class="line"><span class="comment">//case3 9999 10000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//time : O(n)</span></span><br><span class="line"><span class="comment">//space : O(n)åœ¨æœ€åå¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] plusOne(<span class="keyword">int</span>[] digits) &#123;</span><br><span class="line">        <span class="keyword">if</span> (digits == <span class="keyword">null</span> || digits.length == <span class="number">0</span>) <span class="keyword">return</span> digits;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = digits.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">//case 1</span></span><br><span class="line">            <span class="keyword">if</span>(digits[i] &lt; <span class="number">9</span>) &#123;</span><br><span class="line">                digits[i]++;</span><br><span class="line">                <span class="keyword">return</span> digits;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//case2</span></span><br><span class="line">                digits[i] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//case 3</span></span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[digits.length + <span class="number">1</span>];</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="136-Single-Number"><a href="#136-Single-Number" class="headerlink" title="136. Single Number"></a><a href="https://leetcode.com/problems/single-number/" target="_blank" rel="noopener">136. Single Number</a></h1><p>Given a <strong>non-empty</strong> array of integers, every element appears <em>twice</em> except for one. Find that single one.</p><p><strong>Note:</strong></p><p>Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [2,2,1]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [4,1,2,1,2]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            res ^= nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸ˜å¼‚æˆ–-ç›¸åŒä¸º0-ä¸åŒä¸º1"><a href="#ğŸ˜å¼‚æˆ–-ç›¸åŒä¸º0-ä¸åŒä¸º1" class="headerlink" title="ğŸ˜å¼‚æˆ–:ç›¸åŒä¸º0,ä¸åŒä¸º1"></a>ğŸ˜å¼‚æˆ–:ç›¸åŒä¸º0,ä¸åŒä¸º1</h1><h1 id="389-Find-The-Difference"><a href="#389-Find-The-Difference" class="headerlink" title="389. Find The Difference"></a><a href="https://leetcode.com/problems/find-the-difference/" target="_blank" rel="noopener">389. Find The Difference</a></h1><p>Given two strings <strong><em>s\</em></strong> and <strong><em>t\</em></strong> which consist of only lowercase letters.</p><p>String <strong><em>t\</em></strong> is generated by random shuffling string <strong><em>s\</em></strong> and then add one more letter at a random position.</p><p>Find the letter that was added in <strong><em>t\</em></strong>.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">s = &quot;abcd&quot;</span><br><span class="line">t = &quot;abcde&quot;</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">e</span><br><span class="line"></span><br><span class="line">Explanation:</span><br><span class="line">&apos;e&apos; is the letter that was added.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ€§è´¨ï¼š4ä¸6è¿›è¡Œå¼‚æˆ–çš„ç»“æœ,å†ä¸4è¿›è¡Œå¼‚æˆ–,å¾—åˆ°äº†6.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">findTheDifference</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//tçš„é•¿åº¦æ¯”sé•¿ï¼Œæ‰€ä»¥ç›´æ¥å–tçš„æœ€åä¸€ä½</span></span><br><span class="line">        <span class="keyword">char</span> c = t.charAt(t.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            c ^= s.charAt(i);</span><br><span class="line">            c ^= t.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€§è´¨ï¼ˆ1ï¼‰ï¼š4ä¸6è¿›è¡Œå¼‚æˆ–çš„ç»“æœ-å†ä¸4è¿›è¡Œå¼‚æˆ–-å¾—åˆ°äº†6"><a href="#æ€§è´¨ï¼ˆ1ï¼‰ï¼š4ä¸6è¿›è¡Œå¼‚æˆ–çš„ç»“æœ-å†ä¸4è¿›è¡Œå¼‚æˆ–-å¾—åˆ°äº†6" class="headerlink" title="æ€§è´¨ï¼ˆ1ï¼‰ï¼š4ä¸6è¿›è¡Œå¼‚æˆ–çš„ç»“æœ,å†ä¸4è¿›è¡Œå¼‚æˆ–,å¾—åˆ°äº†6."></a>æ€§è´¨ï¼ˆ1ï¼‰ï¼š4ä¸6è¿›è¡Œå¼‚æˆ–çš„ç»“æœ,å†ä¸4è¿›è¡Œå¼‚æˆ–,å¾—åˆ°äº†6.</h2><h1 id="191-Number-of-1-Bits"><a href="#191-Number-of-1-Bits" class="headerlink" title="191. Number of 1 Bits"></a><a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">191. Number of 1 Bits</a></h1><p>Write a function that takes an unsigned integer and return the number of â€˜1â€™ bits it has (also known as the <a href="http://en.wikipedia.org/wiki/Hamming_weight" target="_blank" rel="noopener">Hamming weight</a>).</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 00000000000000000000000000001011</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The input binary string 00000000000000000000000000001011 has a total of three &apos;1&apos; bits.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 00000000000000000000000010000000</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: The input binary string 00000000000000000000000010000000 has a total of one &apos;1&apos; bit.</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 11111111111111111111111111111101</span><br><span class="line">Output: 31</span><br><span class="line">Explanation: The input binary string 11111111111111111111111111111101 has a total of thirty one &apos;1&apos; bits.</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ul><li>Note that in some languages such as Java, there is no unsigned integer type. In this case, the input will be given as signed integer type and should not affect your implementation, as the internal binary representation of the integer is the same whether it is signed or unsigned.</li><li>In Java, the compiler represents the signed integers using <a href="https://en.wikipedia.org/wiki/Two&#39;s_complement" target="_blank" rel="noopener">2â€™s complement notation</a>. Therefore, in <strong>Example 3</strong> above the input represents the signed integer <code>-3</code>.</li></ul><p><strong>Follow up</strong>:</p><p>If this function is called many times, how would you optimize it?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> res = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">             dp[i] = nums[i] + (dp[i - <span class="number">1</span>] &lt; <span class="number">0</span> ? <span class="number">0</span> : dp[i - <span class="number">1</span>]);</span><br><span class="line">             res = Math.max(res, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @lc code=end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// class Solution &#123;</span></span><br><span class="line"><span class="comment">//     //dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼</span></span><br><span class="line"><span class="comment">//     public int maxSubArray(int[] nums) &#123;</span></span><br><span class="line"><span class="comment">//         int[] dp = new int[nums.length];</span></span><br><span class="line"><span class="comment">//         dp[0] = nums[0];</span></span><br><span class="line"><span class="comment">//         int res = nums[0];</span></span><br><span class="line"><span class="comment">//         for(int i = 1; i &lt; nums.length; i++) &#123;</span></span><br><span class="line"><span class="comment">//              dp[i] = nums[i] + (dp[i - 1] &lt; 0 ? 0 : dp[i - 1]);</span></span><br><span class="line"><span class="comment">//              res = Math.max(res, dp[i]);</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//         return res;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ€§è´¨ï¼ˆ2ï¼‰n-amp-n-1-å°†nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½ä½ä¸º1çš„æ”¹æˆ0ï¼ˆåœ¨è¿™é‡Œæ³¨æ„é‡å¤æ“ä½œï¼‰"><a href="#æ€§è´¨ï¼ˆ2ï¼‰n-amp-n-1-å°†nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½ä½ä¸º1çš„æ”¹æˆ0ï¼ˆåœ¨è¿™é‡Œæ³¨æ„é‡å¤æ“ä½œï¼‰" class="headerlink" title="æ€§è´¨ï¼ˆ2ï¼‰n&amp;(n-1):å°†nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½ä½ä¸º1çš„æ”¹æˆ0ï¼ˆåœ¨è¿™é‡Œæ³¨æ„é‡å¤æ“ä½œï¼‰"></a>æ€§è´¨ï¼ˆ2ï¼‰n&amp;(n-1):å°†nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½ä½ä¸º1çš„æ”¹æˆ0ï¼ˆåœ¨è¿™é‡Œæ³¨æ„é‡å¤æ“ä½œï¼‰</h2><h1 id="231-Power-of-Two"><a href="#231-Power-of-Two" class="headerlink" title="231. Power of Two"></a><a href="https://leetcode.com/problems/power-of-two/" target="_blank" rel="noopener">231. Power of Two</a></h1><p>Given an integer, write a function to determine if it is a power of two.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 1</span><br><span class="line">Output: true </span><br><span class="line">Explanation: 20 = 1</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 16</span><br><span class="line">Output: true</span><br><span class="line">Explanation: 24 = 16</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 218</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2 : 10</span></span><br><span class="line"><span class="comment">// 4 : 100</span></span><br><span class="line"><span class="comment">// 8 : 1000</span></span><br><span class="line"><span class="comment">// 16: 10000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// n : 16 10000</span></span><br><span class="line"><span class="comment">// n - 1 : 01111</span></span><br><span class="line"><span class="comment">//å¦‚æœä¸çš„ç»“æœéƒ½ä¸º0,é‚£ä¹ˆå°±æ˜¯2çš„æ¬¡æ–¹å€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPowerOfTwo</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n &gt; <span class="number">0</span> &amp;&amp; ((n &amp; (n - <span class="number">1</span>)) == <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="190-Reverse-Bits"><a href="#190-Reverse-Bits" class="headerlink" title="190. Reverse Bits"></a><a href="https://leetcode.com/problems/reverse-bits/" target="_blank" rel="noopener">190. Reverse Bits</a></h1><p>Reverse bits of a given 32 bits unsigned integer.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 00000010100101000001111010011100</span><br><span class="line">Output: 00111001011110000010100101000000</span><br><span class="line">Explanation: The input binary string 00000010100101000001111010011100 represents the unsigned integer 43261596, so return 964176192 which its binary representation is 00111001011110000010100101000000.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: 11111111111111111111111111111101</span><br><span class="line">Output: 10111111111111111111111111111111</span><br><span class="line">Explanation: The input binary string 11111111111111111111111111111101 represents the unsigned integer 4294967293, so return 3221225471 which its binary representation is 10111111111111111111111111111111.</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ul><li>Note that in some languages such as Java, there is no unsigned integer type. In this case, both input and output will be given as signed integer type and should not affect your implementation, as the internal binary representation of the integer is the same whether it is signed or unsigned.</li><li>In Java, the compiler represents the signed integers using <a href="https://en.wikipedia.org/wiki/Two&#39;s_complement" target="_blank" rel="noopener">2â€™s complement notation</a>. Therefore, in <strong>Example 2</strong> above the input represents the signed integer <code>-3</code> and the output represents the signed integer <code>-1073741825</code>.</li></ul><p><strong>Follow up</strong>:</p><p>If this function is called many times, how would you optimize it?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1011 å³ç§»å˜æˆ0101</span></span><br><span class="line"><span class="comment">// 0001</span></span><br><span class="line"><span class="comment">//    1</span></span><br><span class="line"><span class="comment">// res = 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">// you need treat n as an unsigned value</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverseBits</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123;</span><br><span class="line">            res &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//å¦‚æœæ˜¯å¶æ•°ï¼Œä¸º0ï¼Œå¹¶ä¸”åˆ¤æ–­æœ€ä½ä½æ˜¯ä¸æ˜¯1</span></span><br><span class="line">            <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">1</span>) res++;</span><br><span class="line">            <span class="comment">// 1011 å³ç§»å˜æˆ0101</span></span><br><span class="line">            n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="27-Remove-Element"><a href="#27-Remove-Element" class="headerlink" title="27. Remove Element"></a><a href="https://leetcode.com/problems/remove-element/" target="_blank" rel="noopener">27. Remove Element</a></h1><p>Given an array <em>nums</em> and a value <em>val</em>, remove all instances of that value <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener"><strong>in-place</strong></a> and return the new length.</p><p>Do not allocate extra space for another array, you must do this by <strong>modifying the input array <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener">in-place</a></strong> with O(1) extra memory.</p><p>The order of elements can be changed. It doesnâ€™t matter what you leave beyond the new length.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [3,2,2,3], val = 3,</span><br><span class="line"></span><br><span class="line">Your function should return length = 2, with the first two elements of nums being 2.</span><br><span class="line"></span><br><span class="line">It doesn&apos;t matter what you leave beyond the returned length.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [0,1,2,2,3,0,4,2], val = 2,</span><br><span class="line"></span><br><span class="line">Your function should return length = 5, with the first five elements of nums containing 0, 1, 3, 0, and 4.</span><br><span class="line"></span><br><span class="line">Note that the order of those five elements can be arbitrary.</span><br><span class="line"></span><br><span class="line">It doesn&apos;t matter what values are set beyond the returned length.</span><br></pre></td></tr></table></figure><p><strong>Clarification:</strong></p><p>Confused why the returned value is an integer but your answer is an array?</p><p>Note that the input array is passed in by <strong>reference</strong>, which means modification to the input array will be known to the caller as well.</p><p>Internally you can think of this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// nums is passed in by reference. (i.e., without making a copy)</span><br><span class="line">int len = removeElement(nums, val);</span><br><span class="line"></span><br><span class="line">// any modification to nums in your function would be known by the caller.</span><br><span class="line">// using the length returned by your function, it prints the first len elements.</span><br><span class="line">for (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">    print(nums[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨Listä¸­æ˜¯ç›¸ç­‰ï¼Œåœ¨Arrayä¸­æ˜¯ä¸ç­‰</span></span><br><span class="line"><span class="comment">//åŒæŒ‡é’ˆæ³•ï¼šä¸€ä¸ªä»å‰å‘åæ‰«ï¼Œä¸€ä¸ªè®°å½•ç»“æœï¼Œ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeElement</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå’Œvalç›¸ç­‰ï¼Œiå‘å‰èµ°ï¼Œrä¸å˜</span></span><br><span class="line">            <span class="keyword">if</span>(nums[i] != val) &#123;</span><br><span class="line">                nums[res++] = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @lc code=end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// class Solution &#123;</span></span><br><span class="line"><span class="comment">//     public int removeElement(int[] nums, int val) &#123;</span></span><br><span class="line"><span class="comment">//         int ans = 0;</span></span><br><span class="line"><span class="comment">//         for(int num: nums) &#123;</span></span><br><span class="line"><span class="comment">//             if(num != val) &#123;</span></span><br><span class="line"><span class="comment">//                 nums[ans] = num;</span></span><br><span class="line"><span class="comment">//                 ans++;</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//         return ans;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// class Solution &#123;</span></span><br><span class="line"><span class="comment">//     public int removeElement(int[] nums, int val) &#123;</span></span><br><span class="line"><span class="comment">//         int i  = 0;</span></span><br><span class="line"><span class="comment">//         for (int j = 0; j &lt; nums.length; ++j) &#123;</span></span><br><span class="line"><span class="comment">//             if (nums[j] != val) &#123;</span></span><br><span class="line"><span class="comment">//                 nums[i] = nums[j];</span></span><br><span class="line"><span class="comment">//                 i++;</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//         return i;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h1 id="26-Remove-Duplicates-from-Sorted-Array"><a href="#26-Remove-Duplicates-from-Sorted-Array" class="headerlink" title="26. Remove Duplicates from Sorted Array"></a><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/" target="_blank" rel="noopener">26. Remove Duplicates from Sorted Array</a></h1><p>Given a sorted array <em>nums</em>, remove the duplicates <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener"><strong>in-place</strong></a> such that each element appear only <em>once</em> and return the new length.</p><p>Do not allocate extra space for another array, you must do this by <strong>modifying the input array <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener">in-place</a></strong> with O(1) extra memory.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [1,1,2],</span><br><span class="line"></span><br><span class="line">Your function should return length = 2, with the first two elements of nums being 1 and 2 respectively.</span><br><span class="line"></span><br><span class="line">It doesn&apos;t matter what you leave beyond the returned length.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [0,0,1,1,1,2,2,3,3,4],</span><br><span class="line"></span><br><span class="line">Your function should return length = 5, with the first five elements of nums being modified to 0, 1, 2, 3, and 4 respectively.</span><br><span class="line"></span><br><span class="line">It doesn&apos;t matter what values are set beyond the returned length.</span><br></pre></td></tr></table></figure><p><strong>Clarification:</strong></p><p>Confused why the returned value is an integer but your answer is an array?</p><p>Note that the input array is passed in by <strong>reference</strong>, which means modification to the input array will be known to the caller as well.</p><p>Internally you can think of this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// nums is passed in by reference. (i.e., without making a copy)</span><br><span class="line">int len = removeDuplicates(nums);</span><br><span class="line"></span><br><span class="line">// any modification to nums in your function would be known by the caller.</span><br><span class="line">// using the length returned by your function, it prints the first len elements.</span><br><span class="line">for (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">    print(nums[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ªæ•°ä¸€å®šè¢«ä¿æŒï¼Œ</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i - <span class="number">1</span>] != nums[i]) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœç›¸åŒ,é‚£ä¹ˆcountä¸å˜,i++</span></span><br><span class="line">                nums[count++] = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// class Solution &#123;</span></span><br><span class="line"><span class="comment">//     public int removeDuplicates(int[] nums) &#123;</span></span><br><span class="line"><span class="comment">//         if (nums == null || nums.length == 0) return 0;</span></span><br><span class="line"><span class="comment">//         int i = 0;</span></span><br><span class="line"><span class="comment">//         for (int j = 1; j &lt; nums.length; ++j) &#123;</span></span><br><span class="line"><span class="comment">//             if (nums[j] != nums[i]) &#123;</span></span><br><span class="line"><span class="comment">//                 i++;</span></span><br><span class="line"><span class="comment">//                 nums[i] = nums[j];</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//         return i + 1;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> * [<span class="number">80</span>] åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt;= <span class="number">2</span>) <span class="keyword">return</span> nums.length;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] != nums[count - <span class="number">2</span>])&#123;</span><br><span class="line">                nums[count++] = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> * [<span class="number">83</span>] åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">        ListNode cur = head;</span><br><span class="line">        <span class="keyword">while</span> (cur.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cur.next.val == cur.val) &#123;</span><br><span class="line">                cur.next = cur.next.next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cur = cur.next;<span class="comment">// movre forward when do not have replcaited item;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="53-Maximum-Subarray"><a href="#53-Maximum-Subarray" class="headerlink" title="53. Maximum Subarray"></a><a href="https://leetcode.com/problems/maximum-subarray/" target="_blank" rel="noopener">53. Maximum Subarray</a></h1><p>Given an integer array <code>nums</code>, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [-2,1,-3,4,-1,2,1,-5,4],</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: [4,-1,2,1] has the largest sum = 6.</span><br></pre></td></tr></table></figure><p><strong>Follow up:</strong></p><p>If you have figured out the O(<em>n</em>) solution, try coding another solution using the divide and conquer approach, which is more subtle.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> res = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">             dp[i] = nums[i] + (dp[i - <span class="number">1</span>] &lt; <span class="number">0</span> ? <span class="number">0</span> : dp[i - <span class="number">1</span>]);</span><br><span class="line">             res = Math.max(res, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;66-Plus-One&quot;&gt;&lt;a href=&quot;#66-Plus-One&quot; class=&quot;headerlink&quot; title=&quot;66. Plus One&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://leetcode.com/problems/plus-one/&quot; ta
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://yoursite.com/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>String-LEETCODE-100-DAY2</title>
    <link href="http://yoursite.com/2020/06/23/String-LEETCODE-100-DAY2/"/>
    <id>http://yoursite.com/2020/06/23/String-LEETCODE-100-DAY2/</id>
    <published>2020-06-23T03:25:12.000Z</published>
    <updated>2020-06-24T06:31:15.601Z</updated>
    
    <content type="html"><![CDATA[<h1 id="186-reverse-words-in-a-string-ii"><a href="#186-reverse-words-in-a-string-ii" class="headerlink" title="186.reverse-words-in-a-string-ii)"></a><a href="https://leetcode.com/problems/reverse-words-in-a-string-ii/" target="_blank" rel="noopener">186.reverse-words-in-a-string-ii)</a></h1><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€ä¸ªç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå•è¯ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;the sky is blue&quot;</span><br><span class="line">è¾“å‡º: &quot;blue is sky the&quot;</span><br></pre></td></tr></table></figure><ul><li>æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n)</code>ï¼Œå› ä¸ºæ•´ä½“éå†å’Œå•ä¸ªå•è¯éå†çš„çš„å¤æ‚åº¦éƒ½ä¸ºnï¼Œ<code>r</code>ä»0èµ°åˆ°æœ€å³çš„å¤æ‚åº¦ä¹Ÿæ˜¯nï¼Œè¿™æ ·å°±æ˜¯3nçš„å¤æ‚åº¦ï¼Œå¿½ç•¥æŒ‡æ•°ï¼Œå³å¯å¾—åˆ°<code>O(n)</code></li><li>ç©ºé—´å¤æ‚åº¦ä¸º<code>O(1)</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆæ•´ä½“ç¿»è½¬ï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆæ³•ï¼Œå°†ræŒ‡å‘å•è¯åçš„ç©ºæ ¼éƒ¨åˆ†ï¼Œå†é€ä¸€ç¿»è½¬å•è¯</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reverseWords</span><span class="params">(<span class="keyword">char</span>[] s)</span> </span>&#123;</span><br><span class="line">        reverse(s, <span class="number">0</span>, s.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (r &lt; s.length) &#123;</span><br><span class="line">            <span class="keyword">int</span> l = r;</span><br><span class="line">            <span class="keyword">while</span> (r &lt; s.length &amp;&amp; s[r] != <span class="string">' '</span>) &#123;</span><br><span class="line">                r++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å› ä¸ºråœ¨ç©ºæ ¼ä¸Šï¼Œæ‰€ä»¥è¦åˆ é™¤å•è¯çš„è¯ï¼Œå°±è¦å‰è¿›ä¸€æ ¼ã€‚</span></span><br><span class="line">            reverse(s, l, r - <span class="number">1</span>);</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span>[] s, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">char</span> temp = s[i];</span><br><span class="line">            s[i++] = s[j];</span><br><span class="line">            s[j--] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="151-Reverse-Words-in-a-String"><a href="#151-Reverse-Words-in-a-String" class="headerlink" title="151. Reverse Words in a String"></a><a href="https://leetcode.com/problems/reverse-words-in-a-string/" target="_blank" rel="noopener">151. Reverse Words in a String</a></h1><h6 id="trimå»æ‰å‰åç©ºæ ¼-split-ä¸­çš„-sæŒ‡æ‰€æœ‰çš„ç©ºæ ¼å›è½¦-æŒ‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª"><a href="#trimå»æ‰å‰åç©ºæ ¼-split-ä¸­çš„-sæŒ‡æ‰€æœ‰çš„ç©ºæ ¼å›è½¦-æŒ‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª" class="headerlink" title="trimå»æ‰å‰åç©ºæ ¼,split ä¸­çš„\\sæŒ‡æ‰€æœ‰çš„ç©ºæ ¼å›è½¦,+æŒ‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª"></a><code>trim</code>å»æ‰å‰åç©ºæ ¼,<code>split</code> ä¸­çš„<code>\\s</code>æŒ‡æ‰€æœ‰çš„ç©ºæ ¼å›è½¦,<code>+</code>æŒ‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª</h6><p>Given an input string, reverse the string word by word.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;the sky is blue&quot;</span><br><span class="line">Output: &quot;blue is sky the&quot;</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;  hello world!  &quot;</span><br><span class="line">Output: &quot;world! hello&quot;</span><br><span class="line">Explanation: Your reversed string should not contain leading or trailing spaces.</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;a good   example&quot;</span><br><span class="line">Output: &quot;example good a&quot;</span><br><span class="line">Explanation: You need to reduce multiple spaces between two words to a single space in the reversed string.</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ul><li>A word is defined as a sequence of non-space characters.</li><li>Input string may contain leading or trailing spaces. However, your reversed string should not contain leading or trailing spaces.</li><li>You need to reduce multiple spaces between two words to a single space in the reversed string.</li></ul><p><strong>Follow up:</strong></p><p>For C programmers, try to solve it <em>in-place</em> in <em>O</em>(1) extra space.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reverseWords</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        String[] words = s.trim().split(<span class="string">"\\s+"</span>);</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = words.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            sb.append(words[i] + <span class="string">' '</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString().trim();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @lc code=end</span></span><br><span class="line"><span class="comment">// //å…ˆæ•´ä½“ç¿»è½¬ï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆæ³•ï¼Œå°†ræŒ‡å‘å•è¯åçš„ç©ºæ ¼éƒ¨åˆ†ï¼Œå†é€ä¸€ç¿»è½¬å•è¯</span></span><br><span class="line"><span class="comment">// class Solution &#123;</span></span><br><span class="line"><span class="comment">//     public String reverseWords(char[] s) &#123;</span></span><br><span class="line"><span class="comment">//         reverse(s, 0, s.length - 1);</span></span><br><span class="line"><span class="comment">//         int r = 0;</span></span><br><span class="line"><span class="comment">//         while (r &lt; s.length) &#123;</span></span><br><span class="line"><span class="comment">//             int l = r;</span></span><br><span class="line"><span class="comment">//             while (r &lt; s.length &amp;&amp; s[r] != ' ') &#123;</span></span><br><span class="line"><span class="comment">//                 r++;</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//             //å› ä¸ºråœ¨ç©ºæ ¼ä¸Šï¼Œæ‰€ä»¥è¦åˆ é™¤å•è¯çš„è¯ï¼Œå°±è¦å‰è¿›ä¸€æ ¼ã€‚</span></span><br><span class="line"><span class="comment">//             reverse(s, l, r - 1);</span></span><br><span class="line"><span class="comment">//             r++;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     public void reverse(char[] s, int i, int j) &#123;</span></span><br><span class="line"><span class="comment">//         while (i &lt; j) &#123;</span></span><br><span class="line"><span class="comment">//             char temp = s[i];</span></span><br><span class="line"><span class="comment">//             s[i++] = s[j];</span></span><br><span class="line"><span class="comment">//             s[j--] = temp;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h1 id="345-Reverse-Vowels-of-a-String"><a href="#345-Reverse-Vowels-of-a-String" class="headerlink" title="345. Reverse Vowels of a String"></a><a href="https://leetcode.com/problems/reverse-vowels-of-a-string/" target="_blank" rel="noopener">345. Reverse Vowels of a String</a></h1><p>Write a function that takes a string as input and reverse only the vowels of a string.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;hello&quot;</span><br><span class="line">Output: &quot;holle&quot;</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;leetcode&quot;</span><br><span class="line">Output: &quot;leotcede&quot;</span><br></pre></td></tr></table></figure><p><strong>Note:</strong><br>The vowels does not include the letter â€œyâ€.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reverseVowels</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) <span class="keyword">return</span> s;</span><br><span class="line">        String vowel = <span class="string">"aeiouAEIOU"</span>;</span><br><span class="line">        <span class="keyword">char</span>[] str = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = s.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å‰è¿›</span></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right &amp;&amp; vowel.indexOf(str[left]) == -<span class="number">1</span>) &#123;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right &amp;&amp; vowel.indexOf(str[right]) == -<span class="number">1</span>) &#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">char</span> temp = str[left];</span><br><span class="line">            str[left++] = str[right];</span><br><span class="line">            str[right--] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="13-Roman-to-Integer"><a href="#13-Roman-to-Integer" class="headerlink" title="13.Roman to Integer"></a><a href="https://cspiration.com/course/video?id=2679" target="_blank" rel="noopener">13.Roman to Integer</a></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆå°†æ‰€æœ‰çš„ç»„åˆå¯èƒ½æ€§åˆ—å‡ºå¹¶æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­</span></span><br><span class="line"><span class="comment">// ç„¶åå¯¹å­—ç¬¦ä¸²è¿›è¡Œéå†ï¼Œç”±äºç»„åˆåªæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ 1 ä¸ªå­—ç¬¦ï¼Œä¸€ç§æ˜¯ 2 ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ 2 ä¸ªå­—ç¬¦ä¼˜å…ˆäº 1 ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">// å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦çš„ç»„åˆåœ¨å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å°†å€¼å–å‡ºåŠ åˆ°ç»“æœ ans ä¸­ï¼Œå¹¶å‘åç§»2ä¸ªå­—ç¬¦ã€‚ä¸å­˜åœ¨åˆ™å°†åˆ¤æ–­å½“å‰ 1 ä¸ªå­—ç¬¦æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å°†å€¼å–å‡ºåŠ åˆ°ç»“æœ ans ä¸­ï¼Œå¹¶å‘åç§» 1 ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">// éå†ç»“æŸè¿”å›ç»“æœ ans</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">romanToInt</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"I"</span>, <span class="number">1</span>);</span><br><span class="line">        map.put(<span class="string">"IV"</span>, <span class="number">4</span>);</span><br><span class="line">        map.put(<span class="string">"V"</span>, <span class="number">5</span>);</span><br><span class="line">        map.put(<span class="string">"IX"</span>, <span class="number">9</span>);</span><br><span class="line">        map.put(<span class="string">"X"</span>, <span class="number">10</span>);</span><br><span class="line">        map.put(<span class="string">"XL"</span>, <span class="number">40</span>);</span><br><span class="line">        map.put(<span class="string">"L"</span>, <span class="number">50</span>);</span><br><span class="line">        map.put(<span class="string">"XC"</span>, <span class="number">90</span>);</span><br><span class="line">        map.put(<span class="string">"C"</span>, <span class="number">100</span>);</span><br><span class="line">        map.put(<span class="string">"CD"</span>, <span class="number">400</span>);</span><br><span class="line">        map.put(<span class="string">"D"</span>, <span class="number">500</span>);</span><br><span class="line">        map.put(<span class="string">"CM"</span>, <span class="number">900</span>);</span><br><span class="line">        map.put(<span class="string">"M"</span>, <span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; s.length();) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; s.length() &amp;&amp; map.containsKey(s.substring(i, i+<span class="number">2</span>))) &#123;</span><br><span class="line">                ans += map.get(s.substring(i, i+<span class="number">2</span>));</span><br><span class="line">                i += <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ans += map.get(s.substring(i, i+<span class="number">1</span>));</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="12-Integer-to-Roman"><a href="#12-Integer-to-Roman" class="headerlink" title="12. Integer to Roman"></a><a href="https://cspiration.com/course/video?id=2680" target="_blank" rel="noopener">12. Integer to Roman</a></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">intToRoman</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] values = &#123;<span class="number">1000</span>, <span class="number">900</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">100</span>, <span class="number">90</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>&#125;;    </span><br><span class="line">        String[] strs = &#123;<span class="string">"M"</span>,<span class="string">"CM"</span>,<span class="string">"D"</span>,<span class="string">"CD"</span>,<span class="string">"C"</span>,<span class="string">"XC"</span>,<span class="string">"L"</span>,<span class="string">"XL"</span>,<span class="string">"X"</span>,<span class="string">"IX"</span>,<span class="string">"V"</span>,<span class="string">"IV"</span>,<span class="string">"I"</span>&#125;;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (num &gt;= values[i]) &#123;</span><br><span class="line">                num -= values[i];</span><br><span class="line">                sb.append(strs[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="273-Integer-to-English-Words"><a href="#273-Integer-to-English-Words" class="headerlink" title="273. Integer to English Words"></a><a href="https://cspiration.com/course/video?id=2681" target="_blank" rel="noopener">273. Integer to English Words</a></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    String[] less20 = &#123;<span class="string">""</span>, <span class="string">"One"</span>, <span class="string">"Two"</span>, <span class="string">"Three"</span>, <span class="string">"Four"</span>, <span class="string">"Five"</span>, <span class="string">"Six"</span>, <span class="string">"Seven"</span>, <span class="string">"Eight"</span>, <span class="string">"Nine"</span>, <span class="string">"Ten"</span>, <span class="string">"Eleven"</span>, <span class="string">"Twelve"</span>, <span class="string">"Thirteen"</span>, <span class="string">"Fourteen"</span>, <span class="string">"Fifteen"</span>, <span class="string">"Sixteen"</span>, <span class="string">"Seventeen"</span>, <span class="string">"Eighteen"</span>, <span class="string">"Nineteen"</span>&#125;;</span><br><span class="line">    String[] tens = &#123;<span class="string">""</span>, <span class="string">"Ten"</span>, <span class="string">"Twenty"</span>, <span class="string">"Thirty"</span>, <span class="string">"Forty"</span>, <span class="string">"Fifty"</span>, <span class="string">"Sixty"</span>, <span class="string">"Seventy"</span>, <span class="string">"Eighty"</span>, <span class="string">"Ninety"</span>&#125;;</span><br><span class="line">    String[] thousands  = &#123;<span class="string">""</span>, <span class="string">"Thousand"</span>, <span class="string">"Million"</span>, <span class="string">"Billion"</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">numberToWords</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (num == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"Zero"</span>;</span><br><span class="line">        String res = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num % <span class="number">1000</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                res = helper(num % <span class="number">1000</span>)+ thousands[i] + <span class="string">" "</span> + res;</span><br><span class="line">            &#125;</span><br><span class="line">            num /= <span class="number">1000</span>;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.trim();          </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helper</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (num == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &lt; <span class="number">20</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> less20[num % <span class="number">20</span>] + <span class="string">" "</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> tens[num / <span class="number">10</span>] + <span class="string">" "</span> + helper(num % <span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> less20[num / <span class="number">100</span>] + <span class="string">" Hundred "</span> + helper(num % <span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="1-Two-Sum"><a href="#1-Two-Sum" class="headerlink" title="1.Two Sum"></a><a href="https://leetcode.com/problems/two-sum/" target="_blank" rel="noopener">1.Two Sum</a></h1><p>Given an array of integers, return <strong>indices</strong> of the two numbers such that they add up to a specific target.</p><p>You may assume that each input would have <strong><em>exactly\</em></strong> one solution, and you may not use the <em>same</em> element twice.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [2, 7, 11, 15], target = 9,</span><br><span class="line"></span><br><span class="line">Because nums[0] + nums[1] = 2 + 7 = 9,</span><br><span class="line">return [0, 1].</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(complement)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;map.get(complement), i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; nums.length; ++i) &#123;</span></span><br><span class="line">        <span class="comment">//     for (int j = i + 1; j &lt; nums.length; ++j) &#123;</span></span><br><span class="line">        <span class="comment">//         if (nums[j] == target - nums[i]) &#123;</span></span><br><span class="line">        <span class="comment">//             return new int[] &#123;i, j&#125;;</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// throw new IllegalArgumentException("No solution");</span></span><br></pre></td></tr></table></figure><h1 id="15-Three-Sum"><a href="#15-Three-Sum" class="headerlink" title="15.Three Sum"></a><a href="https://leetcode.com/problems/3sum/" target="_blank" rel="noopener">15.Three Sum</a></h1><p>Given an array <code>nums</code> of <em>n</em> integers, are there elements <em>a</em>, <em>b</em>, <em>c</em> in <code>nums</code> such that <em>a</em> + <em>b</em> + <em>c</em> = 0? Find all unique triplets in the array which gives the sum of zero.</p><p><strong>Note:</strong></p><p>The solution set must not contain duplicate triplets.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Given array nums = [-1, 0, 1, 2, -1, -4],</span><br><span class="line"></span><br><span class="line">A solution set is:</span><br><span class="line">[</span><br><span class="line">  [-1, 0, 1],</span><br><span class="line">  [-1, -1, 2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; threeSum(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || len &lt; <span class="number">3</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        Arrays.sort(nums);<span class="comment">// æ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>) <span class="keyword">break</span>;<span class="comment">// å¦‚æœå½“å‰æ•°å­—å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œæ‰€ä»¥ç»“æŸå¾ªç¯</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>;<span class="comment">// å»é‡</span></span><br><span class="line">            <span class="keyword">int</span> L = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> R = len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line">                <span class="keyword">int</span> sum = nums[i] + nums[L] + nums[R];</span><br><span class="line">                <span class="keyword">if</span>(sum == <span class="number">0</span>) &#123;</span><br><span class="line">                    ans.add(Arrays.asList(nums[i], nums[L], nums[R]));</span><br><span class="line">                    <span class="keyword">while</span> (L &lt; R &amp;&amp; nums[L] == nums[L+<span class="number">1</span>]) L++;<span class="comment">// å»é‡</span></span><br><span class="line">                    <span class="keyword">while</span> (L &lt; R &amp;&amp; nums[R] == nums[R-<span class="number">1</span>]) R--;<span class="comment">// å»é‡</span></span><br><span class="line">                    L++;</span><br><span class="line">                    R--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) L++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (sum &gt; <span class="number">0</span>) R--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="16-3Sum-Closest"><a href="#16-3Sum-Closest" class="headerlink" title="16. 3Sum Closest"></a><a href="https://leetcode.com/problems/3sum-closest/" target="_blank" rel="noopener">16. 3Sum Closest</a></h1><p>Given an array <code>nums</code> of <em>n</em> integers and an integer <code>target</code>, find three integers in <code>nums</code> such that the sum is closest to <code>target</code>. Return the sum of the three integers. You may assume that each input would have exactly one solution.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [-1,2,1,-4], target = 1</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: The sum that is closest to the target is 2. (-1 + 2 + 1 = 2).</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li><p><code>3 &lt;= nums.length &lt;= 10^3</code></p></li><li><p><code>-10^3 &lt;= nums[i] &lt;= 10^3</code></p></li><li><p><code>-10^4 &lt;= target &lt;= 10^4</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="comment">//åªæœ‰åœ¨ä»å°åˆ°å¤§æ’åºåï¼Œæ‰èƒ½ç§»åŠ¨leftå’Œrightï¼ˆå› ä¸ºæ’åºæ˜¯ä¸ºäº†å»é‡ï¼‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">threeSumClosest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[nums.length - <span class="number">1</span>];</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> start = i + <span class="number">1</span>, end = nums.length - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">                <span class="keyword">int</span> sum = nums[i] + nums[start] + nums[end];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt; target) &#123;</span><br><span class="line">                    end--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    start++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(Math.abs(sum - target) &lt; Math.abs(res - target)) &#123;</span><br><span class="line">                    <span class="comment">//ç»å¯¹å€¼åå°,è¯´æ˜æ›´æ¥è¿‘</span></span><br><span class="line">                    res = sum;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="18-4-Sum"><a href="#18-4-Sum" class="headerlink" title="18. 4 Sum"></a><a href="https://leetcode.com/problems/4sum/" target="_blank" rel="noopener">18. 4 Sum</a></h1><p>Given an array <code>nums</code> of <em>n</em> integers and an integer <code>target</code>, are there elements <em>a</em>, <em>b</em>, <em>c</em>, and <em>d</em> in <code>nums</code> such that <em>a</em> + <em>b</em> + <em>c</em> + <em>d</em> = <code>target</code>? Find all unique quadruplets in the array which gives the sum of <code>target</code>.</p><p><strong>Note:</strong></p><p>The solution set must not contain duplicate quadruplets.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Given array nums = [1, 0, -1, 0, -2, 2], and target = 0.</span><br><span class="line"></span><br><span class="line">A solution set is:</span><br><span class="line">[</span><br><span class="line">  [-1,  0, 0, 1],</span><br><span class="line">  [-2, -1, 1, 2],</span><br><span class="line">  [-2,  0, 0, 2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; fourSum(<span class="keyword">int</span>[] nums,<span class="keyword">int</span> target)&#123;</span><br><span class="line">        <span class="comment">/*å®šä¹‰ä¸€ä¸ªè¿”å›å€¼*/</span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">/*å½“æ•°ç»„ä¸ºnullæˆ–å…ƒç´ å°äº4ä¸ªæ—¶ï¼Œç›´æ¥è¿”å›*/</span></span><br><span class="line">        <span class="keyword">if</span>(nums==<span class="keyword">null</span>||nums.length&lt;<span class="number">4</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*å¯¹æ•°ç»„è¿›è¡Œä»å°åˆ°å¤§æ’åº*/</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="comment">/*æ•°ç»„é•¿åº¦*/</span></span><br><span class="line">        <span class="keyword">int</span> length=nums.length;</span><br><span class="line">        <span class="comment">/*å®šä¹‰4ä¸ªæŒ‡é’ˆkï¼Œiï¼Œjï¼Œh  kä»0å¼€å§‹éå†ï¼Œiä»k+1å¼€å§‹éå†ï¼Œç•™ä¸‹jå’Œhï¼ŒjæŒ‡å‘i+1ï¼ŒhæŒ‡å‘æ•°ç»„æœ€å¤§å€¼*/</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;length-<span class="number">3</span>;k++)&#123;</span><br><span class="line">            <span class="comment">/*å½“kçš„å€¼ä¸å‰é¢çš„å€¼ç›¸ç­‰æ—¶å¿½ç•¥*/</span></span><br><span class="line">            <span class="keyword">if</span>(k&gt;<span class="number">0</span>&amp;&amp;nums[k]==nums[k-<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*è·å–å½“å‰æœ€å°å€¼ï¼Œå¦‚æœæœ€å°å€¼æ¯”ç›®æ ‡å€¼å¤§ï¼Œè¯´æ˜åé¢è¶Šæ¥è¶Šå¤§çš„å€¼æ ¹æœ¬æ²¡æˆ*/</span></span><br><span class="line">            <span class="keyword">int</span> min1=nums[k]+nums[k+<span class="number">1</span>]+nums[k+<span class="number">2</span>]+nums[k+<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span>(min1&gt;target)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*è·å–å½“å‰æœ€å¤§å€¼ï¼Œå¦‚æœæœ€å¤§å€¼æ¯”ç›®æ ‡å€¼å°ï¼Œè¯´æ˜åé¢è¶Šæ¥è¶Šå°çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/</span></span><br><span class="line">            <span class="keyword">int</span> max1=nums[k]+nums[length-<span class="number">1</span>]+nums[length-<span class="number">2</span>]+nums[length-<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span>(max1&lt;target)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*ç¬¬äºŒå±‚å¾ªç¯iï¼Œåˆå§‹å€¼æŒ‡å‘k+1*/</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=k+<span class="number">1</span>;i&lt;length-<span class="number">2</span>;i++)&#123;</span><br><span class="line">                <span class="comment">/*å½“içš„å€¼ä¸å‰é¢çš„å€¼ç›¸ç­‰æ—¶å¿½ç•¥*/</span></span><br><span class="line">                <span class="keyword">if</span>(i&gt;k+<span class="number">1</span>&amp;&amp;nums[i]==nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/*å®šä¹‰æŒ‡é’ˆjæŒ‡å‘i+1*/</span></span><br><span class="line">                <span class="keyword">int</span> j=i+<span class="number">1</span>;</span><br><span class="line">                <span class="comment">/*å®šä¹‰æŒ‡é’ˆhæŒ‡å‘æ•°ç»„æœ«å°¾*/</span></span><br><span class="line">                <span class="keyword">int</span> h=length-<span class="number">1</span>;</span><br><span class="line">                <span class="comment">/*è·å–å½“å‰æœ€å°å€¼ï¼Œå¦‚æœæœ€å°å€¼æ¯”ç›®æ ‡å€¼å¤§ï¼Œè¯´æ˜åé¢è¶Šæ¥è¶Šå¤§çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/</span></span><br><span class="line">                <span class="keyword">int</span> min=nums[k]+nums[i]+nums[j]+nums[j+<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span>(min&gt;target)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/*è·å–å½“å‰æœ€å¤§å€¼ï¼Œå¦‚æœæœ€å¤§å€¼æ¯”ç›®æ ‡å€¼å°ï¼Œè¯´æ˜åé¢è¶Šæ¥è¶Šå°çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/</span></span><br><span class="line">                <span class="keyword">int</span> max=nums[k]+nums[i]+nums[h]+nums[h-<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span>(max&lt;target)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/*å¼€å§‹jæŒ‡é’ˆå’ŒhæŒ‡é’ˆçš„è¡¨æ¼”ï¼Œè®¡ç®—å½“å‰å’Œï¼Œå¦‚æœç­‰äºç›®æ ‡å€¼ï¼Œj++å¹¶å»é‡ï¼Œh--å¹¶å»é‡ï¼Œå½“å½“å‰å’Œå¤§äºç›®æ ‡å€¼æ—¶h--ï¼Œå½“å½“å‰å’Œå°äºç›®æ ‡å€¼æ—¶j++*/</span></span><br><span class="line">                <span class="keyword">while</span> (j&lt;h)&#123;</span><br><span class="line">                    <span class="keyword">int</span> curr=nums[k]+nums[i]+nums[j]+nums[h];</span><br><span class="line">                    <span class="keyword">if</span>(curr==target)&#123;</span><br><span class="line">                        result.add(Arrays.asList(nums[k],nums[i],nums[j],nums[h]));</span><br><span class="line">                        j++;</span><br><span class="line">                        <span class="keyword">while</span>(j&lt;h&amp;&amp;nums[j]==nums[j-<span class="number">1</span>])&#123;</span><br><span class="line">                            j++;</span><br><span class="line">                        &#125;</span><br><span class="line">                        h--;</span><br><span class="line">                        <span class="keyword">while</span>(j&lt;h&amp;&amp;i&lt;h&amp;&amp;nums[h]==nums[h+<span class="number">1</span>])&#123;</span><br><span class="line">                            h--;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(curr&gt;target)&#123;</span><br><span class="line">                        h--;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                       j++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="242-Valid-Anagram"><a href="#242-Valid-Anagram" class="headerlink" title="242. Valid Anagram"></a><a href="https://leetcode.com/problems/valid-anagram/" target="_blank" rel="noopener">242. Valid Anagram</a></h1><p>Given two strings <em>s</em> and <em>t</em> , write a function to determine if <em>t</em> is an anagram of <em>s</em>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;anagram&quot;, t = &quot;nagaram&quot;</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;rat&quot;, t = &quot;car&quot;</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><p><strong>Note:</strong><br>You may assume the string contains only lowercase alphabets.</p><p><strong>Follow up:</strong><br>What if the inputs contain unicode characters? How would you adapt your solution to such case?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAnagram</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.length() != t.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            count[s.charAt(i) - <span class="string">'a'</span>]++;</span><br><span class="line">            count[t.charAt(i) - <span class="string">'a'</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : count) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num != <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="49-Group-Anagrams"><a href="#49-Group-Anagrams" class="headerlink" title="49. Group Anagrams"></a><a href="https://leetcode.com/problems/group-anagrams/" target="_blank" rel="noopener">49. Group Anagrams</a></h1><p>Given an array of strings, group anagrams together.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;],</span><br><span class="line">Output:</span><br><span class="line">[</span><br><span class="line">  [&quot;ate&quot;,&quot;eat&quot;,&quot;tea&quot;],</span><br><span class="line">  [&quot;nat&quot;,&quot;tan&quot;],</span><br><span class="line">  [&quot;bat&quot;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ul><li>All inputs will be in lowercase.</li><li>The order of your output does not matter.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @lc app=leetcode.cn id=49 lang=java</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * [49] å­—æ¯å¼‚ä½è¯åˆ†ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="comment">//time:Oï¼ˆm + nï¼‰ m:strsé•¿åº¦ n:strsä¸­æœ€å¤§Stringçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">//space: Oï¼ˆnï¼‰çº§åˆ«</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) &#123;</span><br><span class="line">        <span class="comment">//countingä¸ºkey, å­—ç¬¦ä¸²ä¸ºvalue</span></span><br><span class="line">        <span class="comment">//è®²aabbcå’Œababcå­˜å…¥a2b2c1</span></span><br><span class="line">        HashMap&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(String str : strs) &#123;</span><br><span class="line">            <span class="comment">//å¯¹å½“å‰çš„å•ä¸ªå•è¯è¿›è¡Œcounting sort</span></span><br><span class="line">            <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">            <span class="keyword">for</span>(Character ch : str.toCharArray()) &#123;</span><br><span class="line">                count[ch - <span class="string">'a'</span>]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è®¾ç½®åŸºå‡†</span></span><br><span class="line">            String s = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count.length; i++) &#123;</span><br><span class="line">                <span class="comment">//ç­‰äº0ï¼Œè¯´æ˜å­—æ¯æ²¡æœ‰å‡ºç°ï¼Œåœ¨è¿™é‡Œåªæ•°å‡ºç°è¿‡çš„å­—æ¯</span></span><br><span class="line">                <span class="keyword">if</span>(count[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">//valueOfå°†å­—æ¯å‡ºç°çš„æ¬¡æ•°ä»Intå‹è½¬æ¢æˆStringç±»å‹</span></span><br><span class="line">                    s += String.valueOf(count[i]) + String.valueOf((<span class="keyword">char</span>)(i + <span class="string">'a'</span>));</span><br><span class="line">                    <span class="comment">//ä¹‹å‰å‡å»a,ç°åœ¨åŠ ä¸Šaï¼Œå°±æ¢å¤åˆ°äº†a</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(s)) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœå·²ç»åŒ…å«äº†ï¼Œå°±å–å‡ºæ¥ï¼Œç„¶ååŠ è¿›å»</span></span><br><span class="line">                List&lt;String&gt; list = map.get(s);</span><br><span class="line">                list.add(str);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœç¬¬ä¸€æ¬¡å‡ºç°</span></span><br><span class="line">                List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//åˆå§‹åŒ–List</span></span><br><span class="line">                list.add(str);<span class="comment">//å°†2a2b1cå’ŒaabbcåŠ å…¥åˆ°listä¸­</span></span><br><span class="line">                map.put(s, list);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;(map.values());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @lc code=end</span></span><br></pre></td></tr></table></figure><h1 id="14-Longest-Common-Prefix"><a href="#14-Longest-Common-Prefix" class="headerlink" title="14. Longest Common Prefix"></a><a href="https://leetcode.com/problems/longest-common-prefix/" target="_blank" rel="noopener">14. Longest Common Prefix</a></h1><p>Write a function to find the longest common prefix string amongst an array of strings.</p><p>If there is no common prefix, return an empty string <code>&quot;&quot;</code>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]</span><br><span class="line">Output: &quot;fl&quot;</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]</span><br><span class="line">Output: &quot;&quot;</span><br><span class="line">Explanation: There is no common prefix among the input strings.</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><p>All given inputs are in lowercase letters <code>a-z</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @lc app=leetcode.cn id=14 lang=java</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * [14] æœ€é•¿å…¬å…±å‰ç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestCommonPrefix</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(strs.length == <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       String ans = strs[<span class="number">0</span>];</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line">           <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">           <span class="keyword">for</span>(;j &lt; ans.length() &amp;&amp; j &lt; strs[i].length();j++) &#123;</span><br><span class="line">               <span class="keyword">if</span>(ans.charAt(j) != strs[i].charAt(j))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           ans = ans.substring(<span class="number">0</span>, j);</span><br><span class="line">           <span class="keyword">if</span>(ans.equals(<span class="string">""</span>))</span><br><span class="line">                <span class="keyword">return</span> ans;</span><br><span class="line">       &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;186-reverse-words-in-a-string-ii&quot;&gt;&lt;a href=&quot;#186-reverse-words-in-a-string-ii&quot; class=&quot;headerlink&quot; title=&quot;186.reverse-words-in-a-strin
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://yoursite.com/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Binary Search and LinkedList LEETCODE 100 DAY1</title>
    <link href="http://yoursite.com/2020/06/22/Binary-Search-and-LinkedList-LEETCODE-100-DAY1/"/>
    <id>http://yoursite.com/2020/06/22/Binary-Search-and-LinkedList-LEETCODE-100-DAY1/</id>
    <published>2020-06-22T01:52:34.000Z</published>
    <updated>2020-06-23T01:17:03.252Z</updated>
    
    <content type="html"><![CDATA[<h1 id="74-Search-a-2D-Matrix"><a href="#74-Search-a-2D-Matrix" class="headerlink" title="74. Search a 2D Matrix"></a><a href="https://leetcode.com/problems/search-a-2d-matrix/" target="_blank" rel="noopener">74. Search a 2D Matrix</a></h1><p>Write an efficient algorithm that searches for a value in an <em>m</em> x <em>n</em> matrix. This matrix has the following properties:</p><ul><li>Integers in each row are sorted from left to right.</li><li>The first integer of each row is greater than the last integer of the previous row.</li></ul><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">matrix = [</span><br><span class="line">  [1,   3,  5,  7],</span><br><span class="line">  [10, 11, 16, 20],</span><br><span class="line">  [23, 30, 34, 50]</span><br><span class="line">]</span><br><span class="line">target = 3</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">matrix = [</span><br><span class="line">  [1,   3,  5,  7],</span><br><span class="line">  [10, 11, 16, 20],</span><br><span class="line">  [23, 30, 34, 50]</span><br><span class="line">]</span><br><span class="line">target = 13</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">searchMatrix</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> row = matrix.length;</span><br><span class="line">        <span class="keyword">int</span> col = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = row * col - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> value = matrix[mid / col][mid % col]; </span><br><span class="line">            <span class="keyword">if</span> (value == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &lt; target) &#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                end = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="240-Search-a-2D-Matrix-II"><a href="#240-Search-a-2D-Matrix-II" class="headerlink" title="240.Search a 2D Matrix II"></a><a href="https://leetcode.com/problems/search-a-2d-matrix-ii/" target="_blank" rel="noopener">240.Search a 2D Matrix II</a></h1><p>Write an efficient algorithm that searches for a value in an <em>m</em> x <em>n</em> matrix. This matrix has the following properties:</p><ul><li>Integers in each row are sorted in ascending from left to right.</li><li>Integers in each column are sorted in ascending from top to bottom.</li></ul><p><strong>Example:</strong></p><p>Consider the following matrix:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  [1,   4,  7, 11, 15],</span><br><span class="line">  [2,   5,  8, 12, 19],</span><br><span class="line">  [3,   6,  9, 16, 22],</span><br><span class="line">  [10, 13, 14, 17, 24],</span><br><span class="line">  [18, 21, 23, 26, 30]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>Given target = <code>5</code>, return <code>true</code>.</p><p>Given target = <code>20</code>, return <code>false</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">searchMatrix</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> col = matrix[<span class="number">0</span>].length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (col &gt;= <span class="number">0</span> &amp;&amp; row &lt;= matrix.length - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target == matrix[row][col]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &lt; matrix[row][col]) &#123;</span><br><span class="line">                col--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                row++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="35-Search-Insert-Position"><a href="#35-Search-Insert-Position" class="headerlink" title="35. Search Insert Position"></a><a href="https://leetcode.com/problems/search-insert-position/" target="_blank" rel="noopener">35. Search Insert Position</a></h1><p>Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order.</p><p>You may assume no duplicates in the array.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,3,5,6], 5</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,3,5,6], 2</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,3,5,6], 7</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure><p><strong>Example 4:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,3,5,6], 0</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆï¼Œæ’å…¥ä½ç½®æœ‰å¯èƒ½åœ¨æ•°ç»„çš„æœ«å°¾ï¼ˆé¢˜ç›®ä¸­çš„ç¤ºä¾‹ 3ï¼‰ï¼Œéœ€è¦å•ç‹¬åˆ¤æ–­ï¼›</span></span><br><span class="line"><span class="comment">// å…¶æ¬¡ï¼Œå¦‚æœå¾…æ’å…¥å…ƒç´ æ¯”æœ€åä¸€ä¸ªå…ƒç´ ä¸¥æ ¼å°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæ•°ç»„ä¸­æœ‰å’Œæ’å…¥å…ƒç´ ä¸€æ ·çš„å…ƒç´ ï¼Œè¿”å›ä»»æ„ä¸€ä¸ªä½ç½®å³å¯ï¼›</span></span><br><span class="line"><span class="comment">// å¦åˆ™ï¼Œæ’å…¥çš„ä½ç½®åº”è¯¥æ˜¯ä¸¥æ ¼å¤§äº target çš„ç¬¬ 1 ä¸ªå…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">//å› æ­¤ï¼Œä¸¥æ ¼å°äº target çš„å…ƒç´ ä¸€å®šä¸æ˜¯è§£ï¼Œæ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">searchInsert</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[len - <span class="number">1</span>] &lt; target) &#123;</span><br><span class="line">            <span class="keyword">return</span> len;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// ä¸¥æ ¼å°äº target çš„å…ƒç´ ä¸€å®šä¸æ˜¯è§£</span></span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="374-Guess-Number-Higher-or-Lower-https-leetcode-com-problems-guess-number-higher-or-lower"><a href="#374-Guess-Number-Higher-or-Lower-https-leetcode-com-problems-guess-number-higher-or-lower" class="headerlink" title="[374. Guess Number Higher or Lower]https://leetcode.com/problems/guess-number-higher-or-lower/"></a>[374. Guess Number Higher or Lower]<a href="https://leetcode.com/problems/guess-number-higher-or-lower/" target="_blank" rel="noopener">https://leetcode.com/problems/guess-number-higher-or-lower/</a></h1><p>We are playing the Guess Game. The game is as follows:</p><p>I pick a number from <strong>1</strong> to <strong><em>n\</em></strong>. You have to guess which number I picked.</p><p>Every time you guess wrong, Iâ€™ll tell you whether the number is higher or lower.</p><p>You call a pre-defined API <code>guess(int num)</code> which returns 3 possible results (<code>-1</code>, <code>1</code>, or <code>0</code>):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-1 : My number is lower</span><br><span class="line"> 1 : My number is higher</span><br><span class="line"> 0 : Congrats! You got it!</span><br></pre></td></tr></table></figure><p><strong>Example :</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n = 10, pick = 6</span><br><span class="line">Output: 6</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> <span class="keyword">extends</span> <span class="title">GuessGame</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">guessNumber</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> right = n;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right + <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> guessNum = guess(mid);</span><br><span class="line">            <span class="keyword">if</span> (guessNum == -<span class="number">1</span>) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;<span class="comment">// ä¸­ä½æ•°æ¯”çŒœçš„æ•°å¤§ï¼Œå› æ­¤æ¯”ä¸­ä½æ•°å¤§çš„æ•°åŒ…æ‹¬ä¸­ä½æ•°éƒ½ä¸æ˜¯ç›®æ ‡å…ƒç´ </span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="278-First-Bad-Version"><a href="#278-First-Bad-Version" class="headerlink" title="278. First Bad Version"></a><a href="https://leetcode.com/problems/first-bad-version/" target="_blank" rel="noopener">278. First Bad Version</a></h1><p>You are a product manager and currently leading a team to develop a new product. Unfortunately, the latest version of your product fails the quality check. Since each version is developed based on the previous version, all the versions after a bad version are also bad.</p><p>Suppose you have <code>n</code> versions <code>[1, 2, ..., n]</code> and you want to find out the first bad one, which causes all the following ones to be bad.</p><p>You are given an API <code>bool isBadVersion(version)</code> which will return whether <code>version</code> is bad. Implement a function to find the first bad version. You should minimize the number of calls to the API.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Given n = 5, and version = 4 is the first bad version.</span><br><span class="line"></span><br><span class="line">call isBadVersion(3) -&gt; false</span><br><span class="line">call isBadVersion(5) -&gt; true</span><br><span class="line">call isBadVersion(4) -&gt; true</span><br><span class="line"></span><br><span class="line">Then 4 is the first bad version.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* The isBadVersion API is defined in the parent class VersionControl.</span></span><br><span class="line"><span class="comment">      boolean isBadVersion(int version); */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> <span class="keyword">extends</span> <span class="title">VersionControl</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">firstBadVersion</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> right = n;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(isBadVersion(mid)) &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;               </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="34-Find-First-and-Last-Position-of-Element-in-Sorted-Array"><a href="#34-Find-First-and-Last-Position-of-Element-in-Sorted-Array" class="headerlink" title="34. Find First and Last Position of Element in Sorted Array"></a><a href="https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener">34. Find First and Last Position of Element in Sorted Array</a></h1><p>Given an array of integers <code>nums</code> sorted in ascending order, find the starting and ending position of a given <code>target</code> value.</p><p>Your algorithmâ€™s runtime complexity must be in the order of <em>O</em>(log <em>n</em>).</p><p>If the target is not found in the array, return <code>[-1, -1]</code>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [5,7,7,8,8,10], target = 8</span><br><span class="line">Output: [3,4]</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [5,7,7,8,8,10], target = 6</span><br><span class="line">Output: [-1,-1]</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] searchRange(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length ==<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> start = findFirst(nums, target);</span><br><span class="line">        <span class="keyword">if</span>(start == -<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> end = findLast(nums, target);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;start, end&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findFirst</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (start + <span class="number">1</span> &lt; end) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &lt; target) &#123;</span><br><span class="line">                start = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                end = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums[start] == target) <span class="keyword">return</span> start;</span><br><span class="line">        <span class="keyword">if</span>(nums[end] == target) <span class="keyword">return</span> end;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLast</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (start + <span class="number">1</span> &lt; end) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &gt; target) &#123;</span><br><span class="line">                end = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                start = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums[end] == target) <span class="keyword">return</span> end;</span><br><span class="line">        <span class="keyword">if</span>(nums[start] == target) <span class="keyword">return</span> start;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="162-Find-Peak-Element"><a href="#162-Find-Peak-Element" class="headerlink" title="162.Find Peak Element"></a><a href="https://leetcode.com/problems/find-peak-element/" target="_blank" rel="noopener">162.Find Peak Element</a></h1><p>A peak element is an element that is greater than its neighbors.</p><p>Given an input array <code>nums</code>, where <code>nums[i] â‰  nums[i+1]</code>, find a peak element and return its index.</p><p>The array may contain multiple peaks, in that case return the index to any one of the peaks is fine.</p><p>You may imagine that <code>nums[-1] = nums[n] = -âˆ</code>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,2,3,1]</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: 3 is a peak element and your function should return the index number 2.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,2,1,3,5,6,4]</span><br><span class="line">Output: 1 or 5 </span><br><span class="line">Explanation: Your function can return either index number 1 where the peak element is 2, </span><br><span class="line">             or index number 5 where the peak element is 6.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">            <span class="keyword">if</span> (start == end) <span class="keyword">return</span> start;</span><br><span class="line">            <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &gt;= nums[mid + <span class="number">1</span>]) &#123;</span><br><span class="line">                end = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="141-Linked-List-Cycle"><a href="#141-Linked-List-Cycle" class="headerlink" title="141. Linked List Cycle"></a><a href="https://leetcode.com/problems/linked-list-cycle/" target="_blank" rel="noopener">141. Linked List Cycle</a></h1><p>Given a linked list, determine if it has a cycle in it.</p><p>To represent a cycle in the given linked list, we use an integer <code>pos</code> which represents the position (0-indexed) in the linked list where tail connects to. If <code>pos</code> is <code>-1</code>, then there is no cycle in the linked list.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [3,2,0,-4], pos = 1</span><br><span class="line">Output: true</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the second node.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png" alt="img"></p><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [1,2], pos = 0</span><br><span class="line">Output: true</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the first node.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test2.png" alt="img"></p><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [1], pos = -1</span><br><span class="line">Output: false</span><br><span class="line">Explanation: There is no cycle in the linked list.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test3.png" alt="img"></p><p><strong>Follow up:</strong></p><p>Can you solve it using <em>O(1)</em> (i.e. constant) memory?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        ListNode fast = head;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">            <span class="keyword">if</span> (slow == fast) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="142-Linked-List-Cycle-II"><a href="#142-Linked-List-Cycle-II" class="headerlink" title="142. Linked List Cycle II"></a><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">142. Linked List Cycle II</a></h1><p>Given a linked list, return the node where the cycle begins. If there is no cycle, return <code>null</code>.</p><p>To represent a cycle in the given linked list, we use an integer <code>pos</code> which represents the position (0-indexed) in the linked list where tail connects to. If <code>pos</code> is <code>-1</code>, then there is no cycle in the linked list.</p><p><strong>Note:</strong> Do not modify the linked list.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [3,2,0,-4], pos = 1</span><br><span class="line">Output: tail connects to node index 1</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the second node.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png" alt="img"></p><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [1,2], pos = 0</span><br><span class="line">Output: tail connects to node index 0</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the first node.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test2.png" alt="img"></p><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head = [1], pos = -1</span><br><span class="line">Output: no cycle</span><br><span class="line">Explanation: There is no cycle in the linked list.</span><br></pre></td></tr></table></figure><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test3.png" alt="img"></p><p><strong>Follow-up</strong>:<br>Can you solve it without using extra space?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">detectCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        ListNode fast = head;</span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">            <span class="keyword">if</span> (fast == slow) &#123;</span><br><span class="line">                ListNode slow2 = head;</span><br><span class="line">                <span class="keyword">while</span>(slow != slow2) &#123;</span><br><span class="line">                    slow = slow.next;</span><br><span class="line">                    slow2 = slow2.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> slow;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="83-Remove-Duplicates-from-Sorted-List"><a href="#83-Remove-Duplicates-from-Sorted-List" class="headerlink" title="83. Remove Duplicates from Sorted List"></a><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list/" target="_blank" rel="noopener">83. Remove Duplicates from Sorted List</a></h1><p>Given a sorted linked list, delete all duplicates such that each element appear only <em>once</em>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;1-&gt;2</span><br><span class="line">Output: 1-&gt;2</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span><br><span class="line">Output: 1-&gt;2-&gt;3</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">        ListNode cur = head;</span><br><span class="line">        <span class="keyword">while</span> (cur.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cur.next.val == cur.val) &#123;</span><br><span class="line">                cur.next = cur.next.next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cur = cur.next;<span class="comment">// movre forward when do not have replcaited item;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="82-Remove-Duplicates-from-Sorted-List-II"><a href="#82-Remove-Duplicates-from-Sorted-List-II" class="headerlink" title="82. Remove Duplicates from Sorted List II"></a><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/" target="_blank" rel="noopener">82. Remove Duplicates from Sorted List II</a></h1><p>Given a sorted linked list, delete all nodes that have duplicate numbers, leaving only <em>distinct</em> numbers from the original list.</p><p>Return the linked list sorted as well.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5</span><br><span class="line">Output: 1-&gt;2-&gt;5</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;1-&gt;1-&gt;2-&gt;3</span><br><span class="line">Output: 2-&gt;3</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//åˆ é™¤å½“å‰èŠ‚ç‚¹çš„æ–¹æ³•æ˜¯åœ¨å°†è¦åˆ é™¤çš„èŠ‚ç‚¹å‰é¢å†åŠ ä¸€ä¸ªdummyèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½æŒ‡å‘dummy.next.next,ä¹Ÿå°±æ˜¯åˆ é™¤dummy.nextã€‚</span></span><br><span class="line">        dummy.next = head;<span class="comment">//è¿™æ ·æ‰èƒ½åˆ é™¤å¤´æŒ‡é’ˆèŠ‚ç‚¹</span></span><br><span class="line">        ListNode p = dummy;</span><br><span class="line">        <span class="keyword">while</span> (p.next != <span class="keyword">null</span> &amp;&amp; p.next.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(p.next.val == p.next.next.val) &#123;</span><br><span class="line">                <span class="comment">//ç”¨æ¥åˆ é™¤å…¨éƒ¨çš„é‡å¤èŠ‚ç‚¹ï¼Œä¿å­˜ä¸€ä¸‹é‡å¤å€¼</span></span><br><span class="line">                <span class="keyword">int</span> sameNum = p.next.val;</span><br><span class="line">                <span class="keyword">while</span> (p.next != <span class="keyword">null</span> &amp;&amp; p.next.val == sameNum) &#123;</span><br><span class="line">                    p.next = p.next.next;</span><br><span class="line">                &#125; </span><br><span class="line">             &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                 p = p.next;</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;74-Search-a-2D-Matrix&quot;&gt;&lt;a href=&quot;#74-Search-a-2D-Matrix&quot; class=&quot;headerlink&quot; title=&quot;74. Search a 2D Matrix&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://leetc
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://yoursite.com/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>BFS AND DFS</title>
    <link href="http://yoursite.com/2020/06/05/BFS-AND-DFS/"/>
    <id>http://yoursite.com/2020/06/05/BFS-AND-DFS/</id>
    <published>2020-06-05T07:03:58.000Z</published>
    <updated>2020-06-18T04:37:33.608Z</updated>
    
    <content type="html"><![CDATA[<h1 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h1><h2 id="å›¾çš„BFS"><a href="#å›¾çš„BFS" class="headerlink" title="å›¾çš„BFS"></a>å›¾çš„BFS</h2><h4 id="1162-åœ°å›¾åˆ†æ"><a href="#1162-åœ°å›¾åˆ†æ" class="headerlink" title="1162. åœ°å›¾åˆ†æ"></a><a href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/" target="_blank" rel="noopener">1162. åœ°å›¾åˆ†æ</a></h4><p>å¯¹äºå›¾çš„BFSä¹Ÿæ˜¯ä¸€æ ·æ»´ï½ ä¸Treeçš„BFSåŒºåˆ«å¦‚ä¸‹ï¼š<br>1ã€treeåªæœ‰1ä¸ªrootï¼Œè€Œå›¾å¯ä»¥æœ‰å¤šä¸ªæºç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æŠŠå¤šä¸ªæºç‚¹éƒ½å…¥é˜Ÿã€‚<br>2ã€treeæ˜¯æœ‰å‘çš„å› æ­¤ä¸éœ€è¦æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼Œè€Œå¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå¿…é¡»å¾—æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼<br>å¹¶ä¸”ä¸ºäº†é˜²æ­¢æŸä¸ªèŠ‚ç‚¹å¤šæ¬¡å…¥é˜Ÿï¼Œéœ€è¦åœ¨å…¥é˜Ÿä¹‹å‰å°±å°†å…¶è®¾ç½®æˆå·²è®¿é—®ï¼</p><p>ä½œè€…ï¼šsweetiee<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/</a></p><p><img src="https://pic.leetcode-cn.com/367df5172fd16d2637e591f6586d146772758438c66660c86719ffb2d36eb14d-image.png" alt="BFS"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxDistance</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dx = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] dy = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> m = grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="comment">// å…ˆæŠŠæ‰€æœ‰çš„é™†åœ°éƒ½å…¥é˜Ÿã€‚</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;i, j&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»å„ä¸ªé™†åœ°å¼€å§‹ï¼Œä¸€åœˆä¸€åœˆçš„éå†æµ·æ´‹ï¼Œæœ€åéå†åˆ°çš„æµ·æ´‹å°±æ˜¯ç¦»é™†åœ°æœ€è¿œçš„æµ·æ´‹ã€‚</span></span><br><span class="line">        <span class="keyword">boolean</span> hasOcean = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span>[] point = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            point = queue.poll();</span><br><span class="line">            <span class="keyword">int</span> x = point[<span class="number">0</span>], y = point[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// å–å‡ºé˜Ÿåˆ—çš„å…ƒç´ ï¼Œå°†å…¶å››å‘¨çš„æµ·æ´‹å…¥é˜Ÿã€‚</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> newX = x + dx[i];</span><br><span class="line">                <span class="keyword">int</span> newY = y + dy[i];</span><br><span class="line">                <span class="keyword">if</span> (newX &lt; <span class="number">0</span> || newX &gt;= m || newY &lt; <span class="number">0</span> || newY &gt;= n || grid[newX][newY] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                grid[newX][newY] = grid[x][y] + <span class="number">1</span>; <span class="comment">// è¿™é‡Œæˆ‘ç›´æ¥ä¿®æ”¹äº†åŸæ•°ç»„ï¼Œå› æ­¤å°±ä¸éœ€è¦é¢å¤–çš„æ•°ç»„æ¥æ ‡å¿—æ˜¯å¦è®¿é—®</span></span><br><span class="line">                hasOcean = <span class="keyword">true</span>;</span><br><span class="line">                queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;newX, newY&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ²¡æœ‰é™†åœ°æˆ–è€…æ²¡æœ‰æµ·æ´‹ï¼Œè¿”å›-1ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (point == <span class="keyword">null</span> || !hasOcean) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›æœ€åä¸€æ¬¡éå†åˆ°çš„æµ·æ´‹çš„è·ç¦»ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> grid[point[<span class="number">0</span>]][point[<span class="number">1</span>]] - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="BFSéå†çŸ©é˜µ"><a href="#BFSéå†çŸ©é˜µ" class="headerlink" title="BFSéå†çŸ©é˜µ"></a><a href="https://leetcode-cn.com/problems/shun-shi-zhen-da-yin-ju-zhen-lcof/solution/shun-shi-zhen-da-yin-ju-zhen-by-leetcode-solution/" target="_blank" rel="noopener">BFSéå†çŸ©é˜µ</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] spiralOrder(<span class="keyword">int</span>[][] matrix) &#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rows = matrix.length, columns = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][columns];</span><br><span class="line">        <span class="keyword">int</span> total = rows * columns;</span><br><span class="line">        <span class="keyword">int</span>[] order = <span class="keyword">new</span> <span class="keyword">int</span>[total];</span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">0</span>, column = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[][] directions = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">int</span> directionIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">            order[i] = matrix[row][column];</span><br><span class="line">            visited[row][column] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">int</span> nextRow = row + directions[directionIndex][<span class="number">0</span>], nextColumn = column + directions[directionIndex][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (nextRow &lt; <span class="number">0</span> || nextRow &gt;= rows || nextColumn &lt; <span class="number">0</span> || nextColumn &gt;= columns || visited[nextRow][nextColumn]) &#123;</span><br><span class="line">                directionIndex = (directionIndex + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            row += directions[directionIndex][<span class="number">0</span>];</span><br><span class="line">            column += directions[directionIndex][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒç›®å½•"><a href="#å‚è€ƒç›®å½•" class="headerlink" title="å‚è€ƒç›®å½•"></a>å‚è€ƒç›®å½•</h1><ul><li><p><a href="https://mp.weixin.qq.com/mp/homepage?__biz=MzA5ODk3ODA4OQ==&amp;hid=1&amp;sn=55c59cffea8c1340fa26bd05a5da3fcd&amp;scene=1&amp;devicetype=iOS13.3.1&amp;version=17000b24&amp;lang=en&amp;nettype=WIFI&amp;ascene=7&amp;session_us=gh_cc856cc5e4d6&amp;fontScale=100&amp;wx_header=1" target="_blank" rel="noopener">ç”œå§¨</a></p></li><li><p><a href="https://mp.weixin.qq.com/s/G2I57RPxGC913-BUcOLCUQ" target="_blank" rel="noopener">å°å·ç®—æ³•ç›®å½•</a></p></li><li><a href="https://mp.weixin.qq.com/mp/homepage?__biz=MzA5ODk3ODA4OQ==&amp;hid=1&amp;sn=55c59cffea8c1340fa26bd05a5da3fcd&amp;scene=1&amp;devicetype=iOS13.3.1&amp;version=17000b24&amp;lang=en&amp;nettype=WIFI&amp;ascene=7&amp;session_us=gh_cc856cc5e4d6&amp;fontScale=100&amp;wx_header=1" target="_blank" rel="noopener">å¤§è±¡ğŸ˜</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;BFS&quot;&gt;&lt;a href=&quot;#BFS&quot; class=&quot;headerlink&quot; title=&quot;BFS&quot;&gt;&lt;/a&gt;BFS&lt;/h1&gt;&lt;h2 id=&quot;å›¾çš„BFS&quot;&gt;&lt;a href=&quot;#å›¾çš„BFS&quot; class=&quot;headerlink&quot; title=&quot;å›¾çš„BFS&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://yoursite.com/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Binary Search.</title>
    <link href="http://yoursite.com/2020/06/04/Binary-Search/"/>
    <id>http://yoursite.com/2020/06/04/Binary-Search/</id>
    <published>2020-06-04T02:28:54.000Z</published>
    <updated>2020-06-08T05:37:47.379Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://pic.leetcode-cn.com/e120bac189db2fc912dce550d9c46746a312f362ee3d6d40e799aad8db69ae6f-image.png" alt="BS Mind"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/æ’é™¤æ³•æ‰¾äºŒåˆ†.png" alt="æ’é™¤æ³•æ‰¾äºŒåˆ†"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/è¾¹ç•Œæ”¶ç¼©é—®é¢˜.png" alt="è¾¹ç•Œæ”¶ç¼©é—®é¢˜"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/é™åˆ¶æ¡ä»¶.png" alt="é™åˆ¶æ¡ä»¶"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> des)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> low = <span class="number">0</span>, high = array.length - <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">         <span class="keyword">int</span> mid = low + (high - low) / <span class="number">2</span>;<span class="comment">//int mid = (left + right) &gt;&gt; 1;</span></span><br><span class="line">         <span class="keyword">if</span> (des == array[mid]) &#123;</span><br><span class="line">             <span class="keyword">return</span> mid;</span><br><span class="line">         &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &lt; array[mid]) &#123;</span><br><span class="line">             high = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mySqrt</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šé’ˆå¯¹ç‰¹æ®Šæµ‹è¯•ç”¨ä¾‹ï¼Œä¾‹å¦‚ 2147395599</span></span><br><span class="line">        <span class="comment">// è¦æŠŠæœç´¢çš„èŒƒå›´è®¾ç½®æˆé•¿æ•´å‹</span></span><br><span class="line">        <span class="keyword">long</span> left = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> right = x / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œä¸€å®šå–å³ä¸­ä½æ•°ï¼Œå¦‚æœå–å·¦ä¸­ä½æ•°ï¼Œä»£ç ä¼šè¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">// long mid = left + (right - left + 1) / 2;</span></span><br><span class="line">            <span class="keyword">long</span> mid = (left + right + <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">long</span> square = mid * mid;</span><br><span class="line">            <span class="keyword">if</span> (square &gt; x) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å› ä¸ºä¸€å®šå­˜åœ¨ï¼Œå› æ­¤æ— éœ€åå¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://mp.weixin.qq.com/s/fIDeC5yQUJUO4KCwfjziow" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾</a></p><p><a href="https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/" target="_blank" rel="noopener">Binary Search Solution  in Leetcode</a></p><p><a href="https://leetcode-cn.com/problems/binary-search/solution/er-fen-cha-zhao-xiang-jie-by-labuladong/" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾ç»†èŠ‚è¯¦è§£_labuladong</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://pic.leetcode-cn.com/e120bac189db2fc912dce550d9c46746a312f362ee3d6d40e799aad8db69ae6f-image.png&quot; alt=&quot;BS Mind&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://yoursite.com/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Everything About TreeMap</title>
    <link href="http://yoursite.com/2020/03/21/Everything-About-TreeMap/"/>
    <id>http://yoursite.com/2020/03/21/Everything-About-TreeMap/</id>
    <published>2020-03-21T06:07:11.000Z</published>
    <updated>2020-03-21T06:11:03.297Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>æ–‡ç« çš„å†…å®¹åŸºäºJDK1.7è¿›è¡Œåˆ†æï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢åŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äº1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜ã€‚</p><p>TreeMapå®ç°äº†SotredMapæ¥å£ï¼Œå®ƒæ˜¯æœ‰åºçš„é›†åˆã€‚è€Œä¸”æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ç»“æ„ï¼Œæ¯ä¸ªkey-valueéƒ½ä½œä¸ºä¸€ä¸ªçº¢é»‘æ ‘çš„èŠ‚ç‚¹ã€‚å¦‚æœåœ¨è°ƒç”¨TreeMapçš„æ„é€ å‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œåˆ™æ ¹æ®keyæ‰§è¡Œè‡ªç„¶æ’åºã€‚è¿™ç‚¹ä¼šåœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­åšè¯´æ˜ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™æŒ‰ç…§æ¯”è¾ƒå™¨æ¥è¿›è¡Œæ’åºã€‚</p><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">NavigableMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializable, Cloneable, Map&lt;K,V&gt;, NavigableMap&lt;K,V&gt;, SortedMap&lt;K,V&gt;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="keyword">super</span> K&gt; comparator;  <span class="comment">//æ¯”è¾ƒå™¨ï¼Œæ˜¯è‡ªç„¶æ’åºï¼Œè¿˜æ˜¯å®šåˆ¶æ’åº ï¼Œä½¿ç”¨finalä¿®é¥°ï¼Œè¡¨æ˜ä¸€æ—¦èµ‹å€¼ä¾¿ä¸å…è®¸æ”¹å˜</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root = <span class="keyword">null</span>;  <span class="comment">//çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;     <span class="comment">//TreeMapä¸­å­˜æ”¾çš„é”®å€¼å¯¹çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> modCount = <span class="number">0</span>;   <span class="comment">//ä¿®æ”¹çš„æ¬¡æ•°</span></span><br></pre></td></tr></table></figure><h1 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h1><p>ç”±äºTreeMapä¸­æºç è¾ƒé•¿ï¼Œæ¥ä¸‹æ¥å°†åˆ†æ®µè§£æéƒ¨åˆ†æºç ã€‚æ—¢ç„¶æ˜¯çº¢é»‘æ ‘å­˜å‚¨ï¼Œè‚¯å®šè¦æœ‰æ•°æ®ç»“æ„ï¼ˆNodeï¼‰èŠ‚ç‚¹çš„ã€‚çœ‹ä¸€ä¸‹TreeMapä¸­å…³äºèŠ‚ç‚¹çš„å®šä¹‰éƒ¨åˆ†ã€‚</p><h2 id="æ•°æ®ç»“æ„-1"><a href="#æ•°æ®ç»“æ„-1" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    K key;    <span class="comment">//é”®</span></span><br><span class="line">    V value;    <span class="comment">//å€¼</span></span><br><span class="line">    Entry&lt;K,V&gt; left = <span class="keyword">null</span>;     <span class="comment">//å·¦å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; right = <span class="keyword">null</span>;    <span class="comment">//å³å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; parent;          <span class="comment">//çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">boolean</span> color = BLACK;      <span class="comment">//èŠ‚ç‚¹çš„é¢œè‰²ï¼Œåœ¨çº¢é»‘æ ‘ç§ï¼Œåªæœ‰ä¸¤ç§é¢œè‰²ï¼Œçº¢è‰²å’Œé»‘è‰²</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œç”¨æŒ‡å®šçš„key,value ,parentåˆå§‹åŒ–ï¼Œcoloré»˜è®¤ä¸ºé»‘è‰²</span></span><br><span class="line">    Entry(K key, V value, Entry&lt;K,V&gt; parent) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›key</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›è¯¥èŠ‚ç‚¹å¯¹åº”çš„value</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›¿æ¢èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">setValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">        V oldValue = <span class="keyword">this</span>.value;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™equals()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ªèŠ‚ç‚¹çš„keyç›¸ç­‰ï¼Œvalueç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹æ‰ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">return</span> valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™hashCode()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyHash = (key==<span class="keyword">null</span> ? <span class="number">0</span> : key.hashCode());</span><br><span class="line">        <span class="keyword">int</span> valueHash = (value==<span class="keyword">null</span> ? <span class="number">0</span> : value.hashCode());</span><br><span class="line">        <span class="comment">//keyå’Œvale hashå€¼å¾—å¼‚æˆ–è¿ç®—ï¼Œç›¸åŒåˆ™ä¸ºé›¶ï¼Œä¸åŒåˆ™ä¸º1 </span></span><br><span class="line">        <span class="keyword">return</span> keyHash ^ valueHash;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™toString()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key + <span class="string">"="</span> + value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼Œcomparatorç”¨é”®çš„é¡ºåºåšæ¯”è¾ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    comparator = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼Œæä¾›æ¯”è¾ƒå™¨ï¼Œç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> K&gt; comparator)</span> </span>&#123;</span><br><span class="line">    his.comparator = comparator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†mä¸­çš„å…ƒç´ è½¬åŒ–daoTreeMapä¸­ï¼ŒæŒ‰ç…§é”®çš„é¡ºåºåšæ¯”è¾ƒæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    comparator = <span class="keyword">null</span>;</span><br><span class="line">    putAll(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šçš„å‚æ•°ä¸ºSortedMap</span></span><br><span class="line"><span class="comment">//é‡‡ç”¨mçš„æ¯”è¾ƒå™¨æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(SortedMap&lt;K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    comparator = m.comparator();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        buildFromSorted(m.size(), m.entrySet().iterator(), <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (java.io.IOException cannotHappen) &#123;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException cannotHappen) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TreeMapæä¾›äº†å››ä¸ªæ„é€ æ–¹æ³•ï¼Œå®ç°äº†æ–¹æ³•çš„é‡è½½ã€‚æ— å‚æ„é€ æ–¹æ³•ä¸­æ¯”è¾ƒå™¨çš„å€¼ä¸ºnull,é‡‡ç”¨è‡ªç„¶æ’åºçš„æ–¹æ³•ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™ç§°ä¹‹ä¸ºå®šåˆ¶æ’åº.</p><ul><li>è‡ªç„¶æ’åºï¼šTreeMapçš„æ‰€æœ‰keyå¿…é¡»å®ç°Comparableæ¥å£ï¼Œæ‰€æœ‰çš„keyéƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡</li><li>å®šåˆ¶æ’åºï¼šåˆ›å»ºTreeMapå¯¹è±¡ä¼ å…¥äº†ä¸€ä¸ªComparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMapä¸­æ‰€æœ‰çš„keyè¿›è¡Œæ’åºï¼Œé‡‡ç”¨å®šåˆ¶æ’åºä¸è¦æ±‚Mapçš„keyå®ç°Comparableæ¥å£ã€‚ç­‰ä¸‹é¢åˆ†æåˆ°æ¯”è¾ƒæ–¹æ³•çš„æ—¶å€™åœ¨åˆ†æè¿™ä¸¤ç§æ¯”è¾ƒæœ‰ä½•ä¸åŒã€‚</li></ul><p>å¯¹äºMapæ¥è¯´ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯put()/get()/remove()ç­‰æ–¹æ³•ï¼Œä¸‹é¢ä¾æ¬¡è¿›è¡Œåˆ†æ</p><h2 id="put"><a href="#put" class="headerlink" title="put()"></a>put()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; t = root;     <span class="comment">//çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;        <span class="comment">//çº¢é»‘æ ‘æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        compare(key, key); <span class="comment">// type (and possibly null) check</span></span><br><span class="line">        <span class="comment">//æ„é€ æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œä¼ å…¥nullå€¼ã€‚ </span></span><br><span class="line">        root = <span class="keyword">new</span> Entry&lt;&gt;(key, value, <span class="keyword">null</span>);  </span><br><span class="line">        size = <span class="number">1</span>;     <span class="comment">//sizeå€¼åŠ 1</span></span><br><span class="line">        modCount++;    <span class="comment">//æ”¹å˜ä¿®æ”¹çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;    <span class="comment">//è¿”å›null </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> cmp;</span><br><span class="line">    Entry&lt;K,V&gt; parent;    <span class="comment">//å®šä¹‰èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// split comparator and comparable paths</span></span><br><span class="line">    Comparator&lt;? <span class="keyword">super</span> K&gt; cpr = comparator;     <span class="comment">//è·å–æ¯”è¾ƒå™¨</span></span><br><span class="line">    <span class="keyword">if</span> (cpr != <span class="keyword">null</span>) &#123;      <span class="comment">//å¦‚æœå®šä¹‰äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;      <span class="comment">//å°†çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹èµ‹å€¼ç»™parent</span></span><br><span class="line">            cmp = cpr.compare(key, t.key);     <span class="comment">//æ¯”è¾ƒkey, ä¸æ ¹èŠ‚ç‚¹çš„å¤§å°</span></span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)      <span class="comment">//å¦‚æœkey &lt; t.key , æŒ‡å‘å·¦å­æ ‘</span></span><br><span class="line">                t = t.left;   <span class="comment">//t = t.left  , t == å®ƒçš„åšå­©å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                t = t.right;  <span class="comment">//å¦‚æœkey &gt; t.key , æŒ‡å‘å®ƒçš„å³å­©å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);      <span class="comment">//å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œæ›¿æ¢keyçš„å€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="keyword">null</span>);        <span class="comment">//å¾ªç¯éå†</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è‡ªç„¶æ’åºæ–¹å¼ï¼Œæ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨</span></span><br><span class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();  <span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        Comparable&lt;? <span class="keyword">super</span> K&gt; k = (Comparable&lt;? <span class="keyword">super</span> K&gt;) key;    <span class="comment">//ç±»å‹è½¬æ¢</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = k.compareTo(t.key);</span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)     <span class="comment">// key &lt; t.key </span></span><br><span class="line">                t = t.left;   <span class="comment">//å·¦å­©å­</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)   <span class="comment">// key &gt; t.key </span></span><br><span class="line">                t = t.right;    <span class="comment">//å³å­©å­</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);   <span class="comment">//t == t.key , æ›¿æ¢valueå€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Entry&lt;K,V&gt; e = <span class="keyword">new</span> Entry&lt;&gt;(key, value, parent);   <span class="comment">//åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå¹¶åˆ¶å®šçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">//æ ¹æ®æ¯”è¾ƒç»“æœï¼Œå†³å®šæ–°èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æˆ–è€…å³å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        parent.left = e;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        parent.right = e;</span><br><span class="line">    fixAfterInsertion(e);   <span class="comment">//æ–°æ’å…¥èŠ‚ç‚¹åé‡æ–°è°ƒæ•´çº¢é»‘æ ‘ </span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¯”è¾ƒæ–¹æ³•ï¼Œå¦‚æœcomparator==null ,é‡‡ç”¨comparable.compartToè¿›è¡Œæ¯”è¾ƒï¼Œå¦åˆ™é‡‡ç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object k1, Object k2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> comparator==<span class="keyword">null</span> ? ((Comparable&lt;? <span class="keyword">super</span> K&gt;)k1).compareTo((K)k2)</span><br><span class="line">        : comparator.compare((K)k1, (K)k2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterInsertion</span><span class="params">(Entry&lt;K,V&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ’å…¥çš„èŠ‚ç‚¹é»˜è®¤çš„é¢œè‰²ä¸ºçº¢è‰²</span></span><br><span class="line">    x.color = RED;    <span class="comment">//</span></span><br><span class="line">    <span class="comment">//æƒ…å½¢1ï¼š æ–°èŠ‚ç‚¹x æ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ä¸éœ€è¦ä»»ä½•æ“ä½œ</span></span><br><span class="line">    <span class="comment">//æƒ…å½¢2ï¼š æ–°èŠ‚ç‚¹x çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (x != <span class="keyword">null</span> &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123;</span><br><span class="line">    <span class="comment">//æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹xçš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯çº¢è‰²çš„</span></span><br><span class="line">    <span class="comment">//åˆ¤æ–­xçš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä½ç½®ï¼Œæ˜¯å¦å±äºå·¦å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123;</span><br><span class="line">          <span class="comment">//è·å–xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä¸Šé¢è¯­å¥å·²ç»åˆ¤æ–­å‡ºxèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºå·¦å­©å­ï¼Œæ‰€ä»¥ç›´æ¥å–å³å­©å­</span></span><br><span class="line">         Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">         <span class="comment">//åˆ¤æ–­æ˜¯å¦xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚</span></span><br><span class="line">         <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">              setColor(parentOf(x), BLACK); <span class="comment">// xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">              setColor(y, BLACK);           <span class="comment">// yèŠ‚ç‚¹çš„é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">              setColor(parentOf(parentOf(x)), RED); <span class="comment">// x.parent.parentè®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">              x = parentOf(parentOf(x)); <span class="comment">// x == x.parent.parent ,è¿›è¡Œéå†ã€‚</span></span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">//xçš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–è€…ç¼ºå°‘çš„</span></span><br><span class="line">               <span class="keyword">if</span> (x == rightOf(parentOf(x))) &#123;   <span class="comment">//åˆ¤æ–­xèŠ‚ç‚¹æ˜¯å¦ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­</span></span><br><span class="line">                    x = parentOf(x);     <span class="comment">//x == çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                    rotateLeft(x);    <span class="comment">//å·¦æ—‹è½¬æ“ä½œ</span></span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//xèŠ‚ç‚¹æ˜¯å…¶çˆ¶çš„å·¦å­©å­</span></span><br><span class="line">               setColor(parentOf(x), BLACK);</span><br><span class="line">               setColor(parentOf(parentOf(x)), RED);  <span class="comment">//ä¸Šé¢ä¸¤å¥å°†x.parent å’Œx.parent.parentçš„é¢œè‰²åšè°ƒæ¢</span></span><br><span class="line">               rotateRight(parentOf(parentOf(x)));   <span class="comment">//è¿›è¡Œå³æ—‹è½¬</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));  <span class="comment">//y æ˜¯x èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span></span><br><span class="line">            <span class="keyword">if</span> (colorOf(y) == RED) &#123;    <span class="comment">//åˆ¤æ–­é¢œè‰²</span></span><br><span class="line">                setColor(parentOf(x), BLACK);    <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(y, BLACK);         <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);   <span class="comment">//ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                x = parentOf(parentOf(x));   <span class="comment">//å°†ç¥–çˆ¶èŠ‚ç‚¹ä½œä¸ºæ–°æ’å…¥çš„èŠ‚ç‚¹ï¼Œéå†è°ƒæ•´</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;     <span class="comment">//x æ˜¯å…¶çˆ¶äº²çš„å·¦å­©å­</span></span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateRight(x);    <span class="comment">//ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå³æ—‹æ“ä½œ</span></span><br><span class="line">                &#125;</span><br><span class="line">                setColor(parentOf(x), BLACK);    <span class="comment">//çˆ¶èŠ‚ç‚¹ä¸ºè®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);  <span class="comment">//ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                rotateLeft(parentOf(parentOf(x)));  <span class="comment">//ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå·¦æ—‹æ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    root.color = BLACK; <span class="comment">//é€šè¿‡èŠ‚ç‚¹ä½ç½®çš„è°ƒæ•´ï¼Œæœ€ç»ˆå°†çº¢è‰²çš„èŠ‚ç‚¹æ¡è°ƒæ¢åˆ°äº†æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ ¹èŠ‚ç‚¹é‡æ–°è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¢é»‘æ ‘æ˜¯ä¸€ä¸ªæ›´é«˜æ•ˆçš„æ£€ç´¢äºŒå‰æ ‘ï¼Œæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²æˆ–è€…é»‘è‰²</li><li>æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯é»‘è‰²çš„</li><li>æ‰€æœ‰çš„å¶å­çš„å­èŠ‚ç‚¹éƒ½æ˜¯ç©ºèŠ‚ç‚¹ï¼Œå¹¶ä¸”éƒ½æ˜¯é»‘è‰²çš„</li><li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼ˆä¸ä¼šæœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰</li><li>ä»ä»»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶å­æ ‘ä¸­æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆå¶å­èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„é»‘è‰²èŠ‚ç‚¹æ•°é‡æ¯æ¡è·¯å¾„éƒ½ç›¸åŒï¼‰</li></ol><p>ä¸Šé¢çš„ä»£ç ï¼Œè¯¦ç»†çš„æ ‡æ³¨äº†æ¯æ¡è¯­å¥çš„ä½œç”¨ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ æ²¡æœ‰ä¸€å®šçš„åŠŸåŠ›ï¼Œå³ä½¿æ³¨é‡Šå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œä½ ä¹Ÿä¼šæ˜¯ä¸€è„¸æ‡µé€¼ ï¼ŒäºŒè„¸æ‡µé€¼ï¼Œå…¨è„‘æ‡µé€¼ä¸­ï¼Œä¸‹é¢é…åˆå›¾ç‰‡æ¥æ¢³ç†ä¸€ä¸‹ä»£ç æ‰€è¡¨ç¤ºçš„å«ä¹‰ï¼š<br>å½“ä¸€ä¸ªé»˜è®¤ä¸ºçº¢è‰²çš„èŠ‚ç‚¹æ’å…¥æ ‘ä¸­ï¼Œå…¶å®å¯¹åº”çš„æ˜¯7ä¸­å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼Œåˆ†åˆ«è¿›è¡Œå™è¿°ï¼š</p><ul><li>æƒ…å½¢1ï¼šæ–°æ’å…¥çš„èŠ‚ç‚¹æ—¶çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ— éœ€ä»»ä½•çš„æ“ä½œï¼Œç›´æ¥å°†é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²å°±å¯ä»¥äº†</li><li>æƒ…å½¢2ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ã€‚ä¹Ÿæ— éœ€ä»»ä½•çš„æ“ä½œã€‚å› ä¸ºæ–°èŠ‚ç‚¹çš„æ’å…¥å¹¶æ²¡æœ‰å½±å“åˆ°çº¢é»‘ä¹¦çš„ç‰¹ç‚¹</li><li>æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰é¢œè‰²æ˜¯çº¢è‰²çš„ï¼Œè€Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¹Ÿæ˜¯çº¢è‰²çš„ã€‚é‚£ä¹ˆæƒ…å†µå°±å‡ºç°äº†ï¼Œæ­¤æ—¶æ’å…¥çš„èŠ‚ç‚¹å°±è¿åäº†çº¢é»‘æ ‘çš„ç‰¹ç‚¹4 ï¼Œéœ€è¦å¯¹çº¢é»‘æ ‘è¿›è¡Œè°ƒæ•´ã€‚ æ“ä½œçœ‹ä¸‹å›¾ï¼š<img src="https://static.oschina.net/uploads/space/2018/0228/120104_Rfsm_2927759.png" alt="img"><br>è°ƒæ•´æ“ä½œå¦‚ä¸Šå›¾ï¼Œå°†çˆ¶èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œéƒ½ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œç„¶åå°†ç¥–çˆ¶èŠ‚ç‚¹ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œå› ä¸ºä¿®æ”¹äº†ç¥–çˆ¶èŠ‚ç‚¹çš„é¢œè‰²ï¼Œç¥–çˆ¶èŠ‚ç‚¹å¯èƒ½ä¼šå‘ç”Ÿé¢œè‰²çš„å†²çªï¼Œæ‰€ä»¥å°†æ–°æ’å…¥çš„èŠ‚ç‚¹ä¿®æ”¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œè°ƒæ•´ã€‚</li><li>æƒ…å½¢4ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…ä¸ºnullï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120219_SNXd_2927759.png" alt="img"><br>æ­¤æ—¶ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œå°±æ–°æ’å…¥çš„èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œã€‚ä¾¿å˜æˆäº†æƒ…å½¢5å¯¹åº”çš„æƒ…å†µï¼Œå°†æ‰§è¡Œæƒ…å½¢5çš„æ“ä½œ</li><li>æƒ…å½¢5ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…null,æ–°æ’å…¥èŠ‚ç‚¹ä¸ºçˆ¶äº²çš„å·¦å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120301_ZnNC_2927759.png" alt="img"></li><li>æƒ…å½¢6 å’Œæƒ…å½¢7çš„æ“ä½œä¸æƒ…å½¢4å’Œæƒ…å½¢5çš„æ“ä½œç›¸åŒï¼Œå®ƒä»¬ä¹‹å‰çš„åŒºåˆ«æ˜¯çˆ¶èŠ‚ç‚¹ä¸ºæœ‰å­©å­èŠ‚ç‚¹ï¼Œå†æ¬¡ä¸å†èµ˜è¿°ã€‚</li></ul><h2 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; p = getEntry(key);  <span class="comment">//æ ¹æ®keyæŸ¥æ‰¾èŠ‚ç‚¹ï¼Œå¹¶è¿”å›è¯¥èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    V oldValue = p.value;    <span class="comment">//è·å–keyå¯¹åº”çš„å€¼</span></span><br><span class="line">    deleteEntry(p);     <span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;   <span class="comment">//è¿”å›keyå¯¹åº”çš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">getEntry</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®é”®å¯»æ‰¾èŠ‚ç‚¹ï¼Œæœ‰éä¸ºä¸¤ç§æ–¹å¼ï¼Œå¦‚æœå®šåˆ¶äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨å®šåˆ¶æ’åºæ–¹å¼ï¼Œå¦åˆ™ä½¿ç”¨è‡ªç„¶æ’åº</span></span><br><span class="line">    <span class="keyword">if</span> (comparator != <span class="keyword">null</span>) </span><br><span class="line">        <span class="keyword">return</span> getEntryUsingComparator(key); <span class="comment">//å¾ªç¯éå†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    Comparable&lt;? <span class="keyword">super</span> K&gt; k = (Comparable&lt;? <span class="keyword">super</span> K&gt;) key;</span><br><span class="line">    Entry&lt;K,V&gt; p = root;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="keyword">null</span>) &#123;  <span class="comment">//å¾ªç¯éå†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> cmp = k.compareTo(p.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">            p = p.left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">            p = p.right;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteEntry</span><span class="params">(Entry&lt;K,V&gt; p)</span> </span>&#123;</span><br><span class="line">    modCount++;  <span class="comment">//è®°å½•ä¿®æ”¹çš„æ¬¡æ•°</span></span><br><span class="line">    size--;   <span class="comment">//æ•°é‡å‡1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“å‰èŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½ä¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (p.left != <span class="keyword">null</span> &amp;&amp; p.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//å¯»æ‰¾ç»§æ‰¿è€…ï¼Œç»§æ‰¿è€…ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹æˆ–è€…å³å­©å­èŠ‚ç‚¹çš„æœ€å°å·¦å­©å­</span></span><br><span class="line">        Entry&lt;K,V&gt; s = successor(p);</span><br><span class="line">        p.key = s.key;     <span class="comment">//key - value  çš„æ›¿æ¢ ï¼Œå¹¶æ²¡æœ‰æ›¿æ¢é¢œè‰²</span></span><br><span class="line">        p.value = s.value;</span><br><span class="line">        p = s;  <span class="comment">//æŒ‡å‘ç»§æ‰¿è€…</span></span><br><span class="line">    &#125; <span class="comment">// p has 2 children</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start fixup at replacement node, if it exists.</span></span><br><span class="line">    <span class="comment">//å¼€å§‹ä¿®å¤æ ‘ç»“æ„ï¼Œç»§æ‰¿è€…çš„å·¦å­©å­ä¸ä¸ºç©ºï¼Œè¿”å›å·¦å­©å­ï¼Œå¦åˆ™è¿”å›å³å­©å­</span></span><br><span class="line">    <span class="comment">//ä¸å¯èƒ½å­˜åœ¨å·¦å³ä¸¤ä¸ªå­©å­éƒ½å­˜åœ¨çš„æƒ…å†µï¼Œsuccessorå¯»æ‰¾çš„å°±æ˜¯æœ€å°èŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­©å­èŠ‚ç‚¹ä¸ºnull</span></span><br><span class="line">    Entry&lt;K,V&gt; replacement = (p.left != <span class="keyword">null</span> ? p.left : p.right);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (replacement != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Link replacement to parent</span></span><br><span class="line">        <span class="comment">//å·²ç»è¢«é€‰ä¸ºç»§æ‰¿è€…ï¼Œå½“å‰æ‹¥æœ‰çš„ä¸€åˆ‡æ”¾å¼ƒï¼Œæ‰€ä»¥å°†å­©å­äº¤ç»™çˆ·çˆ·æŠšå…»</span></span><br><span class="line">        replacement.parent = p.parent;</span><br><span class="line">        <span class="comment">//pèŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œåˆ™æŒ‡å‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (p.parent == <span class="keyword">null</span>)</span><br><span class="line">           root = replacement;</span><br><span class="line">        <span class="comment">//å¦‚æœpä¸ºå·¦å­©å­ï¼Œå¦‚æœpä¸ºå·¦å­©å­ï¼Œåˆ™å°†p.parent.left = p.left</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p == p.parent.left)</span><br><span class="line">            p.parent.left  = replacement;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p.parent.right = replacement;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤pèŠ‚ç‚¹åˆ°å·¦å³åˆ†æ”¯ï¼Œå’Œçˆ¶èŠ‚ç‚¹çš„å¼•ç”¨</span></span><br><span class="line">        p.left = p.right = p.parent = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fix replacement</span></span><br><span class="line">        <span class="keyword">if</span> (p.color == BLACK)</span><br><span class="line">            <span class="comment">//æ¢å¤é¢œè‰²åˆ†é…</span></span><br><span class="line">            fixAfterDeletion(replacement);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.parent == <span class="keyword">null</span>) &#123; <span class="comment">// return if we are the only node.</span></span><br><span class="line">        <span class="comment">//çº¢é»‘ä¹¦ä¸­çˆ¶èŠ‚ç‚¹ä¸ºç©ºçš„åªèƒ½æ˜¯æ ¹èŠ‚ç‚¹ã€‚</span></span><br><span class="line">        root = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//  No children. Use self as phantom replacement and unlink.</span></span><br><span class="line">        <span class="keyword">if</span> (p.color == BLACK)</span><br><span class="line">            fixAfterDeletion(p);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p.parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p == p.parent.left)</span><br><span class="line">                p.parent.left = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p == p.parent.right)</span><br><span class="line">                p.parent.right = <span class="keyword">null</span>;</span><br><span class="line">            p.parent = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterDeletion</span><span class="params">(Entry&lt;K,V&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œé¢œè‰²ä¸ºé»‘è‰²ï¼Œè°ƒæ•´ç»“æ„</span></span><br><span class="line">    <span class="keyword">while</span> (x != root &amp;&amp; colorOf(x) == BLACK) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­xæ˜¯å¦ä¸ºå·¦å­©å­</span></span><br><span class="line">        <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;</span><br><span class="line">            <span class="comment">//xçš„å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">            Entry&lt;K,V&gt; sib = rightOf(parentOf(x));</span><br><span class="line">            <span class="comment">//è‹¥å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">            <span class="keyword">if</span> (colorOf(sib) == RED) &#123;</span><br><span class="line">                setColor(sib, BLACK);   <span class="comment">//è®¾ç½®å…„å¼ŸèŠ‚ç‚¹å˜ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(x), RED);  <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                rotateLeft(parentOf(x));   <span class="comment">//å·¦æ—‹çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                sib = rightOf(parentOf(x)); <span class="comment">//é‡æ–°è®¾ç½®xçš„å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(leftOf(sib))  == BLACK &amp;&amp;</span><br><span class="line">                colorOf(rightOf(sib)) == BLACK) &#123;</span><br><span class="line">                setColor(sib, RED); <span class="comment">//å…„å¼ŸèŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½æ˜¯é»‘è‰²çš„é‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ï¼Œä¿®æ”¹ä¸ºçº¢è‰²</span></span><br><span class="line">                x = parentOf(x);   <span class="comment">//å°†xå®šä½åˆ°çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (colorOf(rightOf(sib)) == BLACK) &#123;   <span class="comment">//å…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­æ˜¯é»‘è‰²çš„ï¼Œå·¦å­©å­æ˜¯çº¢è‰²çš„</span></span><br><span class="line">                    setColor(leftOf(sib), BLACK);  <span class="comment">//è®¾ç½®å·¦å­©å­èŠ‚ç‚¹ä¸ºé»‘è‰²</span></span><br><span class="line">                    setColor(sib, RED); <span class="comment">//å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²</span></span><br><span class="line">                    rotateRight(sib);   <span class="comment">//å³æ—‹</span></span><br><span class="line">                    sib = rightOf(parentOf(x));  <span class="comment">//å³æ—‹åé‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">                &#125;</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));  <span class="comment">//å…„å¼ŸèŠ‚ç‚¹é¢œè‰²è®¾ç½®å’Œçˆ¶èŠ‚ç‚¹çš„é¢œè‰²ç›¸åŒ</span></span><br><span class="line">                setColor(parentOf(x), BLACK);   <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(rightOf(sib), BLACK);  <span class="comment">//å°†å…„å¼ŸèŠ‚ç‚¹çš„æœ‰å­©å­è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                rotateLeft(parentOf(x));   <span class="comment">//å·¦æ—‹</span></span><br><span class="line">                x = root;  <span class="comment">//è®¾ç½®xä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// symmetric</span></span><br><span class="line">            <span class="comment">//xä¸ºçˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹ï¼Œå‚è€ƒä¸Šé¢çš„æ“ä½œ</span></span><br><span class="line">            Entry&lt;K,V&gt; sib = leftOf(parentOf(x));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(sib) == RED) &#123;</span><br><span class="line">                setColor(sib, BLACK);</span><br><span class="line">                setColor(parentOf(x), RED);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                sib = leftOf(parentOf(x));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(rightOf(sib)) == BLACK &amp;&amp;colorOf(leftOf(sib)) == BLACK) &#123;</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (colorOf(leftOf(sib)) == BLACK) &#123;</span><br><span class="line">                    setColor(rightOf(sib), BLACK);</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    rotateLeft(sib);</span><br><span class="line">                    sib = leftOf(parentOf(x));</span><br><span class="line">                &#125;</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(leftOf(sib), BLACK);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                x = root;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setColor(x, BLACK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤çº¢é»‘æ ‘çš„æ“ä½œæ¯”æ’å…¥æ“ä½œè¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>ä»¥æ’åºäºŒå‰æ ‘çš„æ–¹æ³•åˆ é™¤æŒ‡å®šèŠ‚ç‚¹ã€‚åˆ é™¤çš„èŠ‚ç‚¹å­˜åœ¨ä¸‰ç§æƒ…å†µï¼š<ul><li>è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæ²¡æœ‰å·¦å³å­©å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤å³å¯</li><li>è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæœ‰ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè®©å®ƒçš„å­©å­èŠ‚ç‚¹æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹å³å¯</li><li>æœ¬åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæœ‰ä¸¤ä¸ªéç©ºçš„å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±æˆ–è€…åç»§èŠ‚ç‚¹ï¼Œæ›´æ¢å…ƒç´ å€¼ï¼Œåœ¨å°†å‰é©±æˆ–è€…åç»§èŠ‚ç‚¹åˆ é™¤ï¼ˆä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æˆ–è€…åç»§éƒ½å¿…å®šè‡³å¤šæœ‰ä¸€ä¸ªéç©ºçš„å­èŠ‚ç‚¹ï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„ä¸¤ç§æƒ…å½¢è¿›è¡Œæ“ä½œï¼‰</li></ul></li><li>è¿›è¡Œé¢œè‰²çš„è°ƒæ¢å’Œæ ‘çš„æ—‹è½¬ï¼Œæ»¡è¶³çº¢é»‘æ ‘çš„ç‰¹å¾</li></ul><p>ä¸‹é¢æ¥åˆ†æƒ…å½¢è®¨è®ºä¸€ä¸‹å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼š</p><ul><li>æƒ…å½¢1ï¼šè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹æˆ–è€…é¢œè‰²ä¸ºç©ºè‰²ï¼Œæ­¤æ—¶åˆ é™¤è¯¥èŠ‚ç‚¹ä¸å½±å“çº¢é»‘æ ‘çš„ç‰¹ç‚¹ã€‚æ— éœ€æ“ä½œ</li><li>æƒ…å½¢2ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120648_lZYh_2927759.png" alt="img"><br>è‹¥åˆ é™¤ä¸Šå›¾ä¸­çš„xèŠ‚ç‚¹ï¼Œå°†ç¼ºå°‘ä¸€ä¸ªé»‘èŠ‚ç‚¹ï¼Œä¸çº¢é»‘æ ‘çš„æ€§è´¨å†²çªï¼Œæ‰€ä»¥ä¿®æ”¹sibé¢œè‰²ä¸ºé»‘è‰²ï¼Œè®¾ç½®pèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¹¶è¿›è¡Œå·¦æ—‹æ“ä½œã€‚åœ¨è¿›è¡Œåç»­çš„å¤„ç†ã€‚</li><li>æƒ…å½¢3ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼ŒxèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120742_LGd3_2927759.png" alt="img"><br>xèŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œå…„å¼ŸèŠ‚ç‚¹ï¼ˆé»‘è‰²çš„ï¼‰çš„å­èŠ‚ç‚¹ä¹Ÿæ˜¯é»‘è‰²çš„ï¼ŒpèŠ‚ç‚¹çš„é¢œè‰²æ— æ³•ç¡®å®šï¼Œæœ‰å¯èƒ½æ˜¯çº¢è‰²çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é»‘è‰²çš„ã€‚å¦‚æœæ˜¯çº¢è‰²çš„ç›´æ¥è®¾ç½®ä¸ºé»‘è‰²å³å¯ï¼Œå¦‚æœä¸ºé»‘è‰²çš„ï¼Œåˆ™éœ€è¦å°†xå®šä½çš„pèŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œå¤„ç†ã€‚</li><li>æƒ…å½¢4ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹çš„å³è‡ªå­èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120844_0oQ7_2927759.png" alt="img"><br>æƒ…å½¢4çš„è°ƒæ•´ä¸ºäº†è½¬å˜æˆæƒ…å½¢5çš„æƒ…å†µï¼Œæ¥è¿›è¡Œå¤„ç†ã€‚</li><li>æƒ…å½¢5ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹å³å­èŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/124855_O7NA_2927759.png" alt="img"><br>sibçš„å·¦å­èŠ‚ç‚¹çš„é¢œè‰²ä¸ç¡®å®šï¼Œå¯èƒ½æ˜¯çº¢è‰²ä¹Ÿå¯èƒ½æ˜¯é»‘è‰²ï¼Œä½†æ˜¯å¯¹å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå› ä¸ºå˜æ¢å‰åå®ƒçš„ä¸Šå±‚åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹æ•°å¹¶æ²¡æœ‰æ”¹å˜ã€‚</li></ul><p>ä¸Šé¢çš„æƒ…å½¢åªæ˜¯é’ˆå¯¹åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å·¦å­©å­çš„æƒ…å†µï¼Œè¿›è¡Œçš„åˆ†æï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¹Ÿå¯èƒ½æ˜¯å³åˆ†æ”¯ã€‚æƒ…å†µå®Œå…¨ç›¸åŒåªä¸è¿‡å·¦å³é¡ºåºå‘ç”Ÿäº†é¢ å€’ï¼Œä¸å†è¿›è¡Œå¤è¿°ã€‚</p><p>è‡³æ­¤TreeMapä¸­å®ç°çš„æœ€é‡è¦å·²ç»è¯´å®Œäº†ã€‚</p><p>ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹ä¸€äº›æ–¹æ³•çš„ä½œç”¨</p><ul><li>firstEntry() è¿”å›Mapä¸­æœ€å°çš„key</li><li>higherEntry(Object key ) è¿”å›è¯¥Mapä¸­ä½äºkeyåä¸€ä½çš„key-value</li><li>lowerEntry(Object key ) è¿”å›è¯¥Mapä¸­å”¯ä¸€keyå‰ä¸€ä½çš„key-value</li><li>tailMap(Object key , boolean inclusive) è¿”å›è¯¥Mapçš„å­Map</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h1><ul><li>å…³äºçº¢é»‘æ ‘çš„èŠ‚ç‚¹æ’å…¥æ“ä½œï¼Œé¦–å…ˆæ˜¯æ”¹å˜æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œç¥–çˆ¶èŠ‚ç‚¹ï¼Œå’Œæ–°èŠ‚ç‚¹çš„é¢œè‰²ï¼Œèƒ½åœ¨å½“å‰åˆ†æ”¯é€šè¿‡èŠ‚ç‚¹çš„æ—‹è½¬æ”¹å˜çš„ï¼Œåˆ™é€šè¿‡æ­¤ç§æ“ä½œï¼Œæ¥æ»¡è¶³çº¢é»‘ä¹¦çš„ç‰¹ç‚¹ã€‚</li><li>å¦‚æœå½“å‰ç›¸å…³èŠ‚ç‚¹çš„æ—‹è½¬è§£å†³ä¸äº†çº¢é»‘æ ‘çš„å†²çªï¼Œåˆ™é€šè¿‡å°†çº¢è‰²çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æ ¹èŠ‚ç‚¹è§£å†³ï¼Œæœ€ååœ¨å°†æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</li></ul>]]></content>
    
    <summary type="html">
    
      Find Everything about TreeMap IN There.
    
    </summary>
    
    
      <category term="Analyst of SourceCode" scheme="http://yoursite.com/tags/Analyst-of-SourceCode/"/>
    
  </entry>
  
  <entry>
    <title>Everything About ConcurrentHashMap</title>
    <link href="http://yoursite.com/2020/03/21/Everything-About-ConcurrentHashMap/"/>
    <id>http://yoursite.com/2020/03/21/Everything-About-ConcurrentHashMap/</id>
    <published>2020-03-21T06:06:48.000Z</published>
    <updated>2020-03-21T06:09:34.180Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ConcurrentHashMapå¸¸ç”¨äºå¹¶å‘ç¼–ç¨‹ï¼Œè¿™é‡Œå°±ä»æºç ä¸Šæ¥åˆ†æä¸€ä¸‹ConcurrentHashMapæ•°æ®ç»“æ„å’Œåº•å±‚åŸç†ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸ªç®—æ³•ï¼Œ è¿™ä¸ªç®—æ³•å’ŒConcurrentçš„å®ç°æ˜¯åˆ†ä¸å¼€çš„ã€‚<br>CASç®—æ³•ï¼š</p><ul><li>CASæ˜¯è‹±æ–‡å•è¯Compare And Swapçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚</li><li>CASæœºåˆ¶å½“ä¸­ä½¿ç”¨äº†3ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚</li><li>æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œåªæœ‰å½“å˜é‡çš„é¢„æœŸå€¼Aå’Œå†…å­˜åœ°å€Vå½“ä¸­çš„å®é™…å€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šå°†å†…å­˜åœ°å€Vå¯¹åº”çš„å€¼ä¿®æ”¹ä¸ºB</li></ul><p>ä»æ€æƒ³ä¸Šæ¥è¯´ï¼ŒSynchronizedå±äºæ‚²è§‚é”ï¼Œæ‚²è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸¥é‡ï¼Œæ‰€ä»¥ä¸¥é˜²æ­»å®ˆã€‚CASå±äºä¹è§‚é”ï¼Œä¹è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸é‚£ä¹ˆä¸¥é‡ï¼Œæ‰€ä»¥è®©çº¿ç¨‹ä¸æ–­å»å°è¯•æ›´æ–°ã€‚</p><p><strong>ConcurrentHashMapæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapé›†åˆï¼Œå¯ä»¥åº”å¯¹é«˜å¹¶å‘çš„åœºæ™¯ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</strong>ç›¸æ¯”è¾ƒHashTableï¼Œå®ƒçš„é”ç²’åº¦æ›´åŠ çš„ç»†åŒ–ï¼Œå› ä¸ºHashTableçš„æ–¹æ³•éƒ½æ˜¯ç”¨Synchronizedä¿®é¥°çš„ï¼Œæ•ˆç‡ç°å¸¸çš„åº•ä¸‹ã€‚</p><p>1.8ä¹‹å‰ConcurrentHashMapä½¿ç”¨é”åˆ†æ®µæŠ€æœ¯ï¼Œå°†æ•°æ®åˆ†æˆä¸€æ®µæ®µçš„å­˜å‚¨ï¼Œæ¯ä¸€ä¸ªæ•°æ®æ®µé…ç½®ä¸€æŠŠé”ï¼Œç›¸äº’ä¹‹é—´ä¸å½±å“ï¼Œè€Œ1.8ä¹‹åæ‘’å¼ƒäº†Segmentï¼ˆé”æ®µï¼‰çš„æ¦‚å¿µï¼Œå¯ç”¨äº†å…¨æ–°çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨<strong>CAS+Synchronized</strong>æ¥ä¿è¯å¹¶å‘æ›´æ–°çš„å®‰å…¨ï¼Œåº•å±‚é‡‡ç”¨çš„ä¾ç„¶æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚</p><p>æœ¬ç¯‡æ–‡ç« æ˜¯åŸºäºJDK1.8 ã€‚</p><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentHashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">ConcurrentMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure><p>ConcurrentHashMap ç»§æ‰¿äº†AbstractMap ,å¹¶ä¸”å®ç°äº†ConcurrentMapæ¥å£ã€‚</p><h2 id="ä¸HashMapæ¯”å¯¹ï¼š"><a href="#ä¸HashMapæ¯”å¯¹ï¼š" class="headerlink" title="ä¸HashMapæ¯”å¯¹ï¼š"></a>ä¸HashMapæ¯”å¯¹ï¼š</h2><ul><li>ç›¸åŒç‚¹ï¼šéƒ½é›†æˆäº†AbstractMapæ¥å£</li><li>ä¸åŒç‚¹ï¼šHashMapå®ç°äº†Mapæ¥å£ï¼ŒConcurrentHashMapå®ç°äº†ConcurrentMapæ¥å£ï¼Œè€ŒConcurrentMapç»§æ‰¿äº†Mapæ¥å£ï¼Œä½¿ç”¨defaultå…³é”®å­—å®šä¹‰äº†ä¸€äº›æ–¹æ³• ã€‚</li></ul><p>ä»ç»§æ‰¿å…³ç³»ä¸Šçœ‹ConcurrentHashMapä¸HashMapå¹¶æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚</p><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; <span class="comment">//æœ€å¤§å®¹é‡2çš„30æ¬¡æ–¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">16</span>; <span class="comment">//é»˜è®¤å®¹é‡  1&lt;&lt;4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> LOAD_FACTOR = <span class="number">0.75f</span>;  <span class="comment">//è´Ÿè½½å› å­</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;  <span class="comment">//é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;  <span class="comment">//æ ‘è½¬åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>; <span class="comment">//</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TRANSFER_STRIDE = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> RESIZE_STAMP_BITS = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_RESIZERS = (<span class="number">1</span> &lt;&lt; (<span class="number">32</span> - RESIZE_STAMP_BITS)) - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RESIZE_STAMP_SHIFT = <span class="number">32</span> - RESIZE_STAMP_BITS;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MOVED     = -<span class="number">1</span>; <span class="comment">// forwarding nodes çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEBIN   = -<span class="number">2</span>; <span class="comment">// roots of trees çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RESERVED  = -<span class="number">3</span>; <span class="comment">// transient reservations çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HASH_BITS = <span class="number">0x7fffffff</span>; <span class="comment">// usable bits of normal node hash</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NCPU = Runtime.getRuntime().availableProcessors(); <span class="comment">//å¯ç”¨å¤„ç†å™¨æ•°é‡</span></span><br></pre></td></tr></table></figure><p>é‡ç‚¹è¯´ä¸€ä¸‹ <strong>sizeCtrl</strong> å±æ€§ï¼Œè¿™ä¸ªå±æ€§åœ¨ ConcurrentHashMap ä¸­æ‰®æ¼”è€…é‡è¦çš„è§’è‰²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨åˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„ä¸€ä¸ªæ§åˆ¶æ ‡è¯†ä½</span></span><br><span class="line"><span class="comment">//è´Ÿæ•°ä»£è¡¨æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„æ“ä½œ</span></span><br><span class="line"><span class="comment">// -1 ä»£è¡¨åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// -N ä»£è¡¨æœ‰n-1ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line"><span class="comment">//æ­£æ•°æˆ–è€…0è¡¨ç¤ºæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè¿™ä¸ªæ•°å€¼è¡¨ç¤ºåˆå§‹åŒ–æˆ–è€…ä¸‹ä¸€æ¬¡è¦æ‰©å®¹çš„å¤§å°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//transient ä¿®é¥°çš„å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œvolatileä¿è¯å¯è§æ€§</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ— å‚æ„é€ æ–¹æ³•ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°æ„é€ æ–¹æ³•ï¼Œåˆ¤æ–­å‚æ•°çš„åˆæ³•æ€§ï¼Œå¹¶åˆ›å»ºäº†è®¡ç®—åˆå§‹åŒ–çš„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//å°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºConcurrentHashMap</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>(initialCapacity, loadFactor, <span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œè´Ÿè½½å› å­å’ŒconcurrentLevelå¹¶å‘æ›´æ–°çº¿ç¨‹çš„æ•°é‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsegmentçš„ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity,<span class="keyword">float</span> loadFactor, <span class="keyword">int</span> concurrencyLevel)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ConcurrentHashMapçš„æ„é€ æ–¹æ³•å¹¶æ²¡åšå¤ªå¤šçš„å·¥ä½œï¼Œä¸»è¦æ˜¯è¿›è¡Œäº†å‚æ•°çš„åˆæ³•æ€§æ ¡éªŒï¼Œå’Œåˆå§‹å€¼å¤§å°çš„è½¬æ¢ã€‚è¿™ä¸ªæ–¹æ³• tableSizeFor()è¯´æ˜ä¸€ä¸‹ï¼Œ ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å°†æŒ‡å®šçš„åˆå§‹åŒ–å‚æ•°è½¬æ¢ä¸º2çš„å¹‚æ¬¡æ–¹å½¢å¼ï¼Œ å¦‚æœåˆå§‹åŒ–å‚æ•°ä¸º9 ï¼Œè½¬æ¢ååˆå§‹å¤§å°ä¸º16 ã€‚</p></blockquote><h2 id="å†…éƒ¨æ•°æ®ç»“æ„"><a href="#å†…éƒ¨æ•°æ®ç»“æ„" class="headerlink" title="å†…éƒ¨æ•°æ®ç»“æ„"></a>å†…éƒ¨æ•°æ®ç»“æ„</h2><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a><strong>Node</strong></h3><p>é¦–å½“å…¶å†²ï¼Œå› ä¸ºå®ƒæ˜¯ConcurrentHashMapçš„æ ¸å¿ƒï¼Œå®ƒåŒ…è£…äº†key-valueçš„é”®å€¼å¯¹ï¼Œæ‰€æœ‰æ’å…¥çš„æ•°æ®éƒ½åŒ…è£…åœ¨è¿™é‡Œé¢ï¼Œä¸HashMapå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€äº›å·®åˆ«ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">     <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">     <span class="keyword">final</span> K key;</span><br><span class="line">     <span class="keyword">volatile</span> V val;</span><br><span class="line">     <span class="keyword">volatile</span> Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">     Node(<span class="keyword">int</span> hash, K key, V val, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">         <span class="keyword">this</span>.hash = hash;</span><br><span class="line">         <span class="keyword">this</span>.key = key;</span><br><span class="line">         <span class="keyword">this</span>.val = val;</span><br><span class="line">         <span class="keyword">this</span>.next = next;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>value å’Œ nextä½¿ç”¨äº†volatileä¿®é¥°ï¼Œä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ã€‚ä¹Ÿä¸å…è®¸è°ƒç”¨setValue()æ–¹æ³•ç›´æ¥æ”¹å˜Nodeçš„å€¼ã€‚å¹¶å¢åŠ äº†find()æ–¹æ³•è¾…åŠ©map.get()æ–¹æ³•ã€‚</p><h3 id="TreeNode"><a href="#TreeNode" class="headerlink" title="TreeNode"></a><strong>TreeNode</strong></h3><p>æ ‘èŠ‚ç‚¹ç±»ï¼Œå¦å¤–ä¸€ä¸ªæ ¸å¿ƒçš„æ•°æ®ç»“æ„ã€‚å½“é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æ—¶å€™ï¼Œä¼šè½¬æ¢ä¸ºTreeNodeã€‚ä½†æ˜¯ä¸HashMapä¸ç›¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯ç›´æ¥è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè€Œæ˜¯æŠŠè¿™äº›ç»“ç‚¹åŒ…è£…æˆTreeNodeæ”¾åœ¨TreeBinå¯¹è±¡ä¸­ï¼Œç”±TreeBinå®Œæˆå¯¹çº¢é»‘æ ‘çš„åŒ…è£…ã€‚è€Œä¸”TreeNodeåœ¨ConcurrentHashMapé›†æˆè‡ªNodeç±»ï¼Œè€Œå¹¶éHashMapä¸­çš„é›†æˆè‡ªLinkedHashMap.Entryç±»ï¼Œä¹Ÿå°±æ˜¯è¯´TreeNodeå¸¦æœ‰nextæŒ‡é’ˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿åŸºäºTreeBinçš„è®¿é—®ã€‚</p><h3 id="TreeBin"><a href="#TreeBin" class="headerlink" title="TreeBin"></a><strong>TreeBin</strong></h3><p>è¿™ä¸ªç±»å¹¶ä¸è´Ÿè´£åŒ…è£…ç”¨æˆ·çš„keyã€valueä¿¡æ¯ï¼Œè€Œæ˜¯åŒ…è£…çš„å¾ˆå¤šTreeNodeèŠ‚ç‚¹ã€‚å®ƒä»£æ›¿äº†TreeNodeçš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®é™…çš„ConcurrentHashMapâ€œæ•°ç»„â€ä¸­ï¼Œå­˜æ”¾çš„æ˜¯TreeBinå¯¹è±¡ï¼Œè€Œä¸æ˜¯TreeNodeå¯¹è±¡ï¼Œè¿™æ˜¯ä¸HashMapçš„åŒºåˆ«ã€‚å¦å¤–è¿™ä¸ªç±»è¿˜å¸¦æœ‰äº†è¯»å†™é”ã€‚</p><h3 id="ForwardingNode"><a href="#ForwardingNode" class="headerlink" title="ForwardingNode"></a><strong>ForwardingNode</strong></h3><p>ä¸€ä¸ªç”¨äºè¿æ¥ä¸¤ä¸ªtableçš„èŠ‚ç‚¹ç±»ã€‚å®ƒåŒ…å«ä¸€ä¸ªnextTableæŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘ä¸‹ä¸€å¼ è¡¨ã€‚è€Œä¸”è¿™ä¸ªèŠ‚ç‚¹çš„key value nextæŒ‡é’ˆå…¨éƒ¨ä¸ºnullï¼Œå®ƒçš„hashå€¼ä¸º-1. è¿™é‡Œé¢å®šä¹‰çš„findçš„æ–¹æ³•æ˜¯ä»nextTableé‡Œè¿›è¡ŒæŸ¥è¯¢èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ä»¥è‡ªèº«ä¸ºå¤´èŠ‚ç‚¹è¿›è¡ŒæŸ¥æ‰¾</p><h1 id="ConcurrentHashMapå¸¸ç”¨æ–¹æ³•"><a href="#ConcurrentHashMapå¸¸ç”¨æ–¹æ³•" class="headerlink" title="ConcurrentHashMapå¸¸ç”¨æ–¹æ³•"></a><strong>ConcurrentHashMapå¸¸ç”¨æ–¹æ³•</strong></h1><h2 id="initTable-åˆå§‹åŒ–æ–¹æ³•"><a href="#initTable-åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="initTable åˆå§‹åŒ–æ–¹æ³•"></a><strong>initTable åˆå§‹åŒ–æ–¹æ³•</strong></h2><p>åˆå§‹åŒ–æ–¹æ³•æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåœ¨ConcurrentHashMapçš„æ„é€ æ–¹æ³•ä¸­åªæ˜¯ç®€å•çš„è¿›è¡Œäº†ä¸€äº›å‚æ•°æ ¡éªŒå’Œå‚æ•°è½¬æ¢çš„æ“ä½œã€‚æ•´ä¸ªMapçš„åˆå§‹åŒ–æ˜¯åœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™è§¦å‘çš„ã€‚è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„putæ–¹æ³•ä¸­ä¼šè¿›è¡Œè¯´æ˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå•çº¿ç¨‹æ“ä½œ</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K,V&gt;[] initTable() &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; <span class="keyword">int</span> sc;</span><br><span class="line">        <span class="keyword">while</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((sc = sizeCtl) &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="comment">//sizeCtl &lt; 0 è¡¨ç¤ºæœ‰çº¿ç¨‹æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚</span></span><br><span class="line">                Thread.yield(); <span class="comment">// lost initialization race; just spin</span></span><br><span class="line">                </span><br><span class="line">            <span class="comment">//è®¾ç½®SIZECTLçš„å€¼ä¸º-1ï¼Œé˜»å¡å…¶ä»–çº¿ç¨‹çš„æ“ä½œ</span></span><br><span class="line">            <span class="comment">//è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•°</span></span><br><span class="line">            <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦æ”¹å˜çš„å¯¹è±¡</span></span><br><span class="line">            <span class="comment">//ç¬¬äºŒä¸ªå‚æ•°ï¼šåç§»é‡</span></span><br><span class="line">            <span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæœŸå¾…çš„å€¼</span></span><br><span class="line">            <span class="comment">//ç¬¬å››ä¸ªå‚æ•°ï¼šæ›´æ–°åçš„å€¼</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, -<span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//å†æ¬¡æ£€æŸ¥æ˜¯å¦æœ‰çº¿ç¨‹è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">                    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> n = (sc &gt; <span class="number">0</span>) ? sc : DEFAULT_CAPACITY;</span><br><span class="line">                        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">                        <span class="comment">//åˆå§‹åŒ–Nodeå¯¹è±¡æ•°ç»„</span></span><br><span class="line">                        Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n];</span><br><span class="line">                        table = tab = nt;</span><br><span class="line">                        <span class="comment">//scçš„å€¼è®¾ç½®ä¸ºnçš„0.75å€</span></span><br><span class="line">                        sc = n - (n &gt;&gt;&gt; <span class="number">2</span>);  <span class="comment">//ç›¸å½“äºn*0.75</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    sizeCtl = sc;  <span class="comment">//æ›´æ”¹sizeCtlçš„å€¼</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">//ä¸­æ–­å¾ªåè¿”å›</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> tab; <span class="comment">//è¿”å›åˆå§‹åŒ–çš„å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å®¹æ–¹æ³•"><a href="#æ‰©å®¹æ–¹æ³•" class="headerlink" title="æ‰©å®¹æ–¹æ³•"></a><strong>æ‰©å®¹æ–¹æ³•</strong></h2><p>å½“ConcurrentHashMap å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œéœ€è¦å¯¹tableè¿›è¡Œæ‰©å®¹ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ”¯æŒå¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰©å®¹çš„ï¼Œæˆ‘ä»¬æ‰€è¯´çš„æ‰©å®¹ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ— éæ˜¯ä»ä¸€ä¸ªæ•°ç»„åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„çš„æ‹·è´ã€‚</p><p>æ‰©å®¹æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åˆ›å»ºæ‰©å®¹åçš„æ–°æ•°ç»„ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ä¸¤å€ ï¼Œæ–°æ•°ç»„çš„åˆ›å»ºæ—¶å•çº¿ç¨‹å®Œæˆ</li><li>å°†åŸæ¥çš„æ•°ç»„å…ƒç´ å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ˜¯å¤šçº¿ç¨‹æ“ä½œã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸®åŠ©æ‰©å®¹</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123;</span><br><span class="line">      Node&lt;K,V&gt;[] nextTab; <span class="keyword">int</span> sc;</span><br><span class="line">      <span class="keyword">if</span> (tab != <span class="keyword">null</span> &amp;&amp; (f <span class="keyword">instanceof</span> ForwardingNode) &amp;&amp;(nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> rs = resizeStamp(tab.length);</span><br><span class="line">            <span class="keyword">while</span> (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;(sc = sizeCtl) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + <span class="number">1</span> ||</span><br><span class="line">                    sc == rs + MAX_RESIZERS || transferIndex &lt;= <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, sc + <span class="number">1</span>)) &#123;</span><br><span class="line">                    transfer(tab, nextTab);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> nextTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> table;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//tab = table ,nextTab ä¸€ä¸ªNode&lt;Key,Value&gt;[]ç±»å‹çš„å˜é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//n æ˜¯tabçš„é•¿åº¦ ï¼Œ stride åˆå§‹å€¼ä¸º0 </span></span><br><span class="line">        <span class="keyword">int</span> n = tab.length, stride;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­cpuå¤„ç†å¤šçº¿ç¨‹çš„èƒ½åŠ›ï¼Œå¦‚æœå°äº16å°±ç›´æ¥èµ‹å€¼ä¸º16</span></span><br><span class="line">        <span class="keyword">if</span> ((stride = (NCPU &gt; <span class="number">1</span>) ? (n &gt;&gt;&gt; <span class="number">3</span>) / NCPU : n) &lt; MIN_TRANSFER_STRIDE)</span><br><span class="line">            stride = MIN_TRANSFER_STRIDE; <span class="comment">// subdivide range</span></span><br><span class="line">        <span class="keyword">if</span> (nextTab == <span class="keyword">null</span>) &#123;            <span class="comment">// initiating</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">                <span class="comment">//æ„é€ ä¸€ä¸ªå®¹é‡æ˜¯åŸæ¥ä¸¤å€çš„Node&lt;K ,V&gt; ç±»å‹æ•°ç»„</span></span><br><span class="line">                Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n &lt;&lt; <span class="number">1</span>];</span><br><span class="line">                nextTab = nt;  <span class="comment">//èµ‹å€¼</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ex) &#123;      <span class="comment">// try to cope with OOME</span></span><br><span class="line">                sizeCtl = Integer.MAX_VALUE;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            nextTable = nextTab;  <span class="comment">//èµ‹å€¼</span></span><br><span class="line">            transferIndex = n;    <span class="comment">//å°†æ•°ç»„é•¿åº¦èµ‹å€¼ç»™transferIndex</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> nextn = nextTab.length;  <span class="comment">//è·å–æ–°æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">        </span><br><span class="line">        ForwardingNode&lt;K,V&gt; fwd = <span class="keyword">new</span> ForwardingNode&lt;K,V&gt;(nextTab);  <span class="comment">//åˆ›å»ºfwdèŠ‚ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">boolean</span> advance = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">boolean</span> finishing = <span class="keyword">false</span>; <span class="comment">// to ensure sweep before committing nextTab</span></span><br><span class="line">        </span><br><span class="line">         <span class="comment">//ä½¿ç”¨forå¾ªç¯æ¥å¤„ç†æ¯ä¸ªæ§½ä½ä¸­çš„é“¾è¡¨å…ƒç´ ï¼ŒCASè®¾ç½®transferIndexå±æ€§å€¼ï¼Œå¹¶åˆå§‹åŒ–iå’Œboundå€¼</span></span><br><span class="line">         <span class="comment">// i æŒ‡å½“å‰çš„æ§½ä½åºå·ï¼Œboundå€¼éœ€è¦å¤„ç†çš„è¾¹ç•Œï¼Œå…ˆå¤„ç†æ§½ä½ä¸º15çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, bound = <span class="number">0</span>;;) &#123; </span><br><span class="line">            </span><br><span class="line">            <span class="comment">//åˆ›å»ºä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªä¸ºNode&lt;K,V&gt; ç±»å‹ï¼Œä¸€ä¸ªä¸ºintç±»å‹</span></span><br><span class="line">            Node&lt;K,V&gt; f; <span class="keyword">int</span> fh;</span><br><span class="line">            <span class="keyword">while</span> (advance) &#123;</span><br><span class="line">                <span class="keyword">int</span> nextIndex, nextBound;</span><br><span class="line">                <span class="keyword">if</span> (--i &gt;= bound || finishing)</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//å°†transferIndexçš„å€¼èµ‹å€¼ç»™ nextIndex ,å¹¶åˆ¤æ–­nextIndexçš„å€¼æ˜¯å¦å°äºç­‰äº0</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> ((nextIndex = transferIndex) &lt;= <span class="number">0</span>) &#123;   </span><br><span class="line">                    i = -<span class="number">1</span>;</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//æ›´æ–°nextIndexçš„å€¼</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt</span><br><span class="line">                         (<span class="keyword">this</span>, TRANSFERINDEX, nextIndex,</span><br><span class="line">                          nextBound = (nextIndex &gt; stride ? nextIndex - stride : <span class="number">0</span>))) &#123;</span><br><span class="line">                    bound = nextBound;</span><br><span class="line">                    i = nextIndex - <span class="number">1</span>;</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= n || i + n &gt;= nextn) &#123;</span><br><span class="line">                <span class="keyword">int</span> sc;</span><br><span class="line">                <span class="comment">//å¦‚æœtableå·²ç»å¤åˆ¶ç»“æŸ</span></span><br><span class="line">                <span class="keyword">if</span> (finishing) &#123;</span><br><span class="line">                    nextTable = <span class="keyword">null</span>;   <span class="comment">//æ¸…ç©ºnextTable</span></span><br><span class="line">                    table = nextTab;    <span class="comment">//æŠŠnextTab èµ‹å€¼ç»™ table </span></span><br><span class="line">                    sizeCtl = (n &lt;&lt; <span class="number">1</span>) - (n &gt;&gt;&gt; <span class="number">1</span>);  <span class="comment">//é˜ˆå€¼è®¾ç½®ä¸ºå®¹é‡çš„1.5å€</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc = sizeCtl, sc - <span class="number">1</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((sc - <span class="number">2</span>) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT)</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    finishing = advance = <span class="keyword">true</span>;</span><br><span class="line">                    i = n; <span class="comment">// recheck before commit</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//CASç®—æ³•è·å–æŸä¸ªæ•°ç»„èŠ‚ç‚¹ï¼Œä¸ºç©ºå°±è®¾ç½®ä¸ºfwd</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i)) == <span class="keyword">null</span>)</span><br><span class="line">                advance = casTabAt(tab, i, <span class="keyword">null</span>, fwd);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„hashä¸º-1ï¼Œè·³è¿‡</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">                advance = <span class="keyword">true</span>; <span class="comment">// already processed</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//å¯¹å¤´èŠ‚ç‚¹åŠ é”ï¼Œç¦æ­¢å…¶ä»–çº¿ç¨‹è¿›å…¥</span></span><br><span class="line">                <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                        </span><br><span class="line">                        <span class="comment">//æ„é€ ä¸¤ä¸ªé“¾è¡¨ ï¼Œå°†è¯¥èŠ‚ç‚¹çš„åˆ—è¡¨æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯åŸé“¾è¡¨çš„æ’åˆ—é¡ºåºï¼Œä¸€ä¸ªæ˜¯ååº</span></span><br><span class="line">                        Node&lt;K,V&gt; ln, hn;  </span><br><span class="line">                        <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;   <span class="comment">// fh å½“å‰èŠ‚ç‚¹çš„hashå€¼   è‹¥ &gt;= 0 </span></span><br><span class="line">                            <span class="keyword">int</span> runBit = fh &amp; n;</span><br><span class="line">                            Node&lt;K,V&gt; lastRun = f;    <span class="comment">//å°†å½“å‰èŠ‚ç‚¹èµ‹å€¼ç»™ lastRun  èŠ‚ç‚¹  </span></span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; p = f.next; p != <span class="keyword">null</span>; p = p.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> b = p.hash &amp; n;</span><br><span class="line">                                <span class="keyword">if</span> (b != runBit) &#123;</span><br><span class="line">                                    runBit = b;</span><br><span class="line">                                    lastRun = p;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (runBit == <span class="number">0</span>) &#123;</span><br><span class="line">                                ln = lastRun;</span><br><span class="line">                                hn = <span class="keyword">null</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                hn = lastRun;</span><br><span class="line">                                ln = <span class="keyword">null</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//å·®åˆ†åˆ—è¡¨æ“ä½œ</span></span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> ph = p.hash; K pk = p.key; V pv = p.val;</span><br><span class="line">                                <span class="keyword">if</span> ((ph &amp; n) == <span class="number">0</span>)</span><br><span class="line">                                    ln = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, ln);</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hn = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, hn);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//åœ¨nextTab çš„i ä½ç½®ä¸Šæ”¾ç½®lnèŠ‚ç‚¹</span></span><br><span class="line">                            setTabAt(nextTab, i, ln);</span><br><span class="line">                            <span class="comment">//åœ¨nextTab çš„ i+n ä½ç½®ä¸Šæ”¾ç½® hnèŠ‚ç‚¹</span></span><br><span class="line">                            setTabAt(nextTab, i + n, hn);</span><br><span class="line">                            <span class="comment">//åœ¨tabèŠ‚ç‚¹iä½ç½®ä¸Šæ’å…¥æ’å…¥forwardNodeèŠ‚ç‚¹ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»å¤„ç†</span></span><br><span class="line">                            setTabAt(tab, i, fwd);</span><br><span class="line">                            advance = <span class="keyword">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//å¯¹TreeBinå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè¿‡ç¨‹ä¸ä¸Šé¢æœ‰äº›ç±»ä¼¼ </span></span><br><span class="line">                        <span class="comment">//ä¹ŸæŠŠèŠ‚ç‚¹åˆ†ç±»ï¼Œåˆ†åˆ«æ’å…¥åˆ°loå’Œhiä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¸­</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                            TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f;</span><br><span class="line">                            TreeNode&lt;K,V&gt; lo = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                            TreeNode&lt;K,V&gt; hi = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                            <span class="keyword">int</span> lc = <span class="number">0</span>, hc = <span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; e = t.first; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> h = e.hash;</span><br><span class="line">                                TreeNode&lt;K,V&gt; p = <span class="keyword">new</span> TreeNode&lt;K,V&gt;</span><br><span class="line">                                    (h, e.key, e.val, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">if</span> ((h &amp; n) == <span class="number">0</span>) &#123;</span><br><span class="line">                                    <span class="keyword">if</span> ((p.prev = loTail) == <span class="keyword">null</span>)</span><br><span class="line">                                        lo = p;</span><br><span class="line">                                    <span class="keyword">else</span></span><br><span class="line">                                        loTail.next = p;</span><br><span class="line">                                    loTail = p;</span><br><span class="line">                                    ++lc;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">else</span> &#123;</span><br><span class="line">                                    <span class="keyword">if</span> ((p.prev = hiTail) == <span class="keyword">null</span>)</span><br><span class="line">                                        hi = p;</span><br><span class="line">                                    <span class="keyword">else</span></span><br><span class="line">                                        hiTail.next = p;</span><br><span class="line">                                    hiTail = p;</span><br><span class="line">                                    ++hc;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//å¦‚æœæ‰©å®¹å ä¸åœ¨éœ€è¦treeç»“æ„ï¼Œåå‘è½¬æ¢æˆé“¾è¡¨ç»“æ„</span></span><br><span class="line">                            ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) :</span><br><span class="line">                                (hc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(lo) : t;</span><br><span class="line">                            hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) :</span><br><span class="line">                                (lc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(hi) : t;</span><br><span class="line">                            setTabAt(nextTab, i, ln);</span><br><span class="line">                            setTabAt(nextTab, i + n, hn);</span><br><span class="line">                            setTabAt(tab, i, fwd);</span><br><span class="line">                            advance = <span class="keyword">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="putæ–¹æ³•"><a href="#putæ–¹æ³•" class="headerlink" title="putæ–¹æ³•"></a><strong>putæ–¹æ³•</strong></h2><p>putæ“ä½œæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€ä¸‹put()æ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p><ul><li>put()è¦æ±‚é”®å€¼éƒ½ä¸èƒ½ä¸ºç©º</li><li>éœ€è¦ç»è¿‡ä¸¤æ¬¡æ•£åˆ—ï¼Œ æ˜¯æ•°æ®å‡åŒ€åˆ†æ•£ï¼Œå‡å°‘ç¢°æ’çš„æ¬¡æ•°</li><li>åˆ¤æ–­tabæ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆ™è°ƒç”¨initTableè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼ˆå•çº¿ç¨‹ï¼‰</li><li>æ•°ç»„içš„ä½ç½®æ²¡æœ‰å…ƒç´ å­˜åœ¨ï¼Œç›´æ¥æ”¾å…¥</li><li>å¦‚æœiçš„ä½ç½®åœ¨è¿›è¡ŒMOVEæ“ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåˆ™å¤šçº¿ç¨‹å¸®åŠ©æ‰©å®¹</li><li>å¦‚æœiçš„ä½ç½®æœ‰å…ƒç´ å­˜åœ¨ï¼Œåˆ™åœ¨è¯¥èŠ‚ç‚¹åŠ é”Synchronizedï¼Œåˆ¤æ–­æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘ï¼ŒæŒ‰ç…§ç›¸åº”çš„æ’å…¥è§„åˆ™æ’å…¥</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(K key, V value, <span class="keyword">boolean</span> onlyIfAbsent)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//key|value == null  æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="comment">//ConcurrentHashMapä¸å…è®¸é”®æˆ–è€…å€¼ä¸ºnullçš„è¿™ç§æƒ…å†µå‘ç”Ÿ</span></span><br><span class="line">    <span class="comment">//è¿™ä¸€ç‚¹å’ŒHashMapæœ‰åŒºåˆ«</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span> || value == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ•£åˆ—åœ¨æ•£åˆ—ï¼Œ è®©æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘ç¢°æ’æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> hash = spread(key.hashCode());     --&gt;<span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">spread</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;<span class="keyword">return</span> (h ^ (h &gt;&gt;&gt; <span class="number">16</span>)) &amp; HASH_BITS;&#125;   </span><br><span class="line">    <span class="keyword">int</span> binCount = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ­»å¾ªç¯   ç›¸å½“äºwhile(true) ,å°†tableèµ‹å€¼ç»™ tab </span></span><br><span class="line">    <span class="keyword">for</span> (Node&lt;K,V&gt;[] tab = table;;) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªNodeç±»å‹çš„å˜é‡f , int ç±»å‹çš„å˜é‡ n i fh </span></span><br><span class="line">        Node&lt;K,V&gt; f; <span class="keyword">int</span> n, i, fh;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ¤æ–­tabæ˜¯å¦ä¸ºnull  ,æ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œåˆå§‹åŒ–ï¼Œæ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            tab = initTable();</span><br><span class="line">            <span class="comment">//tabAt è·å–å€¼</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i = (n - <span class="number">1</span>) &amp; hash)) == <span class="keyword">null</span>) &#123;</span><br><span class="line">        </span><br><span class="line">            <span class="comment">//æ·»åŠ åˆ°tableä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (casTabAt(tab, i, <span class="keyword">null</span>,</span><br><span class="line">                         <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key, value, <span class="keyword">null</span>)))</span><br><span class="line">                <span class="keyword">break</span>;    <span class="comment">//é€€å‡ºå¾ªç¯               // no lock when adding to empty bin</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//nodeçš„hashå€¼ä¸º -1 </span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">            tab = helpTransfer(tab, f);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            V oldVal = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        binCount = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; e = f;; ++binCount) &#123;</span><br><span class="line">                            K ek;</span><br><span class="line">                            </span><br><span class="line">                            <span class="comment">//key ç›¸ç­‰ï¼Œä½¿ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼</span></span><br><span class="line">                            <span class="keyword">if</span> (e.hash == hash &amp;&amp;((ek = e.key) == key ||(ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                                oldVal = e.val;</span><br><span class="line">                                <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                    e.val = value;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            Node&lt;K,V&gt; pred = e;</span><br><span class="line">                            <span class="comment">//æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨</span></span><br><span class="line">                            <span class="keyword">if</span> ((e = e.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                                pred.next = <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key,value, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;   </span><br><span class="line">                    <span class="comment">//çº¢é»‘æ ‘æ›¿æ¢</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                        Node&lt;K,V&gt; p;</span><br><span class="line">                        binCount = <span class="number">2</span>;</span><br><span class="line">                        <span class="keyword">if</span> ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,value)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            oldVal = p.val;</span><br><span class="line">                            <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                p.val = value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (binCount != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD)</span><br><span class="line">                    treeifyBin(tab, i);</span><br><span class="line">                <span class="keyword">if</span> (oldVal != <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> oldVal;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addCount(<span class="number">1L</span>, binCount);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Getæ–¹æ³•"><a href="#Getæ–¹æ³•" class="headerlink" title="Getæ–¹æ³•"></a><strong>Getæ–¹æ³•</strong></h2><p>Getæ–¹æ³•ä¹Ÿæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼Œå…ƒç´ æ”¾å…¥äº†ï¼Œæ€»è¦å–å‡ºæ¥</p><ul><li>æ ¹æ®ä¼ å…¥çš„key,è·å–ç›¸åº”çš„hashå€¼</li><li>ç„¶ååˆ¤æ–­å½“å‰çš„tableæ•°ç»„æ˜¯å¦ä¸ºç©º</li><li>è®¡ç®—æŒ‡å®šçš„keyåœ¨tableä¸­å­˜å‚¨çš„ä½ç½®</li><li>é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘è½¬æ¢ç›¸ä¾çš„æ–¹æ³•å¤„ç†</li><li>ä¸å­˜åœ¨åˆ™è¿”å›null</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; <span class="keyword">int</span> n, eh; K ek;</span><br><span class="line">    <span class="keyword">int</span> h = spread(key.hashCode());</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (e = tabAt(tab, (n - <span class="number">1</span>) &amp; h)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((eh = e.hash) == h) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((ek = e.key) == key || (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))</span><br><span class="line">                <span class="keyword">return</span> e.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//eh&lt; 0 è¡¨ç¤ºçº¢é»‘æ ‘èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (eh &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> (p = e.find(h, key)) != <span class="keyword">null</span> ? p.val : <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//é“¾è¡¨éå†</span></span><br><span class="line">        <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (e.hash == h &amp;&amp;</span><br><span class="line">                ((ek = e.key) == key || (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek))))</span><br><span class="line">                <span class="keyword">return</span> e.val; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>JDK6ï¼Œ7ä¸­çš„ConcurrentHashmapä¸»è¦ä½¿ç”¨Segmentæ¥å®ç°å‡å°é”ç²’åº¦ï¼ŒæŠŠHashMapåˆ†å‰²æˆè‹¥å¹²ä¸ªSegmentï¼Œåœ¨putçš„æ—¶å€™éœ€è¦é”ä½Segmentï¼Œgetæ—¶å€™ä¸åŠ é”ï¼Œä½¿ç”¨volatileæ¥ä¿è¯å¯è§æ€§ï¼Œå½“è¦ç»Ÿè®¡å…¨å±€æ—¶ï¼ˆæ¯”å¦‚sizeï¼‰ï¼Œé¦–å…ˆä¼šå°è¯•å¤šæ¬¡è®¡ç®—modcountæ¥ç¡®å®šï¼Œè¿™å‡ æ¬¡å°è¯•ä¸­ï¼Œæ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥è¿”å›sizeã€‚å¦‚æœæœ‰ï¼Œåˆ™éœ€è¦ä¾æ¬¡é”ä½æ‰€æœ‰çš„Segmentæ¥è®¡ç®—ã€‚</p><p>jdk7ä¸­ConcurrentHashmapä¸­ï¼Œå½“é•¿åº¦è¿‡é•¿ï¼Œç¢°æ’ä¼šå¾ˆé¢‘ç¹ï¼Œé“¾è¡¨çš„å¢æ”¹åˆ æŸ¥æ“ä½œéƒ½ä¼šæ¶ˆè€—å¾ˆé•¿çš„æ—¶é—´ï¼Œå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥jdk8 ä¸­å®Œå…¨é‡å†™äº†concurrentHashmap,ä»£ç é‡ä»åŸæ¥çš„1000å¤šè¡Œå˜æˆäº† 6000å¤š è¡Œï¼Œå®ç°ä¸Šä¹Ÿå’ŒåŸæ¥çš„åˆ†æ®µå¼å­˜å‚¨æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>ä¸»è¦è®¾è®¡ä¸Šçš„å˜åŒ–æœ‰ä»¥ä¸‹å‡ ç‚¹:</p><ol><li>ä¸é‡‡ç”¨segmentè€Œé‡‡ç”¨nodeï¼Œé”ä½nodeæ¥å®ç°å‡å°é”ç²’åº¦ã€‚</li><li>è®¾è®¡äº†MOVEDçŠ¶æ€ å½“resizeçš„ä¸­è¿‡ç¨‹ä¸­ çº¿ç¨‹2è¿˜åœ¨putæ•°æ®ï¼Œçº¿ç¨‹2ä¼šå¸®åŠ©resizeã€‚</li><li>ä½¿ç”¨3ä¸ªCASæ“ä½œæ¥ç¡®ä¿nodeçš„ä¸€äº›æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ç§æ–¹å¼ä»£æ›¿äº†é”ã€‚</li><li>sizeCtlçš„ä¸åŒå€¼æ¥ä»£è¡¨ä¸åŒå«ä¹‰ï¼Œèµ·åˆ°äº†æ§åˆ¶çš„ä½œç”¨ã€‚</li></ol><p>å‚è€ƒï¼š</p><p><a href="https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fu010723709%2Farticle%2Fdetails%2F48007881" target="_blank" rel="noopener">http://blog.csdn.net/u010723709/article/details/48007881</a></p>]]></content>
    
    <summary type="html">
    
      Find Everything about ConcurrentHashMap IN There.
    
    </summary>
    
    
      <category term="Analyst of SourceCode" scheme="http://yoursite.com/tags/Analyst-of-SourceCode/"/>
    
  </entry>
  
  <entry>
    <title>Everything About HashSet</title>
    <link href="http://yoursite.com/2020/03/21/Everything-About-HashSet/"/>
    <id>http://yoursite.com/2020/03/21/Everything-About-HashSet/</id>
    <published>2020-03-21T05:39:21.000Z</published>
    <updated>2020-03-21T05:44:54.525Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>æ–‡ç« çš„å†…å®¹åŸºäºJDK1.7è¿›è¡Œåˆ†æï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢åŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äº1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜ã€‚</p><p>HashSetæ˜¯Setæ¥å£çš„å…¸å‹å®ç°ï¼ŒHashSetæŒ‰ç…§Hashç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ã€‚å­˜åœ¨ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ä¸èƒ½ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œå…ƒç´ æ˜¯æ— åºçš„</li><li>HashSetä¸æ˜¯åŒæ­¥çš„ï¼Œéœ€è¦å¤–éƒ¨ä¿æŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜</li><li>é›†åˆå…ƒç´ å€¼å…è®¸ä¸ºnull</li></ul><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object </span><br><span class="line">    java.util.AbstractCollection&lt;E&gt; </span><br><span class="line">        java.util.AbstractSet&lt;E&gt; </span><br><span class="line">            java.util.HashSet&lt;E&gt;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializable, Cloneable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Set&lt;E&gt;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;  <span class="comment">//mapé›†åˆï¼ŒHashSetå­˜æ”¾å…ƒç´ çš„å®¹å™¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object(); <span class="comment">//mapï¼Œä¸­é”®å¯¹åº”çš„valueå€¼</span></span><br></pre></td></tr></table></figure><h1 id="é‡è¦æ–¹æ³•æ·±åº¦è§£æ"><a href="#é‡è¦æ–¹æ³•æ·±åº¦è§£æ" class="headerlink" title="é‡è¦æ–¹æ³•æ·±åº¦è§£æ"></a>é‡è¦æ–¹æ³•æ·±åº¦è§£æ</h1><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ— å‚æ„é€ æ–¹æ³•ï¼Œå®Œæˆmapçš„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šé›†åˆè½¬åŒ–ä¸ºHashSet, å®Œæˆmapçš„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">   map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">   addAll(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œå’Œè´Ÿè½½å› å­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­ï¼Œdummy æ— å®é™…æ„ä¹‰</span></span><br><span class="line">HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ„é€ å‡½æ•°ï¼Œä¸éš¾å‘ç°ï¼ŒHashSetçš„åº•å±‚æ˜¯é‡‡ç”¨HashMapå®ç°çš„ã€‚</p><h2 id="Add-æ–¹æ³•"><a href="#Add-æ–¹æ³•" class="headerlink" title="Add()æ–¹æ³•"></a>Add()æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PRESENTä¸ºHashSetç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªä½¿ç”¨static final ä¿®é¥°çš„å¸¸é‡ï¼Œå¹¶æ— å®é™…çš„æ„ä¹‰ï¼ŒHashSetçš„addæ–¹æ³•è°ƒç”¨HashMapçš„put()æ–¹æ³•å®ç°ï¼Œå¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œmap.put()æ”¾å›çš„æ˜¯æ—§å€¼ï¼Œæ·»åŠ å¤±è´¥ï¼Œå¦‚æœæ·»åŠ æˆåŠŸmap.put()æ–¹æ³•è¿”å›çš„æ˜¯null ,HashSet.add()æ–¹æ³•è¿”å›true,è¦æ·»åŠ çš„å…ƒç´ å¯ä½œä¸ºmapä¸­çš„key ã€‚</p><h2 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ–¹æ³•ï¼Œè°ƒç”¨map.remove()æ–¹æ³•å®ç°ï¼Œmap.remove()èƒ½æ‰¾åˆ°æŒ‡å®šçš„key,åˆ™è¿”å›keyå¯¹åº”çš„value,å¯¹äºHashsetè€Œè¨€ï¼Œå®ƒæ‰€æœ‰çš„keyå¯¹åº”çš„å€¼éƒ½æ˜¯PRESENTã€‚</p><h1 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">5024744406713321676L</span>; <span class="comment">//åºåˆ—åŒ–ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;  <span class="comment">//HashMapå˜é‡ï¼Œç”¨äºå­˜æ”¾HashSetçš„å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object(); <span class="comment">//mapä¸­çš„å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œå°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºHashSet</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">        addAll(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šåˆå§‹åŒ–çš„å¤§å°å’Œè´Ÿè½½å› å­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œé‡‡ç”¨defaultä¿®é¥°ï¼Œåªèƒ½æ˜¯åŒä¸€ä¸ªåŒ…ä¸‹çš„æˆå‘˜è®¿é—®ã€‚åŒ…ä¸ç›¸åŒæ— æ³•è®¿é—®</span></span><br><span class="line">    HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">        map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//HashSetçš„éå†æ“ä½œ</span></span><br><span class="line">    <span class="comment">//é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥å‘ç°ï¼ŒHashSetè°ƒç”¨äº†HashMapå­˜æ”¾ï¼Œå› ä¸ºHashSetå¹¶ä¸æ˜¯é”®å€¼å¯¹å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒåªæ˜¯æŠŠå®ƒçš„å€¼åšäº†Mapä¸­çš„é”®ï¼Œåœ¨éå†HashSetçš„é›†åˆå…ƒç´ æ—¶ï¼Œå®é™…ä¸Šæ˜¯éå†çš„Mapä¸­Keyçš„é›†åˆã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›é›†åˆä¸­å…ƒç´ çš„å®¹é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.containsKey(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ çš„å…ƒç´ ä½œä¸ºäº†Mapä¸­çš„key,valueä½¿ç”¨äº†ä¸€ä¸ªå¸¸é‡è¡¨ç¤º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºé›†åˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map.clear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…‹éš†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            HashSet&lt;E&gt; newSet = (HashSet&lt;E&gt;) <span class="keyword">super</span>.clone();</span><br><span class="line">            newSet.map = (HashMap&lt;E, Object&gt;) map.clone();</span><br><span class="line">            <span class="keyword">return</span> newSet;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å†™å…¥è¾“å‡ºæµæ“ä½œã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException </span>&#123;</span><br><span class="line">        <span class="comment">// Write out any hidden serialization magic</span></span><br><span class="line">        s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out HashMap capacity and load factor</span></span><br><span class="line">        s.writeInt(map.capacity());</span><br><span class="line">        s.writeFloat(map.loadFactor());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out size</span></span><br><span class="line">        s.writeInt(map.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (E e : map.keySet())</span><br><span class="line">            s.writeObject(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»è¾“å…¥æµä¸­è¯»å–å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// Read in any hidden serialization magic</span></span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in HashMap capacity and load factor and create backing HashMap</span></span><br><span class="line">        <span class="keyword">int</span> capacity = s.readInt();</span><br><span class="line">        <span class="keyword">float</span> loadFactor = s.readFloat();</span><br><span class="line">        map = (((HashSet)<span class="keyword">this</span>) <span class="keyword">instanceof</span> LinkedHashSet ?</span><br><span class="line">               <span class="keyword">new</span> LinkedHashMap&lt;E,Object&gt;(capacity, loadFactor) :</span><br><span class="line">               <span class="keyword">new</span> HashMap&lt;E,Object&gt;(capacity, loadFactor));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in size</span></span><br><span class="line">        <span class="keyword">int</span> size = s.readInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            E e = (E) s.readObject();</span><br><span class="line">            map.put(e, PRESENT);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li>HashSetçš„åº•å±‚é€šè¿‡HashMapå®ç°çš„ã€‚è€ŒHashMapåœ¨1.7ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨å®ç°ï¼Œåœ¨1.8+ä½¿ç”¨çš„æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ã€‚å…¶å®ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼ŒHashSetçš„åº•å±‚å®ç°å’ŒHashMapä½¿ç”¨çš„æ˜¯ç›¸åŒçš„æ–¹å¼ï¼Œå› ä¸ºMapæ˜¯æ— åºçš„ï¼Œå› æ­¤HashSetä¹Ÿæ— æ³•ä¿è¯é¡ºåºã€‚</li><li>HashSetçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å€ŸåŠ©HashMapçš„æ–¹æ³•æ¥å®ç°çš„ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      Find Everything about HashSet IN There.
    
    </summary>
    
    
      <category term="Analyst of SourceCode" scheme="http://yoursite.com/tags/Analyst-of-SourceCode/"/>
    
  </entry>
  
  <entry>
    <title>2019-2In TaiwanTech</title>
    <link href="http://yoursite.com/2020/02/17/2019-2In-TaiwanTech/"/>
    <id>http://yoursite.com/2020/02/17/2019-2In-TaiwanTech/</id>
    <published>2020-02-17T10:10:48.000Z</published>
    <updated>2020-03-30T04:19:58.148Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®"><a href="#å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®" class="headerlink" title="å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®"></a>å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®</h2><p><img src="https://i.loli.net/2020/02/17/M5U9XmiwQfFJ3bZ.png" alt="1082.png"></p><p>å¾Œé¢å†è£œå…§å®¹ï¼Œå·²ç¶“éŒ¯éå¯¦ç¿’å’Œç§‹æ‹›äº†ã€‚ç¾åœ¨æŠ“ç·Šæææ˜¥æ‹›ã€‚</p><blockquote><p>å­¸æ ¡çš„èª²å¯¦åœ¨å¤ªå¤šï¼Œ30å­¸åˆ†å¿™8éä¾†</p></blockquote><p>å›å®¶ä»¥åå‘ç°é’™hubä¹Ÿæ‰“ä¸å¼€äº†â€¦..é™¤äº†ç§‘å­¦ä¸Šç½‘çš„è§£å†³æ–¹æ³•ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯<a href="https://blog.csdn.net/ustccw/article/details/84543284" target="_blank" rel="noopener">è®¾ç½®é™æ€IPåœ°å€</a></p><p>å›¾åºŠä¹ŸåŠ è½½ä¸å‡ºæ¥äº†ï¼Œè¿™é‡Œæ¨è<a href="https://sm.ms/" target="_blank" rel="noopener">SM SMçš„å›¾åºŠæœåŠ¡</a></p><h2 id="æ–°å¹´æ–°FLAG"><a href="#æ–°å¹´æ–°FLAG" class="headerlink" title="æ–°å¹´æ–°FLAG"></a>æ–°å¹´æ–°FLAG</h2><h3 id="ä¸“ä¸šæŠ€æœ¯"><a href="#ä¸“ä¸šæŠ€æœ¯" class="headerlink" title="ä¸“ä¸šæŠ€æœ¯"></a>ä¸“ä¸šæŠ€æœ¯</h3><ul><li>æŒ‰ç…§zuochengyunå¤§å“¥çš„å»ºè®®è¯»JDKé‡è¦åŒ…çš„æºä»£ç ,<br><code>java.lang</code>,<code>java.util</code>.<code>java.io</code></li><li><p>Springæºç ,</p></li><li><p>å­¦ä¹ åˆ†å¸ƒå¼ç¼“å­˜æŠ€æœ¯.</p></li><li><p>PASS THE FRM Certification RANK1</p></li></ul><h3 id="è¯­è¨€æ°´å¹³"><a href="#è¯­è¨€æ°´å¹³" class="headerlink" title="è¯­è¨€æ°´å¹³"></a>è¯­è¨€æ°´å¹³</h3><ul><li>æ—¥è¯­è¾¾åˆ°N3æ°´å¹³</li></ul><p><a href="https://www.zhihu.com/question/59051017/answer/161476178" target="_blank" rel="noopener">å¦‚ä½•è‡ªå­¦å¤‡è€ƒæ—¥è¯­N3ï¼Ÿ</a></p><ul><li>TOEFLç ´ç™¾</li></ul><h3 id="ğŸ“šä¹¦å•"><a href="#ğŸ“šä¹¦å•" class="headerlink" title="ğŸ“šä¹¦å•"></a>ğŸ“šä¹¦å•</h3><ul><li><p>Thinking In Java</p><p>Bruce Eckel çš„ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ï¼ˆThinking in Javaï¼‰ï¼Œéå¸¸æœ‰åçš„ç»å…¸ä¹¦ç±ã€‚è¿™æœ¬ä¹¦çš„ç‰¹ç‚¹æ˜¯ï¼Œä¸ä»…ä»…ä»‹ç» Java ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œä¹Ÿä¼šæ€è€ƒç¼–ç¨‹ä¸­çš„å„ç§é€‰æ‹©ä¸åˆ¤æ–­ï¼ŒåŒ…æ‹¬ç©¿æ’è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ï¼Œä½œè€…ä»ç†è®ºåˆ°å®è·µæ„ä¹‰ä»ä¸åŒçš„è§’åº¦è¿›è¡Œæ¢è®¨ï¼Œæ„å»ºç¨³å›ºçš„ Java ç¼–ç¨‹çŸ¥è¯†ä½“ç³»ã€‚</p><p><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1849198902,3579180612&amp;fm=26&amp;gp=0.jpg" alt="img" style="zoom:33%;"></p></li><li><p>Effective Java</p><p>è¿™æœ¬ä¹¦çš„è‹±æ–‡ç¬¬ä¸‰ç‰ˆå·²ç»åœ¨å›½å†…ä¸Šå¸‚ï¼Œæ¶µç›–äº† Java 7 åˆ° Java 9 çš„å„ç§æ–°ç‰¹æ€§ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æœ¬ä¹¦ä¸ç®—æ˜¯ä¸€æœ¬åŸºç¡€ä¹¦ç±ï¼Œä½†å½“ä½ æœ‰ä¸€å®šåŸºç¡€åï¼Œè¿˜æ˜¯éå¸¸å»ºè®®é€šè¯»ä¸€ä¸‹çš„ã€‚å…³äºè¿™æœ¬ä¹¦çš„é˜…è¯»ï¼Œæˆ‘çš„å»ºè®®æ˜¯è¾¹å­¦ä¹ è¾¹å›é¡¾ï¼Œåœ¨å¸æ”¶ä¹¦ä¸­çš„ç»éªŒæ—¶ï¼Œå¤šå»æƒ³æƒ³è‡ªå·±åœ¨å®é™…åº”ç”¨ä¸­æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚è™½ç„¶ã€ŠEffective Javaã€‹çš„å…·ä½“ç« èŠ‚å¯èƒ½æ˜¯ä»æŸä¸ªç‚¹å‡ºå‘ï¼Œä½†å¯ä»¥è¯´éƒ½æ˜¯å¯¹ Javaã€JVMã€é¢å‘å¯¹è±¡ç­‰å„ç§çŸ¥è¯†çš„ç»¼åˆè¿ç”¨ï¼Œå¯¹äºè®¾è®¡å’Œå®ç°é«˜è´¨é‡çš„ä»£ç å¾ˆæœ‰å¸®åŠ©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/06/bf6e3f87d162595ddaa5d0786c0ed806.jpg" alt="img"></p></li><li><p>Java å¹¶å‘ç¼–ç¨‹å®æˆ˜</p><p>ä½œè€…å…¨æ˜¯å“å½“å½“çš„äººç‰©ï¼Œæ¯”å¦‚ Brian Goetzï¼Œæˆ‘å¤šæ¬¡åœ¨ä¸“æ é‡Œå¼•ç”¨ä»–çš„è§‚ç‚¹ï¼Œä¼—å¤šå¼ºåŠ›ä½œè€…ä¹Ÿä¿è¯äº†ä¹¦çš„è´¨é‡ã€‚æŠ›å¼€ä½œè€…å…‰ç¯ï¼Œè¿™æœ¬ä¹¦çš„å†…å®¹å…¨éƒ¨å»ºç«‹åœ¨ç†è®ºä¹‹ä¸Šï¼Œå…ˆè®²æ¸…é“ç†å†è°ˆå®è·µï¼Œå¯ä»¥çœŸæ­£è®©ä½ çŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚è¿™æœ¬ä¹¦æ›´åŠ ä¾§é‡å¹¶å‘ç¼–ç¨‹ä¸­æœ‰å“ªäº›é—®é¢˜ï¼Œå¦‚ä½•æ¥æ·±åˆ»åœ°ç†è§£å’Œå®šä¹‰é—®é¢˜ï¼Œå¦‚ä½•åˆ©ç”¨å¯é çš„æ‰‹æ®µæŒ‡å¯¼å·¥ç¨‹å®è·µï¼Œå¹¶æ²¡æœ‰è¿‡åˆ†çº ç»“äºå¹¶å‘ç±»åº“çš„æºç å±‚é¢ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/04/3f/0432ac1e431256fb894144aa2e66b03f.jpg" alt="img"></p></li><li><p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº</p><p><img src="https://static001.geekbang.org/resource/image/98/5f/98d02b66e1d3fdf8cc1f7f7c6f974b5f.jpg" alt="img"></p></li><li><p>æ€§èƒ½ä¼˜åŒ–</p><p>æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘æ¨è Charlie Hunt å’Œ Binu John æ‰€è‘—çš„ã€ŠJava æ€§èƒ½ä¼˜åŒ–æƒå¨æŒ‡å—ã€‹ï¼ˆJava Performanceï¼‰ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šæ¬¡åœ¨ç›´æ’­æ—¶å‘å¤§å®¶æ¨èçš„ã€‚Java ä¹‹çˆ¶ James Goslingã€‚</p><p><img src="https://static001.geekbang.org/resource/image/c9/10/c9fae97c8a4954cb91b59dc7e59ab710.jpg" alt="img"></p></li><li><p>Springå®æˆ˜</p><p>å¯ä»¥è¯´ Spring ç­‰ç›¸å…³æ¡†æ¶å·²ç»æˆä¸ºä¸šåŠ¡å¼€å‘çš„äº‹å®æ ‡å‡†ï¼Œç³»ç»Ÿæ€§åœ°æŒæ¡ Spring æ¡†æ¶çš„è®¾è®¡å’Œå®è·µï¼Œæ˜¯å¿…éœ€çš„æŠ€èƒ½ä¹‹ä¸€ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/75/61/7559562971dc2eadd8fd03f02980a461.jpg" alt="img"></p></li><li><p>Nettyå®æˆ˜</p><p>Netty åœ¨æ€§èƒ½ã€å¯æ‰©å±•æ€§ç­‰æ–¹é¢çš„çªå‡ºè¡¨ç°ï¼Œå·²ç»å¾—åˆ°å……åˆ†éªŒè¯ï¼Œä½œä¸ºåŸºç¡€çš„é€šä¿¡æ¡†æ¶ï¼Œå·²ç»å¹¿æ³›åº”ç”¨åœ¨å„ç§äº’è”ç½‘æ¶æ„ã€æ¸¸æˆç­‰é¢†åŸŸï¼Œç”šè‡³å¯ä»¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä»”ç»†åˆ†æè¿‡ Nettyï¼Œå¯¹ NIO ç­‰æ–¹é¢çš„ç†è§£å¾ˆå¯èƒ½è¿˜åœ¨å¾ˆè‚¤æµ…çš„é˜¶æ®µã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f8/d9/f8b11bdcb1559e472b77e23fcf184dd9.jpg" alt="img"></p></li><li><p>Cloud Native Java</p><p>Java åº”ç”¨ç¨‹åºæ¶æ„å¤„äºé£å¿«çš„æ¼”è¿›ä¹‹ä¸­ï¼Œå¾®æœåŠ¡ç­‰æ–°çš„æ¶æ„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œå³ä½¿æœªå¿…æ˜¯ä½¿ç”¨ Spring Bootã€Spring Cloud ç­‰æ¡†æ¶ï¼Œä½†æ˜¯ç³»ç»Ÿçš„å­¦ä¹ å…¶è®¾è®¡æ€æƒ³å’Œå®è·µæŠ€æœ¯ï¼Œç»å¯¹æ˜¯æœ‰å¿…è¦çš„ã€‚å½“ç„¶å¦‚æœä½ åœ¨å®è·µä¸­ä½¿ç”¨ Dubbo ç­‰æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç›¸å…³ä¹¦ç±ã€‚å‰æ²¿é¢†åŸŸçš„å˜åŒ–éå¸¸å¿«ï¼Œå¾ˆå¤šé£é¡ä¸€æ—¶çš„å¼€æºè½¯ä»¶ï¼Œåœ¨å®è·µä¸­é€æ¸è¢«è¯æ˜å­˜åœ¨å„ç§å¼Šç«¯ï¼Œæˆ–è€…å‚å•†åœæ­¢ç»´æŠ¤ã€‚æ‰€ä»¥è¿™éƒ¨åˆ†çš„å­¦ä¹ ï¼Œæˆ‘å»ºè®®ä¸è¦ç›²ç›®è¿½æ–°ï¼Œæœ€å¥½æ˜¯å…³æ³¨äºåˆ†å¸ƒå¼è®¾è®¡ä¸­çš„é—®é¢˜å’Œè§£å†³çš„æ€è·¯ï¼Œåšåˆ°è§¦ç±»æ—é€šï¼Œå¹¶ä¸”æ³¨é‡ä¹¦ç±ä¹‹å¤–çš„å­¦ä¹ æ¸ é“ã€‚ä¸‹é¢ä¸¤æœ¬å¹¶ä¸ç®—æ˜¯ Java ä¹¦ç±ï¼Œä½† Java ç¨‹åºå‘˜è¿›é˜¶å°‘ä¸äº†å¯¹äº’è”ç½‘ä¸»æµæ¶æ„çš„å­¦ä¹ ï¼Œäº†è§£åˆ†å¸ƒå¼æ¶æ„ã€ç¼“å­˜ã€æ¶ˆæ¯ä¸­é—´ä»¶ç­‰ä»¤äººçœ¼èŠ±ç¼­ä¹±çš„æŠ€æœ¯ï¼Œå¯¹äºæœ‰å¿—äºæˆä¸ºæ¶æ„å¸ˆçš„ Java å·¥ç¨‹å¸ˆæ¥è¯´éå¸¸æœ‰å¸®åŠ©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/d2/12/d286554382cbba791f85e667ea124e12.jpg" alt="img"></p></li><li><p>å¤§å‹åˆ†å¸ƒå¼ç½‘ç«™æ¶æ„è®¾è®¡ä¸å®è·µ</p><p>è¿™æœ¬ä¹¦æ€»ç»“äº†ä½œè€…åœ¨æ„å»ºå®‰å…¨ã€å¯ç¨³å®šæ€§ã€é«˜æ‰©å±•æ€§ã€é«˜å¹¶å‘çš„åˆ†å¸ƒå¼ç½‘ç«™æ–¹é¢çš„å¿ƒå¾—ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/4a/4f/4ab17456a34278a8ca18de54fea76f4f.jpg" alt="img"></p></li><li><p>æ·±å…¥åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»åŸç†åˆ°å®æˆ˜</p><p>è¿™æœ¬ä¹¦èåˆäº†åŸç†ã€æ¶æ„å’Œä¸€çº¿äº’è”ç½‘å…¬å¸çš„æ¡ˆä¾‹å®è·µï¼Œå€¼å¾—å‚è€ƒã€‚</p><p><img src="https://static001.geekbang.org/resource/image/3d/b8/3d70890354f556d1b3acbc2f2fdd99b8.jpg" alt="img"></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®&quot;&gt;&lt;a href=&quot;#å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®&quot; class=&quot;headerlink&quot; title=&quot;å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®&quot;&gt;&lt;/a&gt;å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/02/17/M5
      
    
    </summary>
    
    
      <category term="TaiwanTech" scheme="http://yoursite.com/tags/TaiwanTech/"/>
    
  </entry>
  
  <entry>
    <title>Garbage Collection In JVM</title>
    <link href="http://yoursite.com/2020/02/15/Garbage-Collection-In-JVM/"/>
    <id>http://yoursite.com/2020/02/15/Garbage-Collection-In-JVM/</id>
    <published>2020-02-14T17:52:18.000Z</published>
    <updated>2020-02-28T18:02:57.624Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM</h1><p><img src="https://i.loli.net/2020/02/29/HvzDCcBqPuLmiOR.jpg" alt="FULLGC.jpg"></p><p><img src="https://i.loli.net/2020/02/26/rY2Q6bXhUDLNSkR.png" alt="JVM.png"></p><h4 id="ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š"><a href="#ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š" class="headerlink" title="ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š"></a>ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š</h4><ul><li>æ ˆï¼šå‡½æ•°å½“å‰è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›å‡½æ•°å˜é‡ã€‚å­˜å¯¹è±¡çš„å¼•ç”¨ç±»å‹å’Œåœ°å€</li><li>æœ¬åœ°æ–¹æ³•æ ˆï¼šå­˜æ”¾C++è¿è¡Œæ—¶çš„nativeæ ˆã€‚</li><li>ç¨‹åºè®¡æ•°å™¨ï¼šæŒ‡å‘å½“å‰ç¨‹åºè¿è¡Œçš„ä½ç½®ã€‚<h4 id="çº¿ç¨‹å…±äº«åŒºåŸŸï¼š"><a href="#çº¿ç¨‹å…±äº«åŒºåŸŸï¼š" class="headerlink" title="çº¿ç¨‹å…±äº«åŒºåŸŸï¼š"></a>çº¿ç¨‹å…±äº«åŒºåŸŸï¼š</h4></li><li>å †ï¼šå­˜å¯¹è±¡(æœ€ç»ˆ)ï¼Œè€å¹´ä»£ã€‚</li><li>æ–¹æ³•åŒºï¼šå­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ï¼Œåœ¨JDK1.7å‰ä½œæ°¸ä¹…ä»£ï¼Œ1.8ä»¥åæ”¹ä¸ºå…ƒæ•°æ®ç©ºé—´ï¼Œå­˜å‚¨é™æ€å˜é‡å’Œå¸¸é‡ã€ç±»åŠ è½½å™¨ã€‚</li></ul><p>Javaçš„åŸºç¡€æ•°æ®å’ŒæŒ‡é’ˆéƒ½æ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥ç›´æ¥å­˜åˆ°å†…å­˜é‡Œé¢å»ï¼Œä¸æ˜¯å»å­˜åœ°å€å¯»å€ã€‚</p><h3 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h3><ul><li>GC Rootæœ¬åœ°æ–¹æ³•æ ˆ,æ–¹æ³•åŒº,æ ˆä¸èƒ½è¢«åˆ é™¤<blockquote><p>åˆ é™¤æ–¹æ³•</p><ul><li><strong>æ ‡è®°æ¸…ç†</strong>ï¼Œ==ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡==ã€‚</li><li><strong>æ ‡è®°æ•´ç†</strong>(åˆ äº†åé¢çš„é¡¶ä¸Šæ¥ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡)ï¼Œ==å‰ç§»ç©ºé—´ç§»åŠ¨ä»£ä»·å¤ªå¤§==ã€‚</li><li><strong>å¤åˆ¶ç®—æ³•</strong>(åˆ†ä¸ºä¸¤ä¸ªåŒº)ï¼Œä¸ç›´æ¥åˆ é™¤ï¼Œä¸è¢«åˆ é™¤çš„å¤åˆ¶åˆ°æ–°åŒºï¼Œ==éœ€è¦2å€çš„å†…å­˜==ã€‚</li></ul></blockquote></li></ul><h3 id="å®é™…ï¼š"><a href="#å®é™…ï¼š" class="headerlink" title="å®é™…ï¼š"></a>å®é™…ï¼š</h3><h5 id="Minor-GCå½“åœ¨-Eden-åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ-minorGC-ï¼Œç”±äº-Java-å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥-minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚"><a href="#Minor-GCå½“åœ¨-Eden-åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ-minorGC-ï¼Œç”±äº-Java-å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥-minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚" class="headerlink" title="Minor GCå½“åœ¨ Eden åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ minorGC ï¼Œç”±äº Java å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚"></a>Minor GCå½“åœ¨ Eden åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ minorGC ï¼Œç”±äº Java å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚</h5><ul><li>å¹´è½»ä»£ï¼š<strong>EåŒº</strong>(ä¼Šç”¸å›­ï¼Œæ»¡äº†è§¦å‘YoungGC,ç”¨å¤åˆ¶ç®—æ³•)ï¼Œï¼Œ<strong>ä¸¤ä¸ªSurviveåŒº</strong>(S0.S1) 8ï¼š1ï¼š1ï¼Œä¸¤ä¸ªSåŒºäº¤æ›¿å·¥ä½œï¼ˆE+S1åˆ°S0,E+S0åˆ°S1ï¼‰ã€‚æ¯æ¬¡Young GCå®Œå¹´é¾„ä¼šåŠ ä¸€ï¼Œæ»¡15å²å°±ç›´æ¥éƒ½å»è€å¹´ä»£åŒºäº†ã€‚ParNewåƒåœ¾æ”¶é›†å™¨(å¤åˆ¶)ã€‚<h5 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h5></li><li>è€å¹´ä»£ï¼šåªæœ‰ä¸€å—ï¼Œå­˜æ»¡15å²åˆ°å»è€å¹´ä»£åŒºçš„å¯¹è±¡ã€‚å’Œå¤§å¯¹è±¡ï¼ŒOldæ»¡äº†å°±å’Œå¹´è½»çš„ä¸€èµ·Full GC,å‘ç”ŸSTOPPED WORLD,æ•´ä¸ªJavaç¨‹åºç›´æ¥æš‚åœï¼Œå°±ç”¨æ ‡è®°æ¸…ç†æˆ–è€…æ ‡è®°æ•´ç†ã€‚CMSåƒåœ¾æ”¶é›†å™¨(æ ‡è®°æ¸…ç†)ã€‚</li></ul><p><strong>å’ŒGC Rootæ— å…³çš„æ‰èƒ½è¢«åˆ é™¤</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/
      
    
    </summary>
    
    
      <category term="JVM" scheme="http://yoursite.com/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Principle of JVM</title>
    <link href="http://yoursite.com/2020/02/08/Principle-of-JVM/"/>
    <id>http://yoursite.com/2020/02/08/Principle-of-JVM/</id>
    <published>2020-02-07T18:08:41.000Z</published>
    <updated>2020-02-17T10:19:31.548Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡"><a href="#JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡" class="headerlink" title="JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡"></a>JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡</h1><p><div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"></div></p><p><img src="https://images.cnblogs.com/cnblogs_com/neverth/1592425/o_191116143745Java%E8%99%9A%E6%8B%9F%E6%9C%BA-min.png" alt="JVM"><br><br></p><h1 id="javaè™šæ‹Ÿæœº">Javaè™šæ‹Ÿæœº</h1><br><h2 id="ä¸€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ">ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h2><br><h3 id="çº¿ç¨‹ç§æœ‰">çº¿ç¨‹ç§æœ‰</h3><br><ul><br><li><p>ç¨‹åºè®¡æ•°å™¨</p><br><ul><br><li>è®°å½•æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼ˆå¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•åˆ™ä¸ºç©ºï¼‰ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šOOMï¼ˆOutOfMemoryErrorï¼‰çš„åŒºåŸŸã€‚</li><br></ul></li><br><li><p>Javaè™šæ‹Ÿæœºæ ˆ</p><br><ul><br><li>æ¯ä¸ªJavaæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ ˆæ¡¢ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚ä»æ–¹æ³•è°ƒç”¨ç›´åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå¯¹åº”ç€ä¸€ä¸ªæ ˆæ¡¢åœ¨Javaè™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ï¼ˆå±€éƒ¨å˜é‡åŒ…å«åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨referenceå’ŒreturnAddressç±»å‹ï¼‰</li><br></ul></li><br><li><p>æœ¬åœ°æ–¹æ³•æ ˆ</p><br><ul><br><li>æœ¬åœ°æ–¹æ³•æ ˆä¸Javaè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åªä¸è¿‡æ˜¯æœ¬åœ°æ–¹æ³•æ ˆä¸ºNativeæ–¹æ³•æœåŠ¡ã€‚</li><br></ul></li><br></ul><br><h3 id="çº¿ç¨‹å…¬æœ‰">çº¿ç¨‹å…¬æœ‰</h3><br><ul><br><li><p>Javaå †ï¼ˆGCåŒºï¼‰ï¼ˆJava Headï¼‰</p><br><ul><br><li>å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ï¼Œæ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚å¯¹äºæ–°ç”Ÿä»£åˆåˆ†ä¸ºEdenç©ºé—´ã€From Survivorç©ºé—´ã€To Survivorç©ºé—´ã€‚</li><br></ul></li><br><li><p>JDK1.7 æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰</p><br><ul><br><li>ç”¨äºå­˜æ”¾å·²è¢«åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚<br><br>å¯¹è¿™å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶çš„ä¸»è¦ç›®çš„æ˜¯å¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»çš„å¸è½½ï¼Œä½†æ˜¯ä¸€èˆ¬éš¾ä»¥å®ç°ã€‚<br><br>HotSpotè™šæ‹ŸæœºæŠŠå®ƒå½“åšæ°¸ä¹…ä»£æ¥è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä½†å¾ˆéš¾ç¡®å®šæ°¸ä¹…ä»£çš„å¤§å°ï¼Œå› ä¸ºå®ƒå—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œå¹¶ä¸”æ¯æ¬¡Full GCä¹‹åæ°¸ä¹…ä»£çš„å¤§å°éƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ç»å¸¸æŠ›å‡ºOOMå¼‚å¸¸ã€‚<br><br>ä»JDK1.8å¼€å§‹ï¼Œç§»é™¤æ°¸ä¹…ä»£ï¼Œå¹¶æŠŠæ–¹æ³•åŒºç§»è‡³å…ƒç©ºé—´ã€‚</li><br><li><p>è¿è¡Œæ—¶å¸¸é‡æ± </p><br><ul><br><li>æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†<br><br>Classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± ï¼ˆç¼–è¯‘å™¨ç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ä¼šåœ¨ç±»åŠ è½½åè¢«æ”¾å…¥è¿™ä¸ªåŒºåŸŸã€‚<br><br>å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚Stringç±»çš„intern()</li><br></ul></li><br></ul></li><br><li><p>JDK1.8 å…ƒç©ºé—´</p><br><ul><br><li>åŸæœ¬å­˜åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰çš„æ•°æ®ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†Javaå †é‡Œé¢ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†æœ¬åœ°å†…å­˜é‡Œé¢ï¼ˆå³å…ƒç©ºé—´ï¼‰ã€‚å…ƒç©ºé—´å­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼Œé™æ€å˜é‡å’Œå¸¸é‡æ± ç­‰æ”¾å…¥å †ä¸­ã€‚</li><br></ul></li><br><li><p>ç›´æ¥å†…å­˜</p><br><ul><br><li>åœ¨NIOä¸­ï¼Œä¼šä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ã€‚</li><br></ul></li><br></ul><br><h2 id="äºŒhotspotè™šæ‹Ÿæœº">äºŒã€HotSpotè™šæ‹Ÿæœº</h2><br><h3 id="å¯¹è±¡çš„åˆ›å»º">å¯¹è±¡çš„åˆ›å»º</h3><br><ul><br><li>å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶</li><br></ul><br><ol><br><li>æ£€æŸ¥å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­æ‰¾åˆ°ç¬¦å·å¼•ç”¨ï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹è¿‡ï¼Œæ²¡æœ‰çš„è¯å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</li><br><li>åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡ä¹‹åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚</li><br><li>å†…å­˜åˆ†é…å®Œæˆä¹‹åï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚</li><br><li>å¯¹å¯¹è±¡å¤´è¿›è¡Œå¿…è¦çš„è®¾ç½®ã€‚</li><br><li>æ‰§è¡Œæ„é€ æ–¹æ³•æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ã€‚</li><br></ol><br><h3 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€">å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><br><ul><br><li><ol><br><li>å¯¹è±¡å¤´</li><br></ol><br><ul><br><li><ol><br><li>ç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡è¯†ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘å®ç°æˆ³ç­‰ã€‚</li><br></ol></li><br><li><ol><br><li>ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ˆå¦‚æœä½¿ç”¨ç›´æ¥å¯¹è±¡æŒ‡é’ˆè®¿é—®ï¼‰ï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚</li><br></ol></li><br><li><ol><br><li>å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„çš„è¯ï¼Œè¿˜éœ€è¦ç¬¬ä¸‰éƒ¨åˆ†è®°å½•æ•°æ®é•¿åº¦çš„æ•°æ®ã€‚</li><br></ol></li><br></ul></li><br><li><ol><br><li>å®ä¾‹æ•°æ®</li><br></ol><br><ul><br><li>æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç ä¸­å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ã€‚</li><br></ul></li><br><li><ol><br><li>å¯¹é½å¡«å……</li><br></ol><br><ul><br><li>ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚<br><br>HotSpotéœ€è¦å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚</li><br></ul></li><br></ul><br><h3 id="å¯¹è±¡çš„è®¿é—®å®šä½">å¯¹è±¡çš„è®¿é—®å®šä½</h3><br><ul><br><li><p>å¥æŸ„è®¿é—®</p><br><ul><br><li>åœ¨Javaå †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜ä½œä¸ºå¥æŸ„æ± ã€‚<br><br>Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†åˆ°å¯¹è±¡å®ä¾‹æ•°æ®çš„æŒ‡é’ˆå’Œåˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆã€‚<br><br>å¯¹è±¡å®ä¾‹æ•°æ®åœ¨Javaå †ä¸­ï¼Œå¯¹è±¡ç±»å‹æ•°æ®åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ä¸­ã€‚<br><br>ä¼˜ç‚¹ï¼šåœ¨å¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œå¯¹è±¡å¼•ç”¨æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚</li><br></ul></li><br><li><p>ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotä½¿ç”¨ï¼‰</p><br><ul><br><li>Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„ç›´æ¥åœ°å€ã€‚<br><br>åœ¨å †ä¸­çš„å¯¹è±¡å®ä¾‹æ•°æ®å°±éœ€è¦åŒ…å«åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆã€‚<br><br>ä¼˜ç‚¹ï¼šèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</li><br></ul></li><br></ul><br><h2 id="ä¸‰åƒåœ¾æ”¶é›†">ä¸‰ã€åƒåœ¾æ”¶é›†</h2><br><h3 id="æ¦‚è¿°">æ¦‚è¿°</h3><br><ul><br><li>åƒåœ¾æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹Javaå †å’Œæ–¹æ³•åŒºã€‚<br><br>ç¨‹åºè®¡æ•°å™¨ã€Javaè™šæ‹Ÿæœºæ ˆä¸ªæœ¬åœ°æ–¹æ³•æ ˆä¸‰ä¸ªåŒºåŸŸå±äºçº¿ç¨‹ç§æœ‰ï¼Œçº¿ç¨‹æˆ–æ–¹æ³•ç»“æŸä¹‹åå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä¸éœ€è¦å¯¹è¿™ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</li><br></ul><br><h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶">åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶</h3><br><ul><br><li><p>ç¬¬ä¸€æ¬¡æ ‡è®°ï¼ˆç¼“åˆ‘ï¼‰</p><br><ul><br><li><p>å¼•ç”¨è®¡æ•°ç®—æ³•</p><br><ul><br><li>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“å¯¹è±¡å¢åŠ ä¸€ä¸ªå¼•ç”¨æ—¶å¼•ç”¨è®¡æ•°å€¼++ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å¼•ç”¨è®¡æ•°å€¼â€“ï¼Œå¼•ç”¨è®¡æ•°å€¼ä¸º0æ—¶å¯¹è±¡å¯ä»¥è¢«å›æ”¶ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä½†æ˜¯å®ƒéš¾ä»¥è§£å†³å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼Œæ­¤æ—¶è¿™ä¸ªä¸¤ä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°å€¼ä¸º1ï¼Œä½†æ˜¯æ°¸è¿œæ— æ³•ç”¨åˆ°è¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p><ul><li><p>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆJavaä½¿ç”¨ï¼‰</p><ul><li>ä»¥ä¸€ç³»åˆ—GC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ˜¯ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚<p>GC Rootså¯¹è±¡åŒ…æ‹¬</p><br><ol><br><li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆæ¡¢ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æ–¹æ³•åŒºä¸­å…±ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br></ol><br><ul><br><li><p>ç¬¬äºŒæ¬¡æ ‡è®°</p><br><ul><br><li>å½“å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•ï¼Œæˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ã€‚<br><br>å¦‚æœå¯¹è±¡åœ¨finalizeæ–¹æ³•ä¸­é‡æ–°ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”åˆ™å°†ä¸ä¼šè¢«å›æ”¶ã€‚</li><br><li><p>finalize()</p><br><ul><br><li>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•éƒ½åªä¼šè¢«ç³»ç»Ÿè°ƒç”¨ä¸€æ¬¡ã€‚<br><br>å®ƒçš„å‡ºç°æ˜¯ä¸€ä¸ªå¦¥åï¼Œè¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œæ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºã€‚<br><br>finalize()èƒ½åšçš„æ‰€æœ‰å·¥ä½œä½¿ç”¨try-finallyæˆ–è€…å…¶ä»–æ–¹å¼éƒ½å¯ä»¥åšçš„æ›´å¥½ï¼Œå®Œå…¨å¯ä»¥å¿˜è®°åœ¨è¿™ä¸ªå‡½æ•°çš„å­˜åœ¨ã€‚</li><br></ul></li><br></ul></li><br></ul><br><h3 id="æ–¹æ³•åŒºçš„å›æ”¶">æ–¹æ³•åŒºçš„å›æ”¶</h3><br><ul><br><li>åœ¨æ–¹æ³•åŒºè¿›è¡Œåƒåœ¾å›æ”¶çš„æ€§ä»·æ¯”ä¸€èˆ¬æ¯”è¾ƒä½ã€‚<br><br>ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†ï¼ŒåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚</li><br></ul><br><p>æ»¡è¶³æ— ç”¨çš„ç±»ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶æ‰ä»…ä»…ä»£è¡¨å¯ä»¥è¿›è¡Œå›æ”¶ï¼Œä¸æ˜¯å¿…ç„¶å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨-Xnoclassgcå‚æ•°æ§åˆ¶ã€‚</p><br><ol><br><li>è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ã€‚</li><br><li>åŠ è½½è¯¥ç±»çš„ClassLoaderå·²ç»è¢«å›æ”¶ã€‚</li><br><li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®åˆ°è¯¥ç±»çš„æ–¹æ³•ã€‚</li><br></ol><br><h3 id="å¼•ç”¨ç±»å‹">å¼•ç”¨ç±»å‹</h3><br><ul><br><li><ol><br><li>å¼ºå¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨newä¸€ä¸ªæ–°å¯¹è±¡çš„æ–¹å¼æ¥åˆ›å»ºå¼ºå¼•ç”¨ã€‚<br><br>åªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åˆ™æ°¸è¿œä¸ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>è½¯å¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨SoftReferenceç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚<br><br>ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†æ˜¯å¹¶éå¿…é¡»çš„å¯¹è±¡ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨å°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>å¼±å¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨WeakReferenceç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚<br><br>å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†æ—¶ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>è™šå¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨PhantomReferenceç±»æ¥å®ç°è™šå¼•ç”¨ã€‚<br><br>æœ€å¼±çš„å¼•ç”¨å…³ç³»ï¼Œä¸ä¼šå¯¹è¢«å¼•ç”¨çš„å¯¹è±¡ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚<br><br>å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</li><br></ul></li><br></ul><br><h3 id="åƒåœ¾æ”¶é›†ç®—æ³•">åƒåœ¾æ”¶é›†ç®—æ³•</h3><br><ul><br><li><ol><br><li>æ ‡è®° - æ¸…é™¤</li><br></ol><br><ul><br><li>é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶è¢«æ ‡è®°çš„å¯¹è±¡å¹¶å–æ¶ˆæ ‡è®°ã€‚</li><br></ul></li><br></ul><br><p>ä¸è¶³ï¼š</p><br><ol><br><li>æ•ˆç‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ•ˆç‡éƒ½ä¸é«˜ã€‚</li><br><li>ç©ºé—´é—®é¢˜ï¼Œæ ‡è®°æ¸…é™¤ä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œæ²¡æœ‰è¿ç»­å†…å­˜å®¹çº³è¾ƒå¤§å¯¹è±¡è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†ã€‚</li><br></ol><br><ul><br><li><ol><br><li>æ ‡è®° - æ•´ç†</li><br></ol><br><ul><br><li>å’Œæ ‡è®° - æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä½†æ ‡è®°ä¹‹åè®©æ‰€æœ‰å­˜æ´»å¯¹è±¡éƒ½å‘ä¸€æ®µç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚<br><br>è§£å†³äº†æ ‡è®° - æ¸…é™¤ç®—æ³•çš„ç©ºé—´é—®é¢˜ï¼Œä½†éœ€è¦ç§»åŠ¨å¤§é‡å¯¹è±¡ï¼Œè¿˜æ˜¯å­˜åœ¨æ•ˆç‡é—®é¢˜ã€‚</li><br></ul></li><br><li><ol><br><li>å¤åˆ¶</li><br></ol><br><ul><br><li>å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨å¤šçš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚<br><br>ä»£ä»·æ˜¯å°†å†…å­˜ç¼©å°ä¸ºåŸæ¥çš„ä¸€èˆ¬ï¼Œå¤ªé«˜äº†ã€‚</li><br></ul></li><br></ul><br><p>ç°åœ¨å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨è¿™ç§ç®—æ³•ç”¨äºæ–°ç”Ÿä»£ã€‚<br><br>å› ä¸ºæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡98%éƒ½æ˜¯æœç”Ÿæš®æ­»ï¼Œæ‰€ä»¥å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨Edenå’Œå…¶ä¸­ä¸€å—Survivorç©ºé—´ã€‚<br><br>å½“å›æ”¶æ—¶ï¼Œå¦‚æœå¦å¤–ä¸€å—Survivorç©ºé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡æ—¶ï¼Œè¿™äº›å¯¹è±¡å°†ç›´æ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£ã€‚</p><br><ul><br><li><ol><br><li>åˆ†ä»£æ”¶é›†</li><br></ol><br><ul><br><li>ä¸€èˆ¬æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚<br><br>åœ¨æ–°ç”Ÿä»£ä¸­ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œåœ¨è€å¹´ä»£ä¸­ä½¿ç”¨æ ‡è®° -æ¸…é™¤ æˆ–è€… æ ‡è®° - æ•´ç† ç®—æ³•æ¥è¿›è¡Œå›æ”¶ã€‚</li><br></ul></li><br></ul><br><h3 id="hotspotçš„ç®—æ³•å®ç°">HotSpotçš„ç®—æ³•å®ç°</h3><br><ul><br><li><p>æšä¸¾æ ¹èŠ‚ç‚¹ï¼ˆGC Rootsï¼‰</p><br><ul><br><li>ç›®å‰ä¸»æµJavaè™šæ‹Ÿæœºä½¿ç”¨çš„éƒ½æ˜¯å‡†ç¡®å¼GCã€‚<br><br>GCåœé¡¿çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡OopMapæ•°æ®ç»“æ„ï¼ˆæ˜ å°„è¡¨ï¼‰çŸ¥é“ï¼Œåœ¨å¯¹è±¡å†…çš„ä»€ä¹ˆåç§»é‡ä¸Šæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè€Œä¸”ç‰¹å®šçš„ä½ç½®è®°å½•ç€æ ˆå’Œå¯„å­˜å™¨ä¸­å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ã€‚å› æ­¤å¯ä»¥å¿«é€Ÿä¸”å‡†ç¡®çš„å®ŒæˆGC Rootsæšä¸¾ã€‚</li><br></ul></li><br><li><p>å®‰å…¨ç‚¹</p><br><ul><br><li>ä¸ºäº†èŠ‚çœGCçš„ç©ºé—´æˆæœ¬ï¼Œå¹¶ä¸ä¼šä¸ºæ¯æ¡æŒ‡ä»¤éƒ½ç”ŸæˆOopMapï¼Œåªæ˜¯åœ¨â€œç‰¹å®šçš„ä½ç½®â€è®°å½•OopMapï¼Œè¿™äº›ä½ç½®ç§°ä¸ºå®‰å…¨ç‚¹ã€‚</li><br></ul></li><br></ul><br><p>ç¨‹åºæ‰§è¡Œåªæœ‰åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰èƒ½æš‚åœï¼Œåˆ°è¾¾å®‰å…¨ç‚¹æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚</p><br><ol><br><li>æŠ¢æ–­å¼ä¸­æ–­ï¼ˆå‡ ä¹ä¸ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰çº¿ç¨‹ä¸­æ–­ï¼Œå¦‚æœæœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤è¯¥çº¿ç¨‹ï¼Œè®©ä»–è·‘åˆ°å®‰å…¨ç‚¹ã€‚</li><br><li>ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆä¸»è¦ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°å®‰å…¨ç‚¹æ—¶è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘ç°æ ‡å¿—ä¸ºç›´åˆ™æŒ‚èµ·çº¿ç¨‹ã€‚</li><br></ol><br><p>ä½†æ˜¯å½“çº¿ç¨‹sleepæˆ–blockedæ—¶æ— æ³•å“åº”JVMçš„ä¸­æ–­è¯·æ±‚èµ°åˆ°å®‰å…¨ç‚¹ä¸­æ–­æŒ‚èµ·ï¼Œæ‰€ä»¥å¼•å‡ºå®‰å…¨åŒºåŸŸã€‚</p><br><ul><br><li><p>å®‰å…¨åŒºåŸŸ</p><br><ul><br><li>å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯æ‰©å±•çš„å®‰å…¨ç‚¹ã€‚</li><br></ul></li><br></ul><br><p>çº¿ç¨‹è¿›å…¥å®‰å…¨åŒºåŸŸæ—¶è¡¨ç¤ºè‡ªå·±è¿›å…¥äº†å®‰å…¨åŒºåŸŸï¼Œè¿™ä¸ªå‘ç”ŸGCæ—¶ï¼ŒJVMå°±ä¸éœ€è¦ç®¡è¿™ä¸ªçº¿ç¨‹ã€‚<br><br>çº¿ç¨‹ç¦»å¼€å®‰å…¨åŒºåŸŸæ—¶ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®ŒæˆGCè¿‡ç¨‹ï¼Œæ²¡æœ‰å°±ç­‰å¾…å¯ä»¥ç¦»å¼€å®‰å…¨åŒºåŸŸçš„ä¿¡å·ä¸ºæ­¢ï¼Œå¦è€…ç»§ç»­æ‰§è¡Œã€‚</p><br><h3 id="åƒåœ¾æ”¶é›†å™¨">åƒåœ¾æ”¶é›†å™¨</h3><br><ul><br><li><p>æ–°ç”Ÿä»£</p><br><ul><br><li><ol><br><li>serialæ”¶é›†å™¨</li><br></ol><br><ul><br><li>å®ƒæ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œåªä¼šä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†å·¥ä½œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä¼˜ç‚¹ï¼šå¯¹æ¯”å…¶ä»–å•çº¿ç¨‹æ”¶é›†å™¨ç®€å•é«˜æ•ˆï¼Œå¯¹äºå•ä¸ªCPUç¯å¢ƒæ¥è¯´ï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå› æ­¤æ‹¥æœ‰æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ã€‚</p><br><p>å®ƒæ˜¯Clientåœºæ™¯ä¸‹é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå› ä¸ºåœ¨è¯¥åœºæ™¯ä¸‹å†…å­˜ä¸€èˆ¬æ¥è¯´ä¸ä¼šå¾ˆå¤§ã€‚</p></li><li><ol start="2"><li>parnewæ”¶é›†å™¨</li></ol></li><li><p>å®ƒæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå…¬ç”¨äº†ç›¸å½“å¤šçš„ä»£ç ã€‚</p><p>åœ¨å•CPUç¯å¢ƒä¸­ç»å¯¹ä¸ä¼šæœ‰æ¯”Serialæ”¶é›†å™¨æ›´å¥½çš„æ•ˆæœï¼Œç”šè‡³åœ¨2ä¸ªCPUç¯å¢ƒä¸­ä¹Ÿä¸èƒ½ç™¾åˆ†ä¹‹ç™¾è¶…è¶Šã€‚</p><br><p>å®ƒæ˜¯Serveråœºæ™¯ä¸‹é»˜è®¤çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œä¸»è¦å› ä¸ºé™¤äº†Serialæ”¶é›†å™¨ï¼Œåªç”¨å®ƒèƒ½ä¸CMSæ”¶é›†å™¨é…åˆä½¿ç”¨ã€‚</p></li><li><ol start="3"><li>parallel scavengeæ”¶é›†å™¨</li></ol></li><li><p>â€œååä¼˜å…ˆâ€æ”¶é›†å™¨ï¼Œä¸ParNewæ”¶é›†å™¨å·®ä¸å¤šã€‚</p><p>ä½†æ˜¯å…¶ä»–æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹åœé¡¿çš„æ—¶é—´ï¼Œè€Œå®ƒçš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ã€‚è¿™é‡Œçš„ååé‡æŒ‡CPUç”¨äºè¿è¡Œç”¨æˆ·ç¨‹åºçš„æ—¶é—´å æ€»æ—¶é—´çš„æ¯”å€¼ã€‚</p><br><ul><br><li><p>è€å¹´ä»£</p><br><ul><br><li><ol><br><li>serial oldæ”¶é›†å™¨</li><br></ol><br><ul><br><li>æ˜¯Serialæ”¶é›†å™¨è€å¹´ä»£ç‰ˆæœ¬ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä¹Ÿæ˜¯ç»™Clientåœºæ™¯ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨çš„ã€‚</p></li><li><ol start="5"><li>parallel oldæ”¶é›†å™¨</li></ol></li><li><p>æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚</p><p>åœ¨æ³¨é‡ååé‡å·²ç»CPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘Parallel Scavengeå’ŒParallel Oldæ”¶é›†å™¨ã€‚</p></li><li><ol start="6"><li>cmsæ”¶é›†å™¨</li></ol></li><li><p>Concurrent Mark Sweepæ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚</p></li><li><p>è¿ä½œè¿‡ç¨‹</p><ul><li><ol><li>åˆå§‹æ ‡è®°ï¼ˆæœ€çŸ­ï¼‰ã€‚ä»éœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«<br><ol><br><li>å¹¶å‘æ ‡è®°ï¼ˆè€—æ—¶æœ€é•¿ï¼‰ã€‚è¿›è¡ŒGC Roots Tracingï¼ˆæ ¹æœç´¢ç®—æ³•ï¼‰çš„è¿‡ç¨‹ã€‚</li><br><li>é‡æ–°æ ‡è®°ã€‚ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚æ¯”åˆå§‹æ ‡è®°é•¿ä½†è¿œå°äºå¹¶å‘æ ‡è®°æ—¶é—´ã€‚</li><br><li>å¹¶å‘æ¸…é™¤</li><br></ol><p>1 å’Œ4 ä¸¤ä¸ªæ­¥éª¤å¹¶æ²¡æœ‰å¸¦ä¸Šå¹¶å‘ä¸¤ä¸ªå­—ï¼Œå³è¿™ä¸¤ä¸ªæ­¥éª¤ä»è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚</p></li></ol></li></ul></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚<br><ol><br><li>CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚è™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œä½†æ˜¯å ç”¨CPUèµ„æºä¼šä½¿åº”ç”¨ç¨‹åºå˜æ…¢ã€‚</li><br><li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ã€‚åœ¨å¹¶å‘æ¸…é™¤é˜¶æ®µæ–°åƒåœ¾è¿˜ä¼šä¸æ–­çš„äº§ç”Ÿï¼Œæ‰€ä»¥GCæ—¶è¦æ§åˆ¶â€œ-XX:CMSinitiatingOccupancyFractionå‚æ•°â€é¢„ç•™è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™è¿™äº›åƒåœ¾ï¼Œå½“é¢„ç•™å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦æ—¶å°±ä¼šå‡ºç°â€Concurrent Mode Failureâ€œå¤±è´¥ï¼Œä¸´æ—¶å¯åŠ¨Serial Oldæ”¶é›†ã€‚</li><br><li>ç”±äºä½¿ç”¨æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼Œæ”¶é›†ä¹‹åä¼šäº§ç”Ÿå¤§é‡ç©ºé—´ç¢ç‰‡ã€‚</li><br></ol><br><ul><br><li><ol><br><li>g1æ”¶é›†å™¨</li><br></ol><br><ul><br><li>Garbage Firstæ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨</li><br><li><p>è¿ä½œè¿‡ç¨‹</p><br><ul><br><li><ol><br><li>åˆå§‹æ ‡è®°</li><br></ol></li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>å¹¶å‘æ ‡è®°</li><br><li>æœ€ç»ˆæ ‡è®°</li><br><li>åˆ é€‰æ ‡è®°</li><br></ol><br><h2 id="äº”ç±»åŠ è½½æœºåˆ¶">äº”ã€ç±»åŠ è½½æœºåˆ¶</h2><br><h3 id="æ¦‚è¿°-1">æ¦‚è¿°</h3><br><ul><br><li>è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»Classé—®ä»·åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ã€‚<br><br>Javaåº”ç”¨ç¨‹åºçš„é«˜åº¦çµæ´»æ€§å°±æ˜¯ä¾èµ–è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿æ¥å®ç°çš„ã€‚</li><br></ul><br><h3 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ">ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h3><br><ul><br><li>åŠ è½½ -&gt; è¿æ¥ï¼ˆéªŒè¯ -&gt; å‡†å¤‡ -&gt; è§£æï¼‰ -&gt; åˆå§‹åŒ– -&gt; ä½¿ç”¨ - &gt;å¸è½½</li><br></ul><br><h3 id="ç±»åˆå§‹åŒ–æ—¶æœº">ç±»åˆå§‹åŒ–æ—¶æœº</h3><br><ul><br><li><p>ä¸»åŠ¨å¼•ç”¨</p><br><ul><br><li>è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰å¼ºåˆ¶çº¦æŸä½•æ—¶è¿›è¡ŒåŠ è½½ï¼Œä½†æ˜¯è§„å®šäº†æœ‰ä¸”åªæœ‰äº”ç§æƒ…å†µå¿…é¡»å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ˆåŠ è½½ã€éªŒè¯ã€å‡†å¤‡éƒ½ä¼šéšä¹‹å‘ç”Ÿï¼‰</li><br></ul></li><br></ul><br><ol><br><li>é‡åˆ°newã€getstaticã€putstaticã€invokestaticè¿™å››æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚</li><br><li>åå°„è°ƒç”¨æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚</li><br><li>å‘ç°å…¶çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–åˆ™å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚</li><br><li>åŒ…å«psvmï¼ˆmianï¼ˆï¼‰æ–¹æ³•ï¼‰çš„é‚£ä¸ªç±»ã€‚</li><br><li>åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼ŒREF_getStaticã€REF_putStaticã€REF_invokeStaticçš„æ–¹æ³•å¥æŸ„ã€‚</li><br></ol><br><ul><br><li><p>è¢«åŠ¨å¼•ç”¨</p><br><ul><br><li>é™¤ä¸Šé¢äº”ç§æƒ…å†µä¹‹å¤–ï¼Œæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚</li><br></ul></li><br></ul><br><ol><br><li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»çš„åˆå§‹åŒ–ã€‚</li><br><li>é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ã€‚è¯¥è¿‡ç¨‹ä¼šå¯¹æ•°ç»„ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œæ•°ç»„ç±»æ˜¯ä¸€ä¸ªç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿæˆçš„ã€ç›´æ¥ç»§æ‰¿Objectçš„å­ç±»ï¼Œå…¶ä¸­åŒ…å«æ•°ç»„çš„å±æ€§å’Œæ–¹æ³•ï¼Œç”¨æˆ·åªèƒ½ä½¿ç”¨publicçš„lengthå’Œclone()ã€‚</li><br><li>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–ã€‚</li><br></ol><br><h3 id="ç±»åŠ è½½è¿‡ç¨‹">ç±»åŠ è½½è¿‡ç¨‹</h3><br><ul><br><li><ol><br><li>åŠ è½½</li><br></ol><br><ul><br><li><ol><br><li>é€šè¿‡ç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</li><br></ol></li><br></ul></li><br></ul><br><ol><br><li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li><br><li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼ˆHotSpotå°†å…¶å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼‰ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li><br></ol><br><ul><br><li><ol><br><li>éªŒè¯</li><br></ol><br><ul><br><li>ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚ç±»ä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚å¯ä»¥é€šè¿‡-Xverify:noneå…³é—­å¤§éƒ¨åˆ†ç±»éªŒè¯ã€‚</li><br></ul></li><br></ul><br><ol><br><li>æ–‡ä»¶æ ¼å¼éªŒè¯ã€‚ç¡®ä¿è¾“å…¥å­—èŠ‚æµèƒ½æ­£ç¡®çš„è§£æå¹¶å­˜å‚¨äºæ–¹æ³•åŒºï¼Œåé¢çš„3ä¸ªéªŒè¯å…¨éƒ¨åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œï¼Œä¸ä¼šå†æ“ä½œå­—èŠ‚æµã€‚</li><br><li>å…ƒæ•°æ®éªŒè¯ã€‚å¯¹å­—èŠ‚ç æè¿°ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œç¡®ä¿å…¶ç¬¦åˆJavaè¯­æ³•è§„èŒƒã€‚ï¼ˆJavaè¯­æ³•éªŒè¯ï¼‰</li><br><li>å­—èŠ‚ç éªŒè¯ã€‚æœ€å¤æ‚ï¼Œé€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ—¶åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚å¯ä»¥é€šè¿‡å‚æ•°å…³é—­ã€‚ï¼ˆéªŒè¯æŒ‡ä»¤è·³è½¬èŒƒå›´ï¼Œç±»å‹è½¬æ¢æœ‰æ•ˆç­‰ï¼‰</li><br><li>ç¬¦å·å¼•ç”¨éªŒè¯ã€‚å°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œå‘ç”Ÿåœ¨ç¬¬ä¸‰ä¸ªé˜¶æ®µâ€”â€”è§£æé˜¶æ®µä¸­å‘ç”Ÿã€‚</li><br></ol><br><ul><br><li><ol><br><li>å‡†å¤‡</li><br></ol><br><ul><br><li>ç±»å˜é‡æ˜¯è¢«staticä¿®é¥°çš„å˜é‡ï¼Œå‡†å¤‡é˜¶æ®µä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®é›¶å€¼ï¼ˆfinalç›´æ¥è®¾ç½®åˆå§‹å€¼ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯æ–¹æ³•åŒºçš„å†…å­˜ã€‚</li><br></ul></li><br><li><ol><br><li>è§£æ</li><br></ol><br><ul><br><li>å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚<br><br>å…¶ä¸­è§£æè¿‡ç¨‹åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åå†å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒJavaçš„åŠ¨æ€ç»‘å®šã€‚<br><br>è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„ã€å’Œè°ƒç”¨ç‚¹é™å®šç¬¦ã€‚</li><br></ul></li><br><li><ol><br><li>åˆå§‹åŒ–</li><br></ol><br><ul><br><li><p>åˆå§‹åŒ–é˜¶æ®µæ‰çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ï¼Œæ˜¯æ‰§è¡Œç±»æ„é€ å™¨<clinit>()æ–¹æ³•çš„è¿‡ç¨‹ã€‚<br><br>åœ¨å‡†å¤‡é˜¶æ®µï¼Œç±»å˜é‡å·²ç»ç»™è¿‡é›¶å€¼ï¼Œè€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œæ ¹æ®ç¨‹åºå‘˜é€šè¿‡ç¨‹åºåˆ¶å®šçš„ä¸»è§‚è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºã€‚</clinit></p><br><ul><br><li><p><clinit>()</clinit></p><br><ul><br><li>ç±»æ„é€ å™¨æ–¹æ³•ã€‚æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ä¸­çš„çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚</li><br></ul></li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>ä¸éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼ŒJVMä¼šä¿è¯åœ¨å­ç±»clinitæ‰§è¡Œä¹‹å‰ï¼Œçˆ¶ç±»çš„clinitå·²ç»æ‰§è¡Œå®Œæˆã€‚</li><br><li>æ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æ¥å£çš„c</li></ol></li></ul></li></ul></li></ul><p><li>æ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æ¥å£çš„clinitä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æ¥å£çš„clinitæ–¹æ³•ã€‚æ¥å£çš„å®ç°ç±»ä¹Ÿä¸ä¼šæ‰§è¡Œæ¥å£çš„clinitæ–¹æ³•ã€‚</li></p><p><li><p>è™šæ‹Ÿæœºä¼šä¿è¯clinitåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ã€‚å…¶ä»–çº¿æ€§å”¤é†’ä¹‹åä¸ä¼šå†è¿›å…¥clinitæ–¹æ³•ï¼ŒåŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»å‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚</p></li></p><ul><li><p>&lt;init&gt;()</p><ul><li>å¯¹è±¡æ„é€ å™¨æ–¹æ³•ã€‚Javaå¯¹è±¡è¢«åˆ›å»ºæ—¶æ‰ä¼šè¿›è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œå¯¹éé™æ€å˜é‡è§£æåˆå§‹åŒ–ã€‚</li><br><li><p>ä¼šæ˜¾å¼çš„è°ƒç”¨çˆ¶ç±»çš„initæ–¹æ³•ï¼Œå¯¹è±¡å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å¯¹å®ä¾‹åŸŸçš„åˆå§‹åŒ–æ“ä½œå…¨éƒ¨åœ¨initæ–¹æ³•ä¸­è¿›è¡Œã€‚</p></li><br><br><h3 id="ç±»åŠ è½½-å™¨">ç±»ï¼ˆåŠ è½½ï¼‰ å™¨</h3><ul><br><li><p>ç±»ä¸ç±»åŠ è½½å™¨</p><br><ul><br><li>ç±»åŠ è½½å™¨å®ç°ç±»çš„åŠ è½½åŠ¨ä½œã€‚<br><br>ç±»åŠ è½½å™¨å’Œè¿™ä¸ªç±»æœ¬èº«ä¸€åŒç¡®ç«‹è¿™ä¸ªç±»çš„å”¯ä¸€æ€§ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰ç‹¬ç«‹çš„ç±»å‘½åç©ºé—´ã€‚åœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ä¸¤ä¸ªç±»ç›¸ç­‰ã€‚<br><br>ç›¸ç­‰åŒ…æ‹¬ç±»çš„Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()ã€instanceofå…³é”®å­—ã€‚</li><br></ul></li><br><li><p>ç±»åŠ è½½å™¨åˆ†ç±»</p><br><ul><br><li><p>å¯åŠ¨ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±C++è¯­è¨€å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ã€‚è´Ÿè´£å°†JAVA_HOME/libç›®å½•ä¸­ï¼Œæˆ–è€…è¢«-Xbootclasspathå‚æ•°æŒ‡å®šçš„è·¯å¾„ï¼Œä½†æ˜¯æ–‡ä»¶åè¦èƒ½è¢«è™šæ‹Ÿæœºè¯†åˆ«ï¼Œåå­—ä¸ç¬¦åˆæ— æ³•è¢«å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ã€‚å¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢«Javaç¨‹åºç›´æ¥å¼•ç”¨ã€‚</li><br></ul></li><br><li><p>æ‰©å±•ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±Javaè¯­è¨€å®ç°ï¼Œè´Ÿè´£åŠ è½½JAVA_HOME/lib/extç›®å½•ï¼Œæˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ‰€æœ‰ç±»åº“ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ã€‚</li><br></ul></li><br><li><p>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±äºè¿™ä¸ªç±»åŠ è½½å™¨æ˜¯ClassLoaderä¸­çš„getSystemClassLoader()æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿç§°ä»–ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ï¼ˆClassPathï¼‰ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</li><br></ul></li><br><li><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±ç”¨æˆ·è‡ªå·±å®ç°ã€‚</li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>å¦‚æœä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆåªéœ€è¦é‡å†™findClassæ–¹æ³•å³å¯ã€‚</li><br><li>å¦åˆ™å°±é‡å†™æ•´ä¸ªloadClassæ–¹æ³•ã€‚</li><br></ol><br><ul><br><li><p>åŒäº²å§”æ´¾æ¨¡å‹</p><br><ul><br><li>åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”è¯¥æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚çˆ¶å­ä¸ä¼šä»¥ç»§æ‰¿çš„å…³ç³»ç±»å®ç°ï¼Œè€Œæ˜¯éƒ½æ˜¯ä½¿ç”¨ç»„åˆå…³ç³»æ¥æœç”¨çˆ¶åŠ è½½å™¨çš„ä»£ç ã€‚<br><br>åœ¨java.lang.ClassLoaderçš„loadClass()æ–¹æ³•ä¸­å®ç°ã€‚</li><br><li><p>å·¥ä½œè¿‡ç¨‹</p><br><ul><br><li>ä¸€ä¸ªç±»åŠ è½½å™¨é¦–å…ˆå°†ç±»åŠ è½½è¯·æ±‚è½¬å‘åˆ°çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦çš„ç±»ï¼‰æ—¶æ‰å°è¯•è‡ªå·±åŠ è½½</li><br></ul></li><br><li><p>å¥½å¤„</p><br><ul><br><li>Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œä»è€Œä½¿å¾—åŸºç¡€ç±»åº“å¾—åˆ°åŒæ„ã€‚</li><br></ul></li><br></ul></li><br></ul><br><h2 id="å››å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥">å››ã€å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</h2><br><h3 id="minor-gc-å’Œ-full-gc">Minor GC å’Œ Full GC</h3><br><ul><br><li><p>Minor GC</p><br><ul><br><li>å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†åŠ¨ä½œï¼Œå› ä¸ºæ–°ç”Ÿä»£å¯¹è±¡å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œå› æ­¤Minor GCä¼šé¢‘ç¹æ‰§è¡Œï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ã€‚</li><br><li><p>æ—¶æœº</p><br><ul><br><li>Edenä¸è¶³</li><br></ul></li><br></ul></li><br><li><p>Full GC</p><br><ul><br><li>å‘ç”Ÿåœ¨è€å¹´åŒºçš„GCï¼Œå‡ºç°Full GCæ—¶å¾€å¾€ä¼´éšç€Minor GCï¼Œæ¯”Minor GCæ…¢10å€ä»¥ä¸Šã€‚</li><br><li><p>æ—¶æœº</p><br><ul><br><li><ol><br><li>è°ƒç”¨System.gc()</li><br></ol><br><ul><br><li>åªæ˜¯å»ºè®®è™šæ‹Ÿæœºæ‰§è¡ŒFull GCï¼Œä½†æ˜¯è™šæ‹Ÿæœºä¸ä¸€å®šçœŸæ­£å»æ‰§è¡Œã€‚<br><br>ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯è®©è™šæ‹Ÿæœºç®¡ç†å†…å­˜ã€‚</li><br></ul></li><br><li><ol><br><li>è€å¹´ä»£ç©ºé—´ä¸è¶³</li><br></ol><br><ul><br><li>å¸¸è§åœºæ™¯å°±æ˜¯å¤§å¯¹è±¡å’Œé•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£ã€‚<br><br>å°½é‡é¿å…åˆ›å»ºè¿‡å¤§çš„å¯¹è±¡ä»¥åŠæ•°ç»„ï¼Œè°ƒå¤§æ–°ç”Ÿä»£å¤§å°ï¼Œè®©å¯¹è±¡å°½é‡å’‹æ–°ç”Ÿä»£ä¸­è¢«å›æ”¶ï¼Œä¸è¿›å…¥è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>JDK1.7 ä¹‹å‰æ–¹æ³•åŒºç©ºé—´ä¸è¶³</li><br></ol><br><ul><br><li>å½“ç³»ç»Ÿä¸­è¦åŠ è½½çš„ç±»ã€åå°„çš„ç±»å’Œå¸¸é‡è¾ƒå¤šæ—¶ï¼Œæ°¸ä¹…ä»£å¯èƒ½ä¼šè¢«å æ»¡ï¼Œåœ¨æœªé…ç½®CMS GCçš„æƒ…å†µä¸‹ä¹Ÿä¼šæ‰§è¡ŒFull GCï¼Œå¦‚æœç©ºé—´ä»ç„¶ä¸å¤Ÿåˆ™ä¼šæŠ›å‡ºOOMå¼‚å¸¸ã€‚<br><br>å¯é‡‡ç”¨å¢å¤§æ–¹æ³•åŒºç©ºé—´æˆ–è½¬ä¸ºä½¿ç”¨CMS GCã€‚</li><br></ul></li><br><li><ol><br><li>ç©ºé—´åˆ†é…æ‹…ä¿å¤±è´¥</li><br></ol><br><ul><br><li>å‘ç”ŸMinor GCæ—¶åˆ†é…æ‹…ä¿çš„ä¸¤ä¸ªåˆ¤æ–­å¤±è´¥</li><br></ul></li><br><li><ol><br><li>Concurrent Mode Failure</li><br></ol><br><ul><br><li>CMS GC å¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œä¸æ–­æœ‰æ–°çš„æµ®åŠ¨åƒåœ¾äº§ç”Ÿï¼Œå½“é¢„ç•™ç©ºé—´ä¸è¶³æ—¶æŠ¥Concurrent Mode Failureé”™è¯¯å¹¶è§¦å‘Full GCã€‚</li><br></ul></li><br></ul></li><br></ul></li><br></ul><br><h3 id="å†…å­˜åˆ†é…ç­–ç•¥">å†…å­˜åˆ†é…ç­–ç•¥</h3><br><ul><br><li><ol><br><li>å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…</li><br></ol><br><ul><br><li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£Edenä¸Šåˆ†é…ï¼Œå½“Edenç©ºé—´ä¸å¤Ÿæ—¶ï¼Œå‘èµ·Minor GCï¼Œå½“å¦å¤–ä¸€ä¸ªSurvivorç©ºé—´ä¸è¶³æ—¶åˆ™å°†å­˜æ´»å¯¹è±¡é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li><br></ol><br><ul><br><li>é…ç½®å‚æ•°-XX:PretenureSizeThresholdï¼Œå¤§äºæ­¤å€¼å¾—å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ï¼Œé¿å…åœ¨Edenå’ŒSurvivorä¹‹é—´çš„å¤§é‡å†…å­˜å¤åˆ¶ã€‚</li><br></ul></li><br><li><ol><br><li>é•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£</li><br></ol><br><ul><br><li>è™šæ‹Ÿæœºä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªAgeè®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨Edenå‡ºç”Ÿå¹¶ç»è¿‡Minor GCå­˜æ´»è½¬ç§»åˆ°å¦ä¸€ä¸ªSurvivorç©ºé—´ä¸­æ—¶Age++ï¼Œå¢åŠ åˆ°é»˜è®¤16åˆ™è½¬ç§»åˆ°è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>åŠ¨æ€å¯¹è±¡å¹´é¾„ç»‘å®š</li><br></ol><br><ul><br><li>è™šæ‹Ÿæœºå¹¶ä¸æ˜¯æ°¸è¿œè¦æ±‚å¯¹è±¡çš„å¹´é¾„å¿…é¡»åˆ°è¾¾MaxTenuringThresholdæ‰èƒ½æ™‹å‡è€å¹´ä»£ï¼Œå¦‚æœåœ¨Survivorä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œåˆ™å¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>ç©ºé—´åˆ†é…æ‹…ä¿</li><br></ol><br><ul><br><li>åœ¨å‘ç”ŸMinor GCä¹‹å‰ï¼Œè™šæ‹Ÿæœºå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆMinor GCå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚<br><br>å¯ä»¥é€šè¿‡HandlePromotionFailureå‚æ•°è®¾ç½®å…è®¸å†’é™©ï¼Œæ­¤æ—¶è™šæ‹Ÿæœºå°†ä¸å†ä»£æ™‹å‡åˆ°è€å¹´åŒºå¯¹è±¡çš„å¹³å‡å¤§å°æ¯”è¾ƒï¼Œä»å°äºåˆ™è¦è¿›è¡Œä¸€æ¬¡Full GCã€‚<br><br>åœ¨JDK1.6.24ä¹‹åHandlePromotionFailureå·²æ— ä½œç”¨ï¼Œå³è™šæ‹Ÿæœºé»˜è®¤ä¸ºtrueã€‚</li><br></ul></li><br></ul></ul></li></ul>]]></content>
    
    <summary type="html">
    
      JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡
    
    </summary>
    
    
      <category term="JVM" scheme="http://yoursite.com/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Everything about ArrayList</title>
    <link href="http://yoursite.com/2020/02/08/Everything-about-ArrayList/"/>
    <id>http://yoursite.com/2020/02/08/Everything-about-ArrayList/</id>
    <published>2020-02-07T16:53:26.000Z</published>
    <updated>2020-03-21T06:09:41.532Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8"><a href="#Java-ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8" class="headerlink" title="Java ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8"></a>Java ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8</h1><p><li>ArrayListæ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå…¶å®¹é‡èƒ½è‡ªåŠ¨å¢é•¿ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„åŠ¨æ€ç”³è¯·å†…å­˜ï¼ŒåŠ¨æ€å¢é•¿å†…å­˜ã€‚</li></p><p><li><strong>ArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ï¼Œåªèƒ½ç”¨åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯ä»¥è€ƒè™‘ç”¨Collections.synchronizedList(List l)å‡½æ•°è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayListç±»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨concurrentå¹¶å‘åŒ…ä¸‹çš„CopyOnWriteArrayListç±»ã€‚</li></p><p><li>ArrayListå®ç°äº†Serializableæ¥å£ï¼Œå› æ­¤å®ƒæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½å¤Ÿé€šè¿‡åºåˆ—åŒ–ä¼ è¾“ï¼Œå®ç°äº†RandomAccessæ¥å£ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡ä¸‹æ ‡åºå·è¿›è¡Œå¿«é€Ÿè®¿é—®ï¼Œå®ç°äº†Cloneableæ¥å£ï¼Œèƒ½è¢«å…‹éš†ã€‚</li><br></p><h4 id="å­˜å‚¨ç»“æ„">å­˜å‚¨ç»“æ„</h4><br><pre class="java"><code>// å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸åºåˆ—åŒ–<br>// è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ–<br>transient Object[] elementData;</code></pre><br><ul><br><li><p>Objectç±»å‹æ•°ç»„ã€‚</p><br><h4 id="æ•°æ®åŸŸ">æ•°æ®åŸŸ</h4></li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åºåˆ—åŒ–ID</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">8683452581122892189L</span>;</span><br><span class="line">  <span class="comment">// é»˜è®¤åˆå§‹å®¹é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</span><br><span class="line">  <span class="comment">// ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºå¸¦å‚æ„é€ å‡½æ•°åˆå§‹åŒ–å’Œè¯»å–åºåˆ—åŒ–å¯¹è±¡ç­‰ã€‚</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å’Œå®˜æ–¹æ–‡æ¡£å†™çš„ä¸€æ ·ï¼ŒDEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«</span></span><br><span class="line"><span class="comment">   * ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">   * å½“ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œæ•°ç»„å®¹é‡growåˆ°1ã€‚</span></span><br><span class="line"><span class="comment">   * å½“ç”¨æˆ·ä½¿ç”¨é»˜è®¤æ„é€ æ—¶ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œå®¹é‡ç›´æ¥growåˆ°DEFAULT_CAPACITYï¼ˆ10ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸åºåˆ—åŒ–</span></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ–</span></span><br><span class="line">  <span class="keyword">transient</span> Object[] elementData; <span class="comment">// non-private to simplify nested class access</span></span><br><span class="line">  <span class="comment">// å½“å‰æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">  <span class="comment">// æ•°ç»„æœ€å¤§å¯åˆ†é…å®¹é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line">  <span class="comment">// é›†åˆæ•°ç»„ä¿®æ”¹æ¬¡æ•°çš„æ ‡è¯†ï¼ˆç”±AbstractListç»§æ‰¿ä¸‹æ¥ï¼‰ï¼ˆfail-fastæœºåˆ¶ï¼‰</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">transient</span> <span class="keyword">int</span> modCount = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>ArrayListçš„æ— å‚æ„é€ å‡½æ•°ã€‚<strong>åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£çš„åˆ›å»º10ä¸ªç©ºé—´ï¼Œè¿™æ˜¯æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</strong></li><br><li>DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</li><br><li>modCountç”¨æ¥è®°å½•ArrayListç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ã€‚ç”¨äº<a href="#q1">Fail-Fastæœºåˆ¶</a></li><br></ul><br><br><h4 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">// åªæœ‰è¿™ä¸ªåœ°æ–¹ä¼šå¼•ç”¨DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span></span><br><span class="line">     <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (initialCapacity &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">// ä½¿ç”¨ EMPTY_ELEMENTDATAï¼Œåœ¨å…¶ä»–çš„å¤šä¸ªåœ°æ–¹å¯èƒ½ä¼šå¼•ç”¨EMPTY_ELEMENTDATA</span></span><br><span class="line">         <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal Capacity: &amp;quot;+</span><br><span class="line">                                            initialCapacity);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&amp;lt;? extends E&amp;gt; c)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// æŠŠä¼ å…¥é›†åˆä¼ åŒ–æˆ[]æ•°ç»„å¹¶æµ…æ‹·è´ç»™elementData</span></span><br><span class="line">     elementData = c.toArray();</span><br><span class="line">     <span class="comment">// è½¬åŒ–åçš„æ•°ç»„é•¿åº¦èµ‹ç»™å½“å‰ArrayListçš„size,å¹¶åˆ¤æ–­æ˜¯å¦ä¸º0</span></span><br><span class="line">     <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">//c.toArrayå¯èƒ½ä¸ä¼šè¿”å› Object[]ï¼Œå¯ä»¥æŸ¥çœ‹ java å®˜æ–¹ç¼–å·ä¸º 6260652 çš„ bug</span></span><br><span class="line">         <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">             <span class="comment">// è‹¥ c.toArray() è¿”å›çš„æ•°ç»„ç±»å‹ä¸æ˜¯ Object[]ï¼Œåˆ™åˆ©ç”¨ Arrays.copyOf(); æ¥æ„é€ ä¸€ä¸ªå¤§å°ä¸º size çš„ Object[] æ•°ç»„</span></span><br><span class="line">             <span class="comment">// æ­¤æ—¶elementDataæ˜¯æŒ‡å‘ä¼ å…¥é›†åˆçš„å†…å­˜ï¼Œè¿˜éœ€è¦åˆ›å»ºæ–°çš„å†…å­˜åŒºåŸŸæ·±æ‹·è´ç»™elementData</span></span><br><span class="line">             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">// ä¼ å…¥æ•°ç»„sizeä¸ºé›¶æ›¿æ¢ç©ºæ•°ç»„</span></span><br><span class="line">         <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ul><br><li>DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</li><br><li>æ³¨æ„<strong>æ·±æ‹·è´å’Œæµ…æ‹·è´</strong>ã€‚</li><br><li><p>å¸¦å‚ä¸º0çš„æ„é€ ä¼šæƒ°æ€§åˆå§‹åŒ–ï¼Œä¸ä¸º0çš„æ„é€ åˆ™ä¸ä¼šæƒ°æ€§åˆå§‹åŒ–ã€‚</p><br><h4 id="addæºç è§£æ">add()æºç è§£æ</h4></li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">        <span class="comment">// æ•°ç»„çš„ä¸‹ä¸€ä¸ªindexå­˜æ”¾ä¼ å…¥å…ƒç´ ã€‚</span></span><br><span class="line">        elementData[size++] = e;</span><br><span class="line">        <span class="comment">// å§‹ç»ˆè¿”å›trueã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå°±æ˜¯DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’Œ</span></span><br><span class="line">        <span class="comment">// EMPTY_ELEMENTDATA æœ€ä¸»è¦çš„åŒºåˆ«ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            <span class="comment">// é»˜è®¤æ„é€ ç¬¬ä¸€æ¬¡addè¿”å›10ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¸¦å‚ä¸º0æ„é€ ç¬¬ä¸€æ¬¡addè¿”å› 1 ï¼ˆ0 + 1ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è‡ªå¢ä¿®æ”¹è®¡æ•°</span></span><br><span class="line">        modCount++;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="comment">// å½“å‰æ•°ç»„å®¹é‡å°äºéœ€è¦çš„æœ€å°å®¹é‡</span></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &amp;gt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// å‡†å¤‡æ‰©å®¹æ•°ç»„</span></span><br><span class="line">            grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="comment">// è·å¾—å½“å‰æ•°ç»„å®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">        <span class="comment">// æ–°æ•°ç»„å®¹é‡ä¸º1.5å€çš„æ—§æ•°ç»„å®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &amp;gt;&amp;gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &amp;lt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// è‹¥ newCapacity ä¾æ—§å°äº minCapacity</span></span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯éœ€è¦çš„å®¹é‡æ˜¯å¦è¶…è¿‡æœ€å¤§çš„æ•°ç»„å®¹é‡ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &amp;gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">        <span class="comment">// åœ¨Arrays.copyOf()ä¸­ä¼šå°†åŸæ•°ç»„æ•´ä¸ªèµ‹å€¼åˆ°æ‰©å®¹çš„æ•°ç»„ä¸­ã€‚</span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨Arrays.copyOf()æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»ºArrayListå¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚</li><br></ul><br><h4 id="addint-index-e-elementæºç åˆ†æ">add(int index, E element)æºç åˆ†æ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œç”±Cè¯­è¨€å®ç°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">arraycopy</span><span class="params">(Object src,  // æºæ•°ç»„</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span>  srcPos, // æºæ•°ç»„è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®</span></span></span><br><span class="line"><span class="function"><span class="params">                                    Object dest, // ç›®æ ‡æ•°ç»„ï¼ˆå°†åŸæ•°ç»„å¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„ï¼‰</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span> destPos, // ç›®æ ‡æ•°ç»„èµ·å§‹ä½ç½®ï¼ˆä»ç›®æ ‡æ•°ç»„çš„å“ªä¸ªä¸‹æ ‡å¼€å§‹å¤åˆ¶æ“ä½œï¼‰</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span> length   // å¤åˆ¶æºæ•°ç»„çš„é•¿åº¦</span></span></span><br><span class="line"><span class="function"><span class="params">                                    )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ç´¢å¼•æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">        rangeCheckForAdd(index);</span><br><span class="line">        <span class="comment">// ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">        <span class="comment">// è¿è¡Œåˆ°è¿™é‡Œä»£è¡¨æ•°ç»„å®¹é‡æ»¡è¶³ã€‚</span></span><br><span class="line">        <span class="comment">// æ•°ç»„ä»ä¼ å…¥å½¢å‚indexå¤„å¼€å§‹å¤åˆ¶ï¼Œå¤åˆ¶size-indexä¸ªå…ƒç´ ï¼ˆå³åŒ…æ‹¬indexåœ¨å†…åé¢çš„å…ƒç´ å…¨éƒ¨å¤åˆ¶ï¼‰ï¼Œ</span></span><br><span class="line">        <span class="comment">// ä»æ•°ç»„çš„index + 1å¤„å¼€å§‹ç²˜è´´ã€‚</span></span><br><span class="line">        <span class="comment">// è¿™æ—¶ï¼Œindex å’Œ index + 1å¤„å…ƒç´ æ•°å€¼ç›¸åŒã€‚</span></span><br><span class="line">        System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                         size - index);</span><br><span class="line">        <span class="comment">// æŠŠindexå¤„çš„å…ƒç´ æ›¿æ¢æˆæ–°çš„å…ƒç´ ã€‚</span></span><br><span class="line">        elementData[index] = element;</span><br><span class="line">        <span class="comment">// æ•°ç»„å†…å…ƒç´ é•¿åº¦åŠ ä¸€ã€‚</span></span><br><span class="line">        size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬indexåœ¨å†…åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°index + 1ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢åŠ å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</li><br></ul><br><h4 id="removeint-indexæºç åˆ†æ">remove(int index)æºç åˆ†æ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥index</span></span><br><span class="line">        rangeCheck(index);</span><br><span class="line"></span><br><span class="line">        modCount++;</span><br><span class="line">        E oldValue = elementData(index);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (numMoved &amp;gt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// å’Œ add(int index, E element)åŸç†æƒ³é€šã€‚</span></span><br><span class="line">            System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">        <span class="comment">// å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</span></span><br><span class="line">        elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">        <span class="comment">// è¿”å›æ—§å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬index + 1åœ¨å†…åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°indexä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢åŠ å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</li><br></ul><br><h4 id="q1">Fail-Fastæœºåˆ¶</h4><br><p>fail-fast æœºåˆ¶ï¼Œå³å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼Œæ˜¯javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“åœ¨è¿­ä»£é›†åˆçš„è¿‡ç¨‹ä¸­è¯¥é›†åˆåœ¨ç»“æ„ä¸Šå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½ä¼šå‘ç”Ÿfail-fastï¼Œå³æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚fail-fastæœºåˆ¶å¹¶ä¸ä¿è¯åœ¨ä¸åŒæ­¥çš„ä¿®æ”¹ä¸‹ä¸€å®šä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒåªæ˜¯å°½æœ€å¤§åŠªåŠ›å»æŠ›å‡ºï¼Œæ‰€ä»¥è¿™ç§æœºåˆ¶ä¸€èˆ¬ä»…ç”¨äºæ£€æµ‹bugã€‚</p><br><ul><br><li>ç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚</li><br><li>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰åmodCountæ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦è·‘å‡ºConcurrentModificationException</li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&amp;<span class="title">lt</span></span>;E&amp;gt; &#123;</span><br><span class="line">        <span class="keyword">int</span> cursor;</span><br><span class="line">        <span class="keyword">int</span> lastRet = -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// æœŸå¾…çš„ä¿®æ”¹å€¼ç­‰äºå½“å‰ä¿®æ”¹æ¬¡æ•°ï¼ˆmodCountï¼‰</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥ expectedModCountæ˜¯å¦ç­‰äºmodCountï¼Œä¸ç›¸åŒåˆ™æŠ›å‡ºConcurrentModificationException</span></span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="comment">/** çœç•¥æ­¤å¤„ä»£ç  */</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.lastRet &amp;lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="comment">/** çœç•¥æ­¤å¤„ä»£ç  */</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (ArrayList.<span class="keyword">this</span>.modCount == <span class="keyword">this</span>.expectedModCount)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><p>ä¸€ä¸ªå•çº¿ç¨‹ç¯å¢ƒä¸‹çš„fail-fastçš„ä¾‹å­</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       List&amp;lt;String&amp;gt; list = <span class="keyword">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &amp;lt; <span class="number">10</span> ; i++ ) &#123;</span><br><span class="line">            list.add(i + &amp;quot;&amp;quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       Iterator&amp;lt;String&amp;gt; iterator = list.iterator();</span><br><span class="line">       <span class="keyword">int</span> i = <span class="number">0</span> ;</span><br><span class="line">       <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">                 list.remove(<span class="number">3</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">            i ++;</span><br><span class="line">       &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><br><br><h4 id="åºåˆ—åŒ–">åºåˆ—åŒ–</h4><br><p>ArrayList å®ç°äº† java.io.Serializable æ¥å£ï¼Œä½†æ˜¯è‡ªå·±å®šä¹‰äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å› ä¸ºArrayListåŸºäºæ•°ç»„å®ç°ï¼Œå¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰<strong>å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–</strong>ã€‚å› æ­¤ elementData æ•°ç»„ä½¿ç”¨ transient ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢è¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚</p><br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">        <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">        <span class="comment">// å°†å½“å‰ç±»çš„éé™æ€(non-static)å’Œéç¬æ€(non-transient)å­—æ®µå†™å…¥æµ</span></span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œä¹Ÿä¼šå°†sizeå­—æ®µå†™å…¥ã€‚</span></span><br><span class="line">        s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">        <span class="comment">// åºåˆ—åŒ–æ•°ç»„åŒ…å«å…ƒç´ æ•°é‡ï¼Œä¸ºäº†å‘åå…¼å®¹</span></span><br><span class="line">        <span class="comment">// ä¸¤æ¬¡å°†sizeå†™å…¥æµ</span></span><br><span class="line">        s.writeInt(size);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">        <span class="comment">// æŒ‰ç…§é¡ºåºå†™å…¥ï¼Œåªå†™å…¥åˆ°æ•°ç»„åŒ…å«å…ƒç´ çš„ç»“å°¾ï¼Œå¹¶ä¸ä¼šæŠŠæ•°ç»„çš„æ‰€æœ‰å®¹é‡åŒºåŸŸå…¨éƒ¨å†™å…¥</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&amp;lt;size; i++) &#123;</span><br><span class="line">            s.writeObject(elementData[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦è§¦å‘Fast-Fail</span></span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®æ•°ç»„å¼•ç”¨ç©ºæ•°ç»„ã€‚</span></span><br><span class="line">        elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">        <span class="comment">// å°†æµä¸­çš„çš„éé™æ€(non-static)å’Œéç¬æ€(non-transient)å­—æ®µè¯»å–åˆ°å½“å‰ç±»</span></span><br><span class="line">        <span class="comment">// åŒ…å« size</span></span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in capacity</span></span><br><span class="line">        <span class="comment">// è¯»å…¥å…ƒç´ ä¸ªæ•°ï¼Œæ²¡ä»€ä¹ˆç”¨ï¼Œåªæ˜¯å› ä¸ºå†™å‡ºçš„æ—¶å€™å†™äº†sizeå±æ€§ï¼Œè¯»çš„æ—¶å€™ä¹Ÿè¦æŒ‰é¡ºåºæ¥è¯»</span></span><br><span class="line">        s.readInt(); <span class="comment">// ignored</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (size &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">            <span class="comment">// æ ¹æ®sizeè®¡ç®—å®¹é‡ã€‚</span></span><br><span class="line">            <span class="keyword">int</span> capacity = calculateCapacity(elementData, size);</span><br><span class="line">            <span class="comment">// SharedSecrets ä¸€ä¸ªâ€œå…±äº«æœºå¯†â€å­˜å‚¨åº“ï¼Œå®ƒæ˜¯ä¸€ç§æœºåˆ¶ï¼Œ</span></span><br><span class="line">            <span class="comment">// ç”¨äºè°ƒç”¨å¦ä¸€ä¸ªåŒ…ä¸­çš„å®ç°ä¸“ç”¨æ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨åå°„ã€‚TODO</span></span><br><span class="line">            SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);</span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line">            ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">            Object[] a = elementData;</span><br><span class="line">            <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">            <span class="comment">// ä¾æ¬¡è¯»å–å…ƒç´ åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&amp;lt;size; i++) &#123;</span><br><span class="line">                a[i] = s.readObject();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><p>ArrayListä¸­ä¸ºä»€ä¹ˆsizeè¦åºåˆ—åŒ–ä¸¤æ¬¡ï¼Ÿ</p><br><blockquote><br><p>åœ¨ä»£ç ä¸­s.defaultWriteObject();ä¸­sizeåº”è¯¥ä¹Ÿè¢«åºåˆ—åŒ–äº†ï¼Œä¸ºä»€ä¹ˆä¸‹è¾¹è¿˜è¦å†å•ç‹¬åºåˆ—åŒ–ä¸€æ¬¡å‘¢ï¼Ÿ<br><br>è¿™æ ·å†™æ˜¯å‡ºäºå…¼å®¹æ€§è€ƒè™‘ã€‚<br><br>æ—§ç‰ˆæœ¬çš„JDKä¸­ï¼ŒArrayListçš„å®ç°æœ‰æ‰€ä¸åŒï¼Œä¼šå¯¹lengthå­—æ®µè¿›è¡Œåºåˆ—åŒ–ã€‚<br><br>è€Œæ–°ç‰ˆçš„JDKä¸­ï¼Œå¯¹ä¼˜åŒ–äº†ArrayListçš„å®ç°ï¼Œä¸å†åºåˆ—åŒ–lengthå­—æ®µã€‚<br><br>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœå»æ‰s.writeInt(size)ï¼Œé‚£ä¹ˆæ–°ç‰ˆæœ¬JDKåºåˆ—åŒ–çš„å¯¹è±¡ï¼Œåœ¨æ—§ç‰ˆæœ¬ä¸­å°±æ— æ³•æ­£ç¡®è¯»å–ï¼Œ<br><br>å› ä¸ºç¼ºå°‘äº†lengthå­—æ®µã€‚<br><br>å› æ­¤è¿™ç§å†™æ³•çœ‹èµ·æ¥å¤šæ­¤ä¸€ä¸¾ï¼Œå®é™…ä¸Šå´ä¿è¯äº†å…¼å®¹æ€§ã€‚</p><br></blockquote><br><br>### å°ç»“<br><ul><br><li>ArrayListåŸºäºæ•°ç»„æ–¹å¼å®ç°ï¼Œæ— å®¹é‡çš„é™åˆ¶ï¼ˆä¼šæ‰©å®¹ï¼‰</li><br><li>æ·»åŠ å…ƒç´ æ—¶å¯èƒ½è¦æ‰©å®¹ï¼ˆæ‰€ä»¥æœ€å¥½é¢„åˆ¤ä¸€ä¸‹ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ä¸ä¼šå‡å°‘å®¹é‡ï¼ˆè‹¥å¸Œæœ›å‡å°‘å®¹é‡å¯ä»¥ä½¿ç”¨trimToSize()ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ï¼Œå°†åˆ é™¤æ‰çš„ä½ç½®å…ƒç´ ç½®ä¸ºnullï¼Œä¸‹æ¬¡gcå°±ä¼šå›æ”¶è¿™äº›å…ƒç´ æ‰€å çš„å†…å­˜ç©ºé—´ã€‚</li><br><li>çº¿ç¨‹ä¸å®‰å…¨</li><br><li>add(int index, E element)ï¼šæ·»åŠ å…ƒç´ åˆ°æ•°ç»„ä¸­æŒ‡å®šä½ç½®çš„æ—¶å€™ï¼Œéœ€è¦å°†è¯¥ä½ç½®åŠå…¶åè¾¹æ‰€æœ‰çš„å…ƒç´ éƒ½æ•´å—å‘åå¤åˆ¶ä¸€ä½</li><br><li>get(int index)ï¼šè·å–æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è·å–ï¼ˆO(1)ï¼‰</li><br><li>remove(Object o)éœ€è¦éå†æ•°ç»„</li><br><li>remove(int index)ä¸éœ€è¦éå†æ•°ç»„ï¼Œåªéœ€åˆ¤æ–­indexæ˜¯å¦ç¬¦åˆæ¡ä»¶å³å¯ï¼Œæ•ˆç‡æ¯”remove(Object o)é«˜</li><br><li>contains(E)éœ€è¦éå†æ•°ç»„</li><br></ul><p><a href="https://www.cnblogs.com/renjiaqi/p/10403725.html" target="_blank" rel="noopener">é¢è¯•å¿…ä¼šä¹‹ArrayListæºç åˆ†æ&amp;æ‰‹å†™ArrayList</a></p>]]></content>
    
    <summary type="html">
    
      Java ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8
    
    </summary>
    
    
      <category term="Analyst of SourceCode" scheme="http://yoursite.com/tags/Analyst-of-SourceCode/"/>
    
  </entry>
  
  <entry>
    <title>The data structure and algorithm behind the MySQL index</title>
    <link href="http://yoursite.com/2020/02/05/The-data-structure-and-algorithm-behind-the-MySQL-index/"/>
    <id>http://yoursite.com/2020/02/05/The-data-structure-and-algorithm-behind-the-MySQL-index/</id>
    <published>2020-02-05T15:14:29.000Z</published>
    <updated>2020-02-27T09:15:26.658Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>æ–‡ç« ä¸»è¦å†…å®¹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><p></p><p></p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦ä»æ•°æ®ç»“æ„åŠç®—æ³•ç†è®ºå±‚é¢è®¨è®ºMySQLæ•°æ®åº“ç´¢å¼•çš„æ•°ç†åŸºç¡€ã€‚</p><p></p><p></p><p>ç¬¬äºŒéƒ¨åˆ†ç»“åˆMySQLæ•°æ®åº“ä¸­MyISAMå’ŒInnoDBæ•°æ®å­˜å‚¨å¼•æ“ä¸­ç´¢å¼•çš„æ¶æ„å®ç°è®¨è®ºèšé›†ç´¢å¼•ã€éèšé›†ç´¢å¼•åŠè¦†ç›–ç´¢å¼•ç­‰è¯é¢˜ã€‚</p><p></p><p></p><p>ç¬¬ä¸‰éƒ¨åˆ†æ ¹æ®ä¸Šé¢çš„ç†è®ºåŸºç¡€ï¼Œè®¨è®ºMySQLä¸­é«˜æ€§èƒ½ä½¿ç”¨ç´¢å¼•çš„ç­–ç•¥ã€‚<br><a id="more"></a><br></p><p></p><p></p><h1><a name="nav-2"></a>æ•°æ®ç»“æ„åŠç®—æ³•åŸºç¡€</h1><p></p><p></p><h2><a name="nav-2-1"></a>ç´¢å¼•çš„æœ¬è´¨</h2><p></p><p></p><p>MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼šç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚æå–å¥å­ä¸»å¹²ï¼Œå°±å¯ä»¥å¾—åˆ°ç´¢å¼•çš„æœ¬è´¨ï¼šç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ•°æ®åº“æŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æœ€ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ã€‚æˆ‘ä»¬éƒ½å¸Œæœ›æŸ¥è¯¢æ•°æ®çš„é€Ÿåº¦èƒ½å°½å¯èƒ½çš„å¿«ï¼Œå› æ­¤æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…ä¼šä»æŸ¥è¯¢ç®—æ³•çš„è§’åº¦è¿›è¡Œä¼˜åŒ–ã€‚æœ€åŸºæœ¬çš„æŸ¥è¯¢ç®—æ³•å½“ç„¶æ˜¯<a href="http://en.wikipedia.org/wiki/Linear_search" target="_blank">é¡ºåºæŸ¥æ‰¾</a>ï¼ˆlinear searchï¼‰ï¼Œè¿™ç§å¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶æ˜¾ç„¶æ˜¯ç³Ÿç³•çš„ï¼Œå¥½åœ¨è®¡ç®—æœºç§‘å­¦çš„å‘å±•æä¾›äº†å¾ˆå¤šæ›´ä¼˜ç§€çš„æŸ¥æ‰¾ç®—æ³•ï¼Œä¾‹å¦‚<a href="http://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank">äºŒåˆ†æŸ¥æ‰¾</a>ï¼ˆbinary searchï¼‰ã€<a href="http://en.wikipedia.org/wiki/Binary_search_tree" target="_blank">äºŒå‰æ ‘æŸ¥æ‰¾</a>ï¼ˆbinary tree searchï¼‰ç­‰ã€‚å¦‚æœç¨å¾®åˆ†æä¸€ä¸‹ä¼šå‘ç°ï¼Œæ¯ç§æŸ¥æ‰¾ç®—æ³•éƒ½åªèƒ½åº”ç”¨äºç‰¹å®šçš„æ•°æ®ç»“æ„ä¹‹ä¸Šï¼Œä¾‹å¦‚äºŒåˆ†æŸ¥æ‰¾è¦æ±‚è¢«æ£€ç´¢æ•°æ®æœ‰åºï¼Œè€ŒäºŒå‰æ ‘æŸ¥æ‰¾åªèƒ½åº”ç”¨äº<a href="http://en.wikipedia.org/wiki/Binary_search_tree" target="_blank">äºŒå‰æŸ¥æ‰¾æ ‘</a>ä¸Šï¼Œä½†æ˜¯æ•°æ®æœ¬èº«çš„ç»„ç»‡ç»“æ„ä¸å¯èƒ½å®Œå…¨æ»¡è¶³å„ç§æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œç†è®ºä¸Šä¸å¯èƒ½åŒæ—¶å°†ä¸¤åˆ—éƒ½æŒ‰é¡ºåºè¿›è¡Œç»„ç»‡ï¼‰ï¼Œæ‰€ä»¥ï¼Œåœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ç§æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç´¢å¼•ã€‚</p><p></p><p></p><p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/1.png"></p><p></p><p></p><p align="center">å›¾1</p><p></p><p></p><p>å›¾1å±•ç¤ºäº†ä¸€ç§å¯èƒ½çš„ç´¢å¼•æ–¹å¼ã€‚å·¦è¾¹æ˜¯æ•°æ®è¡¨ï¼Œä¸€å…±æœ‰ä¸¤åˆ—ä¸ƒæ¡è®°å½•ï¼Œæœ€å·¦è¾¹çš„æ˜¯æ•°æ®è®°å½•çš„ç‰©ç†åœ°å€ï¼ˆæ³¨æ„é€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•åœ¨ç£ç›˜ä¸Šä¹Ÿå¹¶ä¸æ˜¯ä¸€å®šç‰©ç†ç›¸é‚»çš„ï¼‰ã€‚ä¸ºäº†åŠ å¿«Col2çš„æŸ¥æ‰¾ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå³è¾¹æ‰€ç¤ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘å¯¹åº”æ•°æ®è®°å½•ç‰©ç†åœ°å€çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨äºŒå‰æŸ¥æ‰¾åœ¨(O(log_2n))çš„å¤æ‚åº¦å†…è·å–åˆ°ç›¸åº”æ•°æ®ã€‚</p><p></p><p></p><p>è™½ç„¶è¿™æ˜¯ä¸€ä¸ªè´§çœŸä»·å®çš„ç´¢å¼•ï¼Œä½†æ˜¯å®é™…çš„æ•°æ®åº“ç³»ç»Ÿå‡ ä¹æ²¡æœ‰ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ–å…¶è¿›åŒ–å“ç§<a href="http://en.wikipedia.org/wiki/Red-black_tree" target="_blank">çº¢é»‘æ ‘</a>ï¼ˆred-black treeï¼‰å®ç°çš„ï¼ŒåŸå› ä¼šåœ¨ä¸‹æ–‡ä»‹ç»ã€‚</p><p></p><p></p><h2><a name="nav-2-2"></a>B-Treeå’ŒB+Tree</h2><p></p><p></p><p>ç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»ŸåŠæ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨B-Treeæˆ–å…¶å˜ç§B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œåœ¨æœ¬æ–‡çš„ä¸‹ä¸€èŠ‚ä¼šç»“åˆå­˜å‚¨å™¨åŸç†åŠè®¡ç®—æœºå­˜å–åŸç†è®¨è®ºä¸ºä»€ä¹ˆB-Treeå’ŒB+Treeåœ¨è¢«å¦‚æ­¤å¹¿æ³›ç”¨äºç´¢å¼•ï¼Œè¿™ä¸€èŠ‚å…ˆå•çº¯ä»æ•°æ®ç»“æ„è§’åº¦æè¿°å®ƒä»¬ã€‚</p><p></p><p></p><h3>B-Tree</h3><p></p><p></p><p>ä¸ºäº†æè¿°B-Treeï¼Œé¦–å…ˆå®šä¹‰ä¸€æ¡æ•°æ®è®°å½•ä¸ºä¸€ä¸ªäºŒå…ƒç»„[key, data]ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹äºä¸åŒæ•°æ®è®°å½•ï¼Œkeyæ˜¯äº’ä¸ç›¸åŒçš„ï¼›dataä¸ºæ•°æ®è®°å½•é™¤keyå¤–çš„æ•°æ®ã€‚é‚£ä¹ˆB-Treeæ˜¯æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„æ•°æ®ç»“æ„ï¼š</p><p></p><p></p><p>dä¸ºå¤§äº1çš„ä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„åº¦ã€‚</p><p></p><p></p><p>hä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„é«˜åº¦ã€‚</p><p></p><p></p><p>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ç”±n-1ä¸ªkeyå’Œnä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­d&lt;=n&lt;=2dã€‚</p><p></p><p></p><p>æ¯ä¸ªå¶å­èŠ‚ç‚¹æœ€å°‘åŒ…å«ä¸€ä¸ªkeyå’Œä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€å¤šåŒ…å«2d-1ä¸ªkeyå’Œ2dä¸ªæŒ‡é’ˆï¼Œå¶èŠ‚ç‚¹çš„æŒ‡é’ˆå‡ä¸ºnull ã€‚</p><p></p><p></p><p>æ‰€æœ‰å¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ·±åº¦ï¼Œç­‰äºæ ‘é«˜hã€‚</p><p></p><p></p><p>keyå’ŒæŒ‡é’ˆäº’ç›¸é—´éš”ï¼ŒèŠ‚ç‚¹ä¸¤ç«¯æ˜¯æŒ‡é’ˆã€‚</p><p></p><p></p><p>ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„keyä»å·¦åˆ°å³éé€’å‡æ’åˆ—ã€‚</p><p></p><p></p><p>æ‰€æœ‰èŠ‚ç‚¹ç»„æˆæ ‘ç»“æ„ã€‚</p><p></p><p></p><p>æ¯ä¸ªæŒ‡é’ˆè¦ä¹ˆä¸ºnullï¼Œè¦ä¹ˆæŒ‡å‘å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å·¦è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äº(v(key_1))ï¼Œå…¶ä¸­(v(key_1))ä¸ºnodeçš„ç¬¬ä¸€ä¸ªkeyçš„å€¼ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å³è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå¤§äº(v(key_m))ï¼Œå…¶ä¸­(v(key_m))ä¸ºnodeçš„æœ€åä¸€ä¸ªkeyçš„å€¼ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeçš„å·¦å³ç›¸é‚»keyåˆ†åˆ«æ˜¯(key_i)å’Œ(key_{i+1})ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äº(v(key_{i+1}))ä¸”å¤§äº(v(key_i))ã€‚</p><p></p><p></p><p>å›¾2æ˜¯ä¸€ä¸ªd=2çš„B-Treeç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/2.png"></p><p></p><p></p><p align="center">å›¾2</p><p></p><p></p><p>ç”±äºB-Treeçš„ç‰¹æ€§ï¼Œåœ¨B-Treeä¸­æŒ‰keyæ£€ç´¢æ•°æ®çš„ç®—æ³•éå¸¸ç›´è§‚ï¼šé¦–å…ˆä»æ ¹èŠ‚ç‚¹è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›å¯¹åº”èŠ‚ç‚¹çš„dataï¼Œå¦åˆ™å¯¹ç›¸åº”åŒºé—´çš„æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹é€’å½’è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°èŠ‚ç‚¹æˆ–æ‰¾åˆ°nullæŒ‡é’ˆï¼Œå‰è€…æŸ¥æ‰¾æˆåŠŸï¼Œåè€…æŸ¥æ‰¾å¤±è´¥ã€‚B-Treeä¸ŠæŸ¥æ‰¾ç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre <span class="class"><span class="keyword">class</span></span>=<span class="string">"prettyprint linenums"</span>&gt;BTree_Search(node, key) &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    foreach(node.key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(node.key[i] == key) <span class="keyword">return</span> node.data[i];</span><br><span class="line">            <span class="keyword">if</span>(node.key[i] &amp;gt; key) <span class="keyword">return</span> BTree_Search(point[i]-&amp;gt;node);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> BTree_Search(point[i+<span class="number">1</span>]-&amp;gt;node);</span><br><span class="line">&#125;</span><br><span class="line">data = BTree_Search(root, my_key);&lt;/pre&gt;</span><br></pre></td></tr></table></figure><p></p><p>å…³äºB-Treeæœ‰ä¸€ç³»åˆ—æœ‰è¶£çš„æ€§è´¨ï¼Œä¾‹å¦‚ä¸€ä¸ªåº¦ä¸ºdçš„B-Treeï¼Œè®¾å…¶ç´¢å¼•Nä¸ªkeyï¼Œåˆ™å…¶æ ‘é«˜hçš„ä¸Šé™ä¸º(log_d((N+1)/2))ï¼Œæ£€ç´¢ä¸€ä¸ªkeyï¼Œå…¶æŸ¥æ‰¾èŠ‚ç‚¹ä¸ªæ•°çš„æ¸è¿›å¤æ‚åº¦ä¸º(O(log_dN))ã€‚ä»è¿™ç‚¹å¯ä»¥çœ‹å‡ºï¼ŒB-Treeæ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆç‡çš„ç´¢å¼•æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><p>å¦å¤–ï¼Œç”±äºæ’å…¥åˆ é™¤æ–°çš„æ•°æ®è®°å½•ä¼šç ´åB-Treeçš„æ€§è´¨ï¼Œå› æ­¤åœ¨æ’å…¥åˆ é™¤æ—¶ï¼Œéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€ä¸ªåˆ†è£‚ã€åˆå¹¶ã€è½¬ç§»ç­‰æ“ä½œä»¥ä¿æŒB-Treeæ€§è´¨ï¼Œæœ¬æ–‡ä¸æ‰“ç®—å®Œæ•´è®¨è®ºB-Treeè¿™äº›å†…å®¹ï¼Œå› ä¸ºå·²ç»æœ‰è®¸å¤šèµ„æ–™è¯¦ç»†è¯´æ˜äº†B-Treeçš„æ•°å­¦æ€§è´¨åŠæ’å…¥åˆ é™¤ç®—æ³•ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨æœ¬æ–‡æœ«çš„å‚è€ƒæ–‡çŒ®ä¸€æ æ‰¾åˆ°ç›¸åº”çš„èµ„æ–™è¿›è¡Œé˜…è¯»ã€‚</p><p></p><p></p><h3>B+Tree</h3><p></p><p></p><p>B-Treeæœ‰è®¸å¤šå˜ç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ˜¯B+Treeï¼Œä¾‹å¦‚MySQLå°±æ™®éä½¿ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</p><p></p><p></p><p>ä¸B-Treeç›¸æ¯”ï¼ŒB+Treeæœ‰ä»¥ä¸‹ä¸åŒç‚¹ï¼š</p><p></p><p></p><p>æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆä¸Šé™ä¸º2dè€Œä¸æ˜¯2d+1ã€‚</p><p></p><p></p><p>å†…èŠ‚ç‚¹ä¸å­˜å‚¨dataï¼Œåªå­˜å‚¨keyï¼›å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æŒ‡é’ˆã€‚</p><p></p><p></p><p>å›¾3æ˜¯ä¸€ä¸ªç®€å•çš„B+Treeç¤ºæ„ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/3.png"></p><p></p><p></p><p align="center">å›¾3</p><p></p><p></p><p>ç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„åŸŸï¼Œå› æ­¤B+Treeä¸­å¶èŠ‚ç‚¹å’Œå†…èŠ‚ç‚¹ä¸€èˆ¬å¤§å°ä¸åŒã€‚è¿™ç‚¹ä¸B-Treeä¸åŒï¼Œè™½ç„¶B-Treeä¸­ä¸åŒèŠ‚ç‚¹å­˜æ”¾çš„keyå’ŒæŒ‡é’ˆå¯èƒ½æ•°é‡ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„åŸŸå’Œä¸Šé™æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸­B-Treeå¾€å¾€å¯¹æ¯ä¸ªèŠ‚ç‚¹ç”³è¯·åŒç­‰å¤§å°çš„ç©ºé—´ã€‚</p><p></p><p></p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒB+Treeæ¯”B-Treeæ›´é€‚åˆå®ç°å¤–å­˜å‚¨ç´¢å¼•ç»“æ„ï¼Œå…·ä½“åŸå› ä¸å¤–å­˜å‚¨å™¨åŸç†åŠè®¡ç®—æœºå­˜å–åŸç†æœ‰å…³ï¼Œå°†åœ¨ä¸‹é¢è®¨è®ºã€‚</p><p></p><p></p><h3>å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree</h3><p></p><p></p><p>ä¸€èˆ¬åœ¨æ•°æ®åº“ç³»ç»Ÿæˆ–æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨çš„B+Treeç»“æ„éƒ½åœ¨ç»å…¸B+Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/4.png"></p><p></p><p></p><p align="center">å›¾4</p><p></p><p></p><p>å¦‚å›¾4æ‰€ç¤ºï¼Œåœ¨B+Treeçš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeã€‚åšè¿™ä¸ªä¼˜åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼Œä¾‹å¦‚å›¾4ä¸­å¦‚æœè¦æŸ¥è¯¢keyä¸ºä»18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åï¼Œåªéœ€é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéå†å°±å¯ä»¥ä¸€æ¬¡æ€§è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæå¤§æåˆ°äº†åŒºé—´æŸ¥è¯¢æ•ˆç‡ã€‚</p><p></p><p></p><p>è¿™ä¸€èŠ‚å¯¹B-Treeå’ŒB+Treeè¿›è¡Œäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œä¸‹ä¸€èŠ‚ç»“åˆå­˜å‚¨å™¨å­˜å–åŸç†ä»‹ç»ä¸ºä»€ä¹ˆç›®å‰B+Treeæ˜¯æ•°æ®åº“ç³»ç»Ÿå®ç°ç´¢å¼•çš„é¦–é€‰æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><h2><a name="nav-2-3"></a>ä¸ºä»€ä¹ˆä½¿ç”¨B-Treeï¼ˆB+Treeï¼‰</h2><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ï¼Œçº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨B-/+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œè¿™ä¸€èŠ‚å°†ç»“åˆè®¡ç®—æœºç»„æˆåŸç†ç›¸å…³çŸ¥è¯†è®¨è®ºB-/+Treeä½œä¸ºç´¢å¼•çš„ç†è®ºåŸºç¡€ã€‚</p><p></p><p></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿç£ç›˜I/Oæ¶ˆè€—ï¼Œç›¸å¯¹äºå†…å­˜å­˜å–ï¼ŒI/Oå­˜å–çš„æ¶ˆè€—è¦é«˜å‡ ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥è¯„ä»·ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•çš„ä¼˜åŠ£æœ€é‡è¦çš„æŒ‡æ ‡å°±æ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oæ“ä½œæ¬¡æ•°çš„æ¸è¿›å¤æ‚åº¦ã€‚æ¢å¥è¯è¯´ï¼Œç´¢å¼•çš„ç»“æ„ç»„ç»‡è¦å°½é‡å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oçš„å­˜å–æ¬¡æ•°ã€‚ä¸‹é¢å…ˆä»‹ç»å†…å­˜å’Œç£ç›˜å­˜å–åŸç†ï¼Œç„¶åå†ç»“åˆè¿™äº›åŸç†åˆ†æB-/+Treeä½œä¸ºç´¢å¼•çš„æ•ˆç‡ã€‚</p><p></p><p></p><h3>ä¸»å­˜å­˜å–åŸç†</h3><p></p><p></p><p>ç›®å‰è®¡ç®—æœºä½¿ç”¨çš„ä¸»å­˜åŸºæœ¬éƒ½æ˜¯éšæœºè¯»å†™å­˜å‚¨å™¨ï¼ˆRAMï¼‰ï¼Œç°ä»£RAMçš„ç»“æ„å’Œå­˜å–åŸç†æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæœ¬æ–‡æŠ›å´å…·ä½“å·®åˆ«ï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªååˆ†ç®€å•çš„å­˜å–æ¨¡å‹æ¥è¯´æ˜RAMçš„å·¥ä½œåŸç†ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/5.png"></p><p></p><p></p><p align="center">å›¾5</p><p></p><p></p><p>ä»æŠ½è±¡è§’åº¦çœ‹ï¼Œä¸»å­˜æ˜¯ä¸€ç³»åˆ—çš„å­˜å‚¨å•å…ƒç»„æˆçš„çŸ©é˜µï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒå­˜å‚¨å›ºå®šå¤§å°çš„æ•°æ®ã€‚æ¯ä¸ªå­˜å‚¨å•å…ƒæœ‰å”¯ä¸€çš„åœ°å€ï¼Œç°ä»£ä¸»å­˜çš„ç¼–å€è§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°†å…¶ç®€åŒ–æˆä¸€ä¸ªäºŒç»´åœ°å€ï¼šé€šè¿‡ä¸€ä¸ªè¡Œåœ°å€å’Œä¸€ä¸ªåˆ—åœ°å€å¯ä»¥å”¯ä¸€å®šä½åˆ°ä¸€ä¸ªå­˜å‚¨å•å…ƒã€‚å›¾5å±•ç¤ºäº†ä¸€ä¸ª4 x 4çš„ä¸»å­˜æ¨¡å‹ã€‚</p><p></p><p></p><p>ä¸»å­˜çš„å­˜å–è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p></p><p></p><p>å½“ç³»ç»Ÿéœ€è¦è¯»å–ä¸»å­˜æ—¶ï¼Œåˆ™å°†åœ°å€ä¿¡å·æ”¾åˆ°åœ°å€æ€»çº¿ä¸Šä¼ ç»™ä¸»å­˜ï¼Œä¸»å­˜è¯»åˆ°åœ°å€ä¿¡å·åï¼Œè§£æä¿¡å·å¹¶å®šä½åˆ°æŒ‡å®šå­˜å‚¨å•å…ƒï¼Œç„¶åå°†æ­¤å­˜å‚¨å•å…ƒæ•°æ®æ”¾åˆ°æ•°æ®æ€»çº¿ä¸Šï¼Œä¾›å…¶å®ƒéƒ¨ä»¶è¯»å–ã€‚</p><p></p><p></p><p>å†™ä¸»å­˜çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œç³»ç»Ÿå°†è¦å†™å…¥å•å…ƒåœ°å€å’Œæ•°æ®åˆ†åˆ«æ”¾åœ¨åœ°å€æ€»çº¿å’Œæ•°æ®æ€»çº¿ä¸Šï¼Œä¸»å­˜è¯»å–ä¸¤ä¸ªæ€»çº¿çš„å†…å®¹ï¼Œåšç›¸åº”çš„å†™æ“ä½œã€‚</p><p></p><p></p><p>è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œä¸»å­˜å­˜å–çš„æ—¶é—´ä»…ä¸å­˜å–æ¬¡æ•°å‘ˆçº¿æ€§å…³ç³»ï¼Œå› ä¸ºä¸å­˜åœ¨æœºæ¢°æ“ä½œï¼Œä¸¤æ¬¡å­˜å–çš„æ•°æ®çš„â€œè·ç¦»â€ä¸ä¼šå¯¹æ—¶é—´æœ‰ä»»ä½•å½±å“ï¼Œä¾‹å¦‚ï¼Œå…ˆå–A0å†å–A1å’Œå…ˆå–A0å†å–D3çš„æ—¶é—´æ¶ˆè€—æ˜¯ä¸€æ ·çš„ã€‚</p><p></p><p></p><h3>ç£ç›˜å­˜å–åŸç†</h3><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ï¼Œç´¢å¼•ä¸€èˆ¬ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç´¢å¼•æ£€ç´¢éœ€è¦ç£ç›˜I/Oæ“ä½œã€‚ä¸ä¸»å­˜ä¸åŒï¼Œç£ç›˜I/Oå­˜åœ¨æœºæ¢°è¿åŠ¨è€—è´¹ï¼Œå› æ­¤ç£ç›˜I/Oçš„æ—¶é—´æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚</p><p></p><p></p><p>å›¾6æ˜¯ç£ç›˜çš„æ•´ä½“ç»“æ„ç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/6.png"></p><p></p><p></p><p align="center">å›¾6</p><p></p><p></p><p>ä¸€ä¸ªç£ç›˜ç”±å¤§å°ç›¸åŒä¸”åŒè½´çš„åœ†å½¢ç›˜ç‰‡ç»„æˆï¼Œç£ç›˜å¯ä»¥è½¬åŠ¨ï¼ˆå„ä¸ªç£ç›˜å¿…é¡»åŒæ­¥è½¬åŠ¨ï¼‰ã€‚åœ¨ç£ç›˜çš„ä¸€ä¾§æœ‰ç£å¤´æ”¯æ¶ï¼Œç£å¤´æ”¯æ¶å›ºå®šäº†ä¸€ç»„ç£å¤´ï¼Œæ¯ä¸ªç£å¤´è´Ÿè´£å­˜å–ä¸€ä¸ªç£ç›˜çš„å†…å®¹ã€‚ç£å¤´ä¸èƒ½è½¬åŠ¨ï¼Œä½†æ˜¯å¯ä»¥æ²¿ç£ç›˜åŠå¾„æ–¹å‘è¿åŠ¨ï¼ˆå®é™…æ˜¯æ–œåˆ‡å‘è¿åŠ¨ï¼‰ï¼Œæ¯ä¸ªç£å¤´åŒä¸€æ—¶åˆ»ä¹Ÿå¿…é¡»æ˜¯åŒè½´çš„ï¼Œå³ä»æ­£ä¸Šæ–¹å‘ä¸‹çœ‹ï¼Œæ‰€æœ‰ç£å¤´ä»»ä½•æ—¶å€™éƒ½æ˜¯é‡å çš„ï¼ˆä¸è¿‡ç›®å‰å·²ç»æœ‰å¤šç£å¤´ç‹¬ç«‹æŠ€æœ¯ï¼Œå¯ä¸å—æ­¤é™åˆ¶ï¼‰ã€‚</p><p></p><p></p><p>å›¾7æ˜¯ç£ç›˜ç»“æ„çš„ç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/7.png"></p><p></p><p></p><p align="center">å›¾7</p><p></p><p></p><p>ç›˜ç‰‡è¢«åˆ’åˆ†æˆä¸€ç³»åˆ—åŒå¿ƒç¯ï¼Œåœ†å¿ƒæ˜¯ç›˜ç‰‡ä¸­å¿ƒï¼Œæ¯ä¸ªåŒå¿ƒç¯å«åšä¸€ä¸ªç£é“ï¼Œæ‰€æœ‰åŠå¾„ç›¸åŒçš„ç£é“ç»„æˆä¸€ä¸ªæŸ±é¢ã€‚ç£é“è¢«æ²¿åŠå¾„çº¿åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ®µï¼Œæ¯ä¸ªæ®µå«åšä¸€ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªæ‰‡åŒºæ˜¯ç£ç›˜çš„æœ€å°å­˜å‚¨å•å…ƒã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¸‹é¢å‡è®¾ç£ç›˜åªæœ‰ä¸€ä¸ªç›˜ç‰‡å’Œä¸€ä¸ªç£å¤´ã€‚</p><p></p><p></p><p>å½“éœ€è¦ä»ç£ç›˜è¯»å–æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šå°†æ•°æ®é€»è¾‘åœ°å€ä¼ ç»™ç£ç›˜ï¼Œç£ç›˜çš„æ§åˆ¶ç”µè·¯æŒ‰ç…§å¯»å€é€»è¾‘å°†é€»è¾‘åœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œå³ç¡®å®šè¦è¯»çš„æ•°æ®åœ¨å“ªä¸ªç£é“ï¼Œå“ªä¸ªæ‰‡åŒºã€‚ä¸ºäº†è¯»å–è¿™ä¸ªæ‰‡åŒºçš„æ•°æ®ï¼Œéœ€è¦å°†ç£å¤´æ”¾åˆ°è¿™ä¸ªæ‰‡åŒºä¸Šæ–¹ï¼Œä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œç£å¤´éœ€è¦ç§»åŠ¨å¯¹å‡†ç›¸åº”ç£é“ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå¯»é“ï¼Œæ‰€è€—è´¹æ—¶é—´å«åšå¯»é“æ—¶é—´ï¼Œç„¶åç£ç›˜æ—‹è½¬å°†ç›®æ ‡æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—è´¹çš„æ—¶é—´å«åšæ—‹è½¬æ—¶é—´ã€‚</p><p></p><p></p><h3>å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»</h3><p></p><p></p><p>ç”±äºå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»è¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„å±€éƒ¨æ€§åŸç†ï¼š</p><p></p><p></p><p>å½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚</p><p></p><p></p><p>ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­ã€‚</p><p></p><p></p><p>ç”±äºç£ç›˜é¡ºåºè¯»å–çš„æ•ˆç‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆç‡ã€‚</p><p></p><p></p><p>é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿ç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åè¿ç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åå¼‚å¸¸è¿”å›ï¼Œç¨‹åºç»§ç»­è¿è¡Œã€‚</p><p></p><p></p><h3>B-/+Treeç´¢å¼•çš„æ€§èƒ½åˆ†æ</h3><p></p><p></p><p>åˆ°è¿™é‡Œç»ˆäºå¯ä»¥åˆ†æB-/+Treeç´¢å¼•çš„æ€§èƒ½äº†ã€‚</p><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æ„çš„ä¼˜åŠ£ã€‚å…ˆä»B-Treeåˆ†æï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®é™…å®ç°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š</p><p></p><p></p><p>æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®ç°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚</p><p></p><p></p><p>B-Treeä¸­ä¸€æ¬¡æ£€ç´¢æœ€å¤šéœ€è¦h-1æ¬¡I/Oï¼ˆæ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ï¼‰ï¼Œæ¸è¿›å¤æ‚åº¦ä¸º(O(h)=O(log_dN))ã€‚ä¸€èˆ¬å®é™…åº”ç”¨ä¸­ï¼Œå‡ºåº¦dæ˜¯éå¸¸å¤§çš„æ•°å­—ï¼Œé€šå¸¸è¶…è¿‡100ï¼Œå› æ­¤héå¸¸å°ï¼ˆé€šå¸¸ä¸è¶…è¿‡3ï¼‰ã€‚</p><p></p><p></p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œç”¨B-Treeä½œä¸ºç´¢å¼•ç»“æ„æ•ˆç‡æ˜¯éå¸¸é«˜çš„ã€‚</p><p></p><p></p><p>è€Œçº¢é»‘æ ‘è¿™ç§ç»“æ„ï¼Œhæ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚</p><p></p><p></p><p>ä¸Šæ–‡è¿˜è¯´è¿‡ï¼ŒB+Treeæ›´é€‚åˆå¤–å­˜ç´¢å¼•ï¼ŒåŸå› å’Œå†…èŠ‚ç‚¹å‡ºåº¦dæœ‰å…³ã€‚ä»ä¸Šé¢åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œdè¶Šå¤§ç´¢å¼•çš„æ€§èƒ½è¶Šå¥½ï¼Œè€Œå‡ºåº¦çš„ä¸Šé™å–å†³äºèŠ‚ç‚¹å†…keyå’Œdataçš„å¤§å°ï¼š</p><p></p><p></p><p>(d_{max}=floor(pagesize / (keysize + datasize + pointsize)))</p><p></p><p></p><p>floorè¡¨ç¤ºå‘ä¸‹å–æ•´ã€‚ç”±äºB+Treeå†…èŠ‚ç‚¹å»æ‰äº†dataåŸŸï¼Œå› æ­¤å¯ä»¥æ‹¥æœ‰æ›´å¤§çš„å‡ºåº¦ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p><p></p><p></p><p>è¿™ä¸€ç« ä»ç†è®ºè§’åº¦è®¨è®ºäº†ä¸ç´¢å¼•ç›¸å…³çš„æ•°æ®ç»“æ„ä¸ç®—æ³•é—®é¢˜ï¼Œä¸‹ä¸€ç« å°†è®¨è®ºB+Treeæ˜¯å¦‚ä½•å…·ä½“å®ç°ä¸ºMySQLä¸­ç´¢å¼•ï¼ŒåŒæ—¶å°†ç»“åˆMyISAMå’ŒInnDBå­˜å‚¨å¼•æ“ä»‹ç»éèšé›†ç´¢å¼•å’Œèšé›†ç´¢å¼•ä¸¤ç§ä¸åŒçš„ç´¢å¼•å®ç°å½¢å¼ã€‚</p><p></p><p></p><h1><a name="nav-3"></a>MySQLç´¢å¼•å®ç°</h1><p></p><p></p><p>åœ¨MySQLä¸­ï¼Œç´¢å¼•å±äºå­˜å‚¨å¼•æ“çº§åˆ«çš„æ¦‚å¿µï¼Œä¸åŒå­˜å‚¨å¼•æ“å¯¹ç´¢å¼•çš„å®ç°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œæœ¬æ–‡ä¸»è¦è®¨è®ºMyISAMå’ŒInnoDBä¸¤ä¸ªå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°æ–¹å¼ã€‚</p><p></p><p></p><h2><a name="nav-3-1"></a>MyISAMç´¢å¼•å®ç°</h2><p></p><p></p><p>MyISAMå¼•æ“ä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚ä¸‹å›¾æ˜¯MyISAMç´¢å¼•çš„åŸç†å›¾ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/8.png"></p><p></p><p></p><p align="center">å›¾8</p><p></p><p></p><p>è¿™é‡Œè®¾è¡¨ä¸€å…±æœ‰ä¸‰åˆ—ï¼Œå‡è®¾æˆ‘ä»¬ä»¥Col1ä¸ºä¸»é”®ï¼Œåˆ™å›¾8æ˜¯ä¸€ä¸ªMyISAMè¡¨çš„ä¸»ç´¢å¼•ï¼ˆPrimary keyï¼‰ç¤ºæ„ã€‚å¯ä»¥çœ‹å‡ºMyISAMçš„ç´¢å¼•æ–‡ä»¶ä»…ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚åœ¨MyISAMä¸­ï¼Œä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ï¼ˆSecondary keyï¼‰åœ¨ç»“æ„ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œåªæ˜¯ä¸»ç´¢å¼•è¦æ±‚keyæ˜¯å”¯ä¸€çš„ï¼Œè€Œè¾…åŠ©ç´¢å¼•çš„keyå¯ä»¥é‡å¤ã€‚å¦‚æœæˆ‘ä»¬åœ¨Col2ä¸Šå»ºç«‹ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™æ­¤ç´¢å¼•çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/9.png"></p><p></p><p></p><p align="center">å›¾9</p><p></p><p></p><p>åŒæ ·ä¹Ÿæ˜¯ä¸€é¢—B+Treeï¼ŒdataåŸŸä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚å› æ­¤ï¼ŒMyISAMä¸­ç´¢å¼•æ£€ç´¢çš„ç®—æ³•ä¸ºé¦–å…ˆæŒ‰ç…§B+Treeæœç´¢ç®—æ³•æœç´¢ç´¢å¼•ï¼Œå¦‚æœæŒ‡å®šçš„Keyå­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶dataåŸŸçš„å€¼ï¼Œç„¶åä»¥dataåŸŸçš„å€¼ä¸ºåœ°å€ï¼Œè¯»å–ç›¸åº”æ•°æ®è®°å½•ã€‚</p><p></p><p></p><p>MyISAMçš„ç´¢å¼•æ–¹å¼ä¹Ÿå«åšâ€œéèšé›†â€çš„ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆç§°å‘¼æ˜¯ä¸ºäº†ä¸InnoDBçš„èšé›†ç´¢å¼•åŒºåˆ†ã€‚</p><p></p><p></p><h2><a name="nav-3-2"></a>InnoDBç´¢å¼•å®ç°</h2><p></p><p></p><p>è™½ç„¶InnoDBä¹Ÿä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†å…·ä½“å®ç°æ–¹å¼å´ä¸MyISAMæˆªç„¶ä¸åŒã€‚</p><p></p><p></p><p>ç¬¬ä¸€ä¸ªé‡å¤§åŒºåˆ«æ˜¯InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ã€‚ä»ä¸Šæ–‡çŸ¥é“ï¼ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚è€Œåœ¨InnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„ï¼Œè¿™æ£µæ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤InnoDBè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/10.png"></p><p></p><p></p><p align="center">å›¾10</p><p></p><p></p><p>å›¾10æ˜¯InnoDBä¸»ç´¢å¼•ï¼ˆåŒæ—¶ä¹Ÿæ˜¯æ•°æ®æ–‡ä»¶ï¼‰çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°å¶èŠ‚ç‚¹åŒ…å«äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ç§ç´¢å¼•å«åšèšé›†ç´¢å¼•ã€‚å› ä¸ºInnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«è¦æŒ‰ä¸»é”®èšé›†ï¼Œæ‰€ä»¥InnoDBè¦æ±‚è¡¨å¿…é¡»æœ‰ä¸»é”®ï¼ˆMyISAMå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å½¢ã€‚</p><p></p><p></p><p>ç¬¬äºŒä¸ªä¸MyISAMç´¢å¼•çš„ä¸åŒæ˜¯InnoDBçš„è¾…åŠ©ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯åœ°å€ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDBçš„æ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚ä¾‹å¦‚ï¼Œå›¾11ä¸ºå®šä¹‰åœ¨Col3ä¸Šçš„ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/11.png"></p><p></p><p></p><p align="center">å›¾11</p><p></p><p></p><p>è¿™é‡Œä»¥è‹±æ–‡å­—ç¬¦çš„ASCIIç ä½œä¸ºæ¯”è¾ƒå‡†åˆ™ã€‚èšé›†ç´¢å¼•è¿™ç§å®ç°æ–¹å¼ä½¿å¾—æŒ‰ä¸»é”®çš„æœç´¢ååˆ†é«˜æ•ˆï¼Œä½†æ˜¯è¾…åŠ©ç´¢å¼•æœç´¢éœ€è¦æ£€ç´¢ä¸¤éç´¢å¼•ï¼šé¦–å…ˆæ£€ç´¢è¾…åŠ©ç´¢å¼•è·å¾—ä¸»é”®ï¼Œç„¶åç”¨ä¸»é”®åˆ°ä¸»ç´¢å¼•ä¸­æ£€ç´¢è·å¾—è®°å½•ã€‚</p><p></p><p></p><p>äº†è§£ä¸åŒå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°æ–¹å¼å¯¹äºæ­£ç¡®ä½¿ç”¨å’Œä¼˜åŒ–ç´¢å¼•éƒ½éå¸¸æœ‰å¸®åŠ©ï¼Œä¾‹å¦‚çŸ¥é“äº†InnoDBçš„ç´¢å¼•å®ç°åï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»ç´¢å¼•ï¼Œè¿‡é•¿çš„ä¸»ç´¢å¼•ä¼šä»¤è¾…åŠ©ç´¢å¼•å˜å¾—è¿‡å¤§ã€‚å†ä¾‹å¦‚ï¼Œç”¨éå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®åœ¨InnoDBä¸­ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºInnoDBæ•°æ®æ–‡ä»¶æœ¬èº«æ˜¯ä¸€é¢—B+Treeï¼Œéå•è°ƒçš„ä¸»é”®ä¼šé€ æˆåœ¨æ’å…¥æ–°è®°å½•æ—¶æ•°æ®æ–‡ä»¶ä¸ºäº†ç»´æŒB+Treeçš„ç‰¹æ€§è€Œé¢‘ç¹çš„åˆ†è£‚è°ƒæ•´ï¼Œååˆ†ä½æ•ˆï¼Œè€Œä½¿ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p></p><p></p><p>ä¸‹ä¸€ç« å°†å…·ä½“è®¨è®ºè¿™äº›ä¸ç´¢å¼•æœ‰å…³çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p><p></p><p></p><h1><a name="nav-4"></a>ç´¢å¼•ä½¿ç”¨ç­–ç•¥åŠä¼˜åŒ–</h1><p></p><p></p><p>MySQLçš„ä¼˜åŒ–ä¸»è¦åˆ†ä¸ºç»“æ„ä¼˜åŒ–ï¼ˆScheme optimizationï¼‰å’ŒæŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery optimizationï¼‰ã€‚æœ¬ç« è®¨è®ºçš„é«˜æ€§èƒ½ç´¢å¼•ç­–ç•¥ä¸»è¦å±äºç»“æ„ä¼˜åŒ–èŒƒç•´ã€‚æœ¬ç« çš„å†…å®¹å®Œå…¨åŸºäºä¸Šæ–‡çš„ç†è®ºåŸºç¡€ï¼Œå®é™…ä¸Šä¸€æ—¦ç†è§£äº†ç´¢å¼•èƒŒåçš„æœºåˆ¶ï¼Œé‚£ä¹ˆé€‰æ‹©é«˜æ€§èƒ½çš„ç­–ç•¥å°±å˜æˆäº†çº¯ç²¹çš„æ¨ç†ï¼Œå¹¶ä¸”å¯ä»¥ç†è§£è¿™äº›ç­–ç•¥èƒŒåçš„é€»è¾‘ã€‚</p><p></p><p></p><h2><a name="nav-4-1"></a>ç¤ºä¾‹æ•°æ®åº“</h2><p></p><p></p><p>ä¸ºäº†è®¨è®ºç´¢å¼•ç­–ç•¥ï¼Œéœ€è¦ä¸€ä¸ªæ•°æ®é‡ä¸ç®—å°çš„æ•°æ®åº“ä½œä¸ºç¤ºä¾‹ã€‚æœ¬æ–‡é€‰ç”¨MySQLå®˜æ–¹æ–‡æ¡£ä¸­æä¾›çš„ç¤ºä¾‹æ•°æ®åº“ä¹‹ä¸€ï¼šemployeesã€‚è¿™ä¸ªæ•°æ®åº“å…³ç³»å¤æ‚åº¦é€‚ä¸­ï¼Œä¸”æ•°æ®é‡è¾ƒå¤§ã€‚ä¸‹å›¾æ˜¯è¿™ä¸ªæ•°æ®åº“çš„E-Rå…³ç³»å›¾ï¼ˆå¼•ç”¨è‡ªMySQLå®˜æ–¹æ‰‹å†Œï¼‰ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/12.png"></p><p></p><p></p><p align="center">å›¾12</p><p></p><p></p><p>MySQLå®˜æ–¹æ–‡æ¡£ä¸­å…³äºæ­¤æ•°æ®åº“çš„é¡µé¢ä¸º<a title="http://dev.mysql.com/doc/employee/en/employee.html" href="http://dev.mysql.com/doc/employee/en/employee.html" target="_blank" rel="noopener">http://dev.mysql.com/doc/employee/en/employee.html</a>ã€‚é‡Œé¢è¯¦ç»†ä»‹ç»äº†æ­¤æ•°æ®åº“ï¼Œå¹¶æä¾›äº†ä¸‹è½½åœ°å€å’Œå¯¼å…¥æ–¹æ³•ï¼Œå¦‚æœæœ‰å…´è¶£å¯¼å…¥æ­¤æ•°æ®åº“åˆ°è‡ªå·±çš„MySQLå¯ä»¥å‚è€ƒæ–‡ä¸­å†…å®¹ã€‚</p><p></p><p></p><h2><a name="nav-4-2"></a>æœ€å·¦å‰ç¼€åŸç†ä¸ç›¸å…³ä¼˜åŒ–</h2><p></p><p></p><p>é«˜æ•ˆä½¿ç”¨ç´¢å¼•çš„é¦–è¦æ¡ä»¶æ˜¯çŸ¥é“ä»€ä¹ˆæ ·çš„æŸ¥è¯¢ä¼šä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¸ªé—®é¢˜å’ŒB+Treeä¸­çš„â€œæœ€å·¦å‰ç¼€åŸç†â€æœ‰å…³ï¼Œä¸‹é¢é€šè¿‡ä¾‹å­è¯´æ˜æœ€å·¦å‰ç¼€åŸç†ã€‚</p><p></p><p></p><p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹è”åˆç´¢å¼•çš„æ¦‚å¿µã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾ç´¢å¼•åªå¼•ç”¨äº†å•ä¸ªçš„åˆ—ï¼Œå®é™…ä¸Šï¼ŒMySQLä¸­çš„ç´¢å¼•å¯ä»¥ä»¥ä¸€å®šé¡ºåºå¼•ç”¨å¤šä¸ªåˆ—ï¼Œè¿™ç§ç´¢å¼•å«åšè”åˆç´¢å¼•ï¼Œä¸€èˆ¬çš„ï¼Œä¸€ä¸ªè”åˆç´¢å¼•æ˜¯ä¸€ä¸ªæœ‰åºå…ƒç»„&lt;a1, a2, â€¦, an&gt;ï¼Œå…¶ä¸­å„ä¸ªå…ƒç´ å‡ä¸ºæ•°æ®è¡¨çš„ä¸€åˆ—ï¼Œå®é™…ä¸Šè¦ä¸¥æ ¼å®šä¹‰ç´¢å¼•éœ€è¦ç”¨åˆ°å…³ç³»ä»£æ•°ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä¸æƒ³è®¨è®ºå¤ªå¤šå…³ç³»ä»£æ•°çš„è¯é¢˜ï¼Œå› ä¸ºé‚£æ ·ä¼šæ˜¾å¾—å¾ˆæ¯ç‡¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†åšä¸¥æ ¼å®šä¹‰ã€‚å¦å¤–ï¼Œå•åˆ—ç´¢å¼•å¯ä»¥çœ‹æˆè”åˆç´¢å¼•å…ƒç´ æ•°ä¸º1çš„ç‰¹ä¾‹ã€‚</p><p></p><p></p><p>ä»¥employees.titlesè¡¨ä¸ºä¾‹ï¼Œä¸‹é¢å…ˆæŸ¥çœ‹å…¶ä¸Šéƒ½æœ‰å“ªäº›ç´¢å¼•ï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW INDEX FROM employees.titles;<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+<br>| Table  | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Null | Index_type |<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+<br>| titles |          0 | PRIMARY  |            1 | emp_no      | A         |        NULL |      | BTREE      |<br>| titles |          0 | PRIMARY  |            2 | title       | A         |        NULL |      | BTREE      |<br>| titles |          0 | PRIMARY  |            3 | from_date   | A         |      443308 |      | BTREE      |<br>| titles |          1 | emp_no   |            1 | emp_no      | A         |      443308 |      | BTREE      |<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+</pre></p><p></p><p>ä»ç»“æœä¸­å¯ä»¥åˆ°titlesè¡¨çš„ä¸»ç´¢å¼•ä¸º&lt;emp_no, title, from_date&gt;ï¼Œè¿˜æœ‰ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no&gt;ã€‚ä¸ºäº†é¿å…å¤šä¸ªç´¢å¼•ä½¿äº‹æƒ…å˜å¤æ‚ï¼ˆMySQLçš„SQLä¼˜åŒ–å™¨åœ¨å¤šç´¢å¼•æ—¶è¡Œä¸ºæ¯”è¾ƒå¤æ‚ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¾…åŠ©ç´¢å¼•dropæ‰ï¼š</p><p></p><p><pre class="prettyprint linenums">ALTER TABLE employees.titles DROP INDEX emp_no;</pre></p><p></p><p>è¿™æ ·å°±å¯ä»¥ä¸“å¿ƒåˆ†æç´¢å¼•PRIMARYçš„è¡Œä¸ºäº†ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸€ï¼šå…¨åˆ—åŒ¹é…ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™ AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref               | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | const | PRIMARY       | PRIMARY | 59      | const,const,const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>å¾ˆæ˜æ˜¾ï¼Œå½“æŒ‰ç…§ç´¢å¼•ä¸­æ‰€æœ‰åˆ—è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ˆè¿™é‡Œç²¾ç¡®åŒ¹é…æŒ‡â€œ=â€æˆ–â€œINâ€åŒ¹é…ï¼‰æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç†è®ºä¸Šç´¢å¼•å¯¹é¡ºåºæ˜¯æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äºMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´whereå­å¥çš„æ¡ä»¶é¡ºåºä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ï¼Œä¾‹å¦‚æˆ‘ä»¬å°†whereä¸­çš„æ¡ä»¶é¡ºåºé¢ å€’ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™ AND emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref               | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | const | PRIMARY       | PRIMARY | 59      | const,const,const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><p></p><p></p><h3>æƒ…å†µäºŒï¼šæœ€å·¦å‰ç¼€åŒ¹é…ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>å½“æŸ¥è¯¢æ¡ä»¶ç²¾ç¡®åŒ¹é…ç´¢å¼•çš„å·¦è¾¹è¿ç»­ä¸€ä¸ªæˆ–å‡ ä¸ªåˆ—æ—¶ï¼Œå¦‚&lt;emp_no&gt;æˆ–&lt;emp_no, title&gt;ï¼Œæ‰€ä»¥å¯ä»¥è¢«ç”¨åˆ°ï¼Œä½†æ˜¯åªèƒ½ç”¨åˆ°ä¸€éƒ¨åˆ†ï¼Œå³æ¡ä»¶æ‰€ç»„æˆçš„æœ€å·¦å‰ç¼€ã€‚ä¸Šé¢çš„æŸ¥è¯¢ä»åˆ†æç»“æœçœ‹ç”¨åˆ°äº†PRIMARYç´¢å¼•ï¼Œä½†æ˜¯key_lenä¸º4ï¼Œè¯´æ˜åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—å‰ç¼€ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸‰ï¼šæŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†ç´¢å¼•ä¸­åˆ—çš„ç²¾ç¡®åŒ¹é…ï¼Œä½†æ˜¯ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>æ­¤æ—¶ç´¢å¼•ä½¿ç”¨æƒ…å†µå’Œæƒ…å†µäºŒç›¸åŒï¼Œå› ä¸ºtitleæœªæä¾›ï¼Œæ‰€ä»¥æŸ¥è¯¢åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œè€Œåé¢çš„from_dateè™½ç„¶ä¹Ÿåœ¨ç´¢å¼•ä¸­ï¼Œä½†æ˜¯ç”±äºtitleä¸å­˜åœ¨è€Œæ— æ³•å’Œå·¦å‰ç¼€è¿æ¥ï¼Œå› æ­¤éœ€è¦å¯¹ç»“æœè¿›è¡Œæ‰«æè¿‡æ»¤from_dateï¼ˆè¿™é‡Œç”±äºemp_noå”¯ä¸€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ‰«æï¼‰ã€‚å¦‚æœæƒ³è®©from_dateä¹Ÿä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯whereè¿‡æ»¤ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no, from_date&gt;ï¼Œæ­¤æ—¶ä¸Šé¢çš„æŸ¥è¯¢ä¼šä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸ºâ€œéš”ç¦»åˆ—â€çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå°†emp_noä¸from_dateä¹‹é—´çš„â€œå‘â€å¡«ä¸Šã€‚</p><p></p><p></p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹titleä¸€å…±æœ‰å‡ ç§ä¸åŒçš„å€¼ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT DISTINCT(title) FROM employees.titles;<br>+â€”â€”â€”â€”â€”â€”â€“+<br>| title              |<br>+â€”â€”â€”â€”â€”â€”â€“+<br>| Senior Engineer    |<br>| Staff              |<br>| Engineer           |<br>| Senior Staff       |<br>| Assistant Engineer |<br>| Technique Leader   |<br>| Manager            |<br>+â€”â€”â€”â€”â€”â€”â€“+</pre></p><p></p><p>åªæœ‰7ç§ã€‚åœ¨è¿™ç§æˆä¸ºâ€œå‘â€çš„åˆ—å€¼æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ç”¨â€œINâ€æ¥å¡«è¡¥è¿™ä¸ªâ€œå‘â€ä»è€Œå½¢æˆæœ€å·¦å‰ç¼€ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no=â€™10001â€™<br>AND title IN (â€˜Senior Engineerâ€™, â€˜Staffâ€™, â€˜Engineerâ€™, â€˜Senior Staffâ€™, â€˜Assistant Engineerâ€™, â€˜Technique Leaderâ€™, â€˜Managerâ€™)<br>AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 59      | NULL |    7 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>è¿™æ¬¡key_lenä¸º59ï¼Œè¯´æ˜ç´¢å¼•è¢«ç”¨å…¨äº†ï¼Œä½†æ˜¯ä»typeå’Œrowsçœ‹å‡ºINå®é™…ä¸Šæ‰§è¡Œäº†ä¸€ä¸ªrangeæŸ¥è¯¢ï¼Œè¿™é‡Œæ£€æŸ¥äº†7ä¸ªkeyã€‚çœ‹ä¸‹ä¸¤ç§æŸ¥è¯¢çš„æ€§èƒ½æ¯”è¾ƒï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW PROFILES;<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Query_ID | Duration   | Query                                                                         |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|       10 | 0.00058000 | SELECT <em> FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™|<br>|       11 | 0.00052500 | SELECT </em> FROM employees.titles WHERE emp_no=â€™10001â€™ AND title IN â€¦          |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+</pre></p><p></p><p>â€œå¡«å‘â€åæ€§èƒ½æå‡äº†ä¸€ç‚¹ã€‚å¦‚æœç»è¿‡emp_noç­›é€‰åä½™ä¸‹å¾ˆå¤šæ•°æ®ï¼Œåˆ™åè€…æ€§èƒ½ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚å½“ç„¶ï¼Œå¦‚æœtitleçš„å€¼å¾ˆå¤šï¼Œç”¨å¡«å‘å°±ä¸åˆé€‚äº†ï¼Œå¿…é¡»å»ºç«‹è¾…åŠ©ç´¢å¼•ã€‚</p><p></p><p></p><h3>æƒ…å†µå››ï¼šæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‡å®šç´¢å¼•ç¬¬ä¸€åˆ—ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ALL  | NULL          | NULL | NULL    | NULL | 443308 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>ç”±äºä¸æ˜¯æœ€å·¦å‰ç¼€ï¼Œç´¢å¼•è¿™æ ·çš„æŸ¥è¯¢æ˜¾ç„¶ç”¨ä¸åˆ°ç´¢å¼•ã€‚</p><p></p><p></p><h3>æƒ…å†µäº”ï¼šåŒ¹é…æŸåˆ—çš„å‰ç¼€å­—ç¬¦ä¸²ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title LIKE â€˜Senior%â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 56      | NULL |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>æ­¤æ—¶å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œ<strike>ä½†æ˜¯å¦‚æœé€šé…ç¬¦ä¸æ˜¯åªå‡ºç°åœ¨æœ«å°¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</strike>ï¼ˆåŸæ–‡è¡¨è¿°æœ‰è¯¯ï¼Œå¦‚æœé€šé…ç¬¦%ä¸å‡ºç°åœ¨å¼€å¤´ï¼Œåˆ™å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ ¹æ®å…·ä½“æƒ…å†µä¸åŒå¯èƒ½åªä¼šç”¨å…¶ä¸­ä¸€ä¸ªå‰ç¼€ï¼‰</p><p></p><p></p><h3>æƒ…å†µå…­ï¼šèŒƒå›´æŸ¥è¯¢ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no &lt; â€˜10010â€™ and title=â€™Senior Engineerâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 4       | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆå¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚åŒæ—¶ï¼Œç´¢å¼•æœ€å¤šç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå› æ­¤å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•ã€‚</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no &lt; â€˜10010â€™<br>AND title=â€™Senior Engineerâ€™<br>AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 4       | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>å¯ä»¥çœ‹åˆ°ç´¢å¼•å¯¹ç¬¬äºŒä¸ªèŒƒå›´ç´¢å¼•æ— èƒ½ä¸ºåŠ›ã€‚è¿™é‡Œç‰¹åˆ«è¦è¯´æ˜MySQLä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä»…ç”¨explainå¯èƒ½æ— æ³•åŒºåˆ†èŒƒå›´ç´¢å¼•å’Œå¤šå€¼åŒ¹é…ï¼Œå› ä¸ºåœ¨typeä¸­è¿™ä¸¤è€…éƒ½æ˜¾ç¤ºä¸ºrangeã€‚åŒæ—¶ï¼Œç”¨äº†â€œbetweenâ€å¹¶ä¸æ„å‘³ç€å°±æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no BETWEEN â€˜10001â€™ AND â€˜10010â€™<br>AND title=â€™Senior Engineerâ€™<br>AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 59      | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>çœ‹èµ·æ¥æ˜¯ç”¨äº†ä¸¤ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œä½†ä½œç”¨äºemp_noä¸Šçš„â€œBETWEENâ€å®é™…ä¸Šç›¸å½“äºâ€œINâ€ï¼Œä¹Ÿå°±æ˜¯è¯´emp_noå®é™…æ˜¯å¤šå€¼ç²¾ç¡®åŒ¹é…ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŸ¥è¯¢ç”¨åˆ°äº†ç´¢å¼•å…¨éƒ¨ä¸‰ä¸ªåˆ—ã€‚å› æ­¤åœ¨MySQLä¸­è¦è°¨æ…åœ°åŒºåˆ†å¤šå€¼åŒ¹é…å’ŒèŒƒå›´åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¹MySQLçš„è¡Œä¸ºäº§ç”Ÿå›°æƒ‘ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸ƒï¼šæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ã€‚</h3><p></p><p></p><p>å¾ˆä¸å¹¸ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œåˆ™MySQLä¸ä¼šä¸ºè¿™åˆ—ä½¿ç”¨ç´¢å¼•ï¼ˆè™½ç„¶æŸäº›åœ¨æ•°å­¦æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨ï¼‰ã€‚ä¾‹å¦‚ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND left(title, 6)=â€™Seniorâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>è™½ç„¶è¿™ä¸ªæŸ¥è¯¢å’Œæƒ…å†µäº”ä¸­åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ç”±äºä½¿ç”¨äº†å‡½æ•°leftï¼Œåˆ™æ— æ³•ä¸ºtitleåˆ—åº”ç”¨ç´¢å¼•ï¼Œè€Œæƒ…å†µäº”ä¸­ç”¨LIKEåˆ™å¯ä»¥ã€‚å†å¦‚ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no - 1=â€™10000â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ALL  | NULL          | NULL | NULL    | NULL | 443308 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>æ˜¾ç„¶è¿™ä¸ªæŸ¥è¯¢ç­‰ä»·äºæŸ¥è¯¢emp_noä¸º10001çš„å‡½æ•°ï¼Œä½†æ˜¯ç”±äºæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒMySQLæ— æ³•ä¸ºå…¶ä½¿ç”¨ç´¢å¼•ã€‚çœ‹æ¥MySQLè¿˜æ²¡æœ‰æ™ºèƒ½åˆ°è‡ªåŠ¨ä¼˜åŒ–å¸¸é‡è¡¨è¾¾å¼çš„ç¨‹åº¦ï¼Œå› æ­¤åœ¨å†™æŸ¥è¯¢è¯­å¥æ—¶å°½é‡é¿å…è¡¨è¾¾å¼å‡ºç°åœ¨æŸ¥è¯¢ä¸­ï¼Œè€Œæ˜¯å…ˆæ‰‹å·¥ç§ä¸‹ä»£æ•°è¿ç®—ï¼Œè½¬æ¢ä¸ºæ— è¡¨è¾¾å¼çš„æŸ¥è¯¢è¯­å¥ã€‚</p><p></p><p></p><h2><a name="nav-4-3"></a>ç´¢å¼•é€‰æ‹©æ€§ä¸å‰ç¼€ç´¢å¼•</h2><p></p><p></p><p>æ—¢ç„¶ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯åªè¦æ˜¯æŸ¥è¯¢è¯­å¥éœ€è¦ï¼Œå°±å»ºä¸Šç´¢å¼•ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å› ä¸ºç´¢å¼•è™½ç„¶åŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ç´¢å¼•ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼šç´¢å¼•æ–‡ä»¶æœ¬èº«è¦æ¶ˆè€—å­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶ç´¢å¼•ä¼šåŠ é‡æ’å…¥ã€åˆ é™¤å’Œä¿®æ”¹è®°å½•æ—¶çš„è´Ÿæ‹…ï¼Œå¦å¤–ï¼ŒMySQLåœ¨è¿è¡Œæ—¶ä¹Ÿè¦æ¶ˆè€—èµ„æºç»´æŠ¤ç´¢å¼•ï¼Œå› æ­¤ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä¸€èˆ¬ä¸¤ç§æƒ…å†µä¸‹ä¸å»ºè®®å»ºç´¢å¼•ã€‚</p><p></p><p></p><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯è¡¨è®°å½•æ¯”è¾ƒå°‘ï¼Œä¾‹å¦‚ä¸€ä¸¤åƒæ¡ç”šè‡³åªæœ‰å‡ ç™¾æ¡è®°å½•çš„è¡¨ï¼Œæ²¡å¿…è¦å»ºç´¢å¼•ï¼Œè®©æŸ¥è¯¢åšå…¨è¡¨æ‰«æå°±å¥½äº†ã€‚è‡³äºå¤šå°‘æ¡è®°å½•æ‰ç®—å¤šï¼Œè¿™ä¸ªä¸ªäººæœ‰ä¸ªäººçš„çœ‹æ³•ï¼Œæˆ‘ä¸ªäººçš„ç»éªŒæ˜¯ä»¥2000ä½œä¸ºåˆ†ç•Œçº¿ï¼Œè®°å½•æ•°ä¸è¶…è¿‡ 2000å¯ä»¥è€ƒè™‘ä¸å»ºç´¢å¼•ï¼Œè¶…è¿‡2000æ¡å¯ä»¥é…Œæƒ…è€ƒè™‘ç´¢å¼•ã€‚</p><p></p><p></p><p>å¦ä¸€ç§ä¸å»ºè®®å»ºç´¢å¼•çš„æƒ…å†µæ˜¯ç´¢å¼•çš„é€‰æ‹©æ€§è¾ƒä½ã€‚æ‰€è°“ç´¢å¼•çš„é€‰æ‹©æ€§ï¼ˆSelectivityï¼‰ï¼Œæ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆä¹Ÿå«åŸºæ•°ï¼ŒCardinalityï¼‰ä¸è¡¨è®°å½•æ•°ï¼ˆ#Tï¼‰çš„æ¯”å€¼ï¼š</p><p></p><p></p><p>Index Selectivity = Cardinality / #T</p><p></p><p></p><p>æ˜¾ç„¶é€‰æ‹©æ€§çš„å–å€¼èŒƒå›´ä¸º(0, 1]ï¼Œé€‰æ‹©æ€§è¶Šé«˜çš„ç´¢å¼•ä»·å€¼è¶Šå¤§ï¼Œè¿™æ˜¯ç”±B+Treeçš„æ€§è´¨å†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œä¸Šæ–‡ç”¨åˆ°çš„employees.titlesè¡¨ï¼Œå¦‚æœtitleå­—æ®µç»å¸¸è¢«å•ç‹¬æŸ¥è¯¢ï¼Œæ˜¯å¦éœ€è¦å»ºç´¢å¼•ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(title))/count(*) AS Selectivity FROM employees.titles;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.0000 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>titleçš„é€‰æ‹©æ€§ä¸è¶³0.0001ï¼ˆç²¾ç¡®å€¼ä¸º0.00001579ï¼‰ï¼Œæ‰€ä»¥å®åœ¨æ²¡æœ‰ä»€ä¹ˆå¿…è¦ä¸ºå…¶å•ç‹¬å»ºç´¢å¼•ã€‚</p><p></p><p></p><p>æœ‰ä¸€ç§ä¸ç´¢å¼•é€‰æ‹©æ€§æœ‰å…³çš„ç´¢å¼•ä¼˜åŒ–ç­–ç•¥å«åšå‰ç¼€ç´¢å¼•ï¼Œå°±æ˜¯ç”¨åˆ—çš„å‰ç¼€ä»£æ›¿æ•´ä¸ªåˆ—ä½œä¸ºç´¢å¼•keyï¼Œå½“å‰ç¼€é•¿åº¦åˆé€‚æ—¶ï¼Œå¯ä»¥åšåˆ°æ—¢ä½¿å¾—å‰ç¼€ç´¢å¼•çš„é€‰æ‹©æ€§æ¥è¿‘å…¨åˆ—ç´¢å¼•ï¼ŒåŒæ—¶å› ä¸ºç´¢å¼•keyå˜çŸ­è€Œå‡å°‘äº†ç´¢å¼•æ–‡ä»¶çš„å¤§å°å’Œç»´æŠ¤å¼€é”€ã€‚ä¸‹é¢ä»¥employees.employeesè¡¨ä¸ºä¾‹ä»‹ç»å‰ç¼€ç´¢å¼•çš„é€‰æ‹©å’Œä½¿ç”¨ã€‚</p><p></p><p></p><p>ä»å›¾12å¯ä»¥çœ‹åˆ°employeesè¡¨åªæœ‰ä¸€ä¸ªç´¢å¼•&lt;emp_no&gt;ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³æŒ‰åå­—æœç´¢ä¸€ä¸ªäººï¼Œå°±åªèƒ½å…¨è¡¨æ‰«æäº†ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | employees | ALL  | NULL          | NULL | NULL    | NULL | 300024 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>å¦‚æœé¢‘ç¹æŒ‰åå­—æœç´¢å‘˜å·¥ï¼Œè¿™æ ·æ˜¾ç„¶æ•ˆç‡å¾ˆä½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘å»ºç´¢å¼•ã€‚æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå»º&lt;first_name&gt;æˆ–&lt;first_name, last_name&gt;ï¼Œçœ‹ä¸‹ä¸¤ä¸ªç´¢å¼•çš„é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(first_name))/count(<em>) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.0042 |<br>+â€”â€”â€”â€”-+<br>SELECT count(DISTINCT(concat(first_name, last_name)))/count(</em>) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.9313 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>&lt;first_name&gt;æ˜¾ç„¶é€‰æ‹©æ€§å¤ªä½ï¼Œ&lt;first_name, last_name&gt;é€‰æ‹©æ€§å¾ˆå¥½ï¼Œä½†æ˜¯first_nameå’Œlast_nameåŠ èµ·æ¥é•¿åº¦ä¸º30ï¼Œæœ‰æ²¡æœ‰å…¼é¡¾é•¿åº¦å’Œé€‰æ‹©æ€§çš„åŠæ³•ï¼Ÿå¯ä»¥è€ƒè™‘ç”¨first_nameå’Œlast_nameçš„å‰å‡ ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œä¾‹å¦‚&lt;first_name, left(last_name, 3)&gt;ï¼Œçœ‹çœ‹å…¶é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(concat(first_name, left(last_name, 3))))/count(*) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.7879 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>é€‰æ‹©æ€§è¿˜ä¸é”™ï¼Œä½†ç¦»0.9313è¿˜æ˜¯æœ‰ç‚¹è·ç¦»ï¼Œé‚£ä¹ˆæŠŠlast_nameå‰ç¼€åŠ åˆ°4ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(concat(first_name, left(last_name, 4))))/count(*) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.9007 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>è¿™æ—¶é€‰æ‹©æ€§å·²ç»å¾ˆç†æƒ³äº†ï¼Œè€Œè¿™ä¸ªç´¢å¼•çš„é•¿åº¦åªæœ‰18ï¼Œæ¯”&lt;first_name, last_name&gt;çŸ­äº†æ¥è¿‘ä¸€åŠï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‰ç¼€ç´¢å¼• å»ºä¸Šï¼š</p><p></p><p><pre class="prettyprint linenums">ALTER TABLE employees.employees<br>ADD INDEX <code>first_name_last_name4</code> (first_name, last_name(4));</pre></p><p></p><p>æ­¤æ—¶å†æ‰§è¡Œä¸€éæŒ‰åå­—æŸ¥è¯¢ï¼Œæ¯”è¾ƒåˆ†æä¸€ä¸‹ä¸å»ºç´¢å¼•å‰çš„ç»“æœï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW PROFILES;<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Query_ID | Duration   | Query                                                                           |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>|       87 | 0.11941700 | SELECT <em> FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ |<br>|       90 | 0.00092400 | SELECT </em> FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</pre></p><p></p><p>æ€§èƒ½çš„æå‡æ˜¯æ˜¾è‘—çš„ï¼ŒæŸ¥è¯¢é€Ÿåº¦æé«˜äº†120å¤šå€ã€‚</p><p></p><p></p><p>å‰ç¼€ç´¢å¼•å…¼é¡¾ç´¢å¼•å¤§å°å’ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹æ˜¯ä¸èƒ½ç”¨äºORDER BYå’ŒGROUP BYæ“ä½œï¼Œä¹Ÿä¸èƒ½ç”¨äºCovering indexï¼ˆå³å½“ç´¢å¼•æœ¬èº«åŒ…å«æŸ¥è¯¢æ‰€éœ€å…¨éƒ¨æ•°æ®æ—¶ï¼Œä¸å†è®¿é—®æ•°æ®æ–‡ä»¶æœ¬èº«ï¼‰ã€‚</p><p></p><p></p><h2><a name="nav-4-4"></a>InnoDBçš„ä¸»é”®é€‰æ‹©ä¸æ’å…¥ä¼˜åŒ–</h2><p></p><p></p><p>åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œè¯·æ°¸è¿œä½¿ç”¨ä¸€ä¸ªä¸ä¸šåŠ¡æ— å…³çš„è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ã€‚</p><p></p><p></p><p>ç»å¸¸çœ‹åˆ°æœ‰å¸–å­æˆ–åšå®¢è®¨è®ºä¸»é”®é€‰æ‹©é—®é¢˜ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸šåŠ¡æ— å…³çš„è‡ªå¢ä¸»é”®ï¼Œæœ‰äººè§‰å¾—æ²¡æœ‰å¿…è¦ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨å¦‚å­¦å·æˆ–èº«ä»½è¯å·è¿™ç§å”¯ä¸€å­—æ®µä½œä¸ºä¸»é”®ã€‚ä¸è®ºæ”¯æŒå“ªç§è®ºç‚¹ï¼Œå¤§å¤šæ•°è®ºæ®éƒ½æ˜¯ä¸šåŠ¡å±‚é¢çš„ã€‚å¦‚æœä»æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–è§’åº¦çœ‹ï¼Œä½¿ç”¨InnoDBå¼•æ“è€Œä¸ä½¿ç”¨è‡ªå¢ä¸»é”®ç»å¯¹æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä¸»æ„ã€‚</p><p></p><p></p><p>ä¸Šæ–‡è®¨è®ºè¿‡InnoDBçš„ç´¢å¼•å®ç°ï¼ŒInnoDBä½¿ç”¨èšé›†ç´¢å¼•ï¼Œæ•°æ®è®°å½•æœ¬èº«è¢«å­˜äºä¸»ç´¢å¼•ï¼ˆä¸€é¢—B+Treeï¼‰çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚è¿™å°±è¦æ±‚åŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…ï¼ˆå¤§å°ä¸ºä¸€ä¸ªå†…å­˜é¡µæˆ–ç£ç›˜é¡µï¼‰çš„å„æ¡æ•°æ®è®°å½•æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œå› æ­¤æ¯å½“æœ‰ä¸€æ¡æ–°çš„è®°å½•æ’å…¥æ—¶ï¼ŒMySQLä¼šæ ¹æ®å…¶ä¸»é”®å°†å…¶æ’å…¥é€‚å½“çš„èŠ‚ç‚¹å’Œä½ç½®ï¼Œå¦‚æœé¡µé¢è¾¾åˆ°è£…è½½å› å­ï¼ˆInnoDBé»˜è®¤ä¸º15/16ï¼‰ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µï¼ˆèŠ‚ç‚¹ï¼‰ã€‚</p><p></p><p></p><p>å¦‚æœè¡¨ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/13.png"></p><p></p><p></p><p align="center">å›¾13</p><p></p><p></p><p>è¿™æ ·å°±ä¼šå½¢æˆä¸€ä¸ªç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œè¿‘ä¼¼é¡ºåºå¡«æ»¡ã€‚ç”±äºæ¯æ¬¡æ’å…¥æ—¶ä¹Ÿä¸éœ€è¦ç§»åŠ¨å·²æœ‰æ•°æ®ï¼Œå› æ­¤æ•ˆç‡å¾ˆé«˜ï¼Œä¹Ÿä¸ä¼šå¢åŠ å¾ˆå¤šå¼€é”€åœ¨ç»´æŠ¤ç´¢å¼•ä¸Šã€‚</p><p></p><p></p><p>å¦‚æœä½¿ç”¨éè‡ªå¢ä¸»é”®ï¼ˆå¦‚æœèº«ä»½è¯å·æˆ–å­¦å·ç­‰ï¼‰ï¼Œç”±äºæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°çºªå½•éƒ½è¦è¢«æ’åˆ°ç°æœ‰ç´¢å¼•é¡µå¾—ä¸­é—´æŸä¸ªä½ç½®ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/14.png"></p><p></p><p></p><p align="center">å›¾14</p><p></p><p></p><p>æ­¤æ—¶MySQLä¸å¾—ä¸ä¸ºäº†å°†æ–°è®°å½•æ’åˆ°åˆé€‚ä½ç½®è€Œç§»åŠ¨æ•°æ®ï¼Œç”šè‡³ç›®æ ‡é¡µé¢å¯èƒ½å·²ç»è¢«å›å†™åˆ°ç£ç›˜ä¸Šè€Œä»ç¼“å­˜ä¸­æ¸…æ‰ï¼Œæ­¤æ—¶åˆè¦ä»ç£ç›˜ä¸Šè¯»å›æ¥ï¼Œè¿™å¢åŠ äº†å¾ˆå¤šå¼€é”€ï¼ŒåŒæ—¶é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢ç‰‡ï¼Œå¾—åˆ°äº†ä¸å¤Ÿç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œåç»­ä¸å¾—ä¸é€šè¿‡OPTIMIZE TABLEæ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–å¡«å……é¡µé¢ã€‚</p><p></p><p></p><p>å› æ­¤ï¼Œåªè¦å¯ä»¥ï¼Œè¯·å°½é‡åœ¨InnoDBä¸Šé‡‡ç”¨è‡ªå¢å­—æ®µåšä¸»é”®ã€‚</p><p></p><p></p><h1><a name="nav-5"></a>åè®°</h1><p></p><p></p><p>è¿™ç¯‡æ–‡ç« æ–­æ–­ç»­ç»­å†™äº†åŠä¸ªæœˆï¼Œä¸»è¦å†…å®¹å°±æ˜¯ä¸Šé¢è¿™äº›äº†ã€‚ä¸å¯å¦è®¤ï¼Œè¿™ç¯‡æ–‡ç« åœ¨ä¸€å®šç¨‹åº¦ä¸Šæœ‰çº¸ä¸Šè°ˆå…µä¹‹å«Œï¼Œå› ä¸ºæˆ‘æœ¬äººå¯¹MySQLçš„ä½¿ç”¨å±äºèœé¸Ÿçº§åˆ«ï¼Œæ›´æ²¡æœ‰å¤ªå¤šæ•°æ®åº“è°ƒä¼˜çš„ç»éªŒï¼Œåœ¨è¿™é‡Œå¤§è°ˆæ•°æ®åº“ç´¢å¼•è°ƒä¼˜æœ‰ç‚¹å¤§è¨€ä¸æƒ­ã€‚å°±å½“æ˜¯æˆ‘ä¸ªäººçš„ä¸€ç¯‡å­¦ä¹ ç¬”è®°äº†ã€‚</p><p></p><p></p><p>å…¶å®æ•°æ®åº“ç´¢å¼•è°ƒä¼˜æ˜¯ä¸€é¡¹æŠ€æœ¯æ´»ï¼Œä¸èƒ½ä»…ä»…é ç†è®ºï¼Œå› ä¸ºå®é™…æƒ…å†µåƒå˜ä¸‡åŒ–ï¼Œè€Œä¸”MySQLæœ¬èº«å­˜åœ¨å¾ˆå¤æ‚çš„æœºåˆ¶ï¼Œå¦‚æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥å’Œå„ç§å¼•æ“çš„å®ç°å·®å¼‚ç­‰éƒ½ä¼šä½¿æƒ…å†µå˜å¾—æ›´åŠ å¤æ‚ã€‚ä½†åŒæ—¶è¿™äº›ç†è®ºæ˜¯ç´¢å¼•è°ƒä¼˜çš„åŸºç¡€ï¼Œåªæœ‰åœ¨æ˜ç™½ç†è®ºçš„åŸºç¡€ä¸Šï¼Œæ‰èƒ½å¯¹è°ƒä¼˜ç­–ç•¥è¿›è¡Œåˆç†æ¨æ–­å¹¶äº†è§£å…¶èƒŒåçš„æœºåˆ¶ï¼Œç„¶åç»“åˆå®è·µä¸­ä¸æ–­çš„å®éªŒå’Œæ‘¸ç´¢ï¼Œä»è€ŒçœŸæ­£è¾¾åˆ°é«˜æ•ˆä½¿ç”¨MySQLç´¢å¼•çš„ç›®çš„ã€‚</p><p></p><p></p><p>å¦å¤–ï¼ŒMySQLç´¢å¼•åŠå…¶ä¼˜åŒ–æ¶µç›–èŒƒå›´éå¸¸å¹¿ï¼Œæœ¬æ–‡åªæ˜¯æ¶‰åŠåˆ°å…¶ä¸­ä¸€éƒ¨åˆ†ã€‚å¦‚ä¸æ’åºï¼ˆORDER BYï¼‰ç›¸å…³çš„ç´¢å¼•ä¼˜åŒ–åŠè¦†ç›–ç´¢å¼•ï¼ˆCovering indexï¼‰çš„è¯é¢˜æœ¬æ–‡å¹¶æœªæ¶‰åŠï¼ŒåŒæ—¶é™¤B-Treeç´¢å¼•å¤–MySQLè¿˜æ ¹æ®ä¸åŒå¼•æ“æ”¯æŒçš„å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰ç­‰æœ¬æ–‡ä¹Ÿå¹¶æœªæ¶‰åŠã€‚å¦‚æœæœ‰æœºä¼šï¼Œå¸Œæœ›å†å¯¹æœ¬æ–‡æœªæ¶‰åŠçš„éƒ¨åˆ†è¿›è¡Œè¡¥å……å§ã€‚</p><br><p></p><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç† ä½œè€… å¼ æ´‹ | å‘å¸ƒäº 2011-10-18</a></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡ä»¥MySQLæ•°æ®åº“ä¸ºç ”ç©¶å¯¹è±¡ï¼Œè®¨è®ºä¸æ•°æ®åº“ç´¢å¼•ç›¸å…³çš„ä¸€äº›è¯é¢˜ã€‚ç‰¹åˆ«éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒMySQLæ”¯æŒè¯¸å¤šå­˜å‚¨å¼•æ“ï¼Œè€Œå„ç§å­˜å‚¨å¼•æ“å¯¹ç´¢å¼•çš„æ”¯æŒä¹Ÿå„ä¸ç›¸åŒï¼Œå› æ­¤MySQLæ•°æ®åº“æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œå¦‚BTreeç´¢å¼•ï¼Œå“ˆå¸Œç´¢å¼•ï¼Œå…¨æ–‡ç´¢å¼•ç­‰ç­‰ã€‚ä¸ºäº†é¿å…æ··ä¹±ï¼Œæœ¬æ–‡å°†åªå…³æ³¨äºBTreeç´¢å¼•ï¼Œå› ä¸ºè¿™æ˜¯å¹³å¸¸ä½¿ç”¨MySQLæ—¶ä¸»è¦æ‰“äº¤é“çš„ç´¢å¼•ï¼Œè‡³äºå“ˆå¸Œç´¢å¼•å’Œå…¨æ–‡ç´¢å¼•æœ¬æ–‡æš‚ä¸è®¨è®º
    
    </summary>
    
    
      <category term="MySQL, Index, Database" scheme="http://yoursite.com/tags/MySQL-Index-Database/"/>
    
  </entry>
  
  <entry>
    <title>The Difference between Process and Thread</title>
    <link href="http://yoursite.com/2020/02/05/The-Difference-between-Process-and-Thread/"/>
    <id>http://yoursite.com/2020/02/05/The-Difference-between-Process-and-Thread/</id>
    <published>2020-02-05T08:41:49.000Z</published>
    <updated>2020-02-17T10:19:15.781Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œè¿›ç¨‹æ˜¯æ•´ä¸ªç°ä»£æ“ä½œç³»ç»Ÿçš„æ ¹æœ¬ï¼Œæ“ä½œç³»çµ±æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½æ‰§è¡Œä»»åŠ¡ã€‚éšç€æŠ€æœ¯å‘å±•ï¼Œåœ¨æ‰§è¡Œä¸€äº›ç»†å°ä»»åŠ¡ï¼Œä¸”æœ¬èº«æ— éœ€åˆ†é…å•ç‹¬èµ„æºæ—¶ï¼Œè¿›ç¨‹çš„å®ç°æœºåˆ¶ä¾ç„¶ä¼šç¹ççš„å°†èµ„æºåˆ†å‰²ï¼Œè¿™æ ·é€ æˆæµªè´¹ï¼Œè€Œä¸”è¿˜æ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸“é—¨çš„å¤šä»»åŠ¡æŠ€æœ¯è¢«åˆ›é€ å‡ºæ¥â€”â€”çº¿ç¨‹ã€‚ çº¿ç¨‹çš„ç‰¹ç‚¹å°±æ˜¯åœ¨ä¸éœ€è¦ç‹¬ç«‹èµ„æºçš„æƒ…å†µä¸‹å°±å¯ä»¥è¿è¡Œã€‚å¦‚æ­¤ä¸€æ¥ä¼šæå¤§èŠ‚çœèµ„æºå¼€é”€ï¼Œä»¥åŠå¤„ç†æ—¶é—´ã€‚</p><p>è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸»è¦å·®åˆ«åœ¨äºå®ƒä»¬æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†æ–¹å¼ã€‚è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶å®ƒè¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆç‡è¦å·®ä¸€äº›ã€‚ä½†å¯¹äºä¸€äº›è¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”åˆè¦å…±äº«æŸäº›å˜é‡çš„å¹¶å‘æ“ä½œï¼Œåªèƒ½ç”¨çº¿ç¨‹ï¼Œä¸èƒ½ç”¨è¿›ç¨‹ã€‚</p><p>æˆ‘ä»¬æœ‰å¦‚ä¸‹å¯¹æ¯”å›¾ç‰‡ï¼š</p><table><thead><tr><th>Tables</th><th style="text-align:center">Process   è¿›ç¨‹</th><th style="text-align:right">Threadçº¿ç¨‹</th></tr></thead><tbody><tr><td>å¼•å…¥ç›®çš„</td><td style="text-align:center">å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œæé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡</td><td style="text-align:right">è°ƒé«˜å¹¶å‘æ‰§è¡Œçš„é€Ÿåº¦ï¼Œè¿›ä¸€æ­¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡</td></tr><tr><td>å¹¶å‘æ€§</td><td style="text-align:center">è¾ƒä½</td><td style="text-align:right">è¾ƒé«˜</td></tr><tr><td>åŸºæœ¬å±æ€§ï¼ˆè°ƒåº¦ï¼‰</td><td style="text-align:center">èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹</td><td style="text-align:right">èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯çº¿ç¨‹</td></tr><tr><td>åŸºæœ¬çŠ¶æ€</td><td style="text-align:center">å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾…</td><td style="text-align:right">å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾…</td></tr><tr><td>ç³»ç»Ÿå¼€é”€</td><td style="text-align:center">åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå¤§</td><td style="text-align:right">åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå°</td></tr><tr><td>ç³»ç»Ÿæ“ä½œ</td><td style="text-align:center">åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢</td><td style="text-align:right">åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢</td></tr><tr><td>å­˜åœ¨çŠ¶æ€</td><td style="text-align:center">è¿›ç¨‹æ§åˆ¶å—PCB</td><td style="text-align:right">è¿›ç¨‹æ§åˆ¶å—PCBï¼Œè¿›ç¨‹æ§åˆ¶å—TCB</td></tr></tbody></table><h4 id="ä½†æ˜¯å¯¹äº-Linux-æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº-Linux-è€Œè¨€ï¼š"><a href="#ä½†æ˜¯å¯¹äº-Linux-æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº-Linux-è€Œè¨€ï¼š" class="headerlink" title="ä½†æ˜¯å¯¹äº Linux æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº Linux è€Œè¨€ï¼š"></a>ä½†æ˜¯å¯¹äº Linux æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº Linux è€Œè¨€ï¼š</h4><ul><li>ç³»ç»Ÿå¯åŠ¨åçš„ ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯ initï¼Œå®ƒçš„ PID æ˜¯ 1ã€‚init æ˜¯å”¯ä¸€ä¸€ä¸ªç”±ç³»ç»Ÿå†…æ ¸ç›´æ¥è¿è¡Œçš„è¿›ç¨‹ã€‚</li><li>é™¤äº† init ä¹‹å¤–ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ çˆ¶è¿›ç¨‹ï¼ˆPPID æ ‡è¯†ï¼‰</li><li>æ¯ä¸ªè¿›ç¨‹è¿˜æœ‰å››ä¸ª ä¸ç”¨æˆ·å’Œç»„ç›¸å…³çš„è¯†åˆ«å·<br>1.å®é™…ç”¨æˆ·è¯†åˆ«å· ï¼ˆreal user IDï¼ŒRUIDï¼‰<br>2.å®é™…ç»„è¯†åˆ«å· ï¼ˆreal group IDï¼ŒRGIDï¼‰<br>3.æœ‰æ•ˆç”¨æˆ·è¯†åˆ«å· ï¼ˆeffect user IDï¼ŒEUIDï¼‰<br>4.æœ‰æ•ˆç»„è¯†åˆ«å· ï¼ˆeffect group IDï¼ŒEGID</li></ul><p>######åœ¨ Linux å†…æ ¸ 2.4 ç‰ˆä»¥å‰ï¼Œçº¿ç¨‹çš„å®ç°å’Œç®¡ç†æ–¹å¼å°±æ˜¯å®Œå…¨æŒ‰ç…§è¿›ç¨‹æ–¹å¼å®ç°çš„ã€‚åœ¨ 2.6 ç‰ˆå†…æ ¸ä»¥åæ‰æœ‰äº†å•ç‹¬çš„çº¿ç¨‹å®ç°,ä¸ºäº†å¼¥è¡¥ä¸æ”¯æŒçº¿ç¨‹çš„ç¼ºé™·ï¼ŒLinux å¼•å…¥çº¿ç¨‹ç»„çš„æ¦‚å¿µï¼Œå³è¯¥ç»„ä¸­ç¬¬ä¸€ä¸ªè½»é‡çº§è¿›ç¨‹çš„ PIDï¼Œå®ƒè¢«å­˜å…¥è¿›ç¨‹æè¿°ç¬¦çš„ tgid å­—æ®µä¸­ã€‚<code>getpid()</code>ç³»ç»Ÿè°ƒç”¨è¿”å›å½“å‰è¿›ç¨‹çš„ tgid å€¼è€Œä¸æ˜¯ pid å€¼ï¼Œå› æ­¤ï¼Œä¸€ä¸ªå¤šçº¿ç¨‹åº”ç”¨çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„ PIDã€‚</p><ul><li><code>fork()</code>ç³»ç»Ÿè°ƒç”¨æ˜¯Unixä¸‹ä»¥è‡ªèº«è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä¸€æ¬¡è°ƒç”¨ï¼Œä¸¤æ¬¡è¿”å›ï¼Œå¦‚æœè¿”å›æ˜¯0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹ï¼Œå¦‚æœè¿”å›å€¼&gt;0ï¼Œåˆ™æ˜¯çˆ¶è¿›ç¨‹ï¼ˆè¿”å›å€¼æ˜¯å­è¿›ç¨‹çš„pidï¼‰,å¦‚æœforkå‡ºé”™ï¼Œè¿”å›ä¸€ä¸ªè´Ÿå€¼.</li><li>åœ¨<code>fork()</code>çš„è°ƒç”¨å¤„ï¼Œæ•´ä¸ªçˆ¶è¿›ç¨‹ç©ºé—´ä¼šåŸæ¨¡åŸæ ·åœ°å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ï¼ŒåŒ…æ‹¬æŒ‡ä»¤ï¼Œå˜é‡å€¼ï¼Œç¨‹åºè°ƒç”¨æ ˆï¼Œç¯å¢ƒå˜é‡ï¼Œç¼“å†²åŒºï¼Œç­‰ç­‰ã€‚</li><li><code>fork()</code>å‡½æ•°ä¼šæŠŠå®ƒæ‰€åœ¨è¯­å¥ä»¥åçš„è¯­å¥å¤åˆ¶åˆ°ä¸€ä¸ªå­è¿›ç¨‹é‡Œï¼Œå•ç‹¬æ‰§è¡Œã€‚</li><li><p>å¦‚æœ<code>printf</code>å‡½æ•°æœ€åæ²¡æœ‰<code>&quot;\n&quot;</code>ï¼Œåˆ™è¾“å‡ºç¼“å†²åŒºä¸ä¼šè¢«ç«‹å³æ¸…ç©ºï¼Œè€Œforkå‡½æ•°ä¼šæŠŠè¾“å‡ºç¼“å†²åŒºé‡Œçš„å†…å®¹ä¹Ÿéƒ½å¤åˆ¶åˆ°å­è¿›ç¨‹é‡Œ</p></li><li><p>è¿›ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯çº¿çŠ¶çš„ï¼Œå°½ç®¡ä¸­é—´ä¼šå‘ç”Ÿä¸­æ–­æˆ–æš‚åœï¼Œä½†è¯¥è¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºåªä¸ºè¯¥çº¿çŠ¶æ‰§è¡Œè¿‡ç¨‹æœåŠ¡ã€‚ä¸€æ—¦å‘ç”Ÿè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™äº›èµ„æºéƒ½æ˜¯è¦è¢«ä¿æŠ¤èµ·æ¥çš„ã€‚</p></li><li>çº¿ç¨‹çš„æ”¹å˜åªä»£è¡¨äº† CPU æ‰§è¡Œè¿‡ç¨‹çš„æ”¹å˜ï¼Œè€Œæ²¡æœ‰å‘ç”Ÿè¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºå˜åŒ–ã€‚</li><li>è®¡ç®—æœºå†…çš„è½¯ç¡¬ä»¶èµ„æºçš„åˆ†é…ä¸çº¿ç¨‹æ— å…³ï¼Œçº¿ç¨‹åªèƒ½å…±äº«å®ƒæ‰€å±è¿›ç¨‹çš„èµ„æºã€‚</li><li>è¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸ä¾èµ–äºçº¿ç¨‹è€Œç‹¬ç«‹å­˜åœ¨ï¼›åä¹‹ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ²¡æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä¸è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«åˆ†é…ç»™è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li><li>çº¿ç¨‹ä¸­æ‰§è¡Œæ—¶ä¸€èˆ¬éƒ½è¦è¿›è¡ŒåŒæ­¥å’Œäº’æ–¥ï¼Œå› ä¸ºä»–ä»¬å…±äº«åŒä¸€è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li></ul><p><strong>æ–‡ç« æ¥æº:</strong><br><a href="https://zhuanlan.zhihu.com/p/60558136" target="_blank" rel="noopener">è¿›ç¨‹å’Œçº¿ç¨‹æœ‰å“ªäº›åŒºåˆ«ä¸è”ç³»ï¼ŸåŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>]]></content>
    
    <summary type="html">
    
      è¿›ç¨‹å’Œçº¿ç¨‹æœ‰å“ªäº›åŒºåˆ«ä¸è”ç³»
    
    </summary>
    
    
      <category term="Operation System" scheme="http://yoursite.com/tags/Operation-System/"/>
    
  </entry>
  
  <entry>
    <title>Everything About HashMap</title>
    <link href="http://yoursite.com/2020/02/04/Everything-About-HashMap/"/>
    <id>http://yoursite.com/2020/02/04/Everything-About-HashMap/</id>
    <published>2020-02-04T10:51:33.000Z</published>
    <updated>2020-03-13T17:38:09.142Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ" class="headerlink" title="1.ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ"></a>1.ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ</h2><ul><li>HashMapæ˜¯ä¸€ä¸ªæ•£åˆ—æ¡¶ï¼ˆæ•°ç»„å’Œé“¾è¡¨ï¼‰ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹(key-value)æ˜ å°„ã€‚</li><li>HashMapé‡‡ç”¨äº†æ•°ç»„å’Œé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œèƒ½åœ¨æŸ¥è¯¢å’Œä¿®æ”¹æ–¹ä¾¿ç»§æ‰¿äº†æ•°ç»„çš„çº¿æ€§æŸ¥æ‰¾å’Œé“¾è¡¨çš„å¯»å€ä¿®æ”¹ã€‚æ•°ç»„æ˜¯ç”¨æ¥ç¡®å®šæ¡¶çš„ä½ç½®ï¼Œåˆ©ç”¨å…ƒç´ çš„keyçš„hashå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°. é“¾è¡¨æ˜¯ç”¨æ¥è§£å†³hashå†²çªé—®é¢˜ï¼Œå½“å‡ºç°hashå€¼ä¸€æ ·çš„æƒ…å½¢ï¼Œå°±åœ¨æ•°ç»„ä¸Šçš„å¯¹åº”ä½ç½®å½¢æˆä¸€æ¡é“¾è¡¨ã€‚</li><li>ç”¨LinkedListä»£æ›¿æ•°ç»„ç»“æ„å¯ä»¥ä¹ˆ?</li></ul><p>å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œç¨å¾®è¯´æ˜ä¸€ä¸‹ï¼Œæ­¤é¢˜çš„æ„æ€æ˜¯ï¼Œæºç ä¸­æ˜¯è¿™æ ·çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Entry[] table = <span class="keyword">new</span> Entry[capacity];</span><br><span class="line"></span><br><span class="line">Entryå°±æ˜¯ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ã€‚ é‚£ä¸‹é¢è¿™æ ·è¡¨ç¤ºï¼Œæ˜¯å¦å¯è¡Œ?</span><br><span class="line"></span><br><span class="line">List&lt;Entry&gt; table = <span class="keyword">new</span> LinkedList&lt;Entry&gt;();</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼Œæ˜¯å¯ä»¥çš„ã€‚</p><p>æ—¢ç„¶æ˜¯å¯ä»¥çš„,ä¸ºä»€ä¹ˆHashMapä¸ç”¨LinkedList,è€Œé€‰ç”¨æ•°ç»„?<br>å› ä¸ºç”¨æ•°ç»„æ•ˆç‡æœ€é«˜ï¼åœ¨HashMapä¸­ï¼Œå®šä½æ¡¶çš„ä½ç½®æ˜¯åˆ©ç”¨å…ƒç´ çš„keyçš„å“ˆå¸Œå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²å¾—åˆ°æ¡¶çš„ä½ç½®ã€‚æ˜¾ç„¶æ•°ç»„çš„æŸ¥æ‰¾æ•ˆç‡æ¯”LinkedListå¤§ã€‚</p><ul><li>é‚£ArrayListï¼Œåº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼ŒæŸ¥æ‰¾ä¹Ÿå¿«å•Šï¼Œä¸ºå•¥ä¸ç”¨ArrayList?<br>å› ä¸ºé‡‡ç”¨åŸºæœ¬æ•°ç»„ç»“æ„ï¼Œæ‰©å®¹æœºåˆ¶å¯ä»¥è‡ªå·±å®šä¹‰ï¼ŒHashMapä¸­æ•°ç»„æ‰©å®¹åˆšå¥½æ˜¯2çš„æ¬¡å¹‚ï¼Œåœ¨åšå–æ¨¡è¿ç®—çš„æ•ˆç‡é«˜ã€‚ è€ŒArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯1.5å€æ‰©å®¹ï¼Œé‚£ArrayListä¸ºä»€ä¹ˆæ˜¯1.5å€æ‰©å®¹è¿™å°±ä¸åœ¨æœ¬æ–‡è¯´æ˜äº†ã€‚</li><li>HashMapæ˜¯ésynchronizedï¼Œæ‰€ä»¥HashMapå¾ˆå¿«ã€‚</li><li>HashMapå¯ä»¥æ¥å—nullé”®å’Œå€¼ï¼Œè€ŒHashtableåˆ™ä¸èƒ½ï¼ˆåŸå› å°±æ˜¯<code>equlas()</code>æ–¹æ³•éœ€è¦å¯¹è±¡ï¼Œå› ä¸ºHashMapæ˜¯åå‡ºçš„APIç»è¿‡å¤„ç†æ‰å¯ä»¥ï¼‰</li><li>å½“é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘åï¼Œä»€ä¹ˆæ—¶å€™é€€åŒ–ä¸ºé“¾è¡¨?<br>ä¸º6çš„æ—¶å€™é€€è½¬ä¸ºé“¾è¡¨ã€‚ä¸­é—´æœ‰ä¸ªå·®å€¼7å¯ä»¥é˜²æ­¢é“¾è¡¨å’Œæ ‘ä¹‹é—´é¢‘ç¹çš„è½¬æ¢ã€‚å‡è®¾ä¸€ä¸‹ï¼Œå¦‚æœè®¾è®¡æˆé“¾è¡¨ä¸ªæ•°è¶…è¿‡8åˆ™é“¾è¡¨è½¬æ¢æˆæ ‘ç»“æ„ï¼Œé“¾è¡¨ä¸ªæ•°å°äº8åˆ™æ ‘ç»“æ„è½¬æ¢æˆé“¾è¡¨ï¼Œå¦‚æœä¸€ä¸ªHashMapä¸åœçš„æ’å…¥ã€åˆ é™¤å…ƒç´ ï¼Œé“¾è¡¨ä¸ªæ•°åœ¨8å·¦å³å¾˜å¾Šï¼Œå°±ä¼šé¢‘ç¹çš„å‘ç”Ÿæ ‘è½¬é“¾è¡¨ã€é“¾è¡¨è½¬æ ‘ï¼Œæ•ˆç‡ä¼šå¾ˆä½ã€‚</li></ul><h2 id="2-HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>HashMapæ˜¯åŸºäºhashingçš„åŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­ï¼Œä½¿ç”¨get(key)ä»HashMapä¸­è·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•ï¼Œè®¡ç®—å¹¶è¿”å›çš„hashCodeæ˜¯ç”¨äºæ‰¾åˆ°Mapæ•°ç»„çš„bucketä½ç½®æ¥å‚¨å­˜Node å¯¹è±¡ã€‚è¿™é‡Œå…³é”®ç‚¹åœ¨äºæŒ‡å‡ºï¼ŒHashMapæ˜¯åœ¨bucketä¸­å‚¨å­˜é”®å¯¹è±¡å’Œå€¼å¯¹è±¡ï¼Œä½œä¸ºMap.Nodeã€‚ã€€ã€€</p><ul><li>ä»¥ä¸‹æ˜¯HashMapåˆå§‹åŒ– ï¼Œç®€å•æ¨¡æ‹Ÿæ•°æ®ç»“æ„<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Node[] table=<span class="keyword">new</span> Node[<span class="number">16</span>]  æ•£åˆ—æ¡¶åˆå§‹åŒ–ï¼Œtable</span><br><span class="line"></span><br><span class="line">ã€€ã€€ <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€hash;<span class="comment">//hashå€¼</span></span><br><span class="line"></span><br><span class="line">     key;<span class="comment">//é”®</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€value;<span class="comment">//å€¼</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€node next;<span class="comment">//ç”¨äºæŒ‡å‘é“¾è¡¨çš„ä¸‹ä¸€å±‚ï¼ˆäº§ç”Ÿå†²çªï¼Œç”¨æ‹‰é“¾æ³•ï¼‰</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="putè¿‡ç¨‹ï¼ˆJDK1-8ç‰ˆï¼‰"><a href="#putè¿‡ç¨‹ï¼ˆJDK1-8ç‰ˆï¼‰" class="headerlink" title="putè¿‡ç¨‹ï¼ˆJDK1.8ç‰ˆï¼‰"></a><code>put</code>è¿‡ç¨‹ï¼ˆJDK1.8ç‰ˆï¼‰</h4><ul><li>å¯¹Keyç”¨HashCode()æ±‚Hashå€¼ï¼Œç„¶åå†è®¡ç®—ä¸‹æ ‡</li><li>å¦‚æœæ²¡æœ‰ç¢°æ’ï¼Œç›´æ¥æ”¾å…¥æ¡¶ä¸­ï¼ˆç¢°æ’çš„æ„æ€æ˜¯è®¡ç®—å¾—åˆ°çš„Hashå€¼ç›¸åŒï¼Œéœ€è¦æ”¾åˆ°åŒä¸€ä¸ªbucketä¸­ï¼‰</li><li>å¦‚æœç¢°æ’äº†ï¼Œä»¥é“¾è¡¨çš„æ–¹å¼é“¾æ¥åˆ°åé¢</li><li>å¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡é˜€å€¼( TREEIFY THRESHOLD==8)ï¼Œå°±æŠŠé“¾è¡¨è½¬æˆçº¢é»‘æ ‘ï¼Œé“¾è¡¨é•¿åº¦ä½äº6ï¼Œå°±æŠŠçº¢é»‘æ ‘è½¬å›é“¾è¡¨</li><li>å¦‚æœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢æ—§å€¼</li><li>å¦‚æœæ¡¶æ»¡äº†(å®¹é‡16*åŠ è½½å› å­0.75)ï¼Œå°±éœ€è¦ resizeï¼ˆæ‰©å®¹2å€åé‡æ’ï¼‰</li></ul><p><strong>æ‰©å®¹åï¼Œå…ƒç´ è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®ï¼Œä¸”é“¾è¡¨é¡ºåºä¸å˜ã€‚</strong></p><h4 id="Getè¿‡ç¨‹-è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ"><a href="#Getè¿‡ç¨‹-è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ" class="headerlink" title="Getè¿‡ç¨‹(è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ)"></a><code>Getè¿‡ç¨‹</code>(è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ)</h4><p>å½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•ï¼ŒHashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®ï¼Œæ‰¾åˆ°bucketä½ç½®ä¹‹åï¼Œä¼šè°ƒç”¨keys.equals()æ–¹æ³•å»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡ã€‚</p><p>ã€€ã€€</p><h2 id="3-æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ"><a href="#3-æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ" class="headerlink" title="3.æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ"></a>3.æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ</h2><ul><li>æ‰°åŠ¨å‡½æ•°å¯ä»¥å‡å°‘ç¢°æ’ï¼ŒåŸç†æ˜¯å¦‚æœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±ä¼šå°äº›ï¼Œè¿™å°±æ„å‘³ç€å­˜é“¾è¡¨ç»“æ„å‡å°ï¼Œè¿™æ ·å–å€¼çš„è¯å°±ä¸ä¼šé¢‘ç¹è°ƒç”¨equalæ–¹æ³•ï¼Œè¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½ã€‚ï¼ˆæ‰°åŠ¨å³Hashæ–¹æ³•å†…éƒ¨çš„ç®—æ³•å®ç°ï¼Œç›®çš„æ˜¯è®©ä¸åŒå¯¹è±¡è¿”å›ä¸åŒhashcodeã€‚ï¼‰</li><li>ä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜ä½œfinalçš„å¯¹è±¡ï¼Œå¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯ï¼Œå°†ä¼šå‡å°‘ç¢°æ’çš„å‘ç”Ÿã€‚ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcodeï¼Œè¿™å°†æé«˜æ•´ä¸ªè·å–å¯¹è±¡çš„é€Ÿåº¦ï¼Œä½¿ç”¨Stringï¼ŒIntergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿå› ä¸ºStringæ˜¯finalçš„ï¼Œè€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†ã€‚ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode()ï¼Œå°±è¦é˜²æ­¢é”®å€¼æ”¹å˜ï¼Œå¦‚æœé”®å€¼åœ¨æ”¾å…¥æ—¶å’Œè·å–æ—¶è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»HashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚</li></ul><h2 id="4-HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„"><a href="#4-HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„" class="headerlink" title="4.HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„?"></a>4.HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„?</h2><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨hashmapä¸­è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ ï¼Œéœ€è¦æ ¹æ®keyçš„hashå€¼æ¥æ±‚å¾—å¯¹åº”æ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚ä½•è®¡ç®—è¿™ä¸ªä½ç½®å°±æ˜¯hashç®—æ³•ã€‚å‰é¢è¯´è¿‡hashmapçš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›è¿™ä¸ªhashmapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡çš„åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç”¨hashç®—æ³•æ±‚å¾—è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±å¯ä»¥çŸ¥é“å¯¹åº”ä½ç½®çš„å…ƒç´ å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œè€Œä¸ç”¨å†å»éå†é“¾è¡¨ã€‚ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠhashcodeå¯¹æ•°ç»„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå…ƒç´ çš„åˆ†å¸ƒç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚ä½†æ˜¯ï¼Œâ€œæ¨¡â€è¿ç®—çš„æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œèƒ½ä¸èƒ½æ‰¾ä¸€ç§æ›´å¿«é€Ÿï¼Œæ¶ˆè€—æ›´å°çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹JDK1.8çš„æºç æ˜¯æ€ä¹ˆåšçš„.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">int</span> h;</span><br><span class="line">     h=key.hashCode()ï¼›è¿”å›æ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode</span><br><span class="line">      <span class="comment">// ^ ï¼šæŒ‰ä½å¼‚æˆ–</span></span><br><span class="line">      <span class="comment">// &gt;&gt;&gt;:æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½</span></span><br><span class="line">      <span class="comment">//å…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå³Mapçš„æ•°ç»„éƒ¨åˆ†åˆå§‹åŒ–é•¿åº¦</span></span><br><span class="line">     <span class="keyword">return</span>  (n-<span class="number">1</span>)&amp;(h ^ (h &gt;&gt;&gt; <span class="number">16</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>é«˜16ä½å¼‚æˆ–ä½16ä½ä»¥åï¼Œè¿›è¡Œå–æ¨¡è¿ç®—</strong><br>1.é«˜16bitä¸å˜ï¼Œä½16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–(å¾—åˆ°çš„HashCodeè½¬åŒ–ä¸º32ä½çš„äºŒè¿›åˆ¶ï¼Œå‰16ä½å’Œå16ä½ä½16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–)<br>2.(nÂ·1)&amp;hash=-&gt;å¾—åˆ°ä¸‹æ ‡</p><ul><li>ä¸ºä»€ä¹ˆæ‰©å®¹æ˜¯2çš„æ¬¡å¹‚?</li></ul><p>HashMapä¸ºäº†å­˜å–é«˜æ•ˆï¼Œè¦å°½é‡è¾ƒå°‘ç¢°æ’ï¼Œå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨é•¿åº¦å¤§è‡´ç›¸åŒï¼Œè¿™ä¸ªå®ç°å°±åœ¨æŠŠæ•°æ®å­˜åˆ°å“ªä¸ªé“¾è¡¨ä¸­çš„ç®—æ³•<br>è¿™ä¸ªç®—æ³•å®é™…å°±æ˜¯å–æ¨¡ï¼Œhash%lengthã€‚ ä½†æ˜¯ï¼Œå¤§å®¶éƒ½çŸ¥é“è¿™ç§è¿ç®—ä¸å¦‚ä½ç§»è¿ç®—å¿«ã€‚<br>å› æ­¤ï¼Œæºç ä¸­åšäº†ä¼˜åŒ–hash&amp;(length-1)ã€‚ ä¹Ÿå°±æ˜¯è¯´hash%length==hash&amp;(length-1)</p><h2 id="5-æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ"><a href="#5-æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ" class="headerlink" title="5.æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ"></a>5.æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ</h2><p>ä¹‹æ‰€ä»¥é€‰æ‹©çº¢é»‘æ ‘æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šå˜æˆä¸€æ¡çº¿æ€§ç»“æ„ï¼ˆè¿™å°±è·ŸåŸæ¥ä½¿ç”¨é“¾è¡¨ç»“æ„ä¸€æ ·äº†ï¼Œé€ æˆå¾ˆæ·±çš„é—®é¢˜ï¼‰ï¼Œéå†æŸ¥æ‰¾ä¼šéå¸¸æ…¢ã€‚è€Œçº¢é»‘æ ‘åœ¨æ’å…¥æ–°æ•°æ®åå¯èƒ½éœ€è¦é€šè¿‡å·¦æ—‹ï¼Œå³æ—‹ã€å˜è‰²è¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡ï¼Œå¼•å…¥çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†æŸ¥æ‰¾æ•°æ®å¿«ï¼Œè§£å†³é“¾è¡¨æŸ¥è¯¢æ·±åº¦çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“çº¢é»‘æ ‘å±äºå¹³è¡¡äºŒå‰æ ‘ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒâ€œå¹³è¡¡â€æ˜¯éœ€è¦ä»˜å‡ºä»£ä»·çš„ï¼Œä½†æ˜¯è¯¥ä»£ä»·æ‰€æŸè€—çš„èµ„æºè¦æ¯”éå†çº¿æ€§é“¾è¡¨è¦å°‘ï¼Œæ‰€ä»¥å½“é•¿åº¦å¤§äº8çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨çº¢é»‘æ ‘ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¾ˆçŸ­çš„è¯ï¼Œæ ¹æœ¬ä¸éœ€è¦å¼•å…¥çº¢é»‘æ ‘ï¼Œå¼•å…¥åè€Œä¼šæ…¢ã€‚</p><h2 id="6-å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ"><a href="#6-å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ" class="headerlink" title="6.å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ"></a>6.å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ</h2><ul><li>èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚</li><li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚(ä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹)</li><li><strong>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚</strong></li></ul><h2 id="7-è§£å†³hash-ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ"><a href="#7-è§£å†³hash-ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ" class="headerlink" title="7.è§£å†³hash ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ"></a>7.è§£å†³hash ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ</h2><p><strong>æ¯”è¾ƒå‡ºåçš„æœ‰å››ç§ (1)å¼€æ”¾å®šå€æ³• (2)é“¾åœ°å€æ³• (3)å†å“ˆå¸Œæ³• (4)å…¬å…±æº¢å‡ºåŒºåŸŸæ³•</strong></p><ul><li>å¼€æ”¾å®šå€æ³•<br>å¼€æ”¾å®šå€æ³•å°±æ˜¯ä¸€æ—¦å‘ç”Ÿäº†å†²çªï¼Œå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€ï¼Œåªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°ï¼Œå¹¶å°†è®°å½•å­˜å…¥ã€‚</li><li>é“¾åœ°å€æ³•<br>å°†å“ˆå¸Œè¡¨çš„æ¯ä¸ªå•å…ƒä½œä¸ºé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œæ‰€æœ‰å“ˆå¸Œåœ°å€ä¸ºiçš„å…ƒç´ æ„æˆä¸€ä¸ªåŒä¹‰è¯é“¾è¡¨ã€‚å³å‘ç”Ÿå†²çªæ—¶å°±æŠŠè¯¥å…³é”®å­—é“¾åœ¨ä»¥è¯¥å•å…ƒä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨çš„å°¾éƒ¨ã€‚</li><li>å†å“ˆå¸Œæ³•<br>å½“å“ˆå¸Œåœ°å€å‘ç”Ÿå†²çªç”¨å…¶ä»–çš„å‡½æ•°è®¡ç®—å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°åœ°å€ï¼Œç›´åˆ°å†²çªä¸å†äº§ç”Ÿä¸ºæ­¢ã€‚</li><li>å»ºç«‹å…¬å…±æº¢å‡ºåŒº<br>å°†å“ˆå¸Œè¡¨åˆ†ä¸ºåŸºæœ¬è¡¨å’Œæº¢å‡ºè¡¨ä¸¤éƒ¨åˆ†ï¼Œå‘ç”Ÿå†²çªçš„å…ƒç´ éƒ½æ”¾å…¥æº¢å‡ºè¡¨ä¸­ã€‚</li></ul><p><strong>ä¸‹é¢ç»™ä¸€ä¸ªçº¿æ€§æ¢æŸ¥æ³•çš„ä¾‹å­</strong>ã€€</p><p><strong>é—®é¢˜ï¼šå·²çŸ¥ä¸€ç»„å…³é”®å­—ä¸º(26ï¼Œ36ï¼Œ41ï¼Œ38ï¼Œ44ï¼Œ15ï¼Œ68ï¼Œ12ï¼Œ06ï¼Œ51)ï¼Œç”¨é™¤ä½™æ³•æ„é€ æ•£åˆ—å‡½æ•°ï¼Œç”¨çº¿æ€§æ¢æŸ¥æ³•è§£å†³å†²çªæ„é€ è¿™ç»„å…³é”®å­—çš„æ•£åˆ—è¡¨</strong></p><p> <strong>è§£ç­”ï¼šä¸ºäº†å‡å°‘å†²çªï¼Œé€šå¸¸ä»¤è£…å¡«å› å­Î±ç”±é™¤ä½™æ³•å› å­æ˜¯13çš„æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºçš„ä¸Šè¿°å…³é”®å­—åºåˆ—çš„æ•£åˆ—åœ°å€ä¸º(0ï¼Œ10ï¼Œ2ï¼Œ12ï¼Œ5ï¼Œ2ï¼Œ3ï¼Œ12ï¼Œ6ï¼Œ12)ã€‚</strong></p><ul><li>å‰5ä¸ªå…³é”®å­—æ’å…¥æ—¶ï¼Œå…¶ç›¸åº”çš„åœ°å€å‡ä¸ºå¼€æ”¾åœ°å€ï¼Œæ•…å°†å®ƒä»¬ç›´æ¥æ’å…¥T[0]ï¼ŒT[10)ï¼ŒT[2]ï¼ŒT[12]å’ŒT[5]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬6ä¸ªå…³é”®å­—15æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€2(å³h(15)=15ï¼…13=2)å·²è¢«å…³é”®å­—41(15å’Œ41äº’ä¸ºåŒä¹‰è¯)å ç”¨ã€‚æ•…æ¢æŸ¥h1=(2+1)ï¼…13=3ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œæ‰€ä»¥å°†15æ”¾å…¥T[3]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬7ä¸ªå…³é”®å­—68æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€3å·²è¢«éåŒä¹‰è¯15å…ˆå ç”¨ï¼Œæ•…å°†å…¶æ’å…¥åˆ°T[4]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬8ä¸ªå…³é”®å­—12æ—¶ï¼Œæ•£åˆ—åœ°å€12å·²è¢«åŒä¹‰è¯38å ç”¨ï¼Œæ•…æ¢æŸ¥hl=(12+1)ï¼…13=0ï¼Œè€ŒT[0]äº¦è¢«26å ç”¨ï¼Œå†æ¢æŸ¥h2=(12+2)ï¼…13=1ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œå¯å°†12æ’å…¥å…¶ä¸­ã€‚</li><li>ç±»ä¼¼åœ°ï¼Œç¬¬9ä¸ªå…³é”®å­—06ç›´æ¥æ’å…¥T[6]ä¸­ï¼›è€Œæœ€åä¸€ä¸ªå…³é”®å­—51æ’äººæ—¶ï¼Œå› æ¢æŸ¥çš„åœ°å€12ï¼Œ0ï¼Œ1ï¼Œâ€¦ï¼Œ6å‡éç©ºï¼Œæ•…51æ’å…¥T[7]ä¸­ã€‚</li></ul><h2 id="8-å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­-load-factor-å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#8-å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­-load-factor-å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="8.å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>8.å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ</h2><p>ã€€ã€€é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™ï¼Œå’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·ï¼Œå°†ä¼šåˆ›å»ºåŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„ï¼Œæ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°ï¼Œå¹¶å°†åŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashingï¼Œå› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®ã€‚è¿™ä¸ªå€¼åªå¯èƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯åŸä¸‹æ ‡çš„ä½ç½®ï¼Œå¦ä¸€ç§æ˜¯åœ¨ä¸‹æ ‡ä¸º <strong>&lt;åŸä¸‹æ ‡+åŸå®¹é‡&gt;</strong> çš„ä½ç½®ã€€ã€€</p><h2 id="9-é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ"><a href="#9-é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ" class="headerlink" title="9.é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ"></a>9.é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</h2><ul><li>å½“æ‰©å®¹é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™ï¼Œç¡®å®å­˜åœ¨æ¡ä»¶ç«äº‰ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘ç°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†ï¼Œå®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°ã€‚åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥ï¼Œå› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™ï¼ŒHashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éå†(tail traversing)ã€‚å› ä¸ºç›´æ¥æ’å…¥çš„æ•ˆç‡æ›´é«˜ã€‚å¦‚æœæ¡ä»¶ç«äº‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå°±æ­»å¾ªç¯äº†ã€‚(å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä¸ä½¿ç”¨HashMapï¼‰ã€‚</li><li>ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¯¼è‡´æ­»å¾ªç¯ï¼Œå®ƒæ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ<br>HashMapçš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚å½“ç»è¿‡å¤šæ¬¡å…ƒç´ æ’å…¥ï¼Œä½¿å¾—HashMapè¾¾åˆ°ä¸€å®šé¥±å’Œåº¦æ—¶ï¼ŒKeyæ˜ å°„ä½ç½®å‘ç”Ÿå†²çªçš„å‡ ç‡ä¼šé€æ¸æé«˜ã€‚è¿™æ—¶å€™ï¼ŒHashMapéœ€è¦æ‰©å±•å®ƒçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¿›è¡ŒResizeã€‚1.æ‰©å®¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Entryç©ºæ•°ç»„ï¼Œé•¿åº¦æ˜¯åŸæ•°ç»„çš„2å€ã€‚2.ReHashï¼šéå†åŸEntryæ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„Entryé‡æ–°Hashåˆ°æ–°æ•°ç»„ã€‚</li></ul><blockquote><p> <strong>HashMap æ‰©å®¹çš„æ—¶å€™ä¼šè°ƒç”¨ resize() æ–¹æ³•ï¼Œå°±æ˜¯è¿™é‡Œçš„å¹¶å‘æ“ä½œå®¹æ˜“åœ¨ä¸€ä¸ªæ¡¶ä¸Šå½¢æˆç¯å½¢é“¾è¡¨ï¼›è¿™æ ·å½“è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„ key æ—¶ï¼Œè®¡ç®—å‡ºçš„ index æ­£å¥½æ˜¯ç¯å½¢é“¾è¡¨çš„ä¸‹æ ‡å°±ä¼šå‡ºç°æ­»å¾ªç¯ã€‚</strong></p></blockquote><blockquote><p>åœ¨HashMap1.7ä¹‹å‰æ˜¯å¤´æ’æ³•ï¼Œåœ¨æ‰©å®¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆä¸€ä¸ªresize()çš„æ–¹æ³•ï¼Œç„¶åè°ƒç”¨transfer()æ–¹æ³•ï¼ŒæŠŠé‡Œé¢çš„Entryè¿›è¡Œäº†Rehashï¼Œåœ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆé“¾è¡¨çš„å¾ªç¯ï¼Œåœ¨ä¸€ä¸‹æ¬¡Get()ä¸­å‡ºç°æ­»å¾ªç¯ï¼Œæˆ–è€…å‡ºç°æ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥æ•°æ®ä¸å®‰å…¨</p></blockquote><h2 id="10-HashTable"><a href="#10-HashTable" class="headerlink" title="10.HashTable"></a>10.HashTable</h2><p>æ•°ç»„ + é“¾è¡¨æ–¹å¼å­˜å‚¨<br>é»˜è®¤å®¹é‡ï¼š 11(è´¨æ•°ä¸ºå®œ)</p><h4 id="Put"><a href="#Put" class="headerlink" title="Put:"></a><code>Put:</code></h4><ul><li>å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æœæ²¡ç¢°æ’ç›´æ¥æ”¾åˆ°bucketé‡Œï¼› å¦‚æœç¢°æ’äº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåï¼› å¦‚æœç¢°æ’å¯¼è‡´é“¾è¡¨è¿‡é•¿(å¤§äºç­‰äºTREEIFY_THRESHOLD)ï¼Œå°±æŠŠé“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘(JDK1.8ä¸­çš„æ”¹åŠ¨)ï¼› å¦‚æœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯ä¸€æ€§) å¦‚æœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resizeã€‚</li><li>ç´¢å¼•è®¡ç®— : ï¼ˆkey.hashCode() &amp; 0x7FFFFFFFï¼‰% table.length</li><li>è‹¥åœ¨é“¾è¡¨ä¸­æ‰¾åˆ°äº†ï¼Œåˆ™æ›¿æ¢æ—§å€¼ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™ç»§ç»­</li><li>å½“æ€»å…ƒç´ ä¸ªæ•°è¶…è¿‡å®¹é‡*åŠ è½½å› å­æ—¶ï¼Œæ‰©å®¹ä¸ºåŸæ¥ 2 å€å¹¶é‡æ–°æ•£åˆ—ã€‚</li><li><strong>å°†æ–°å…ƒç´ åŠ åˆ°é“¾è¡¨å¤´éƒ¨,å¯¹ä¿®æ”¹ Hashtable å†…éƒ¨å…±äº«æ•°æ®çš„æ–¹æ³•æ·»åŠ äº† synchronizedï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</strong>ã€‚<h4 id="Get"><a href="#Get" class="headerlink" title="Get:"></a><code>Get:</code></h4>å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æœåœ¨bucketé‡Œçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹é‡Œç›´æ¥å‘½ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›ï¼› å¦‚æœæœ‰å†²çªï¼Œåˆ™é€šè¿‡key.equals(k)å»æŸ¥æ‰¾å¯¹åº”çš„Entry;<br>â€¢ è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(logn)ï¼›<br>â€¢ è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(n)ã€‚</li></ul><h2 id="11-HashMap-ï¼ŒHashTable-åŒºåˆ«"><a href="#11-HashMap-ï¼ŒHashTable-åŒºåˆ«" class="headerlink" title="11.HashMap ï¼ŒHashTable åŒºåˆ«"></a>11.HashMap ï¼ŒHashTable åŒºåˆ«</h2><ul><li>é»˜è®¤å®¹é‡ä¸åŒã€‚æ‰©å®¹ä¸åŒ</li><li>çº¿ç¨‹å®‰å…¨æ€§ï¼ŒHashTable å®‰å…¨  </li><li>æ•ˆç‡ä¸åŒ HashTable è¦æ…¢å› ä¸ºåŠ é”</li></ul><h2 id="12-å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ"><a href="#12-å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ" class="headerlink" title="12.å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ"></a>12.å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ</h2><p>æˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„ï¼Œä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚ConcurrentHashMapå½“ç„¶å¯ä»¥ä»£æ›¿HashTableï¼Œä½†æ˜¯HashTableæä¾›æ›´å¼ºçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚å®ƒä»¬éƒ½å¯ä»¥ç”¨äºå¤šçº¿ç¨‹çš„ç¯å¢ƒï¼Œä½†æ˜¯å½“Hashtableçš„å¤§å°å¢åŠ åˆ°ä¸€å®šçš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œå› ä¸ºè¿­ä»£æ—¶éœ€è¦è¢«é”å®šå¾ˆé•¿çš„æ—¶é—´ã€‚å› ä¸ºConcurrentHashMapå¼•å…¥äº†åˆ†å‰²(segmentation)ï¼Œä¸è®ºå®ƒå˜å¾—å¤šä¹ˆå¤§ï¼Œä»…ä»…éœ€è¦é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€Œå…¶å®ƒçš„çº¿ç¨‹ä¸éœ€è¦ç­‰åˆ°è¿­ä»£å®Œæˆæ‰èƒ½è®¿é—®mapã€‚ç®€è€Œè¨€ä¹‹ï¼Œåœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒConcurrentHashMapä»…ä»…é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€ŒHashtableåˆ™ä¼šé”å®šæ•´ä¸ªmapã€‚</p><h2 id="13-CocurrentHashMapï¼ˆ1-8ï¼‰"><a href="#13-CocurrentHashMapï¼ˆ1-8ï¼‰" class="headerlink" title="13.CocurrentHashMapï¼ˆ1.8ï¼‰"></a>13.CocurrentHashMapï¼ˆ1.8ï¼‰</h2><ul><li>å…¶ä¸­æŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº†<code>CAS + synchronized</code>æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚</li><li>å…¶ä¸­çš„ val next éƒ½ç”¨äº† <code>volatile</code>ä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§</li><li>æœ€å¤§ç‰¹ç‚¹æ˜¯å¼•å…¥äº† CASï¼ˆå€ŸåŠ© Unsafe æ¥å®ç°ã€native codeã€‘ï¼‰<br>CASæœ‰3ä¸ªæ“ä½œæ•°ï¼Œå†…å­˜å€¼Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li><p>CAS ä¼šå‡ºç°çš„é—®é¢˜ï¼šABA<br>è§£å†³ï¼šå¯¹å˜é‡å¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œç‰ˆæœ¬å·åŠ  1ï¼Œæ¯”è¾ƒçš„æ—¶å€™æ¯”è¾ƒç‰ˆæœ¬å·ã€‚<br>####<code>Putè¿‡ç¨‹</code></p></li><li><p>æ ¹æ® key è®¡ç®—å‡º hashcode ã€‚åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚</p></li><li>é€šè¿‡ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ CAS å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚</li><li>å¦‚æœå½“å‰ä½ç½®çš„ hashcode == MOVED == -1,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</li><li>å¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚</li><li><p>å¦‚æœæ•°é‡å¤§äº TREEIFY_THRESHOLD åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><h4 id="Getè¿‡ç¨‹"><a href="#Getè¿‡ç¨‹" class="headerlink" title="Getè¿‡ç¨‹"></a><code>Getè¿‡ç¨‹</code></h4></li><li><p>æ ¹æ®è®¡ç®—å‡ºæ¥çš„ hashcode å¯»å€ï¼Œå¦‚æœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆç›´æ¥è¿”å›å€¼ã€‚</p></li><li>å¦‚æœæ˜¯çº¢é»‘æ ‘é‚£å°±æŒ‰ç…§æ ‘çš„æ–¹å¼è·å–å€¼ã€‚</li><li>éƒ½ä¸æ»¡è¶³é‚£å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†è·å–å€¼ã€‚</li></ul><h2 id="14-TreeMap"><a href="#14-TreeMap" class="headerlink" title="14.TreeMap"></a>14.TreeMap</h2><p>TreeMap åˆ™æ˜¯åŸºäºçº¢é»‘æ ‘çš„ä¸€ç§æä¾›é¡ºåºè®¿é—®çš„ Mapï¼Œå’ŒHashMapä¸åŒï¼Œå®ƒçš„getã€putã€removeä¹‹ç±»æ“ä½œéƒ½æ˜¯O(logn)çš„å¤æ‚åº¦ï¼Œå…·ä½“é¡ºåºå¯ä»¥ç”±æŒ‡å®šçš„Comparatoræ¥å†³å®šï¼Œæˆ–è€…æ ¹æ®é”®çš„è‡ªç„¶é¡ºåºæ¥åˆ¤æ–­</p><h2 id="15-hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ"><a href="#15-hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ" class="headerlink" title="15.hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ"></a>15.hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ</h2><p>Hashå‡½æ•°æ˜¯æŒ‡æŠŠä¸€ä¸ªå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´ã€‚æŠŠå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´çš„ç›®çš„å¾€å¾€æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œä½¿å¾—æ•°æ®å®¹æ˜“ä¿å­˜ã€‚<br>æ¯”è¾ƒå‡ºåçš„ç®—æ³•æœ‰SHA,MD4ã€MD5ç­‰</p><p>è¯´è¯´Stringä¸­hashcodeçš„å®ç°?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="number">0</span> &amp;&amp; value.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">char</span> val[] = value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value.length; i++) &#123;</span><br><span class="line">            h = <span class="number">31</span> * h + val[i];</span><br><span class="line">        &#125;</span><br><span class="line">        hash = h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>Stringç±»ä¸­çš„hashCodeè®¡ç®—æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°±æ˜¯ä»¥31ä¸ºæƒï¼Œæ¯ä¸€ä½ä¸ºå­—ç¬¦çš„ASCIIå€¼è¿›è¡Œè¿ç®—ï¼Œç”¨è‡ªç„¶æº¢å‡ºæ¥ç­‰æ•ˆå–æ¨¡ã€‚</li><li>å“ˆå¸Œè®¡ç®—å…¬å¼å¯ä»¥è®¡ä¸º<figure class="highlight plain"><figcaption><span>+ s[1]*31^(n-2) + ... + s[n-1]```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* é‚£ä¸ºä»€ä¹ˆä»¥31ä¸ºè´¨æ•°å‘¢?</span><br><span class="line">ä¸»è¦æ˜¯å› ä¸º31æ˜¯ä¸€ä¸ªå¥‡è´¨æ•°ï¼Œæ‰€ä»¥```31*i=32*i-i=(i&lt;&lt;5)-i```ï¼Œè¿™ç§ä½ç§»ä¸å‡æ³•ç»“åˆçš„è®¡ç®—ç›¸æ¯”ä¸€èˆ¬çš„è¿ç®—å¿«å¾ˆå¤šã€‚</span><br><span class="line"></span><br><span class="line">## 16.å¥å¯ä»¥ä¸ºNullå€¼ä¹ˆ?</span><br><span class="line"></span><br><span class="line">å¯ä»¥ï¼Œkeyä¸ºnullçš„æ—¶å€™ï¼Œhashç®—æ³•æœ€åçš„å€¼ä»¥0æ¥è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æ”¾åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</span><br><span class="line"></span><br><span class="line">## 17.ä¸€èˆ¬ç”¨ä»€ä¹ˆä½œä¸ºHashMapçš„key?</span><br><span class="line"></span><br><span class="line">ä¸€èˆ¬ç”¨Integerã€Stringè¿™ç§ä¸å¯å˜ç±»å½“HashMapå½“keyï¼Œè€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨ã€‚</span><br><span class="line">â€¢ (1) å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨å®ƒåˆ›å»ºçš„æ—¶å€™hashcodeå°±è¢«ç¼“å­˜äº†ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚è¿™å°±ä½¿å¾—å­—ç¬¦ä¸²å¾ˆé€‚åˆä½œä¸ºMapä¸­çš„é”®ï¼Œå­—ç¬¦ä¸²çš„å¤„ç†é€Ÿåº¦è¦å¿«è¿‡å…¶å®ƒçš„é”®å¯¹è±¡ã€‚è¿™å°±æ˜¯HashMapä¸­çš„é”®å¾€å¾€éƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€‚</span><br><span class="line">â€¢ (2) å› ä¸ºè·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•ï¼Œé‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„,è¿™äº›ç±»å·²ç»å¾ˆè§„èŒƒçš„è¦†å†™äº†hashCode()ä»¥åŠequals()æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">## Hashcode</span><br><span class="line">* ä¸€ã€hashCodeç®€ä»‹</span><br><span class="line">public int hashCode()ï¼š``hashCode``æ˜¯æ ¹ç±»Obejectä¸­çš„æ–¹æ³•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒObjectä¸­çš„``hashCode() ``è¿”å›å¯¹è±¡çš„32ä½jvmå†…å­˜åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœå¯¹è±¡ä¸é‡å†™è¯¥æ–¹æ³•ï¼Œåˆ™è¿”å›ç›¸åº”å¯¹è±¡çš„32ä¸ºJVMå†…å­˜åœ°å€ã€‚</span><br><span class="line">* äºŒã€hashCodeæ³¨æ„ç‚¹</span><br><span class="line">å…³äºhashCodeæ–¹æ³•ï¼Œä¸€è‡´çš„çº¦å®šæ˜¯ï¼š</span><br><span class="line">1ã€é‡å†™äº†``euqls``æ–¹æ³•çš„å¯¹è±¡å¿…é¡»åŒæ—¶é‡å†™``hashCode()``æ–¹æ³•ã€‚</span><br><span class="line">2ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ</span><br><span class="line">3ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ï¼Œå­˜æ”¾äºåŒä¸€ä¸ªä½ç½®</span><br><span class="line">* ä¸‰ã€hashCodeä½œç”¨</span><br><span class="line">ä»Objectè§’åº¦çœ‹ï¼ŒJVMæ¯newä¸€ä¸ªObjectï¼Œå®ƒéƒ½ä¼šå°†è¿™ä¸ªObjectä¸¢åˆ°ä¸€ä¸ªHashè¡¨ä¸­å»ï¼Œè¿™æ ·çš„è¯ï¼Œä¸‹æ¬¡åšObjectçš„æ¯”è¾ƒæˆ–è€…å–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ˆè¯»å–è¿‡ç¨‹ï¼‰ï¼Œå®ƒä¼šæ ¹æ®å¯¹è±¡çš„HashCodeå†ä»Hashè¡¨ä¸­å–è¿™ä¸ªå¯¹è±¡ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜å–å¯¹è±¡çš„æ•ˆç‡ã€‚è‹¥HashCodeç›¸åŒå†å»è°ƒç”¨equalã€‚</span><br><span class="line">HashCodeæ˜¯ç”¨äºæŸ¥æ‰¾ä½¿ç”¨çš„ï¼Œè€Œequalsæ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ˜¯å¦ç›¸ç­‰çš„ã€‚</span><br><span class="line">* å››ã€ä¸ºä»€ä¹ˆé‡å†™</span><br><span class="line">å®é™…å¼€å‘çš„è¿‡ç¨‹ä¸­åœ¨hashmapæˆ–è€…hashseté‡Œå¦‚æœä¸é‡å†™çš„hashcodeå’Œequalsæ–¹æ³•çš„è¯ä¼šå¯¼è‡´æˆ‘ä»¬å­˜å¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠå¯¹è±¡å­˜è¿›å»äº†ï¼Œå–çš„æ—¶å€™å´å–ä¸åˆ°æƒ³è¦çš„å¯¹è±¡ã€‚</span><br><span class="line">é‡å†™äº†hashcodeå’Œequalsæ–¹æ³•å¯ä»¥è¿…é€Ÿçš„åœ¨hashmapä¸­æ‰¾åˆ°é”®çš„ä½ç½®ï¼›</span><br><span class="line">#### **é‡å†™hashcodeæ˜¯ä¸ºäº†ä¿è¯ç›¸åŒçš„å¯¹è±¡ä¼šæœ‰ç›¸åŒçš„hashcodeï¼›**</span><br><span class="line">#### **é‡å†™equalsæ˜¯ä¸ºäº†ä¿è¯åœ¨å‘ç”Ÿå†²çªçš„æƒ…å†µä¸‹å–å¾—åˆ°Entryå¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£æ˜¯keyæˆ–æ˜¯å…ƒç´ ï¼‰**ï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å­˜åœ¨ä¸€ä¸ªtableæ•°ç»„ï¼Œé‡Œé¢æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªnodeé“¾è¡¨ï¼Œå½“æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆkey-valueï¼‰æ—¶ï¼Œå°±é¦–å…ˆè®¡ç®—å…ƒç´ keyçš„hashå€¼ï¼Œé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashå€¼è¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œä»¥æ­¤ç¡®å®šæ’å…¥æ•°ç»„ä¸­çš„ä½ç½®ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨åŒä¸€hashå€¼çš„å…ƒç´ å·²ç»è¢«æ”¾åœ¨æ•°ç»„åŒä¸€ä½ç½®äº†ï¼Œè¿™æ—¶å°±æŠŠè¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°åŒä¸€hashå€¼çš„nodeé“¾è¡¨çš„é“¾å°¾ï¼Œä»–ä»¬åœ¨æ•°ç»„çš„åŒä¸€ä½ç½®ï¼Œä½†æ˜¯å½¢æˆäº†é“¾è¡¨ï¼ŒåŒä¸€å„é“¾è¡¨ä¸Šçš„Hashå€¼æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¯´æ•°ç»„å­˜æ”¾çš„æ˜¯é“¾è¡¨ã€‚è€Œå½“é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œé“¾è¡¨å°±å¯èƒ½è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æŸ¥æ‰¾çš„æ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191102133424361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM1ODMzMTE=,size_16,color_FFFFFF,t_70&quot; alt=&quot;å­˜å‚¨ç»“æ„&quot; /&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```Java</span><br><span class="line">static class Node&amp;lt;K,V&amp;gt; implements Map.Entry&amp;lt;K,V&amp;gt; &#123;</span><br><span class="line">        final int hash;</span><br><span class="line">        final K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&amp;lt;K,V&amp;gt; next; //å¯ä»¥çœ‹å¾—å‡ºè¿™æ˜¯ä¸€ä¸ªé“¾è¡¨</span><br><span class="line"></span><br><span class="line">        Node(int hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123;</span><br><span class="line">            this.hash = hash;</span><br><span class="line">            this.key = key;</span><br><span class="line">            this.value = value;</span><br><span class="line">            this.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">        *</span><br><span class="line">        *</span><br><span class="line">        *</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">transient Node&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure></li></ul><li>HashMapå†…éƒ¨åŒ…å«ä¸€ä¸ªNodeç±»å‹çš„æ•°ç»„tableï¼ŒNodeç”±Map.Entryç»§æ‰¿è€Œæ¥ã€‚</li><br><li>Nodeå­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«å››ä¸ªå­—æ®µï¼Œä»nextå­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡ºnodeæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚</li><br><li>tableæ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®éƒ½å¯ä»¥å½“åšä¸€ä¸ªæ¡¶ï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚</li><br><li>HashMapä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªå­˜æ”¾æ•£åˆ—å€¼ç›¸åŒçš„Nodeã€‚</li><br><h4 id="æ•°æ®åŸŸ">æ•°æ®åŸŸ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">362498820763181265L</span>;  </span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å®¹é‡ï¼Œåˆå§‹åŒ–æœ‰16ä¸ªæ¡¶</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &amp;lt;&amp;lt; <span class="number">4</span>; <span class="comment">// aka 16  </span></span><br><span class="line"><span class="comment">// æœ€å¤§å®¹é‡  1 073 741 824, 10äº¿å¤š</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &amp;lt;&amp;lt; <span class="number">30</span>;</span><br><span class="line"><span class="comment">// é»˜è®¤çš„è´Ÿè½½å› å­ã€‚å› æ­¤åˆå§‹æƒ…å†µä¸‹ï¼Œå½“é”®å€¼å¯¹çš„æ•°é‡å¤§äº 16 * 0.75 = 12 æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line"><span class="comment">// å½“put()ä¸€ä¸ªå…ƒç´ åˆ°æŸä¸ªæ¡¶ï¼Œå…¶é“¾è¡¨é•¿åº¦è¾¾åˆ°8æ—¶æœ‰å¯èƒ½å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘  </span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;  </span><br><span class="line"><span class="comment">// åœ¨hashMapæ‰©å®¹æ—¶ï¼Œå¦‚æœå‘ç°é“¾è¡¨é•¿åº¦å°äºç­‰äº6ï¼Œåˆ™ä¼šç”±çº¢é»‘æ ‘é‡æ–°é€€åŒ–ä¸ºé“¾è¡¨ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;  </span><br><span class="line"><span class="comment">// åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äº 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>;  </span><br><span class="line"><span class="comment">// å­˜å‚¨å…ƒç´ çš„æ•°ç»„  </span></span><br><span class="line"><span class="keyword">transient</span> Node&amp;lt;k,v&amp;gt;[] table;</span><br><span class="line"><span class="comment">// å­˜æ”¾å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="comment">// è¢«ä¿®æ”¹çš„æ¬¡æ•°fast-failæœºåˆ¶   </span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> modCount;</span><br><span class="line"><span class="comment">// ä¸´ç•Œå€¼ å½“å®é™…å¤§å°(å®¹é‡*å¡«å……æ¯”)è¶…è¿‡ä¸´ç•Œå€¼æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹   </span></span><br><span class="line"><span class="keyword">int</span> threshold;</span><br><span class="line"><span class="comment">// å¡«å……æ¯”</span></span><br><span class="line">final float loadFactor;&lt;/code&gt;&lt;/pre&gt;</span><br><span class="line">&lt;h4 id="æ„é€ å‡½æ•°"&gt;æ„é€ å‡½æ•°&lt;/h4&gt;</span><br><span class="line">&lt;pre <span class="class"><span class="keyword">class</span></span>=<span class="string">"java"</span>&gt;&lt;code&gt;<span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &amp;lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal initial capacity: &amp;quot; +</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &amp;gt; MAXIMUM_CAPACITY)</span><br><span class="line">            initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">        <span class="keyword">if</span> (loadFactor &amp;lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal load factor: &amp;quot; +</span><br><span class="line">                                               loadFactor);</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">        <span class="comment">// tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæ¥è¿‘initialCapacity</span></span><br><span class="line">        <span class="comment">// å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚</span></span><br><span class="line">        <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(Map&amp;lt;? extends K, ? extends V&amp;gt; m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">        putMapEntries(m, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li><p>HashMapæ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥å®¹é‡ä¸æ˜¯2çš„næ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º2çš„næ¬¡æ–¹ã€‚</p><br></li></ul><br>### <code>Put()</code>æºç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h;</span><br><span class="line">        <span class="comment">// â€œæ‰°åŠ¨å‡½æ•°â€ã€‚å‚è€ƒ https://www.cnblogs.com/zhengwang/p/8136164.html</span></span><br><span class="line">        <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; <span class="number">16</span>);</span><br><span class="line">&#125;    </span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">        <span class="comment">// æœªåˆå§‹åŒ–åˆ™åˆå§‹åŒ–table</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">        <span class="comment">// é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œ</span></span><br><span class="line">        <span class="comment">// ç„¶ååˆ¤æ–­tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„æ˜¯å¦å·²ç»å­˜åœ¨nodeã€‚</span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp;amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">            <span class="comment">// å¦‚æœtableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„ä¸ºç©ºåˆ™æ–°åˆ›å»ºä¸€ä¸ªnodeæ”¾åœ¨è¯¥å¤„</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è¿è¡Œåˆ°è¿™ä»£è¡¨tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„å·²ç»å­˜åœ¨nodeï¼Œå³å‘ç”Ÿäº†ç¢°æ’</span></span><br><span class="line">            HashMap.Node&amp;lt;K,V&amp;gt; e; K k;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                    ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                e = p;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeæ˜¯å¦å·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="comment">// å¦‚æœè¿™ä¸ªnodeå·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘åˆ™ç»§ç»­å¾€æ ‘ç§æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">                e = ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="comment">// åœ¨è¿™é‡Œå¾ªç¯éå†nodeé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// åˆ¤æ–­æ˜¯å¦åˆ°è¾¾é“¾è¡¨å°¾</span></span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="comment">// åˆ°è¾¾é“¾è¡¨å°¾ï¼Œç›´æ¥æŠŠæ–°nodeæ’å…¥é“¾è¡¨ï¼Œæ’å…¥é“¾è¡¨å°¾éƒ¨ï¼Œåœ¨jdk8ä¹‹å‰æ˜¯å¤´æ’æ³•</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (binCount &amp;gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            <span class="comment">// å¦‚æœnodeé“¾è¡¨çš„é•¿åº¦å¤§äºç­‰äº8åˆ™å¯èƒ½æŠŠè¿™ä¸ªnodeè½¬æ¢ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å½“æ’å…¥keyå­˜åœ¨ï¼Œåˆ™æ›´æ–°valueå€¼å¹¶è¿”å›æ—§value</span></span><br><span class="line">            <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                V oldValue = e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                    e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹æ¬¡æ•°++</span></span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰å¤§å°å¤§äºé—¨é™ï¼Œé—¨é™åŸæœ¬æ˜¯åˆå§‹å®¹é‡*0.75</span></span><br><span class="line">        <span class="keyword">if</span> (++size &amp;gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>ä¸‹é¢ç®€å•è¯´ä¸‹put()æµç¨‹ï¼š<br><ol><br><li>åˆ¤æ–­é”®å€¼å¯¹æ•°ç»„table[]æ˜¯å¦ä¸ºç©ºæˆ–ä¸ºnullï¼Œå¦åˆ™ä»¥é»˜è®¤å¤§å°resize()ï¼›</li><br><li>æ ¹æ®é”®keyè®¡ç®—hashå€¼ä¸tableçš„é•¿åº¦è¿›è¡Œä¸è¿ç®—å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼• indexï¼Œå¦‚æœtab[index] == nullï¼Œç›´æ¥æ ¹æ®key-valueæ–°å»ºnodeæ·»åŠ ï¼Œå¦åˆ™è½¬å…¥3</li><br><li>åˆ¤æ–­å½“å‰æ•°ç»„ä¸­å¤„ç†hashå†²çªçš„æ–¹å¼ä¸ºé“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘(checkç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹å³å¯),åˆ†åˆ«å¤„ç†</li><br></ol></li><p><li>ä¸ºå•¥å¤´æ’æ³•ä¸ºä»€ä¹ˆè¦æ¢æˆå°¾æ’ï¼šjdk1.7æ—¶å€™ç”¨å¤´æ’æ³•å¯èƒ½æ˜¯è€ƒè™‘åˆ°äº†ä¸€ä¸ªæ‰€è°“çš„çƒ­ç‚¹æ•°æ®çš„ç‚¹(æ–°æ’å…¥çš„æ•°æ®å¯èƒ½ä¼šæ›´æ—©ç”¨åˆ°)ï¼›æ‰¾åˆ°é“¾è¡¨å°¾éƒ¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæˆ–è€…éœ€è¦ä½¿ç”¨é¢å¤–çš„å†…å­˜åœ°å€æ¥ä¿å­˜é“¾è¡¨å°¾éƒ¨çš„ä½ç½®ï¼Œå¤´æ’æ³•å¯ä»¥èŠ‚çœæ’å…¥è€—æ—¶ã€‚ä½†æ˜¯åœ¨æ‰©å®¹æ—¶ä¼šæ”¹å˜é“¾è¡¨ä¸­å…ƒç´ åŸæœ¬çš„é¡ºåºï¼Œä»¥è‡³äºåœ¨<strong>å¹¶å‘åœºæ™¯ä¸‹å¯¼è‡´é“¾è¡¨æˆç¯</strong>çš„é—®é¢˜ã€‚</li></p><p><li>ä»putVal()æºç å¯ä»¥çœ‹å‡ºï¼ŒHashMapå¹¶æ²¡æœ‰å¯¹nullçš„é”®å€¼å¯¹åšé™åˆ¶ï¼ˆhashå€¼è®¾ä¸º0ï¼‰ï¼Œå³HashMapå…è®¸æ’å…¥é”®å°¾nullçš„é”®å€¼å¯¹ã€‚ä½†åœ¨JDK1.8ä¹‹å‰HashMapä½¿ç”¨ç¬¬0ä¸ªnodeå­˜æ”¾é”®ä¸ºnullçš„é”®å€¼å¯¹ã€‚</li></p><p><li>ç¡®å®šnodeä¸‹æ ‡ï¼šé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashè¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexã€‚</li></p><p><li>åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äº 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚</li><br></p></ul><p></p><h2 id="å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ"></a><a href="https://www.cnblogs.com/wen-he/p/11496050.html" target="_blank" rel="noopener">å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ</a></h2><h3 id="get-æ“ä½œæºç è§£æ"><a href="#get-æ“ä½œæºç è§£æ" class="headerlink" title="get()æ“ä½œæºç è§£æ"></a>get()æ“ä½œæºç è§£æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt; e;</span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> HashMap.Node&amp;lt;K,V&amp;gt; getNode(<span class="keyword">int</span> hash, Object key) &#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">        <span class="comment">// tableä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;amp;&amp;amp; (n = tab.length) &amp;gt; <span class="number">0</span> &amp;amp;&amp;amp;</span><br><span class="line">                <span class="comment">// é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œtable</span></span><br><span class="line">                <span class="comment">// ä¸‹æ ‡ä½indexå¤„çš„å…ƒç´ ä¸ä¸ºç©ºï¼Œå³å…ƒç´ ä¸ºnodeé“¾è¡¨</span></span><br><span class="line">                (first = tab[(n - <span class="number">1</span>) &amp;amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆåˆ¤æ–­nodeé“¾è¡¨ä¸­ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;amp;&amp;amp; <span class="comment">// always check first node</span></span><br><span class="line">                    <span class="comment">// åˆ†åˆ«åˆ¤æ–­keyä¸ºnullå’Œkeyä¸ä¸ºnullçš„æƒ…å†µ</span></span><br><span class="line">                    ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                <span class="comment">// keyç›¸ç­‰åˆ™è¿”å›ç¬¬ä¸€ä¸ª</span></span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹keyä¸åŒä¸”nodeé“¾è¡¨ä¸æ­¢åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­nodeé“¾è¡¨æ˜¯å¦è½¬ä¸ºçº¢é»‘æ ‘ã€‚</span></span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> HashMap.TreeNode)</span><br><span class="line">                    <span class="comment">// åˆ™åœ¨çº¢é»‘æ ‘ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</span></span><br><span class="line">                    <span class="keyword">return</span> ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="comment">// å¾ªç¯éå†nodeé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œåˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// keyåœ¨tableä¸­ä¸å­˜åœ¨åˆ™è¿”å›nullã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>get(key)æ–¹æ³•é¦–å…ˆè·å–keyçš„hashå€¼ï¼Œ</li><li>è®¡ç®—hash &amp; (table.len - 1)å¾—åˆ°åœ¨é“¾è¡¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œ</li><li>å…ˆåˆ¤æ–­nodeé“¾è¡¨ï¼ˆæ¡¶ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„keyæ˜¯å¦ä¸å‚æ•°keyç›¸ç­‰ï¼Œ</li><li>ä¸ç­‰åˆ™åˆ¤æ–­æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘ï¼Œè‹¥è½¬ä¸ºçº¢é»‘æ ‘åˆ™åœ¨çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾ï¼Œ</li><li>å¦‚æ²¡æœ‰è½¬ä¸ºçº¢é»‘æ ‘å°±éå†åé¢çš„é“¾è¡¨æ‰¾åˆ°ç›¸åŒçš„keyå€¼è¿”å›å¯¹åº”çš„Valueå€¼å³å¯ã€‚</li></ul><h3 id="resize-æ“ä½œæºç è§£æ"><a href="#resize-æ“ä½œæºç è§£æ" class="headerlink" title="resize()æ“ä½œæºç è§£æ"></a>resize()æ“ä½œæºç è§£æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–æˆ–è€…æ‰©å®¹ä¹‹åçš„å…ƒç´ è°ƒæ•´</span></span><br><span class="line">    <span class="keyword">final</span> HashMap.Node&amp;lt;K,V&amp;gt;[] resize() &#123;</span><br><span class="line">        <span class="comment">// è·å–æ—§table</span></span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] oldTab = table;</span><br><span class="line">        <span class="comment">// æ—§tableå®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">        <span class="comment">// æ—§tableæ‰©å®¹ä¸´ç•Œå€¼</span></span><br><span class="line">        <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">        <span class="comment">// å®šä¹‰æ–°tableå®¹é‡å’Œä¸´ç•Œå€¼</span></span><br><span class="line">        <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœåŸtableä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœtableå®¹é‡è¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™ä¿®æ”¹ä¸´ç•Œå€¼ä¸ºInteger.MAX_VALUE</span></span><br><span class="line">            <span class="comment">// MAXIMUM_CAPACITY = 1 &amp;lt;&amp;lt; 30;</span></span><br><span class="line">            <span class="comment">// Integer.MAX_VALUE = 1 &amp;lt;&amp;lt; 31 - 1;</span></span><br><span class="line">            <span class="keyword">if</span> (oldCap &amp;gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">                <span class="comment">// Mapè¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œè¿™æ—¶è¿˜è¦å‘mapä¸­æ”¾æ•°æ®ï¼Œåˆ™ç›´æ¥è®¾ç½®ä¸´ç•Œå€¼ä¸ºæ•´æ•°çš„æœ€å¤§å€¼</span></span><br><span class="line">                <span class="comment">// åœ¨å®¹é‡æ²¡æœ‰è¾¾åˆ°æœ€å¤§å€¼ä¹‹å‰ä¸ä¼šå†resizeã€‚</span></span><br><span class="line">                threshold = Integer.MAX_VALUE;</span><br><span class="line">                <span class="comment">// ç»“æŸæ“ä½œ</span></span><br><span class="line">                <span class="keyword">return</span> oldTab;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸‹é¢å°±æ˜¯æ‰©å®¹æ“ä½œï¼ˆ2å€ï¼‰</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &amp;lt;&amp;lt; <span class="number">1</span>) &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp;</span><br><span class="line">                    oldCap &amp;gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">                <span class="comment">// ä¸´ç•Œå€¼ä¹Ÿå˜ä¸ºä¸¤å€</span></span><br><span class="line">                newThr = oldThr &amp;lt;&amp;lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &amp;gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * è¿›å…¥æ­¤ifè¯æ˜åˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æ„é€ ï¼špublic HashMap(int initialCapacity)</span></span><br><span class="line"><span class="comment">             * æˆ– public HashMap(int initialCapacity, float loadFactor)</span></span><br><span class="line"><span class="comment">             * æ³¨ï¼šå¸¦å‚çš„æ„é€ ä¸­initialCapacityï¼ˆåˆå§‹å®¹é‡å€¼ï¼‰ä¸ç®¡æ˜¯è¾“å…¥å‡ éƒ½ä¼šé€šè¿‡</span></span><br><span class="line"><span class="comment">             * tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæ¥è¿‘initialCapacity</span></span><br><span class="line"><span class="comment">             * å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚</span></span><br><span class="line"><span class="comment">             * æ‰€ä»¥å®é™…åˆ›å»ºçš„å®¹é‡å¹¶ä¸ç­‰äºè®¾ç½®çš„åˆå§‹å®¹é‡ã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            newCap = oldThr;</span><br><span class="line">        <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">            <span class="comment">// è¿›å…¥æ­¤ifè¯æ˜åˆ›å»ºmapæ—¶ç”¨çš„æ— å‚æ„é€ ï¼š</span></span><br><span class="line">            <span class="comment">// ç„¶åå°†å‚æ•°newCapï¼ˆæ–°çš„å®¹é‡ï¼‰ã€newThr(æ–°çš„æ‰©å®¹é˜€ç•Œå€¼)è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">            newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">            newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è¿›å…¥è¿™ä»£è¡¨æœ‰ä¸¤ç§å¯èƒ½ã€‚</span></span><br><span class="line">            <span class="comment">// 1. è¯´æ˜old tableå®¹é‡å¤§äº0ä½†æ˜¯å°äº16.</span></span><br><span class="line">            <span class="comment">// 2. åˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æ„é€ ï¼Œæ ¹æ®loadFactorè®¡ç®—ä¸´ç•Œå€¼ã€‚</span></span><br><span class="line">            <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">            newThr = (newCap &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; ft &amp;lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                    (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹ä¸´ç•Œå€¼</span></span><br><span class="line">        threshold = newThr;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(&#123;&amp;quot;rawtypes&amp;quot;,&amp;quot;unchecked&amp;quot;&#125;)</span><br><span class="line">        <span class="comment">// æ ¹æ®æ–°çš„å®¹é‡ç”Ÿæˆæ–°çš„ table</span></span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] newTab = (HashMap.Node&amp;lt;K,V&amp;gt;[])<span class="keyword">new</span> HashMap.Node[newCap];</span><br><span class="line">        <span class="comment">// æ›¿æ¢æˆæ–°çš„table</span></span><br><span class="line">        table = newTab;</span><br><span class="line">        <span class="comment">// å¦‚æœoldTabä¸ä¸ºnullè¯´æ˜æ˜¯æ‰©å®¹ï¼Œå¦åˆ™ç›´æ¥è¿”å›newTab</span></span><br><span class="line">        <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">/* éå†åŸæ¥çš„table */</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &amp;lt; oldCap; ++j) &#123;</span><br><span class="line">                HashMap.Node&amp;lt;K,V&amp;gt; e;</span><br><span class="line">                <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­è¿™ä¸ªæ¡¶ï¼ˆé“¾è¡¨ï¼‰ä¸­å°±åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)</span><br><span class="line">                        <span class="comment">// æ ¹æ®æ–°çš„å®¹é‡é‡æ–°è®¡ç®—åœ¨tableä¸­çš„ä½ç½®indexï¼Œå¹¶æŠŠå½“å‰å…ƒç´ èµ‹å€¼ç»™ä»–ã€‚</span></span><br><span class="line">                        newTab[e.hash &amp;amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­è¿™ä¸ªé“¾è¡¨æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> HashMap.TreeNode)</span><br><span class="line">                        <span class="comment">// åœ¨splitå‡½æ•°ä¸­å¯èƒ½ç”±äºçº¢é»‘æ ‘çš„é•¿åº¦å°äºç­‰äºUNTREEIFY_THRESHOLDï¼ˆ6ï¼‰</span></span><br><span class="line">                        <span class="comment">// åˆ™æŠŠçº¢é»‘æ ‘é‡æ–°è½¬ä¸ºé“¾è¡¨</span></span><br><span class="line">                        ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                    <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                        <span class="comment">// è¿è¡Œåˆ°è¿™é‡Œè¯æ˜æ¡¶ä¸­æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚</span></span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; next;</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            <span class="comment">// å¯¹æ¡¶è¿›è¡Œéå†</span></span><br><span class="line">                            next = e.next;</span><br><span class="line">                            <span class="keyword">if</span> ((e.hash &amp;amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                    loHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    loTail.next = e;</span><br><span class="line">                                loTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                    hiHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hiTail.next = e;</span><br><span class="line">                                hiTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j] = loHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j + oldCap] = hiHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newTab;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="HashMap-çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"><a href="#HashMap-çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ" class="headerlink" title="HashMap çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ?"></a>HashMap çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ?</h2><p>HashMapåŸºäºhashingåŸç†ï¼Œæˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å­˜å‚¨å’Œè·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶ï¼Œå®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcodeï¼Œç„¶åæ‰¾åˆ°bucketä½ç½®æ¥å­˜å‚¨å€¼å¯¹è±¡ã€‚å½“è·å–å¯¹è±¡æ—¶ï¼Œé€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹ï¼Œç„¶åè¿”å›å€¼å¯¹è±¡ã€‚HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’é—®é¢˜ï¼Œå½“å‘ç”Ÿç¢°æ’äº†ï¼Œå¯¹è±¡å°†ä¼šå­˜å‚¨åœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé“¾æ¥åŸå…ˆçš„å¯¹è±¡èŠ‚ç‚¹ï¼ŒHashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å­˜å‚¨é”®å€¼å¯¹å¯¹è±¡ã€‚</p><h2 id="å¿«é€Ÿå¤±è´¥-fail-fast-å’Œå®‰å…¨å¤±è´¥-fail-safe-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¿«é€Ÿå¤±è´¥-fail-fast-å’Œå®‰å…¨å¤±è´¥-fail-safe-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¿«é€Ÿå¤±è´¥ (fail-fast) å’Œå®‰å…¨å¤±è´¥ (fail-safe) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¿«é€Ÿå¤±è´¥ (fail-fast) å’Œå®‰å…¨å¤±è´¥ (fail-safe) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>1ã€å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰<br>åœ¨ç”¨è¿­ä»£å™¨éå†ä¸€ä¸ªé›†åˆå¯¹è±¡æ—¶ï¼Œå¦‚æœéå†è¿‡ç¨‹ä¸­å¯¹é›†åˆå¯¹è±¡çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼ˆå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºConcurrent Modification Exception.<br>åŸç†ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ªmodCountå˜é‡ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()/next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚<br>æ³¨æ„ï¼šè¿™é‡Œå¼‚å¸¸çš„æŠ›å‡ºæ¡ä»¶æ˜¯æ£€æµ‹åˆ°modCount!=expectedmodCountè¿™ä¸ªæ¡ä»¶ã€‚å¦‚æœé›†åˆå‘ç”Ÿå˜åŒ–æ—¶ä¿®æ”¹modCountå€¼åˆšå¥½åˆè®¾ç½®ä¸ºäº†expectedmodCountå€¼ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šæŠ›å‡ºã€‚å› æ­¤ï¼Œä¸èƒ½ä¾èµ–äºè¿™ä¸ªå¼‚å¸¸æ˜¯å¦æŠ›å‡ºè€Œè¿›è¡Œå¹¶å‘æ“ä½œçš„ç¼–ç¨‹ï¼Œè¿™ä¸ªå¼‚å¸¸åªå»ºè®®ç”¨äºæ£€æµ‹å¹¶å‘ä¿®æ”¹çš„bugã€‚<br>åœºæ™¯ï¼šjava.utilåŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ã€‚</li><li>2ã€å®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰<br>é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚<br>åŸç†ï¼šç”±äºè¿­ä»£æ—¶æ˜¯å¯¹åŸé›†åˆçš„æ‹·è´è¿›è¡Œéå†ï¼Œæ‰€ä»¥åœ¨éå†è¿‡ç¨‹ä¸­å¯¹åŸé›†åˆæ‰€ä½œçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘Concurrent Modification Exceptionã€‚<br>ç¼ºç‚¹ï¼šåŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº†Concurrent Modification Exception,ä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ï¼Œå³ï¼šè¿­ä»£å™¨éå†çš„æ˜¯å¼€å§‹éå†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éå†æœŸé—´åŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„<br>åœºæ™¯ï¼šjava.util.concurrentåŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚</li></ul><p><img src="https://img1.sycdn.imooc.com/5d56493300011c0e19151612.png" alt="æºç å¯¼è¯»"></p><p><a href="https://blog.csdn.net/weixin_44460333/article/details/86770169" target="_blank" rel="noopener">HashMapï¼ŸConcurrentHashMapï¼Ÿç›¸ä¿¡çœ‹å®Œè¿™ç¯‡æ²¡äººèƒ½éš¾ä½ä½ </a></p>]]></content>
    
    <summary type="html">
    
      Find Everything about HashMap IN There.
    
    </summary>
    
    
      <category term="Analyst of SourceCode" scheme="http://yoursite.com/tags/Analyst-of-SourceCode/"/>
    
  </entry>
  
  <entry>
    <title>Algorithms, Part I | Princeton Online</title>
    <link href="http://yoursite.com/2020/01/16/Algorithms-Part-I-Princeton-Online/"/>
    <id>http://yoursite.com/2020/01/16/Algorithms-Part-I-Princeton-Online/</id>
    <published>2020-01-16T14:19:13.000Z</published>
    <updated>2020-01-16T14:29:42.054Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Princeton-Online-course"><a href="#Princeton-Online-course" class="headerlink" title="Princeton Online course"></a><a href="https://algs4.cs.princeton.edu/" target="_blank" rel="noopener">Princeton Online course</a></h2><h2 id="You-can-find-all-the-code-and-comments-details-in-this-Repository"><a href="#You-can-find-all-the-code-and-comments-details-in-this-Repository" class="headerlink" title="You can find all the code and comments details in this Repository"></a><a href="https://github.com/Williamren97/Alg4" target="_blank" rel="noopener">You can find all the code and comments details in this Repository</a></h2><h3 id="What-algorithms-and-data-structures-will-be-covered-in-this-course"><a href="#What-algorithms-and-data-structures-will-be-covered-in-this-course" class="headerlink" title="What algorithms and data structures will be covered in this course?"></a>What algorithms and data structures will be covered in this course?</h3><h4 id="The-first-part-will-focus-on-the-basic-data-structure-sorting-and-searching"><a href="#The-first-part-will-focus-on-the-basic-data-structure-sorting-and-searching" class="headerlink" title="The first part will focus on the basic data structure, sorting, and searching."></a>The first part will focus on the basic data structure, sorting, and searching.</h4><ul><li>Topics include: parallel search algorithm, binary search, stack, queue, backpack, insert sort, select sort, hill sort, fast sort, three-way fast sort, merge sort, heap sort, binary heap, binary search tree, red-black tree , Split link and linear probe hash tables, Graham scans, kd trees.</li></ul><h4 id="The-second-part-will-focus-on-graph-and-string-processing-algorithms"><a href="#The-second-part-will-focus-on-graph-and-string-processing-algorithms" class="headerlink" title="The second part will focus on graph and string processing algorithms."></a>The second part will focus on graph and string processing algorithms.</h4><ul><li>Topics include: depth-first search, width-first search, topology sorting, Kosaraju-Sharir algorithm, Kruskal algorithm, Prim algorithm, Dijkistra algorithm, Bellman-Ford algorithm, Ford-Fulkerson algorithm, LSD cardinality ranking algorithm, MSD cardinality ranking algorithm, three-way Cardinality fast sorting algorithm, multi-path trie algorithm, ternary search trie algorithm, Knuth-Morris-Pratt algorithm, Boyer-Moore algorithm, Rabin-Karp algorithm, regular matching, run-length encoding, Huffman encoding, LZW compression, Burrows-Wheeler transform .</li></ul><h4 id="The-Imp-of-Algorithm-in-Princeton-University"><a href="#The-Imp-of-Algorithm-in-Princeton-University" class="headerlink" title="The Imp of Algorithm in Princeton University."></a>The Imp of Algorithm in Princeton University.</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Princeton-Online-course&quot;&gt;&lt;a href=&quot;#Princeton-Online-course&quot; class=&quot;headerlink&quot; title=&quot;Princeton Online course&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://
      
    
    </summary>
    
    
      <category term="Algorithms," scheme="http://yoursite.com/tags/Algorithms/"/>
    
  </entry>
  
  <entry>
    <title>EveryThing About MySQL</title>
    <link href="http://yoursite.com/2020/01/14/EveryThing-About-MySQL/"/>
    <id>http://yoursite.com/2020/01/14/EveryThing-About-MySQL/</id>
    <published>2020-01-14T15:37:44.000Z</published>
    <updated>2020-02-23T16:59:23.599Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MYSQL"><a href="#MYSQL" class="headerlink" title="MYSQL"></a>MYSQL</h1><p><a href="https://blog.csdn.net/chai471793/article/details/99563704" target="_blank" rel="noopener">å½»åº•ææ‡‚ç³»åˆ—B-æ ‘ã€B+æ ‘ã€B-æ ‘ã€B*æ ‘</a></p><p><a href="https://www.cnblogs.com/nullzx/p/8729425.html" target="_blank" rel="noopener">Bæ ‘å’ŒB+æ ‘çš„æ’å…¥ã€åˆ é™¤å›¾æ–‡è¯¦è§£</a></p><h3 id="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B-æ ‘"><a href="#å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B-æ ‘" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B+æ ‘"></a><a href="https://baijiahao.baidu.com/s?id=1658675762218129560&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B+æ ‘</a></h3><blockquote><p>==B+æ ‘çš„æ•°æ®åªå‡ºç°åœ¨å¶å­èŠ‚ç‚¹ä¸Š==ï¼Œå› æ­¤åœ¨æŸ¥è¯¢å•æ¡æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢é€Ÿåº¦éå¸¸ç¨³å®šã€‚å› æ­¤ï¼Œ==åœ¨åšå•ä¸€æ•°æ®çš„æŸ¥è¯¢ä¸Šï¼Œå…¶å¹³å‡æ€§èƒ½å¹¶ä¸å¦‚Bæ ‘==ã€‚ä½†æ˜¯ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šæœ‰æŒ‡é’ˆè¿›è¡Œç›¸è¿ï¼Œå› æ­¤åœ¨åšæ•°æ®éå†çš„æ—¶å€™ï¼Œ==åªéœ€è¦å¯¹å¶å­èŠ‚ç‚¹è¿›è¡Œéå†å³å¯ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—B+æ ‘éå¸¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢==ã€‚</p></blockquote><ul><li>æ²¡å‡†æ˜¯==Mysqlä¸­æ•°æ®éå†æ“ä½œæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ç»“æ„==ã€‚å‡¡åšè¿™ç§å…³è”æŸ¥è¯¢ï¼Œä½ èº²ä¸å¼€joinæ“ä½œçš„ï¼æ—¢ç„¶æ¶‰åŠåˆ°äº†<code>Join</code>æ“ä½œï¼Œæ— å¤–ä¹ä»ä¸€ä¸ªè¡¨ä¸­å–ä¸€ä¸ªæ•°æ®ï¼Œå»å¦ä¸€ä¸ªè¡¨ä¸­é€è¡ŒåŒ¹é…ï¼Œå¦‚æœç´¢å¼•ç»“æ„æ˜¯B+æ ‘ï¼Œå¶å­èŠ‚ç‚¹ä¸Šæ˜¯æœ‰æŒ‡é’ˆçš„ï¼Œèƒ½å¤Ÿæå¤§çš„æé«˜è¿™ç§ä¸€è¡Œä¸€è¡Œçš„åŒ¹é…é€Ÿåº¦</li><li>==è€ŒMongodbæ˜¯åšå•ä¸€æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œæ•°æ®éå†æ“ä½œæ¯”è¾ƒå°‘==ï¼Œæ‰€ä»¥ç”¨Bæ ‘ä½œä¸ºç´¢å¼•ç»“æ„ã€‚</li></ul><p>é‚£ä¹ˆä¸ºä»€ä¹ˆMysqlåšæ•°æ®éå†æ“ä½œå¤šï¼Ÿè€ŒMongodbåšæ•°æ®éå†æ“ä½œå°‘å‘¢ï¼Ÿå› ä¸ºMysqlæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè€ŒMongodbæ˜¯éå…³ç³»å‹æ•°æ®ã€‚</p><p>å¹³è¡¡äºŒå‰æ ‘åˆ™æ˜¯å­æ ‘é«˜è¯»ä¸èƒ½è¶…è¿‡2ï¼ŒBæ ‘éå¶å­èŠ‚ç‚¹ä¹Ÿå¯ä»¥å­˜å‚¨æ•°æ®ï¼ŒB+æ ‘åˆ™æ˜¯å¶å­èŠ‚ç‚¹æ‰å¯ä»¥å­˜å‚¨æ•°æ®ã€‚</p><ul><li>æˆ‘ä»¬è¯´çš„==å¹³è¡¡äºŒå‰æ ‘ç»“æ„ï¼ŒæŒ‡çš„æ˜¯é€»è¾‘ç»“æ„ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘ï¼Œå…¶ç‰©ç†å®ç°æ˜¯æ•°ç»„==ã€‚ç„¶åç”±äºåœ¨é€»è¾‘ç»“æ„ä¸Šç›¸è¿‘çš„èŠ‚ç‚¹åœ¨ç‰©ç†ç»“æ„ä¸Šå¯èƒ½ä¼šå·®å¾ˆè¿œã€‚å› æ­¤ï¼Œæ¯æ¬¡è¯»å–çš„ç£ç›˜é¡µçš„æ•°æ®ä¸­æœ‰è®¸å¤šæ˜¯ç”¨ä¸ä¸Šçš„ã€‚å› æ­¤ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä¸­è¦è¿›è¡Œè®¸å¤šæ¬¡çš„ç£ç›˜è¯»å–æ“ä½œã€‚è€Œé€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„åº”è¯¥æ˜¯å°½å¯èƒ½å°‘çš„æ‰§è¡Œç£ç›˜IOæ“ä½œï¼Œå› ä¸ºæ‰§è¡Œç£ç›˜IOæ“ä½œéå¸¸çš„è€—æ—¶ã€‚å› æ­¤ï¼Œå¹³è¡¡äºŒå‰æ ‘å¹¶ä¸é€‚åˆä½œä¸ºç´¢å¼•ç»“æ„</li><li>çº¢é»‘æ ‘è¿™ç§ç»“æ„==hæ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§==ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨çº¢é»‘æ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰ç»“æ„çš„è¯ï¼Œæ¯æ¬¡ç£ç›˜é¢„è¯»ä¸­çš„å¾ˆå¤šæ•°æ®æ˜¯ç”¨ä¸ä¸Šçš„æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒæ²¡èƒ½åˆ©ç”¨å¥½ç£ç›˜é¢„è¯»çš„æä¾›çš„æ•°æ®ã€‚ç„¶ååˆç”±äºæ·±åº¦å¤§ï¼ˆè¾ƒBæ ‘è€Œè¨€ï¼‰ï¼Œæ‰€ä»¥è¿›è¡Œçš„ç£ç›˜IOæ“ä½œæ›´å¤šã€‚</li><li>==Bæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…³é”®å­—ï¼Œå®ƒå°†èŠ‚ç‚¹å¤§å°è®¾ç½®ä¸ºç£ç›˜é¡µçš„å¤§å°ï¼Œå……åˆ†åˆ©ç”¨äº†ç£ç›˜é¢„è¯»çš„åŠŸèƒ½==ã€‚æ¯æ¬¡è¯»å–ç£ç›˜é¡µæ—¶å°±ä¼šè¯»å–ä¸€æ•´ä¸ªèŠ‚ç‚¹ã€‚==ä¹Ÿæ­£å› æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ç€éå¸¸å¤šä¸ªå…³é”®å­—ï¼Œæ ‘çš„æ·±åº¦å°±ä¼šéå¸¸çš„å°==ã€‚è¿›è€Œè¦æ‰§è¡Œçš„ç£ç›˜è¯»å–æ“ä½œæ¬¡æ•°å°±ä¼šéå¸¸å°‘ï¼Œæ›´å¤šçš„æ˜¯åœ¨å†…å­˜ä¸­å¯¹è¯»å–è¿›æ¥çš„æ•°æ®è¿›è¡ŒæŸ¥æ‰¾ã€‚</li><li>==Bæ ‘çš„æŸ¥è¯¢ï¼Œä¸»è¦å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œè€Œå¹³è¡¡äºŒå‰æ ‘çš„æŸ¥è¯¢ï¼Œåˆ™æ˜¯å‘ç”Ÿåœ¨ç£ç›˜è¯»å–ä¸­==ã€‚å› æ­¤ï¼Œè™½ç„¶Bæ ‘æŸ¥è¯¢æŸ¥è¯¢çš„æ¬¡æ•°ä¸æ¯”å¹³è¡¡äºŒå‰æ ‘çš„æ¬¡æ•°å°‘ï¼Œä½†æ˜¯ç›¸æ¯”èµ·ç£ç›˜IOé€Ÿåº¦ï¼Œå†…å­˜ä¸­æ¯”è¾ƒçš„è€—æ—¶å°±å¯ä»¥å¿½ç•¥ä¸è®¡äº†ã€‚å› æ­¤ï¼ŒBæ ‘æ›´é€‚åˆä½œä¸ºç´¢å¼•ã€‚</li></ul><h1 id="ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB-æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„-ä»¥åŠç´¢å¼•åŸç†-é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½"><a href="#ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB-æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„-ä»¥åŠç´¢å¼•åŸç†-é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½" class="headerlink" title="ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB+æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„ ä»¥åŠç´¢å¼•åŸç†(é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½"></a><a href="https://www.cnblogs.com/aspirant/p/9214485.html" target="_blank" rel="noopener">ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB+æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„ ä»¥åŠç´¢å¼•åŸç†(é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½</a></h1><p>B+Treeæ˜¯mysqlä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€ä¸ªç´¢å¼•æ•°æ®ç»“æ„ï¼Œæ˜¯Inodbå’ŒMyisamå­˜å‚¨å¼•æ“æ¨¡å¼çš„ç´¢å¼•ç±»å‹ã€‚ç›¸å¯¹Hashç´¢å¼•ï¼ŒB+Treeåœ¨æŸ¥æ‰¾å•æ¡è®°å½•çš„é€Ÿåº¦æ¯”ä¸ä¸ŠHashç´¢å¼•(Memoryè¡¨åªå­˜åœ¨å†…å­˜ä¸­)ï¼Œä½†æ˜¯å› ä¸ºæ›´é€‚åˆæ’åºç­‰æ“ä½œï¼Œæ‰€ä»¥å®ƒæ›´å—æ¬¢è¿ã€‚æ¯•ç«Ÿä¸å¯èƒ½åªå¯¹æ•°æ®åº“è¿›è¡Œå•æ¡è®°å½•çš„æ“ä½œã€‚</p><ul><li><p>å¸¦é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree</p><blockquote><p>B+Treeæ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”å¢åŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æœ‰æŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚è¿™æ ·åšæ˜¯ä¸ºäº†æé«˜åŒºé—´æ•ˆç‡ï¼Œä¾‹å¦‚æŸ¥è¯¢keyä¸ºä»18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åï¼Œåªè¦é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéå†å°±å¯ä»¥ä»¥æ­¤å‘è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæå¤§æé«˜äº†åŒºé—´æŸ¥è¯¢æ•ˆç‡ã€‚</p></blockquote></li><li><p>å¤§å¤§å‡å°‘ç£ç›˜I/Oè¯»å–</p><blockquote><p>æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥</p></blockquote></li></ul><p><strong>å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXTï¼‰=mysqlçš„myISAMæœç´¢å¼•æ“é»˜è®¤çš„ç´¢å¼•ç±»å‹</strong>==ä¸è¿‡åˆ‡è®°å¯¹äºå¤§å®¹é‡çš„æ•°æ®è¡¨ï¼Œç”Ÿæˆå…¨æ–‡ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ—¶é—´éå¸¸æ¶ˆè€—ç¡¬ç›˜ç©ºé—´çš„åšæ³•==ã€‚</p><p>æ–‡æœ¬å­—æ®µä¸Šçš„æ™®é€šç´¢å¼•åªèƒ½åŠ å¿«å¯¹å‡ºç°åœ¨å­—æ®µå†…å®¹æœ€å‰é¢çš„å­—ç¬¦ä¸²(ä¹Ÿå°±æ˜¯å­—æ®µå†…å®¹å¼€å¤´çš„å­—ç¬¦)è¿›è¡Œæ£€ç´¢æ“ä½œã€‚å¦‚æœå­—æ®µé‡Œå­˜æ”¾çš„æ˜¯ç”±å‡ ä¸ªã€ç”šè‡³æ˜¯å¤šä¸ªå•è¯æ„æˆçš„è¾ƒå¤§æ®µæ–‡å­—ï¼Œæ™®é€šç´¢å¼•å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚è¿™ç§æ£€ç´¢å¾€å¾€ä»¥LIKE%word%çš„å½¢å¼å‡ºç°ï¼Œè¿™å¯¹MySQLæ¥è¯´å¾ˆå¤æ‚ï¼Œå¦‚æœéœ€è¦å¤„ç†çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå“åº”æ—¶é—´å°±ä¼šå¾ˆé•¿ã€‚</p><p>è¿™ç±»åœºåˆæ­£æ˜¯å…¨æ–‡ç´¢å¼•(full-textindex)å¯ä»¥å¤§æ˜¾èº«æ‰‹çš„åœ°æ–¹ã€‚åœ¨ç”Ÿæˆè¿™ç§ç±»å‹çš„ç´¢å¼•æ—¶ï¼ŒMySQLå°†æŠŠåœ¨æ–‡æœ¬ä¸­å‡ºç°çš„æ‰€æœ‰å•è¯åˆ›å»ºä¸ºä¸€ä»½æ¸…å•ï¼ŒæŸ¥è¯¢æ“ä½œå°†æ ¹æ®è¿™ä»½æ¸…å•å»æ£€ç´¢æœ‰å…³çš„æ•°æ®è®°å½•ã€‚å…¨æ–‡ç´¢å¼•å³å¯ä»¥éšæ•°æ®è¡¨ä¸€åŒåˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç­‰æ—¥åæœ‰å¿…è¦æ—¶å†ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤æ·»åŠ ï¼š<br><code>ALTER TABLE table_name ADD FULLTEXT(column1, column2)</code></p><p>æœ‰äº†å…¨æ–‡ç´¢å¼•ï¼Œå°±å¯ä»¥ç”¨SELECTæŸ¥è¯¢å‘½ä»¤å»æ£€ç´¢é‚£äº›åŒ…å«ç€ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šå•è¯çš„æ•°æ®è®°å½•äº†ã€‚ä¸‹é¢æ˜¯è¿™ç±»æŸ¥è¯¢å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ï¼š<br>ã€€ã€€<br><code>SELECT * FROM table_name WHERE MATCH(column1, column2) AGAINST(&#39;word1&#39;, &#39;word2&#39;, &#39;word3&#39;)</code></p><p>ä¸Šé¢è¿™æ¡å‘½ä»¤å°†æŠŠcolumn1å’Œcolumn2å­—æ®µé‡Œæœ‰word1ã€word2å’Œword3çš„æ•°æ®è®°å½•å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ã€‚</p><p><a href="https://blog.csdn.net/qq_33330687/article/details/89004462" target="_blank" rel="noopener">InnoDBå¦‚ä½•è§£å†³å¹»è¯»</a></p><blockquote><p>ä½¿ç”¨MVCC</p></blockquote><p><a href="https://www.jianshu.com/p/bbaeab492a64" target="_blank" rel="noopener">ä¸€æ¡SQLè¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„</a></p><p>ç”±serverå±‚å’Œå­˜å‚¨å¼•æ“ç»„æˆ</p><blockquote><p>server å±‚åŒ…æ‹¬è¿æ¥å™¨ã€åˆ†æå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ï¼Œæ¶µç›– MySQLçš„æ ¸å¿ƒæœåŠ¡ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­¦ã€åŠ å¯†å‡½æ•°ç­‰ï¼‰ï¼Œè¿˜æœ‰æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚</p></blockquote><p><a href="https://blog.csdn.net/zxp0727/article/details/84580277" target="_blank" rel="noopener">ä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</a></p><blockquote><p>é‡Œé¢åŒ…å«binlogå’Œredolog,ä¸¤é˜¶æ®µæäº¤</p></blockquote><h4 id="ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè§†å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚</li><li>æ¸¸æ ‡æ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚æ¸¸æ ‡å¯ä»¥å®šåœ¨è¯¥å•å…ƒä¸­çš„ç‰¹å®šè¡Œï¼Œä»ç»“æœé›†çš„å½“å‰è¡Œæ£€ç´¢ä¸€è¡Œæˆ–å¤šè¡Œã€‚å¯ä»¥å¯¹ç»“æœé›†å½“å‰è¡Œåšä¿®æ”¹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚</li></ul><h3 id="è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"><a href="#è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"></a>è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h3><h3 id="åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><p>åŒä¸€ä¸ªå±æ€§é‡Œé¢åŒ…å«å¤šä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ç´¢å¼•.enum åœ¨æ•°æ®åº“åº•å±‚ä»¥æ•´å‹æ–¹å¼å‚¨å­˜ï¼Œä» 1 å¼€å§‹ï¼Œ0 ç”¨äºæŒ‡ä»£ç©ºæˆ–é”™è¯¯çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><h3 id="CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ"><a href="#CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ"></a>CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ</h3><p>char å›ºå®šé•¿åº¦255ï¼Œä¸è¶³çš„éƒ¨åˆ†è¡¥ç©ºæ ¼ï¼Œå–å‡ºæ—¶å†å»æ‰ç©ºæ ¼ã€‚varchar ä¸å®šé•¿åº¦</p><h3 id="drop-deleteä¸truncateçš„åŒºåˆ«"><a href="#drop-deleteä¸truncateçš„åŒºåˆ«" class="headerlink" title="drop,deleteä¸truncateçš„åŒºåˆ«"></a>drop,deleteä¸truncateçš„åŒºåˆ«</h3><p>dropåˆ é™¤è¡¨ï¼Œtruncateæ¸…ç©ºè¡¨ï¼Œdeleteåˆ é™¤è¡¨ã€dropå’Œtruncateä¸èƒ½å›æ»šã€‚</p><h3 id="å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«"><a href="#å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«"></a>å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«</h3><ul><li>è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å®ƒå¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»è€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚ï¼ŒæŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚</li><li>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œä»¥ååœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯SQLè¯­å¥æ‰§è¡Œè¦å¿«ã€‚å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚<blockquote><p>å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘è¿‡çš„ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ç›´æ¥å­˜æ”¾äºæ•°æ®åº“ä¸­ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹åç›´æ¥è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œé€šè®¯ã€‚å®‰å…¨æ€§é«˜ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æœ‰ä¸€å®šæƒé™çš„ç”¨æˆ·ã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯å‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚==ç¼ºç‚¹ï¼šç§»æ¤æ€§å·®==ã€‚</p></blockquote></li></ul><p>2ï¼‰å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚</p><h3 id="å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ"><a href="#å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ" class="headerlink" title="å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ"></a><a href="https://www.cnblogs.com/hwlong/p/9009311.html" target="_blank" rel="noopener">å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›</a>ï¼Ÿ</h3><p>æ•°æ®å®Œæ•´æ€§(Data Integrity)æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®(Accuracy)å’Œå¯é æ€§(Reliability)ã€‚</p><ul><li>å®ä½“å®Œæ•´æ€§ï¼šè§„å®šè¡¨çš„æ¯ä¸€è¡Œåœ¨è¡¨ä¸­æ˜¯æƒŸä¸€çš„å®ä½“ã€‚</li><li>åŸŸå®Œæ•´æ€§ï¼šæ˜¯æŒ‡è¡¨ä¸­çš„åˆ—å¿…é¡»æ»¡è¶³æŸç§ç‰¹å®šçš„æ•°æ®ç±»å‹çº¦æŸï¼Œå…¶ä¸­çº¦æŸåˆåŒ…æ‹¬å–å€¼èŒƒå›´ã€ç²¾åº¦ç­‰è§„å®šã€‚</li><li>å‚ç…§å®Œæ•´æ€§ï¼šæ˜¯æŒ‡ä¸¤ä¸ªè¡¨çš„ä¸»å…³é”®å­—å’Œå¤–å…³é”®å­—çš„æ•°æ®åº”ä¸€è‡´ï¼Œä¿è¯äº†è¡¨ä¹‹é—´çš„æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé˜²æ­¢äº†æ•°æ®ä¸¢å¤±æˆ–æ— æ„ä¹‰çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­æ‰©æ•£ã€‚</li><li>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼šä¸åŒçš„å…³ç³»æ•°æ®åº“ç³»ç»Ÿæ ¹æ®å…¶åº”ç”¨ç¯å¢ƒçš„ä¸åŒï¼Œå¾€å¾€è¿˜éœ€è¦ä¸€äº›ç‰¹æ®Šçš„çº¦æŸæ¡ä»¶ã€‚ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§å³æ˜¯é’ˆå¯¹æŸä¸ªç‰¹å®šå…³ç³»æ•°æ®åº“çš„çº¦æŸæ¡ä»¶ï¼Œå®ƒåæ˜ æŸä¸€å…·ä½“åº”ç”¨å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ã€‚</li></ul><p>ä¸è¡¨æœ‰å…³çš„çº¦æŸï¼šåŒ…æ‹¬åˆ—çº¦æŸ(NOT NULLï¼ˆéç©ºçº¦æŸï¼‰)å’Œè¡¨çº¦æŸ(PRIMARY KEYã€foreign keyã€checkã€UNIQUE)</p><p>MySqlä¸æ”¯æŒcheck</p><h3 id="Mysql-çš„å­˜å‚¨å¼•æ“-myisamå’Œinnodbçš„åŒºåˆ«ã€‚"><a href="#Mysql-çš„å­˜å‚¨å¼•æ“-myisamå’Œinnodbçš„åŒºåˆ«ã€‚" class="headerlink" title="Mysql çš„å­˜å‚¨å¼•æ“,myisamå’Œinnodbçš„åŒºåˆ«ã€‚"></a>Mysql çš„å­˜å‚¨å¼•æ“,myisamå’Œinnodbçš„åŒºåˆ«ã€‚</h3><pre><code>NULL | myisam | innodb</code></pre><p>   â€”|â€”|â€”<br>äº‹åŠ¡æ”¯æŒ|ä¸æ”¯æŒ| æ”¯æŒ| row 2 col 2<br>å­˜å‚¨ç»“æ„     |ä¸‰ç§æ–‡ä»¶  | ä¸€ç§æ–‡ä»¶<br>å­˜å‚¨ç©ºé—´     |ä½“ç§¯å° | ä½“ç§¯å¤§<br>å¯ç§»æ¤æ€§     |æ–¹ä¾¿ | å›°éš¾<br>é”åŠ›åº¦     |è¡¨çº§é”| è¡¨çº§é”ï¼Œè¡Œçº§é”<br>å…¨æ–‡ç´¢å¼•     |æ”¯æŒ | ä¸æ”¯æŒ<br>è¡¨ä¸»é”®     |å¯ä»¥æ²¡æœ‰|å¿…é¡»æœ‰ï¼Œæ²¡æœ‰å°±è‡ªåŠ¨ç”Ÿæˆ<br>å¤–é”®     |ä¸æ”¯æŒ | æ”¯æŒ</p><h2 id="1-é”"><a href="#1-é”" class="headerlink" title="1.é”"></a>1.é”</h2><ul><li>MyISAM æ˜¯éäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼Œé€‚åˆç”¨äºé¢‘ç¹æŸ¥è¯¢çš„åº”ç”¨ã€‚è¡¨é”ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼Œé€‚åˆå°æ•°æ®ï¼Œå°å¹¶å‘ã€‚</li><li>Innodbæ˜¯æ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼Œåˆäºæ’å…¥å’Œæ›´æ–°æ“ä½œæ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œè®¾è®¡åˆç†çš„è¯æ˜¯è¡Œé”ï¼ˆæœ€å¤§åŒºåˆ«å°±åœ¨é”çš„çº§åˆ«ä¸Šï¼‰ï¼Œé€‚åˆå¤§æ•°æ®ï¼Œå¤§å¹¶å‘<br><img src="https://upload-images.jianshu.io/upload_images/2604566-27832dbe20e803fa.png" alt="image"><h3 id="è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«"><a href="#è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«" class="headerlink" title="è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«"></a>è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«</h3><h5 id="è¡¨é”"><a href="#è¡¨é”" class="headerlink" title="è¡¨é”"></a>è¡¨é”</h5></li><li>ç‰¹ç‚¹ï¼šå¼€é”€å°ã€åŠ é”å¿«ã€<strong>æ— æ­»é”</strong>ï¼›é”ç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡é«˜ï¼Œ<strong>é«˜å¹¶å‘ä¸‹æ€§èƒ½ä½</strong></li><li>åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚æŸ¥è¯¢æ“ä½œï¼ˆSELECTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚<h5 id="è¡Œé”"><a href="#è¡Œé”" class="headerlink" title="è¡Œé”"></a>è¡Œé”</h5></li><li>ç‰¹ç‚¹ï¼šé”çš„ç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ã€<strong>å¤„ç†å¹¶å‘çš„èƒ½åŠ›å¼º</strong>ï¼›å¼€é”€å¤§ã€åŠ é”æ…¢ã€<strong>ä¼šå‡ºç°æ­»é”</strong></li><li><p>åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼›å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ã€‚</p></li><li><p>ä¹è§‚é”ï¼šä¸åŠ é”ï¼Œåªæœ‰åœ¨æ›´æ–°æ—¶éªŒè¯æ•°æ®æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æ›´æ–°ï¼Œååé‡è¾ƒé«˜ï¼Œé€‚ç”¨äºå¤šè¯»åœºæ™¯ã€‚å®ƒ==å‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆå½“å‰æ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›æ»š==ã€‚</p><blockquote><p>ä¹è§‚é”å®ç°æ–¹å¼æ˜¯ï¼šç‰ˆæœ¬å·versionå’ŒCAS(compare and swap)</p></blockquote></li><li>æ‚²è§‚é”ï¼šè¯»å–æ—¶åŠ é”ï¼Œæ›´æ–°å®Œé‡Šæ”¾é”ï¼Œå†æ­¤è¿‡ç¨‹ä¸­ä¼šé€ æˆå…¶ä»–çº¿ç¨‹é˜»å¡ï¼Œå¯¼è‡´ååé‡ä½ï¼Œé€‚ç”¨äºå¤šå†™åœºæ™¯ã€‚å½“äº‹åŠ¡Aå¯¹æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œ==å¹¶ä¸”å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾åï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œ==ï¼Œè¿™é‡Œäº‹åŠ¡Aæ‰€æ–½åŠ çš„é”å°±å«æ‚²è§‚é”ã€‚</li></ul><blockquote><p>è¡Œé”(å…±äº«é”å’Œæ’ä»–é”),é—´éš™é”(next-keylockï¼‰éƒ½å±äºæ‚²è§‚é”ã€‚<br>InnoDBå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š</p><ul><li>å…±äº«é”ï¼ˆSï¼‰ï¼š==å…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”==ã€‚</li><li>æ’ä»–é”ï¼ˆX)ï¼š==å…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚==<br>å¦å¤–ï¼Œä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®ç°å¤šç²’åº¦é”æœºåˆ¶ï¼ŒInnoDBè¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯è¡¨é”ã€‚</li></ul></blockquote><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ISé”ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”* ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„IXé”ã€‚<h5 id="é—´éš™é”ï¼ˆNext-Keyé”ï¼‰"><a href="#é—´éš™é”ï¼ˆNext-Keyé”ï¼‰" class="headerlink" title="é—´éš™é”ï¼ˆNext-Keyé”ï¼‰:"></a>é—´éš™é”ï¼ˆNext-Keyé”ï¼‰:</h5></li><li>å½“æˆ‘ä»¬ç”¨èŒƒå›´æ¡ä»¶è€Œä¸æ˜¯ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•é¡¹åŠ é”ï¼›</li><li>å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAP)â€ï¼ŒInnoDBä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é—´éš™é”ï¼ˆNext-Key)é”ã€‚</li></ul><hr><ul><li>1:<strong>è¡¨çº§é”ä¸ä¼šæ­»é”,è¡Œçº§é”å’Œé¡µçº§é”å¯èƒ½æ­»é”</strong></li><li>2:åœ¨æ•°æ®åº“å®ç°èµ„æºé”å®šçš„è¿‡ç¨‹ä¸­ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œé”å®šç›¸åŒæ•°æ®é‡çš„æ•°æ®æ‰€éœ€è¦æ¶ˆè€—çš„å†…å­˜æ•°é‡æ˜¯è¶Šæ¥è¶Šå¤šçš„ï¼Œå®ç°ç®—æ³•ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ä¸è¿‡ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œåº”ç”¨ç¨‹åºçš„è®¿é—®è¯·æ±‚é‡åˆ°é”ç­‰å¾…çš„å¯èƒ½æ€§ä¹Ÿä¼šéšä¹‹é™ä½ï¼Œç³»ç»Ÿæ•´ä½“å¹¶å‘åº¦ä¹Ÿéšä¹‹æå‡ã€‚</li><li>3:==ä»é”çš„è§’åº¦æ¥è¯´ï¼Œè¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Webåº”==ç”¨ï¼›è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶å‘æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿã€‚</li><li>4:æ„å‘é”æ˜¯InnoDBè‡ªåŠ¨åŠ çš„ï¼Œä¸éœ€ç”¨æˆ·å¹²é¢„ã€‚==å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)==ï¼›å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼›</li><li>5:InnoDBè¡Œé”å®ç°æ–¹å¼: ==InnoDBè¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”==</li></ul><h3 id="Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£"><a href="#Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£" class="headerlink" title="Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£"></a><a href="https://blog.csdn.net/w2064004678/article/details/83012387" target="_blank" rel="noopener">Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£</a></h3><p>MVCCæ˜¯ä¸€ç§å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚MVCCæ˜¯é€šè¿‡ä¿å­˜æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ¥å®ç°çš„ã€‚åœ¨æ¯ä¸ªè¡¨åæ·»åŠ åˆ›å»ºç‰ˆæœ¬å·å’Œåˆ é™¤ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·ä¸ºä¿®æ”¹è¯¥é¡¹çš„äº‹åŠ¡ç‰ˆæœ¬å·ã€‚</p><ul><li>SELECT:InnoDBä¼šæ ¹æ®ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ£€æŸ¥æ¯è¡Œè®°å½•<blockquote><p>InnoDBåªä¼šæŸ¥æ‰¾ç‰ˆæœ¬æ—©äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œ(ä¹Ÿå°±æ˜¯,è¡Œçš„ç³»ç»Ÿç‰ˆæœ¬å·å°äºæˆ–ç­‰äºäº‹åŠ¡çš„ç³»ç»Ÿç‰ˆæœ¬å·)ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–çš„è¡Œï¼Œè¦ä¹ˆæ˜¯åœ¨äº‹åŠ¡å¼€å§‹å‰å·²ç»å­˜åœ¨çš„ï¼Œè¦ä¹ˆæ˜¯äº‹åŠ¡è‡ªèº«æ’å…¥æˆ–è€…ä¿®æ”¹è¿‡çš„.</p></blockquote></li></ul><blockquote><p>è¡Œçš„åˆ é™¤ç‰ˆæœ¬è¦ä¹ˆæœªå®šä¹‰,è¦ä¹ˆå¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·,è¿™å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–åˆ°çš„è¡Œï¼Œåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰æœªè¢«åˆ é™¤.<br>åªæœ‰a,båŒæ—¶æ»¡è¶³çš„è®°å½•ï¼Œæ‰èƒ½è¿”å›ä½œä¸ºæŸ¥è¯¢ç»“æœ.</p></blockquote><ul><li><p>DELETE:InnoDBä¼šä¸ºåˆ é™¤çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·(äº‹åŠ¡çš„ID)ä½œä¸ºåˆ é™¤æ ‡è¯†.</p></li><li><p>UPDATE:InnoDBæ‰§è¡ŒUPDATEï¼Œå®é™…ä¸Šæ˜¯æ–°æ’å…¥äº†ä¸€è¡Œè®°å½•ï¼Œå¹¶ä¿å­˜å…¶åˆ›å»ºæ—¶é—´ä¸ºå½“å‰äº‹åŠ¡çš„IDï¼ŒåŒæ—¶ä¿å­˜å½“å‰äº‹åŠ¡IDåˆ°è¦UPDATEçš„è¡Œçš„åˆ é™¤æ—¶é—´ã€‚</p></li></ul><h2 id="é”ç­–ç•¥"><a href="#é”ç­–ç•¥" class="headerlink" title="é”ç­–ç•¥"></a><a href="https://www.nowcoder.com/discuss/151430" target="_blank" rel="noopener">é”ç­–ç•¥</a></h2><h2 id="2-æ—¥å¿—"><a href="#2-æ—¥å¿—" class="headerlink" title="2.æ—¥å¿—"></a>2.æ—¥å¿—</h2><h3 id="redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“"><a href="#redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“" class="headerlink" title="redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“"></a>redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“</h3><ul><li>binlog</li><li>redolog,ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œç¼“å­˜åŒºä¸­æ•°æ®ä¼šæ…¢æ…¢æ›´æ–°åˆ°æ•°æ®åº“çš„ç¡¬ç›˜ä¸Šã€‚</li><li>undologï¼Œè®°å½•äº†ä¿®æ”¹å‡ ç‡ï¼Œå¯ä»¥éšä¾¿å›æ»šï¼Œä¿è¯åŸå­æ€§ã€‚</li></ul><h2 id="3-äº‹åŠ¡"><a href="#3-äº‹åŠ¡" class="headerlink" title="3.äº‹åŠ¡"></a>3.äº‹åŠ¡</h2><p>MVCC (MultiVersion Concurrency Control) å«åš==å¤šç‰ˆæœ¬å¹¶å‘==æ§åˆ¶ã€‚==ç”±undologå’Œè®°å½•ç‰ˆæœ¬çš„ä¸€ä¸ªä¸œè¥¿ç»„æˆ==ã€‚</p><blockquote><p>InnoDBçš„ MVCCï¼Œæ˜¯é€šè¿‡åœ¨æ¯è¡Œè®°å½•çš„åé¢ä¿å­˜ä¸¤ä¸ªéšè—çš„åˆ—æ¥å®ç°çš„ã€‚è¿™ä¸¤ä¸ªåˆ—ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„åˆ›å»ºæ—¶é—´ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„è¿‡æœŸæ—¶é—´ï¼Œå½“ç„¶å­˜å‚¨çš„å¹¶ä¸æ˜¯å®é™…çš„æ—¶é—´å€¼ï¼Œè€Œæ˜¯ç³»ç»Ÿç‰ˆæœ¬å·ã€‚</p></blockquote><p>ä»¥ä¸Šç‰‡æ®µæ‘˜è‡ªã€Šé«˜æ€§èƒ½Mysqlã€‹è¿™æœ¬ä¹¦å¯¹MVCCçš„å®šä¹‰ã€‚ä»–çš„ä¸»è¦å®ç°æ€æƒ³æ˜¯é€šè¿‡==æ•°æ®å¤šç‰ˆæœ¬==æ¥åšåˆ°==è¯»å†™åˆ†ç¦»==ã€‚ä»è€Œå®ç°ä¸åŠ é”è¯»è¿›è€Œåšåˆ°è¯»å†™å¹¶è¡Œã€‚</p><p><strong>MVCCåœ¨mysqlä¸­çš„å®ç°ä¾èµ–çš„æ˜¯undo logä¸read view</strong></p><ul><li>undolog :undologä¸­è®°å½•æŸè¡Œæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚</li><li>read view :ç”¨æ¥åˆ¤æ–­å½“å‰ç‰ˆæœ¬æ•°æ®çš„å¯è§æ€§<h3 id="ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„"><a href="#ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„"></a>ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„</h3></li><li>äº‹åŠ¡çš„åŸå­æ€§æ˜¯é€šè¿‡ undo log æ¥å®ç°çš„</li><li>äº‹åŠ¡çš„æŒä¹…æ€§æ€§æ˜¯é€šè¿‡ redo log æ¥å®ç°çš„</li><li>äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡ (è¯»å†™é”+MVCC)æ¥å®ç°çš„</li><li>è€Œäº‹åŠ¡çš„ç»ˆæå¤§bossä¸€è‡´æ€§æ˜¯é€šè¿‡åŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æ¥å®ç°çš„ï¼ï¼ï¼<blockquote><p>åŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æŠ˜è…¾åŠå¤©çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼ACIDåªæ˜¯ä¸ªæ¦‚å¿µï¼Œäº‹åŠ¡æœ€ç»ˆç›®çš„æ˜¯è¦ä¿éšœæ•°æ®çš„å¯é æ€§ï¼Œä¸€è‡´æ€§</p></blockquote></li><li><a href="https://www.sohu.com/a/316482862_663371" target="_blank" rel="noopener">äº‹åŠ¡æ˜¯å¦‚ä½•é€šè¿‡æ—¥å¿—å®ç°çš„</a></li><li>mysql ä¸ºäº†æå‡æ€§èƒ½ä¸ä¼šæŠŠæ¯æ¬¡çš„ä¿®æ”¹éƒ½å®æ—¶åŒæ­¥åˆ°ç£ç›˜ï¼Œè€Œæ˜¯ä¼šå…ˆå­˜åˆ°Buffer Pool(ç¼“å†²æ± )é‡Œå¤´ï¼ŒæŠŠè¿™ä¸ªå½“ä½œç¼“å­˜æ¥ç”¨ã€‚ç„¶åä½¿ç”¨åå°çº¿ç¨‹å»åšç¼“å†²æ± å’Œç£ç›˜ä¹‹é—´çš„åŒæ­¥ã€‚<blockquote><p>redologæ¥è®°å½•å·²æˆåŠŸæäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šæŠŠredologæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œç³»ç»Ÿé‡å¯ä¹‹ååœ¨è¯»å–redo logæ¢å¤æœ€æ–°æ•°æ®ã€‚redologæ˜¯ç”¨æ¥æ¢å¤æ•°æ®çš„ ç”¨äºä¿éšœï¼Œå·²æäº¤äº‹åŠ¡çš„æŒä¹…åŒ–ç‰¹æ€§</p></blockquote></li></ul><blockquote><p>undolog å«åšå›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚<strong>ä»–æ­£å¥½è·Ÿå‰é¢æ‰€è¯´çš„é‡åšæ—¥å¿—æ‰€è®°å½•çš„ç›¸åï¼Œredologè®°å½•æ•°æ®è¢«ä¿®æ”¹åçš„ä¿¡æ¯ã€‚undologä¸»è¦è®°å½•çš„æ˜¯æ•°æ®çš„é€»è¾‘å˜åŒ–</strong>ï¼Œä¸ºäº†åœ¨å‘ç”Ÿé”™è¯¯æ—¶å›æ»šä¹‹å‰çš„æ“ä½œï¼Œéœ€è¦å°†ä¹‹å‰çš„æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œç„¶ååœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰å¯ä»¥å›æ»šã€‚undologè®°å½•äº‹åŠ¡ä¿®æ”¹ä¹‹å‰ç‰ˆæœ¬çš„æ•°æ®ä¿¡æ¯ï¼Œå› æ­¤å‡å¦‚ç”±äºç³»ç»Ÿé”™è¯¯æˆ–è€…rollbackæ“ä½œè€Œå›æ»šçš„è¯å¯ä»¥æ ¹æ®undologçš„ä¿¡æ¯æ¥è¿›è¡Œå›æ»šåˆ°æ²¡è¢«ä¿®æ”¹å‰çš„çŠ¶æ€ã€‚</p></blockquote><p><code>redoå’Œundo</code>åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š<br>å› ä¸ºäº‹åŠ¡åœ¨ä¿®æ”¹é¡µæ—¶ï¼Œè¦å…ˆè®° undoï¼Œåœ¨è®° undo ä¹‹å‰è¦è®° undo çš„ redoï¼Œ ç„¶åä¿®æ”¹æ•°æ®é¡µï¼Œå†è®°æ•°æ®é¡µä¿®æ”¹çš„ redoã€‚ Redoï¼ˆé‡Œé¢åŒ…æ‹¬ undo çš„ä¿®æ”¹ï¼‰ ä¸€å®šè¦æ¯”æ•°æ®é¡µå…ˆæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚ å½“äº‹åŠ¡éœ€è¦å›æ»šæ—¶ï¼Œå› ä¸ºæœ‰ undoï¼Œå¯ä»¥æŠŠæ•°æ®é¡µå›æ»šåˆ°å‰é•œåƒçš„çŠ¶æ€ï¼Œå´©æºƒæ¢å¤æ—¶ï¼Œå¦‚æœ redo log ä¸­äº‹åŠ¡æ²¡æœ‰å¯¹åº”çš„ commit è®°å½•ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ undoæŠŠè¯¥äº‹åŠ¡çš„ä¿®æ”¹å›æ»šåˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‚ å¦‚æœæœ‰ commit è®°å½•ï¼Œå°±ç”¨ redo å‰æ»šåˆ°è¯¥äº‹åŠ¡å®Œæˆæ—¶å¹¶æäº¤æ‰ã€‚</p><h2 id="4-ç´¢å¼•"><a href="#4-ç´¢å¼•" class="headerlink" title="4.ç´¢å¼•"></a>4.ç´¢å¼•</h2><h3 id="MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†"><a href="#MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†" class="headerlink" title="MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†"></a><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†</a></h3><h3 id="å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰"><a href="#å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰" class="headerlink" title="å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰"></a>å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰</h3><ul><li><p>å”¯ä¸€ç´¢å¼•</p><blockquote><p>å”¯ä¸€ç´¢å¼•æ˜¯<strong>ä¸å…è®¸å…¶ä¸­ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒç´¢å¼•å€¼çš„ç´¢å¼•</strong>ã€‚å½“ç°æœ‰æ•°æ®ä¸­å­˜åœ¨é‡å¤çš„é”®å€¼æ—¶ï¼Œå¤§å¤šæ•°æ•°æ®åº“ä¸å…è®¸å°†æ–°åˆ›å»ºçš„å”¯ä¸€ç´¢å¼•ä¸è¡¨ä¸€èµ·ä¿å­˜ã€‚æ•°æ®åº“è¿˜å¯èƒ½é˜²æ­¢æ·»åŠ å°†åœ¨è¡¨ä¸­åˆ›å»ºé‡å¤é”®å€¼çš„æ–°æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨employeeè¡¨ä¸­èŒå‘˜çš„å§“(lname)ä¸Šåˆ›å»ºäº†å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ä»»ä½•ä¸¤ä¸ªå‘˜å·¥éƒ½ä¸èƒ½åŒå§“ã€‚</p></blockquote></li><li><p>ä¸»é”®ç´¢å¼•</p><blockquote><p>æ•°æ®åº“è¡¨ç»å¸¸æœ‰ä¸€åˆ—æˆ–åˆ—ç»„åˆï¼Œå…¶å€¼å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¯¥åˆ—ç§°ä¸ºè¡¨çš„ä¸»é”®ã€‚åœ¨æ•°æ®åº“å…³ç³»å›¾ä¸­ä¸ºè¡¨å®šä¹‰ä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹å®šç±»å‹ã€‚è¯¥ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼éƒ½å”¯ä¸€ã€‚å½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»é”®ç´¢å¼•æ—¶ï¼Œå®ƒè¿˜å…è®¸å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚</p></blockquote></li><li><p>èšé›†ç´¢å¼•</p><blockquote><p>è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘ï¼ˆç´¢å¼•ï¼‰é¡ºåºç›¸åŒã€‚ä¸€ä¸ªè¡¨åªèƒ½åŒ…å«ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚å¦‚æœæŸç´¢å¼•ä¸æ˜¯èšé›†ç´¢å¼•ï¼Œåˆ™è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘é¡ºåºä¸åŒ¹é…ã€‚ä¸éèšé›†ç´¢å¼•ç›¸æ¯”ï¼Œèšé›†ç´¢å¼•é€šå¸¸æä¾›æ›´å¿«çš„æ•°æ®è®¿é—®é€Ÿåº¦ã€‚</p></blockquote><h3 id="å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™"><a href="#å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™" class="headerlink" title="å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™"></a>å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™</h3><blockquote><p>ç´¢å¼•æ˜¯å»ºç«‹åœ¨æ•°æ®åº“è¡¨ä¸­çš„æŸäº›åˆ—çš„ä¸Šé¢ã€‚åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œåº”è¯¥è€ƒè™‘åœ¨å“ªäº›åˆ—ä¸Šå¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œåœ¨å“ªäº›åˆ—ä¸Šä¸èƒ½åˆ›å»ºç´¢å¼•ã€‚ä¸€èˆ¬æ¥è¯´åº”è¯¥åœ¨è¿™äº›åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼š</p></blockquote></li><li><p>åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦</p></li><li>åœ¨ä½œä¸ºä¸»é”®çš„åˆ—ä¸Šï¼Œå¼ºåˆ¶è¯¥åˆ—çš„å”¯ä¸€æ€§å’Œç»„ç»‡è¡¨ä¸­æ•°æ®çš„æ’åˆ—ç»“æ„ï¼›</li><li>åœ¨ç»å¸¸ç”¨åœ¨è¿æ¥çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿æ¥çš„é€Ÿåº¦ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ ¹æ®èŒƒå›´è¿›è¡Œæœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œå…¶æŒ‡å®šçš„èŒƒå›´æ˜¯è¿ç»­çš„ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æ’åºï¼ŒåŠ å¿«æ’åºæŸ¥è¯¢æ—¶é—´ï¼›</li><li>åœ¨ç»å¸¸ä½¿ç”¨åœ¨WHEREå­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚</li></ul><h3 id="ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨"></a>ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨</h3><ul><li>æ¡ä»¶ä¸­ä½¿ç”¨äº† orï¼Œè€Œç›¸å…³åˆ—ä¸å…¨æœ‰ç´¢å¼•</li><li>æ¡ä»¶ä¸­ä½¿ç”¨äº†andï¼Œè€Œç›¸å…³åˆ—ä¸æ»¡è¶³æœ€å·¦åŸåˆ™</li><li>ç´¢å¼•åˆ—çš„æ•°æ®ç±»å‹å‡ºç°éšå½¢è½¬æ¢ï¼Œå¦‚varcharä¸åŠ å•å¼•å·çš„è¯å¯èƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºintå‹ï¼‰</li><li>likeæŸ¥è¯¢æ˜¯ä»¥%å¼€å¤´</li><li>where å­å¥é‡Œå¯¹ç´¢å¼•åˆ—ä¸Šæœ‰æ•°å­¦è¿ç®—/å‡½æ•°</li><li>mysqlä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ</h3></li><li>å¯¹äºé‚£äº›åœ¨æŸ¥è¯¢ä¸­==å¾ˆå°‘ä½¿ç”¨æˆ–è€…å‚è€ƒçš„åˆ—ä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¢ç„¶è¿™äº›åˆ—å¾ˆå°‘ä½¿ç”¨åˆ°ï¼Œå› æ­¤æœ‰ç´¢å¼•æˆ–è€…æ— ç´¢å¼•ï¼Œå¹¶ä¸èƒ½æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ç›¸åï¼Œç”±äºå¢åŠ äº†ç´¢å¼•ï¼Œåè€Œé™ä½äº†ç³»ç»Ÿçš„ç»´æŠ¤é€Ÿåº¦å’Œå¢å¤§äº†ç©ºé—´éœ€æ±‚ã€‚</li><li>å¯¹äºé‚£äº›==åªæœ‰å¾ˆå°‘æ•°æ®å€¼çš„åˆ—==ä¹Ÿä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚ä¸¾ä¾‹æ¯”å¦‚æ€§åˆ«åªæœ‰ç”·å’Œå¥³</li><li>å¯¹äº==é‚£äº›å®šä¹‰ä¸ºtext,imageå’Œbitæ•°æ®ç±»å‹çš„åˆ—ä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™äº›åˆ—çš„æ•°æ®é‡è¦ä¹ˆç›¸å½“å¤§ï¼Œè¦ä¹ˆå–å€¼å¾ˆå°‘==ã€‚</li><li>ç»==å¸¸é¢‘ç¹æ›´æ–°çš„åˆ—==ä¸è¦å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºè‚¯å®šä¼šå½±å“æ’å…¥æˆ–æ›´æ–°çš„æ•ˆç‡</li><li>å°½é‡é¿==å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ ï¼= æˆ–è€… &lt;&gt; æ“ä½œç¬¦ï¼ŒæŸ¥è¯¢å¼•ç”¨ä¼šæ”¾å¼ƒç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«==æã€‚</li><li>å½“==ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¿®æ”¹æ€§èƒ½å’Œæ£€ç´¢æ€§èƒ½æ˜¯äº’ç›¸çŸ›ç›¾çš„ã€‚å½“å¢åŠ ç´¢å¼•æ—¶ï¼Œä¼šæé«˜æ£€ç´¢æ€§èƒ½ï¼Œä½†æ˜¯ä¼šé™ä½ä¿®æ”¹æ€§èƒ½ã€‚å½“å‡å°‘ç´¢å¼•æ—¶ï¼Œä¼šæé«˜ä¿®æ”¹æ€§èƒ½ï¼Œé™ä½æ£€ç´¢æ€§èƒ½ã€‚å› æ­¤ï¼Œå½“ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•ã€‚</li><li>å°½é‡é¿å…NULLï¼šåœ¨MySQLä¸­ï¼Œ==å«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚==ã€‚å¯ä»¥é‡‡ç”¨0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼<blockquote><p>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ã€‚ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœè¦å»ºç«‹èšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆç”¨B-æ ‘"><a href="#ä¸ºä»€ä¹ˆç”¨B-æ ‘" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨B-æ ‘"></a>ä¸ºä»€ä¹ˆç”¨B-æ ‘</h3>ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æ„çš„ä¼˜åŠ£ã€‚å…ˆä»B-Treeåˆ†æï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†==ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥== ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®é™…å®ç°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š</li></ul><p>æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®ç°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚</p><p>ä¸ºä»€ä¹ˆä¸ç”¨çº¢é»‘æ ‘</p><blockquote><p>çº¢é»‘æ ‘è¿™ç§ç»“æ„ï¼Œh(å±‚æ•°)æ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚</p></blockquote><h3 id="MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚"><a href="#MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚" class="headerlink" title="MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚"></a>MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚</h3><p>ä¾‹å¦‚ï¼š åœ¨WHEREæ¡ä»¶çš„LIKEå…³é”®å­—åŒ¹é…çš„å­—ç¬¦ä¸²ä»¥â€%â€œå¼€å¤´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•æ˜¯ä¸ä¼šèµ·åˆ°ä½œç”¨çš„ï¼›WHEREæ¡ä»¶ä¸­ä½¿ç”¨ORå…³é”®å­—æ¥è¿æ¥å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œé‚£ä¹ˆå…¶ä»–çš„ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ï¼›å¤šåˆ—ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤šåˆ—ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ã€‚ ä½¿ç”¨inæŸ¥è¯¢æ—¶ï¼ŒinæŸ¥è¯¢æ¡ä»¶è¶…è¿‡æ•°æ®åº“è¡¨çš„ä¸€åŠçš„æ—¶å€™ä¹Ÿä¼šå¤±æ•ˆã€‚</p><h3 id="æœ€å·¦åŒ¹é…åŸåˆ™"><a href="#æœ€å·¦åŒ¹é…åŸåˆ™" class="headerlink" title="æœ€å·¦åŒ¹é…åŸåˆ™"></a>æœ€å·¦åŒ¹é…åŸåˆ™</h3><ul><li>ç´¢å¼•å­—æ®µè¦å°½é‡çš„å°</li><li>ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼ˆå³ä»å·¦å¾€å³åŒ¹é…ï¼‰ï¼šå½“b+æ ‘çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚(name,age,sex)çš„æ—¶å€™ï¼Œb+æ•°æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ¥å»ºç«‹æœç´¢æ ‘çš„ï¼Œæ¯”å¦‚å½“(å¼ ä¸‰,20,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢çš„æ—¶å€™ï¼Œb+æ ‘ä¼šä¼˜å…ˆæ¯”è¾ƒnameæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘ï¼Œå¦‚æœnameç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒageå’Œsexï¼Œæœ€åå¾—åˆ°æ£€ç´¢çš„æ•°æ®ï¼›ä½†å½“(20,F)è¿™æ ·çš„æ²¡æœ‰nameçš„æ•°æ®æ¥çš„æ—¶å€™ï¼Œb+æ ‘å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™nameå°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ®nameæ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥å»å“ªé‡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚å½“(å¼ ä¸‰,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼Œb+æ ‘å¯ä»¥ç”¨nameæ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µageçš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åå†åŒ¹é…æ€§åˆ«æ˜¯Fçš„æ•°æ®äº†ï¼Œ è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚</li></ul><h3 id="MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’"><a href="#MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’" class="headerlink" title="MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’"></a><a href="https://mp.weixin.qq.com/s/TSbfdC6G-r8pvgpQ3qyjMA" target="_blank" rel="noopener">MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’</a></h3><h3 id="å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜"><a href="#å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜" class="headerlink" title="å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜"></a>å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜</h3><h3 id="å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»"><a href="#å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»" class="headerlink" title="å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»"></a>å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»</h3><p>ç”±äºå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œ==ç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»è¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚==è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„==<br>å±€éƒ¨æ€§åŸç†ï¼šå½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­==ã€‚</p><p><strong>ç”±äºç£ç›˜é¡ºåºè¯»å–çš„æ•ˆç‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆ</strong>ç‡ã€‚</p><p>é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿ç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œ<strong>ä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åè¿ç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åå¼‚å¸¸è¿”å›ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</strong></p><h2 id="5-SQLè¯­å¥"><a href="#5-SQLè¯­å¥" class="headerlink" title="5.SQLè¯­å¥"></a>5.SQLè¯­å¥</h2><p> <a href="https://www.runoob.com/sql/sql-groupby.html" target="_blank" rel="noopener">SQLè¯­å¥èœé¸Ÿæ•™ç¨‹</a></p><h4 id="SQLæ•™ç¨‹"><a href="#SQLæ•™ç¨‹" class="headerlink" title="SQLæ•™ç¨‹"></a>SQLæ•™ç¨‹</h4><ul><li><code>AND</code>è¿ç®—ç¬¦ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ AND è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚</li><li><p><code>ORè¿ç®—ç¬¦</code>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶ä¸­åªè¦æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ OR è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">WHERE alexa &gt; 15</span><br><span class="line">AND (country=&apos;CN&apos; OR country=&apos;USA&apos;);</span><br></pre></td></tr></table></figure></li><li><p><code>ORDER BY</code> å…³é”®å­—é»˜è®¤æŒ‰ç…§å‡åºå¯¹è®°å½•è¿›è¡Œæ’åºã€‚å¦‚æœéœ€è¦æŒ‰ç…§é™åºå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ DESC å…³é”®å­—ã€‚</p></li><li><code>IN</code>æ“ä½œç¬¦INæ“ä½œç¬¦å…è®¸åœ¨WHEREå­å¥ä¸­è§„å®šå¤šä¸ªå€¼ã€‚</li><li><p><code>BETWEEN</code>æ“ä½œç¬¦ç”¨äºé€‰å–ä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´å†…çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">WHERE (alexa BETWEEN 1 AND 20)</span><br><span class="line">AND country NOT IN (&apos;USA&apos;, &apos;IND&apos;);</span><br></pre></td></tr></table></figure></li><li><p>INNER JOINï¼šå¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</p></li><li>LEFT JOINï¼šå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li><li>RIGHT JOINï¼šå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li><li>FULL JOINï¼šåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</li></ul><h4 id="SQLé«˜çº§æ•™ç¨‹"><a href="#SQLé«˜çº§æ•™ç¨‹" class="headerlink" title="SQLé«˜çº§æ•™ç¨‹"></a>SQLé«˜çº§æ•™ç¨‹</h4><ul><li>æ¨¡ç³ŠæŸ¥è¯¢(like)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">ä»¥&quot;G&quot;å¼€å§‹çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;G%&apos;;</span><br><span class="line">ä»¥&quot;k&quot;ç»“å°¾çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;%k&apos;;</span><br><span class="line">è¿˜å¯ä»¥å†™NOT LIKEåšåå‘æŸ¥è¯¢</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://blog.csdn.net/lu0422/article/details/78892497" target="_blank" rel="noopener">è§£é‡ŠMySQLå¤–è¿æ¥ã€å†…è¿æ¥(outer joinå’Œinner join)ä¸è‡ªè¿æ¥çš„åŒºåˆ«å¤–è¿æ¥</a><br><img src="https://www.runoob.com/wp-content/uploads/2019/01/sql-join.png" alt="SQL JOINS"></p><ul><li>å·¦è¿æ¥ï¼šè¿æ¥ä¸¤å¼ è¡¨ï¼Œå·¦è¡¨æ•°æ®å®Œå…¨æ˜¾ç¤ºï¼Œå³è¡¨åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼›åœ¨è¿™é‡Œï¼Œt_employeeå°±æ˜¯å·¦è¡¨ï¼Œä¹Ÿå°±æ˜¯åŸºå‡†è¡¨ï¼Œ==ç”¨åŸºå‡†è¡¨çš„æ•°æ®å»åŒ¹é…å³è¡¨çš„æ•°æ®ï¼Œæ‰€ä»¥å·¦è¡¨çš„è®°å½•æ˜¯å…¨éƒ¨ä¼šæŸ¥è¯¢å‡ºæ¥çš„ï¼Œå¦‚æœå³è¡¨æ²¡æœ‰è®°å½•å¯¹åº”çš„è¯å°±æ˜¾ç¤ºnull==ã€‚<blockquote><p>LEFT JOIN å…³é”®å­—ä»å·¦è¡¨ï¼ˆtable1ï¼‰è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³ä½¿å³è¡¨ï¼ˆtable2ï¼‰ä¸­æ²¡æœ‰åŒ¹é…ã€‚å¦‚æœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œåˆ™ç»“æœä¸º NULLã€‚</p></blockquote></li><li>å³è¿æ¥ï¼šåŒä¸Šï¼Œæ¢ä¸ªæ–¹å‘ï¼›<br>å…¨å¤–è¿æ¥ï¼šä¸¤è¡¨å­—æ®µéƒ½åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼›</li><li>å†…è¿æ¥ï¼šæ‰€æœ‰æŸ¥è¯¢å‡ºçš„ç»“æœéƒ½æ˜¯èƒ½å¤Ÿåœ¨è¿æ¥çš„è¡¨ä¸­æœ‰å¯¹åº”è®°å½•çš„ã€‚è¿™å°±æ˜¯å†…è¿æ¥çš„ç‰¹ç‚¹ï¼Œ==åªæŸ¥è¯¢åœ¨è¿æ¥çš„è¡¨ä¸­èƒ½å¤Ÿæœ‰å¯¹åº”çš„è®°å½•==ï¼Œ<blockquote><p>INNER JOINå…³é”®å­—åœ¨è¡¨ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªåŒ¹é…æ—¶è¿”å›è¡Œã€‚</p></blockquote></li><li>å…¨å¤–è¿æ¥ï¼š==mysqlæ˜¯æ²¡æœ‰å…¨å¤–è¿æ¥çš„==(mysqlä¸­æ²¡æœ‰<code>full outer join</code>å…³é”®å­—)ï¼Œ==æƒ³è¦è¾¾åˆ°å…¨å¤–è¿æ¥çš„æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨<code>union</code>å…³é”®å­—è¿æ¥å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥==ã€‚<strong>å¦‚æœåœ¨Oracleä¸­ï¼Œç›´æ¥å°±ä½¿ç”¨<code>full outer join</code>å…³é”®å­—è¿æ¥ä¸¤è¡¨å°±è¡Œäº†ã€‚</strong></li><li><p>UNION</p><blockquote><p>SQL UNION æ“ä½œç¬¦åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT country FROM Websites</span><br><span class="line">UNION</span><br><span class="line">SELECT country FROM apps</span><br><span class="line">ORDER BY country;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>SELECT INTO</p><blockquote><p>é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚SELECT INTO è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªæ–°è¡¨ä¸­</p></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE æ–°è¡¨</span><br><span class="line">AS</span><br><span class="line">SELECT * FROM æ—§è¡¨</span><br></pre></td></tr></table></figure><ul><li><p>INSERT INTO SELECT</p><blockquote><p>é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚INSERT INTO SELECT è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table2</span><br><span class="line">SELECT * FROM table1;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>è‡ªè¿æ¥ï¼šæ‰¾åˆ°ä¸¤è¡¨çš„å…¬å…±å­—æ®µï¼Œç„¶åå’Œå†…è¿æ¥ä¸€æ ·ã€‚</p></li><li>äº¤å‰è¿æ¥: ç”Ÿæˆç¬›å¡å°”ç§¯ï¼å®ƒä¸ä½¿ç”¨ä»»ä½•åŒ¹é…æˆ–è€…é€‰å–æ¡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥å°†ä¸€ä¸ªæ•°æ®æºä¸­çš„æ¯ä¸ªè¡Œä¸å¦ä¸€ä¸ªæ•°æ®æºçš„æ¯ä¸ªè¡Œéƒ½ä¸€ä¸€åŒ¹é…</li></ul><p><code>SELECT type,pub_name FROM titles CROSS JOIN publishers ORDER BY type</code></p><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a><a href="https://www.cnblogs.com/wz123/p/9722942.html" target="_blank" rel="noopener">å­æŸ¥è¯¢</a></h3><p>ä¸€ä¸ªSELECTè¯­å¥åµŒå¥—åœ¨å¦ä¸€ä¸ªSELECTè¯­å¥ä¸­ï¼Œå­æŸ¥è¯¢ä¹Ÿå«åšå†…éƒ¨æŸ¥è¯¢ï¼Œè€ŒåŒ…å«å­æŸ¥è¯¢çš„è¯­å¥åˆç§°ä¸ºå¤–éƒ¨æŸ¥è¯¢æˆ–ä¸»æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è‡ªèº«å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­æŸ¥è¯¢ï¼Œä¸€ä¸ªæŸ¥è¯¢è¯­å¥ä¸­å¯ä»¥åµŒå¥—ä»»æ„æ•°é‡çš„å­æŸ¥è¯¢ã€‚</p><h4 id="SQLæŸ¥è¯¢é‡å¤è®°å½•"><a href="#SQLæŸ¥è¯¢é‡å¤è®°å½•" class="headerlink" title="SQLæŸ¥è¯¢é‡å¤è®°å½•"></a><a href="https://www.cnblogs.com/njccqx/p/9672504.html" target="_blank" rel="noopener">SQLæŸ¥è¯¢é‡å¤è®°å½•</a></h4><hr><p><a href="https://blog.csdn.net/a755199443/article/details/88723685" target="_blank" rel="noopener">MySQLä¸¤é“ç»å…¸SQLé¢è¯•é¢˜(è¡Œè½¬åˆ—/åˆ—è½¬è¡Œ/æ±‚æœ€å€¼)</a></p><h3 id="SQLå‡½æ•°"><a href="#SQLå‡½æ•°" class="headerlink" title="SQLå‡½æ•°"></a>SQLå‡½æ•°</h3><ul><li>GROUP BY<blockquote><p>GROUP BY è¯­å¥ç”¨äºç»“åˆèšåˆå‡½æ•°ï¼Œæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»Ÿè®¡ access_log å„ä¸ª site_id çš„è®¿é—®é‡ï¼š</span><br><span class="line">SELECT site_id, SUM(access_log.count) AS nums</span><br><span class="line">FROM access_log GROUP BY site_id;</span><br></pre></td></tr></table></figure></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT Websites.name,COUNT(access_log.aid) AS nums FROM access_log</span><br><span class="line">LEFT JOIN Websites</span><br><span class="line">ON access_log.site_id=Websites.id</span><br><span class="line">GROUP BY Websites.name;</span><br></pre></td></tr></table></figure><ul><li>HAVING<blockquote><p>åœ¨ SQL ä¸­å¢åŠ  HAVING å­å¥åŸå› æ˜¯ï¼Œ==WHERE å…³é”®å­—æ— æ³•ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨==ã€‚HAVING å­å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰åˆ†ç»„åçš„å„ç»„æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾æ€»è®¿é—®é‡å¤§äº 200 çš„ç½‘ç«™ã€‚</span><br><span class="line">SELECT Websites.name, Websites.url, SUM(access_log.count) AS nums FROM (access_log INNER JOIN Websites</span><br><span class="line">ON access_log.site_id=Websites.id)</span><br><span class="line">GROUP BY Websites.name</span><br><span class="line">HAVING SUM(access_log.count) &gt; 200;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="6-SQLä¼˜åŒ–"><a href="#6-SQLä¼˜åŒ–" class="headerlink" title="6.SQLä¼˜åŒ–"></a>6.SQLä¼˜åŒ–</h2><h6 id="æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤"><a href="#æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤" class="headerlink" title="æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤"></a>æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤</h6><h6 id="500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–"><a href="#500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–"></a><a href="https://mp.weixin.qq.com/s/-ZSBoPVYUY5UN_lrwqQKVw" target="_blank" rel="noopener">500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–</a></h6><h6 id="æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„"><a href="#æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„" class="headerlink" title="æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„"></a><a href="https://mp.weixin.qq.com/s/zhvN31uYtm-507k3GKJeKg" target="_blank" rel="noopener">æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„</a></h6><h6 id="å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€"><a href="#å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€" class="headerlink" title="å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€"></a><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NzA4MTkxNQ==&amp;mid=2247485120&amp;idx=2&amp;sn=c80bd2698209858d86975d551b2144f3&amp;source=41#wechat_redirect" target="_blank" rel="noopener">å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€</a></h6><h6 id="ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ"></a><a href="https://www.cnblogs.com/tuhooo/p/9582223.html" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ</a></h6><h6 id="ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W-æ•°æ®ï¼Œä»17såˆ°300ms"><a href="#ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W-æ•°æ®ï¼Œä»17såˆ°300ms" class="headerlink" title="ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W+æ•°æ®ï¼Œä»17såˆ°300ms"></a><a href="https://www.jianshu.com/p/0768ebc4e28d" target="_blank" rel="noopener">ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W+æ•°æ®ï¼Œä»17såˆ°300ms</a></h6><h6 id="é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ"><a href="#é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ" class="headerlink" title="é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ"></a><a href="https://www.jianshu.com/p/bf27be3fd448" target="_blank" rel="noopener">é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ</a></h6><h6 id="æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"><a href="#æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±" class="headerlink" title="æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"></a><a href="https://www.cnblogs.com/a-phper/p/10313948.html" target="_blank" rel="noopener">æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±</a></h6><h6 id="MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ"><a href="#MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ"></a><a href="https://blog.csdn.net/hao_yunfeng/article/details/82392261" target="_blank" rel="noopener">MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ</a></h6><ul><li>mysqlä¸»ä»å¤åˆ¶ç”¨é€”<blockquote><p>ä»åº“ç”Ÿæˆä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œä¸€ä¸ªSQLçº¿ç¨‹ï¼›i/oçº¿ç¨‹å»è¯·æ±‚ä¸»åº“çš„binlogï¼Œå¹¶å°†å¾—åˆ°çš„binlogæ—¥å¿—å†™åˆ°relaylogï¼ˆä¸­ç»§æ—¥å¿—ï¼‰æ–‡ä»¶ä¸­ï¼›ä¸»åº“ä¼šç”Ÿæˆä¸€ä¸ª log dump çº¿ç¨‹ï¼Œç”¨æ¥ç»™ä»åº“i/oçº¿ç¨‹ä¼ binlogï¼›<br>SQL çº¿ç¨‹ï¼Œä¼šè¯»å–relay logæ–‡ä»¶ä¸­çš„æ—¥å¿—ï¼Œå¹¶è§£ææˆå…·ä½“æ“ä½œï¼Œæ¥å®ç°ä¸»ä»çš„æ“ä½œä¸€è‡´ï¼Œè€Œæœ€ç»ˆæ•°æ®ä¸€è‡´ï¼›</p></blockquote></li></ul><p>å®æ—¶ç¾å¤‡ï¼Œç”¨äºæ•…éšœåˆ‡æ¢,==è¯»å†™åˆ†ç¦»(ä¸»å†™ä»è¯»æ¯”ä¾‹ä¸º10ï¼š1)==ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡<br>å¤‡ä»½ï¼Œé¿å…å½±å“ä¸šåŠ¡</p><ul><li>ä¸»ä»éƒ¨ç½²å¿…è¦æ¡ä»¶ï¼š<br>ä¸»åº“å¼€å¯binlogæ—¥å¿—ï¼ˆè®¾ç½®log-binå‚æ•°ï¼‰,ä¸»ä»server-idä¸åŒ,ä»åº“æœåŠ¡å™¨èƒ½è¿é€šä¸»åº“<h6 id="æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨"><a href="#æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨" class="headerlink" title="æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨"></a><a href="https://blog.csdn.net/dhfzhishi/article/details/82561939" target="_blank" rel="noopener">æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨</a></h6><h6 id="ç°åº¦å‘å¸ƒ"><a href="#ç°åº¦å‘å¸ƒ" class="headerlink" title="ç°åº¦å‘å¸ƒ"></a><a href="https://blog.csdn.net/qq_42234452/article/details/90906692?fps=1&amp;locationNum=2" target="_blank" rel="noopener">ç°åº¦å‘å¸ƒ</a></h6>åœ¨ç°åº¦å‘å¸ƒå¼€å§‹åï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸ç›´æ¥å°†æµé‡åˆ‡è¿‡æ¥ï¼Œè€Œæ˜¯æµ‹è¯•äººå‘˜å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œçº¿ä¸Šæµ‹è¯•ï¼Œå¯åŠ¨çš„è¿™ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‘ä¸é›€ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°†å°‘é‡çš„ç”¨æˆ·æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œç„¶åå†å¯¹æ–°ç‰ˆæœ¬åšè¿è¡ŒçŠ¶æ€è§‚å¯Ÿï¼Œæ”¶é›†å„ç§è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚æœæ­¤æ—¶å¯¹æ–°æ—§ç‰ˆæœ¬åšå„ç§æ•°æ®å¯¹æ¯”ï¼Œå°±æ˜¯æ‰€è°“çš„A/Bæµ‹è¯•ã€‚</li></ul><p>å½“ç¡®è®¤æ–°ç‰ˆæœ¬è¿è¡Œè‰¯å¥½åï¼Œå†é€æ­¥å°†æ›´å¤šçš„æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œåœ¨æ­¤æœŸé—´ï¼Œè¿˜å¯ä»¥ä¸æ–­åœ°è°ƒæ•´æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„è¿è¡Œçš„æœåŠ¡å™¨å‰¯æœ¬æ•°é‡ï¼Œä»¥ä½¿å¾—æ–°ç‰ˆæœ¬èƒ½å¤Ÿæ‰¿å—è¶Šæ¥è¶Šå¤§çš„æµé‡å‹åŠ›ã€‚ç›´åˆ°å°†100%çš„æµé‡éƒ½åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œæœ€åå…³é—­å‰©ä¸‹çš„è€ç‰ˆæœ¬æœåŠ¡ï¼Œå®Œæˆç°åº¦å‘å¸ƒã€‚</p><p>å¦‚æœåœ¨ç°åº¦å‘å¸ƒè¿‡ç¨‹ä¸­ï¼ˆç°åº¦æœŸï¼‰å‘ç°äº†æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå°±åº”è¯¥ç«‹å³å°†æµé‡åˆ‡å›è€ç‰ˆæœ¬ä¸Šï¼Œè¿™æ ·ï¼Œå°±ä¼šå°†è´Ÿé¢å½±å“æ§åˆ¶åœ¨æœ€å°èŒƒå›´å†…ã€‚</p><h2 id="MySQLä¼˜åŒ–"><a href="#MySQLä¼˜åŒ–" class="headerlink" title="MySQLä¼˜åŒ–"></a>MySQLä¼˜åŒ–</h2><h6 id="åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–"><a href="#åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–" class="headerlink" title="åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–"></a>åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–</h6><ul><li>æ•´æ•°TinyInt,SmallInt,MediumInt,Int,BigInt ä½¿ç”¨çš„å­˜å‚¨ 8,16,24,32,64 ä½å­˜å‚¨ç©ºé—´ã€‚ä½¿ç”¨ Unsigned è¡¨ç¤ºä¸å…è®¸è´Ÿæ•°ï¼Œå¯ä»¥ä½¿æ­£æ•°çš„ä¸Šçº¿æé«˜ä¸€å€ã€‚</li><li>å®æ•°Float,Double , æ”¯æŒè¿‘ä¼¼çš„æµ®ç‚¹è¿ç®—ã€‚<br>Decimalï¼Œç”¨äºå­˜å‚¨ç²¾ç¡®çš„å°æ•°ã€‚</li><li>å­—ç¬¦ä¸²VarCharï¼Œå­˜å‚¨å˜é•¿çš„å­—ç¬¦ä¸²ã€‚éœ€è¦ 1 æˆ– 2 ä¸ªé¢å¤–çš„å­—èŠ‚è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚Charï¼Œå®šé•¿ï¼Œé€‚åˆå­˜å‚¨å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚ MD5 å€¼ã€‚</li><li>Blobï¼ŒTextä¸ºäº†å­˜å‚¨å¾ˆå¤§çš„æ•°æ®è€Œè®¾è®¡çš„ã€‚åˆ†åˆ«é‡‡ç”¨äºŒè¿›åˆ¶å’Œå­—ç¬¦çš„æ–¹å¼ã€‚</li><li>æ—¶é—´ç±»å‹DateTimeï¼Œä¿å­˜å¤§èŒƒå›´çš„å€¼ï¼Œå  8 ä¸ªå­—èŠ‚ã€‚TimeStampï¼Œæ¨èï¼Œä¸ UNIX æ—¶é—´æˆ³ç›¸åŒï¼Œå  4 ä¸ªå­—èŠ‚ã€‚<h6 id="SQLè¯­å¥ä¼˜åŒ–"><a href="#SQLè¯­å¥ä¼˜åŒ–" class="headerlink" title="SQLè¯­å¥ä¼˜åŒ–"></a>SQLè¯­å¥ä¼˜åŒ–</h6></li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š<code>select id from t where num is null</code>å¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š<code>select id from t where num=0</code></li><li>ç”¨EXISTSæ›¿ä»£INã€ç”¨NOT EXISTSæ›¿ä»£NOT IN</li><li>ç”¨Whereå­å¥æ›¿æ¢HAVING å­å¥ å› ä¸ºHAVING åªä¼šåœ¨æ£€ç´¢å‡ºæ‰€æœ‰è®°å½•ä¹‹åæ‰å¯¹ç»“æœé›†è¿›è¡Œè¿‡æ»¤ã€‚</li><li>å°½é‡é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æ</li><li>Whereå­å¥ä¸­ï¼šwhereè¡¨ä¹‹é—´çš„è¿æ¥å¿…é¡»å†™åœ¨å…¶ä»–Whereæ¡ä»¶ä¹‹å‰ï¼Œé‚£äº›å¯ä»¥è¿‡æ»¤æ‰æœ€å¤§æ•°é‡è®°å½•çš„æ¡ä»¶å¿…é¡»å†™åœ¨Whereå­å¥çš„æœ«å°¾.HAVINGæœ€åã€‚</li><li>å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œåº”å°½é‡é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆåº”è€ƒè™‘åœ¨ where åŠ order by æ¶‰åŠçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•<h6 id="ç´¢å¼•ä¼˜åŒ–-é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹"><a href="#ç´¢å¼•ä¼˜åŒ–-é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹" class="headerlink" title="ç´¢å¼•ä¼˜åŒ–(é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹)"></a>ç´¢å¼•ä¼˜åŒ–(é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹)</h6>MySQLæ”¯æŒå¾ˆå¤šæ•°æ®ç±»å‹ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹å­˜å‚¨æ•°æ®å¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ã€‚</li><li>è¶Šå°çš„æ•°æ®ç±»å‹é€šå¸¸æ›´å¥½ï¼šè¶Šå°çš„æ•°æ®ç±»å‹é€šå¸¸åœ¨ç£ç›˜ã€å†…å­˜å’Œcpuç¼“å­˜ä¸­éƒ½éœ€è¦æ›´å°‘çš„ç©ºé—´ï¼Œå¤„ç†èµ·æ¥æ›´å¿«ã€‚</li><li>ç®€å•çš„æ•°æ®ç±»å‹æ›´å¥½ï¼šæ•´å½¢æ•°æ®æ¯”èµ·å­—ç¬¦ï¼Œå¤„ç†å¼€é”€æ›´å°ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„æ¯”è¾ƒæ›´å¤æ‚ã€‚åœ¨MySQLä¸­ï¼Œåº”ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å­˜å‚¨æ—¶é—´ï¼›ä»¥åŠç”¨æ•´å½¢æ•°æ®å­˜å‚¨IPåœ°å€ã€‚</li><li>å°½é‡é¿å…NULLï¼šåº”è¯¥åˆ¶å®šåˆ—ä¸ºNOT NULLï¼Œé™¤éä½ æƒ³å­˜å‚¨NULLã€‚åœ¨MySQLä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºä»–ä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚</li><li>ä¸ºäº†æ›´å¤šçš„æé«˜mysqlæ•ˆç‡å¯å»ºç«‹ç»„åˆç´¢å¼•ï¼Œéµå¾ªâ€œæœ€å·¦å‰ç¼€â€åŸåˆ™ã€‚åˆ›å»ºå¤åˆç´¢å¼•åº”è¯¥å°†æœ€å¸¸ç”¨ï¼ˆé¢‘ç‡ï¼‰åšé™åˆ¶æ¡ä»¶çš„åˆ—æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä¸€æ¬¡é€’å‡ã€‚ç»„åˆç´¢å¼•æœ€å·¦å­—æ®µç”¨inæ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„ã€‚ç›¸å½“äºå»ºç«‹äº†col1,col1col2,col1col2col3ä¸‰ä¸ªç´¢å¼•ã€‚<h6 id="åˆ†åº“åˆ†è¡¨ä¼˜åŒ–"><a href="#åˆ†åº“åˆ†è¡¨ä¼˜åŒ–" class="headerlink" title="åˆ†åº“åˆ†è¡¨ä¼˜åŒ–"></a>åˆ†åº“åˆ†è¡¨ä¼˜åŒ–</h6></li><li><p>å‚ç›´æ‹†åˆ†ï¼šè§£å†³é—®é¢˜ï¼šè¡¨ä¸è¡¨ä¹‹é—´çš„ioç«äº‰ ä¸è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢é•¿å‡ºç°çš„å‹åŠ›</p><blockquote><p>æ–¹æ¡ˆï¼š æŠŠäº§å“è¡¨å’Œç”¨æˆ·è¡¨æ”¾åˆ°ä¸€ä¸ªserverä¸Š è®¢å•è¡¨å•ç‹¬æ”¾åˆ°ä¸€ä¸ªserverä¸Šã€‚</p></blockquote></li><li><p>æ°´å¹³æ‹†åˆ†ï¼š è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢é•¿å‡ºç°çš„å‹åŠ› ä¸è§£å†³é—®é¢˜ï¼šè¡¨ä¸è¡¨ä¹‹é—´çš„ioäº‰å¤º</p><blockquote><p>ç”¨æˆ·è¡¨é€šè¿‡æ€§åˆ«æ‹†åˆ†ä¸ºç”·ç”¨æˆ·è¡¨å’Œå¥³ç”¨æˆ·è¡¨ è®¢å•è¡¨é€šè¿‡å·²å®Œæˆå’Œå®Œæˆä¸­æ‹†åˆ†ä¸ºå·²å®Œæˆè®¢å•å’Œæœªå®Œæˆè®¢å• äº§å“è¡¨ æœªå®Œæˆè®¢å•æ”¾ä¸€ä¸ªserverä¸Š å·²å®Œæˆè®¢å•è¡¨ç›’ç”·ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š å¥³ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š(å¥³çš„çˆ±è´­ç‰© å“ˆå“ˆ)ï¼Œ<br><strong>==å¯ä»¥æŠŠå­¦æ ¡èŒƒå›´å†…çš„ç”¨æˆ·å•ç‹¬ç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨==ã€‚</strong></p></blockquote></li></ul><p>MySQLä¸éœ€è¦æ‰§è¡Œåé¢çš„å¤æ‚æ“ä½œï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œ==ä½†æ˜¯æŸ¥è¯¢ç¼“å­˜å¤±æ•ˆéå¸¸é¢‘ç¹ï¼Œåªè¦æœ‰å¯¹ä¸€ä¸ªè¡¨çš„æ›´æ–°ï¼Œè¿™ä¸ªè¡¨çš„æ‰€æœ‰æŸ¥è¯¢ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œå› æ­¤å¯èƒ½ä½ è´¹åŠ›åœ°æŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œè¿˜æ²¡ä½¿ç”¨ï¼Œå°±è¢«ä¸€ä¸ªæ›´æ–°å…¨éƒ¨æ¸…ç©ºäº†ã€‚é™¤éä½ çš„ä¸šåŠ¡æ˜¯ä¸€å¼ é™æ€è¡¨ï¼Œå¾ˆé•¿æ—¶é—´æ‰ä¼šæ›´æ–°ä¸€æ¬¡ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜==ã€‚(==æŠŠç®¡ç†å‘˜ä¿¡æ¯æ”¾è¿›å»==)</p><h2 id="7-ä¸‰èŒƒå¼"><a href="#7-ä¸‰èŒƒå¼" class="headerlink" title="7.ä¸‰èŒƒå¼"></a>7.ä¸‰èŒƒå¼</h2><h4 id="ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰"><a href="#ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰" class="headerlink" title="ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰"></a>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</h4><p>==å¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±æ€§çš„åŸŸéƒ½æ˜¯åŸå­çš„æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹==ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®ä½“ä¸­çš„æŸä¸ªå±æ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±æ€§ã€‚å¦‚æœå‡ºç°é‡å¤çš„å±æ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®ä½“ï¼Œæ–°çš„å®ä½“ç”±é‡å¤çš„å±æ€§æ„æˆï¼Œæ–°å®ä½“ä¸åŸå®ä½“ä¹‹é—´ä¸ºä¸€å¯¹å¤šå…³ç³»ã€‚åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ä¸­è¡¨çš„æ¯ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªå®ä¾‹çš„ä¿¡æ¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—ã€‚</p><h4 id="ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰"><a href="#ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰" class="headerlink" title="ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰"></a>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</h4><p>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€‚ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªå®ä¾‹æˆ–è¡Œå¿…é¡»å¯ä»¥è¢«æƒŸä¸€åœ°åŒºåˆ†ã€‚ä¸ºå®ç°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®ä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚è¿™ä¸ªæƒŸä¸€å±æ€§åˆ—è¢«ç§°ä¸ºä¸»å…³é”®å­—æˆ–ä¸»é”®ã€ä¸»ç ã€‚ï¼ˆ2NFï¼‰==è¦æ±‚å®ä½“çš„å±æ€§å®Œå…¨ä¾èµ–äºä¸»å…³é”®å­—ã€‚æ‰€è°“å®Œå…¨ä¾èµ–æ˜¯æŒ‡ä¸èƒ½å­˜åœ¨ä»…ä¾èµ–ä¸»å…³é”®å­—ä¸€éƒ¨åˆ†çš„å±æ€§==ï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§å’Œä¸»å…³é”®å­—çš„è¿™ä¸€éƒ¨åˆ†åº”è¯¥åˆ†ç¦»å‡ºæ¥å½¢æˆä¸€ä¸ªæ–°çš„å®ä½“ï¼Œæ–°å®ä½“ä¸åŸå®ä½“ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ä¸ºå®ç°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®ä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬äºŒèŒƒå¼å°±æ˜¯éä¸»å±æ€§ééƒ¨åˆ†ä¾èµ–äºä¸»å…³é”®å­—ã€‚</p><h4 id="ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰"><a href="#ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰" class="headerlink" title="ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰"></a>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</h4><ul><li>æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éä¸»å…³é”®å­—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå­˜åœ¨ä¸€ä¸ªéƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªéƒ¨é—¨æœ‰éƒ¨é—¨ç¼–å·ï¼ˆdept_idï¼‰ã€éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨å‘˜å·¥ä¿¡æ¯è¡¨ä¸­åˆ—å‡ºéƒ¨é—¨ç¼–å·åå°±ä¸èƒ½å†å°†éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¸éƒ¨é—¨æœ‰å…³çš„ä¿¡æ¯å†åŠ å…¥å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ã€‚å¦‚æœä¸å­˜åœ¨éƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œåˆ™æ ¹æ®ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ä¹Ÿåº”è¯¥æ„å»ºå®ƒï¼Œå¦åˆ™å°±ä¼šæœ‰å¤§é‡çš„æ•°æ®å†—ä½™ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼å°±æ˜¯å±æ€§ä¸ä¾èµ–äºå…¶å®ƒéä¸»å±æ€§ã€‚ï¼ˆæˆ‘çš„ç†è§£æ˜¯æ¶ˆé™¤å†—ä½™ï¼‰</li><li>ä¼˜ç‚¹:å¯ä»¥å°½é‡å¾—å‡å°‘æ•°æ®å†—ä½™ï¼Œä½¿å¾—æ›´æ–°å¿«ï¼Œä½“ç§¯å°</li><li>ç¼ºç‚¹:å¯¹äºæŸ¥è¯¢éœ€è¦å¤šä¸ªè¡¨è¿›è¡Œå…³è”ï¼Œå‡å°‘å†™å¾—æ•ˆç‡å¢åŠ è¯»å¾—æ•ˆç‡ï¼Œæ›´éš¾è¿›è¡Œç´¢å¼•ä¼˜åŒ–</li></ul>]]></content>
    
    <summary type="html">
    
      U can find everything  be need in here.
    
    </summary>
    
    
      <category term="MySQL, DataBase" scheme="http://yoursite.com/tags/MySQL-DataBase/"/>
    
  </entry>
  
  <entry>
    <title>SortAlgorithms</title>
    <link href="http://yoursite.com/2020/01/13/SortAlgorithm/"/>
    <id>http://yoursite.com/2020/01/13/SortAlgorithm/</id>
    <published>2020-01-13T14:19:13.000Z</published>
    <updated>2020-02-17T10:23:38.067Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SortAlgorithms"><a href="#SortAlgorithms" class="headerlink" title="SortAlgorithms"></a>SortAlgorithms</h1><blockquote><p>åŸæ–‡é“¾æ¥ï¼š <a href="https://itimetraveler.github.io/2017/07/18/%E5%85%AB%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%E4%B8%8Ejava%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener"><strong>å…«å¤§æ’åºç®—æ³•æ€»ç»“ä¸javaå®ç°</strong> - iTimeTraveler</a></p></blockquote><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/big-o.png" alt></p><ul><li><a href="#ä¸€ç›´æ¥æ’å…¥æ’åºinsertion-sort">ç›´æ¥æ’å…¥æ’åº</a></li><li><a href="#äºŒå¸Œå°”æ’åºshell-sort">å¸Œå°”æ’åº</a></li><li><a href="#ä¸‰é€‰æ‹©æ’åºselection-sort">ç®€å•é€‰æ‹©æ’åº</a></li><li><a href="#å››å †æ’åºheap-sort">å †æ’åº</a></li><li><a href="#äº”å†’æ³¡æ’åºbubble-sort">å†’æ³¡æ’åº</a></li><li><a href="#å…­å¿«é€Ÿæ’åºquick-sort">å¿«é€Ÿæ’åº</a></li><li><a href="#ä¸ƒå½’å¹¶æ’åºmerging-sort">å½’å¹¶æ’åº</a></li><li><a href="#å…«åŸºæ•°æ’åºradix-sort">åŸºæ•°æ’åº</a></li></ul><a id="more"></a><p>å…¶ä¸­æˆ‘ä»¬è®¨è®ºçš„è¿™å…«å¤§æ’åºç®—æ³•çš„å®ç°å¯ä»¥å‚è€ƒ<a href="https://github.com/iTimeTraveler/SortAlgorithms" target="_blank" rel="noopener">æˆ‘çš„Githubï¼š<strong>SortAlgorithms</strong></a>ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ’åºæµ‹è¯•æ¨¡å—<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/src/main/java/com/example/Test.java" target="_blank" rel="noopener">[Test.java]</a>å’Œæ’åºç®—æ³•å¯¹æ¯”æ¨¡å—<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/src/main/java/com/example/Bench.java" target="_blank" rel="noopener">[Bench.java]</a>ï¼Œå¤§å®¶å¯ä»¥è¯•è¿è¡Œã€‚</p><p>å®ƒä»¬éƒ½å±äºå†…éƒ¨æ’åºï¼Œä¹Ÿå°±æ˜¯åªè€ƒè™‘æ•°æ®é‡è¾ƒå°ä»…éœ€è¦ä½¿ç”¨å†…å­˜çš„æ’åºç®—æ³•ï¼Œä»–ä»¬ä¹‹é—´å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/1156494-ab4cecff133d87b3.png" alt></p><h3 id="ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h3><hr><p>æ’å…¥æ’åºçš„è®¾è®¡åˆè¡·æ˜¯<strong>å¾€æœ‰åºçš„æ•°ç»„ä¸­å¿«é€Ÿæ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ </strong>ã€‚å®ƒçš„ç®—æ³•æ€æƒ³æ˜¯ï¼šæŠŠè¦æ’åºçš„æ•°ç»„åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†, ä¸€éƒ¨åˆ†æ˜¯æ•°ç»„çš„å…¨éƒ¨å…ƒç´ (é™¤å»å¾…æ’å…¥çš„å…ƒç´ ), å¦ä¸€éƒ¨åˆ†æ˜¯å¾…æ’å…¥çš„å…ƒç´ ; å…ˆå°†ç¬¬ä¸€éƒ¨åˆ†æ’åºå®Œæˆ, ç„¶åå†æ’å…¥è¿™ä¸ªå…ƒç´ . å…¶ä¸­ç¬¬ä¸€éƒ¨åˆ†çš„æ’åºä¹Ÿæ˜¯é€šè¿‡å†æ¬¡æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥è¿›è¡Œçš„.</p><p>æ’å…¥æ’åºç”±äºæ“ä½œä¸å°½ç›¸åŒ, å¯åˆ†ä¸º <code>ç›´æ¥æ’å…¥æ’åº</code> , <code>æŠ˜åŠæ’å…¥æ’åº</code>(åˆç§°äºŒåˆ†æ’å…¥æ’åº), <code>é“¾è¡¨æ’å…¥æ’åº</code> , <code>å¸Œå°”æ’åº</code> ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›´æ¥æ’å…¥æ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³"><a href="#1ã€åŸºæœ¬æ€æƒ³" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>ç›´æ¥æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡è·Ÿå‰é¢å·²ç»æ’å¥½çš„å…ƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚æœé€‰æ‹©çš„å…ƒç´ æ¯”å·²æ’åºçš„å…ƒç´ å°ï¼Œåˆ™äº¤æ¢ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ éƒ½æ¯”è¾ƒè¿‡ä¸ºæ­¢ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Insertion-sort-example-300px.gif" alt="ä½¿ç”¨æ’å…¥æ’åºä¸ºä¸€åˆ—æ•°å­—è¿›è¡Œæ’åºçš„è¿‡ç¨‹"></p><h4 id="2ã€ç®—æ³•æè¿°"><a href="#2ã€ç®—æ³•æè¿°" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨in-placeåœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº<br><br>â‘¡. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ<br><br>â‘¢. å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®<br><br>â‘£. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®<br><br>â‘¤. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å<br><br>â‘¥. é‡å¤æ­¥éª¤â‘¡~â‘¤<br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/insert-sort.gif" alt="ç›´æ¥æ’å…¥æ’åºæ¼”ç¤º"></p><p>ç®—æ³•å®ç°ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨æ¯æ¬¡æ¯”è¾ƒæ“ä½œå‘ç°å–å‡ºæ¥çš„æ–°å…ƒç´ å°äºç­‰äºå·²æ’åºçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥å°†å·²æ’åºçš„å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼Œç„¶åå°†å–å‡ºæ¥çš„æ–°å…ƒç´ æ’å…¥è¯¥ä½ç½®ï¼ˆå³ç›¸é‚»ä½ç½®å¯¹è°ƒï¼‰ï¼Œæ¥ç€å†ä¸å‰é¢çš„å·²æ’åºçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ ·åšç¼ºç‚¹æ˜¯äº¤æ¢æ“ä½œä»£ä»·æ¯”è¾ƒå¤§ã€‚å¦ä¸€ç§åšæ³•æ˜¯ï¼šå°†æ–°å…ƒç´ å–å‡ºï¼ˆæŒ–å‘ï¼‰ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ä¸å·²æ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœå·²æ’åºçš„å…ƒç´ å¤§äºå–å‡ºçš„æ–°å…ƒç´ ï¼Œé‚£ä¹ˆå°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå¡«å‘ï¼‰ï¼Œæ¥ç€å†ä¸å‰é¢çš„å·²æ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼Œè¿™æ—¶å†å°†æ–°å…ƒç´ æ’å…¥è¿›å»ã€‚å°±åƒåŸºæœ¬æ€æƒ³ä¸­çš„åŠ¨å›¾æ¼”ç¤ºçš„é‚£æ ·ã€‚</p><p>å¦‚æœ<em>æ¯”è¾ƒæ“ä½œ</em>çš„ä»£ä»·æ¯”<em>äº¤æ¢æ“ä½œ</em>å¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨<a href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾æ³•</a>æ¥å‡å°‘<em>æ¯”è¾ƒæ“ä½œ</em>çš„æ•°ç›®ã€‚å¯ä»¥è®¤ä¸ºæ˜¯<strong>æ’å…¥æ’åº</strong>çš„ä¸€ä¸ªå˜ç§ï¼Œç§°ä¸º<a href="https://zh.wikipedia.org/w/index.php?title=%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åº</a>ã€‚</p><h4 id="3ã€ä»£ç å®ç°"><a href="#3ã€ä»£ç å®ç°" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</span></span><br><span class="line"><span class="comment"> * 2. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</span></span><br><span class="line"><span class="comment"> * 3. å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</span></span><br><span class="line"><span class="comment"> * 4. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="comment"> * 5. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</span></span><br><span class="line"><span class="comment"> * 6. é‡å¤æ­¥éª¤2~5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++ ) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[i];    <span class="comment">// å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</span></span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = i; j &gt;= <span class="number">0</span>; j-- ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( j &gt; <span class="number">0</span> &amp;&amp; arr[j-<span class="number">1</span>] &gt; temp ) &#123;</span><br><span class="line">                arr[j] = arr[j-<span class="number">1</span>];    <span class="comment">// å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºå–å‡ºçš„å…ƒç´ tempï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</span></span><br><span class="line">                System.out.println(<span class="string">"Temping:  "</span> + Arrays.toString(arr));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</span></span><br><span class="line">                arr[j] = temp;</span><br><span class="line">                System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤æ¢æ¬¡æ•°è¾ƒå¤šçš„å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr.length-<span class="number">1</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j=i+<span class="number">1</span>; j&gt;<span class="number">0</span>; j-- ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( arr[j-<span class="number">1</span>] &lt;= arr[j] )</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[j];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">            arr[j] = arr[j-<span class="number">1</span>];</span><br><span class="line">            arr[j-<span class="number">1</span>] = temp;</span><br><span class="line">            System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥æ’å…¥æ’åºå¤æ‚åº¦å¦‚ä¸‹ï¼š</p><ul><li>æœ€å¥½æƒ…å†µä¸‹ï¼Œæ’åºå‰å¯¹è±¡å·²ç»æŒ‰ç…§è¦æ±‚çš„æœ‰åºã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnâˆ’1ï¼›ç§»åŠ¨æ¬¡æ•°(RMN)ä¸º0ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</li><li>æœ€åæƒ…å†µä¸‹ï¼Œæ’åºå‰å¯¹è±¡ä¸ºè¦æ±‚çš„é¡ºåºçš„ååºã€‚ç¬¬iè¶Ÿæ—¶ç¬¬iä¸ªå¯¹è±¡å¿…é¡»ä¸å‰é¢iä¸ªå¯¹è±¡éƒ½åšæ’åºç æ¯”è¾ƒï¼Œå¹¶ä¸”æ¯åš1æ¬¡æ¯”è¾ƒå°±è¦åš1æ¬¡æ•°æ®ç§»åŠ¨ï¼ˆä»ä¸Šé¢ç»™å‡ºçš„ä»£ç ä¸­çœ‹å‡ºï¼‰ã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnÂ²/2 ; ç§»åŠ¨æ¬¡æ•°(RMN)ä¸ºï¼šnÂ²/2ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚</li><li>å¦‚æœæ’åºè®°å½•æ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆæ ¹æ®æ¦‚ç‡ç›¸åŒçš„åŸåˆ™ï¼Œåœ¨å¹³å‡æƒ…å†µä¸‹çš„æ’åºç æ¯”è¾ƒæ¬¡æ•°å’Œå¯¹è±¡ç§»åŠ¨æ¬¡æ•°çº¦ä¸ºnÂ²/2ï¼Œå› æ­¤ï¼Œ<strong>ç›´æ¥æ’å…¥æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦</strong>ä¸ºO(nÂ²)ã€‚</li></ul><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>Tips: ç”±äºç›´æ¥æ’å…¥æ’åºæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ çš„ä½ï¼Œ å¹¶ä¸ä¼šæ”¹å˜å€¼ç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„æ’åºï¼Œ å› æ­¤å®ƒæ˜¯ä¸€ç§ç¨³å®šæ’åºã€‚</p><h3 id="äºŒã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰"><a href="#äºŒã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰" class="headerlink" title="äºŒã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰"></a>äºŒã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</h3><hr><blockquote><p>ç¬¬ä¸€ä¸ªçªç ´O(n^2)çš„æ’åºç®—æ³•ï¼›æ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆï¼›å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ã€‚</p></blockquote><p>å¸Œå°”æ’åºï¼Œä¹Ÿç§°<strong>é€’å‡å¢é‡æ’åºç®—æ³•</strong>ï¼Œ1959å¹´Shellå‘æ˜ã€‚æ˜¯æ’å…¥æ’åºçš„ä¸€ç§é«˜é€Ÿè€Œç¨³å®šçš„æ”¹è¿›ç‰ˆæœ¬ã€‚</p><p>å¸Œå°”æ’åºæ˜¯å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-1"><a href="#1ã€åŸºæœ¬æ€æƒ³-1" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/shell-sort.jpg" alt></p><p>å°†å¾…æ’åºæ•°ç»„æŒ‰ç…§æ­¥é•¿gapè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå°†æ¯ç»„çš„å…ƒç´ åˆ©ç”¨ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•è¿›è¡Œæ’åºï¼›æ¯æ¬¡å†å°†gapæŠ˜åŠå‡å°ï¼Œå¾ªç¯ä¸Šè¿°æ“ä½œï¼›å½“gap=1æ—¶ï¼Œåˆ©ç”¨ç›´æ¥æ’å…¥ï¼Œå®Œæˆæ’åºã€‚</p><p>å¯ä»¥çœ‹åˆ°æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´æœ€ç®€å•çš„æ­¥é•¿å–å€¼æ˜¯<strong>åˆæ¬¡å–æ•°ç»„é•¿åº¦çš„ä¸€åŠ</strong>ä¸ºå¢é‡ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ã€‚æ›´å¥½çš„æ­¥é•¿åºåˆ—å–å€¼å¯ä»¥å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F#.E6.AD.A5.E9.95.BF.E5.BA.8F.E5.88.97" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a>ã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-1"><a href="#2ã€ç®—æ³•æè¿°-1" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆ<strong>ä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1</strong>ï¼‰<br><br>â‘¡. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›<br><br>â‘¢. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-1"><a href="#3ã€ä»£ç å®ç°-1" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®ç°ï¼Œå¯ä»¥çœ‹åˆ°å®ç°å¾ˆå¹¼ç¨šï¼Œä½†æ˜¯å¥½å¤„æ˜¯ç†è§£èµ·æ¥å¾ˆç®€å•ã€‚å› ä¸ºæ²¡æœ‰ç»è¿‡ä»»ä½•çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¸å»ºè®®å¤§å®¶ç›´æ¥ä½¿ç”¨ã€‚å»ºè®®å¯¹æ¯”ä¸‹æ–¹çš„ç»´åŸºç™¾ç§‘å®˜æ–¹å®ç°ä»£ç ï¼Œç‰¹åˆ«æ˜¯æ­¥é•¿å–å€¼ç­–ç•¥éƒ¨åˆ†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸Œå°”æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ï¼‰</span></span><br><span class="line"><span class="comment"> * 2. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›</span></span><br><span class="line"><span class="comment"> * 3. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap = arr.length / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>) &#123;      <span class="comment">//ä¸æ–­ç¼©å°gapï¼Œç›´åˆ°1ä¸ºæ­¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; (j+gap) &lt; arr.length; j++)&#123;     <span class="comment">//ä½¿ç”¨å½“å‰gapè¿›è¡Œç»„å†…æ’å…¥æ’åº</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; (k+gap)&lt; arr.length; k += gap)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[k] &gt; arr[k+gap]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = arr[k+gap];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">                    arr[k+gap] = arr[k];</span><br><span class="line">                    arr[k] = temp;</span><br><span class="line">                    System.out.println(<span class="string">"    Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç»´åŸºç™¾ç§‘å®˜æ–¹å®ç°ï¼Œå¤§å®¶æ³¨æ„gapæ­¥é•¿å–å€¼éƒ¨åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸Œå°”æ’åºï¼ˆWikiå®˜æ–¹ç‰ˆï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆæ³¨æ„æ­¤ç®—æ³•çš„gapå–å€¼ï¼‰</span></span><br><span class="line"><span class="comment"> * 2. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›</span></span><br><span class="line"><span class="comment"> * 3. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shell_sort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap = <span class="number">1</span>, i, j, len = arr.length;</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">while</span> (gap &lt; len / <span class="number">3</span>)</span><br><span class="line">        gap = gap * <span class="number">3</span> + <span class="number">1</span>;      <span class="comment">// &lt;O(n^(3/2)) by Knuth,1973&gt;: 1, 4, 13, 40, 121, ...</span></span><br><span class="line">    <span class="keyword">for</span> (; gap &gt; <span class="number">0</span>; gap /= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</span><br><span class="line">            temp = arr[i];</span><br><span class="line">            <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)</span><br><span class="line">                arr[j + gap] = arr[j];</span><br><span class="line">            arr[j + gap] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å¸Œå°”æ’åºå¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlog2 n)</td><td>O(nlog2 n)</td><td>O(nlog2 n)</td><td>O(1)</td></tr></tbody></table><h3 id="ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h3><hr><blockquote><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Selection-Sort-Animation.gif" alt="é€‰æ‹©æ’åºçš„ç¤ºä¾‹åŠ¨ç”»ã€‚çº¢è‰²è¡¨ç¤ºå½“å‰æœ€å°å€¼ï¼Œé»„è‰²è¡¨ç¤ºå·²æ’åºåºåˆ—ï¼Œè“è‰²è¡¨ç¤ºå½“å‰ä½ç½®ã€‚"></p></blockquote><p>ä»ç®—æ³•é€»è¾‘ä¸Šçœ‹ï¼Œé€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œåœ¨ç®€å•é€‰æ‹©æ’åºè¿‡ç¨‹ä¸­ï¼Œæ‰€éœ€ç§»åŠ¨è®°å½•çš„æ¬¡æ•°æ¯”è¾ƒå°‘ã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-2"><a href="#1ã€åŸºæœ¬æ€æƒ³-2" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>é€‰æ‹©æ’åºçš„åŸºæœ¬æ€æƒ³ï¼šæ¯”è¾ƒ + äº¤æ¢ã€‚</p><p>åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æœªæ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-2"><a href="#2ã€ç®—æ³•æè¿°-2" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . ä»å¾…æ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼›<br><br>â‘¡. å¦‚æœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼›<br><br>â‘¢. ä»ä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æ’åºç»“æŸã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-2"><a href="#3ã€ä»£ç å®ç°-2" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>é€‰æ‹©æ’åºæ¯”è¾ƒç®€å•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®ç°ï¼Œè·Ÿå®˜æ–¹ç‰ˆå·®ä¸å¤šï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥å‚è€ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. ä»å¾…æ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * 2. å¦‚æœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼›</span></span><br><span class="line"><span class="comment"> * 3. ä»ä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æ’åºç»“æŸã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length-<span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; arr.length; j++)&#123;    <span class="comment">//é€‰å‡ºä¹‹åå¾…æ’åºä¸­å€¼æœ€å°çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &lt; arr[min])&#123;</span><br><span class="line">                min = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(min != i)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[min];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">            arr[min] = arr[i];</span><br><span class="line">            arr[i] = temp;</span><br><span class="line">            System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯é€‰æ‹©æ’åºå¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>é€‰æ‹©æ’åºçš„ç®€å•å’Œç›´è§‚åå‰¯å…¶å®ï¼Œè¿™ä¹Ÿé€ å°±äº†å®ƒâ€å‡ºäº†åçš„æ…¢æ€§å­â€ï¼Œæ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œå“ªæ€•åŸæ•°ç»„å·²æ’åºå®Œæˆï¼Œå®ƒä¹Ÿå°†èŠ±è´¹å°†è¿‘nÂ²/2æ¬¡éå†æ¥ç¡®è®¤ä¸€éã€‚å³ä¾¿æ˜¯è¿™æ ·ï¼Œå®ƒçš„æ’åºç»“æœä¹Ÿè¿˜æ˜¯ä¸ç¨³å®šçš„ã€‚ å”¯ä¸€å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œå®ƒå¹¶ä¸è€—è´¹é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p><h3 id="å››ã€å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#å››ã€å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="å››ã€å †æ’åºï¼ˆHeap Sortï¼‰"></a>å››ã€å †æ’åºï¼ˆHeap Sortï¼‰</h3><hr><blockquote><p>1991å¹´çš„è®¡ç®—æœºå…ˆé©±å¥–è·å¾—è€…ã€æ–¯å¦ç¦å¤§å­¦è®¡ç®—æœºç§‘å­¦ç³»æ•™æˆç½—ä¼¯ç‰¹Â·å¼—æ´›ä¼Šå¾·(Robert Wï¼Floyd) å’Œå¨å»‰å§†æ–¯(Jï¼Williams) åœ¨1964å¹´å…±åŒå‘æ˜äº†è‘—åçš„å †æ’åºç®—æ³•(Heap Sort).</p></blockquote><p>å †çš„å®šä¹‰å¦‚ä¸‹ï¼šnä¸ªå…ƒç´ çš„åºåˆ—{k1,k2,Â·Â·Â·,kn}ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä¸‹å…³ç³»æ—¶ï¼Œç§°ä¹‹ä¸ºå †ã€‚</p><p>ki &lt;= k(2i)  ä¸”   ki &lt;= k(2i+1) <br></p><p>æˆ–ï¼š   ki &gt;= k(2i)  ä¸”  ki &gt;=  k(2i+1) <br></p><p>æŠŠæ­¤åºåˆ—å¯¹åº”çš„äºŒç»´æ•°ç»„çœ‹æˆä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚é‚£ä¹ˆå †çš„å«ä¹‰å°±æ˜¯ï¼š<strong>å®Œå…¨äºŒå‰æ ‘ä¸­ä»»ä½•ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„å€¼å‡ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶å·¦ï¼Œå³å­©å­èŠ‚ç‚¹çš„å€¼ã€‚</strong>ç”±ä¸Šè¿°æ€§è´¨å¯çŸ¥å¤§é¡¶å †çš„å †é¡¶çš„å…³é”®å­—è‚¯å®šæ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å¤§çš„ï¼Œå°é¡¶å †çš„å †é¡¶çš„å…³é”®å­—æ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å°çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä½¿ç”¨å¤§é¡¶å †è¿›è¡Œå‡åºæ’åº, ä½¿ç”¨å°é¡¶å †è¿›è¡Œé™åºæ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-3"><a href="#1ã€åŸºæœ¬æ€æƒ³-3" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>æ­¤å¤„ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œå †æ’åºçš„è¿‡ç¨‹å°±æ˜¯å°†å¾…æ’åºçš„åºåˆ—æ„é€ æˆä¸€ä¸ªå †ï¼Œé€‰å‡ºå †ä¸­æœ€å¤§çš„ç§»èµ°ï¼Œå†æŠŠå‰©ä½™çš„å…ƒç´ è°ƒæ•´æˆå †ï¼Œæ‰¾å‡ºæœ€å¤§çš„å†ç§»èµ°ï¼Œé‡å¤ç›´è‡³æœ‰åºã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-3"><a href="#2ã€ç®—æ³•æè¿°-3" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº.<br><br>â‘¡. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..n-1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..n-1].keys &lt;= K[n].key <br><br>â‘¢. äº¤æ¢K1 å’Œ Kn å, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..n-1]è°ƒæ•´ä¸ºå †. ç„¶åé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢. <br></p><p>åŠ¨å›¾æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/heap_sort_gif.gif" alt="å †æ’åºè¿‡ç¨‹"></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Sorting_heapsort_anim.gif" alt="å †æ’åºç®—æ³•çš„æ¼”ç¤ºã€‚é¦–å…ˆï¼Œå°†å…ƒç´ è¿›è¡Œé‡æ’ï¼Œä»¥åŒ¹é…å †çš„æ¡ä»¶ã€‚å›¾ä¸­æ’åºè¿‡ç¨‹ä¹‹å‰ç®€å•çš„ç»˜å‡ºäº†å †æ ‘çš„ç»“æ„ã€‚"></p><h4 id="3ã€ä»£ç å®ç°-3"><a href="#3ã€ä»£ç å®ç°-3" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ä»ç®—æ³•æè¿°æ¥çœ‹ï¼Œå †æ’åºéœ€è¦ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸€æ˜¯å»ºç«‹å †ï¼ŒäºŒæ˜¯å †é¡¶ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚æ‰€ä»¥å †æ’åºæœ‰ä¸¤ä¸ªå‡½æ•°ç»„æˆã€‚ä¸€æ˜¯å»ºå †å‡½æ•°ï¼ŒäºŒæ˜¯åå¤è°ƒç”¨å»ºå †å‡½æ•°ä»¥é€‰æ‹©å‡ºå‰©ä½™æœªæ’å…ƒç´ ä¸­æœ€å¤§çš„æ•°æ¥å®ç°æ’åºçš„å‡½æ•°ã€‚</p><p>æ€»ç»“èµ·æ¥å°±æ˜¯å®šä¹‰äº†ä»¥ä¸‹å‡ ç§æ“ä½œï¼š</p><ul><li>æœ€å¤§å †è°ƒæ•´ï¼ˆMax_Heapifyï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹</li><li>åˆ›å»ºæœ€å¤§å †ï¼ˆBuild_Max_Heapï¼‰ï¼šå°†å †æ‰€æœ‰æ•°æ®é‡æ–°æ’åº</li><li>å †æ’åºï¼ˆHeapSortï¼‰ï¼šç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—</li></ul><p>å¯¹äºå †èŠ‚ç‚¹çš„è®¿é—®ï¼š</p><ul><li>çˆ¶èŠ‚ç‚¹içš„å·¦å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>(2*i+1)</code>;</li><li>çˆ¶èŠ‚ç‚¹içš„å³å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>(2*i+2)</code>;</li><li>å­èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>floor((i-1)/2)</code>;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å †æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº.</span></span><br><span class="line"><span class="comment"> * 2. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..nâˆ’1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..nâˆ’1].keysâ©½K[n].key</span></span><br><span class="line"><span class="comment"> * 3. äº¤æ¢K1 å’Œ Kn å, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..nâˆ’1]è°ƒæ•´ä¸ºå †. ç„¶åé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = arr.length; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">        max_heapify(arr, i);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> temp = arr[<span class="number">0</span>];      <span class="comment">//å †é¡¶å…ƒç´ (ç¬¬ä¸€ä¸ªå…ƒç´ )ä¸Knäº¤æ¢</span></span><br><span class="line">        arr[<span class="number">0</span>] = arr[i-<span class="number">1</span>];</span><br><span class="line">        arr[i-<span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">max_heapify</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> limit)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span> || arr.length &lt; limit) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> parentIdx = limit / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(; parentIdx &gt;= <span class="number">0</span>; parentIdx--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(parentIdx * <span class="number">2</span> &gt;= limit)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> left = parentIdx * <span class="number">2</span>;       <span class="comment">//å·¦å­èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> right = (left + <span class="number">1</span>) &gt;= limit ? left : (left + <span class="number">1</span>);    <span class="comment">//å³å­èŠ‚ç‚¹ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å³èŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºå·¦èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxChildId = arr[left] &gt;= arr[right] ? left : right;</span><br><span class="line">        <span class="keyword">if</span>(arr[maxChildId] &gt; arr[parentIdx])&#123;   <span class="comment">//äº¤æ¢çˆ¶èŠ‚ç‚¹ä¸å·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">int</span> temp = arr[parentIdx];</span><br><span class="line">            arr[parentIdx] = arr[maxChildId];</span><br><span class="line">            arr[maxChildId] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Max_Heapify: "</span> + Arrays.toString(arr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨:</strong> x&gt;&gt;1 æ˜¯ä½è¿ç®—ä¸­çš„å³ç§»è¿ç®—, è¡¨ç¤ºå³ç§»ä¸€ä½, ç­‰åŒäºxé™¤ä»¥2å†å–æ•´, å³ x&gt;&gt;1 == Math.floor(x/2) .</p></blockquote><p>ä»¥ä¸Š,<br>â‘ . å»ºç«‹å †çš„è¿‡ç¨‹, ä»length/2 ä¸€ç›´å¤„ç†åˆ°0, æ—¶é—´å¤æ‚åº¦ä¸ºO(n);<br>â‘¡. è°ƒæ•´å †çš„è¿‡ç¨‹æ˜¯æ²¿ç€å †çš„çˆ¶å­èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´, æ‰§è¡Œæ¬¡æ•°ä¸ºå †çš„æ·±åº¦, æ—¶é—´å¤æ‚åº¦ä¸ºO(lgn);<br>â‘¢. å †æ’åºçš„è¿‡ç¨‹ç”±næ¬¡ç¬¬â‘¡æ­¥å®Œæˆ, æ—¶é—´å¤æ‚åº¦ä¸ºO(nlgn).</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlog2n)</td><td>O(nlog2n)</td><td>O(nlog2n)</td><td>O(1)</td></tr></tbody></table><p>Tips: <strong>ç”±äºå †æ’åºä¸­åˆå§‹åŒ–å †çš„è¿‡ç¨‹æ¯”è¾ƒæ¬¡æ•°è¾ƒå¤š, å› æ­¤å®ƒä¸å¤ªé€‚ç”¨äºå°åºåˆ—.</strong> åŒæ—¶ç”±äºå¤šæ¬¡ä»»æ„ä¸‹æ ‡ç›¸äº’äº¤æ¢ä½ç½®, ç›¸åŒå…ƒç´ ä¹‹é—´åŸæœ¬ç›¸å¯¹çš„é¡ºåºè¢«ç ´åäº†, å› æ­¤, å®ƒæ˜¯ä¸ç¨³å®šçš„æ’åº.</p><h3 id="äº”ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#äº”ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="äº”ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>äº”ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h3><hr><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/bubble-sort02.gif" alt="å†’æ³¡æ’åºçš„æ€æƒ³"></p><blockquote><p>æˆ‘æƒ³å¯¹äºå®ƒæ¯ä¸ªå­¦è¿‡Cè¯­è¨€çš„éƒ½ä¼šäº†è§£ï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººæ¥è§¦çš„ç¬¬ä¸€ä¸ªæ’åºç®—æ³•ã€‚</p></blockquote><h4 id="1ã€åŸºæœ¬æ€æƒ³-4"><a href="#1ã€åŸºæœ¬æ€æƒ³-4" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/bubble-sort.gif" alt="å†’æ³¡æ’åºæ¼”ç¤º"></p><h4 id="2ã€ç®—æ³•æè¿°-4"><a href="#2ã€ç®—æ³•æè¿°-4" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>å†’æ³¡æ’åºç®—æ³•çš„è¿ä½œå¦‚ä¸‹ï¼š</p><p>â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚<br><br>â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚<br><br>â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚<br><br>â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-4"><a href="#3ã€ä»£ç å®ç°-4" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>å†’æ³¡æ’åºéœ€è¦ä¸¤ä¸ªåµŒå¥—çš„å¾ªç¯. å…¶ä¸­, <strong>å¤–å±‚å¾ªç¯</strong>ç§»åŠ¨æ¸¸æ ‡; <strong>å†…å±‚å¾ªç¯</strong>éå†æ¸¸æ ‡åŠä¹‹å(æˆ–ä¹‹å‰)çš„å…ƒç´ , é€šè¿‡ä¸¤ä¸¤äº¤æ¢çš„æ–¹å¼, æ¯æ¬¡åªç¡®ä¿è¯¥å†…å¾ªç¯ç»“æŸä½ç½®æ’åºæ­£ç¡®, ç„¶åå†…å±‚å¾ªç¯å‘¨æœŸç»“æŸ, äº¤ç”±å¤–å±‚å¾ªç¯å¾€å(æˆ–å‰)ç§»åŠ¨æ¸¸æ ‡, éšå³å¼€å§‹ä¸‹ä¸€è½®å†…å±‚å¾ªç¯, ä»¥æ­¤ç±»æ¨, ç›´è‡³å¾ªç¯ç»“æŸ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</span></span><br><span class="line"><span class="comment"> * â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;      <span class="comment">//å¤–å±‚å¾ªç¯ç§»åŠ¨æ¸¸æ ‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)&#123;    <span class="comment">//å†…å±‚å¾ªç¯éå†æ¸¸æ ‡åŠä¹‹å(æˆ–ä¹‹å‰)çš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">int</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">                System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å†’æ³¡æ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>å†’æ³¡æ’åºæ˜¯æœ€å®¹æ˜“å®ç°çš„æ’åº, æœ€åçš„æƒ…å†µæ˜¯æ¯æ¬¡éƒ½éœ€è¦äº¤æ¢, å…±éœ€éå†å¹¶äº¤æ¢å°†è¿‘nÂ²/2æ¬¡, æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). æœ€ä½³çš„æƒ…å†µæ˜¯å†…å¾ªç¯éå†ä¸€æ¬¡åå‘ç°æ’åºæ˜¯å¯¹çš„, å› æ­¤é€€å‡ºå¾ªç¯, æ—¶é—´å¤æ‚åº¦ä¸ºO(n). å¹³å‡æ¥è®², æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). ç”±äºå†’æ³¡æ’åºä¸­åªæœ‰ç¼“å­˜çš„tempå˜é‡éœ€è¦å†…å­˜ç©ºé—´, å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸é‡O(1).</p><p>Tips: ç”±äºå†’æ³¡æ’åºåªåœ¨ç›¸é‚»å…ƒç´ å¤§å°ä¸ç¬¦åˆè¦æ±‚æ—¶æ‰è°ƒæ¢ä»–ä»¬çš„ä½ç½®, å®ƒå¹¶ä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåº, å› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•.</p><h3 id="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a>å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h3><hr><p>å¿«é€Ÿæ’åºï¼ˆQuicksortï¼‰æ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œå€Ÿç”¨äº†åˆ†æ²»çš„æ€æƒ³ï¼Œç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-5"><a href="#1ã€åŸºæœ¬æ€æƒ³-5" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å¿«é€Ÿæ’åºçš„åŸºæœ¬æ€æƒ³ï¼š<strong>æŒ–å‘å¡«æ•°+åˆ†æ²»æ³•</strong>ã€‚</p><p>é¦–å…ˆé€‰ä¸€ä¸ªè½´å€¼(pivotï¼Œä¹Ÿæœ‰å«åŸºå‡†çš„)ï¼Œé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Sorting_quicksort_anim.gif" alt="ä½¿ç”¨å¿«é€Ÿæ’åºæ³•å¯¹ä¸€åˆ—æ•°å­—è¿›è¡Œæ’åºçš„è¿‡ç¨‹"></p><h4 id="2ã€ç®—æ³•æè¿°-5"><a href="#2ã€ç®—æ³•æè¿°-5" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚æ­¥éª¤ä¸ºï¼š</p><p>â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚<br><br>â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚<br><br>â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚<br></p><p>é€’å½’åˆ°æœ€åº•éƒ¨æ—¶ï¼Œæ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯å·²ç»æ’åºå¥½äº†ã€‚è¿™ä¸ªç®—æ³•ä¸€å®šä¼šç»“æŸï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ï¼ˆiterationï¼‰ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åçš„ä½ç½®å»ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/quick-sort09.gif" alt="å¿«é€Ÿæ’åºæ¼”ç¤º"></p><h4 id="3ã€ä»£ç å®ç°-5"><a href="#3ã€ä»£ç å®ç°-5" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . <code>i = L; j = R;</code> å°†åŸºå‡†æ•°æŒ–å‡ºå½¢æˆç¬¬ä¸€ä¸ªå‘<code>a[i]</code>ã€‚<br><br>â‘¡ï¼<code>j--</code>ï¼Œç”±åå‘å‰æ‰¾æ¯”å®ƒå°çš„æ•°ï¼Œæ‰¾åˆ°åæŒ–å‡ºæ­¤æ•°å¡«å‰ä¸€ä¸ªå‘<code>a[i]</code>ä¸­ã€‚<br><br>â‘¢ï¼<code>i++</code>ï¼Œç”±å‰å‘åæ‰¾æ¯”å®ƒå¤§çš„æ•°ï¼Œæ‰¾åˆ°åä¹ŸæŒ–å‡ºæ­¤æ•°å¡«åˆ°å‰ä¸€ä¸ªå‘<code>a[j]</code>ä¸­ã€‚<br><br>â‘£ï¼å†é‡å¤æ‰§è¡Œâ‘¡ï¼Œâ‘¢äºŒæ­¥ï¼Œç›´åˆ°<code>i==j</code>ï¼Œå°†åŸºå‡†æ•°å¡«å…¥<code>a[i]</code>ä¸­ <br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/200px-Partition_example.svg.png" alt="å¿«é€Ÿæ’åºé‡‡ç”¨â€œåˆ†è€Œæ²»ä¹‹ã€å„ä¸ªå‡»ç ´â€çš„è§‚å¿µï¼Œæ­¤ä¸ºåŸåœ°ï¼ˆIn-placeï¼‰åˆ†åŒºç‰ˆæœ¬ã€‚"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åºï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr   å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> low   å·¦è¾¹ç•Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> high  å³è¾¹ç•Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> left = low;</span><br><span class="line">    <span class="keyword">int</span> right = high;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> temp = arr[left];   <span class="comment">//æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right &amp;&amp; arr[right] &gt;= temp)&#123;  <span class="comment">//å‘2ï¼šä»åå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­</span></span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[left] = arr[right];</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right &amp;&amp; arr[left] &lt;= temp)&#123;   <span class="comment">//å‘3ï¼šä»å‰å¾€åæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­</span></span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[right] = arr[left];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[left] = temp;   <span class="comment">//åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æ’</span></span><br><span class="line">    System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">    quickSort(arr, low, left-<span class="number">1</span>);</span><br><span class="line">    quickSort(arr, left+<span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯é€’å½’ç‰ˆçš„å¿«é€Ÿæ’åºï¼šé€šè¿‡æŠŠåŸºå‡†tempæ’å…¥åˆ°åˆé€‚çš„ä½ç½®æ¥å®ç°åˆ†æ²»ï¼Œå¹¶é€’å½’åœ°å¯¹åˆ†æ²»åçš„ä¸¤ä¸ªåˆ’åˆ†ç»§ç»­å¿«æ’ã€‚é‚£ä¹ˆéé€’å½’ç‰ˆçš„å¿«æ’å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><p>å› ä¸º<strong>é€’å½’çš„æœ¬è´¨æ˜¯æ ˆ</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬éé€’å½’å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å€ŸåŠ©æ ˆæ¥ä¿å­˜ä¸­é—´å˜é‡å°±å¯ä»¥å®ç°éé€’å½’äº†ã€‚åœ¨è¿™é‡Œä¸­é—´å˜é‡ä¹Ÿå°±æ˜¯é€šè¿‡Pritationå‡½æ•°åˆ’åˆ†åŒºé—´ä¹‹ååˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆï¼Œåªéœ€è¦ä¿å­˜è¿™ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åºï¼ˆéé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. æŠŠåˆ†åŒºä¹‹åä¸¤ä¸ªåŒºé—´çš„è¾¹ç•Œï¼ˆlowå’Œhighï¼‰å‹å…¥æ ˆä¿å­˜ï¼Œå¹¶å¾ªç¯â‘ ã€â‘¡æ­¥éª¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr   å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSortByStack</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹çŠ¶æ€çš„å·¦å³æŒ‡é’ˆå…¥æ ˆ</span></span><br><span class="line">    stack.push(<span class="number">0</span>);</span><br><span class="line">    stack.push(arr.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">int</span> high = stack.pop();     <span class="comment">//å‡ºæ ˆè¿›è¡Œåˆ’åˆ†</span></span><br><span class="line">        <span class="keyword">int</span> low = stack.pop();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> pivotIdx = partition(arr, low, high);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¿å­˜ä¸­é—´å˜é‡</span></span><br><span class="line">        <span class="keyword">if</span>(pivotIdx &gt; low) &#123;</span><br><span class="line">            stack.push(low);</span><br><span class="line">            stack.push(pivotIdx - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pivotIdx &lt; high &amp;&amp; pivotIdx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">            stack.push(pivotIdx + <span class="number">1</span>);</span><br><span class="line">            stack.push(high);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> l = low;</span><br><span class="line">    <span class="keyword">int</span> r = high;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> pivot = arr[l];    <span class="comment">//æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r &amp;&amp; arr[r] &gt;= pivot)&#123;  <span class="comment">//å‘2ï¼šä»åå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­</span></span><br><span class="line">            r--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[l] = arr[r];</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r &amp;&amp; arr[l] &lt;= pivot)&#123;   <span class="comment">//å‘3ï¼šä»å‰å¾€åæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­</span></span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[r] = arr[l];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[l] = pivot;   <span class="comment">//åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æ’</span></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¿«é€Ÿæ’åºæ˜¯é€šå¸¸è¢«è®¤ä¸ºåœ¨åŒæ•°é‡çº§ï¼ˆO(nlog2n)ï¼‰çš„æ’åºæ–¹æ³•ä¸­å¹³å‡æ€§èƒ½æœ€å¥½çš„ã€‚ä½†è‹¥åˆå§‹åºåˆ—æŒ‰å…³é”®ç æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œå¿«æ’åºåè€Œèœ•åŒ–ä¸ºå†’æ³¡æ’åºã€‚ä¸ºæ”¹è¿›ä¹‹ï¼Œé€šå¸¸ä»¥â€œä¸‰è€…å–ä¸­æ³•â€æ¥é€‰å–åŸºå‡†è®°å½•ï¼Œå³å°†æ’åºåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ä¸ä¸­ç‚¹ä¸‰ä¸ªè®°å½•å…³é”®ç å±…ä¸­çš„è°ƒæ•´ä¸ºæ”¯ç‚¹è®°å½•ã€‚å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚</p><p>ä»¥ä¸‹æ˜¯å¿«é€Ÿæ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nÂ²)</td><td>O(1)ï¼ˆåŸåœ°åˆ†åŒºé€’å½’ç‰ˆï¼‰</td></tr></tbody></table><p>å¿«é€Ÿæ’åºæ’åºæ•ˆç‡éå¸¸é«˜ã€‚ è™½ç„¶å®ƒè¿è¡Œæœ€ç³Ÿç³•æ—¶å°†è¾¾åˆ°O(nÂ²)çš„æ—¶é—´å¤æ‚åº¦, ä½†é€šå¸¸å¹³å‡æ¥çœ‹, å®ƒçš„æ—¶é—´å¤æ‚ä¸ºO(nlogn), æ¯”åŒæ ·ä¸ºO(nlogn)æ—¶é—´å¤æ‚åº¦çš„å½’å¹¶æ’åºè¿˜è¦å¿«. å¿«é€Ÿæ’åºä¼¼ä¹æ›´åçˆ±ä¹±åºçš„æ•°åˆ—, è¶Šæ˜¯ä¹±åºçš„æ•°åˆ—, å®ƒç›¸æ¯”å…¶ä»–æ’åºè€Œè¨€, ç›¸å¯¹æ•ˆç‡æ›´é«˜.</p><p>Tips: åŒé€‰æ‹©æ’åºç›¸ä¼¼, å¿«é€Ÿæ’åºæ¯æ¬¡äº¤æ¢çš„å…ƒç´ éƒ½æœ‰å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„, å› æ­¤å®ƒæœ‰å¯èƒ½æ‰“ç ´åŸæ¥å€¼ä¸ºç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåº. å› æ­¤, å¿«é€Ÿæ’åºå¹¶ä¸ç¨³å®š.</p><h3 id="ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging-Sortï¼‰"><a href="#ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging-Sortï¼‰" class="headerlink" title="ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging Sortï¼‰"></a>ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging Sortï¼‰</h3><hr><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/merging-sort_sample.jpg" alt></p><p>å½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œ1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-6"><a href="#1ã€åŸºæœ¬æ€æƒ³-6" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å½’å¹¶æ’åºç®—æ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/2016-07-15_å½’å¹¶æ’åº.gif" alt="è¿™ä¸ªå›¾å¾ˆæœ‰æ¦‚æ‹¬æ€§ï¼Œæ¥è‡ªç»´åŸº"></p><h4 id="2ã€ç®—æ³•æè¿°-6"><a href="#2ã€ç®—æ³•æè¿°-6" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p><strong>å½’å¹¶æ’åºå¯é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ï¼š</strong></p><ul><li>è‡ªä¸Šè€Œä¸‹çš„é€’å½’</li><li>è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£</li></ul><p><strong>ä¸€ã€é€’å½’æ³•</strong>ï¼ˆå‡è®¾åºåˆ—å…±æœ‰nä¸ªå…ƒç´ ï¼‰ï¼š</p><p>â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›<br><br>â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼›<br><br>â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚<br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/merging-sort.gif" alt></p><p><strong>äºŒã€è¿­ä»£æ³•</strong></p><p>â‘ . ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ— <br><br>â‘¡. è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½® <br><br>â‘¢. æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½® <br><br>â‘£. é‡å¤æ­¥éª¤â‘¢ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ <br><br>â‘¤. å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ <br></p><h4 id="3ã€ä»£ç å®ç°-6"><a href="#3ã€ä»£ç å®ç°-6" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>å½’å¹¶æ’åºå…¶å®è¦åšä¸¤ä»¶äº‹ï¼š</p><ul><li>åˆ†è§£ï¼šå°†åºåˆ—æ¯æ¬¡æŠ˜åŠæ‹†åˆ†</li><li>åˆå¹¶ï¼šå°†åˆ’åˆ†åçš„åºåˆ—æ®µä¸¤ä¸¤æ’åºåˆå¹¶</li></ul><p>å› æ­¤ï¼Œå½’å¹¶æ’åºå®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ‹†åˆ†+åˆå¹¶</p><p><strong>å¦‚ä½•åˆå¹¶ï¼Ÿ</strong></p><p>L[firstâ€¦mid]ä¸ºç¬¬ä¸€æ®µï¼ŒL[mid+1â€¦last]ä¸ºç¬¬äºŒæ®µï¼Œå¹¶ä¸”ä¸¤ç«¯å·²ç»æœ‰åºï¼Œç°åœ¨æˆ‘ä»¬è¦å°†ä¸¤ç«¯åˆæˆè¾¾åˆ°L[firstâ€¦last]å¹¶ä¸”ä¹Ÿæœ‰åºã€‚</p><p>é¦–å…ˆä¾æ¬¡ä»ç¬¬ä¸€æ®µä¸ç¬¬äºŒæ®µä¸­å–å‡ºå…ƒç´ æ¯”è¾ƒï¼Œå°†è¾ƒå°çš„å…ƒç´ èµ‹å€¼ç»™temp[]<br><br>é‡å¤æ‰§è¡Œä¸Šä¸€æ­¥ï¼Œå½“æŸä¸€æ®µèµ‹å€¼ç»“æŸï¼Œåˆ™å°†å¦ä¸€æ®µå‰©ä¸‹çš„å…ƒç´ èµ‹å€¼ç»™temp[]<br><br>æ­¤æ—¶å°†temp[]ä¸­çš„å…ƒç´ å¤åˆ¶ç»™L[]ï¼Œåˆ™å¾—åˆ°çš„L[firstâ€¦last]æœ‰åº<br></p><p><strong>å¦‚ä½•åˆ†è§£ï¼Ÿ</strong></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨é€’å½’çš„æ–¹æ³•ï¼Œé¦–å…ˆå°†å¾…æ’åºåˆ—åˆ†æˆA,Bä¸¤ç»„ï¼›ç„¶åé‡å¤å¯¹Aã€Båºåˆ—<br>åˆ†ç»„ï¼›ç›´åˆ°åˆ†ç»„åç»„å†…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¤ä¸ºç»„å†…æ‰€æœ‰å…ƒç´ æœ‰åºï¼Œåˆ™åˆ†ç»„ç»“æŸã€‚</p><p>è¿™é‡Œæˆ‘å†™äº†é€’å½’ç®—æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½’å¹¶æ’åºï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] mergingSort(<span class="keyword">int</span>[] arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> num = arr.length &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] leftArr = Arrays.copyOfRange(arr, <span class="number">0</span>, num);</span><br><span class="line">    <span class="keyword">int</span>[] rightArr = Arrays.copyOfRange(arr, num, arr.length);</span><br><span class="line">    System.out.println(<span class="string">"split two array: "</span> + Arrays.toString(leftArr) + <span class="string">" And "</span> + Arrays.toString(rightArr));</span><br><span class="line">    <span class="keyword">return</span> mergeTwoArray(mergingSort(leftArr), mergingSort(rightArr));      <span class="comment">//ä¸æ–­æ‹†åˆ†ä¸ºæœ€å°å•å…ƒï¼Œå†æ’åºåˆå¹¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] mergeTwoArray(<span class="keyword">int</span>[] arr1, <span class="keyword">int</span>[] arr2)&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length + arr2.length];  <span class="comment">//ç”³è¯·é¢å¤–çš„ç©ºé—´å­˜å‚¨åˆå¹¶ä¹‹åçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">while</span>(i &lt; arr1.length &amp;&amp; j &lt; arr2.length)&#123;      <span class="comment">//é€‰å–ä¸¤ä¸ªåºåˆ—ä¸­çš„è¾ƒå°å€¼æ”¾å…¥æ–°æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span>(arr1[i] &lt;= arr2[j])&#123;</span><br><span class="line">            result[k++] = arr1[i++];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            result[k++] = arr2[j++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; arr1.length)&#123;     <span class="comment">//åºåˆ—1ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„</span></span><br><span class="line">        result[k++] = arr1[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(j &lt; arr2.length)&#123;     <span class="comment">//åºåˆ—2ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„</span></span><br><span class="line">        result[k++] = arr2[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Merging: "</span> + Arrays.toString(result));</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±ä¸Š, é•¿åº¦ä¸ºnçš„æ•°ç»„, æœ€ç»ˆä¼šè°ƒç”¨mergeSortå‡½æ•°2n-1æ¬¡ã€‚<strong>é€šè¿‡è‡ªä¸Šè€Œä¸‹çš„é€’å½’å®ç°çš„å½’å¹¶æ’åº, å°†å­˜åœ¨å †æ ˆæº¢å‡ºçš„é£é™©ã€‚</strong></p><p>ä»¥ä¸‹æ˜¯å½’å¹¶æ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(n)</td></tr></tbody></table><p>ä»æ•ˆç‡ä¸Šçœ‹ï¼Œå½’å¹¶æ’åºå¯ç®—æ˜¯æ’åºç®—æ³•ä¸­çš„â€ä½¼ä½¼è€…â€. å‡è®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œé‚£ä¹ˆæ‹†åˆ†æ•°ç»„å…±éœ€lognï¼Œ, åˆæ¯æ­¥éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆå¹¶å­æ•°ç»„çš„è¿‡ç¨‹ï¼Œ æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ æ•…å…¶ç»¼åˆæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å¦ä¸€æ–¹é¢ï¼Œ å½’å¹¶æ’åºå¤šæ¬¡é€’å½’è¿‡ç¨‹ä¸­æ‹†åˆ†çš„å­æ•°ç»„éœ€è¦ä¿å­˜åœ¨å†…å­˜ç©ºé—´ï¼Œ å…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><blockquote><p>å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯<code>O(n log nï¼‰</code>çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p></blockquote><h3 id="å…«ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰"><a href="#å…«ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰" class="headerlink" title="å…«ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰"></a>å…«ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</h3><hr><p>åŸºæ•°æ’åºçš„å‘æ˜å¯ä»¥è¿½æº¯åˆ°1887å¹´èµ«å°”æ›¼Â·ä½•ä¹ç¤¼åœ¨æ‰“å­”å¡ç‰‡åˆ¶è¡¨æœºï¼ˆTabulation Machineï¼‰, æ’åºå™¨æ¯æ¬¡åªèƒ½çœ‹åˆ°ä¸€ä¸ªåˆ—ã€‚å®ƒæ˜¯åŸºäºå…ƒç´ å€¼çš„æ¯ä¸ªä½ä¸Šçš„å­—ç¬¦æ¥æ’åºçš„ã€‚ å¯¹äºæ•°å­—è€Œè¨€å°±æ˜¯åˆ†åˆ«åŸºäºä¸ªä½ï¼Œåä½ï¼Œ ç™¾ä½æˆ–åƒä½ç­‰ç­‰æ•°å­—æ¥æ’åºã€‚</p><p>åŸºæ•°æ’åºï¼ˆRadix sortï¼‰æ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-7"><a href="#1ã€åŸºæœ¬æ€æƒ³-7" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å®ƒæ˜¯è¿™æ ·å®ç°çš„ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><p>åŸºæ•°æ’åºæŒ‰ç…§ä¼˜å…ˆä»é«˜ä½æˆ–ä½ä½æ¥æ’åºæœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š</p><ul><li><p><strong>MSDï¼ˆMost significant digitalï¼‰ ä»æœ€å·¦ä¾§é«˜ä½å¼€å§‹è¿›è¡Œæ’åº</strong>ã€‚å…ˆæŒ‰k1æ’åºåˆ†ç»„, åŒä¸€ç»„ä¸­è®°å½•, å…³é”®ç k1ç›¸ç­‰, å†å¯¹å„ç»„æŒ‰k2æ’åºåˆ†æˆå­ç»„, ä¹‹å, å¯¹åé¢çš„å…³é”®ç ç»§ç»­è¿™æ ·çš„æ’åºåˆ†ç»„, ç›´åˆ°æŒ‰æœ€æ¬¡ä½å…³é”®ç kdå¯¹å„å­ç»„æ’åºå. å†å°†å„ç»„è¿æ¥èµ·æ¥, ä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚<em>MSDæ–¹å¼é€‚ç”¨äºä½æ•°å¤šçš„åºåˆ—</em>ã€‚</p></li><li><p><strong>LSD ï¼ˆLeast significant digitalï¼‰ä»æœ€å³ä¾§ä½ä½å¼€å§‹è¿›è¡Œæ’åº</strong>ã€‚å…ˆä»kdå¼€å§‹æ’åºï¼Œå†å¯¹kd-1è¿›è¡Œæ’åºï¼Œä¾æ¬¡é‡å¤ï¼Œç›´åˆ°å¯¹k1æ’åºåä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚<em>LSDæ–¹å¼é€‚ç”¨äºä½æ•°å°‘çš„åºåˆ—</em>ã€‚</p></li></ul><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/radix-sort_sample.gif" alt="åŸºæ•°æ’åºLSDåŠ¨å›¾æ¼”ç¤º"></p><h4 id="2ã€ç®—æ³•æè¿°-7"><a href="#2ã€ç®—æ³•æè¿°-7" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>æˆ‘ä»¬ä»¥LSDä¸ºä¾‹ï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œå…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›<br><br>â‘¡. arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›<br><br>â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›<br></p><h4 id="3ã€ä»£ç å®ç°-7"><a href="#3ã€ä»£ç å®ç°-7" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>åŸºæ•°æ’åºï¼šé€šè¿‡åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„å€¼ï¼Œå¯¹æ’åºçš„Nä¸ªå…ƒç´ è¿›è¡Œè‹¥å¹²è¶Ÿçš„â€œåˆ†é…â€ä¸â€œæ”¶é›†â€æ¥å®ç°æ’åºã€‚</p><ul><li><p><strong>åˆ†é…</strong>ï¼šæˆ‘ä»¬å°†L[i]ä¸­çš„å…ƒç´ å–å‡ºï¼Œé¦–å…ˆç¡®å®šå…¶ä¸ªä½ä¸Šçš„æ•°å­—ï¼Œæ ¹æ®è¯¥æ•°å­—åˆ†é…åˆ°ä¸ä¹‹åºå·ç›¸åŒçš„æ¡¶ä¸­</p></li><li><p><strong>æ”¶é›†</strong>ï¼šå½“åºåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œå†æŒ‰ç…§é¡ºåºä¾æ¬¡å°†æ¡¶ä¸­çš„å…ƒç´ æ”¶é›†å½¢æˆæ–°çš„ä¸€ä¸ªå¾…æ’åºåˆ—L[]ã€‚å¯¹æ–°å½¢æˆçš„åºåˆ—L[]é‡å¤æ‰§è¡Œåˆ†é…å’Œæ”¶é›†å…ƒç´ ä¸­çš„åä½ã€ç™¾ä½â€¦ç›´åˆ°åˆ†é…å®Œè¯¥åºåˆ—ä¸­çš„æœ€é«˜ä½ï¼Œåˆ™æ’åºç»“æŸ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºæ•°æ’åºï¼ˆLSD ä»ä½ä½å¼€å§‹ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åŸºæ•°æ’åºé€‚ç”¨äºï¼š</span></span><br><span class="line"><span class="comment"> *  (1)æ•°æ®èŒƒå›´è¾ƒå°ï¼Œå»ºè®®åœ¨å°äº1000</span></span><br><span class="line"><span class="comment"> *  (2)æ¯ä¸ªæ•°å€¼éƒ½è¦å¤§äºç­‰äº0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¡. arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">radixSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°</span></span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(max &lt; arr[i])&#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxDigit = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(max / <span class="number">10</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        maxDigit++;</span><br><span class="line">        max = max / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"maxDigit: "</span> + maxDigit);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”³è¯·ä¸€ä¸ªæ¡¶ç©ºé—´</span></span><br><span class="line">    <span class="keyword">int</span>[][] buckets = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][arr.length];</span><br><span class="line">    <span class="keyword">int</span> base = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»ä½ä½åˆ°é«˜ä½ï¼Œå¯¹æ¯ä¸€ä½éå†ï¼Œå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxDigit; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span>[] bktLen = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];        <span class="comment">//å­˜å‚¨å„ä¸ªæ¡¶ä¸­å­˜å‚¨å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ†é…ï¼šå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length; j++)&#123;</span><br><span class="line">            <span class="keyword">int</span> whichBucket = (arr[j] % base) / (base / <span class="number">10</span>);</span><br><span class="line">            buckets[whichBucket][bktLen[whichBucket]] = arr[j];</span><br><span class="line">            bktLen[whichBucket]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†ï¼šå°†ä¸åŒæ¡¶é‡Œæ•°æ®æŒ¨ä¸ªæå‡ºæ¥,ä¸ºä¸‹ä¸€è½®é«˜ä½æ’åºåšå‡†å¤‡,ç”±äºé è¿‘æ¡¶åº•çš„å…ƒç´ æ’åé å‰,å› æ­¤ä»æ¡¶åº•å…ˆæ</span></span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> b = <span class="number">0</span>; b &lt; buckets.length; b++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; bktLen[b]; p++)&#123;</span><br><span class="line">                arr[k++] = buckets[b][p];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">        base *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯åŸºæ•°æ’åºç®—æ³•å¤æ‚åº¦ï¼Œå…¶ä¸­kä¸ºæœ€å¤§æ•°çš„ä½æ•°ï¼š</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(d*(n+r))</td><td>O(d*(n+r))</td><td>O(d*(n+r))</td><td>O(n+r)</td></tr></tbody></table><p>å…¶ä¸­ï¼Œ<strong>d ä¸ºä½æ•°ï¼Œr ä¸ºåŸºæ•°ï¼Œn ä¸ºåŸæ•°ç»„ä¸ªæ•°</strong>ã€‚åœ¨åŸºæ•°æ’åºä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¯”è¾ƒæ“ä½œï¼Œæ‰€ä»¥åœ¨å¤æ‚ä¸Šï¼Œæœ€å¥½çš„æƒ…å†µä¸æœ€åçš„æƒ…å†µåœ¨æ—¶é—´ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå‡ä¸º <code>O(d*(n + r))</code>ã€‚</p><p>åŸºæ•°æ’åºæ›´é€‚åˆç”¨äºå¯¹æ—¶é—´, å­—ç¬¦ä¸²ç­‰è¿™äº›<strong>æ•´ä½“æƒå€¼æœªçŸ¥çš„æ•°æ®</strong>è¿›è¡Œæ’åºã€‚</p><p>Tips: åŸºæ•°æ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚</p><p><strong>åŸºæ•°æ’åº vs è®¡æ•°æ’åº vs æ¡¶æ’åº</strong></p><p>è¿™ä¸‰ç§æ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæœ‰æ˜æ˜¾å·®å¼‚ï¼š</p><ol><li>åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶</li><li>è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼</li><li>æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼</li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><hr><p>å„ç§æ’åºæ€§èƒ½å¯¹æ¯”å¦‚ä¸‹å›¾ï¼Œæœ‰äº›æ’åºæœªè¯¦ç»†ä»‹ç»ï¼Œæš‚ä¸”æ”¾åˆ°è¿™é‡Œã€‚<br>å®ä¾‹æµ‹è¯•ç»“æœå¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/BENCH_RESULT.md" target="_blank" rel="noopener"><strong>å…«å¤§æ’åºç®—æ³•è€—æ—¶å¯¹æ¯”</strong></a> ã€‚</p><table><thead><tr><th>æ’åºç±»å‹</th><th>å¹³å‡æƒ…å†µ</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>è¾…åŠ©ç©ºé—´</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>ç›´æ¥æ’å…¥æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>æŠ˜åŠæ’å…¥æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>å¸Œå°”æ’åº</td><td>O(n^1.3)</td><td>O(nlogn)</td><td>O(nÂ²)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>å½’å¹¶æ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(n)</td><td>ç¨³å®š</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nÂ²)</td><td>O(nlogâ‚‚n)</td><td>ä¸ç¨³å®š</td></tr><tr><td>å †æ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>è®¡æ•°æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>O(n+k)</td><td>O(k)</td><td>ç¨³å®š</td></tr><tr><td>æ¡¶æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>O(nÂ²)</td><td>O(n+k)</td><td>(ä¸)ç¨³å®š</td></tr><tr><td>åŸºæ•°æ’åº</td><td>O(d(n+k))</td><td>O(d(n+k))</td><td>O(d(n+kd))</td><td>O(n+kd)</td><td>ç¨³å®š</td></tr></tbody></table><p>ä»æ—¶é—´å¤æ‚åº¦æ¥è¯´ï¼š</p><p>(1). å¹³æ–¹é˜¶O(nÂ²)æ’åºï¼š<strong><code>å„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åº</code></strong>ï¼›</p><p>(2). çº¿æ€§å¯¹æ•°é˜¶O(nlogâ‚‚n)æ’åºï¼š<strong><code>å¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åº</code></strong>ï¼›</p><p>(3). O(n1+Â§))æ’åºï¼ŒÂ§æ˜¯ä»‹äº0å’Œ1ä¹‹é—´çš„å¸¸æ•°ï¼š<strong><code>å¸Œå°”æ’åº</code></strong></p><p>(4). çº¿æ€§é˜¶O(n)æ’åºï¼š<strong><code>åŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åº</code></strong>ã€‚</p><p>åˆ°æ­¤ï¼Œå¾ˆå¤šäººä¼šæ³¨æ„åˆ°<strong>åŸºæ•°æ’åº</strong>çš„æ—¶é—´å¤æ‚åº¦æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå´æ²¡æœ‰å¿«æ’ã€å †æ’åºæµè¡Œå‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ä¸‹å›¾ç®—æ³•å¯¼è®ºçš„ç›¸å…³è¯´æ˜ï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/radixsort-comparison.jpg" alt></p><p>åŸºæ•°æ’åºåªé€‚ç”¨äºæœ‰åŸºæ•°çš„æƒ…å†µï¼Œè€ŒåŸºäºæ¯”è¾ƒçš„æ’åºé€‚ç”¨èŒƒå›´å°±å¹¿å¾—å¤šã€‚å¦ä¸€æ–¹é¢æ˜¯å†…å­˜ä¸Šçš„è€ƒè™‘ã€‚ä½œä¸ºä¸€ç§é€šç”¨çš„æ’åºæ–¹æ³•ï¼Œæœ€å¥½ä¸è¦å¸¦æ¥æ„æ–™ä¹‹å¤–çš„å†…å­˜å¼€é”€ï¼Œæ‰€ä»¥å„è¯­è¨€çš„é»˜è®¤å®ç°éƒ½æ²¡æœ‰ç”¨åŸºæ•°æ’åºï¼Œä½†æ˜¯ä¸èƒ½å¦è®¤åŸºæ•°æ’åºåœ¨å„é¢†åŸŸçš„åº”ç”¨ã€‚</p><h4 id="æ—¶é—´å¤æ‚åº¦æé™"><a href="#æ—¶é—´å¤æ‚åº¦æé™" class="headerlink" title="æ—¶é—´å¤æ‚åº¦æé™"></a>æ—¶é—´å¤æ‚åº¦æé™</h4><p><strong>å½“è¢«æ’åºçš„æ•°æœ‰ä¸€äº›æ€§è´¨çš„æ—¶å€™</strong>ï¼ˆæ¯”å¦‚æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚æœ‰ä¸€å®šçš„èŒƒå›´ï¼‰ï¼Œæ’åºç®—æ³•çš„å¤æ‚åº¦æ˜¯å¯ä»¥å°äºO(nlgn)çš„ã€‚æ¯”å¦‚ï¼š</p><ol><li>è®¡æ•°æ’åº å¤æ‚åº¦O( k+n)     è¦æ±‚ï¼šè¢«æ’åºçš„æ•°æ˜¯0~kèŒƒå›´å†…çš„æ•´æ•°</li><li>åŸºæ•°æ’åº å¤æ‚åº¦O( d(k+n) )  è¦æ±‚ï¼šdä½æ•°ï¼Œæ¯ä¸ªæ•°ä½æœ‰kä¸ªå–å€¼</li><li>æ¡¶æ’åº    å¤æ‚åº¦ O( n ) ï¼ˆå¹³å‡ï¼‰ è¦æ±‚ï¼šè¢«æ’åºæ•°åœ¨æŸä¸ªèŒƒå›´å†…ï¼Œå¹¶ä¸”æœä»å‡åŒ€åˆ†å¸ƒ</li></ol><p>ä½†æ˜¯ï¼Œå½“è¢«æ’åºçš„æ•°ä¸å…·æœ‰ä»»ä½•æ€§è´¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä½¿ç”¨åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œè€Œ<strong>åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦çš„ä¸‹é™å¿…é¡»æ˜¯O(nlgn)</strong>ã€‚ å‚è€ƒ<a href="https://www.zhihu.com/question/24516934" target="_blank" rel="noopener">å¾ˆå¤šé«˜æ•ˆæ’åºç®—æ³•çš„ä»£ä»·æ˜¯ nlognï¼Œéš¾é“è¿™æ˜¯æ’åºç®—æ³•çš„æé™äº†å—ï¼Ÿ</a></p><h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><ul><li>å½“åŸè¡¨æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œç›´æ¥æ’å…¥æ’åºå’Œå†’æ³¡æ’åºå°†å¤§å¤§å‡å°‘æ¯”è¾ƒæ¬¡æ•°å’Œç§»åŠ¨è®°å½•çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™è‡³Oï¼ˆnï¼‰ï¼›</li><li>è€Œå¿«é€Ÿæ’åºåˆ™ç›¸åï¼Œå½“åŸè¡¨åŸºæœ¬æœ‰åºæ—¶ï¼Œå°†èœ•åŒ–ä¸ºå†’æ³¡æ’åºï¼Œæ—¶é—´å¤æ‚åº¦æé«˜ä¸ºOï¼ˆn2ï¼‰ï¼›</li><li>åŸè¡¨æ˜¯å¦æœ‰åºï¼Œå¯¹ç®€å•é€‰æ‹©æ’åºã€å †æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å½±å“ä¸å¤§ã€‚</li></ul><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/2016-07-15_å¸¸ç”¨æ’åºç®—æ³•.png" alt></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>æ•°æ®ç»“æ„å¯è§†åŒ–ï¼š<a href="https://visualgo.net/zh" target="_blank" rel="noopener">visualgo</a>ï¼Œ<a href="https://www.toptal.com/developers/sorting-algorithms/" target="_blank" rel="noopener">Sorting Algorithms Animations</a>ï¼Œ<a href="https://codepen.io/iTimeTraveler/pen/dRrwZr" target="_blank" rel="noopener">CodePen</a> &amp; <a href="https://codepen.io/iTimeTraveler/pen/weORyW" target="_blank" rel="noopener">sort it out</a></li><li><a href="https://coolshell.cn/articles/536.html" target="_blank" rel="noopener">ä¸€ä¸ªæ˜¾ç¤ºæ’åºè¿‡ç¨‹çš„PYTHONè„šæœ¬</a></li><li>æ’åºç®—æ³•æµ‹è¯•ï¼š<a href="http://www.cse.chalmers.se/edu/course/DIT960/lab1-sorting.html" target="_blank" rel="noopener">Lab 1: Sorting - å“¥å¾·å ¡å¤§å­¦è¯¾ä»¶ï¼ˆUniversity of Gothenburgï¼‰</a></li><li><a href="http://www.sorting-algorithms.com/" target="_blank" rel="noopener">Sorting Algorithm Animations - ä¸€ä¸ªæ’åºç®—æ³•æ¯”è¾ƒçš„ç½‘ç«™</a></li><li><a href="https://www.cs.cmu.edu/~adamchik/15-121/lectures/Sorting%20Algorithms/sorting.html" target="_blank" rel="noopener">Sorting - å¡å†…åŸºæ¢…éš†å¤§å­¦è¯¾ä»¶</a></li><li><a href="http://www.jianshu.com/p/7d037c332a9d" target="_blank" rel="noopener">æ•°æ®ç»“æ„å¸¸è§çš„å…«å¤§æ’åºç®—æ³•ï¼ˆè¯¦ç»†æ•´ç†ï¼‰</a></li><li><a href="http://www.jianshu.com/p/8c915179fd02" target="_blank" rel="noopener">å¿…é¡»çŸ¥é“çš„å…«å¤§ç§æ’åºç®—æ³•ã€javaå®ç°ã€‘</a></li><li><a href="http://web.jobbole.com/87968/" target="_blank" rel="noopener">åå¤§ç»å…¸æ’åºç®—æ³•</a></li><li><a href="http://blog.jobbole.com/11745/" target="_blank" rel="noopener">è§†è§‰ç›´è§‚æ„Ÿå— 7 ç§å¸¸ç”¨çš„æ’åºç®—æ³•</a></li><li><a href="http://louiszhai.github.io/2016/12/23/sort/" target="_blank" rel="noopener">JSä¸­å¯èƒ½ç”¨å¾—åˆ°çš„å…¨éƒ¨çš„æ’åºç®—æ³•</a></li><li><a href="http://www.cnblogs.com/minkaihui/p/4077888.html" target="_blank" rel="noopener">æ€»ç»“5ç§æ¯”è¾ƒé«˜æ•ˆå¸¸ç”¨çš„æ’åºç®—æ³•</a></li><li><a href="http://www.cnblogs.com/zyb428/p/5673738.html" target="_blank" rel="noopener">å¸¸è§æ’åºç®—æ³•C++æ€»ç»“</a></li></ul>]]></content>
    
    <summary type="html">
    
      å› ä¸ºå¥å¿˜ï¼ŒåŠ ä¸Šå¯¹å„ç§æ’åºç®—æ³•ç†è§£ä¸æ·±åˆ»ï¼Œè¿‡æ®µæ—¶é—´é¢å¯¹æ’åºå°±è’™äº†ã€‚æ‰€ä»¥å†³å®šå¯¹æˆ‘ä»¬å¸¸è§çš„è¿™å‡ ç§æ’åºç®—æ³•è¿›è¡Œç»Ÿä¸€æ€»ç»“ï¼Œå¼ºè¡Œå­¦ä¹ ã€‚é¦–å…ˆç½—åˆ—ä¸€ä¸‹å¸¸è§çš„åå¤§æ’åºç®—æ³•
    
    </summary>
    
    
      <category term="Algorithms," scheme="http://yoursite.com/tags/Algorithms/"/>
    
  </entry>
  
  <entry>
    <title>EveryThing About Operation System</title>
    <link href="http://yoursite.com/2019/12/27/EveryThing-About-Operation-System/"/>
    <id>http://yoursite.com/2019/12/27/EveryThing-About-Operation-System/</id>
    <published>2019-12-27T09:13:56.000Z</published>
    <updated>2020-02-27T09:17:33.579Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å †å’Œæ ˆçš„åŒºåˆ«"><a href="#å †å’Œæ ˆçš„åŒºåˆ«" class="headerlink" title="å †å’Œæ ˆçš„åŒºåˆ«"></a>å †å’Œæ ˆçš„åŒºåˆ«</h2><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><ul><li>ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ï¼Œåˆ†é…æ–¹å¼ç±»ä¼¼äºé“¾è¡¨ã€‚å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥å†³å®šï¼ˆå¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›æ”¶ï¼‰ã€‚æ‰€ä»¥è°ƒç”¨è¿™äº›å¯¹è±¡çš„é€Ÿåº¦è¦ç›¸å¯¹æ¥å¾—ä½ä¸€äº›å †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æ’åºã€‚</li></ul><h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><ul><li>ç”±æ“ä½œç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆæ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œ å®ƒä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾ã€‚ä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„</li></ul><h3 id="ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚"><a href="#ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚" class="headerlink" title="ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚"></a>ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚</h3><ul><li><p>å†…æ ¸æ€ï¼šè¿è¡Œæ“ä½œç³»ç»Ÿç¨‹åºï¼Œæ§åˆ¶è®¡ç®—æœºçš„ç¡¬ä»¶èµ„æºï¼Œå¹¶æä¾›ä¸Šå±‚åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒï¼Œè¿è¡Œåœ¨é«˜ç‰¹æƒçº§ä¸Šã€‚<strong>å†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€çš„é€”å¾„â€”â€”&gt;è®¾ç½®ç¨‹åºçŠ¶æ€å­—</strong>ã€‚</p></li><li><p>ç”¨æˆ·æ€ï¼šè¿è¡Œç”¨æˆ·ç¨‹åºä¸Šå±‚åº”ç”¨ç¨‹åºçš„æ´»åŠ¨ç©ºé—´ï¼Œè¿è¡Œåœ¨ä½ç‰¹æƒçº§åˆ«ä¸Šã€‚ä¸ºäº†ä½¿ä¸Šå±‚åº”ç”¨èƒ½å¤Ÿè®¿é—®åˆ°è¿™äº›èµ„æºï¼Œå†…æ ¸ä¸ºä¸Šå±‚åº”ç”¨æä¾›è®¿é—®çš„æ¥å£ã€‚<strong>ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„å”¯ä¸€é€”å¾„(ç”³è¯·å¤–éƒ¨èµ„æº)â€”â€”&gt;ä¸­æ–­/å¼‚å¸¸/ç³»ç»Ÿè°ƒç”¨</strong>(è¯»å†™æ–‡ä»¶,ç”³è¯·å †å†…å­˜,ç¼ºé¡µ(è™šæ‹Ÿå†…å­˜åœ°å€æ²¡æœ‰æ˜ å°„åˆ°ç‰©ç†å†…å­˜åœ°å€,åœ¨Javaä¸­Newä¸€ä¸ªå¯¹è±¡))ã€‚ç³»ç»Ÿè°ƒç”¨ Systemï¼Œ Callaccept:å¥—æ¥å­—çš„å®¢æˆ·ç«¯è¿æ¥å¥—æ¥å­—ï¼Œbindå¥—æ¥å­—çš„æœåŠ¡ç«¯ç›‘å¬ç«¯å£</p></li></ul><h2 id="ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»"><a href="#ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»" class="headerlink" title="ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»"></a>ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»</h2><ul><li>ä¿¡å·ï¼šï¼ˆsignalï¼‰æ˜¯ä¸€ç§å¤„ç†å¼‚æ­¥äº‹ä»¶çš„æ–¹å¼ã€‚ä¿¡å·æ—¶æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥å—è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿï¼Œé™¤äº†ç”¨äºè¿›ç¨‹å¤–ï¼Œè¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«ã€‚linuxé™¤äº†æ”¯æŒunixæ—©æœŸçš„ä¿¡å·è¯­ä¹‰å‡½æ•°ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆposix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigactionã€‚</li><li>ä¿¡å·é‡ï¼šï¼ˆSemaphoreï¼‰è¿›ç¨‹é—´é€šä¿¡å¤„ç†åŒæ­¥äº’æ–¥çš„æœºåˆ¶ã€‚æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨çš„ä¸€ç§è®¾æ–½, å®ƒè´Ÿè´£åè°ƒå„ä¸ªçº¿ç¨‹, ä»¥ä¿è¯å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®ã€åˆç†çš„ä½¿ç”¨å…¬å…±èµ„æºã€‚<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰"></a>è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰</h2>å•¥æ˜¯è¿›ç¨‹ï¼Œå•¥æ˜¯çº¿ç¨‹ï¼Œä»–ä»¬çš„æœ¬è´¨åŒºåˆ«ï¼Ÿæˆ‘ä»¬è¿è¡Œä¸€ä¸ªç¨‹åºæ—¶ï¼Œæ•°æ®æ”¾åœ¨å“ªé‡Œï¼Ÿä»£ç æ”¾åœ¨å“ªé‡Œï¼Ÿå’‹å°±è¿˜è¦åˆ†å †å’Œæ ˆï¼Ÿçº¿ç¨‹åˆ‡æ¢æ—¶æ˜¯ä¸Šä¸‹æ–‡æ˜¯å•¥æ„æ€ï¼Ÿ</li></ul><p>è™šæ‹Ÿåœ°å€æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿ï¼Ÿçº¿ç¨‹éœ€è¦é‚£ä¹ˆå¤šç§çŠ¶æ€å¹²å•¥å­ï¼Ÿä»€ä¹ˆæ˜¯ä¹è§‚é”ã€æ‚²è§‚é”ï¼Ÿæ­»é”æ˜¯æ€ä¹ˆé€ æˆçš„ï¼Ÿè§£å†³æ­»é”çš„ç­–ç•¥æœ‰å“ªäº›ï¼Ÿç­‰ç­‰<br>2ã€è¿›ç¨‹ã€çº¿ç¨‹ç©¶ç«Ÿæ˜¯ç”±ä»€ä¹ˆç»„æˆçš„ï¼Ÿæœ‰å“ªäº›æ•°æ®ï¼Ÿ</p><p>3ã€å†…å­˜ç®¡ç†ï¼ŒåŒ…æ‹¬ï¼šè™šæ‹Ÿå†…å­˜ï¼ˆé‡ç‚¹ï¼‰ã€åˆ†é¡µã€åˆ†æ®µã€åˆ†é¡µç³»ç»Ÿåœ°å€æ˜ å°„ã€å†…å­˜ç½®æ¢ç®—æ³•ï¼ˆé‡ç‚¹ï¼‰ã€‚</p><p>å®‰å…¨ç³»ç»Ÿä¸ä¼šæ­»é”</p><h2 id="è¿›ç¨‹æ˜¯ä»€ä¹ˆ"><a href="#è¿›ç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="è¿›ç¨‹æ˜¯ä»€ä¹ˆ"></a>è¿›ç¨‹æ˜¯ä»€ä¹ˆ</h2><p>è¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œé‡ç‚¹åœ¨ç³»ç»Ÿè°ƒåº¦å’Œç‹¬ç«‹çš„å•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹æ˜¯å¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ä¸€æ®µç¨‹åºã€‚</p><h2 id="çº¿ç¨‹æ˜¯ä»€ä¹ˆ"><a href="#çº¿ç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="çº¿ç¨‹æ˜¯ä»€ä¹ˆ"></a>çº¿ç¨‹æ˜¯ä»€ä¹ˆ</h2><p>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåœ¨è¿è¡Œæ—¶ï¼Œåªæ˜¯æš‚ç”¨ä¸€äº›è®¡æ•°å™¨ï¼Œå¯„å­˜å™¨ï¼Œå’Œæ ˆã€‚</p><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»"></a>è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»</h2><ul><li>ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆé€šå¸¸è¯´çš„ä¸»çº¿ç¨‹ï¼‰ã€‚</li><li>èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li><li>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åä½œåŒæ­¥ï¼Œä¸åŒè¿›ç¨‹çš„çº¿ç¨‹é—´è¦åˆ©ç”¨æ¶ˆæ¯é€šä¿¡çš„æ–¹æ³•å®ç°åŒæ­¥ã€‚</li><li>å¤„ç†æœºåˆ†é…ç»™çº¿ç¨‹ï¼Œå³çœŸæ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ˜¯çº¿ç¨‹ã€‚</li><li>çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹å†…çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯è¿›ç¨‹å†…çš„å¯è°ƒåº¦å®ä½“ã€‚</li><li>è¿›ç¨‹ä¼šé‡Šæ”¾èµ„æºï¼Œçº¿ç¨‹ä¸ä¼šã€‚<h2 id="ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«"><a href="#ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«"></a>ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«</h2></li><li>è°ƒåº¦ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºçš„åŸºæœ¬å•ä½</li><li>å¹¶å‘æ€§ï¼šä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥å¹¶å‘æ‰§è¡Œ</li><li>æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†æ˜¯å¯ä»¥è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æº</li><li>ç³»ç»Ÿå¼€é”€ï¼šåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶ç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ï¼ŒI/Oè®¾å¤‡ç­‰ï¼ŒOSæ‰€ä»˜å‡ºçš„å¼€é”€æ˜¾è‘—å¤§äºåœ¨åˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ï¼Œè¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ä¹Ÿè¿œå¤§äºçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€<h2 id="è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€"><a href="#è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€" class="headerlink" title="è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€"></a>è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€</h2></li><li>å°±ç»ªçŠ¶æ€ï¼šè¿›ç¨‹å·²ç»è·å¾—é™¤å¤„ç†æœºä»¥å¤–çš„æ‰€æœ‰èµ„æºï¼Œç­‰å¾…åˆ†é…å¤„ç†æœºèµ„æº</li><li>è¿è¡ŒçŠ¶æ€ï¼šå ç”¨å¤„ç†æœºèµ„æºè¿è¡Œï¼Œå¤„äºæ­¤çŠ¶æ€çš„è¿›ç¨‹æ•°å°äºç­‰äºCPUæ•°ç›®</li><li>é˜»å¡çŠ¶æ€ï¼šè¿›ç¨‹ç­‰å¾…æŸç§æ¡ä»¶ï¼Œåœ¨æ¡ä»¶æ»¡è¶³ä¹‹å‰æ— æ³•è¿è¡Œ<h2 id="çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€"><a href="#çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€" class="headerlink" title="çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€"></a>çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€</h2></li><li>æ‰§è¡ŒçŠ¶æ€ï¼šè¡¨ç¤ºçº¿ç¨‹å·²ç»è·å¾—å¤„ç†æœºè€Œæ­£åœ¨è¿è¡Œ</li><li>å°±ç»ªçŠ¶æ€ï¼šæŒ‡çº¿ç¨‹å·²ç»å…·å¤‡äº†å„ç§æ‰§è¡Œæ¡ä»¶ï¼Œåªéœ€å†è·å¾—CPUä¾¿å¯ä»¥ç«‹å³æ‰§è¡Œéš¾</li><li>é˜»å¡çŠ¶æ€ï¼šçº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å› æŸäº‹å—é˜»è€Œå¤„äºæš‚åœçŠ¶æ€<h2 id="æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§"><a href="#æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§" class="headerlink" title="æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§"></a>æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§</h2></li><li>éæŠ¢å å¼æ–¹å¼ï¼šé‡‡ç”¨è¿™ç§è°ƒåº¦æ–¹å¼æ—¶ï¼Œä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™æŸä¸ªè¿›ç¨‹åï¼Œå°±ä¸€ç›´è®©å®ƒè¿è¡Œä¸‹å»ï¼Œå†³ä¸ä¼šå› ä¸ºæ—¶é’Ÿä¸­æ–­æˆ–ä»»ä½•å…¶å®ƒåŸå› å»æŠ¢å å½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„å¤„ç†æœºï¼Œç›´è‡³è¯¥è¿›ç¨‹å®Œæˆï¼Œæˆ–å‘ç”ŸæŸç§äº‹ä»¶è€Œè¢«é˜»å¡æ—¶ï¼Œæ‰æŠŠå¤„ç†æœºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹</li><li>æŠ¢å å¼æ–¹å¼ï¼šè¿™ç§è°ƒåº¦æ–¹å¼å…è®¸è°ƒåº¦ç¨‹åºæ ¹æ®æŸç§åŸåˆ™ï¼Œå»æš‚åœæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å·²ç»åˆ†é…ç»™è¯¥è¿›ç¨‹çš„å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€è¿›ç¨‹ï¼Œåœ¨ç°ä»£OSä¸­å¹¿æ³›é‡‡ç”¨æŠ¢å æ–¹å¼ã€‚<br>è¿›ç¨‹ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥<br>è¿›ç¨‹åŒæ­¥æœºåˆ¶çš„ä¸»è¦ä»»åŠ¡æ˜¯å¯¹å¤šä¸ªç›¸å…³è¿›ç¨‹åœ¨æ‰§è¡Œæ¬¡åºä¸Šè¿›è¡Œåè°ƒï¼Œä½¿å¾—å¹¶å‘æ‰§è¡Œçš„å„ä¸ªè¿›ç¨‹ä¹‹é—´èƒ½æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æˆ–æ—¶åºå…±äº«ç³»ç»Ÿèµ„æºï¼Œå¹¶èƒ½å¾ˆå¥½çš„ç›¸äº’åˆä½œï¼Œä»è€Œä½¿å¾—ç¨‹åºçš„æ‰§è¡Œå…·æœ‰å¯å†ç°æ€§</li></ul><h2 id="åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹"><a href="#åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹" class="headerlink" title="åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹"></a>åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹</h2><ul><li>ç¡¬ä»¶åŒæ­¥æœºåˆ¶ï¼š</li><li>ä¿¡å·é‡æœºåˆ¶ï¼š</li><li>ç®¡ç¨‹æœºåˆ¶ï¼š<h2 id="è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"><a href="#è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„" class="headerlink" title="è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"></a>è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„</h2><a href="https://mp.weixin.qq.com/s/5CbYGrylSKx1JwtOiW3aOQ" target="_blank" rel="noopener">è¿›ç¨‹ä¹‹é—´é€šä¿¡æ–¹å‘</a></li><li>ç®¡é“ï¼šç®¡é“æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œè€Œä¸”åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´ä½¿ç”¨ï¼Œè¿›ç¨‹çš„äº²ç¼˜å…³ç³»é€šå¸¸æ˜¯æŒ‡çˆ¶å­è¿›ç¨‹å…³ç³»</li><li>æœ‰åç®¡é“ï¼šæœ‰åç®¡é“ä¹Ÿæ˜¯åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œä½†æ˜¯å®ƒå…è®¸æ— äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡</li><li>ä¿¡å·é‡ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œå®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºï¼Œå› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”±æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹</li><li>ä¿¡å·ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿ</li><li>å…±äº«å†…å­˜ï¼šå…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜ï¼Œè¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºï¼Œä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ï¼Œå…±äº«å†…å­˜æ˜¯æœ€å¿«çš„IPCæ–¹å¼ï¼Œå®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆç‡ä½è€Œä¸“é—¨è®¾è®¡çš„ï¼Œå®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ï¼Œé…åˆä½¿ç”¨ï¼Œæ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡</li><li>Socket(å¥—æ¥å­—)ï¼šå¥—æ¥å­—å¯ä»¥ç”¨äºä¸åŒçš„è¿›ç¨‹é—´çš„é€šä¿¡<h2 id="çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"><a href="#çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„" class="headerlink" title="çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"></a>çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„</h2></li><li>é”æœºåˆ¶ï¼šåŒ…æ‹¬äº’æ–¥é”ï¼Œæ¡ä»¶å˜é‡ï¼Œè¯»å†™é” äº’æ–¥é”æä¾›äº†ä»¥æ’ä»–æ–¹å¼é˜²æ­¢æ•°æ®ç»“æ„è¢«å¹¶å‘ä¿®æ”¹çš„æ–¹æ³• æ¡ä»¶å˜é‡å¯ä»¥ä»¥åŸå­çš„æ–¹å¼é˜»å¡è¿›ç¨‹ï¼Œç›´åˆ°æŸä¸ªç‰¹å®šæ¡ä»¶ä¸ºçœŸä¸ºæ­¢ï¼Œå¯¹æ¡ä»¶çš„æµ‹è¯•æ˜¯åœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œçš„ï¼Œæ¡ä»¶å˜é‡å§‹ç»ˆä¸äº’æ–¥é”ä¸€èµ·ä½¿ç”¨ è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å…±äº«æ•°æ®ï¼Œè€Œå¯¹å†™æ“ä½œæ˜¯äº’æ–¥çš„</li><li>ä¿¡å·é‡æœºåˆ¶ï¼šåŒ…æ‹¬æ— åçº¿ç¨‹ä¿¡å·é‡å’Œå‘½åçº¿ç¨‹ä¿¡å·é‡</li><li>ä¿¡å·æœºåˆ¶ï¼šç±»ä¼¼è¿›ç¨‹é—´çš„ä¿¡å·å¤„ç† <strong>æ³¨æ„ï¼šçº¿ç¨‹é—´çš„é€šä¿¡çš„ç›®çš„ä¸»è¦æ˜¯ç”¨äºçº¿ç¨‹çš„åŒæ­¥ï¼Œæ‰€ä»¥çº¿ç¨‹æ²¡æœ‰åƒè¿›ç¨‹é€šä¿¡ä¸­çš„ç”¨äºæ•°æ®äº¤æ¢çš„é€šä¿¡æœºåˆ¶</strong></li></ul><h2 id="å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥"><a href="#å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥" class="headerlink" title="å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥"></a>å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥</h2><blockquote><p>ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰ã€ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ã€äº‹ä»¶ï¼ˆEventï¼‰çš„åŒºåˆ«</p></blockquote><h3 id="ä¸´ç•ŒåŒºï¼š"><a href="#ä¸´ç•ŒåŒºï¼š" class="headerlink" title="ä¸´ç•ŒåŒºï¼š"></a>ä¸´ç•ŒåŒºï¼š</h3><p>é€šè¿‡å¯¹å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ§åˆ¶æ•°æ®è®¿é—®ã€‚åœ¨ä»»æ„æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®å…¬å…±èµ„æºï¼Œé‚£ä¹ˆåœ¨æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åï¼Œå…¶ä»–è¯•å›¾è®¿é—®å…¬å…±èµ„æºçš„çº¿ç¨‹å°†è¢«æŒ‚èµ·ï¼Œå¹¶ä¸€ç›´ç­‰åˆ°è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ç¦»å¼€ï¼Œä¸´ç•ŒåŒºåœ¨è¢«é‡Šæ”¾åï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥æŠ¢å ã€‚</p><h3 id="äº’æ–¥é‡ï¼š"><a href="#äº’æ–¥é‡ï¼š" class="headerlink" title="äº’æ–¥é‡ï¼š"></a>äº’æ–¥é‡ï¼š</h3><p>é‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ã€‚ åªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ï¼Œå› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥èƒ½ä¿è¯å…¬å…±èµ„æºä¸ä¼šåŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ã€‚äº’æ–¥ä¸ä»…èƒ½å®ç°åŒä¸€åº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº«ï¼Œè¿˜èƒ½å®ç°ä¸åŒåº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº« .äº’æ–¥é‡æ¯”ä¸´ç•ŒåŒºå¤æ‚ã€‚å› ä¸ºä½¿ç”¨äº’æ–¥ä¸ä»…ä»…èƒ½å¤Ÿåœ¨åŒä¸€åº”ç”¨ç¨‹åºä¸åŒçº¿ç¨‹ä¸­å®ç°èµ„æºçš„å®‰å…¨å…±äº«ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸åŒåº”ç”¨ç¨‹åºçš„çº¿ç¨‹ä¹‹é—´å®ç°å¯¹èµ„æºçš„å®‰å…¨å…±äº«ã€‚</p><h3 id="ä¿¡å·é‡ï¼š"><a href="#ä¿¡å·é‡ï¼š" class="headerlink" title="ä¿¡å·é‡ï¼š"></a>ä¿¡å·é‡ï¼š</h3><p>å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›® .ä¿¡å·é‡å¯¹è±¡å¯¹çº¿ç¨‹çš„åŒæ­¥æ–¹å¼ä¸å‰é¢å‡ ç§æ–¹æ³•ä¸åŒï¼Œä¿¡å·å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨å…±äº«èµ„æºï¼Œè¿™ä¸æ“ä½œç³»ç»Ÿä¸­çš„PVæ“ä½œç›¸åŒã€‚å®ƒæŒ‡å‡ºäº†åŒæ—¶è®¿é—®å…±äº«èµ„æºçš„çº¿ç¨‹æœ€å¤§æ•°ç›®ã€‚å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›®ã€‚</p><p>PVæ“ä½œåŠä¿¡å·é‡çš„æ¦‚å¿µéƒ½æ˜¯ç”±è·å…°ç§‘å­¦å®¶E.W.Dijkstraæå‡ºçš„ã€‚ä¿¡å·é‡Sæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒSå¤§äºç­‰äºé›¶æ—¶ä»£è¡¨å¯ä¾›å¹¶å‘è¿›ç¨‹ä½¿ç”¨çš„èµ„æºå®ä½“æ•°ï¼Œä½†Så°äºé›¶æ—¶åˆ™è¡¨ç¤ºæ­£åœ¨ç­‰å¾…ä½¿ç”¨å…±äº«èµ„æºçš„è¿›ç¨‹æ•°ã€‚</p><h6 id="Pæ“ä½œç”³è¯·èµ„æºï¼š"><a href="#Pæ“ä½œç”³è¯·èµ„æºï¼š" class="headerlink" title="Pæ“ä½œç”³è¯·èµ„æºï¼š"></a>Pæ“ä½œç”³è¯·èµ„æºï¼š</h6><ul><li>Så‡1ï¼›</li><li>è‹¥Så‡1åä»å¤§äºç­‰äºé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›</li><li><p>è‹¥Så‡1åå°äºé›¶ï¼Œåˆ™è¯¥è¿›ç¨‹è¢«é˜»å¡åè¿›å…¥ä¸è¯¥ä¿¡å·ç›¸å¯¹åº”çš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åè½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ã€€ã€€</p><h5 id="Væ“ä½œé‡Šæ”¾èµ„æºï¼š"><a href="#Væ“ä½œé‡Šæ”¾èµ„æºï¼š" class="headerlink" title="Væ“ä½œé‡Šæ”¾èµ„æºï¼š"></a>Væ“ä½œé‡Šæ”¾èµ„æºï¼š</h5></li><li><p>SåŠ 1ï¼›</p></li><li>è‹¥ç›¸åŠ ç»“æœå¤§äºé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›</li><li>è‹¥ç›¸åŠ ç»“æœå°äºç­‰äºé›¶ï¼Œåˆ™ä»è¯¥ä¿¡å·çš„ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªç­‰å¾…è¿›ç¨‹ï¼Œç„¶åå†è¿”å›åŸè¿›ç¨‹ç»§ç»­æ‰§è¡Œæˆ–è½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ã€€ã€€<h3 id="äº‹ä»¶ï¼š"><a href="#äº‹ä»¶ï¼š" class="headerlink" title="äº‹ä»¶ï¼š"></a>äº‹ä»¶ï¼š</h3>é€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿å®ç°å¯¹å¤šä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒçš„æ“ä½œ .</li></ul><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul><li>äº’æ–¥é‡ä¸ä¸´ç•ŒåŒºçš„ä½œç”¨éå¸¸ç›¸ä¼¼ï¼Œä½†äº’æ–¥é‡æ˜¯å¯ä»¥å‘½åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è·¨è¶Šè¿›ç¨‹ä½¿ç”¨ã€‚æ‰€ä»¥åˆ›å»ºäº’æ–¥é‡éœ€è¦çš„èµ„æºæ›´å¤šï¼Œæ‰€ä»¥å¦‚æœåªä¸ºäº†åœ¨è¿›ç¨‹å†…éƒ¨æ˜¯ç”¨çš„è¯ä½¿ç”¨ä¸´ç•ŒåŒºä¼šå¸¦æ¥é€Ÿåº¦ä¸Šçš„ä¼˜åŠ¿å¹¶èƒ½å¤Ÿå‡å°‘èµ„æºå ç”¨é‡ã€‚å› ä¸ºäº’æ–¥é‡æ˜¯è·¨è¿›ç¨‹çš„äº’æ–¥é‡ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±å¯ä»¥é€šè¿‡åå­—æ‰“å¼€å®ƒã€‚</li><li>äº’æ–¥é‡ï¼ˆMutexï¼‰ï¼Œä¿¡å·ç¯ï¼ˆSemaphoreï¼‰ï¼Œäº‹ä»¶ï¼ˆEventï¼‰éƒ½å¯ä»¥è¢«è·¨è¶Šè¿›ç¨‹ä½¿ç”¨æ¥è¿›è¡ŒåŒæ­¥æ•°æ®æ“ä½œï¼Œè€Œå…¶ä»–çš„å¯¹è±¡ä¸æ•°æ®åŒæ­¥æ“ä½œæ— å…³ï¼Œä½†å¯¹äºè¿›ç¨‹å’Œçº¿ç¨‹æ¥è®²ï¼Œå¦‚æœè¿›ç¨‹å’Œçº¿ç¨‹åœ¨è¿è¡ŒçŠ¶æ€åˆ™ä¸ºæ— ä¿¡å·çŠ¶æ€ï¼Œåœ¨é€€å‡ºåä¸ºæœ‰ä¿¡å·çŠ¶æ€ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨WaitForSingleObjectæ¥ç­‰å¾…è¿›ç¨‹å’Œçº¿ç¨‹é€€å‡ºã€‚</li><li>é€šè¿‡äº’æ–¥é‡å¯ä»¥æŒ‡å®šèµ„æºè¢«ç‹¬å çš„æ–¹å¼ä½¿ç”¨ï¼Œä½†å¦‚æœæœ‰ä¸‹é¢ä¸€ç§æƒ…å†µé€šè¿‡äº’æ–¥é‡å°±æ— æ³•å¤„ç†ï¼Œæ¯”å¦‚ç°åœ¨ä¸€ä½ç”¨æˆ·è´­ä¹°äº†ä¸€ä»½ä¸‰ä¸ªå¹¶å‘è®¿é—®è®¸å¯çš„æ•°æ®åº“ç³»ç»Ÿï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è´­ä¹°çš„è®¿é—®è®¸å¯æ•°é‡æ¥å†³å®šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹/è¿›ç¨‹èƒ½åŒæ—¶è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œè¿™æ—¶å€™å¦‚æœåˆ©ç”¨äº’æ–¥é‡å°±æ²¡æœ‰åŠæ³•å®Œæˆè¿™ä¸ªè¦æ±‚ï¼Œä¿¡å·ç¯å¯¹è±¡å¯ä»¥è¯´æ˜¯ä¸€ç§èµ„æºè®¡æ•°å™¨ã€‚ã€€ã€€</li></ul><h2 id="æ­»é”çš„å®šä¹‰"><a href="#æ­»é”çš„å®šä¹‰" class="headerlink" title="æ­»é”çš„å®šä¹‰"></a>æ­»é”çš„å®šä¹‰</h2><p>å¦‚æœä¸€ç»„è¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä»…ç”±è¯¥ç»„è¿›ç¨‹ä¸­çš„å…¶å®ƒè¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥ç»„è¿›ç¨‹æ˜¯æ­»é”çš„</p><h2 id="è¿›ç¨‹æ­»é”çš„åŸå› "><a href="#è¿›ç¨‹æ­»é”çš„åŸå› " class="headerlink" title="è¿›ç¨‹æ­»é”çš„åŸå› "></a>è¿›ç¨‹æ­»é”çš„åŸå› </h2><p>å¤šä¸ªè¿›ç¨‹å¯¹èµ„æºçš„äº‰å¤ºï¼ŒåŒ…æ‹¬å¯¹ä¸å¯æŠ¢å èµ„æºå’Œå¯¹å¯æ¶ˆè€—èµ„æº</p><h2 id="è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶"><a href="#è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶"></a>è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶</h2><ul><li>äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡Œæ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå…¶èµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰è¯¥èµ„æºçš„è¿›ç¨‹ç”¨å®Œé‡Šæ”¾</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²ç»è¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†å¯¹è‡ªå·±å·²ç»è·å¾—çš„èµ„æºä¿æŒä¸æ”¾</li><li>ä¸å¯æŠ¢å æ¡ä»¶ï¼šè¿›ç¨‹å·²ç»è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«æŠ¢å ï¼Œåªèƒ½åœ¨è¿›ç¨‹ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹-èµ„æºå¾ªç¯é“¾ï¼Œå³è¿›ç¨‹é›†åˆï½›P0,P1,â€¦â€¦,PNï½ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼ŒP1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPN æ­£åœ¨ç­‰å¾…P0å ç”¨çš„èµ„æº<h2 id="è¿›ç¨‹æ­»é”çš„å¤„ç†"><a href="#è¿›ç¨‹æ­»é”çš„å¤„ç†" class="headerlink" title="è¿›ç¨‹æ­»é”çš„å¤„ç†"></a>è¿›ç¨‹æ­»é”çš„å¤„ç†</h2></li><li>é¢„é˜²æ­»é”ï¼šé€šè¿‡è®¾ç½®æŸäº›é™åˆ¶æ¡ä»¶ï¼Œå»ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ç§</li><li>é¿å…æ­»é”ï¼šåœ¨èµ„æºçš„åŠ¨æ€åˆ†é…è¿‡ç¨‹ä¸­ï¼Œç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€</li><li>æ£€æµ‹æ­»é”ï¼šé€šè¿‡æ£€æµ‹æœºæ„åŠæ—¶æ£€æµ‹å‡ºæ­»é”çš„å‘ç”Ÿï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½ï¼ŒæŠŠè¿›ç¨‹ä»æ­»é”ä¸­è§£è„±å‡ºæ¥</li><li>è§£é™¤æ­»é”ï¼šå½“æ£€æµ‹åˆ°ç³»ç»Ÿä¸­å·²ç»å‘ç”Ÿæ­»é”æ—¶ï¼Œé‡‡å–ç›¸åº”çš„æªæ–½ï¼Œå°†è¿›ç¨‹ä»æ­»é”çŠ¶æ€è§£è„±å‡ºæ¥ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯æ’¤é”€ä¸€äº›è¿›ç¨‹ï¼Œå›æ”¶ä»–ä»¬çš„èµ„æºï¼Œå°†å®ƒä»¬åˆ†é…ç»™å·²ç»å¤„äºé˜»å¡çŠ¶æ€çš„è¿›ç¨‹ï¼Œä½¿å…¶èƒ½å¤Ÿç»§ç»­è¿è¡Œ<h2 id="æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾"><a href="#æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾" class="headerlink" title="æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾"></a>æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾</h2>å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯æŒ‡æ“ä½œç³»ç»Ÿå·¥ä½œæ—¶ï¼Œå…¶å„ç§èµ„æºå¯ä»¥æ ¹æ®éœ€è¦éšæ—¶è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œç”±äºå„ç§èµ„æºå¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œå› æ­¤ï¼Œå…¶å¤„ç†äº‹åŠ¡çš„èƒ½åŠ›è¾ƒå¼º æ¢è¨€ä¹‹ï¼Œåœ¨ç‰¹å®šæ—¶é—´å†…å®Œæˆç‰¹å®šçš„ä»»åŠ¡ï¼Œå…·æœ‰å®æ—¶æ€§ä¸å¯é æ€§</li></ul><h2 id="æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹"><a href="#æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹" class="headerlink" title="æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹"></a>æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹</h2><ul><li>è½®è¯¢ï¼šå¯¹I/Oè®¾å¤‡çš„ç¨‹åºè½®è¯¢çš„æ–¹å¼æ˜¯æ—©æœŸçš„è®¡ç®—æœºç³»ç»Ÿå¯¹I/Oè®¾å¤‡çš„ä¸€ç§ç®¡ç†æ–¹å¼ï¼Œå®ƒå®šæ—¶å¯¹å„ç§è®¾å¤‡è½®æµè¯¢é—®ä¸€éæœ‰æ— å¤„ç†è¦æ±‚ã€‚è½®è¯¢å æ®äº†CPUç›¸å½“ä¸€éƒ¨åˆ†å¤„ç†æ—¶é—´ï¼Œå› æ­¤ï¼Œç¨‹åºè½®è¯¢æ˜¯ä¸€ç§æ•ˆç‡è¾ƒä½çš„æ–¹å¼ï¼Œåœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­å·²ç»å¾ˆå°‘åº”ç”¨</li><li><p>ä¸­æ–­ï¼šä¸­æ–­æ˜¯æŒ‡CPUåœ¨æ­£å¸¸è¿è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œç”±äºå‘ç”Ÿçš„å†…éƒ¨æˆ–å¤–éƒ¨çš„ç‰¹å®šçš„äº‹ä»¶ï¼Œä½¿å¾—CPUä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œè€Œè½¬åˆ°å“åº”çš„æœåŠ¡ç¨‹åºå»å¤„ç†</p><h2 id="ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª"><a href="#ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª"></a>ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª</h2><p>æ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µç¨‹åºç§°ä¸ºä¸´ç•ŒåŒºï¼Œæ¯æ¬¡åªå‡†è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿›å…¥åä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥ è§£å†³å†²çªçš„æ–¹æ³•ï¼š</p></li><li><p>å¦‚æœæœ‰è‹¥å¹²ä¸ªè¿›ç¨‹è¦æ±‚è¿›å…¥ç©ºé—²çš„ä¸´ç•ŒåŒºï¼Œä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥</p></li><li>ä»»ä½•æ—¶å€™ï¼Œå¤„äºä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹ä¸å¯ä»¥å¤šäºä¸€ä¸ªï¼Œå¦‚æœå·²ç»æœ‰è¿›ç¨‹è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™å…¶ä»–æ‰€æœ‰è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…</li><li>è¿›å…¥ä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹è¦åœ¨æœ‰é™æ—¶é—´å†…é€€å‡ºï¼Œä»¥ä¾¿å…¶å®ƒè¿›ç¨‹èƒ½åŠæ—¶è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒº</li><li>å¦‚æœè¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™åº”è¯¥è®©å‡ºCPUï¼Œé¿å…è¿›ç¨‹å‡ºç°â€œå¿™ç¢Œâ€ç°è±¡ã€‚<h2 id="windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„"><a href="#windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„" class="headerlink" title="windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„"></a>windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„</h2>windowsæ“çºµå†…å­˜å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå±‚é¢ï¼Œç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ã€‚</li></ul><h3 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­"><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­" class="headerlink" title="è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)"></a>è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)</h3><ul><li>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼‰ï¼šç»™æ¯ä¸ªè¿›ç¨‹å›ºå®šçš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè®©è¿›ç¨‹åœ¨å•ä½æ—¶é—´ç‰‡å†…æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåä¾¿è°ƒåº¦ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ä¸è€ƒè™‘è¿›ç¨‹ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œå±äºæŠ¢å å¼è°ƒåº¦ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼›ç¼ºç‚¹æ˜¯å¹³å‡ç­‰å¾…æ—¶é—´è¾ƒé•¿ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢è¾ƒè´¹æ—¶ã€‚é€‚ç”¨äºåˆ†æ—¶ç³»ç»Ÿã€‚</li><li>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼ˆFCFSï¼‰ï¼šæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºæ‰§è¡Œè¿›ç¨‹ï¼Œä¸è€ƒè™‘ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œä¼šäº§ç”Ÿé¥¥é¥¿ç°è±¡ã€‚å±äºéæŠ¢å å¼è°ƒåº¦ï¼Œä¼˜ç‚¹æ˜¯å…¬å¹³ï¼Œå®ç°ç®€å•ï¼›ç¼ºç‚¹æ˜¯ä¸åˆ©äºçŸ­ä½œä¸šã€‚</li><li>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆHPFï¼‰ï¼šåœ¨è¿›ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„æ¥æ‰§è¡Œã€‚</li><li>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼šå°†æ—¶é—´ç‰‡è½®è½¬ä¸ä¼˜å…ˆçº§è°ƒåº¦ç›¸ç»“åˆï¼ŒæŠŠè¿›ç¨‹æŒ‰ä¼˜å…ˆçº§åˆ†æˆä¸åŒçš„é˜Ÿåˆ—ï¼Œå…ˆæŒ‰ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä¼˜å…ˆçº§ç›¸åŒçš„ï¼ŒæŒ‰æ—¶é—´ç‰‡è½®è½¬ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œæœ‰è¾ƒå¥½çš„å“åº”æ—¶é—´ï¼Œå¯è¡Œæ€§å¼ºï¼Œé€‚ç”¨äºå„ç§ä½œä¸šç¯å¢ƒã€‚</li><li>é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼šæ ¹æ®â€œå“åº”æ¯”=ï¼ˆè¿›ç¨‹æ‰§è¡Œæ—¶é—´+è¿›ç¨‹ç­‰å¾…æ—¶é—´ï¼‰/ è¿›ç¨‹æ‰§è¡Œæ—¶é—´â€è¿™ä¸ªå…¬å¼å¾—åˆ°çš„å“åº”æ¯”æ¥è¿›è¡Œè°ƒåº¦ã€‚é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•åœ¨ç­‰å¾…æ—¶é—´ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä½œä¸šæ‰§è¡Œçš„æ—¶é—´è¶ŠçŸ­ï¼Œå“åº”æ¯”è¶Šé«˜ï¼Œæ»¡è¶³æ®µä»»åŠ¡ä¼˜å…ˆï¼ŒåŒæ—¶å“åº”æ¯”ä¼šéšç€ç­‰å¾…æ—¶é—´å¢åŠ è€Œå˜å¤§ï¼Œä¼˜å…ˆçº§ä¼šæé«˜ï¼Œèƒ½å¤Ÿé¿å…é¥¥é¥¿ç°è±¡ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œç¼ºç‚¹æ˜¯è®¡ç®—å“åº”æ¯”å¼€é”€å¤§ï¼Œé€‚ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿã€‚</li></ul><h3 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­-1"><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­-1" class="headerlink" title="è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)"></a>è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)</h3><ul><li><strong>é•¿ç¨‹è°ƒåº¦ï¼ŒæŠŠä½œä¸šåèƒŒé˜Ÿåˆ—è°ƒå…¥å†…å­˜</strong>ï¼Œåˆç§°ä¸ºä½œä¸šè°ƒåº¦æˆ–é«˜çº§è°ƒåº¦ï¼Œè¿™ç§è°ƒåº¦å°†å·²è¿›å…¥ç³»ç»Ÿå¹¶å¤„äºåå¤‡çŠ¶æ€çš„ä½œä¸šæŒ‰æŸç§ç®—æ³•é€‰æ‹©ä¸€ä¸ªæˆ–ä¸€æ‰¹ï¼Œä¸ºå…¶å»ºç«‹è¿›ç¨‹ï¼Œå¹¶è¿›å…¥ä¸»æœºï¼Œå½“è¯¥ä½œä¸šæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¿˜è´Ÿè´£å›æ”¶ç³»ç»Ÿèµ„æºï¼Œåœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œéœ€è¦æœ‰ä½œä¸šè°ƒåº¦çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å°†å®ƒä»¬åˆ†æ‰¹åœ°è£…å…¥å†…å­˜ï¼Œåœ¨åˆ†æ—¶ç³»ç»Ÿå’Œå®æ—¶ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸éœ€è¦é•¿æœŸè°ƒåº¦ã€‚å®ƒçš„é¢‘ç‡æ¯”è¾ƒä½ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶å†…å­˜ä¸­è¿›ç¨‹çš„æ•°é‡ã€‚</li><li><strong>ä¸­ç¨‹è°ƒåº¦ï¼Œå†…å¤–å­˜é˜»å¡è¿›ç¨‹æ¥å›åˆ‡æ¢</strong>ï¼Œåˆç§°ä¸ºäº¤æ¢è°ƒåº¦ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯èƒ½å°†è¿›ç¨‹ä»å†…å­˜æˆ–ä»CPUç«äº‰ä¸­ç§»å‡ºï¼Œä»è€Œé™ä½å¤šé“ç¨‹åºè®¾è®¡çš„ç¨‹åº¦ï¼Œä¹‹åè¿›ç¨‹èƒ½è¢«é‡æ–°è°ƒå…¥å†…å­˜ï¼Œå¹¶ä»ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œï¼Œè¿™ç§äº¤æ¢çš„***ä½œå¯ä»¥è°ƒæ•´è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„å­˜åœ¨æ•°é‡å’Œæ—¶æœºã€‚å…¶ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§ç»™å®šçš„åŸåˆ™å’Œç­–ç•¥ï¼Œå°†å¤„äºå¤–å­˜äº¤æ¢åŒºä¸­çš„å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹è°ƒå…¥å†…å­˜ï¼Œæˆ–æŠŠå¤„äºå†…å­˜å°±ç»ªçŠ¶æ€æˆ–å†…å­˜ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹äº¤æ¢åˆ°å¤–å­˜äº¤æ¢åŒºã€‚</li><li><strong>çŸ­ç¨‹è°ƒåº¦ï¼ŒæŠŠè¿›ç¨‹åˆ†é…ç»™CPUæ‰§è¡Œ</strong>ã€‚åˆç§°ä¸ºè¿›ç¨‹è°ƒåº¦ã€ä½çº§è°ƒåº¦æˆ–å¾®è§‚è°ƒåº¦ã€‚è¿™ä¹Ÿæ˜¯é€šå¸¸æ‰€è¯´çš„è°ƒåº¦ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯çŸ­æœŸè°ƒåº¦ã€‚å®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§æŸç§ç­–ç•¥å’Œç®—æ³•å°†å¤„ç†æœºåˆ†é…ç»™ä¸€ä¸ªå¤„äºå°±ç»ªçŠ¶æ€çš„è¿›ç¨‹ï¼Œåˆ†ä¸ºæŠ¢å å¼å’ŒéæŠ¢å å¼ã€‚ å¯ä»¥ä»ä¸‹å›¾ä¸­æ¸…æ™°çš„çœ‹åˆ°è¿™äº›è°ƒåº¦ä¹‹é—´çš„åŒºåˆ«ã€‚</li></ul><h3 id="ç£ç›˜å¯»é“ç®—æ³•"><a href="#ç£ç›˜å¯»é“ç®—æ³•" class="headerlink" title="ç£ç›˜å¯»é“ç®—æ³•"></a>ç£ç›˜å¯»é“ç®—æ³•</h3><ul><li>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•ï¼ˆFCFSï¼‰First Come First Service</li></ul><p>è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ç£ç›˜è°ƒåº¦ç®—æ³•ã€‚å®ƒæ ¹æ®è¿›ç¨‹è¯·æ±‚è®¿é—®ç£ç›˜çš„å…ˆåæ¬¡åºè¿›è¡Œè°ƒåº¦ã€‚æ­¤ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å…¬å¹³ã€ç®€å•ï¼Œä¸”æ¯ä¸ªè¿›ç¨‹çš„è¯·æ±‚éƒ½èƒ½ä¾æ¬¡å¾—åˆ°å¤„ç†ï¼Œä¸ä¼šå‡ºç°æŸä¸€è¿›ç¨‹çš„è¯·æ±‚é•¿æœŸå¾—ä¸åˆ°æ»¡è¶³çš„æƒ…å†µã€‚æ­¤ç®—æ³•ç”±äºæœªå¯¹å¯»é“è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨å¯¹ç£ç›˜çš„è®¿é—®è¯·æ±‚æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ­¤ç®—æ³•å°†é™ä½è®¾å¤‡æœåŠ¡çš„ååé‡ï¼Œè‡´ä½¿å¹³å‡å¯»é“æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œä½†å„è¿›ç¨‹å¾—åˆ°æœåŠ¡çš„å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦è¾ƒå°ã€‚<strong>åœ¨å•ç”¨æˆ·ç³»ç»Ÿç¯å¢ƒä¸­ï¼ŒI/Oé˜Ÿåˆ—çš„é•¿åº¦é€šå¸¸ä¸º1ï¼Œå› æ­¤ï¼Œå…ˆæ¥å…ˆæœåŠ¡FCFSç®—æ³•æ˜¯æœ€ç»æµå®æƒ çš„ç£ç›˜è°ƒåº¦ç®—æ³•</strong>.</p><p>å…ˆæ¥å…ˆæœåŠ¡ ï¼ˆ125ï¼‰86.147.91.177.94.150.102.175.130</p><ul><li>æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSSTFï¼‰ Shortest Seek Time First</li></ul><p>è¯¥ç®—æ³•é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹ï¼Œå…¶è¦æ±‚è®¿é—®çš„ç£é“ä¸å½“å‰ç£å¤´æ‰€åœ¨çš„ç£é“è·ç¦»æœ€è¿‘ï¼Œä»¥ä½¿æ¯æ¬¡çš„å¯»é“æ—¶é—´æœ€çŸ­ï¼Œè¯¥ç®—æ³•å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¥½çš„ååé‡ï¼Œä½†å´ä¸èƒ½ä¿è¯å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚å…¶ç¼ºç‚¹æ˜¯å¯¹ç”¨æˆ·çš„æœåŠ¡è¯·æ±‚çš„å“åº”æœºä¼šä¸æ˜¯å‡ç­‰çš„ï¼Œå› è€Œå¯¼è‡´å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦å¾ˆå¤§ã€‚åœ¨æœåŠ¡è¯·æ±‚å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå¯¹å†…å¤–è¾¹ç¼˜ç£é“çš„è¯·æ±‚å°†ä¼šæ— é™æœŸçš„è¢«å»¶è¿Ÿï¼Œæœ‰äº›è¯·æ±‚çš„å“åº”æ—¶é—´å°†ä¸å¯é¢„æœŸã€‚æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆï¼ˆ125ï¼‰130.147.150.175.177.102.94.91.86</p><ul><li>æ‰«æç®—æ³•ï¼ˆSCANï¼‰ç”µæ¢¯è°ƒåº¦</li></ul><p>æ‰«æç®—æ³•ä¸ä»…è€ƒè™‘åˆ°æ¬²è®¿é—®çš„ç£é“ä¸å½“å‰ç£é“çš„è·ç¦»ï¼Œæ›´ä¼˜å…ˆè€ƒè™‘çš„æ˜¯ç£å¤´çš„å½“å‰ç§»åŠ¨æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œå½“ç£å¤´æ­£åœ¨è‡ªé‡Œå‘å¤–ç§»åŠ¨æ—¶ï¼Œæ‰«æç®—æ³•æ‰€é€‰æ‹©çš„ä¸‹ä¸€ä¸ªè®¿é—®å¯¹è±¡åº”æ˜¯å…¶æ¬²è®¿é—®çš„ç£é“æ—¢åœ¨å½“å‰ç£é“ä¹‹å¤–ï¼Œåˆæ˜¯è·ç¦»æœ€è¿‘çš„ã€‚è¿™æ ·è‡ªé‡Œå‘å¤–åœ°è®¿é—®ï¼Œç›´åˆ°å†æ— æ›´å¤–çš„ç£é“éœ€è¦è®¿é—®æ‰å°†ç£è‡‚æ¢å‘ï¼Œè‡ªå¤–å‘é‡Œç§»åŠ¨ã€‚è¿™æ—¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ¯æ¬¡é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹æ¥è°ƒåº¦ï¼Œå³å…¶è¦è®¿é—®çš„ç£é“ï¼Œåœ¨å½“å‰ç£é“ä¹‹å†…ï¼Œä»è€Œé¿å…äº†é¥¥é¥¿ç°è±¡çš„å‡ºç°ã€‚ç”±äºè¿™ç§ç®—æ³•ä¸­ç£å¤´ç§»åŠ¨çš„è§„å¾‹é¢‡ä¼¼ç”µæ¢¯çš„è¿è¡Œï¼Œæ•…åˆç§°ä¸ºç”µæ¢¯è°ƒåº¦ç®—æ³•ã€‚æ­¤ç®—æ³•åŸºæœ¬ä¸Šå…‹æœäº†æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„æœåŠ¡é›†ä¸­äºä¸­é—´ç£é“å’Œå“åº”æ—¶é—´å˜åŒ–æ¯”è¾ƒå¤§çš„ç¼ºç‚¹ï¼Œè€Œå…·æœ‰æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„ä¼˜ç‚¹å³ååé‡è¾ƒå¤§ï¼Œå¹³å‡å“åº”æ—¶é—´è¾ƒå°ï¼Œä½†ç”±äºæ˜¯æ‘†åŠ¨å¼çš„æ‰«ææ–¹æ³•ï¼Œä¸¤ä¾§ç£é“è¢«è®¿é—®çš„é¢‘ç‡ä»ä½äºä¸­é—´ç£é“ã€‚ç”µæ¢¯è°ƒåº¦ï¼ˆ125ï¼‰102.94.91.86.130.147.150.175.177</p><ul><li>å¾ªç¯æ‰«æç®—æ³•ï¼ˆCSCANï¼‰</li></ul><p>å¾ªç¯æ‰«æç®—æ³•æ˜¯å¯¹æ‰«æç®—æ³•çš„æ”¹è¿›ã€‚å¦‚æœå¯¹ç£é“çš„è®¿é—®è¯·æ±‚æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œå½“ç£å¤´åˆ°è¾¾ç£ç›˜çš„ä¸€ç«¯ï¼Œå¹¶åå‘è¿åŠ¨æ—¶è½åœ¨ç£å¤´ä¹‹åçš„è®¿é—®è¯·æ±‚ç›¸å¯¹è¾ƒå°‘ã€‚è¿™æ˜¯ç”±äºè¿™äº›ç£é“åˆšè¢«å¤„ç†ï¼Œè€Œç£ç›˜å¦ä¸€ç«¯çš„è¯·æ±‚å¯†åº¦ç›¸å½“é«˜ï¼Œä¸”è¿™äº›è®¿é—®è¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ï¼Œä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œå¾ªç¯æ‰«æç®—æ³•è§„å®šç£å¤´å•å‘ç§»åŠ¨ã€‚ä¾‹å¦‚ï¼Œåªè‡ªé‡Œå‘å¤–ç§»åŠ¨ï¼Œå½“ç£å¤´ç§»åˆ°æœ€å¤–çš„è¢«è®¿é—®ç£é“æ—¶ï¼Œç£å¤´ç«‹å³è¿”å›åˆ°æœ€é‡Œçš„æ¬²è®¿ç£é“ï¼Œå³å°†æœ€å°ç£é“å·ç´§æ¥ç€æœ€å¤§ç£é“å·æ„æˆå¾ªç¯ï¼Œè¿›è¡Œæ‰«æã€‚å¾ªç¯æ‰«æ ï¼ˆ125ï¼‰130.147.150.175.177.86.91.94.102</p><h3 id="å­¸é•·ç­†è¨˜é€£çµ"><a href="#å­¸é•·ç­†è¨˜é€£çµ" class="headerlink" title="å­¸é•·ç­†è¨˜é€£çµ"></a>å­¸é•·ç­†è¨˜é€£çµ</h3><ul><li><p><a href="https://kim85326.github.io/2018/01/09/CH6-%E8%A1%8C%E7%A8%8B%E6%8E%92%E7%8F%AD-(Process-Scheduling)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH6-%E8%A1%8C%E7%A8%8B%E6%8E%92%E7%8F%AD-(Process-Scheduling)/</a><br>ä¿¡è™Ÿ</p></li><li><p><a href="https://kim85326.github.io/2018/01/10/CH10-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-(File-System)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/10/CH10-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-(File-System)/</a></p></li><li><p>æª”æ¡ˆç³»çµ±<br><a href="https://kim85326.github.io/2018/01/09/CH8-%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Memory-Management-Strategies)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH8-%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Memory-Management-Strategies)/</a><br>è¨˜æ†¶é«”ç®¡ç†</p></li><li><p><a href="https://kim85326.github.io/2018/01/09/CH9-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Virtual-Memory-Management)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH9-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Virtual-Memory-Management)/</a><br>è™›æ“¬è¨˜æ†¶è£¡ lru</p></li></ul>]]></content>
    
    <summary type="html">
    
      EveryThing About Operation System
    
    </summary>
    
    
      <category term="Operation System" scheme="http://yoursite.com/tags/Operation-System/"/>
    
  </entry>
  
  <entry>
    <title>SDN_OpenFlow</title>
    <link href="http://yoursite.com/2019/11/06/SDN-OpenFlow/"/>
    <id>http://yoursite.com/2019/11/06/SDN-OpenFlow/</id>
    <published>2019-11-06T06:00:03.000Z</published>
    <updated>2020-02-17T10:24:20.482Z</updated>
    
    <content type="html"><![CDATA[<h1 id="107-SDN"><a href="#107-SDN" class="headerlink" title="107 SDN"></a>107 SDN</h1><h2 id="a10715005-ä»»å‰"><a href="#a10715005-ä»»å‰" class="headerlink" title="a10715005 ä»»å‰"></a>a10715005 ä»»å‰</h2><h3 id="Boot-onosproject"><a href="#Boot-onosproject" class="headerlink" title="Boot onosproject"></a>Boot onosproject</h3><p><img src="https://imgur.com/GBqQTM5.png" alt></p><h3 id="Configuration-Json-file-and-Create-Topo-using-command-line"><a href="#Configuration-Json-file-and-Create-Topo-using-command-line" class="headerlink" title="Configuration Json file and Create Topo using command line"></a>Configuration Json file and Create Topo using command line</h3><p><img src="https://imgur.com/ZBZABkv.png" alt></p><h1 id="å·²ç¶“è§£æ±º"><a href="#å·²ç¶“è§£æ±º" class="headerlink" title="å·²ç¶“è§£æ±º"></a>å·²ç¶“è§£æ±º</h1><h2 id="ONOS-GUIä¸­çš„topology"><a href="#ONOS-GUIä¸­çš„topology" class="headerlink" title="ONOS GUIä¸­çš„topology"></a>ONOS GUIä¸­çš„topology</h2><p><img src="https://imgur.com/meGhS42.png" alt></p><h2 id="Ping-æˆåŠŸçš„ç•«é¢"><a href="#Ping-æˆåŠŸçš„ç•«é¢" class="headerlink" title="Ping æˆåŠŸçš„ç•«é¢"></a>Ping æˆåŠŸçš„ç•«é¢</h2><p><img src="https://imgur.com/gvkVOIL.png" alt></p><h2 id="Switch-s3çš„forwarding-table"><a href="#Switch-s3çš„forwarding-table" class="headerlink" title="Switch s3çš„forwarding table"></a>Switch s3çš„forwarding table</h2><p><img src="https://imgur.com/VpZQL2l.png" alt></p><h1 id="é‚„æ²’æœ‰è§£æ±º"><a href="#é‚„æ²’æœ‰è§£æ±º" class="headerlink" title="é‚„æ²’æœ‰è§£æ±º"></a>é‚„æ²’æœ‰è§£æ±º</h1><p><del>h1 ping h2</del><br><del>ç”¢ç”Ÿæœ‰å…©æ¢è·¯å¾‘çš„topology</del></p><ul><li>è®“ping packetèµ°è¼ƒé•·çš„è·¯å¾‘</li></ul><p>åŸæ¥æ˜¯<br><img src="https://imgur.com/fX9oXev.png" alt></p><p>ç°åœ¨æƒ³è®©ä»–å˜æˆ<br><img src="https://imgur.com/LJETsWO.png" alt></p><h2 id="Pre-requisites"><a href="#Pre-requisites" class="headerlink" title="Pre-requisites:"></a>Pre-requisites:</h2><p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener"><code>VirtualBox</code></a></p><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration:"></a>Configuration:</h3><p><a href="https://jingyan.baidu.com/article/e2284b2b61a2efe2e6118d39.html" target="_blank" rel="noopener">JDK Configuration in Ubuntu</a></p><p><a href="https://blog.csdn.net/u010558281/article/details/78419321" target="_blank" rel="noopener">Install ONOS on Ubuntu</a></p><h3 id="Using-Linux-command"><a href="#Using-Linux-command" class="headerlink" title="Using Linux command:"></a>Using Linux command:</h3><p>modification file in Linux <code>gedit</code></p><h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h4><ul><li><p><a href="https://wiki.onosproject.org/display/ONOS/Basic+ONOS+Tutorial" target="_blank" rel="noopener"><code>Basic ONOS Tutorial</code></a></p></li><li><p><a href="https://www.youtube.com/watch?v=l25Ukkmk6Sk" target="_blank" rel="noopener"><code>OpenFlow</code></a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;107-SDN&quot;&gt;&lt;a href=&quot;#107-SDN&quot; class=&quot;headerlink&quot; title=&quot;107 SDN&quot;&gt;&lt;/a&gt;107 SDN&lt;/h1&gt;&lt;h2 id=&quot;a10715005-ä»»å‰&quot;&gt;&lt;a href=&quot;#a10715005-ä»»å‰&quot; class=&quot;
      
    
    </summary>
    
    
      <category term="ONOS OpenFlow SDN" scheme="http://yoursite.com/tags/ONOS-OpenFlow-SDN/"/>
    
  </entry>
  
</feed>
