<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>BFS AND DFS</title>
      <link href="/2020/06/05/BFS-AND-DFS/"/>
      <url>/2020/06/05/BFS-AND-DFS/</url>
      
        <content type="html"><![CDATA[<h1 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h1><h2 id="å›¾çš„BFS"><a href="#å›¾çš„BFS" class="headerlink" title="å›¾çš„BFS"></a>å›¾çš„BFS</h2><h4 id="1162-åœ°å›¾åˆ†æ"><a href="#1162-åœ°å›¾åˆ†æ" class="headerlink" title="1162. åœ°å›¾åˆ†æ"></a><a href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/" target="_blank" rel="noopener">1162. åœ°å›¾åˆ†æ</a></h4><p>å¯¹äºå›¾çš„BFSä¹Ÿæ˜¯ä¸€æ ·æ»´ï½ ä¸Treeçš„BFSåŒºåˆ«å¦‚ä¸‹ï¼š<br>1ã€treeåªæœ‰1ä¸ªrootï¼Œè€Œå›¾å¯ä»¥æœ‰å¤šä¸ªæºç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æŠŠå¤šä¸ªæºç‚¹éƒ½å…¥é˜Ÿã€‚<br>2ã€treeæ˜¯æœ‰å‘çš„å› æ­¤ä¸éœ€è¦æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼Œè€Œå¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå¿…é¡»å¾—æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼<br>å¹¶ä¸”ä¸ºäº†é˜²æ­¢æŸä¸ªèŠ‚ç‚¹å¤šæ¬¡å…¥é˜Ÿï¼Œéœ€è¦åœ¨å…¥é˜Ÿä¹‹å‰å°±å°†å…¶è®¾ç½®æˆå·²è®¿é—®ï¼</p><p>ä½œè€…ï¼šsweetiee<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/</a></p><p><img src="https://pic.leetcode-cn.com/367df5172fd16d2637e591f6586d146772758438c66660c86719ffb2d36eb14d-image.png" alt="BFS"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxDistance</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dx = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] dy = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> m = grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="comment">// å…ˆæŠŠæ‰€æœ‰çš„é™†åœ°éƒ½å…¥é˜Ÿã€‚</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;i, j&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»å„ä¸ªé™†åœ°å¼€å§‹ï¼Œä¸€åœˆä¸€åœˆçš„éå†æµ·æ´‹ï¼Œæœ€åéå†åˆ°çš„æµ·æ´‹å°±æ˜¯ç¦»é™†åœ°æœ€è¿œçš„æµ·æ´‹ã€‚</span></span><br><span class="line">        <span class="keyword">boolean</span> hasOcean = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span>[] point = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            point = queue.poll();</span><br><span class="line">            <span class="keyword">int</span> x = point[<span class="number">0</span>], y = point[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// å–å‡ºé˜Ÿåˆ—çš„å…ƒç´ ï¼Œå°†å…¶å››å‘¨çš„æµ·æ´‹å…¥é˜Ÿã€‚</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> newX = x + dx[i];</span><br><span class="line">                <span class="keyword">int</span> newY = y + dy[i];</span><br><span class="line">                <span class="keyword">if</span> (newX &lt; <span class="number">0</span> || newX &gt;= m || newY &lt; <span class="number">0</span> || newY &gt;= n || grid[newX][newY] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                grid[newX][newY] = grid[x][y] + <span class="number">1</span>; <span class="comment">// è¿™é‡Œæˆ‘ç›´æ¥ä¿®æ”¹äº†åŸæ•°ç»„ï¼Œå› æ­¤å°±ä¸éœ€è¦é¢å¤–çš„æ•°ç»„æ¥æ ‡å¿—æ˜¯å¦è®¿é—®</span></span><br><span class="line">                hasOcean = <span class="keyword">true</span>;</span><br><span class="line">                queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;newX, newY&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ²¡æœ‰é™†åœ°æˆ–è€…æ²¡æœ‰æµ·æ´‹ï¼Œè¿”å›-1ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (point == <span class="keyword">null</span> || !hasOcean) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›æœ€åä¸€æ¬¡éå†åˆ°çš„æµ·æ´‹çš„è·ç¦»ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> grid[point[<span class="number">0</span>]][point[<span class="number">1</span>]] - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="BFSéå†çŸ©é˜µ"><a href="#BFSéå†çŸ©é˜µ" class="headerlink" title="BFSéå†çŸ©é˜µ"></a><a href="https://leetcode-cn.com/problems/shun-shi-zhen-da-yin-ju-zhen-lcof/solution/shun-shi-zhen-da-yin-ju-zhen-by-leetcode-solution/" target="_blank" rel="noopener">BFSéå†çŸ©é˜µ</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] spiralOrder(<span class="keyword">int</span>[][] matrix) &#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rows = matrix.length, columns = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][columns];</span><br><span class="line">        <span class="keyword">int</span> total = rows * columns;</span><br><span class="line">        <span class="keyword">int</span>[] order = <span class="keyword">new</span> <span class="keyword">int</span>[total];</span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">0</span>, column = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[][] directions = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">int</span> directionIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">            order[i] = matrix[row][column];</span><br><span class="line">            visited[row][column] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">int</span> nextRow = row + directions[directionIndex][<span class="number">0</span>], nextColumn = column + directions[directionIndex][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (nextRow &lt; <span class="number">0</span> || nextRow &gt;= rows || nextColumn &lt; <span class="number">0</span> || nextColumn &gt;= columns || visited[nextRow][nextColumn]) &#123;</span><br><span class="line">                directionIndex = (directionIndex + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            row += directions[directionIndex][<span class="number">0</span>];</span><br><span class="line">            column += directions[directionIndex][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒç›®å½•"><a href="#å‚è€ƒç›®å½•" class="headerlink" title="å‚è€ƒç›®å½•"></a>å‚è€ƒç›®å½•</h1><ul><li><p><a href="https://mp.weixin.qq.com/mp/homepage?__biz=MzA5ODk3ODA4OQ==&amp;hid=1&amp;sn=55c59cffea8c1340fa26bd05a5da3fcd&amp;scene=1&amp;devicetype=iOS13.3.1&amp;version=17000b24&amp;lang=en&amp;nettype=WIFI&amp;ascene=7&amp;session_us=gh_cc856cc5e4d6&amp;fontScale=100&amp;wx_header=1" target="_blank" rel="noopener">ç”œå§¨</a></p></li><li><p><a href="https://mp.weixin.qq.com/s/G2I57RPxGC913-BUcOLCUQ" target="_blank" rel="noopener">å°å·ç®—æ³•ç›®å½•</a></p></li><li><a href="https://mp.weixin.qq.com/mp/homepage?__biz=MzA5ODk3ODA4OQ==&amp;hid=1&amp;sn=55c59cffea8c1340fa26bd05a5da3fcd&amp;scene=1&amp;devicetype=iOS13.3.1&amp;version=17000b24&amp;lang=en&amp;nettype=WIFI&amp;ascene=7&amp;session_us=gh_cc856cc5e4d6&amp;fontScale=100&amp;wx_header=1" target="_blank" rel="noopener">å¤§è±¡ğŸ˜</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Binary Search.</title>
      <link href="/2020/06/04/Binary-Search/"/>
      <url>/2020/06/04/Binary-Search/</url>
      
        <content type="html"><![CDATA[<p><img src="https://pic.leetcode-cn.com/e120bac189db2fc912dce550d9c46746a312f362ee3d6d40e799aad8db69ae6f-image.png" alt="BS Mind"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/æ’é™¤æ³•æ‰¾äºŒåˆ†.png" alt="æ’é™¤æ³•æ‰¾äºŒåˆ†"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/è¾¹ç•Œæ”¶ç¼©é—®é¢˜.png" alt="è¾¹ç•Œæ”¶ç¼©é—®é¢˜"></p><p><img src="/Users/WilliamRen/Nutstore Files/åšå®¢å›¾åºŠ/é™åˆ¶æ¡ä»¶.png" alt="é™åˆ¶æ¡ä»¶"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> des)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> low = <span class="number">0</span>, high = array.length - <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">         <span class="keyword">int</span> mid = low + (high - low) / <span class="number">2</span>;<span class="comment">//int mid = (left + right) &gt;&gt; 1;</span></span><br><span class="line">         <span class="keyword">if</span> (des == array[mid]) &#123;</span><br><span class="line">             <span class="keyword">return</span> mid;</span><br><span class="line">         &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &lt; array[mid]) &#123;</span><br><span class="line">             high = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mySqrt</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šé’ˆå¯¹ç‰¹æ®Šæµ‹è¯•ç”¨ä¾‹ï¼Œä¾‹å¦‚ 2147395599</span></span><br><span class="line">        <span class="comment">// è¦æŠŠæœç´¢çš„èŒƒå›´è®¾ç½®æˆé•¿æ•´å‹</span></span><br><span class="line">        <span class="keyword">long</span> left = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> right = x / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œä¸€å®šå–å³ä¸­ä½æ•°ï¼Œå¦‚æœå–å·¦ä¸­ä½æ•°ï¼Œä»£ç ä¼šè¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">// long mid = left + (right - left + 1) / 2;</span></span><br><span class="line">            <span class="keyword">long</span> mid = (left + right + <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">long</span> square = mid * mid;</span><br><span class="line">            <span class="keyword">if</span> (square &gt; x) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å› ä¸ºä¸€å®šå­˜åœ¨ï¼Œå› æ­¤æ— éœ€åå¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://mp.weixin.qq.com/s/fIDeC5yQUJUO4KCwfjziow" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾</a></p><p><a href="https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/" target="_blank" rel="noopener">Binary Search Solution  in Leetcode</a></p><p><a href="https://leetcode-cn.com/problems/binary-search/solution/er-fen-cha-zhao-xiang-jie-by-labuladong/" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾ç»†èŠ‚è¯¦è§£_labuladong</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Everything About TreeMap</title>
      <link href="/2020/03/21/Everything-About-TreeMap/"/>
      <url>/2020/03/21/Everything-About-TreeMap/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>æ–‡ç« çš„å†…å®¹åŸºäºJDK1.7è¿›è¡Œåˆ†æï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢åŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äº1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜ã€‚</p><p>TreeMapå®ç°äº†SotredMapæ¥å£ï¼Œå®ƒæ˜¯æœ‰åºçš„é›†åˆã€‚è€Œä¸”æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ç»“æ„ï¼Œæ¯ä¸ªkey-valueéƒ½ä½œä¸ºä¸€ä¸ªçº¢é»‘æ ‘çš„èŠ‚ç‚¹ã€‚å¦‚æœåœ¨è°ƒç”¨TreeMapçš„æ„é€ å‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œåˆ™æ ¹æ®keyæ‰§è¡Œè‡ªç„¶æ’åºã€‚è¿™ç‚¹ä¼šåœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­åšè¯´æ˜ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™æŒ‰ç…§æ¯”è¾ƒå™¨æ¥è¿›è¡Œæ’åºã€‚</p><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">NavigableMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializable, Cloneable, Map&lt;K,V&gt;, NavigableMap&lt;K,V&gt;, SortedMap&lt;K,V&gt;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="keyword">super</span> K&gt; comparator;  <span class="comment">//æ¯”è¾ƒå™¨ï¼Œæ˜¯è‡ªç„¶æ’åºï¼Œè¿˜æ˜¯å®šåˆ¶æ’åº ï¼Œä½¿ç”¨finalä¿®é¥°ï¼Œè¡¨æ˜ä¸€æ—¦èµ‹å€¼ä¾¿ä¸å…è®¸æ”¹å˜</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root = <span class="keyword">null</span>;  <span class="comment">//çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;     <span class="comment">//TreeMapä¸­å­˜æ”¾çš„é”®å€¼å¯¹çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> modCount = <span class="number">0</span>;   <span class="comment">//ä¿®æ”¹çš„æ¬¡æ•°</span></span><br></pre></td></tr></table></figure><h1 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h1><p>ç”±äºTreeMapä¸­æºç è¾ƒé•¿ï¼Œæ¥ä¸‹æ¥å°†åˆ†æ®µè§£æéƒ¨åˆ†æºç ã€‚æ—¢ç„¶æ˜¯çº¢é»‘æ ‘å­˜å‚¨ï¼Œè‚¯å®šè¦æœ‰æ•°æ®ç»“æ„ï¼ˆNodeï¼‰èŠ‚ç‚¹çš„ã€‚çœ‹ä¸€ä¸‹TreeMapä¸­å…³äºèŠ‚ç‚¹çš„å®šä¹‰éƒ¨åˆ†ã€‚</p><h2 id="æ•°æ®ç»“æ„-1"><a href="#æ•°æ®ç»“æ„-1" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    K key;    <span class="comment">//é”®</span></span><br><span class="line">    V value;    <span class="comment">//å€¼</span></span><br><span class="line">    Entry&lt;K,V&gt; left = <span class="keyword">null</span>;     <span class="comment">//å·¦å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; right = <span class="keyword">null</span>;    <span class="comment">//å³å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; parent;          <span class="comment">//çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">boolean</span> color = BLACK;      <span class="comment">//èŠ‚ç‚¹çš„é¢œè‰²ï¼Œåœ¨çº¢é»‘æ ‘ç§ï¼Œåªæœ‰ä¸¤ç§é¢œè‰²ï¼Œçº¢è‰²å’Œé»‘è‰²</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œç”¨æŒ‡å®šçš„key,value ,parentåˆå§‹åŒ–ï¼Œcoloré»˜è®¤ä¸ºé»‘è‰²</span></span><br><span class="line">    Entry(K key, V value, Entry&lt;K,V&gt; parent) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›key</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›è¯¥èŠ‚ç‚¹å¯¹åº”çš„value</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›¿æ¢èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">setValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">        V oldValue = <span class="keyword">this</span>.value;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™equals()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ªèŠ‚ç‚¹çš„keyç›¸ç­‰ï¼Œvalueç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹æ‰ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">return</span> valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™hashCode()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyHash = (key==<span class="keyword">null</span> ? <span class="number">0</span> : key.hashCode());</span><br><span class="line">        <span class="keyword">int</span> valueHash = (value==<span class="keyword">null</span> ? <span class="number">0</span> : value.hashCode());</span><br><span class="line">        <span class="comment">//keyå’Œvale hashå€¼å¾—å¼‚æˆ–è¿ç®—ï¼Œç›¸åŒåˆ™ä¸ºé›¶ï¼Œä¸åŒåˆ™ä¸º1 </span></span><br><span class="line">        <span class="keyword">return</span> keyHash ^ valueHash;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡å†™toString()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key + <span class="string">"="</span> + value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼Œcomparatorç”¨é”®çš„é¡ºåºåšæ¯”è¾ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    comparator = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼Œæä¾›æ¯”è¾ƒå™¨ï¼Œç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> K&gt; comparator)</span> </span>&#123;</span><br><span class="line">    his.comparator = comparator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†mä¸­çš„å…ƒç´ è½¬åŒ–daoTreeMapä¸­ï¼ŒæŒ‰ç…§é”®çš„é¡ºåºåšæ¯”è¾ƒæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    comparator = <span class="keyword">null</span>;</span><br><span class="line">    putAll(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šçš„å‚æ•°ä¸ºSortedMap</span></span><br><span class="line"><span class="comment">//é‡‡ç”¨mçš„æ¯”è¾ƒå™¨æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(SortedMap&lt;K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    comparator = m.comparator();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        buildFromSorted(m.size(), m.entrySet().iterator(), <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (java.io.IOException cannotHappen) &#123;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException cannotHappen) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TreeMapæä¾›äº†å››ä¸ªæ„é€ æ–¹æ³•ï¼Œå®ç°äº†æ–¹æ³•çš„é‡è½½ã€‚æ— å‚æ„é€ æ–¹æ³•ä¸­æ¯”è¾ƒå™¨çš„å€¼ä¸ºnull,é‡‡ç”¨è‡ªç„¶æ’åºçš„æ–¹æ³•ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™ç§°ä¹‹ä¸ºå®šåˆ¶æ’åº.</p><ul><li>è‡ªç„¶æ’åºï¼šTreeMapçš„æ‰€æœ‰keyå¿…é¡»å®ç°Comparableæ¥å£ï¼Œæ‰€æœ‰çš„keyéƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡</li><li>å®šåˆ¶æ’åºï¼šåˆ›å»ºTreeMapå¯¹è±¡ä¼ å…¥äº†ä¸€ä¸ªComparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMapä¸­æ‰€æœ‰çš„keyè¿›è¡Œæ’åºï¼Œé‡‡ç”¨å®šåˆ¶æ’åºä¸è¦æ±‚Mapçš„keyå®ç°Comparableæ¥å£ã€‚ç­‰ä¸‹é¢åˆ†æåˆ°æ¯”è¾ƒæ–¹æ³•çš„æ—¶å€™åœ¨åˆ†æè¿™ä¸¤ç§æ¯”è¾ƒæœ‰ä½•ä¸åŒã€‚</li></ul><p>å¯¹äºMapæ¥è¯´ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯put()/get()/remove()ç­‰æ–¹æ³•ï¼Œä¸‹é¢ä¾æ¬¡è¿›è¡Œåˆ†æ</p><h2 id="put"><a href="#put" class="headerlink" title="put()"></a>put()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; t = root;     <span class="comment">//çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;        <span class="comment">//çº¢é»‘æ ‘æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        compare(key, key); <span class="comment">// type (and possibly null) check</span></span><br><span class="line">        <span class="comment">//æ„é€ æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œä¼ å…¥nullå€¼ã€‚ </span></span><br><span class="line">        root = <span class="keyword">new</span> Entry&lt;&gt;(key, value, <span class="keyword">null</span>);  </span><br><span class="line">        size = <span class="number">1</span>;     <span class="comment">//sizeå€¼åŠ 1</span></span><br><span class="line">        modCount++;    <span class="comment">//æ”¹å˜ä¿®æ”¹çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;    <span class="comment">//è¿”å›null </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> cmp;</span><br><span class="line">    Entry&lt;K,V&gt; parent;    <span class="comment">//å®šä¹‰èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// split comparator and comparable paths</span></span><br><span class="line">    Comparator&lt;? <span class="keyword">super</span> K&gt; cpr = comparator;     <span class="comment">//è·å–æ¯”è¾ƒå™¨</span></span><br><span class="line">    <span class="keyword">if</span> (cpr != <span class="keyword">null</span>) &#123;      <span class="comment">//å¦‚æœå®šä¹‰äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;      <span class="comment">//å°†çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹èµ‹å€¼ç»™parent</span></span><br><span class="line">            cmp = cpr.compare(key, t.key);     <span class="comment">//æ¯”è¾ƒkey, ä¸æ ¹èŠ‚ç‚¹çš„å¤§å°</span></span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)      <span class="comment">//å¦‚æœkey &lt; t.key , æŒ‡å‘å·¦å­æ ‘</span></span><br><span class="line">                t = t.left;   <span class="comment">//t = t.left  , t == å®ƒçš„åšå­©å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                t = t.right;  <span class="comment">//å¦‚æœkey &gt; t.key , æŒ‡å‘å®ƒçš„å³å­©å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);      <span class="comment">//å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œæ›¿æ¢keyçš„å€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="keyword">null</span>);        <span class="comment">//å¾ªç¯éå†</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è‡ªç„¶æ’åºæ–¹å¼ï¼Œæ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨</span></span><br><span class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();  <span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        Comparable&lt;? <span class="keyword">super</span> K&gt; k = (Comparable&lt;? <span class="keyword">super</span> K&gt;) key;    <span class="comment">//ç±»å‹è½¬æ¢</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = k.compareTo(t.key);</span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)     <span class="comment">// key &lt; t.key </span></span><br><span class="line">                t = t.left;   <span class="comment">//å·¦å­©å­</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)   <span class="comment">// key &gt; t.key </span></span><br><span class="line">                t = t.right;    <span class="comment">//å³å­©å­</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);   <span class="comment">//t == t.key , æ›¿æ¢valueå€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Entry&lt;K,V&gt; e = <span class="keyword">new</span> Entry&lt;&gt;(key, value, parent);   <span class="comment">//åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå¹¶åˆ¶å®šçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">//æ ¹æ®æ¯”è¾ƒç»“æœï¼Œå†³å®šæ–°èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æˆ–è€…å³å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        parent.left = e;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        parent.right = e;</span><br><span class="line">    fixAfterInsertion(e);   <span class="comment">//æ–°æ’å…¥èŠ‚ç‚¹åé‡æ–°è°ƒæ•´çº¢é»‘æ ‘ </span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¯”è¾ƒæ–¹æ³•ï¼Œå¦‚æœcomparator==null ,é‡‡ç”¨comparable.compartToè¿›è¡Œæ¯”è¾ƒï¼Œå¦åˆ™é‡‡ç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object k1, Object k2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> comparator==<span class="keyword">null</span> ? ((Comparable&lt;? <span class="keyword">super</span> K&gt;)k1).compareTo((K)k2)</span><br><span class="line">        : comparator.compare((K)k1, (K)k2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterInsertion</span><span class="params">(Entry&lt;K,V&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ’å…¥çš„èŠ‚ç‚¹é»˜è®¤çš„é¢œè‰²ä¸ºçº¢è‰²</span></span><br><span class="line">    x.color = RED;    <span class="comment">//</span></span><br><span class="line">    <span class="comment">//æƒ…å½¢1ï¼š æ–°èŠ‚ç‚¹x æ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ä¸éœ€è¦ä»»ä½•æ“ä½œ</span></span><br><span class="line">    <span class="comment">//æƒ…å½¢2ï¼š æ–°èŠ‚ç‚¹x çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (x != <span class="keyword">null</span> &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123;</span><br><span class="line">    <span class="comment">//æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹xçš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯çº¢è‰²çš„</span></span><br><span class="line">    <span class="comment">//åˆ¤æ–­xçš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä½ç½®ï¼Œæ˜¯å¦å±äºå·¦å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123;</span><br><span class="line">          <span class="comment">//è·å–xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä¸Šé¢è¯­å¥å·²ç»åˆ¤æ–­å‡ºxèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºå·¦å­©å­ï¼Œæ‰€ä»¥ç›´æ¥å–å³å­©å­</span></span><br><span class="line">         Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">         <span class="comment">//åˆ¤æ–­æ˜¯å¦xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚</span></span><br><span class="line">         <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">              setColor(parentOf(x), BLACK); <span class="comment">// xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">              setColor(y, BLACK);           <span class="comment">// yèŠ‚ç‚¹çš„é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">              setColor(parentOf(parentOf(x)), RED); <span class="comment">// x.parent.parentè®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">              x = parentOf(parentOf(x)); <span class="comment">// x == x.parent.parent ,è¿›è¡Œéå†ã€‚</span></span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">//xçš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–è€…ç¼ºå°‘çš„</span></span><br><span class="line">               <span class="keyword">if</span> (x == rightOf(parentOf(x))) &#123;   <span class="comment">//åˆ¤æ–­xèŠ‚ç‚¹æ˜¯å¦ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­</span></span><br><span class="line">                    x = parentOf(x);     <span class="comment">//x == çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                    rotateLeft(x);    <span class="comment">//å·¦æ—‹è½¬æ“ä½œ</span></span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//xèŠ‚ç‚¹æ˜¯å…¶çˆ¶çš„å·¦å­©å­</span></span><br><span class="line">               setColor(parentOf(x), BLACK);</span><br><span class="line">               setColor(parentOf(parentOf(x)), RED);  <span class="comment">//ä¸Šé¢ä¸¤å¥å°†x.parent å’Œx.parent.parentçš„é¢œè‰²åšè°ƒæ¢</span></span><br><span class="line">               rotateRight(parentOf(parentOf(x)));   <span class="comment">//è¿›è¡Œå³æ—‹è½¬</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));  <span class="comment">//y æ˜¯x èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span></span><br><span class="line">            <span class="keyword">if</span> (colorOf(y) == RED) &#123;    <span class="comment">//åˆ¤æ–­é¢œè‰²</span></span><br><span class="line">                setColor(parentOf(x), BLACK);    <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(y, BLACK);         <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);   <span class="comment">//ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                x = parentOf(parentOf(x));   <span class="comment">//å°†ç¥–çˆ¶èŠ‚ç‚¹ä½œä¸ºæ–°æ’å…¥çš„èŠ‚ç‚¹ï¼Œéå†è°ƒæ•´</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;     <span class="comment">//x æ˜¯å…¶çˆ¶äº²çš„å·¦å­©å­</span></span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateRight(x);    <span class="comment">//ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå³æ—‹æ“ä½œ</span></span><br><span class="line">                &#125;</span><br><span class="line">                setColor(parentOf(x), BLACK);    <span class="comment">//çˆ¶èŠ‚ç‚¹ä¸ºè®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);  <span class="comment">//ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                rotateLeft(parentOf(parentOf(x)));  <span class="comment">//ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå·¦æ—‹æ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    root.color = BLACK; <span class="comment">//é€šè¿‡èŠ‚ç‚¹ä½ç½®çš„è°ƒæ•´ï¼Œæœ€ç»ˆå°†çº¢è‰²çš„èŠ‚ç‚¹æ¡è°ƒæ¢åˆ°äº†æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ ¹èŠ‚ç‚¹é‡æ–°è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¢é»‘æ ‘æ˜¯ä¸€ä¸ªæ›´é«˜æ•ˆçš„æ£€ç´¢äºŒå‰æ ‘ï¼Œæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²æˆ–è€…é»‘è‰²</li><li>æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯é»‘è‰²çš„</li><li>æ‰€æœ‰çš„å¶å­çš„å­èŠ‚ç‚¹éƒ½æ˜¯ç©ºèŠ‚ç‚¹ï¼Œå¹¶ä¸”éƒ½æ˜¯é»‘è‰²çš„</li><li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼ˆä¸ä¼šæœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰</li><li>ä»ä»»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶å­æ ‘ä¸­æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆå¶å­èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„é»‘è‰²èŠ‚ç‚¹æ•°é‡æ¯æ¡è·¯å¾„éƒ½ç›¸åŒï¼‰</li></ol><p>ä¸Šé¢çš„ä»£ç ï¼Œè¯¦ç»†çš„æ ‡æ³¨äº†æ¯æ¡è¯­å¥çš„ä½œç”¨ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ æ²¡æœ‰ä¸€å®šçš„åŠŸåŠ›ï¼Œå³ä½¿æ³¨é‡Šå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œä½ ä¹Ÿä¼šæ˜¯ä¸€è„¸æ‡µé€¼ ï¼ŒäºŒè„¸æ‡µé€¼ï¼Œå…¨è„‘æ‡µé€¼ä¸­ï¼Œä¸‹é¢é…åˆå›¾ç‰‡æ¥æ¢³ç†ä¸€ä¸‹ä»£ç æ‰€è¡¨ç¤ºçš„å«ä¹‰ï¼š<br>å½“ä¸€ä¸ªé»˜è®¤ä¸ºçº¢è‰²çš„èŠ‚ç‚¹æ’å…¥æ ‘ä¸­ï¼Œå…¶å®å¯¹åº”çš„æ˜¯7ä¸­å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼Œåˆ†åˆ«è¿›è¡Œå™è¿°ï¼š</p><ul><li>æƒ…å½¢1ï¼šæ–°æ’å…¥çš„èŠ‚ç‚¹æ—¶çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ— éœ€ä»»ä½•çš„æ“ä½œï¼Œç›´æ¥å°†é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²å°±å¯ä»¥äº†</li><li>æƒ…å½¢2ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ã€‚ä¹Ÿæ— éœ€ä»»ä½•çš„æ“ä½œã€‚å› ä¸ºæ–°èŠ‚ç‚¹çš„æ’å…¥å¹¶æ²¡æœ‰å½±å“åˆ°çº¢é»‘ä¹¦çš„ç‰¹ç‚¹</li><li>æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰é¢œè‰²æ˜¯çº¢è‰²çš„ï¼Œè€Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¹Ÿæ˜¯çº¢è‰²çš„ã€‚é‚£ä¹ˆæƒ…å†µå°±å‡ºç°äº†ï¼Œæ­¤æ—¶æ’å…¥çš„èŠ‚ç‚¹å°±è¿åäº†çº¢é»‘æ ‘çš„ç‰¹ç‚¹4 ï¼Œéœ€è¦å¯¹çº¢é»‘æ ‘è¿›è¡Œè°ƒæ•´ã€‚ æ“ä½œçœ‹ä¸‹å›¾ï¼š<img src="https://static.oschina.net/uploads/space/2018/0228/120104_Rfsm_2927759.png" alt="img"><br>è°ƒæ•´æ“ä½œå¦‚ä¸Šå›¾ï¼Œå°†çˆ¶èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œéƒ½ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œç„¶åå°†ç¥–çˆ¶èŠ‚ç‚¹ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œå› ä¸ºä¿®æ”¹äº†ç¥–çˆ¶èŠ‚ç‚¹çš„é¢œè‰²ï¼Œç¥–çˆ¶èŠ‚ç‚¹å¯èƒ½ä¼šå‘ç”Ÿé¢œè‰²çš„å†²çªï¼Œæ‰€ä»¥å°†æ–°æ’å…¥çš„èŠ‚ç‚¹ä¿®æ”¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œè°ƒæ•´ã€‚</li><li>æƒ…å½¢4ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…ä¸ºnullï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120219_SNXd_2927759.png" alt="img"><br>æ­¤æ—¶ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œå°±æ–°æ’å…¥çš„èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œã€‚ä¾¿å˜æˆäº†æƒ…å½¢5å¯¹åº”çš„æƒ…å†µï¼Œå°†æ‰§è¡Œæƒ…å½¢5çš„æ“ä½œ</li><li>æƒ…å½¢5ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…null,æ–°æ’å…¥èŠ‚ç‚¹ä¸ºçˆ¶äº²çš„å·¦å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120301_ZnNC_2927759.png" alt="img"></li><li>æƒ…å½¢6 å’Œæƒ…å½¢7çš„æ“ä½œä¸æƒ…å½¢4å’Œæƒ…å½¢5çš„æ“ä½œç›¸åŒï¼Œå®ƒä»¬ä¹‹å‰çš„åŒºåˆ«æ˜¯çˆ¶èŠ‚ç‚¹ä¸ºæœ‰å­©å­èŠ‚ç‚¹ï¼Œå†æ¬¡ä¸å†èµ˜è¿°ã€‚</li></ul><h2 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; p = getEntry(key);  <span class="comment">//æ ¹æ®keyæŸ¥æ‰¾èŠ‚ç‚¹ï¼Œå¹¶è¿”å›è¯¥èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    V oldValue = p.value;    <span class="comment">//è·å–keyå¯¹åº”çš„å€¼</span></span><br><span class="line">    deleteEntry(p);     <span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;   <span class="comment">//è¿”å›keyå¯¹åº”çš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">getEntry</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®é”®å¯»æ‰¾èŠ‚ç‚¹ï¼Œæœ‰éä¸ºä¸¤ç§æ–¹å¼ï¼Œå¦‚æœå®šåˆ¶äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨å®šåˆ¶æ’åºæ–¹å¼ï¼Œå¦åˆ™ä½¿ç”¨è‡ªç„¶æ’åº</span></span><br><span class="line">    <span class="keyword">if</span> (comparator != <span class="keyword">null</span>) </span><br><span class="line">        <span class="keyword">return</span> getEntryUsingComparator(key); <span class="comment">//å¾ªç¯éå†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    Comparable&lt;? <span class="keyword">super</span> K&gt; k = (Comparable&lt;? <span class="keyword">super</span> K&gt;) key;</span><br><span class="line">    Entry&lt;K,V&gt; p = root;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="keyword">null</span>) &#123;  <span class="comment">//å¾ªç¯éå†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> cmp = k.compareTo(p.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">            p = p.left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">            p = p.right;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteEntry</span><span class="params">(Entry&lt;K,V&gt; p)</span> </span>&#123;</span><br><span class="line">    modCount++;  <span class="comment">//è®°å½•ä¿®æ”¹çš„æ¬¡æ•°</span></span><br><span class="line">    size--;   <span class="comment">//æ•°é‡å‡1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“å‰èŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½ä¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (p.left != <span class="keyword">null</span> &amp;&amp; p.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//å¯»æ‰¾ç»§æ‰¿è€…ï¼Œç»§æ‰¿è€…ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹æˆ–è€…å³å­©å­èŠ‚ç‚¹çš„æœ€å°å·¦å­©å­</span></span><br><span class="line">        Entry&lt;K,V&gt; s = successor(p);</span><br><span class="line">        p.key = s.key;     <span class="comment">//key - value  çš„æ›¿æ¢ ï¼Œå¹¶æ²¡æœ‰æ›¿æ¢é¢œè‰²</span></span><br><span class="line">        p.value = s.value;</span><br><span class="line">        p = s;  <span class="comment">//æŒ‡å‘ç»§æ‰¿è€…</span></span><br><span class="line">    &#125; <span class="comment">// p has 2 children</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start fixup at replacement node, if it exists.</span></span><br><span class="line">    <span class="comment">//å¼€å§‹ä¿®å¤æ ‘ç»“æ„ï¼Œç»§æ‰¿è€…çš„å·¦å­©å­ä¸ä¸ºç©ºï¼Œè¿”å›å·¦å­©å­ï¼Œå¦åˆ™è¿”å›å³å­©å­</span></span><br><span class="line">    <span class="comment">//ä¸å¯èƒ½å­˜åœ¨å·¦å³ä¸¤ä¸ªå­©å­éƒ½å­˜åœ¨çš„æƒ…å†µï¼Œsuccessorå¯»æ‰¾çš„å°±æ˜¯æœ€å°èŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­©å­èŠ‚ç‚¹ä¸ºnull</span></span><br><span class="line">    Entry&lt;K,V&gt; replacement = (p.left != <span class="keyword">null</span> ? p.left : p.right);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (replacement != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Link replacement to parent</span></span><br><span class="line">        <span class="comment">//å·²ç»è¢«é€‰ä¸ºç»§æ‰¿è€…ï¼Œå½“å‰æ‹¥æœ‰çš„ä¸€åˆ‡æ”¾å¼ƒï¼Œæ‰€ä»¥å°†å­©å­äº¤ç»™çˆ·çˆ·æŠšå…»</span></span><br><span class="line">        replacement.parent = p.parent;</span><br><span class="line">        <span class="comment">//pèŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œåˆ™æŒ‡å‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (p.parent == <span class="keyword">null</span>)</span><br><span class="line">           root = replacement;</span><br><span class="line">        <span class="comment">//å¦‚æœpä¸ºå·¦å­©å­ï¼Œå¦‚æœpä¸ºå·¦å­©å­ï¼Œåˆ™å°†p.parent.left = p.left</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p == p.parent.left)</span><br><span class="line">            p.parent.left  = replacement;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p.parent.right = replacement;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤pèŠ‚ç‚¹åˆ°å·¦å³åˆ†æ”¯ï¼Œå’Œçˆ¶èŠ‚ç‚¹çš„å¼•ç”¨</span></span><br><span class="line">        p.left = p.right = p.parent = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fix replacement</span></span><br><span class="line">        <span class="keyword">if</span> (p.color == BLACK)</span><br><span class="line">            <span class="comment">//æ¢å¤é¢œè‰²åˆ†é…</span></span><br><span class="line">            fixAfterDeletion(replacement);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.parent == <span class="keyword">null</span>) &#123; <span class="comment">// return if we are the only node.</span></span><br><span class="line">        <span class="comment">//çº¢é»‘ä¹¦ä¸­çˆ¶èŠ‚ç‚¹ä¸ºç©ºçš„åªèƒ½æ˜¯æ ¹èŠ‚ç‚¹ã€‚</span></span><br><span class="line">        root = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//  No children. Use self as phantom replacement and unlink.</span></span><br><span class="line">        <span class="keyword">if</span> (p.color == BLACK)</span><br><span class="line">            fixAfterDeletion(p);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p.parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p == p.parent.left)</span><br><span class="line">                p.parent.left = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p == p.parent.right)</span><br><span class="line">                p.parent.right = <span class="keyword">null</span>;</span><br><span class="line">            p.parent = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterDeletion</span><span class="params">(Entry&lt;K,V&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œé¢œè‰²ä¸ºé»‘è‰²ï¼Œè°ƒæ•´ç»“æ„</span></span><br><span class="line">    <span class="keyword">while</span> (x != root &amp;&amp; colorOf(x) == BLACK) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­xæ˜¯å¦ä¸ºå·¦å­©å­</span></span><br><span class="line">        <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;</span><br><span class="line">            <span class="comment">//xçš„å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">            Entry&lt;K,V&gt; sib = rightOf(parentOf(x));</span><br><span class="line">            <span class="comment">//è‹¥å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">            <span class="keyword">if</span> (colorOf(sib) == RED) &#123;</span><br><span class="line">                setColor(sib, BLACK);   <span class="comment">//è®¾ç½®å…„å¼ŸèŠ‚ç‚¹å˜ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(parentOf(x), RED);  <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                rotateLeft(parentOf(x));   <span class="comment">//å·¦æ—‹çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                sib = rightOf(parentOf(x)); <span class="comment">//é‡æ–°è®¾ç½®xçš„å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(leftOf(sib))  == BLACK &amp;&amp;</span><br><span class="line">                colorOf(rightOf(sib)) == BLACK) &#123;</span><br><span class="line">                setColor(sib, RED); <span class="comment">//å…„å¼ŸèŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½æ˜¯é»‘è‰²çš„é‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ï¼Œä¿®æ”¹ä¸ºçº¢è‰²</span></span><br><span class="line">                x = parentOf(x);   <span class="comment">//å°†xå®šä½åˆ°çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (colorOf(rightOf(sib)) == BLACK) &#123;   <span class="comment">//å…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­æ˜¯é»‘è‰²çš„ï¼Œå·¦å­©å­æ˜¯çº¢è‰²çš„</span></span><br><span class="line">                    setColor(leftOf(sib), BLACK);  <span class="comment">//è®¾ç½®å·¦å­©å­èŠ‚ç‚¹ä¸ºé»‘è‰²</span></span><br><span class="line">                    setColor(sib, RED); <span class="comment">//å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²</span></span><br><span class="line">                    rotateRight(sib);   <span class="comment">//å³æ—‹</span></span><br><span class="line">                    sib = rightOf(parentOf(x));  <span class="comment">//å³æ—‹åé‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">                &#125;</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));  <span class="comment">//å…„å¼ŸèŠ‚ç‚¹é¢œè‰²è®¾ç½®å’Œçˆ¶èŠ‚ç‚¹çš„é¢œè‰²ç›¸åŒ</span></span><br><span class="line">                setColor(parentOf(x), BLACK);   <span class="comment">//çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                setColor(rightOf(sib), BLACK);  <span class="comment">//å°†å…„å¼ŸèŠ‚ç‚¹çš„æœ‰å­©å­è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                rotateLeft(parentOf(x));   <span class="comment">//å·¦æ—‹</span></span><br><span class="line">                x = root;  <span class="comment">//è®¾ç½®xä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// symmetric</span></span><br><span class="line">            <span class="comment">//xä¸ºçˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹ï¼Œå‚è€ƒä¸Šé¢çš„æ“ä½œ</span></span><br><span class="line">            Entry&lt;K,V&gt; sib = leftOf(parentOf(x));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(sib) == RED) &#123;</span><br><span class="line">                setColor(sib, BLACK);</span><br><span class="line">                setColor(parentOf(x), RED);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                sib = leftOf(parentOf(x));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (colorOf(rightOf(sib)) == BLACK &amp;&amp;colorOf(leftOf(sib)) == BLACK) &#123;</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (colorOf(leftOf(sib)) == BLACK) &#123;</span><br><span class="line">                    setColor(rightOf(sib), BLACK);</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    rotateLeft(sib);</span><br><span class="line">                    sib = leftOf(parentOf(x));</span><br><span class="line">                &#125;</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(leftOf(sib), BLACK);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                x = root;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setColor(x, BLACK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤çº¢é»‘æ ‘çš„æ“ä½œæ¯”æ’å…¥æ“ä½œè¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>ä»¥æ’åºäºŒå‰æ ‘çš„æ–¹æ³•åˆ é™¤æŒ‡å®šèŠ‚ç‚¹ã€‚åˆ é™¤çš„èŠ‚ç‚¹å­˜åœ¨ä¸‰ç§æƒ…å†µï¼š<ul><li>è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæ²¡æœ‰å·¦å³å­©å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤å³å¯</li><li>è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæœ‰ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè®©å®ƒçš„å­©å­èŠ‚ç‚¹æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹å³å¯</li><li>æœ¬åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæœ‰ä¸¤ä¸ªéç©ºçš„å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±æˆ–è€…åç»§èŠ‚ç‚¹ï¼Œæ›´æ¢å…ƒç´ å€¼ï¼Œåœ¨å°†å‰é©±æˆ–è€…åç»§èŠ‚ç‚¹åˆ é™¤ï¼ˆä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æˆ–è€…åç»§éƒ½å¿…å®šè‡³å¤šæœ‰ä¸€ä¸ªéç©ºçš„å­èŠ‚ç‚¹ï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„ä¸¤ç§æƒ…å½¢è¿›è¡Œæ“ä½œï¼‰</li></ul></li><li>è¿›è¡Œé¢œè‰²çš„è°ƒæ¢å’Œæ ‘çš„æ—‹è½¬ï¼Œæ»¡è¶³çº¢é»‘æ ‘çš„ç‰¹å¾</li></ul><p>ä¸‹é¢æ¥åˆ†æƒ…å½¢è®¨è®ºä¸€ä¸‹å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼š</p><ul><li>æƒ…å½¢1ï¼šè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹æˆ–è€…é¢œè‰²ä¸ºç©ºè‰²ï¼Œæ­¤æ—¶åˆ é™¤è¯¥èŠ‚ç‚¹ä¸å½±å“çº¢é»‘æ ‘çš„ç‰¹ç‚¹ã€‚æ— éœ€æ“ä½œ</li><li>æƒ…å½¢2ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120648_lZYh_2927759.png" alt="img"><br>è‹¥åˆ é™¤ä¸Šå›¾ä¸­çš„xèŠ‚ç‚¹ï¼Œå°†ç¼ºå°‘ä¸€ä¸ªé»‘èŠ‚ç‚¹ï¼Œä¸çº¢é»‘æ ‘çš„æ€§è´¨å†²çªï¼Œæ‰€ä»¥ä¿®æ”¹sibé¢œè‰²ä¸ºé»‘è‰²ï¼Œè®¾ç½®pèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¹¶è¿›è¡Œå·¦æ—‹æ“ä½œã€‚åœ¨è¿›è¡Œåç»­çš„å¤„ç†ã€‚</li><li>æƒ…å½¢3ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼ŒxèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120742_LGd3_2927759.png" alt="img"><br>xèŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œå…„å¼ŸèŠ‚ç‚¹ï¼ˆé»‘è‰²çš„ï¼‰çš„å­èŠ‚ç‚¹ä¹Ÿæ˜¯é»‘è‰²çš„ï¼ŒpèŠ‚ç‚¹çš„é¢œè‰²æ— æ³•ç¡®å®šï¼Œæœ‰å¯èƒ½æ˜¯çº¢è‰²çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é»‘è‰²çš„ã€‚å¦‚æœæ˜¯çº¢è‰²çš„ç›´æ¥è®¾ç½®ä¸ºé»‘è‰²å³å¯ï¼Œå¦‚æœä¸ºé»‘è‰²çš„ï¼Œåˆ™éœ€è¦å°†xå®šä½çš„pèŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œå¤„ç†ã€‚</li><li>æƒ…å½¢4ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹çš„å³è‡ªå­èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/120844_0oQ7_2927759.png" alt="img"><br>æƒ…å½¢4çš„è°ƒæ•´ä¸ºäº†è½¬å˜æˆæƒ…å½¢5çš„æƒ…å†µï¼Œæ¥è¿›è¡Œå¤„ç†ã€‚</li><li>æƒ…å½¢5ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹å³å­èŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://static.oschina.net/uploads/space/2018/0228/124855_O7NA_2927759.png" alt="img"><br>sibçš„å·¦å­èŠ‚ç‚¹çš„é¢œè‰²ä¸ç¡®å®šï¼Œå¯èƒ½æ˜¯çº¢è‰²ä¹Ÿå¯èƒ½æ˜¯é»‘è‰²ï¼Œä½†æ˜¯å¯¹å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå› ä¸ºå˜æ¢å‰åå®ƒçš„ä¸Šå±‚åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹æ•°å¹¶æ²¡æœ‰æ”¹å˜ã€‚</li></ul><p>ä¸Šé¢çš„æƒ…å½¢åªæ˜¯é’ˆå¯¹åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å·¦å­©å­çš„æƒ…å†µï¼Œè¿›è¡Œçš„åˆ†æï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¹Ÿå¯èƒ½æ˜¯å³åˆ†æ”¯ã€‚æƒ…å†µå®Œå…¨ç›¸åŒåªä¸è¿‡å·¦å³é¡ºåºå‘ç”Ÿäº†é¢ å€’ï¼Œä¸å†è¿›è¡Œå¤è¿°ã€‚</p><p>è‡³æ­¤TreeMapä¸­å®ç°çš„æœ€é‡è¦å·²ç»è¯´å®Œäº†ã€‚</p><p>ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹ä¸€äº›æ–¹æ³•çš„ä½œç”¨</p><ul><li>firstEntry() è¿”å›Mapä¸­æœ€å°çš„key</li><li>higherEntry(Object key ) è¿”å›è¯¥Mapä¸­ä½äºkeyåä¸€ä½çš„key-value</li><li>lowerEntry(Object key ) è¿”å›è¯¥Mapä¸­å”¯ä¸€keyå‰ä¸€ä½çš„key-value</li><li>tailMap(Object key , boolean inclusive) è¿”å›è¯¥Mapçš„å­Map</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h1><ul><li>å…³äºçº¢é»‘æ ‘çš„èŠ‚ç‚¹æ’å…¥æ“ä½œï¼Œé¦–å…ˆæ˜¯æ”¹å˜æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œç¥–çˆ¶èŠ‚ç‚¹ï¼Œå’Œæ–°èŠ‚ç‚¹çš„é¢œè‰²ï¼Œèƒ½åœ¨å½“å‰åˆ†æ”¯é€šè¿‡èŠ‚ç‚¹çš„æ—‹è½¬æ”¹å˜çš„ï¼Œåˆ™é€šè¿‡æ­¤ç§æ“ä½œï¼Œæ¥æ»¡è¶³çº¢é»‘ä¹¦çš„ç‰¹ç‚¹ã€‚</li><li>å¦‚æœå½“å‰ç›¸å…³èŠ‚ç‚¹çš„æ—‹è½¬è§£å†³ä¸äº†çº¢é»‘æ ‘çš„å†²çªï¼Œåˆ™é€šè¿‡å°†çº¢è‰²çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æ ¹èŠ‚ç‚¹è§£å†³ï¼Œæœ€ååœ¨å°†æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Analyst of SourceCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Everything About ConcurrentHashMap</title>
      <link href="/2020/03/21/Everything-About-ConcurrentHashMap/"/>
      <url>/2020/03/21/Everything-About-ConcurrentHashMap/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ConcurrentHashMapå¸¸ç”¨äºå¹¶å‘ç¼–ç¨‹ï¼Œè¿™é‡Œå°±ä»æºç ä¸Šæ¥åˆ†æä¸€ä¸‹ConcurrentHashMapæ•°æ®ç»“æ„å’Œåº•å±‚åŸç†ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸ªç®—æ³•ï¼Œ è¿™ä¸ªç®—æ³•å’ŒConcurrentçš„å®ç°æ˜¯åˆ†ä¸å¼€çš„ã€‚<br>CASç®—æ³•ï¼š</p><ul><li>CASæ˜¯è‹±æ–‡å•è¯Compare And Swapçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚</li><li>CASæœºåˆ¶å½“ä¸­ä½¿ç”¨äº†3ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚</li><li>æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œåªæœ‰å½“å˜é‡çš„é¢„æœŸå€¼Aå’Œå†…å­˜åœ°å€Vå½“ä¸­çš„å®é™…å€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šå°†å†…å­˜åœ°å€Vå¯¹åº”çš„å€¼ä¿®æ”¹ä¸ºB</li></ul><p>ä»æ€æƒ³ä¸Šæ¥è¯´ï¼ŒSynchronizedå±äºæ‚²è§‚é”ï¼Œæ‚²è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸¥é‡ï¼Œæ‰€ä»¥ä¸¥é˜²æ­»å®ˆã€‚CASå±äºä¹è§‚é”ï¼Œä¹è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸é‚£ä¹ˆä¸¥é‡ï¼Œæ‰€ä»¥è®©çº¿ç¨‹ä¸æ–­å»å°è¯•æ›´æ–°ã€‚</p><p><strong>ConcurrentHashMapæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapé›†åˆï¼Œå¯ä»¥åº”å¯¹é«˜å¹¶å‘çš„åœºæ™¯ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</strong>ç›¸æ¯”è¾ƒHashTableï¼Œå®ƒçš„é”ç²’åº¦æ›´åŠ çš„ç»†åŒ–ï¼Œå› ä¸ºHashTableçš„æ–¹æ³•éƒ½æ˜¯ç”¨Synchronizedä¿®é¥°çš„ï¼Œæ•ˆç‡ç°å¸¸çš„åº•ä¸‹ã€‚</p><p>1.8ä¹‹å‰ConcurrentHashMapä½¿ç”¨é”åˆ†æ®µæŠ€æœ¯ï¼Œå°†æ•°æ®åˆ†æˆä¸€æ®µæ®µçš„å­˜å‚¨ï¼Œæ¯ä¸€ä¸ªæ•°æ®æ®µé…ç½®ä¸€æŠŠé”ï¼Œç›¸äº’ä¹‹é—´ä¸å½±å“ï¼Œè€Œ1.8ä¹‹åæ‘’å¼ƒäº†Segmentï¼ˆé”æ®µï¼‰çš„æ¦‚å¿µï¼Œå¯ç”¨äº†å…¨æ–°çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨<strong>CAS+Synchronized</strong>æ¥ä¿è¯å¹¶å‘æ›´æ–°çš„å®‰å…¨ï¼Œåº•å±‚é‡‡ç”¨çš„ä¾ç„¶æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚</p><p>æœ¬ç¯‡æ–‡ç« æ˜¯åŸºäºJDK1.8 ã€‚</p><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentHashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">ConcurrentMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure><p>ConcurrentHashMap ç»§æ‰¿äº†AbstractMap ,å¹¶ä¸”å®ç°äº†ConcurrentMapæ¥å£ã€‚</p><h2 id="ä¸HashMapæ¯”å¯¹ï¼š"><a href="#ä¸HashMapæ¯”å¯¹ï¼š" class="headerlink" title="ä¸HashMapæ¯”å¯¹ï¼š"></a>ä¸HashMapæ¯”å¯¹ï¼š</h2><ul><li>ç›¸åŒç‚¹ï¼šéƒ½é›†æˆäº†AbstractMapæ¥å£</li><li>ä¸åŒç‚¹ï¼šHashMapå®ç°äº†Mapæ¥å£ï¼ŒConcurrentHashMapå®ç°äº†ConcurrentMapæ¥å£ï¼Œè€ŒConcurrentMapç»§æ‰¿äº†Mapæ¥å£ï¼Œä½¿ç”¨defaultå…³é”®å­—å®šä¹‰äº†ä¸€äº›æ–¹æ³• ã€‚</li></ul><p>ä»ç»§æ‰¿å…³ç³»ä¸Šçœ‹ConcurrentHashMapä¸HashMapå¹¶æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚</p><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; <span class="comment">//æœ€å¤§å®¹é‡2çš„30æ¬¡æ–¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">16</span>; <span class="comment">//é»˜è®¤å®¹é‡  1&lt;&lt;4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> LOAD_FACTOR = <span class="number">0.75f</span>;  <span class="comment">//è´Ÿè½½å› å­</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;  <span class="comment">//é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;  <span class="comment">//æ ‘è½¬åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>; <span class="comment">//</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TRANSFER_STRIDE = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> RESIZE_STAMP_BITS = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_RESIZERS = (<span class="number">1</span> &lt;&lt; (<span class="number">32</span> - RESIZE_STAMP_BITS)) - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RESIZE_STAMP_SHIFT = <span class="number">32</span> - RESIZE_STAMP_BITS;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MOVED     = -<span class="number">1</span>; <span class="comment">// forwarding nodes çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEBIN   = -<span class="number">2</span>; <span class="comment">// roots of trees çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RESERVED  = -<span class="number">3</span>; <span class="comment">// transient reservations çš„hashå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HASH_BITS = <span class="number">0x7fffffff</span>; <span class="comment">// usable bits of normal node hash</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NCPU = Runtime.getRuntime().availableProcessors(); <span class="comment">//å¯ç”¨å¤„ç†å™¨æ•°é‡</span></span><br></pre></td></tr></table></figure><p>é‡ç‚¹è¯´ä¸€ä¸‹ <strong>sizeCtrl</strong> å±æ€§ï¼Œè¿™ä¸ªå±æ€§åœ¨ ConcurrentHashMap ä¸­æ‰®æ¼”è€…é‡è¦çš„è§’è‰²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨åˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„ä¸€ä¸ªæ§åˆ¶æ ‡è¯†ä½</span></span><br><span class="line"><span class="comment">//è´Ÿæ•°ä»£è¡¨æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„æ“ä½œ</span></span><br><span class="line"><span class="comment">// -1 ä»£è¡¨åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// -N ä»£è¡¨æœ‰n-1ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line"><span class="comment">//æ­£æ•°æˆ–è€…0è¡¨ç¤ºæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè¿™ä¸ªæ•°å€¼è¡¨ç¤ºåˆå§‹åŒ–æˆ–è€…ä¸‹ä¸€æ¬¡è¦æ‰©å®¹çš„å¤§å°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//transient ä¿®é¥°çš„å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œvolatileä¿è¯å¯è§æ€§</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ— å‚æ„é€ æ–¹æ³•ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°æ„é€ æ–¹æ³•ï¼Œåˆ¤æ–­å‚æ•°çš„åˆæ³•æ€§ï¼Œå¹¶åˆ›å»ºäº†è®¡ç®—åˆå§‹åŒ–çš„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//å°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºConcurrentHashMap</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>(initialCapacity, loadFactor, <span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œè´Ÿè½½å› å­å’ŒconcurrentLevelå¹¶å‘æ›´æ–°çº¿ç¨‹çš„æ•°é‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsegmentçš„ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity,<span class="keyword">float</span> loadFactor, <span class="keyword">int</span> concurrencyLevel)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ConcurrentHashMapçš„æ„é€ æ–¹æ³•å¹¶æ²¡åšå¤ªå¤šçš„å·¥ä½œï¼Œä¸»è¦æ˜¯è¿›è¡Œäº†å‚æ•°çš„åˆæ³•æ€§æ ¡éªŒï¼Œå’Œåˆå§‹å€¼å¤§å°çš„è½¬æ¢ã€‚è¿™ä¸ªæ–¹æ³• tableSizeFor()è¯´æ˜ä¸€ä¸‹ï¼Œ ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å°†æŒ‡å®šçš„åˆå§‹åŒ–å‚æ•°è½¬æ¢ä¸º2çš„å¹‚æ¬¡æ–¹å½¢å¼ï¼Œ å¦‚æœåˆå§‹åŒ–å‚æ•°ä¸º9 ï¼Œè½¬æ¢ååˆå§‹å¤§å°ä¸º16 ã€‚</p></blockquote><h2 id="å†…éƒ¨æ•°æ®ç»“æ„"><a href="#å†…éƒ¨æ•°æ®ç»“æ„" class="headerlink" title="å†…éƒ¨æ•°æ®ç»“æ„"></a>å†…éƒ¨æ•°æ®ç»“æ„</h2><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a><strong>Node</strong></h3><p>é¦–å½“å…¶å†²ï¼Œå› ä¸ºå®ƒæ˜¯ConcurrentHashMapçš„æ ¸å¿ƒï¼Œå®ƒåŒ…è£…äº†key-valueçš„é”®å€¼å¯¹ï¼Œæ‰€æœ‰æ’å…¥çš„æ•°æ®éƒ½åŒ…è£…åœ¨è¿™é‡Œé¢ï¼Œä¸HashMapå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€äº›å·®åˆ«ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">     <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">     <span class="keyword">final</span> K key;</span><br><span class="line">     <span class="keyword">volatile</span> V val;</span><br><span class="line">     <span class="keyword">volatile</span> Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">     Node(<span class="keyword">int</span> hash, K key, V val, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">         <span class="keyword">this</span>.hash = hash;</span><br><span class="line">         <span class="keyword">this</span>.key = key;</span><br><span class="line">         <span class="keyword">this</span>.val = val;</span><br><span class="line">         <span class="keyword">this</span>.next = next;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>value å’Œ nextä½¿ç”¨äº†volatileä¿®é¥°ï¼Œä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ã€‚ä¹Ÿä¸å…è®¸è°ƒç”¨setValue()æ–¹æ³•ç›´æ¥æ”¹å˜Nodeçš„å€¼ã€‚å¹¶å¢åŠ äº†find()æ–¹æ³•è¾…åŠ©map.get()æ–¹æ³•ã€‚</p><h3 id="TreeNode"><a href="#TreeNode" class="headerlink" title="TreeNode"></a><strong>TreeNode</strong></h3><p>æ ‘èŠ‚ç‚¹ç±»ï¼Œå¦å¤–ä¸€ä¸ªæ ¸å¿ƒçš„æ•°æ®ç»“æ„ã€‚å½“é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æ—¶å€™ï¼Œä¼šè½¬æ¢ä¸ºTreeNodeã€‚ä½†æ˜¯ä¸HashMapä¸ç›¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯ç›´æ¥è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè€Œæ˜¯æŠŠè¿™äº›ç»“ç‚¹åŒ…è£…æˆTreeNodeæ”¾åœ¨TreeBinå¯¹è±¡ä¸­ï¼Œç”±TreeBinå®Œæˆå¯¹çº¢é»‘æ ‘çš„åŒ…è£…ã€‚è€Œä¸”TreeNodeåœ¨ConcurrentHashMapé›†æˆè‡ªNodeç±»ï¼Œè€Œå¹¶éHashMapä¸­çš„é›†æˆè‡ªLinkedHashMap.Entryç±»ï¼Œä¹Ÿå°±æ˜¯è¯´TreeNodeå¸¦æœ‰nextæŒ‡é’ˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿åŸºäºTreeBinçš„è®¿é—®ã€‚</p><h3 id="TreeBin"><a href="#TreeBin" class="headerlink" title="TreeBin"></a><strong>TreeBin</strong></h3><p>è¿™ä¸ªç±»å¹¶ä¸è´Ÿè´£åŒ…è£…ç”¨æˆ·çš„keyã€valueä¿¡æ¯ï¼Œè€Œæ˜¯åŒ…è£…çš„å¾ˆå¤šTreeNodeèŠ‚ç‚¹ã€‚å®ƒä»£æ›¿äº†TreeNodeçš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®é™…çš„ConcurrentHashMapâ€œæ•°ç»„â€ä¸­ï¼Œå­˜æ”¾çš„æ˜¯TreeBinå¯¹è±¡ï¼Œè€Œä¸æ˜¯TreeNodeå¯¹è±¡ï¼Œè¿™æ˜¯ä¸HashMapçš„åŒºåˆ«ã€‚å¦å¤–è¿™ä¸ªç±»è¿˜å¸¦æœ‰äº†è¯»å†™é”ã€‚</p><h3 id="ForwardingNode"><a href="#ForwardingNode" class="headerlink" title="ForwardingNode"></a><strong>ForwardingNode</strong></h3><p>ä¸€ä¸ªç”¨äºè¿æ¥ä¸¤ä¸ªtableçš„èŠ‚ç‚¹ç±»ã€‚å®ƒåŒ…å«ä¸€ä¸ªnextTableæŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘ä¸‹ä¸€å¼ è¡¨ã€‚è€Œä¸”è¿™ä¸ªèŠ‚ç‚¹çš„key value nextæŒ‡é’ˆå…¨éƒ¨ä¸ºnullï¼Œå®ƒçš„hashå€¼ä¸º-1. è¿™é‡Œé¢å®šä¹‰çš„findçš„æ–¹æ³•æ˜¯ä»nextTableé‡Œè¿›è¡ŒæŸ¥è¯¢èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ä»¥è‡ªèº«ä¸ºå¤´èŠ‚ç‚¹è¿›è¡ŒæŸ¥æ‰¾</p><h1 id="ConcurrentHashMapå¸¸ç”¨æ–¹æ³•"><a href="#ConcurrentHashMapå¸¸ç”¨æ–¹æ³•" class="headerlink" title="ConcurrentHashMapå¸¸ç”¨æ–¹æ³•"></a><strong>ConcurrentHashMapå¸¸ç”¨æ–¹æ³•</strong></h1><h2 id="initTable-åˆå§‹åŒ–æ–¹æ³•"><a href="#initTable-åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="initTable åˆå§‹åŒ–æ–¹æ³•"></a><strong>initTable åˆå§‹åŒ–æ–¹æ³•</strong></h2><p>åˆå§‹åŒ–æ–¹æ³•æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåœ¨ConcurrentHashMapçš„æ„é€ æ–¹æ³•ä¸­åªæ˜¯ç®€å•çš„è¿›è¡Œäº†ä¸€äº›å‚æ•°æ ¡éªŒå’Œå‚æ•°è½¬æ¢çš„æ“ä½œã€‚æ•´ä¸ªMapçš„åˆå§‹åŒ–æ˜¯åœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™è§¦å‘çš„ã€‚è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„putæ–¹æ³•ä¸­ä¼šè¿›è¡Œè¯´æ˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå•çº¿ç¨‹æ“ä½œ</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K,V&gt;[] initTable() &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; <span class="keyword">int</span> sc;</span><br><span class="line">        <span class="keyword">while</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((sc = sizeCtl) &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="comment">//sizeCtl &lt; 0 è¡¨ç¤ºæœ‰çº¿ç¨‹æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚</span></span><br><span class="line">                Thread.yield(); <span class="comment">// lost initialization race; just spin</span></span><br><span class="line">                </span><br><span class="line">            <span class="comment">//è®¾ç½®SIZECTLçš„å€¼ä¸º-1ï¼Œé˜»å¡å…¶ä»–çº¿ç¨‹çš„æ“ä½œ</span></span><br><span class="line">            <span class="comment">//è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•°</span></span><br><span class="line">            <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦æ”¹å˜çš„å¯¹è±¡</span></span><br><span class="line">            <span class="comment">//ç¬¬äºŒä¸ªå‚æ•°ï¼šåç§»é‡</span></span><br><span class="line">            <span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæœŸå¾…çš„å€¼</span></span><br><span class="line">            <span class="comment">//ç¬¬å››ä¸ªå‚æ•°ï¼šæ›´æ–°åçš„å€¼</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, -<span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//å†æ¬¡æ£€æŸ¥æ˜¯å¦æœ‰çº¿ç¨‹è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">                    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> n = (sc &gt; <span class="number">0</span>) ? sc : DEFAULT_CAPACITY;</span><br><span class="line">                        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">                        <span class="comment">//åˆå§‹åŒ–Nodeå¯¹è±¡æ•°ç»„</span></span><br><span class="line">                        Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n];</span><br><span class="line">                        table = tab = nt;</span><br><span class="line">                        <span class="comment">//scçš„å€¼è®¾ç½®ä¸ºnçš„0.75å€</span></span><br><span class="line">                        sc = n - (n &gt;&gt;&gt; <span class="number">2</span>);  <span class="comment">//ç›¸å½“äºn*0.75</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    sizeCtl = sc;  <span class="comment">//æ›´æ”¹sizeCtlçš„å€¼</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">//ä¸­æ–­å¾ªåè¿”å›</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> tab; <span class="comment">//è¿”å›åˆå§‹åŒ–çš„å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å®¹æ–¹æ³•"><a href="#æ‰©å®¹æ–¹æ³•" class="headerlink" title="æ‰©å®¹æ–¹æ³•"></a><strong>æ‰©å®¹æ–¹æ³•</strong></h2><p>å½“ConcurrentHashMap å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œéœ€è¦å¯¹tableè¿›è¡Œæ‰©å®¹ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ”¯æŒå¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰©å®¹çš„ï¼Œæˆ‘ä»¬æ‰€è¯´çš„æ‰©å®¹ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ— éæ˜¯ä»ä¸€ä¸ªæ•°ç»„åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„çš„æ‹·è´ã€‚</p><p>æ‰©å®¹æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åˆ›å»ºæ‰©å®¹åçš„æ–°æ•°ç»„ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ä¸¤å€ ï¼Œæ–°æ•°ç»„çš„åˆ›å»ºæ—¶å•çº¿ç¨‹å®Œæˆ</li><li>å°†åŸæ¥çš„æ•°ç»„å…ƒç´ å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ˜¯å¤šçº¿ç¨‹æ“ä½œã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸®åŠ©æ‰©å®¹</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123;</span><br><span class="line">      Node&lt;K,V&gt;[] nextTab; <span class="keyword">int</span> sc;</span><br><span class="line">      <span class="keyword">if</span> (tab != <span class="keyword">null</span> &amp;&amp; (f <span class="keyword">instanceof</span> ForwardingNode) &amp;&amp;(nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> rs = resizeStamp(tab.length);</span><br><span class="line">            <span class="keyword">while</span> (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;(sc = sizeCtl) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + <span class="number">1</span> ||</span><br><span class="line">                    sc == rs + MAX_RESIZERS || transferIndex &lt;= <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, sc + <span class="number">1</span>)) &#123;</span><br><span class="line">                    transfer(tab, nextTab);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> nextTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> table;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//tab = table ,nextTab ä¸€ä¸ªNode&lt;Key,Value&gt;[]ç±»å‹çš„å˜é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//n æ˜¯tabçš„é•¿åº¦ ï¼Œ stride åˆå§‹å€¼ä¸º0 </span></span><br><span class="line">        <span class="keyword">int</span> n = tab.length, stride;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­cpuå¤„ç†å¤šçº¿ç¨‹çš„èƒ½åŠ›ï¼Œå¦‚æœå°äº16å°±ç›´æ¥èµ‹å€¼ä¸º16</span></span><br><span class="line">        <span class="keyword">if</span> ((stride = (NCPU &gt; <span class="number">1</span>) ? (n &gt;&gt;&gt; <span class="number">3</span>) / NCPU : n) &lt; MIN_TRANSFER_STRIDE)</span><br><span class="line">            stride = MIN_TRANSFER_STRIDE; <span class="comment">// subdivide range</span></span><br><span class="line">        <span class="keyword">if</span> (nextTab == <span class="keyword">null</span>) &#123;            <span class="comment">// initiating</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">                <span class="comment">//æ„é€ ä¸€ä¸ªå®¹é‡æ˜¯åŸæ¥ä¸¤å€çš„Node&lt;K ,V&gt; ç±»å‹æ•°ç»„</span></span><br><span class="line">                Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n &lt;&lt; <span class="number">1</span>];</span><br><span class="line">                nextTab = nt;  <span class="comment">//èµ‹å€¼</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ex) &#123;      <span class="comment">// try to cope with OOME</span></span><br><span class="line">                sizeCtl = Integer.MAX_VALUE;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            nextTable = nextTab;  <span class="comment">//èµ‹å€¼</span></span><br><span class="line">            transferIndex = n;    <span class="comment">//å°†æ•°ç»„é•¿åº¦èµ‹å€¼ç»™transferIndex</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> nextn = nextTab.length;  <span class="comment">//è·å–æ–°æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">        </span><br><span class="line">        ForwardingNode&lt;K,V&gt; fwd = <span class="keyword">new</span> ForwardingNode&lt;K,V&gt;(nextTab);  <span class="comment">//åˆ›å»ºfwdèŠ‚ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">boolean</span> advance = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">boolean</span> finishing = <span class="keyword">false</span>; <span class="comment">// to ensure sweep before committing nextTab</span></span><br><span class="line">        </span><br><span class="line">         <span class="comment">//ä½¿ç”¨forå¾ªç¯æ¥å¤„ç†æ¯ä¸ªæ§½ä½ä¸­çš„é“¾è¡¨å…ƒç´ ï¼ŒCASè®¾ç½®transferIndexå±æ€§å€¼ï¼Œå¹¶åˆå§‹åŒ–iå’Œboundå€¼</span></span><br><span class="line">         <span class="comment">// i æŒ‡å½“å‰çš„æ§½ä½åºå·ï¼Œboundå€¼éœ€è¦å¤„ç†çš„è¾¹ç•Œï¼Œå…ˆå¤„ç†æ§½ä½ä¸º15çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, bound = <span class="number">0</span>;;) &#123; </span><br><span class="line">            </span><br><span class="line">            <span class="comment">//åˆ›å»ºä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªä¸ºNode&lt;K,V&gt; ç±»å‹ï¼Œä¸€ä¸ªä¸ºintç±»å‹</span></span><br><span class="line">            Node&lt;K,V&gt; f; <span class="keyword">int</span> fh;</span><br><span class="line">            <span class="keyword">while</span> (advance) &#123;</span><br><span class="line">                <span class="keyword">int</span> nextIndex, nextBound;</span><br><span class="line">                <span class="keyword">if</span> (--i &gt;= bound || finishing)</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//å°†transferIndexçš„å€¼èµ‹å€¼ç»™ nextIndex ,å¹¶åˆ¤æ–­nextIndexçš„å€¼æ˜¯å¦å°äºç­‰äº0</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> ((nextIndex = transferIndex) &lt;= <span class="number">0</span>) &#123;   </span><br><span class="line">                    i = -<span class="number">1</span>;</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//æ›´æ–°nextIndexçš„å€¼</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt</span><br><span class="line">                         (<span class="keyword">this</span>, TRANSFERINDEX, nextIndex,</span><br><span class="line">                          nextBound = (nextIndex &gt; stride ? nextIndex - stride : <span class="number">0</span>))) &#123;</span><br><span class="line">                    bound = nextBound;</span><br><span class="line">                    i = nextIndex - <span class="number">1</span>;</span><br><span class="line">                    advance = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= n || i + n &gt;= nextn) &#123;</span><br><span class="line">                <span class="keyword">int</span> sc;</span><br><span class="line">                <span class="comment">//å¦‚æœtableå·²ç»å¤åˆ¶ç»“æŸ</span></span><br><span class="line">                <span class="keyword">if</span> (finishing) &#123;</span><br><span class="line">                    nextTable = <span class="keyword">null</span>;   <span class="comment">//æ¸…ç©ºnextTable</span></span><br><span class="line">                    table = nextTab;    <span class="comment">//æŠŠnextTab èµ‹å€¼ç»™ table </span></span><br><span class="line">                    sizeCtl = (n &lt;&lt; <span class="number">1</span>) - (n &gt;&gt;&gt; <span class="number">1</span>);  <span class="comment">//é˜ˆå€¼è®¾ç½®ä¸ºå®¹é‡çš„1.5å€</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc = sizeCtl, sc - <span class="number">1</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((sc - <span class="number">2</span>) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT)</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    finishing = advance = <span class="keyword">true</span>;</span><br><span class="line">                    i = n; <span class="comment">// recheck before commit</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//CASç®—æ³•è·å–æŸä¸ªæ•°ç»„èŠ‚ç‚¹ï¼Œä¸ºç©ºå°±è®¾ç½®ä¸ºfwd</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i)) == <span class="keyword">null</span>)</span><br><span class="line">                advance = casTabAt(tab, i, <span class="keyword">null</span>, fwd);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„hashä¸º-1ï¼Œè·³è¿‡</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">                advance = <span class="keyword">true</span>; <span class="comment">// already processed</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//å¯¹å¤´èŠ‚ç‚¹åŠ é”ï¼Œç¦æ­¢å…¶ä»–çº¿ç¨‹è¿›å…¥</span></span><br><span class="line">                <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                        </span><br><span class="line">                        <span class="comment">//æ„é€ ä¸¤ä¸ªé“¾è¡¨ ï¼Œå°†è¯¥èŠ‚ç‚¹çš„åˆ—è¡¨æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯åŸé“¾è¡¨çš„æ’åˆ—é¡ºåºï¼Œä¸€ä¸ªæ˜¯ååº</span></span><br><span class="line">                        Node&lt;K,V&gt; ln, hn;  </span><br><span class="line">                        <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;   <span class="comment">// fh å½“å‰èŠ‚ç‚¹çš„hashå€¼   è‹¥ &gt;= 0 </span></span><br><span class="line">                            <span class="keyword">int</span> runBit = fh &amp; n;</span><br><span class="line">                            Node&lt;K,V&gt; lastRun = f;    <span class="comment">//å°†å½“å‰èŠ‚ç‚¹èµ‹å€¼ç»™ lastRun  èŠ‚ç‚¹  </span></span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; p = f.next; p != <span class="keyword">null</span>; p = p.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> b = p.hash &amp; n;</span><br><span class="line">                                <span class="keyword">if</span> (b != runBit) &#123;</span><br><span class="line">                                    runBit = b;</span><br><span class="line">                                    lastRun = p;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (runBit == <span class="number">0</span>) &#123;</span><br><span class="line">                                ln = lastRun;</span><br><span class="line">                                hn = <span class="keyword">null</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                hn = lastRun;</span><br><span class="line">                                ln = <span class="keyword">null</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//å·®åˆ†åˆ—è¡¨æ“ä½œ</span></span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> ph = p.hash; K pk = p.key; V pv = p.val;</span><br><span class="line">                                <span class="keyword">if</span> ((ph &amp; n) == <span class="number">0</span>)</span><br><span class="line">                                    ln = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, ln);</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hn = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, hn);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//åœ¨nextTab çš„i ä½ç½®ä¸Šæ”¾ç½®lnèŠ‚ç‚¹</span></span><br><span class="line">                            setTabAt(nextTab, i, ln);</span><br><span class="line">                            <span class="comment">//åœ¨nextTab çš„ i+n ä½ç½®ä¸Šæ”¾ç½® hnèŠ‚ç‚¹</span></span><br><span class="line">                            setTabAt(nextTab, i + n, hn);</span><br><span class="line">                            <span class="comment">//åœ¨tabèŠ‚ç‚¹iä½ç½®ä¸Šæ’å…¥æ’å…¥forwardNodeèŠ‚ç‚¹ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»å¤„ç†</span></span><br><span class="line">                            setTabAt(tab, i, fwd);</span><br><span class="line">                            advance = <span class="keyword">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//å¯¹TreeBinå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè¿‡ç¨‹ä¸ä¸Šé¢æœ‰äº›ç±»ä¼¼ </span></span><br><span class="line">                        <span class="comment">//ä¹ŸæŠŠèŠ‚ç‚¹åˆ†ç±»ï¼Œåˆ†åˆ«æ’å…¥åˆ°loå’Œhiä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¸­</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                            TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f;</span><br><span class="line">                            TreeNode&lt;K,V&gt; lo = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                            TreeNode&lt;K,V&gt; hi = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                            <span class="keyword">int</span> lc = <span class="number">0</span>, hc = <span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span> (Node&lt;K,V&gt; e = t.first; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">                                <span class="keyword">int</span> h = e.hash;</span><br><span class="line">                                TreeNode&lt;K,V&gt; p = <span class="keyword">new</span> TreeNode&lt;K,V&gt;</span><br><span class="line">                                    (h, e.key, e.val, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">if</span> ((h &amp; n) == <span class="number">0</span>) &#123;</span><br><span class="line">                                    <span class="keyword">if</span> ((p.prev = loTail) == <span class="keyword">null</span>)</span><br><span class="line">                                        lo = p;</span><br><span class="line">                                    <span class="keyword">else</span></span><br><span class="line">                                        loTail.next = p;</span><br><span class="line">                                    loTail = p;</span><br><span class="line">                                    ++lc;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">else</span> &#123;</span><br><span class="line">                                    <span class="keyword">if</span> ((p.prev = hiTail) == <span class="keyword">null</span>)</span><br><span class="line">                                        hi = p;</span><br><span class="line">                                    <span class="keyword">else</span></span><br><span class="line">                                        hiTail.next = p;</span><br><span class="line">                                    hiTail = p;</span><br><span class="line">                                    ++hc;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//å¦‚æœæ‰©å®¹å ä¸åœ¨éœ€è¦treeç»“æ„ï¼Œåå‘è½¬æ¢æˆé“¾è¡¨ç»“æ„</span></span><br><span class="line">                            ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) :</span><br><span class="line">                                (hc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(lo) : t;</span><br><span class="line">                            hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) :</span><br><span class="line">                                (lc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(hi) : t;</span><br><span class="line">                            setTabAt(nextTab, i, ln);</span><br><span class="line">                            setTabAt(nextTab, i + n, hn);</span><br><span class="line">                            setTabAt(tab, i, fwd);</span><br><span class="line">                            advance = <span class="keyword">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="putæ–¹æ³•"><a href="#putæ–¹æ³•" class="headerlink" title="putæ–¹æ³•"></a><strong>putæ–¹æ³•</strong></h2><p>putæ“ä½œæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€ä¸‹put()æ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p><ul><li>put()è¦æ±‚é”®å€¼éƒ½ä¸èƒ½ä¸ºç©º</li><li>éœ€è¦ç»è¿‡ä¸¤æ¬¡æ•£åˆ—ï¼Œ æ˜¯æ•°æ®å‡åŒ€åˆ†æ•£ï¼Œå‡å°‘ç¢°æ’çš„æ¬¡æ•°</li><li>åˆ¤æ–­tabæ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆ™è°ƒç”¨initTableè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼ˆå•çº¿ç¨‹ï¼‰</li><li>æ•°ç»„içš„ä½ç½®æ²¡æœ‰å…ƒç´ å­˜åœ¨ï¼Œç›´æ¥æ”¾å…¥</li><li>å¦‚æœiçš„ä½ç½®åœ¨è¿›è¡ŒMOVEæ“ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåˆ™å¤šçº¿ç¨‹å¸®åŠ©æ‰©å®¹</li><li>å¦‚æœiçš„ä½ç½®æœ‰å…ƒç´ å­˜åœ¨ï¼Œåˆ™åœ¨è¯¥èŠ‚ç‚¹åŠ é”Synchronizedï¼Œåˆ¤æ–­æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘ï¼ŒæŒ‰ç…§ç›¸åº”çš„æ’å…¥è§„åˆ™æ’å…¥</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(K key, V value, <span class="keyword">boolean</span> onlyIfAbsent)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//key|value == null  æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="comment">//ConcurrentHashMapä¸å…è®¸é”®æˆ–è€…å€¼ä¸ºnullçš„è¿™ç§æƒ…å†µå‘ç”Ÿ</span></span><br><span class="line">    <span class="comment">//è¿™ä¸€ç‚¹å’ŒHashMapæœ‰åŒºåˆ«</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span> || value == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ•£åˆ—åœ¨æ•£åˆ—ï¼Œ è®©æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘ç¢°æ’æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> hash = spread(key.hashCode());     --&gt;<span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">spread</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;<span class="keyword">return</span> (h ^ (h &gt;&gt;&gt; <span class="number">16</span>)) &amp; HASH_BITS;&#125;   </span><br><span class="line">    <span class="keyword">int</span> binCount = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ­»å¾ªç¯   ç›¸å½“äºwhile(true) ,å°†tableèµ‹å€¼ç»™ tab </span></span><br><span class="line">    <span class="keyword">for</span> (Node&lt;K,V&gt;[] tab = table;;) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªNodeç±»å‹çš„å˜é‡f , int ç±»å‹çš„å˜é‡ n i fh </span></span><br><span class="line">        Node&lt;K,V&gt; f; <span class="keyword">int</span> n, i, fh;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ¤æ–­tabæ˜¯å¦ä¸ºnull  ,æ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œåˆå§‹åŒ–ï¼Œæ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            tab = initTable();</span><br><span class="line">            <span class="comment">//tabAt è·å–å€¼</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i = (n - <span class="number">1</span>) &amp; hash)) == <span class="keyword">null</span>) &#123;</span><br><span class="line">        </span><br><span class="line">            <span class="comment">//æ·»åŠ åˆ°tableä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (casTabAt(tab, i, <span class="keyword">null</span>,</span><br><span class="line">                         <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key, value, <span class="keyword">null</span>)))</span><br><span class="line">                <span class="keyword">break</span>;    <span class="comment">//é€€å‡ºå¾ªç¯               // no lock when adding to empty bin</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//nodeçš„hashå€¼ä¸º -1 </span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">            tab = helpTransfer(tab, f);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            V oldVal = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        binCount = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; e = f;; ++binCount) &#123;</span><br><span class="line">                            K ek;</span><br><span class="line">                            </span><br><span class="line">                            <span class="comment">//key ç›¸ç­‰ï¼Œä½¿ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼</span></span><br><span class="line">                            <span class="keyword">if</span> (e.hash == hash &amp;&amp;((ek = e.key) == key ||(ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                                oldVal = e.val;</span><br><span class="line">                                <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                    e.val = value;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            Node&lt;K,V&gt; pred = e;</span><br><span class="line">                            <span class="comment">//æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨</span></span><br><span class="line">                            <span class="keyword">if</span> ((e = e.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                                pred.next = <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key,value, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;   </span><br><span class="line">                    <span class="comment">//çº¢é»‘æ ‘æ›¿æ¢</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                        Node&lt;K,V&gt; p;</span><br><span class="line">                        binCount = <span class="number">2</span>;</span><br><span class="line">                        <span class="keyword">if</span> ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,value)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            oldVal = p.val;</span><br><span class="line">                            <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                p.val = value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (binCount != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD)</span><br><span class="line">                    treeifyBin(tab, i);</span><br><span class="line">                <span class="keyword">if</span> (oldVal != <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> oldVal;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addCount(<span class="number">1L</span>, binCount);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Getæ–¹æ³•"><a href="#Getæ–¹æ³•" class="headerlink" title="Getæ–¹æ³•"></a><strong>Getæ–¹æ³•</strong></h2><p>Getæ–¹æ³•ä¹Ÿæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼Œå…ƒç´ æ”¾å…¥äº†ï¼Œæ€»è¦å–å‡ºæ¥</p><ul><li>æ ¹æ®ä¼ å…¥çš„key,è·å–ç›¸åº”çš„hashå€¼</li><li>ç„¶ååˆ¤æ–­å½“å‰çš„tableæ•°ç»„æ˜¯å¦ä¸ºç©º</li><li>è®¡ç®—æŒ‡å®šçš„keyåœ¨tableä¸­å­˜å‚¨çš„ä½ç½®</li><li>é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘è½¬æ¢ç›¸ä¾çš„æ–¹æ³•å¤„ç†</li><li>ä¸å­˜åœ¨åˆ™è¿”å›null</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; <span class="keyword">int</span> n, eh; K ek;</span><br><span class="line">    <span class="keyword">int</span> h = spread(key.hashCode());</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (e = tabAt(tab, (n - <span class="number">1</span>) &amp; h)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((eh = e.hash) == h) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((ek = e.key) == key || (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))</span><br><span class="line">                <span class="keyword">return</span> e.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//eh&lt; 0 è¡¨ç¤ºçº¢é»‘æ ‘èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (eh &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> (p = e.find(h, key)) != <span class="keyword">null</span> ? p.val : <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//é“¾è¡¨éå†</span></span><br><span class="line">        <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (e.hash == h &amp;&amp;</span><br><span class="line">                ((ek = e.key) == key || (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek))))</span><br><span class="line">                <span class="keyword">return</span> e.val; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>JDK6ï¼Œ7ä¸­çš„ConcurrentHashmapä¸»è¦ä½¿ç”¨Segmentæ¥å®ç°å‡å°é”ç²’åº¦ï¼ŒæŠŠHashMapåˆ†å‰²æˆè‹¥å¹²ä¸ªSegmentï¼Œåœ¨putçš„æ—¶å€™éœ€è¦é”ä½Segmentï¼Œgetæ—¶å€™ä¸åŠ é”ï¼Œä½¿ç”¨volatileæ¥ä¿è¯å¯è§æ€§ï¼Œå½“è¦ç»Ÿè®¡å…¨å±€æ—¶ï¼ˆæ¯”å¦‚sizeï¼‰ï¼Œé¦–å…ˆä¼šå°è¯•å¤šæ¬¡è®¡ç®—modcountæ¥ç¡®å®šï¼Œè¿™å‡ æ¬¡å°è¯•ä¸­ï¼Œæ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥è¿”å›sizeã€‚å¦‚æœæœ‰ï¼Œåˆ™éœ€è¦ä¾æ¬¡é”ä½æ‰€æœ‰çš„Segmentæ¥è®¡ç®—ã€‚</p><p>jdk7ä¸­ConcurrentHashmapä¸­ï¼Œå½“é•¿åº¦è¿‡é•¿ï¼Œç¢°æ’ä¼šå¾ˆé¢‘ç¹ï¼Œé“¾è¡¨çš„å¢æ”¹åˆ æŸ¥æ“ä½œéƒ½ä¼šæ¶ˆè€—å¾ˆé•¿çš„æ—¶é—´ï¼Œå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥jdk8 ä¸­å®Œå…¨é‡å†™äº†concurrentHashmap,ä»£ç é‡ä»åŸæ¥çš„1000å¤šè¡Œå˜æˆäº† 6000å¤š è¡Œï¼Œå®ç°ä¸Šä¹Ÿå’ŒåŸæ¥çš„åˆ†æ®µå¼å­˜å‚¨æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>ä¸»è¦è®¾è®¡ä¸Šçš„å˜åŒ–æœ‰ä»¥ä¸‹å‡ ç‚¹:</p><ol><li>ä¸é‡‡ç”¨segmentè€Œé‡‡ç”¨nodeï¼Œé”ä½nodeæ¥å®ç°å‡å°é”ç²’åº¦ã€‚</li><li>è®¾è®¡äº†MOVEDçŠ¶æ€ å½“resizeçš„ä¸­è¿‡ç¨‹ä¸­ çº¿ç¨‹2è¿˜åœ¨putæ•°æ®ï¼Œçº¿ç¨‹2ä¼šå¸®åŠ©resizeã€‚</li><li>ä½¿ç”¨3ä¸ªCASæ“ä½œæ¥ç¡®ä¿nodeçš„ä¸€äº›æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ç§æ–¹å¼ä»£æ›¿äº†é”ã€‚</li><li>sizeCtlçš„ä¸åŒå€¼æ¥ä»£è¡¨ä¸åŒå«ä¹‰ï¼Œèµ·åˆ°äº†æ§åˆ¶çš„ä½œç”¨ã€‚</li></ol><p>å‚è€ƒï¼š</p><p><a href="https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fu010723709%2Farticle%2Fdetails%2F48007881" target="_blank" rel="noopener">http://blog.csdn.net/u010723709/article/details/48007881</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Analyst of SourceCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Everything About HashSet</title>
      <link href="/2020/03/21/Everything-About-HashSet/"/>
      <url>/2020/03/21/Everything-About-HashSet/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>æ–‡ç« çš„å†…å®¹åŸºäºJDK1.7è¿›è¡Œåˆ†æï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢åŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äº1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜ã€‚</p><p>HashSetæ˜¯Setæ¥å£çš„å…¸å‹å®ç°ï¼ŒHashSetæŒ‰ç…§Hashç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ã€‚å­˜åœ¨ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ä¸èƒ½ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œå…ƒç´ æ˜¯æ— åºçš„</li><li>HashSetä¸æ˜¯åŒæ­¥çš„ï¼Œéœ€è¦å¤–éƒ¨ä¿æŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜</li><li>é›†åˆå…ƒç´ å€¼å…è®¸ä¸ºnull</li></ul><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object </span><br><span class="line">    java.util.AbstractCollection&lt;E&gt; </span><br><span class="line">        java.util.AbstractSet&lt;E&gt; </span><br><span class="line">            java.util.HashSet&lt;E&gt;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializable, Cloneable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Set&lt;E&gt;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;  <span class="comment">//mapé›†åˆï¼ŒHashSetå­˜æ”¾å…ƒç´ çš„å®¹å™¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object(); <span class="comment">//mapï¼Œä¸­é”®å¯¹åº”çš„valueå€¼</span></span><br></pre></td></tr></table></figure><h1 id="é‡è¦æ–¹æ³•æ·±åº¦è§£æ"><a href="#é‡è¦æ–¹æ³•æ·±åº¦è§£æ" class="headerlink" title="é‡è¦æ–¹æ³•æ·±åº¦è§£æ"></a>é‡è¦æ–¹æ³•æ·±åº¦è§£æ</h1><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ— å‚æ„é€ æ–¹æ³•ï¼Œå®Œæˆmapçš„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šé›†åˆè½¬åŒ–ä¸ºHashSet, å®Œæˆmapçš„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">   map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">   addAll(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œå’Œè´Ÿè½½å› å­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­ï¼Œdummy æ— å®é™…æ„ä¹‰</span></span><br><span class="line">HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ„é€ å‡½æ•°ï¼Œä¸éš¾å‘ç°ï¼ŒHashSetçš„åº•å±‚æ˜¯é‡‡ç”¨HashMapå®ç°çš„ã€‚</p><h2 id="Add-æ–¹æ³•"><a href="#Add-æ–¹æ³•" class="headerlink" title="Add()æ–¹æ³•"></a>Add()æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PRESENTä¸ºHashSetç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªä½¿ç”¨static final ä¿®é¥°çš„å¸¸é‡ï¼Œå¹¶æ— å®é™…çš„æ„ä¹‰ï¼ŒHashSetçš„addæ–¹æ³•è°ƒç”¨HashMapçš„put()æ–¹æ³•å®ç°ï¼Œå¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œmap.put()æ”¾å›çš„æ˜¯æ—§å€¼ï¼Œæ·»åŠ å¤±è´¥ï¼Œå¦‚æœæ·»åŠ æˆåŠŸmap.put()æ–¹æ³•è¿”å›çš„æ˜¯null ,HashSet.add()æ–¹æ³•è¿”å›true,è¦æ·»åŠ çš„å…ƒç´ å¯ä½œä¸ºmapä¸­çš„key ã€‚</p><h2 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ–¹æ³•ï¼Œè°ƒç”¨map.remove()æ–¹æ³•å®ç°ï¼Œmap.remove()èƒ½æ‰¾åˆ°æŒ‡å®šçš„key,åˆ™è¿”å›keyå¯¹åº”çš„value,å¯¹äºHashsetè€Œè¨€ï¼Œå®ƒæ‰€æœ‰çš„keyå¯¹åº”çš„å€¼éƒ½æ˜¯PRESENTã€‚</p><h1 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">5024744406713321676L</span>; <span class="comment">//åºåˆ—åŒ–ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;  <span class="comment">//HashMapå˜é‡ï¼Œç”¨äºå­˜æ”¾HashSetçš„å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object(); <span class="comment">//mapä¸­çš„å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œå°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºHashSet</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">        addAll(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šåˆå§‹åŒ–çš„å¤§å°å’Œè´Ÿè½½å› å­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œé‡‡ç”¨defaultä¿®é¥°ï¼Œåªèƒ½æ˜¯åŒä¸€ä¸ªåŒ…ä¸‹çš„æˆå‘˜è®¿é—®ã€‚åŒ…ä¸ç›¸åŒæ— æ³•è®¿é—®</span></span><br><span class="line">    HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">        map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//HashSetçš„éå†æ“ä½œ</span></span><br><span class="line">    <span class="comment">//é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥å‘ç°ï¼ŒHashSetè°ƒç”¨äº†HashMapå­˜æ”¾ï¼Œå› ä¸ºHashSetå¹¶ä¸æ˜¯é”®å€¼å¯¹å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒåªæ˜¯æŠŠå®ƒçš„å€¼åšäº†Mapä¸­çš„é”®ï¼Œåœ¨éå†HashSetçš„é›†åˆå…ƒç´ æ—¶ï¼Œå®é™…ä¸Šæ˜¯éå†çš„Mapä¸­Keyçš„é›†åˆã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›é›†åˆä¸­å…ƒç´ çš„å®¹é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.containsKey(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ çš„å…ƒç´ ä½œä¸ºäº†Mapä¸­çš„key,valueä½¿ç”¨äº†ä¸€ä¸ªå¸¸é‡è¡¨ç¤º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºé›†åˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map.clear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…‹éš†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            HashSet&lt;E&gt; newSet = (HashSet&lt;E&gt;) <span class="keyword">super</span>.clone();</span><br><span class="line">            newSet.map = (HashMap&lt;E, Object&gt;) map.clone();</span><br><span class="line">            <span class="keyword">return</span> newSet;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å†™å…¥è¾“å‡ºæµæ“ä½œã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException </span>&#123;</span><br><span class="line">        <span class="comment">// Write out any hidden serialization magic</span></span><br><span class="line">        s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out HashMap capacity and load factor</span></span><br><span class="line">        s.writeInt(map.capacity());</span><br><span class="line">        s.writeFloat(map.loadFactor());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out size</span></span><br><span class="line">        s.writeInt(map.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (E e : map.keySet())</span><br><span class="line">            s.writeObject(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»è¾“å…¥æµä¸­è¯»å–å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// Read in any hidden serialization magic</span></span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in HashMap capacity and load factor and create backing HashMap</span></span><br><span class="line">        <span class="keyword">int</span> capacity = s.readInt();</span><br><span class="line">        <span class="keyword">float</span> loadFactor = s.readFloat();</span><br><span class="line">        map = (((HashSet)<span class="keyword">this</span>) <span class="keyword">instanceof</span> LinkedHashSet ?</span><br><span class="line">               <span class="keyword">new</span> LinkedHashMap&lt;E,Object&gt;(capacity, loadFactor) :</span><br><span class="line">               <span class="keyword">new</span> HashMap&lt;E,Object&gt;(capacity, loadFactor));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in size</span></span><br><span class="line">        <span class="keyword">int</span> size = s.readInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            E e = (E) s.readObject();</span><br><span class="line">            map.put(e, PRESENT);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li>HashSetçš„åº•å±‚é€šè¿‡HashMapå®ç°çš„ã€‚è€ŒHashMapåœ¨1.7ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨å®ç°ï¼Œåœ¨1.8+ä½¿ç”¨çš„æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ã€‚å…¶å®ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼ŒHashSetçš„åº•å±‚å®ç°å’ŒHashMapä½¿ç”¨çš„æ˜¯ç›¸åŒçš„æ–¹å¼ï¼Œå› ä¸ºMapæ˜¯æ— åºçš„ï¼Œå› æ­¤HashSetä¹Ÿæ— æ³•ä¿è¯é¡ºåºã€‚</li><li>HashSetçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å€ŸåŠ©HashMapçš„æ–¹æ³•æ¥å®ç°çš„ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Analyst of SourceCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019-2In TaiwanTech</title>
      <link href="/2020/02/17/2019-2In-TaiwanTech/"/>
      <url>/2020/02/17/2019-2In-TaiwanTech/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®"><a href="#å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®" class="headerlink" title="å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®"></a>å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–®</h2><p><img src="https://i.loli.net/2020/02/17/M5U9XmiwQfFJ3bZ.png" alt="1082.png"></p><p>å¾Œé¢å†è£œå…§å®¹ï¼Œå·²ç¶“éŒ¯éå¯¦ç¿’å’Œç§‹æ‹›äº†ã€‚ç¾åœ¨æŠ“ç·Šæææ˜¥æ‹›ã€‚</p><blockquote><p>å­¸æ ¡çš„èª²å¯¦åœ¨å¤ªå¤šï¼Œ30å­¸åˆ†å¿™8éä¾†</p></blockquote><p>å›å®¶ä»¥åå‘ç°é’™hubä¹Ÿæ‰“ä¸å¼€äº†â€¦..é™¤äº†ç§‘å­¦ä¸Šç½‘çš„è§£å†³æ–¹æ³•ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯<a href="https://blog.csdn.net/ustccw/article/details/84543284" target="_blank" rel="noopener">è®¾ç½®é™æ€IPåœ°å€</a></p><p>å›¾åºŠä¹ŸåŠ è½½ä¸å‡ºæ¥äº†ï¼Œè¿™é‡Œæ¨è<a href="https://sm.ms/" target="_blank" rel="noopener">SM SMçš„å›¾åºŠæœåŠ¡</a></p><h2 id="æ–°å¹´æ–°FLAG"><a href="#æ–°å¹´æ–°FLAG" class="headerlink" title="æ–°å¹´æ–°FLAG"></a>æ–°å¹´æ–°FLAG</h2><h3 id="ä¸“ä¸šæŠ€æœ¯"><a href="#ä¸“ä¸šæŠ€æœ¯" class="headerlink" title="ä¸“ä¸šæŠ€æœ¯"></a>ä¸“ä¸šæŠ€æœ¯</h3><ul><li>æŒ‰ç…§zuochengyunå¤§å“¥çš„å»ºè®®è¯»JDKé‡è¦åŒ…çš„æºä»£ç ,<br><code>java.lang</code>,<code>java.util</code>.<code>java.io</code></li><li><p>Springæºç ,</p></li><li><p>å­¦ä¹ åˆ†å¸ƒå¼ç¼“å­˜æŠ€æœ¯.</p></li><li><p>PASS THE FRM Certification RANK1</p></li></ul><h3 id="è¯­è¨€æ°´å¹³"><a href="#è¯­è¨€æ°´å¹³" class="headerlink" title="è¯­è¨€æ°´å¹³"></a>è¯­è¨€æ°´å¹³</h3><ul><li>æ—¥è¯­è¾¾åˆ°N3æ°´å¹³</li></ul><p><a href="https://www.zhihu.com/question/59051017/answer/161476178" target="_blank" rel="noopener">å¦‚ä½•è‡ªå­¦å¤‡è€ƒæ—¥è¯­N3ï¼Ÿ</a></p><ul><li>TOEFLç ´ç™¾</li></ul><h3 id="ğŸ“šä¹¦å•"><a href="#ğŸ“šä¹¦å•" class="headerlink" title="ğŸ“šä¹¦å•"></a>ğŸ“šä¹¦å•</h3><ul><li><p>Thinking In Java</p><p>Bruce Eckel çš„ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ï¼ˆThinking in Javaï¼‰ï¼Œéå¸¸æœ‰åçš„ç»å…¸ä¹¦ç±ã€‚è¿™æœ¬ä¹¦çš„ç‰¹ç‚¹æ˜¯ï¼Œä¸ä»…ä»…ä»‹ç» Java ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œä¹Ÿä¼šæ€è€ƒç¼–ç¨‹ä¸­çš„å„ç§é€‰æ‹©ä¸åˆ¤æ–­ï¼ŒåŒ…æ‹¬ç©¿æ’è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ï¼Œä½œè€…ä»ç†è®ºåˆ°å®è·µæ„ä¹‰ä»ä¸åŒçš„è§’åº¦è¿›è¡Œæ¢è®¨ï¼Œæ„å»ºç¨³å›ºçš„ Java ç¼–ç¨‹çŸ¥è¯†ä½“ç³»ã€‚</p><p><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1849198902,3579180612&amp;fm=26&amp;gp=0.jpg" alt="img" style="zoom:33%;"></p></li><li><p>Effective Java</p><p>è¿™æœ¬ä¹¦çš„è‹±æ–‡ç¬¬ä¸‰ç‰ˆå·²ç»åœ¨å›½å†…ä¸Šå¸‚ï¼Œæ¶µç›–äº† Java 7 åˆ° Java 9 çš„å„ç§æ–°ç‰¹æ€§ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æœ¬ä¹¦ä¸ç®—æ˜¯ä¸€æœ¬åŸºç¡€ä¹¦ç±ï¼Œä½†å½“ä½ æœ‰ä¸€å®šåŸºç¡€åï¼Œè¿˜æ˜¯éå¸¸å»ºè®®é€šè¯»ä¸€ä¸‹çš„ã€‚å…³äºè¿™æœ¬ä¹¦çš„é˜…è¯»ï¼Œæˆ‘çš„å»ºè®®æ˜¯è¾¹å­¦ä¹ è¾¹å›é¡¾ï¼Œåœ¨å¸æ”¶ä¹¦ä¸­çš„ç»éªŒæ—¶ï¼Œå¤šå»æƒ³æƒ³è‡ªå·±åœ¨å®é™…åº”ç”¨ä¸­æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚è™½ç„¶ã€ŠEffective Javaã€‹çš„å…·ä½“ç« èŠ‚å¯èƒ½æ˜¯ä»æŸä¸ªç‚¹å‡ºå‘ï¼Œä½†å¯ä»¥è¯´éƒ½æ˜¯å¯¹ Javaã€JVMã€é¢å‘å¯¹è±¡ç­‰å„ç§çŸ¥è¯†çš„ç»¼åˆè¿ç”¨ï¼Œå¯¹äºè®¾è®¡å’Œå®ç°é«˜è´¨é‡çš„ä»£ç å¾ˆæœ‰å¸®åŠ©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/06/bf6e3f87d162595ddaa5d0786c0ed806.jpg" alt="img"></p></li><li><p>Java å¹¶å‘ç¼–ç¨‹å®æˆ˜</p><p>ä½œè€…å…¨æ˜¯å“å½“å½“çš„äººç‰©ï¼Œæ¯”å¦‚ Brian Goetzï¼Œæˆ‘å¤šæ¬¡åœ¨ä¸“æ é‡Œå¼•ç”¨ä»–çš„è§‚ç‚¹ï¼Œä¼—å¤šå¼ºåŠ›ä½œè€…ä¹Ÿä¿è¯äº†ä¹¦çš„è´¨é‡ã€‚æŠ›å¼€ä½œè€…å…‰ç¯ï¼Œè¿™æœ¬ä¹¦çš„å†…å®¹å…¨éƒ¨å»ºç«‹åœ¨ç†è®ºä¹‹ä¸Šï¼Œå…ˆè®²æ¸…é“ç†å†è°ˆå®è·µï¼Œå¯ä»¥çœŸæ­£è®©ä½ çŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚è¿™æœ¬ä¹¦æ›´åŠ ä¾§é‡å¹¶å‘ç¼–ç¨‹ä¸­æœ‰å“ªäº›é—®é¢˜ï¼Œå¦‚ä½•æ¥æ·±åˆ»åœ°ç†è§£å’Œå®šä¹‰é—®é¢˜ï¼Œå¦‚ä½•åˆ©ç”¨å¯é çš„æ‰‹æ®µæŒ‡å¯¼å·¥ç¨‹å®è·µï¼Œå¹¶æ²¡æœ‰è¿‡åˆ†çº ç»“äºå¹¶å‘ç±»åº“çš„æºç å±‚é¢ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/04/3f/0432ac1e431256fb894144aa2e66b03f.jpg" alt="img"></p></li><li><p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº</p><p><img src="https://static001.geekbang.org/resource/image/98/5f/98d02b66e1d3fdf8cc1f7f7c6f974b5f.jpg" alt="img"></p></li><li><p>æ€§èƒ½ä¼˜åŒ–</p><p>æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘æ¨è Charlie Hunt å’Œ Binu John æ‰€è‘—çš„ã€ŠJava æ€§èƒ½ä¼˜åŒ–æƒå¨æŒ‡å—ã€‹ï¼ˆJava Performanceï¼‰ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šæ¬¡åœ¨ç›´æ’­æ—¶å‘å¤§å®¶æ¨èçš„ã€‚Java ä¹‹çˆ¶ James Goslingã€‚</p><p><img src="https://static001.geekbang.org/resource/image/c9/10/c9fae97c8a4954cb91b59dc7e59ab710.jpg" alt="img"></p></li><li><p>Springå®æˆ˜</p><p>å¯ä»¥è¯´ Spring ç­‰ç›¸å…³æ¡†æ¶å·²ç»æˆä¸ºä¸šåŠ¡å¼€å‘çš„äº‹å®æ ‡å‡†ï¼Œç³»ç»Ÿæ€§åœ°æŒæ¡ Spring æ¡†æ¶çš„è®¾è®¡å’Œå®è·µï¼Œæ˜¯å¿…éœ€çš„æŠ€èƒ½ä¹‹ä¸€ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/75/61/7559562971dc2eadd8fd03f02980a461.jpg" alt="img"></p></li><li><p>Nettyå®æˆ˜</p><p>Netty åœ¨æ€§èƒ½ã€å¯æ‰©å±•æ€§ç­‰æ–¹é¢çš„çªå‡ºè¡¨ç°ï¼Œå·²ç»å¾—åˆ°å……åˆ†éªŒè¯ï¼Œä½œä¸ºåŸºç¡€çš„é€šä¿¡æ¡†æ¶ï¼Œå·²ç»å¹¿æ³›åº”ç”¨åœ¨å„ç§äº’è”ç½‘æ¶æ„ã€æ¸¸æˆç­‰é¢†åŸŸï¼Œç”šè‡³å¯ä»¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä»”ç»†åˆ†æè¿‡ Nettyï¼Œå¯¹ NIO ç­‰æ–¹é¢çš„ç†è§£å¾ˆå¯èƒ½è¿˜åœ¨å¾ˆè‚¤æµ…çš„é˜¶æ®µã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f8/d9/f8b11bdcb1559e472b77e23fcf184dd9.jpg" alt="img"></p></li><li><p>Cloud Native Java</p><p>Java åº”ç”¨ç¨‹åºæ¶æ„å¤„äºé£å¿«çš„æ¼”è¿›ä¹‹ä¸­ï¼Œå¾®æœåŠ¡ç­‰æ–°çš„æ¶æ„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œå³ä½¿æœªå¿…æ˜¯ä½¿ç”¨ Spring Bootã€Spring Cloud ç­‰æ¡†æ¶ï¼Œä½†æ˜¯ç³»ç»Ÿçš„å­¦ä¹ å…¶è®¾è®¡æ€æƒ³å’Œå®è·µæŠ€æœ¯ï¼Œç»å¯¹æ˜¯æœ‰å¿…è¦çš„ã€‚å½“ç„¶å¦‚æœä½ åœ¨å®è·µä¸­ä½¿ç”¨ Dubbo ç­‰æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç›¸å…³ä¹¦ç±ã€‚å‰æ²¿é¢†åŸŸçš„å˜åŒ–éå¸¸å¿«ï¼Œå¾ˆå¤šé£é¡ä¸€æ—¶çš„å¼€æºè½¯ä»¶ï¼Œåœ¨å®è·µä¸­é€æ¸è¢«è¯æ˜å­˜åœ¨å„ç§å¼Šç«¯ï¼Œæˆ–è€…å‚å•†åœæ­¢ç»´æŠ¤ã€‚æ‰€ä»¥è¿™éƒ¨åˆ†çš„å­¦ä¹ ï¼Œæˆ‘å»ºè®®ä¸è¦ç›²ç›®è¿½æ–°ï¼Œæœ€å¥½æ˜¯å…³æ³¨äºåˆ†å¸ƒå¼è®¾è®¡ä¸­çš„é—®é¢˜å’Œè§£å†³çš„æ€è·¯ï¼Œåšåˆ°è§¦ç±»æ—é€šï¼Œå¹¶ä¸”æ³¨é‡ä¹¦ç±ä¹‹å¤–çš„å­¦ä¹ æ¸ é“ã€‚ä¸‹é¢ä¸¤æœ¬å¹¶ä¸ç®—æ˜¯ Java ä¹¦ç±ï¼Œä½† Java ç¨‹åºå‘˜è¿›é˜¶å°‘ä¸äº†å¯¹äº’è”ç½‘ä¸»æµæ¶æ„çš„å­¦ä¹ ï¼Œäº†è§£åˆ†å¸ƒå¼æ¶æ„ã€ç¼“å­˜ã€æ¶ˆæ¯ä¸­é—´ä»¶ç­‰ä»¤äººçœ¼èŠ±ç¼­ä¹±çš„æŠ€æœ¯ï¼Œå¯¹äºæœ‰å¿—äºæˆä¸ºæ¶æ„å¸ˆçš„ Java å·¥ç¨‹å¸ˆæ¥è¯´éå¸¸æœ‰å¸®åŠ©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/d2/12/d286554382cbba791f85e667ea124e12.jpg" alt="img"></p></li><li><p>å¤§å‹åˆ†å¸ƒå¼ç½‘ç«™æ¶æ„è®¾è®¡ä¸å®è·µ</p><p>è¿™æœ¬ä¹¦æ€»ç»“äº†ä½œè€…åœ¨æ„å»ºå®‰å…¨ã€å¯ç¨³å®šæ€§ã€é«˜æ‰©å±•æ€§ã€é«˜å¹¶å‘çš„åˆ†å¸ƒå¼ç½‘ç«™æ–¹é¢çš„å¿ƒå¾—ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/4a/4f/4ab17456a34278a8ca18de54fea76f4f.jpg" alt="img"></p></li><li><p>æ·±å…¥åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»åŸç†åˆ°å®æˆ˜</p><p>è¿™æœ¬ä¹¦èåˆäº†åŸç†ã€æ¶æ„å’Œä¸€çº¿äº’è”ç½‘å…¬å¸çš„æ¡ˆä¾‹å®è·µï¼Œå€¼å¾—å‚è€ƒã€‚</p><p><img src="https://static001.geekbang.org/resource/image/3d/b8/3d70890354f556d1b3acbc2f2fdd99b8.jpg" alt="img"></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> TaiwanTech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Garbage Collection In JVM</title>
      <link href="/2020/02/15/Garbage-Collection-In-JVM/"/>
      <url>/2020/02/15/Garbage-Collection-In-JVM/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM</h1><p><img src="https://i.loli.net/2020/02/29/HvzDCcBqPuLmiOR.jpg" alt="FULLGC.jpg"></p><p><img src="https://i.loli.net/2020/02/26/rY2Q6bXhUDLNSkR.png" alt="JVM.png"></p><h4 id="ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š"><a href="#ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š" class="headerlink" title="ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š"></a>ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š</h4><ul><li>æ ˆï¼šå‡½æ•°å½“å‰è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›å‡½æ•°å˜é‡ã€‚å­˜å¯¹è±¡çš„å¼•ç”¨ç±»å‹å’Œåœ°å€</li><li>æœ¬åœ°æ–¹æ³•æ ˆï¼šå­˜æ”¾C++è¿è¡Œæ—¶çš„nativeæ ˆã€‚</li><li>ç¨‹åºè®¡æ•°å™¨ï¼šæŒ‡å‘å½“å‰ç¨‹åºè¿è¡Œçš„ä½ç½®ã€‚<h4 id="çº¿ç¨‹å…±äº«åŒºåŸŸï¼š"><a href="#çº¿ç¨‹å…±äº«åŒºåŸŸï¼š" class="headerlink" title="çº¿ç¨‹å…±äº«åŒºåŸŸï¼š"></a>çº¿ç¨‹å…±äº«åŒºåŸŸï¼š</h4></li><li>å †ï¼šå­˜å¯¹è±¡(æœ€ç»ˆ)ï¼Œè€å¹´ä»£ã€‚</li><li>æ–¹æ³•åŒºï¼šå­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ï¼Œåœ¨JDK1.7å‰ä½œæ°¸ä¹…ä»£ï¼Œ1.8ä»¥åæ”¹ä¸ºå…ƒæ•°æ®ç©ºé—´ï¼Œå­˜å‚¨é™æ€å˜é‡å’Œå¸¸é‡ã€ç±»åŠ è½½å™¨ã€‚</li></ul><p>Javaçš„åŸºç¡€æ•°æ®å’ŒæŒ‡é’ˆéƒ½æ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥ç›´æ¥å­˜åˆ°å†…å­˜é‡Œé¢å»ï¼Œä¸æ˜¯å»å­˜åœ°å€å¯»å€ã€‚</p><h3 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h3><ul><li>GC Rootæœ¬åœ°æ–¹æ³•æ ˆ,æ–¹æ³•åŒº,æ ˆä¸èƒ½è¢«åˆ é™¤<blockquote><p>åˆ é™¤æ–¹æ³•</p><ul><li><strong>æ ‡è®°æ¸…ç†</strong>ï¼Œ==ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡==ã€‚</li><li><strong>æ ‡è®°æ•´ç†</strong>(åˆ äº†åé¢çš„é¡¶ä¸Šæ¥ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡)ï¼Œ==å‰ç§»ç©ºé—´ç§»åŠ¨ä»£ä»·å¤ªå¤§==ã€‚</li><li><strong>å¤åˆ¶ç®—æ³•</strong>(åˆ†ä¸ºä¸¤ä¸ªåŒº)ï¼Œä¸ç›´æ¥åˆ é™¤ï¼Œä¸è¢«åˆ é™¤çš„å¤åˆ¶åˆ°æ–°åŒºï¼Œ==éœ€è¦2å€çš„å†…å­˜==ã€‚</li></ul></blockquote></li></ul><h3 id="å®é™…ï¼š"><a href="#å®é™…ï¼š" class="headerlink" title="å®é™…ï¼š"></a>å®é™…ï¼š</h3><h5 id="Minor-GCå½“åœ¨-Eden-åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ-minorGC-ï¼Œç”±äº-Java-å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥-minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚"><a href="#Minor-GCå½“åœ¨-Eden-åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ-minorGC-ï¼Œç”±äº-Java-å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥-minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚" class="headerlink" title="Minor GCå½“åœ¨ Eden åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ minorGC ï¼Œç”±äº Java å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚"></a>Minor GCå½“åœ¨ Eden åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ minorGC ï¼Œç”±äº Java å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚</h5><ul><li>å¹´è½»ä»£ï¼š<strong>EåŒº</strong>(ä¼Šç”¸å›­ï¼Œæ»¡äº†è§¦å‘YoungGC,ç”¨å¤åˆ¶ç®—æ³•)ï¼Œï¼Œ<strong>ä¸¤ä¸ªSurviveåŒº</strong>(S0.S1) 8ï¼š1ï¼š1ï¼Œä¸¤ä¸ªSåŒºäº¤æ›¿å·¥ä½œï¼ˆE+S1åˆ°S0,E+S0åˆ°S1ï¼‰ã€‚æ¯æ¬¡Young GCå®Œå¹´é¾„ä¼šåŠ ä¸€ï¼Œæ»¡15å²å°±ç›´æ¥éƒ½å»è€å¹´ä»£åŒºäº†ã€‚ParNewåƒåœ¾æ”¶é›†å™¨(å¤åˆ¶)ã€‚<h5 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h5></li><li>è€å¹´ä»£ï¼šåªæœ‰ä¸€å—ï¼Œå­˜æ»¡15å²åˆ°å»è€å¹´ä»£åŒºçš„å¯¹è±¡ã€‚å’Œå¤§å¯¹è±¡ï¼ŒOldæ»¡äº†å°±å’Œå¹´è½»çš„ä¸€èµ·Full GC,å‘ç”ŸSTOPPED WORLD,æ•´ä¸ªJavaç¨‹åºç›´æ¥æš‚åœï¼Œå°±ç”¨æ ‡è®°æ¸…ç†æˆ–è€…æ ‡è®°æ•´ç†ã€‚CMSåƒåœ¾æ”¶é›†å™¨(æ ‡è®°æ¸…ç†)ã€‚</li></ul><p><strong>å’ŒGC Rootæ— å…³çš„æ‰èƒ½è¢«åˆ é™¤</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Principle of JVM</title>
      <link href="/2020/02/08/Principle-of-JVM/"/>
      <url>/2020/02/08/Principle-of-JVM/</url>
      
        <content type="html"><![CDATA[<h1 id="JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡"><a href="#JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡" class="headerlink" title="JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡"></a>JVMåŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡</h1><p><div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"></div></p><p><img src="https://images.cnblogs.com/cnblogs_com/neverth/1592425/o_191116143745Java%E8%99%9A%E6%8B%9F%E6%9C%BA-min.png" alt="JVM"><br><br></p><h1 id="javaè™šæ‹Ÿæœº">Javaè™šæ‹Ÿæœº</h1><br><h2 id="ä¸€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ">ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h2><br><h3 id="çº¿ç¨‹ç§æœ‰">çº¿ç¨‹ç§æœ‰</h3><br><ul><br><li><p>ç¨‹åºè®¡æ•°å™¨</p><br><ul><br><li>è®°å½•æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼ˆå¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•åˆ™ä¸ºç©ºï¼‰ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šOOMï¼ˆOutOfMemoryErrorï¼‰çš„åŒºåŸŸã€‚</li><br></ul></li><br><li><p>Javaè™šæ‹Ÿæœºæ ˆ</p><br><ul><br><li>æ¯ä¸ªJavaæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ ˆæ¡¢ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚ä»æ–¹æ³•è°ƒç”¨ç›´åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå¯¹åº”ç€ä¸€ä¸ªæ ˆæ¡¢åœ¨Javaè™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ï¼ˆå±€éƒ¨å˜é‡åŒ…å«åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨referenceå’ŒreturnAddressç±»å‹ï¼‰</li><br></ul></li><br><li><p>æœ¬åœ°æ–¹æ³•æ ˆ</p><br><ul><br><li>æœ¬åœ°æ–¹æ³•æ ˆä¸Javaè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åªä¸è¿‡æ˜¯æœ¬åœ°æ–¹æ³•æ ˆä¸ºNativeæ–¹æ³•æœåŠ¡ã€‚</li><br></ul></li><br></ul><br><h3 id="çº¿ç¨‹å…¬æœ‰">çº¿ç¨‹å…¬æœ‰</h3><br><ul><br><li><p>Javaå †ï¼ˆGCåŒºï¼‰ï¼ˆJava Headï¼‰</p><br><ul><br><li>å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ï¼Œæ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚å¯¹äºæ–°ç”Ÿä»£åˆåˆ†ä¸ºEdenç©ºé—´ã€From Survivorç©ºé—´ã€To Survivorç©ºé—´ã€‚</li><br></ul></li><br><li><p>JDK1.7 æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰</p><br><ul><br><li>ç”¨äºå­˜æ”¾å·²è¢«åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚<br><br>å¯¹è¿™å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶çš„ä¸»è¦ç›®çš„æ˜¯å¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»çš„å¸è½½ï¼Œä½†æ˜¯ä¸€èˆ¬éš¾ä»¥å®ç°ã€‚<br><br>HotSpotè™šæ‹ŸæœºæŠŠå®ƒå½“åšæ°¸ä¹…ä»£æ¥è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä½†å¾ˆéš¾ç¡®å®šæ°¸ä¹…ä»£çš„å¤§å°ï¼Œå› ä¸ºå®ƒå—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œå¹¶ä¸”æ¯æ¬¡Full GCä¹‹åæ°¸ä¹…ä»£çš„å¤§å°éƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ç»å¸¸æŠ›å‡ºOOMå¼‚å¸¸ã€‚<br><br>ä»JDK1.8å¼€å§‹ï¼Œç§»é™¤æ°¸ä¹…ä»£ï¼Œå¹¶æŠŠæ–¹æ³•åŒºç§»è‡³å…ƒç©ºé—´ã€‚</li><br><li><p>è¿è¡Œæ—¶å¸¸é‡æ± </p><br><ul><br><li>æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†<br><br>Classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± ï¼ˆç¼–è¯‘å™¨ç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ä¼šåœ¨ç±»åŠ è½½åè¢«æ”¾å…¥è¿™ä¸ªåŒºåŸŸã€‚<br><br>å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚Stringç±»çš„intern()</li><br></ul></li><br></ul></li><br><li><p>JDK1.8 å…ƒç©ºé—´</p><br><ul><br><li>åŸæœ¬å­˜åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰çš„æ•°æ®ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†Javaå †é‡Œé¢ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†æœ¬åœ°å†…å­˜é‡Œé¢ï¼ˆå³å…ƒç©ºé—´ï¼‰ã€‚å…ƒç©ºé—´å­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼Œé™æ€å˜é‡å’Œå¸¸é‡æ± ç­‰æ”¾å…¥å †ä¸­ã€‚</li><br></ul></li><br><li><p>ç›´æ¥å†…å­˜</p><br><ul><br><li>åœ¨NIOä¸­ï¼Œä¼šä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ã€‚</li><br></ul></li><br></ul><br><h2 id="äºŒhotspotè™šæ‹Ÿæœº">äºŒã€HotSpotè™šæ‹Ÿæœº</h2><br><h3 id="å¯¹è±¡çš„åˆ›å»º">å¯¹è±¡çš„åˆ›å»º</h3><br><ul><br><li>å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶</li><br></ul><br><ol><br><li>æ£€æŸ¥å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­æ‰¾åˆ°ç¬¦å·å¼•ç”¨ï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹è¿‡ï¼Œæ²¡æœ‰çš„è¯å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</li><br><li>åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡ä¹‹åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚</li><br><li>å†…å­˜åˆ†é…å®Œæˆä¹‹åï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚</li><br><li>å¯¹å¯¹è±¡å¤´è¿›è¡Œå¿…è¦çš„è®¾ç½®ã€‚</li><br><li>æ‰§è¡Œæ„é€ æ–¹æ³•æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ã€‚</li><br></ol><br><h3 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€">å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><br><ul><br><li><ol><br><li>å¯¹è±¡å¤´</li><br></ol><br><ul><br><li><ol><br><li>ç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡è¯†ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘å®ç°æˆ³ç­‰ã€‚</li><br></ol></li><br><li><ol><br><li>ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ˆå¦‚æœä½¿ç”¨ç›´æ¥å¯¹è±¡æŒ‡é’ˆè®¿é—®ï¼‰ï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚</li><br></ol></li><br><li><ol><br><li>å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„çš„è¯ï¼Œè¿˜éœ€è¦ç¬¬ä¸‰éƒ¨åˆ†è®°å½•æ•°æ®é•¿åº¦çš„æ•°æ®ã€‚</li><br></ol></li><br></ul></li><br><li><ol><br><li>å®ä¾‹æ•°æ®</li><br></ol><br><ul><br><li>æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç ä¸­å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ã€‚</li><br></ul></li><br><li><ol><br><li>å¯¹é½å¡«å……</li><br></ol><br><ul><br><li>ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚<br><br>HotSpotéœ€è¦å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚</li><br></ul></li><br></ul><br><h3 id="å¯¹è±¡çš„è®¿é—®å®šä½">å¯¹è±¡çš„è®¿é—®å®šä½</h3><br><ul><br><li><p>å¥æŸ„è®¿é—®</p><br><ul><br><li>åœ¨Javaå †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜ä½œä¸ºå¥æŸ„æ± ã€‚<br><br>Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†åˆ°å¯¹è±¡å®ä¾‹æ•°æ®çš„æŒ‡é’ˆå’Œåˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆã€‚<br><br>å¯¹è±¡å®ä¾‹æ•°æ®åœ¨Javaå †ä¸­ï¼Œå¯¹è±¡ç±»å‹æ•°æ®åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ä¸­ã€‚<br><br>ä¼˜ç‚¹ï¼šåœ¨å¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œå¯¹è±¡å¼•ç”¨æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚</li><br></ul></li><br><li><p>ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotä½¿ç”¨ï¼‰</p><br><ul><br><li>Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„ç›´æ¥åœ°å€ã€‚<br><br>åœ¨å †ä¸­çš„å¯¹è±¡å®ä¾‹æ•°æ®å°±éœ€è¦åŒ…å«åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆã€‚<br><br>ä¼˜ç‚¹ï¼šèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</li><br></ul></li><br></ul><br><h2 id="ä¸‰åƒåœ¾æ”¶é›†">ä¸‰ã€åƒåœ¾æ”¶é›†</h2><br><h3 id="æ¦‚è¿°">æ¦‚è¿°</h3><br><ul><br><li>åƒåœ¾æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹Javaå †å’Œæ–¹æ³•åŒºã€‚<br><br>ç¨‹åºè®¡æ•°å™¨ã€Javaè™šæ‹Ÿæœºæ ˆä¸ªæœ¬åœ°æ–¹æ³•æ ˆä¸‰ä¸ªåŒºåŸŸå±äºçº¿ç¨‹ç§æœ‰ï¼Œçº¿ç¨‹æˆ–æ–¹æ³•ç»“æŸä¹‹åå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä¸éœ€è¦å¯¹è¿™ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</li><br></ul><br><h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶">åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶</h3><br><ul><br><li><p>ç¬¬ä¸€æ¬¡æ ‡è®°ï¼ˆç¼“åˆ‘ï¼‰</p><br><ul><br><li><p>å¼•ç”¨è®¡æ•°ç®—æ³•</p><br><ul><br><li>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“å¯¹è±¡å¢åŠ ä¸€ä¸ªå¼•ç”¨æ—¶å¼•ç”¨è®¡æ•°å€¼++ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å¼•ç”¨è®¡æ•°å€¼â€“ï¼Œå¼•ç”¨è®¡æ•°å€¼ä¸º0æ—¶å¯¹è±¡å¯ä»¥è¢«å›æ”¶ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä½†æ˜¯å®ƒéš¾ä»¥è§£å†³å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼Œæ­¤æ—¶è¿™ä¸ªä¸¤ä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°å€¼ä¸º1ï¼Œä½†æ˜¯æ°¸è¿œæ— æ³•ç”¨åˆ°è¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p><ul><li><p>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆJavaä½¿ç”¨ï¼‰</p><ul><li>ä»¥ä¸€ç³»åˆ—GC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ˜¯ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚<p>GC Rootså¯¹è±¡åŒ…æ‹¬</p><br><ol><br><li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆæ¡¢ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æ–¹æ³•åŒºä¸­å…±ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚</li><br></ol><br><ul><br><li><p>ç¬¬äºŒæ¬¡æ ‡è®°</p><br><ul><br><li>å½“å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•ï¼Œæˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ã€‚<br><br>å¦‚æœå¯¹è±¡åœ¨finalizeæ–¹æ³•ä¸­é‡æ–°ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”åˆ™å°†ä¸ä¼šè¢«å›æ”¶ã€‚</li><br><li><p>finalize()</p><br><ul><br><li>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•éƒ½åªä¼šè¢«ç³»ç»Ÿè°ƒç”¨ä¸€æ¬¡ã€‚<br><br>å®ƒçš„å‡ºç°æ˜¯ä¸€ä¸ªå¦¥åï¼Œè¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œæ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºã€‚<br><br>finalize()èƒ½åšçš„æ‰€æœ‰å·¥ä½œä½¿ç”¨try-finallyæˆ–è€…å…¶ä»–æ–¹å¼éƒ½å¯ä»¥åšçš„æ›´å¥½ï¼Œå®Œå…¨å¯ä»¥å¿˜è®°åœ¨è¿™ä¸ªå‡½æ•°çš„å­˜åœ¨ã€‚</li><br></ul></li><br></ul></li><br></ul><br><h3 id="æ–¹æ³•åŒºçš„å›æ”¶">æ–¹æ³•åŒºçš„å›æ”¶</h3><br><ul><br><li>åœ¨æ–¹æ³•åŒºè¿›è¡Œåƒåœ¾å›æ”¶çš„æ€§ä»·æ¯”ä¸€èˆ¬æ¯”è¾ƒä½ã€‚<br><br>ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†ï¼ŒåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚</li><br></ul><br><p>æ»¡è¶³æ— ç”¨çš„ç±»ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶æ‰ä»…ä»…ä»£è¡¨å¯ä»¥è¿›è¡Œå›æ”¶ï¼Œä¸æ˜¯å¿…ç„¶å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨-Xnoclassgcå‚æ•°æ§åˆ¶ã€‚</p><br><ol><br><li>è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ã€‚</li><br><li>åŠ è½½è¯¥ç±»çš„ClassLoaderå·²ç»è¢«å›æ”¶ã€‚</li><br><li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®åˆ°è¯¥ç±»çš„æ–¹æ³•ã€‚</li><br></ol><br><h3 id="å¼•ç”¨ç±»å‹">å¼•ç”¨ç±»å‹</h3><br><ul><br><li><ol><br><li>å¼ºå¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨newä¸€ä¸ªæ–°å¯¹è±¡çš„æ–¹å¼æ¥åˆ›å»ºå¼ºå¼•ç”¨ã€‚<br><br>åªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åˆ™æ°¸è¿œä¸ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>è½¯å¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨SoftReferenceç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚<br><br>ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†æ˜¯å¹¶éå¿…é¡»çš„å¯¹è±¡ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨å°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>å¼±å¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨WeakReferenceç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚<br><br>å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†æ—¶ä¼šè¢«å›æ”¶ã€‚</li><br></ul></li><br><li><ol><br><li>è™šå¼•ç”¨</li><br></ol><br><ul><br><li>ä½¿ç”¨PhantomReferenceç±»æ¥å®ç°è™šå¼•ç”¨ã€‚<br><br>æœ€å¼±çš„å¼•ç”¨å…³ç³»ï¼Œä¸ä¼šå¯¹è¢«å¼•ç”¨çš„å¯¹è±¡ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚<br><br>å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</li><br></ul></li><br></ul><br><h3 id="åƒåœ¾æ”¶é›†ç®—æ³•">åƒåœ¾æ”¶é›†ç®—æ³•</h3><br><ul><br><li><ol><br><li>æ ‡è®° - æ¸…é™¤</li><br></ol><br><ul><br><li>é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶è¢«æ ‡è®°çš„å¯¹è±¡å¹¶å–æ¶ˆæ ‡è®°ã€‚</li><br></ul></li><br></ul><br><p>ä¸è¶³ï¼š</p><br><ol><br><li>æ•ˆç‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ•ˆç‡éƒ½ä¸é«˜ã€‚</li><br><li>ç©ºé—´é—®é¢˜ï¼Œæ ‡è®°æ¸…é™¤ä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œæ²¡æœ‰è¿ç»­å†…å­˜å®¹çº³è¾ƒå¤§å¯¹è±¡è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†ã€‚</li><br></ol><br><ul><br><li><ol><br><li>æ ‡è®° - æ•´ç†</li><br></ol><br><ul><br><li>å’Œæ ‡è®° - æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä½†æ ‡è®°ä¹‹åè®©æ‰€æœ‰å­˜æ´»å¯¹è±¡éƒ½å‘ä¸€æ®µç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚<br><br>è§£å†³äº†æ ‡è®° - æ¸…é™¤ç®—æ³•çš„ç©ºé—´é—®é¢˜ï¼Œä½†éœ€è¦ç§»åŠ¨å¤§é‡å¯¹è±¡ï¼Œè¿˜æ˜¯å­˜åœ¨æ•ˆç‡é—®é¢˜ã€‚</li><br></ul></li><br><li><ol><br><li>å¤åˆ¶</li><br></ol><br><ul><br><li>å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨å¤šçš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚<br><br>ä»£ä»·æ˜¯å°†å†…å­˜ç¼©å°ä¸ºåŸæ¥çš„ä¸€èˆ¬ï¼Œå¤ªé«˜äº†ã€‚</li><br></ul></li><br></ul><br><p>ç°åœ¨å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨è¿™ç§ç®—æ³•ç”¨äºæ–°ç”Ÿä»£ã€‚<br><br>å› ä¸ºæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡98%éƒ½æ˜¯æœç”Ÿæš®æ­»ï¼Œæ‰€ä»¥å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨Edenå’Œå…¶ä¸­ä¸€å—Survivorç©ºé—´ã€‚<br><br>å½“å›æ”¶æ—¶ï¼Œå¦‚æœå¦å¤–ä¸€å—Survivorç©ºé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡æ—¶ï¼Œè¿™äº›å¯¹è±¡å°†ç›´æ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£ã€‚</p><br><ul><br><li><ol><br><li>åˆ†ä»£æ”¶é›†</li><br></ol><br><ul><br><li>ä¸€èˆ¬æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚<br><br>åœ¨æ–°ç”Ÿä»£ä¸­ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œåœ¨è€å¹´ä»£ä¸­ä½¿ç”¨æ ‡è®° -æ¸…é™¤ æˆ–è€… æ ‡è®° - æ•´ç† ç®—æ³•æ¥è¿›è¡Œå›æ”¶ã€‚</li><br></ul></li><br></ul><br><h3 id="hotspotçš„ç®—æ³•å®ç°">HotSpotçš„ç®—æ³•å®ç°</h3><br><ul><br><li><p>æšä¸¾æ ¹èŠ‚ç‚¹ï¼ˆGC Rootsï¼‰</p><br><ul><br><li>ç›®å‰ä¸»æµJavaè™šæ‹Ÿæœºä½¿ç”¨çš„éƒ½æ˜¯å‡†ç¡®å¼GCã€‚<br><br>GCåœé¡¿çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡OopMapæ•°æ®ç»“æ„ï¼ˆæ˜ å°„è¡¨ï¼‰çŸ¥é“ï¼Œåœ¨å¯¹è±¡å†…çš„ä»€ä¹ˆåç§»é‡ä¸Šæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè€Œä¸”ç‰¹å®šçš„ä½ç½®è®°å½•ç€æ ˆå’Œå¯„å­˜å™¨ä¸­å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ã€‚å› æ­¤å¯ä»¥å¿«é€Ÿä¸”å‡†ç¡®çš„å®ŒæˆGC Rootsæšä¸¾ã€‚</li><br></ul></li><br><li><p>å®‰å…¨ç‚¹</p><br><ul><br><li>ä¸ºäº†èŠ‚çœGCçš„ç©ºé—´æˆæœ¬ï¼Œå¹¶ä¸ä¼šä¸ºæ¯æ¡æŒ‡ä»¤éƒ½ç”ŸæˆOopMapï¼Œåªæ˜¯åœ¨â€œç‰¹å®šçš„ä½ç½®â€è®°å½•OopMapï¼Œè¿™äº›ä½ç½®ç§°ä¸ºå®‰å…¨ç‚¹ã€‚</li><br></ul></li><br></ul><br><p>ç¨‹åºæ‰§è¡Œåªæœ‰åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰èƒ½æš‚åœï¼Œåˆ°è¾¾å®‰å…¨ç‚¹æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚</p><br><ol><br><li>æŠ¢æ–­å¼ä¸­æ–­ï¼ˆå‡ ä¹ä¸ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰çº¿ç¨‹ä¸­æ–­ï¼Œå¦‚æœæœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤è¯¥çº¿ç¨‹ï¼Œè®©ä»–è·‘åˆ°å®‰å…¨ç‚¹ã€‚</li><br><li>ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆä¸»è¦ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°å®‰å…¨ç‚¹æ—¶è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘ç°æ ‡å¿—ä¸ºç›´åˆ™æŒ‚èµ·çº¿ç¨‹ã€‚</li><br></ol><br><p>ä½†æ˜¯å½“çº¿ç¨‹sleepæˆ–blockedæ—¶æ— æ³•å“åº”JVMçš„ä¸­æ–­è¯·æ±‚èµ°åˆ°å®‰å…¨ç‚¹ä¸­æ–­æŒ‚èµ·ï¼Œæ‰€ä»¥å¼•å‡ºå®‰å…¨åŒºåŸŸã€‚</p><br><ul><br><li><p>å®‰å…¨åŒºåŸŸ</p><br><ul><br><li>å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯æ‰©å±•çš„å®‰å…¨ç‚¹ã€‚</li><br></ul></li><br></ul><br><p>çº¿ç¨‹è¿›å…¥å®‰å…¨åŒºåŸŸæ—¶è¡¨ç¤ºè‡ªå·±è¿›å…¥äº†å®‰å…¨åŒºåŸŸï¼Œè¿™ä¸ªå‘ç”ŸGCæ—¶ï¼ŒJVMå°±ä¸éœ€è¦ç®¡è¿™ä¸ªçº¿ç¨‹ã€‚<br><br>çº¿ç¨‹ç¦»å¼€å®‰å…¨åŒºåŸŸæ—¶ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®ŒæˆGCè¿‡ç¨‹ï¼Œæ²¡æœ‰å°±ç­‰å¾…å¯ä»¥ç¦»å¼€å®‰å…¨åŒºåŸŸçš„ä¿¡å·ä¸ºæ­¢ï¼Œå¦è€…ç»§ç»­æ‰§è¡Œã€‚</p><br><h3 id="åƒåœ¾æ”¶é›†å™¨">åƒåœ¾æ”¶é›†å™¨</h3><br><ul><br><li><p>æ–°ç”Ÿä»£</p><br><ul><br><li><ol><br><li>serialæ”¶é›†å™¨</li><br></ol><br><ul><br><li>å®ƒæ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œåªä¼šä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†å·¥ä½œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä¼˜ç‚¹ï¼šå¯¹æ¯”å…¶ä»–å•çº¿ç¨‹æ”¶é›†å™¨ç®€å•é«˜æ•ˆï¼Œå¯¹äºå•ä¸ªCPUç¯å¢ƒæ¥è¯´ï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå› æ­¤æ‹¥æœ‰æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ã€‚</p><br><p>å®ƒæ˜¯Clientåœºæ™¯ä¸‹é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå› ä¸ºåœ¨è¯¥åœºæ™¯ä¸‹å†…å­˜ä¸€èˆ¬æ¥è¯´ä¸ä¼šå¾ˆå¤§ã€‚</p></li><li><ol start="2"><li>parnewæ”¶é›†å™¨</li></ol></li><li><p>å®ƒæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå…¬ç”¨äº†ç›¸å½“å¤šçš„ä»£ç ã€‚</p><p>åœ¨å•CPUç¯å¢ƒä¸­ç»å¯¹ä¸ä¼šæœ‰æ¯”Serialæ”¶é›†å™¨æ›´å¥½çš„æ•ˆæœï¼Œç”šè‡³åœ¨2ä¸ªCPUç¯å¢ƒä¸­ä¹Ÿä¸èƒ½ç™¾åˆ†ä¹‹ç™¾è¶…è¶Šã€‚</p><br><p>å®ƒæ˜¯Serveråœºæ™¯ä¸‹é»˜è®¤çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œä¸»è¦å› ä¸ºé™¤äº†Serialæ”¶é›†å™¨ï¼Œåªç”¨å®ƒèƒ½ä¸CMSæ”¶é›†å™¨é…åˆä½¿ç”¨ã€‚</p></li><li><ol start="3"><li>parallel scavengeæ”¶é›†å™¨</li></ol></li><li><p>â€œååä¼˜å…ˆâ€æ”¶é›†å™¨ï¼Œä¸ParNewæ”¶é›†å™¨å·®ä¸å¤šã€‚</p><p>ä½†æ˜¯å…¶ä»–æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹åœé¡¿çš„æ—¶é—´ï¼Œè€Œå®ƒçš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ã€‚è¿™é‡Œçš„ååé‡æŒ‡CPUç”¨äºè¿è¡Œç”¨æˆ·ç¨‹åºçš„æ—¶é—´å æ€»æ—¶é—´çš„æ¯”å€¼ã€‚</p><br><ul><br><li><p>è€å¹´ä»£</p><br><ul><br><li><ol><br><li>serial oldæ”¶é›†å™¨</li><br></ol><br><ul><br><li>æ˜¯Serialæ”¶é›†å™¨è€å¹´ä»£ç‰ˆæœ¬ã€‚</li><br></ul></li><br></ul></li><br></ul><br><p>ä¹Ÿæ˜¯ç»™Clientåœºæ™¯ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨çš„ã€‚</p></li><li><ol start="5"><li>parallel oldæ”¶é›†å™¨</li></ol></li><li><p>æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚</p><p>åœ¨æ³¨é‡ååé‡å·²ç»CPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘Parallel Scavengeå’ŒParallel Oldæ”¶é›†å™¨ã€‚</p></li><li><ol start="6"><li>cmsæ”¶é›†å™¨</li></ol></li><li><p>Concurrent Mark Sweepæ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚</p></li><li><p>è¿ä½œè¿‡ç¨‹</p><ul><li><ol><li>åˆå§‹æ ‡è®°ï¼ˆæœ€çŸ­ï¼‰ã€‚ä»éœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«<br><ol><br><li>å¹¶å‘æ ‡è®°ï¼ˆè€—æ—¶æœ€é•¿ï¼‰ã€‚è¿›è¡ŒGC Roots Tracingï¼ˆæ ¹æœç´¢ç®—æ³•ï¼‰çš„è¿‡ç¨‹ã€‚</li><br><li>é‡æ–°æ ‡è®°ã€‚ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚æ¯”åˆå§‹æ ‡è®°é•¿ä½†è¿œå°äºå¹¶å‘æ ‡è®°æ—¶é—´ã€‚</li><br><li>å¹¶å‘æ¸…é™¤</li><br></ol><p>1 å’Œ4 ä¸¤ä¸ªæ­¥éª¤å¹¶æ²¡æœ‰å¸¦ä¸Šå¹¶å‘ä¸¤ä¸ªå­—ï¼Œå³è¿™ä¸¤ä¸ªæ­¥éª¤ä»è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚</p></li></ol></li></ul></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚<br><ol><br><li>CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚è™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œä½†æ˜¯å ç”¨CPUèµ„æºä¼šä½¿åº”ç”¨ç¨‹åºå˜æ…¢ã€‚</li><br><li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ã€‚åœ¨å¹¶å‘æ¸…é™¤é˜¶æ®µæ–°åƒåœ¾è¿˜ä¼šä¸æ–­çš„äº§ç”Ÿï¼Œæ‰€ä»¥GCæ—¶è¦æ§åˆ¶â€œ-XX:CMSinitiatingOccupancyFractionå‚æ•°â€é¢„ç•™è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™è¿™äº›åƒåœ¾ï¼Œå½“é¢„ç•™å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦æ—¶å°±ä¼šå‡ºç°â€Concurrent Mode Failureâ€œå¤±è´¥ï¼Œä¸´æ—¶å¯åŠ¨Serial Oldæ”¶é›†ã€‚</li><br><li>ç”±äºä½¿ç”¨æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼Œæ”¶é›†ä¹‹åä¼šäº§ç”Ÿå¤§é‡ç©ºé—´ç¢ç‰‡ã€‚</li><br></ol><br><ul><br><li><ol><br><li>g1æ”¶é›†å™¨</li><br></ol><br><ul><br><li>Garbage Firstæ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨</li><br><li><p>è¿ä½œè¿‡ç¨‹</p><br><ul><br><li><ol><br><li>åˆå§‹æ ‡è®°</li><br></ol></li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>å¹¶å‘æ ‡è®°</li><br><li>æœ€ç»ˆæ ‡è®°</li><br><li>åˆ é€‰æ ‡è®°</li><br></ol><br><h2 id="äº”ç±»åŠ è½½æœºåˆ¶">äº”ã€ç±»åŠ è½½æœºåˆ¶</h2><br><h3 id="æ¦‚è¿°-1">æ¦‚è¿°</h3><br><ul><br><li>è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»Classé—®ä»·åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ã€‚<br><br>Javaåº”ç”¨ç¨‹åºçš„é«˜åº¦çµæ´»æ€§å°±æ˜¯ä¾èµ–è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿æ¥å®ç°çš„ã€‚</li><br></ul><br><h3 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ">ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h3><br><ul><br><li>åŠ è½½ -&gt; è¿æ¥ï¼ˆéªŒè¯ -&gt; å‡†å¤‡ -&gt; è§£æï¼‰ -&gt; åˆå§‹åŒ– -&gt; ä½¿ç”¨ - &gt;å¸è½½</li><br></ul><br><h3 id="ç±»åˆå§‹åŒ–æ—¶æœº">ç±»åˆå§‹åŒ–æ—¶æœº</h3><br><ul><br><li><p>ä¸»åŠ¨å¼•ç”¨</p><br><ul><br><li>è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰å¼ºåˆ¶çº¦æŸä½•æ—¶è¿›è¡ŒåŠ è½½ï¼Œä½†æ˜¯è§„å®šäº†æœ‰ä¸”åªæœ‰äº”ç§æƒ…å†µå¿…é¡»å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ˆåŠ è½½ã€éªŒè¯ã€å‡†å¤‡éƒ½ä¼šéšä¹‹å‘ç”Ÿï¼‰</li><br></ul></li><br></ul><br><ol><br><li>é‡åˆ°newã€getstaticã€putstaticã€invokestaticè¿™å››æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚</li><br><li>åå°„è°ƒç”¨æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚</li><br><li>å‘ç°å…¶çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–åˆ™å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚</li><br><li>åŒ…å«psvmï¼ˆmianï¼ˆï¼‰æ–¹æ³•ï¼‰çš„é‚£ä¸ªç±»ã€‚</li><br><li>åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼ŒREF_getStaticã€REF_putStaticã€REF_invokeStaticçš„æ–¹æ³•å¥æŸ„ã€‚</li><br></ol><br><ul><br><li><p>è¢«åŠ¨å¼•ç”¨</p><br><ul><br><li>é™¤ä¸Šé¢äº”ç§æƒ…å†µä¹‹å¤–ï¼Œæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚</li><br></ul></li><br></ul><br><ol><br><li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»çš„åˆå§‹åŒ–ã€‚</li><br><li>é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ã€‚è¯¥è¿‡ç¨‹ä¼šå¯¹æ•°ç»„ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œæ•°ç»„ç±»æ˜¯ä¸€ä¸ªç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿæˆçš„ã€ç›´æ¥ç»§æ‰¿Objectçš„å­ç±»ï¼Œå…¶ä¸­åŒ…å«æ•°ç»„çš„å±æ€§å’Œæ–¹æ³•ï¼Œç”¨æˆ·åªèƒ½ä½¿ç”¨publicçš„lengthå’Œclone()ã€‚</li><br><li>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–ã€‚</li><br></ol><br><h3 id="ç±»åŠ è½½è¿‡ç¨‹">ç±»åŠ è½½è¿‡ç¨‹</h3><br><ul><br><li><ol><br><li>åŠ è½½</li><br></ol><br><ul><br><li><ol><br><li>é€šè¿‡ç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</li><br></ol></li><br></ul></li><br></ul><br><ol><br><li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li><br><li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼ˆHotSpotå°†å…¶å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼‰ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li><br></ol><br><ul><br><li><ol><br><li>éªŒè¯</li><br></ol><br><ul><br><li>ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚ç±»ä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚å¯ä»¥é€šè¿‡-Xverify:noneå…³é—­å¤§éƒ¨åˆ†ç±»éªŒè¯ã€‚</li><br></ul></li><br></ul><br><ol><br><li>æ–‡ä»¶æ ¼å¼éªŒè¯ã€‚ç¡®ä¿è¾“å…¥å­—èŠ‚æµèƒ½æ­£ç¡®çš„è§£æå¹¶å­˜å‚¨äºæ–¹æ³•åŒºï¼Œåé¢çš„3ä¸ªéªŒè¯å…¨éƒ¨åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œï¼Œä¸ä¼šå†æ“ä½œå­—èŠ‚æµã€‚</li><br><li>å…ƒæ•°æ®éªŒè¯ã€‚å¯¹å­—èŠ‚ç æè¿°ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œç¡®ä¿å…¶ç¬¦åˆJavaè¯­æ³•è§„èŒƒã€‚ï¼ˆJavaè¯­æ³•éªŒè¯ï¼‰</li><br><li>å­—èŠ‚ç éªŒè¯ã€‚æœ€å¤æ‚ï¼Œé€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ—¶åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚å¯ä»¥é€šè¿‡å‚æ•°å…³é—­ã€‚ï¼ˆéªŒè¯æŒ‡ä»¤è·³è½¬èŒƒå›´ï¼Œç±»å‹è½¬æ¢æœ‰æ•ˆç­‰ï¼‰</li><br><li>ç¬¦å·å¼•ç”¨éªŒè¯ã€‚å°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œå‘ç”Ÿåœ¨ç¬¬ä¸‰ä¸ªé˜¶æ®µâ€”â€”è§£æé˜¶æ®µä¸­å‘ç”Ÿã€‚</li><br></ol><br><ul><br><li><ol><br><li>å‡†å¤‡</li><br></ol><br><ul><br><li>ç±»å˜é‡æ˜¯è¢«staticä¿®é¥°çš„å˜é‡ï¼Œå‡†å¤‡é˜¶æ®µä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®é›¶å€¼ï¼ˆfinalç›´æ¥è®¾ç½®åˆå§‹å€¼ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯æ–¹æ³•åŒºçš„å†…å­˜ã€‚</li><br></ul></li><br><li><ol><br><li>è§£æ</li><br></ol><br><ul><br><li>å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚<br><br>å…¶ä¸­è§£æè¿‡ç¨‹åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åå†å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒJavaçš„åŠ¨æ€ç»‘å®šã€‚<br><br>è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„ã€å’Œè°ƒç”¨ç‚¹é™å®šç¬¦ã€‚</li><br></ul></li><br><li><ol><br><li>åˆå§‹åŒ–</li><br></ol><br><ul><br><li><p>åˆå§‹åŒ–é˜¶æ®µæ‰çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ï¼Œæ˜¯æ‰§è¡Œç±»æ„é€ å™¨<clinit>()æ–¹æ³•çš„è¿‡ç¨‹ã€‚<br><br>åœ¨å‡†å¤‡é˜¶æ®µï¼Œç±»å˜é‡å·²ç»ç»™è¿‡é›¶å€¼ï¼Œè€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œæ ¹æ®ç¨‹åºå‘˜é€šè¿‡ç¨‹åºåˆ¶å®šçš„ä¸»è§‚è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºã€‚</clinit></p><br><ul><br><li><p><clinit>()</clinit></p><br><ul><br><li>ç±»æ„é€ å™¨æ–¹æ³•ã€‚æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ä¸­çš„çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚</li><br></ul></li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>ä¸éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼ŒJVMä¼šä¿è¯åœ¨å­ç±»clinitæ‰§è¡Œä¹‹å‰ï¼Œçˆ¶ç±»çš„clinitå·²ç»æ‰§è¡Œå®Œæˆã€‚</li><br><li>æ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æ¥å£çš„c</li></ol></li></ul></li></ul></li></ul><p><li>æ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æ¥å£çš„clinitä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æ¥å£çš„clinitæ–¹æ³•ã€‚æ¥å£çš„å®ç°ç±»ä¹Ÿä¸ä¼šæ‰§è¡Œæ¥å£çš„clinitæ–¹æ³•ã€‚</li></p><p><li><p>è™šæ‹Ÿæœºä¼šä¿è¯clinitåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ã€‚å…¶ä»–çº¿æ€§å”¤é†’ä¹‹åä¸ä¼šå†è¿›å…¥clinitæ–¹æ³•ï¼ŒåŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»å‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚</p></li></p><ul><li><p>&lt;init&gt;()</p><ul><li>å¯¹è±¡æ„é€ å™¨æ–¹æ³•ã€‚Javaå¯¹è±¡è¢«åˆ›å»ºæ—¶æ‰ä¼šè¿›è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œå¯¹éé™æ€å˜é‡è§£æåˆå§‹åŒ–ã€‚</li><br><li><p>ä¼šæ˜¾å¼çš„è°ƒç”¨çˆ¶ç±»çš„initæ–¹æ³•ï¼Œå¯¹è±¡å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å¯¹å®ä¾‹åŸŸçš„åˆå§‹åŒ–æ“ä½œå…¨éƒ¨åœ¨initæ–¹æ³•ä¸­è¿›è¡Œã€‚</p></li><br><br><h3 id="ç±»åŠ è½½-å™¨">ç±»ï¼ˆåŠ è½½ï¼‰ å™¨</h3><ul><br><li><p>ç±»ä¸ç±»åŠ è½½å™¨</p><br><ul><br><li>ç±»åŠ è½½å™¨å®ç°ç±»çš„åŠ è½½åŠ¨ä½œã€‚<br><br>ç±»åŠ è½½å™¨å’Œè¿™ä¸ªç±»æœ¬èº«ä¸€åŒç¡®ç«‹è¿™ä¸ªç±»çš„å”¯ä¸€æ€§ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰ç‹¬ç«‹çš„ç±»å‘½åç©ºé—´ã€‚åœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ä¸¤ä¸ªç±»ç›¸ç­‰ã€‚<br><br>ç›¸ç­‰åŒ…æ‹¬ç±»çš„Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()ã€instanceofå…³é”®å­—ã€‚</li><br></ul></li><br><li><p>ç±»åŠ è½½å™¨åˆ†ç±»</p><br><ul><br><li><p>å¯åŠ¨ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±C++è¯­è¨€å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ã€‚è´Ÿè´£å°†JAVA_HOME/libç›®å½•ä¸­ï¼Œæˆ–è€…è¢«-Xbootclasspathå‚æ•°æŒ‡å®šçš„è·¯å¾„ï¼Œä½†æ˜¯æ–‡ä»¶åè¦èƒ½è¢«è™šæ‹Ÿæœºè¯†åˆ«ï¼Œåå­—ä¸ç¬¦åˆæ— æ³•è¢«å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ã€‚å¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢«Javaç¨‹åºç›´æ¥å¼•ç”¨ã€‚</li><br></ul></li><br><li><p>æ‰©å±•ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±Javaè¯­è¨€å®ç°ï¼Œè´Ÿè´£åŠ è½½JAVA_HOME/lib/extç›®å½•ï¼Œæˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ‰€æœ‰ç±»åº“ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ã€‚</li><br></ul></li><br><li><p>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±äºè¿™ä¸ªç±»åŠ è½½å™¨æ˜¯ClassLoaderä¸­çš„getSystemClassLoader()æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿç§°ä»–ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ï¼ˆClassPathï¼‰ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</li><br></ul></li><br><li><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</p><br><ul><br><li>ç”±ç”¨æˆ·è‡ªå·±å®ç°ã€‚</li><br></ul></li><br></ul></li><br></ul><br><ol><br><li>å¦‚æœä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆåªéœ€è¦é‡å†™findClassæ–¹æ³•å³å¯ã€‚</li><br><li>å¦åˆ™å°±é‡å†™æ•´ä¸ªloadClassæ–¹æ³•ã€‚</li><br></ol><br><ul><br><li><p>åŒäº²å§”æ´¾æ¨¡å‹</p><br><ul><br><li>åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”è¯¥æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚çˆ¶å­ä¸ä¼šä»¥ç»§æ‰¿çš„å…³ç³»ç±»å®ç°ï¼Œè€Œæ˜¯éƒ½æ˜¯ä½¿ç”¨ç»„åˆå…³ç³»æ¥æœç”¨çˆ¶åŠ è½½å™¨çš„ä»£ç ã€‚<br><br>åœ¨java.lang.ClassLoaderçš„loadClass()æ–¹æ³•ä¸­å®ç°ã€‚</li><br><li><p>å·¥ä½œè¿‡ç¨‹</p><br><ul><br><li>ä¸€ä¸ªç±»åŠ è½½å™¨é¦–å…ˆå°†ç±»åŠ è½½è¯·æ±‚è½¬å‘åˆ°çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦çš„ç±»ï¼‰æ—¶æ‰å°è¯•è‡ªå·±åŠ è½½</li><br></ul></li><br><li><p>å¥½å¤„</p><br><ul><br><li>Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œä»è€Œä½¿å¾—åŸºç¡€ç±»åº“å¾—åˆ°åŒæ„ã€‚</li><br></ul></li><br></ul></li><br></ul><br><h2 id="å››å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥">å››ã€å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</h2><br><h3 id="minor-gc-å’Œ-full-gc">Minor GC å’Œ Full GC</h3><br><ul><br><li><p>Minor GC</p><br><ul><br><li>å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†åŠ¨ä½œï¼Œå› ä¸ºæ–°ç”Ÿä»£å¯¹è±¡å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œå› æ­¤Minor GCä¼šé¢‘ç¹æ‰§è¡Œï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ã€‚</li><br><li><p>æ—¶æœº</p><br><ul><br><li>Edenä¸è¶³</li><br></ul></li><br></ul></li><br><li><p>Full GC</p><br><ul><br><li>å‘ç”Ÿåœ¨è€å¹´åŒºçš„GCï¼Œå‡ºç°Full GCæ—¶å¾€å¾€ä¼´éšç€Minor GCï¼Œæ¯”Minor GCæ…¢10å€ä»¥ä¸Šã€‚</li><br><li><p>æ—¶æœº</p><br><ul><br><li><ol><br><li>è°ƒç”¨System.gc()</li><br></ol><br><ul><br><li>åªæ˜¯å»ºè®®è™šæ‹Ÿæœºæ‰§è¡ŒFull GCï¼Œä½†æ˜¯è™šæ‹Ÿæœºä¸ä¸€å®šçœŸæ­£å»æ‰§è¡Œã€‚<br><br>ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯è®©è™šæ‹Ÿæœºç®¡ç†å†…å­˜ã€‚</li><br></ul></li><br><li><ol><br><li>è€å¹´ä»£ç©ºé—´ä¸è¶³</li><br></ol><br><ul><br><li>å¸¸è§åœºæ™¯å°±æ˜¯å¤§å¯¹è±¡å’Œé•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£ã€‚<br><br>å°½é‡é¿å…åˆ›å»ºè¿‡å¤§çš„å¯¹è±¡ä»¥åŠæ•°ç»„ï¼Œè°ƒå¤§æ–°ç”Ÿä»£å¤§å°ï¼Œè®©å¯¹è±¡å°½é‡å’‹æ–°ç”Ÿä»£ä¸­è¢«å›æ”¶ï¼Œä¸è¿›å…¥è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>JDK1.7 ä¹‹å‰æ–¹æ³•åŒºç©ºé—´ä¸è¶³</li><br></ol><br><ul><br><li>å½“ç³»ç»Ÿä¸­è¦åŠ è½½çš„ç±»ã€åå°„çš„ç±»å’Œå¸¸é‡è¾ƒå¤šæ—¶ï¼Œæ°¸ä¹…ä»£å¯èƒ½ä¼šè¢«å æ»¡ï¼Œåœ¨æœªé…ç½®CMS GCçš„æƒ…å†µä¸‹ä¹Ÿä¼šæ‰§è¡ŒFull GCï¼Œå¦‚æœç©ºé—´ä»ç„¶ä¸å¤Ÿåˆ™ä¼šæŠ›å‡ºOOMå¼‚å¸¸ã€‚<br><br>å¯é‡‡ç”¨å¢å¤§æ–¹æ³•åŒºç©ºé—´æˆ–è½¬ä¸ºä½¿ç”¨CMS GCã€‚</li><br></ul></li><br><li><ol><br><li>ç©ºé—´åˆ†é…æ‹…ä¿å¤±è´¥</li><br></ol><br><ul><br><li>å‘ç”ŸMinor GCæ—¶åˆ†é…æ‹…ä¿çš„ä¸¤ä¸ªåˆ¤æ–­å¤±è´¥</li><br></ul></li><br><li><ol><br><li>Concurrent Mode Failure</li><br></ol><br><ul><br><li>CMS GC å¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œä¸æ–­æœ‰æ–°çš„æµ®åŠ¨åƒåœ¾äº§ç”Ÿï¼Œå½“é¢„ç•™ç©ºé—´ä¸è¶³æ—¶æŠ¥Concurrent Mode Failureé”™è¯¯å¹¶è§¦å‘Full GCã€‚</li><br></ul></li><br></ul></li><br></ul></li><br></ul><br><h3 id="å†…å­˜åˆ†é…ç­–ç•¥">å†…å­˜åˆ†é…ç­–ç•¥</h3><br><ul><br><li><ol><br><li>å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…</li><br></ol><br><ul><br><li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£Edenä¸Šåˆ†é…ï¼Œå½“Edenç©ºé—´ä¸å¤Ÿæ—¶ï¼Œå‘èµ·Minor GCï¼Œå½“å¦å¤–ä¸€ä¸ªSurvivorç©ºé—´ä¸è¶³æ—¶åˆ™å°†å­˜æ´»å¯¹è±¡é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li><br></ol><br><ul><br><li>é…ç½®å‚æ•°-XX:PretenureSizeThresholdï¼Œå¤§äºæ­¤å€¼å¾—å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ï¼Œé¿å…åœ¨Edenå’ŒSurvivorä¹‹é—´çš„å¤§é‡å†…å­˜å¤åˆ¶ã€‚</li><br></ul></li><br><li><ol><br><li>é•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£</li><br></ol><br><ul><br><li>è™šæ‹Ÿæœºä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªAgeè®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨Edenå‡ºç”Ÿå¹¶ç»è¿‡Minor GCå­˜æ´»è½¬ç§»åˆ°å¦ä¸€ä¸ªSurvivorç©ºé—´ä¸­æ—¶Age++ï¼Œå¢åŠ åˆ°é»˜è®¤16åˆ™è½¬ç§»åˆ°è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>åŠ¨æ€å¯¹è±¡å¹´é¾„ç»‘å®š</li><br></ol><br><ul><br><li>è™šæ‹Ÿæœºå¹¶ä¸æ˜¯æ°¸è¿œè¦æ±‚å¯¹è±¡çš„å¹´é¾„å¿…é¡»åˆ°è¾¾MaxTenuringThresholdæ‰èƒ½æ™‹å‡è€å¹´ä»£ï¼Œå¦‚æœåœ¨Survivorä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œåˆ™å¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</li><br></ul></li><br><li><ol><br><li>ç©ºé—´åˆ†é…æ‹…ä¿</li><br></ol><br><ul><br><li>åœ¨å‘ç”ŸMinor GCä¹‹å‰ï¼Œè™šæ‹Ÿæœºå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆMinor GCå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚<br><br>å¯ä»¥é€šè¿‡HandlePromotionFailureå‚æ•°è®¾ç½®å…è®¸å†’é™©ï¼Œæ­¤æ—¶è™šæ‹Ÿæœºå°†ä¸å†ä»£æ™‹å‡åˆ°è€å¹´åŒºå¯¹è±¡çš„å¹³å‡å¤§å°æ¯”è¾ƒï¼Œä»å°äºåˆ™è¦è¿›è¡Œä¸€æ¬¡Full GCã€‚<br><br>åœ¨JDK1.6.24ä¹‹åHandlePromotionFailureå·²æ— ä½œç”¨ï¼Œå³è™šæ‹Ÿæœºé»˜è®¤ä¸ºtrueã€‚</li><br></ul></li><br></ul></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Everything about ArrayList</title>
      <link href="/2020/02/08/Everything-about-ArrayList/"/>
      <url>/2020/02/08/Everything-about-ArrayList/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8"><a href="#Java-ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8" class="headerlink" title="Java ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8"></a>Java ArrayListåº•å±‚å®ç°åŸç†æºç è¯¦ç»†åˆ†æJdk8</h1><p><li>ArrayListæ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå…¶å®¹é‡èƒ½è‡ªåŠ¨å¢é•¿ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„åŠ¨æ€ç”³è¯·å†…å­˜ï¼ŒåŠ¨æ€å¢é•¿å†…å­˜ã€‚</li></p><p><li><strong>ArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ï¼Œåªèƒ½ç”¨åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯ä»¥è€ƒè™‘ç”¨Collections.synchronizedList(List l)å‡½æ•°è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayListç±»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨concurrentå¹¶å‘åŒ…ä¸‹çš„CopyOnWriteArrayListç±»ã€‚</li></p><p><li>ArrayListå®ç°äº†Serializableæ¥å£ï¼Œå› æ­¤å®ƒæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½å¤Ÿé€šè¿‡åºåˆ—åŒ–ä¼ è¾“ï¼Œå®ç°äº†RandomAccessæ¥å£ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡ä¸‹æ ‡åºå·è¿›è¡Œå¿«é€Ÿè®¿é—®ï¼Œå®ç°äº†Cloneableæ¥å£ï¼Œèƒ½è¢«å…‹éš†ã€‚</li><br></p><h4 id="å­˜å‚¨ç»“æ„">å­˜å‚¨ç»“æ„</h4><br><pre class="java"><code>// å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸åºåˆ—åŒ–<br>// è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ–<br>transient Object[] elementData;</code></pre><br><ul><br><li><p>Objectç±»å‹æ•°ç»„ã€‚</p><br><h4 id="æ•°æ®åŸŸ">æ•°æ®åŸŸ</h4></li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åºåˆ—åŒ–ID</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">8683452581122892189L</span>;</span><br><span class="line">  <span class="comment">// é»˜è®¤åˆå§‹å®¹é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</span><br><span class="line">  <span class="comment">// ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºå¸¦å‚æ„é€ å‡½æ•°åˆå§‹åŒ–å’Œè¯»å–åºåˆ—åŒ–å¯¹è±¡ç­‰ã€‚</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å’Œå®˜æ–¹æ–‡æ¡£å†™çš„ä¸€æ ·ï¼ŒDEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«</span></span><br><span class="line"><span class="comment">   * ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">   * å½“ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œæ•°ç»„å®¹é‡growåˆ°1ã€‚</span></span><br><span class="line"><span class="comment">   * å½“ç”¨æˆ·ä½¿ç”¨é»˜è®¤æ„é€ æ—¶ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œå®¹é‡ç›´æ¥growåˆ°DEFAULT_CAPACITYï¼ˆ10ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸åºåˆ—åŒ–</span></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ–</span></span><br><span class="line">  <span class="keyword">transient</span> Object[] elementData; <span class="comment">// non-private to simplify nested class access</span></span><br><span class="line">  <span class="comment">// å½“å‰æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">  <span class="comment">// æ•°ç»„æœ€å¤§å¯åˆ†é…å®¹é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line">  <span class="comment">// é›†åˆæ•°ç»„ä¿®æ”¹æ¬¡æ•°çš„æ ‡è¯†ï¼ˆç”±AbstractListç»§æ‰¿ä¸‹æ¥ï¼‰ï¼ˆfail-fastæœºåˆ¶ï¼‰</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">transient</span> <span class="keyword">int</span> modCount = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>ArrayListçš„æ— å‚æ„é€ å‡½æ•°ã€‚<strong>åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£çš„åˆ›å»º10ä¸ªç©ºé—´ï¼Œè¿™æ˜¯æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</strong></li><br><li>DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</li><br><li>modCountç”¨æ¥è®°å½•ArrayListç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ã€‚ç”¨äº<a href="#q1">Fail-Fastæœºåˆ¶</a></li><br></ul><br><br><h4 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">// åªæœ‰è¿™ä¸ªåœ°æ–¹ä¼šå¼•ç”¨DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span></span><br><span class="line">     <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (initialCapacity &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">// ä½¿ç”¨ EMPTY_ELEMENTDATAï¼Œåœ¨å…¶ä»–çš„å¤šä¸ªåœ°æ–¹å¯èƒ½ä¼šå¼•ç”¨EMPTY_ELEMENTDATA</span></span><br><span class="line">         <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal Capacity: &amp;quot;+</span><br><span class="line">                                            initialCapacity);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&amp;lt;? extends E&amp;gt; c)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// æŠŠä¼ å…¥é›†åˆä¼ åŒ–æˆ[]æ•°ç»„å¹¶æµ…æ‹·è´ç»™elementData</span></span><br><span class="line">     elementData = c.toArray();</span><br><span class="line">     <span class="comment">// è½¬åŒ–åçš„æ•°ç»„é•¿åº¦èµ‹ç»™å½“å‰ArrayListçš„size,å¹¶åˆ¤æ–­æ˜¯å¦ä¸º0</span></span><br><span class="line">     <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">//c.toArrayå¯èƒ½ä¸ä¼šè¿”å› Object[]ï¼Œå¯ä»¥æŸ¥çœ‹ java å®˜æ–¹ç¼–å·ä¸º 6260652 çš„ bug</span></span><br><span class="line">         <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">             <span class="comment">// è‹¥ c.toArray() è¿”å›çš„æ•°ç»„ç±»å‹ä¸æ˜¯ Object[]ï¼Œåˆ™åˆ©ç”¨ Arrays.copyOf(); æ¥æ„é€ ä¸€ä¸ªå¤§å°ä¸º size çš„ Object[] æ•°ç»„</span></span><br><span class="line">             <span class="comment">// æ­¤æ—¶elementDataæ˜¯æŒ‡å‘ä¼ å…¥é›†åˆçš„å†…å­˜ï¼Œè¿˜éœ€è¦åˆ›å»ºæ–°çš„å†…å­˜åŒºåŸŸæ·±æ‹·è´ç»™elementData</span></span><br><span class="line">             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">// ä¼ å…¥æ•°ç»„sizeä¸ºé›¶æ›¿æ¢ç©ºæ•°ç»„</span></span><br><span class="line">         <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ul><br><li>DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æ„é€ å’Œé»˜è®¤æ„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚</li><br><li>æ³¨æ„<strong>æ·±æ‹·è´å’Œæµ…æ‹·è´</strong>ã€‚</li><br><li><p>å¸¦å‚ä¸º0çš„æ„é€ ä¼šæƒ°æ€§åˆå§‹åŒ–ï¼Œä¸ä¸º0çš„æ„é€ åˆ™ä¸ä¼šæƒ°æ€§åˆå§‹åŒ–ã€‚</p><br><h4 id="addæºç è§£æ">add()æºç è§£æ</h4></li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">        <span class="comment">// æ•°ç»„çš„ä¸‹ä¸€ä¸ªindexå­˜æ”¾ä¼ å…¥å…ƒç´ ã€‚</span></span><br><span class="line">        elementData[size++] = e;</span><br><span class="line">        <span class="comment">// å§‹ç»ˆè¿”å›trueã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå°±æ˜¯DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’Œ</span></span><br><span class="line">        <span class="comment">// EMPTY_ELEMENTDATA æœ€ä¸»è¦çš„åŒºåˆ«ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            <span class="comment">// é»˜è®¤æ„é€ ç¬¬ä¸€æ¬¡addè¿”å›10ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¸¦å‚ä¸º0æ„é€ ç¬¬ä¸€æ¬¡addè¿”å› 1 ï¼ˆ0 + 1ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è‡ªå¢ä¿®æ”¹è®¡æ•°</span></span><br><span class="line">        modCount++;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="comment">// å½“å‰æ•°ç»„å®¹é‡å°äºéœ€è¦çš„æœ€å°å®¹é‡</span></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &amp;gt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// å‡†å¤‡æ‰©å®¹æ•°ç»„</span></span><br><span class="line">            grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="comment">// è·å¾—å½“å‰æ•°ç»„å®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">        <span class="comment">// æ–°æ•°ç»„å®¹é‡ä¸º1.5å€çš„æ—§æ•°ç»„å®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &amp;gt;&amp;gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &amp;lt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// è‹¥ newCapacity ä¾æ—§å°äº minCapacity</span></span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯éœ€è¦çš„å®¹é‡æ˜¯å¦è¶…è¿‡æœ€å¤§çš„æ•°ç»„å®¹é‡ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &amp;gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">        <span class="comment">// åœ¨Arrays.copyOf()ä¸­ä¼šå°†åŸæ•°ç»„æ•´ä¸ªèµ‹å€¼åˆ°æ‰©å®¹çš„æ•°ç»„ä¸­ã€‚</span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨Arrays.copyOf()æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»ºArrayListå¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚</li><br></ul><br><h4 id="addint-index-e-elementæºç åˆ†æ">add(int index, E element)æºç åˆ†æ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œç”±Cè¯­è¨€å®ç°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">arraycopy</span><span class="params">(Object src,  // æºæ•°ç»„</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span>  srcPos, // æºæ•°ç»„è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®</span></span></span><br><span class="line"><span class="function"><span class="params">                                    Object dest, // ç›®æ ‡æ•°ç»„ï¼ˆå°†åŸæ•°ç»„å¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„ï¼‰</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span> destPos, // ç›®æ ‡æ•°ç»„èµ·å§‹ä½ç½®ï¼ˆä»ç›®æ ‡æ•°ç»„çš„å“ªä¸ªä¸‹æ ‡å¼€å§‹å¤åˆ¶æ“ä½œï¼‰</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">int</span> length   // å¤åˆ¶æºæ•°ç»„çš„é•¿åº¦</span></span></span><br><span class="line"><span class="function"><span class="params">                                    )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ç´¢å¼•æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">        rangeCheckForAdd(index);</span><br><span class="line">        <span class="comment">// ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">        <span class="comment">// è¿è¡Œåˆ°è¿™é‡Œä»£è¡¨æ•°ç»„å®¹é‡æ»¡è¶³ã€‚</span></span><br><span class="line">        <span class="comment">// æ•°ç»„ä»ä¼ å…¥å½¢å‚indexå¤„å¼€å§‹å¤åˆ¶ï¼Œå¤åˆ¶size-indexä¸ªå…ƒç´ ï¼ˆå³åŒ…æ‹¬indexåœ¨å†…åé¢çš„å…ƒç´ å…¨éƒ¨å¤åˆ¶ï¼‰ï¼Œ</span></span><br><span class="line">        <span class="comment">// ä»æ•°ç»„çš„index + 1å¤„å¼€å§‹ç²˜è´´ã€‚</span></span><br><span class="line">        <span class="comment">// è¿™æ—¶ï¼Œindex å’Œ index + 1å¤„å…ƒç´ æ•°å€¼ç›¸åŒã€‚</span></span><br><span class="line">        System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                         size - index);</span><br><span class="line">        <span class="comment">// æŠŠindexå¤„çš„å…ƒç´ æ›¿æ¢æˆæ–°çš„å…ƒç´ ã€‚</span></span><br><span class="line">        elementData[index] = element;</span><br><span class="line">        <span class="comment">// æ•°ç»„å†…å…ƒç´ é•¿åº¦åŠ ä¸€ã€‚</span></span><br><span class="line">        size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬indexåœ¨å†…åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°index + 1ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢åŠ å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</li><br></ul><br><h4 id="removeint-indexæºç åˆ†æ">remove(int index)æºç åˆ†æ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥index</span></span><br><span class="line">        rangeCheck(index);</span><br><span class="line"></span><br><span class="line">        modCount++;</span><br><span class="line">        E oldValue = elementData(index);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (numMoved &amp;gt; <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// å’Œ add(int index, E element)åŸç†æƒ³é€šã€‚</span></span><br><span class="line">            System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">        <span class="comment">// å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</span></span><br><span class="line">        elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">        <span class="comment">// è¿”å›æ—§å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬index + 1åœ¨å†…åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°indexä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢åŠ å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</li><br></ul><br><h4 id="q1">Fail-Fastæœºåˆ¶</h4><br><p>fail-fast æœºåˆ¶ï¼Œå³å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼Œæ˜¯javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“åœ¨è¿­ä»£é›†åˆçš„è¿‡ç¨‹ä¸­è¯¥é›†åˆåœ¨ç»“æ„ä¸Šå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½ä¼šå‘ç”Ÿfail-fastï¼Œå³æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚fail-fastæœºåˆ¶å¹¶ä¸ä¿è¯åœ¨ä¸åŒæ­¥çš„ä¿®æ”¹ä¸‹ä¸€å®šä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒåªæ˜¯å°½æœ€å¤§åŠªåŠ›å»æŠ›å‡ºï¼Œæ‰€ä»¥è¿™ç§æœºåˆ¶ä¸€èˆ¬ä»…ç”¨äºæ£€æµ‹bugã€‚</p><br><ul><br><li>ç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚</li><br><li>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰åmodCountæ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦è·‘å‡ºConcurrentModificationException</li><br></ul><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&amp;<span class="title">lt</span></span>;E&amp;gt; &#123;</span><br><span class="line">        <span class="keyword">int</span> cursor;</span><br><span class="line">        <span class="keyword">int</span> lastRet = -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// æœŸå¾…çš„ä¿®æ”¹å€¼ç­‰äºå½“å‰ä¿®æ”¹æ¬¡æ•°ï¼ˆmodCountï¼‰</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥ expectedModCountæ˜¯å¦ç­‰äºmodCountï¼Œä¸ç›¸åŒåˆ™æŠ›å‡ºConcurrentModificationException</span></span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="comment">/** çœç•¥æ­¤å¤„ä»£ç  */</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.lastRet &amp;lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="comment">/** çœç•¥æ­¤å¤„ä»£ç  */</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (ArrayList.<span class="keyword">this</span>.modCount == <span class="keyword">this</span>.expectedModCount)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><p>ä¸€ä¸ªå•çº¿ç¨‹ç¯å¢ƒä¸‹çš„fail-fastçš„ä¾‹å­</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       List&amp;lt;String&amp;gt; list = <span class="keyword">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &amp;lt; <span class="number">10</span> ; i++ ) &#123;</span><br><span class="line">            list.add(i + &amp;quot;&amp;quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       Iterator&amp;lt;String&amp;gt; iterator = list.iterator();</span><br><span class="line">       <span class="keyword">int</span> i = <span class="number">0</span> ;</span><br><span class="line">       <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">                 list.remove(<span class="number">3</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">            i ++;</span><br><span class="line">       &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><br><br><h4 id="åºåˆ—åŒ–">åºåˆ—åŒ–</h4><br><p>ArrayList å®ç°äº† java.io.Serializable æ¥å£ï¼Œä½†æ˜¯è‡ªå·±å®šä¹‰äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å› ä¸ºArrayListåŸºäºæ•°ç»„å®ç°ï¼Œå¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰<strong>å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–</strong>ã€‚å› æ­¤ elementData æ•°ç»„ä½¿ç”¨ transient ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢è¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚</p><br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">        <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">        <span class="comment">// å°†å½“å‰ç±»çš„éé™æ€(non-static)å’Œéç¬æ€(non-transient)å­—æ®µå†™å…¥æµ</span></span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œä¹Ÿä¼šå°†sizeå­—æ®µå†™å…¥ã€‚</span></span><br><span class="line">        s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">        <span class="comment">// åºåˆ—åŒ–æ•°ç»„åŒ…å«å…ƒç´ æ•°é‡ï¼Œä¸ºäº†å‘åå…¼å®¹</span></span><br><span class="line">        <span class="comment">// ä¸¤æ¬¡å°†sizeå†™å…¥æµ</span></span><br><span class="line">        s.writeInt(size);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">        <span class="comment">// æŒ‰ç…§é¡ºåºå†™å…¥ï¼Œåªå†™å…¥åˆ°æ•°ç»„åŒ…å«å…ƒç´ çš„ç»“å°¾ï¼Œå¹¶ä¸ä¼šæŠŠæ•°ç»„çš„æ‰€æœ‰å®¹é‡åŒºåŸŸå…¨éƒ¨å†™å…¥</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&amp;lt;size; i++) &#123;</span><br><span class="line">            s.writeObject(elementData[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦è§¦å‘Fast-Fail</span></span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®æ•°ç»„å¼•ç”¨ç©ºæ•°ç»„ã€‚</span></span><br><span class="line">        elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">        <span class="comment">// å°†æµä¸­çš„çš„éé™æ€(non-static)å’Œéç¬æ€(non-transient)å­—æ®µè¯»å–åˆ°å½“å‰ç±»</span></span><br><span class="line">        <span class="comment">// åŒ…å« size</span></span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in capacity</span></span><br><span class="line">        <span class="comment">// è¯»å…¥å…ƒç´ ä¸ªæ•°ï¼Œæ²¡ä»€ä¹ˆç”¨ï¼Œåªæ˜¯å› ä¸ºå†™å‡ºçš„æ—¶å€™å†™äº†sizeå±æ€§ï¼Œè¯»çš„æ—¶å€™ä¹Ÿè¦æŒ‰é¡ºåºæ¥è¯»</span></span><br><span class="line">        s.readInt(); <span class="comment">// ignored</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (size &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">            <span class="comment">// æ ¹æ®sizeè®¡ç®—å®¹é‡ã€‚</span></span><br><span class="line">            <span class="keyword">int</span> capacity = calculateCapacity(elementData, size);</span><br><span class="line">            <span class="comment">// SharedSecrets ä¸€ä¸ªâ€œå…±äº«æœºå¯†â€å­˜å‚¨åº“ï¼Œå®ƒæ˜¯ä¸€ç§æœºåˆ¶ï¼Œ</span></span><br><span class="line">            <span class="comment">// ç”¨äºè°ƒç”¨å¦ä¸€ä¸ªåŒ…ä¸­çš„å®ç°ä¸“ç”¨æ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨åå°„ã€‚TODO</span></span><br><span class="line">            SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);</span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line">            ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">            Object[] a = elementData;</span><br><span class="line">            <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">            <span class="comment">// ä¾æ¬¡è¯»å–å…ƒç´ åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&amp;lt;size; i++) &#123;</span><br><span class="line">                a[i] = s.readObject();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><p>ArrayListä¸­ä¸ºä»€ä¹ˆsizeè¦åºåˆ—åŒ–ä¸¤æ¬¡ï¼Ÿ</p><br><blockquote><br><p>åœ¨ä»£ç ä¸­s.defaultWriteObject();ä¸­sizeåº”è¯¥ä¹Ÿè¢«åºåˆ—åŒ–äº†ï¼Œä¸ºä»€ä¹ˆä¸‹è¾¹è¿˜è¦å†å•ç‹¬åºåˆ—åŒ–ä¸€æ¬¡å‘¢ï¼Ÿ<br><br>è¿™æ ·å†™æ˜¯å‡ºäºå…¼å®¹æ€§è€ƒè™‘ã€‚<br><br>æ—§ç‰ˆæœ¬çš„JDKä¸­ï¼ŒArrayListçš„å®ç°æœ‰æ‰€ä¸åŒï¼Œä¼šå¯¹lengthå­—æ®µè¿›è¡Œåºåˆ—åŒ–ã€‚<br><br>è€Œæ–°ç‰ˆçš„JDKä¸­ï¼Œå¯¹ä¼˜åŒ–äº†ArrayListçš„å®ç°ï¼Œä¸å†åºåˆ—åŒ–lengthå­—æ®µã€‚<br><br>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœå»æ‰s.writeInt(size)ï¼Œé‚£ä¹ˆæ–°ç‰ˆæœ¬JDKåºåˆ—åŒ–çš„å¯¹è±¡ï¼Œåœ¨æ—§ç‰ˆæœ¬ä¸­å°±æ— æ³•æ­£ç¡®è¯»å–ï¼Œ<br><br>å› ä¸ºç¼ºå°‘äº†lengthå­—æ®µã€‚<br><br>å› æ­¤è¿™ç§å†™æ³•çœ‹èµ·æ¥å¤šæ­¤ä¸€ä¸¾ï¼Œå®é™…ä¸Šå´ä¿è¯äº†å…¼å®¹æ€§ã€‚</p><br></blockquote><br><br>### å°ç»“<br><ul><br><li>ArrayListåŸºäºæ•°ç»„æ–¹å¼å®ç°ï¼Œæ— å®¹é‡çš„é™åˆ¶ï¼ˆä¼šæ‰©å®¹ï¼‰</li><br><li>æ·»åŠ å…ƒç´ æ—¶å¯èƒ½è¦æ‰©å®¹ï¼ˆæ‰€ä»¥æœ€å¥½é¢„åˆ¤ä¸€ä¸‹ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ä¸ä¼šå‡å°‘å®¹é‡ï¼ˆè‹¥å¸Œæœ›å‡å°‘å®¹é‡å¯ä»¥ä½¿ç”¨trimToSize()ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ï¼Œå°†åˆ é™¤æ‰çš„ä½ç½®å…ƒç´ ç½®ä¸ºnullï¼Œä¸‹æ¬¡gcå°±ä¼šå›æ”¶è¿™äº›å…ƒç´ æ‰€å çš„å†…å­˜ç©ºé—´ã€‚</li><br><li>çº¿ç¨‹ä¸å®‰å…¨</li><br><li>add(int index, E element)ï¼šæ·»åŠ å…ƒç´ åˆ°æ•°ç»„ä¸­æŒ‡å®šä½ç½®çš„æ—¶å€™ï¼Œéœ€è¦å°†è¯¥ä½ç½®åŠå…¶åè¾¹æ‰€æœ‰çš„å…ƒç´ éƒ½æ•´å—å‘åå¤åˆ¶ä¸€ä½</li><br><li>get(int index)ï¼šè·å–æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è·å–ï¼ˆO(1)ï¼‰</li><br><li>remove(Object o)éœ€è¦éå†æ•°ç»„</li><br><li>remove(int index)ä¸éœ€è¦éå†æ•°ç»„ï¼Œåªéœ€åˆ¤æ–­indexæ˜¯å¦ç¬¦åˆæ¡ä»¶å³å¯ï¼Œæ•ˆç‡æ¯”remove(Object o)é«˜</li><br><li>contains(E)éœ€è¦éå†æ•°ç»„</li><br></ul><p><a href="https://www.cnblogs.com/renjiaqi/p/10403725.html" target="_blank" rel="noopener">é¢è¯•å¿…ä¼šä¹‹ArrayListæºç åˆ†æ&amp;æ‰‹å†™ArrayList</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Analyst of SourceCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The data structure and algorithm behind the MySQL index</title>
      <link href="/2020/02/05/The-data-structure-and-algorithm-behind-the-MySQL-index/"/>
      <url>/2020/02/05/The-data-structure-and-algorithm-behind-the-MySQL-index/</url>
      
        <content type="html"><![CDATA[<p></p><p>æ–‡ç« ä¸»è¦å†…å®¹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><p></p><p></p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦ä»æ•°æ®ç»“æ„åŠç®—æ³•ç†è®ºå±‚é¢è®¨è®ºMySQLæ•°æ®åº“ç´¢å¼•çš„æ•°ç†åŸºç¡€ã€‚</p><p></p><p></p><p>ç¬¬äºŒéƒ¨åˆ†ç»“åˆMySQLæ•°æ®åº“ä¸­MyISAMå’ŒInnoDBæ•°æ®å­˜å‚¨å¼•æ“ä¸­ç´¢å¼•çš„æ¶æ„å®ç°è®¨è®ºèšé›†ç´¢å¼•ã€éèšé›†ç´¢å¼•åŠè¦†ç›–ç´¢å¼•ç­‰è¯é¢˜ã€‚</p><p></p><p></p><p>ç¬¬ä¸‰éƒ¨åˆ†æ ¹æ®ä¸Šé¢çš„ç†è®ºåŸºç¡€ï¼Œè®¨è®ºMySQLä¸­é«˜æ€§èƒ½ä½¿ç”¨ç´¢å¼•çš„ç­–ç•¥ã€‚<br><a id="more"></a><br></p><p></p><p></p><h1><a name="nav-2"></a>æ•°æ®ç»“æ„åŠç®—æ³•åŸºç¡€</h1><p></p><p></p><h2><a name="nav-2-1"></a>ç´¢å¼•çš„æœ¬è´¨</h2><p></p><p></p><p>MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼šç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚æå–å¥å­ä¸»å¹²ï¼Œå°±å¯ä»¥å¾—åˆ°ç´¢å¼•çš„æœ¬è´¨ï¼šç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ•°æ®åº“æŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æœ€ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ã€‚æˆ‘ä»¬éƒ½å¸Œæœ›æŸ¥è¯¢æ•°æ®çš„é€Ÿåº¦èƒ½å°½å¯èƒ½çš„å¿«ï¼Œå› æ­¤æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…ä¼šä»æŸ¥è¯¢ç®—æ³•çš„è§’åº¦è¿›è¡Œä¼˜åŒ–ã€‚æœ€åŸºæœ¬çš„æŸ¥è¯¢ç®—æ³•å½“ç„¶æ˜¯<a href="http://en.wikipedia.org/wiki/Linear_search" target="_blank">é¡ºåºæŸ¥æ‰¾</a>ï¼ˆlinear searchï¼‰ï¼Œè¿™ç§å¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶æ˜¾ç„¶æ˜¯ç³Ÿç³•çš„ï¼Œå¥½åœ¨è®¡ç®—æœºç§‘å­¦çš„å‘å±•æä¾›äº†å¾ˆå¤šæ›´ä¼˜ç§€çš„æŸ¥æ‰¾ç®—æ³•ï¼Œä¾‹å¦‚<a href="http://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank">äºŒåˆ†æŸ¥æ‰¾</a>ï¼ˆbinary searchï¼‰ã€<a href="http://en.wikipedia.org/wiki/Binary_search_tree" target="_blank">äºŒå‰æ ‘æŸ¥æ‰¾</a>ï¼ˆbinary tree searchï¼‰ç­‰ã€‚å¦‚æœç¨å¾®åˆ†æä¸€ä¸‹ä¼šå‘ç°ï¼Œæ¯ç§æŸ¥æ‰¾ç®—æ³•éƒ½åªèƒ½åº”ç”¨äºç‰¹å®šçš„æ•°æ®ç»“æ„ä¹‹ä¸Šï¼Œä¾‹å¦‚äºŒåˆ†æŸ¥æ‰¾è¦æ±‚è¢«æ£€ç´¢æ•°æ®æœ‰åºï¼Œè€ŒäºŒå‰æ ‘æŸ¥æ‰¾åªèƒ½åº”ç”¨äº<a href="http://en.wikipedia.org/wiki/Binary_search_tree" target="_blank">äºŒå‰æŸ¥æ‰¾æ ‘</a>ä¸Šï¼Œä½†æ˜¯æ•°æ®æœ¬èº«çš„ç»„ç»‡ç»“æ„ä¸å¯èƒ½å®Œå…¨æ»¡è¶³å„ç§æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œç†è®ºä¸Šä¸å¯èƒ½åŒæ—¶å°†ä¸¤åˆ—éƒ½æŒ‰é¡ºåºè¿›è¡Œç»„ç»‡ï¼‰ï¼Œæ‰€ä»¥ï¼Œåœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ç§æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç´¢å¼•ã€‚</p><p></p><p></p><p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/1.png"></p><p></p><p></p><p align="center">å›¾1</p><p></p><p></p><p>å›¾1å±•ç¤ºäº†ä¸€ç§å¯èƒ½çš„ç´¢å¼•æ–¹å¼ã€‚å·¦è¾¹æ˜¯æ•°æ®è¡¨ï¼Œä¸€å…±æœ‰ä¸¤åˆ—ä¸ƒæ¡è®°å½•ï¼Œæœ€å·¦è¾¹çš„æ˜¯æ•°æ®è®°å½•çš„ç‰©ç†åœ°å€ï¼ˆæ³¨æ„é€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•åœ¨ç£ç›˜ä¸Šä¹Ÿå¹¶ä¸æ˜¯ä¸€å®šç‰©ç†ç›¸é‚»çš„ï¼‰ã€‚ä¸ºäº†åŠ å¿«Col2çš„æŸ¥æ‰¾ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå³è¾¹æ‰€ç¤ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘å¯¹åº”æ•°æ®è®°å½•ç‰©ç†åœ°å€çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨äºŒå‰æŸ¥æ‰¾åœ¨(O(log_2n))çš„å¤æ‚åº¦å†…è·å–åˆ°ç›¸åº”æ•°æ®ã€‚</p><p></p><p></p><p>è™½ç„¶è¿™æ˜¯ä¸€ä¸ªè´§çœŸä»·å®çš„ç´¢å¼•ï¼Œä½†æ˜¯å®é™…çš„æ•°æ®åº“ç³»ç»Ÿå‡ ä¹æ²¡æœ‰ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ–å…¶è¿›åŒ–å“ç§<a href="http://en.wikipedia.org/wiki/Red-black_tree" target="_blank">çº¢é»‘æ ‘</a>ï¼ˆred-black treeï¼‰å®ç°çš„ï¼ŒåŸå› ä¼šåœ¨ä¸‹æ–‡ä»‹ç»ã€‚</p><p></p><p></p><h2><a name="nav-2-2"></a>B-Treeå’ŒB+Tree</h2><p></p><p></p><p>ç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»ŸåŠæ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨B-Treeæˆ–å…¶å˜ç§B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œåœ¨æœ¬æ–‡çš„ä¸‹ä¸€èŠ‚ä¼šç»“åˆå­˜å‚¨å™¨åŸç†åŠè®¡ç®—æœºå­˜å–åŸç†è®¨è®ºä¸ºä»€ä¹ˆB-Treeå’ŒB+Treeåœ¨è¢«å¦‚æ­¤å¹¿æ³›ç”¨äºç´¢å¼•ï¼Œè¿™ä¸€èŠ‚å…ˆå•çº¯ä»æ•°æ®ç»“æ„è§’åº¦æè¿°å®ƒä»¬ã€‚</p><p></p><p></p><h3>B-Tree</h3><p></p><p></p><p>ä¸ºäº†æè¿°B-Treeï¼Œé¦–å…ˆå®šä¹‰ä¸€æ¡æ•°æ®è®°å½•ä¸ºä¸€ä¸ªäºŒå…ƒç»„[key, data]ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹äºä¸åŒæ•°æ®è®°å½•ï¼Œkeyæ˜¯äº’ä¸ç›¸åŒçš„ï¼›dataä¸ºæ•°æ®è®°å½•é™¤keyå¤–çš„æ•°æ®ã€‚é‚£ä¹ˆB-Treeæ˜¯æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„æ•°æ®ç»“æ„ï¼š</p><p></p><p></p><p>dä¸ºå¤§äº1çš„ä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„åº¦ã€‚</p><p></p><p></p><p>hä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„é«˜åº¦ã€‚</p><p></p><p></p><p>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ç”±n-1ä¸ªkeyå’Œnä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­d&lt;=n&lt;=2dã€‚</p><p></p><p></p><p>æ¯ä¸ªå¶å­èŠ‚ç‚¹æœ€å°‘åŒ…å«ä¸€ä¸ªkeyå’Œä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€å¤šåŒ…å«2d-1ä¸ªkeyå’Œ2dä¸ªæŒ‡é’ˆï¼Œå¶èŠ‚ç‚¹çš„æŒ‡é’ˆå‡ä¸ºnull ã€‚</p><p></p><p></p><p>æ‰€æœ‰å¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ·±åº¦ï¼Œç­‰äºæ ‘é«˜hã€‚</p><p></p><p></p><p>keyå’ŒæŒ‡é’ˆäº’ç›¸é—´éš”ï¼ŒèŠ‚ç‚¹ä¸¤ç«¯æ˜¯æŒ‡é’ˆã€‚</p><p></p><p></p><p>ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„keyä»å·¦åˆ°å³éé€’å‡æ’åˆ—ã€‚</p><p></p><p></p><p>æ‰€æœ‰èŠ‚ç‚¹ç»„æˆæ ‘ç»“æ„ã€‚</p><p></p><p></p><p>æ¯ä¸ªæŒ‡é’ˆè¦ä¹ˆä¸ºnullï¼Œè¦ä¹ˆæŒ‡å‘å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å·¦è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äº(v(key_1))ï¼Œå…¶ä¸­(v(key_1))ä¸ºnodeçš„ç¬¬ä¸€ä¸ªkeyçš„å€¼ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å³è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå¤§äº(v(key_m))ï¼Œå…¶ä¸­(v(key_m))ä¸ºnodeçš„æœ€åä¸€ä¸ªkeyçš„å€¼ã€‚</p><p></p><p></p><p>å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeçš„å·¦å³ç›¸é‚»keyåˆ†åˆ«æ˜¯(key_i)å’Œ(key_{i+1})ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äº(v(key_{i+1}))ä¸”å¤§äº(v(key_i))ã€‚</p><p></p><p></p><p>å›¾2æ˜¯ä¸€ä¸ªd=2çš„B-Treeç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/2.png"></p><p></p><p></p><p align="center">å›¾2</p><p></p><p></p><p>ç”±äºB-Treeçš„ç‰¹æ€§ï¼Œåœ¨B-Treeä¸­æŒ‰keyæ£€ç´¢æ•°æ®çš„ç®—æ³•éå¸¸ç›´è§‚ï¼šé¦–å…ˆä»æ ¹èŠ‚ç‚¹è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›å¯¹åº”èŠ‚ç‚¹çš„dataï¼Œå¦åˆ™å¯¹ç›¸åº”åŒºé—´çš„æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹é€’å½’è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°èŠ‚ç‚¹æˆ–æ‰¾åˆ°nullæŒ‡é’ˆï¼Œå‰è€…æŸ¥æ‰¾æˆåŠŸï¼Œåè€…æŸ¥æ‰¾å¤±è´¥ã€‚B-Treeä¸ŠæŸ¥æ‰¾ç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre <span class="class"><span class="keyword">class</span></span>=<span class="string">"prettyprint linenums"</span>&gt;BTree_Search(node, key) &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    foreach(node.key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(node.key[i] == key) <span class="keyword">return</span> node.data[i];</span><br><span class="line">            <span class="keyword">if</span>(node.key[i] &amp;gt; key) <span class="keyword">return</span> BTree_Search(point[i]-&amp;gt;node);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> BTree_Search(point[i+<span class="number">1</span>]-&amp;gt;node);</span><br><span class="line">&#125;</span><br><span class="line">data = BTree_Search(root, my_key);&lt;/pre&gt;</span><br></pre></td></tr></table></figure><p></p><p>å…³äºB-Treeæœ‰ä¸€ç³»åˆ—æœ‰è¶£çš„æ€§è´¨ï¼Œä¾‹å¦‚ä¸€ä¸ªåº¦ä¸ºdçš„B-Treeï¼Œè®¾å…¶ç´¢å¼•Nä¸ªkeyï¼Œåˆ™å…¶æ ‘é«˜hçš„ä¸Šé™ä¸º(log_d((N+1)/2))ï¼Œæ£€ç´¢ä¸€ä¸ªkeyï¼Œå…¶æŸ¥æ‰¾èŠ‚ç‚¹ä¸ªæ•°çš„æ¸è¿›å¤æ‚åº¦ä¸º(O(log_dN))ã€‚ä»è¿™ç‚¹å¯ä»¥çœ‹å‡ºï¼ŒB-Treeæ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆç‡çš„ç´¢å¼•æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><p>å¦å¤–ï¼Œç”±äºæ’å…¥åˆ é™¤æ–°çš„æ•°æ®è®°å½•ä¼šç ´åB-Treeçš„æ€§è´¨ï¼Œå› æ­¤åœ¨æ’å…¥åˆ é™¤æ—¶ï¼Œéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€ä¸ªåˆ†è£‚ã€åˆå¹¶ã€è½¬ç§»ç­‰æ“ä½œä»¥ä¿æŒB-Treeæ€§è´¨ï¼Œæœ¬æ–‡ä¸æ‰“ç®—å®Œæ•´è®¨è®ºB-Treeè¿™äº›å†…å®¹ï¼Œå› ä¸ºå·²ç»æœ‰è®¸å¤šèµ„æ–™è¯¦ç»†è¯´æ˜äº†B-Treeçš„æ•°å­¦æ€§è´¨åŠæ’å…¥åˆ é™¤ç®—æ³•ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨æœ¬æ–‡æœ«çš„å‚è€ƒæ–‡çŒ®ä¸€æ æ‰¾åˆ°ç›¸åº”çš„èµ„æ–™è¿›è¡Œé˜…è¯»ã€‚</p><p></p><p></p><h3>B+Tree</h3><p></p><p></p><p>B-Treeæœ‰è®¸å¤šå˜ç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ˜¯B+Treeï¼Œä¾‹å¦‚MySQLå°±æ™®éä½¿ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</p><p></p><p></p><p>ä¸B-Treeç›¸æ¯”ï¼ŒB+Treeæœ‰ä»¥ä¸‹ä¸åŒç‚¹ï¼š</p><p></p><p></p><p>æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆä¸Šé™ä¸º2dè€Œä¸æ˜¯2d+1ã€‚</p><p></p><p></p><p>å†…èŠ‚ç‚¹ä¸å­˜å‚¨dataï¼Œåªå­˜å‚¨keyï¼›å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æŒ‡é’ˆã€‚</p><p></p><p></p><p>å›¾3æ˜¯ä¸€ä¸ªç®€å•çš„B+Treeç¤ºæ„ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/3.png"></p><p></p><p></p><p align="center">å›¾3</p><p></p><p></p><p>ç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„åŸŸï¼Œå› æ­¤B+Treeä¸­å¶èŠ‚ç‚¹å’Œå†…èŠ‚ç‚¹ä¸€èˆ¬å¤§å°ä¸åŒã€‚è¿™ç‚¹ä¸B-Treeä¸åŒï¼Œè™½ç„¶B-Treeä¸­ä¸åŒèŠ‚ç‚¹å­˜æ”¾çš„keyå’ŒæŒ‡é’ˆå¯èƒ½æ•°é‡ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„åŸŸå’Œä¸Šé™æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸­B-Treeå¾€å¾€å¯¹æ¯ä¸ªèŠ‚ç‚¹ç”³è¯·åŒç­‰å¤§å°çš„ç©ºé—´ã€‚</p><p></p><p></p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒB+Treeæ¯”B-Treeæ›´é€‚åˆå®ç°å¤–å­˜å‚¨ç´¢å¼•ç»“æ„ï¼Œå…·ä½“åŸå› ä¸å¤–å­˜å‚¨å™¨åŸç†åŠè®¡ç®—æœºå­˜å–åŸç†æœ‰å…³ï¼Œå°†åœ¨ä¸‹é¢è®¨è®ºã€‚</p><p></p><p></p><h3>å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree</h3><p></p><p></p><p>ä¸€èˆ¬åœ¨æ•°æ®åº“ç³»ç»Ÿæˆ–æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨çš„B+Treeç»“æ„éƒ½åœ¨ç»å…¸B+Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/4.png"></p><p></p><p></p><p align="center">å›¾4</p><p></p><p></p><p>å¦‚å›¾4æ‰€ç¤ºï¼Œåœ¨B+Treeçš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeã€‚åšè¿™ä¸ªä¼˜åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼Œä¾‹å¦‚å›¾4ä¸­å¦‚æœè¦æŸ¥è¯¢keyä¸ºä»18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åï¼Œåªéœ€é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéå†å°±å¯ä»¥ä¸€æ¬¡æ€§è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæå¤§æåˆ°äº†åŒºé—´æŸ¥è¯¢æ•ˆç‡ã€‚</p><p></p><p></p><p>è¿™ä¸€èŠ‚å¯¹B-Treeå’ŒB+Treeè¿›è¡Œäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œä¸‹ä¸€èŠ‚ç»“åˆå­˜å‚¨å™¨å­˜å–åŸç†ä»‹ç»ä¸ºä»€ä¹ˆç›®å‰B+Treeæ˜¯æ•°æ®åº“ç³»ç»Ÿå®ç°ç´¢å¼•çš„é¦–é€‰æ•°æ®ç»“æ„ã€‚</p><p></p><p></p><h2><a name="nav-2-3"></a>ä¸ºä»€ä¹ˆä½¿ç”¨B-Treeï¼ˆB+Treeï¼‰</h2><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ï¼Œçº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨B-/+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œè¿™ä¸€èŠ‚å°†ç»“åˆè®¡ç®—æœºç»„æˆåŸç†ç›¸å…³çŸ¥è¯†è®¨è®ºB-/+Treeä½œä¸ºç´¢å¼•çš„ç†è®ºåŸºç¡€ã€‚</p><p></p><p></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿç£ç›˜I/Oæ¶ˆè€—ï¼Œç›¸å¯¹äºå†…å­˜å­˜å–ï¼ŒI/Oå­˜å–çš„æ¶ˆè€—è¦é«˜å‡ ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥è¯„ä»·ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•çš„ä¼˜åŠ£æœ€é‡è¦çš„æŒ‡æ ‡å°±æ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oæ“ä½œæ¬¡æ•°çš„æ¸è¿›å¤æ‚åº¦ã€‚æ¢å¥è¯è¯´ï¼Œç´¢å¼•çš„ç»“æ„ç»„ç»‡è¦å°½é‡å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oçš„å­˜å–æ¬¡æ•°ã€‚ä¸‹é¢å…ˆä»‹ç»å†…å­˜å’Œç£ç›˜å­˜å–åŸç†ï¼Œç„¶åå†ç»“åˆè¿™äº›åŸç†åˆ†æB-/+Treeä½œä¸ºç´¢å¼•çš„æ•ˆç‡ã€‚</p><p></p><p></p><h3>ä¸»å­˜å­˜å–åŸç†</h3><p></p><p></p><p>ç›®å‰è®¡ç®—æœºä½¿ç”¨çš„ä¸»å­˜åŸºæœ¬éƒ½æ˜¯éšæœºè¯»å†™å­˜å‚¨å™¨ï¼ˆRAMï¼‰ï¼Œç°ä»£RAMçš„ç»“æ„å’Œå­˜å–åŸç†æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæœ¬æ–‡æŠ›å´å…·ä½“å·®åˆ«ï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªååˆ†ç®€å•çš„å­˜å–æ¨¡å‹æ¥è¯´æ˜RAMçš„å·¥ä½œåŸç†ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/5.png"></p><p></p><p></p><p align="center">å›¾5</p><p></p><p></p><p>ä»æŠ½è±¡è§’åº¦çœ‹ï¼Œä¸»å­˜æ˜¯ä¸€ç³»åˆ—çš„å­˜å‚¨å•å…ƒç»„æˆçš„çŸ©é˜µï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒå­˜å‚¨å›ºå®šå¤§å°çš„æ•°æ®ã€‚æ¯ä¸ªå­˜å‚¨å•å…ƒæœ‰å”¯ä¸€çš„åœ°å€ï¼Œç°ä»£ä¸»å­˜çš„ç¼–å€è§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°†å…¶ç®€åŒ–æˆä¸€ä¸ªäºŒç»´åœ°å€ï¼šé€šè¿‡ä¸€ä¸ªè¡Œåœ°å€å’Œä¸€ä¸ªåˆ—åœ°å€å¯ä»¥å”¯ä¸€å®šä½åˆ°ä¸€ä¸ªå­˜å‚¨å•å…ƒã€‚å›¾5å±•ç¤ºäº†ä¸€ä¸ª4 x 4çš„ä¸»å­˜æ¨¡å‹ã€‚</p><p></p><p></p><p>ä¸»å­˜çš„å­˜å–è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p></p><p></p><p>å½“ç³»ç»Ÿéœ€è¦è¯»å–ä¸»å­˜æ—¶ï¼Œåˆ™å°†åœ°å€ä¿¡å·æ”¾åˆ°åœ°å€æ€»çº¿ä¸Šä¼ ç»™ä¸»å­˜ï¼Œä¸»å­˜è¯»åˆ°åœ°å€ä¿¡å·åï¼Œè§£æä¿¡å·å¹¶å®šä½åˆ°æŒ‡å®šå­˜å‚¨å•å…ƒï¼Œç„¶åå°†æ­¤å­˜å‚¨å•å…ƒæ•°æ®æ”¾åˆ°æ•°æ®æ€»çº¿ä¸Šï¼Œä¾›å…¶å®ƒéƒ¨ä»¶è¯»å–ã€‚</p><p></p><p></p><p>å†™ä¸»å­˜çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œç³»ç»Ÿå°†è¦å†™å…¥å•å…ƒåœ°å€å’Œæ•°æ®åˆ†åˆ«æ”¾åœ¨åœ°å€æ€»çº¿å’Œæ•°æ®æ€»çº¿ä¸Šï¼Œä¸»å­˜è¯»å–ä¸¤ä¸ªæ€»çº¿çš„å†…å®¹ï¼Œåšç›¸åº”çš„å†™æ“ä½œã€‚</p><p></p><p></p><p>è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œä¸»å­˜å­˜å–çš„æ—¶é—´ä»…ä¸å­˜å–æ¬¡æ•°å‘ˆçº¿æ€§å…³ç³»ï¼Œå› ä¸ºä¸å­˜åœ¨æœºæ¢°æ“ä½œï¼Œä¸¤æ¬¡å­˜å–çš„æ•°æ®çš„â€œè·ç¦»â€ä¸ä¼šå¯¹æ—¶é—´æœ‰ä»»ä½•å½±å“ï¼Œä¾‹å¦‚ï¼Œå…ˆå–A0å†å–A1å’Œå…ˆå–A0å†å–D3çš„æ—¶é—´æ¶ˆè€—æ˜¯ä¸€æ ·çš„ã€‚</p><p></p><p></p><h3>ç£ç›˜å­˜å–åŸç†</h3><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ï¼Œç´¢å¼•ä¸€èˆ¬ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç´¢å¼•æ£€ç´¢éœ€è¦ç£ç›˜I/Oæ“ä½œã€‚ä¸ä¸»å­˜ä¸åŒï¼Œç£ç›˜I/Oå­˜åœ¨æœºæ¢°è¿åŠ¨è€—è´¹ï¼Œå› æ­¤ç£ç›˜I/Oçš„æ—¶é—´æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚</p><p></p><p></p><p>å›¾6æ˜¯ç£ç›˜çš„æ•´ä½“ç»“æ„ç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/6.png"></p><p></p><p></p><p align="center">å›¾6</p><p></p><p></p><p>ä¸€ä¸ªç£ç›˜ç”±å¤§å°ç›¸åŒä¸”åŒè½´çš„åœ†å½¢ç›˜ç‰‡ç»„æˆï¼Œç£ç›˜å¯ä»¥è½¬åŠ¨ï¼ˆå„ä¸ªç£ç›˜å¿…é¡»åŒæ­¥è½¬åŠ¨ï¼‰ã€‚åœ¨ç£ç›˜çš„ä¸€ä¾§æœ‰ç£å¤´æ”¯æ¶ï¼Œç£å¤´æ”¯æ¶å›ºå®šäº†ä¸€ç»„ç£å¤´ï¼Œæ¯ä¸ªç£å¤´è´Ÿè´£å­˜å–ä¸€ä¸ªç£ç›˜çš„å†…å®¹ã€‚ç£å¤´ä¸èƒ½è½¬åŠ¨ï¼Œä½†æ˜¯å¯ä»¥æ²¿ç£ç›˜åŠå¾„æ–¹å‘è¿åŠ¨ï¼ˆå®é™…æ˜¯æ–œåˆ‡å‘è¿åŠ¨ï¼‰ï¼Œæ¯ä¸ªç£å¤´åŒä¸€æ—¶åˆ»ä¹Ÿå¿…é¡»æ˜¯åŒè½´çš„ï¼Œå³ä»æ­£ä¸Šæ–¹å‘ä¸‹çœ‹ï¼Œæ‰€æœ‰ç£å¤´ä»»ä½•æ—¶å€™éƒ½æ˜¯é‡å çš„ï¼ˆä¸è¿‡ç›®å‰å·²ç»æœ‰å¤šç£å¤´ç‹¬ç«‹æŠ€æœ¯ï¼Œå¯ä¸å—æ­¤é™åˆ¶ï¼‰ã€‚</p><p></p><p></p><p>å›¾7æ˜¯ç£ç›˜ç»“æ„çš„ç¤ºæ„å›¾ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/7.png"></p><p></p><p></p><p align="center">å›¾7</p><p></p><p></p><p>ç›˜ç‰‡è¢«åˆ’åˆ†æˆä¸€ç³»åˆ—åŒå¿ƒç¯ï¼Œåœ†å¿ƒæ˜¯ç›˜ç‰‡ä¸­å¿ƒï¼Œæ¯ä¸ªåŒå¿ƒç¯å«åšä¸€ä¸ªç£é“ï¼Œæ‰€æœ‰åŠå¾„ç›¸åŒçš„ç£é“ç»„æˆä¸€ä¸ªæŸ±é¢ã€‚ç£é“è¢«æ²¿åŠå¾„çº¿åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ®µï¼Œæ¯ä¸ªæ®µå«åšä¸€ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªæ‰‡åŒºæ˜¯ç£ç›˜çš„æœ€å°å­˜å‚¨å•å…ƒã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¸‹é¢å‡è®¾ç£ç›˜åªæœ‰ä¸€ä¸ªç›˜ç‰‡å’Œä¸€ä¸ªç£å¤´ã€‚</p><p></p><p></p><p>å½“éœ€è¦ä»ç£ç›˜è¯»å–æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šå°†æ•°æ®é€»è¾‘åœ°å€ä¼ ç»™ç£ç›˜ï¼Œç£ç›˜çš„æ§åˆ¶ç”µè·¯æŒ‰ç…§å¯»å€é€»è¾‘å°†é€»è¾‘åœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œå³ç¡®å®šè¦è¯»çš„æ•°æ®åœ¨å“ªä¸ªç£é“ï¼Œå“ªä¸ªæ‰‡åŒºã€‚ä¸ºäº†è¯»å–è¿™ä¸ªæ‰‡åŒºçš„æ•°æ®ï¼Œéœ€è¦å°†ç£å¤´æ”¾åˆ°è¿™ä¸ªæ‰‡åŒºä¸Šæ–¹ï¼Œä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œç£å¤´éœ€è¦ç§»åŠ¨å¯¹å‡†ç›¸åº”ç£é“ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå¯»é“ï¼Œæ‰€è€—è´¹æ—¶é—´å«åšå¯»é“æ—¶é—´ï¼Œç„¶åç£ç›˜æ—‹è½¬å°†ç›®æ ‡æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—è´¹çš„æ—¶é—´å«åšæ—‹è½¬æ—¶é—´ã€‚</p><p></p><p></p><h3>å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»</h3><p></p><p></p><p>ç”±äºå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»è¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„å±€éƒ¨æ€§åŸç†ï¼š</p><p></p><p></p><p>å½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚</p><p></p><p></p><p>ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­ã€‚</p><p></p><p></p><p>ç”±äºç£ç›˜é¡ºåºè¯»å–çš„æ•ˆç‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆç‡ã€‚</p><p></p><p></p><p>é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿ç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åè¿ç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åå¼‚å¸¸è¿”å›ï¼Œç¨‹åºç»§ç»­è¿è¡Œã€‚</p><p></p><p></p><h3>B-/+Treeç´¢å¼•çš„æ€§èƒ½åˆ†æ</h3><p></p><p></p><p>åˆ°è¿™é‡Œç»ˆäºå¯ä»¥åˆ†æB-/+Treeç´¢å¼•çš„æ€§èƒ½äº†ã€‚</p><p></p><p></p><p>ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æ„çš„ä¼˜åŠ£ã€‚å…ˆä»B-Treeåˆ†æï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®é™…å®ç°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š</p><p></p><p></p><p>æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®ç°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚</p><p></p><p></p><p>B-Treeä¸­ä¸€æ¬¡æ£€ç´¢æœ€å¤šéœ€è¦h-1æ¬¡I/Oï¼ˆæ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ï¼‰ï¼Œæ¸è¿›å¤æ‚åº¦ä¸º(O(h)=O(log_dN))ã€‚ä¸€èˆ¬å®é™…åº”ç”¨ä¸­ï¼Œå‡ºåº¦dæ˜¯éå¸¸å¤§çš„æ•°å­—ï¼Œé€šå¸¸è¶…è¿‡100ï¼Œå› æ­¤héå¸¸å°ï¼ˆé€šå¸¸ä¸è¶…è¿‡3ï¼‰ã€‚</p><p></p><p></p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œç”¨B-Treeä½œä¸ºç´¢å¼•ç»“æ„æ•ˆç‡æ˜¯éå¸¸é«˜çš„ã€‚</p><p></p><p></p><p>è€Œçº¢é»‘æ ‘è¿™ç§ç»“æ„ï¼Œhæ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚</p><p></p><p></p><p>ä¸Šæ–‡è¿˜è¯´è¿‡ï¼ŒB+Treeæ›´é€‚åˆå¤–å­˜ç´¢å¼•ï¼ŒåŸå› å’Œå†…èŠ‚ç‚¹å‡ºåº¦dæœ‰å…³ã€‚ä»ä¸Šé¢åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œdè¶Šå¤§ç´¢å¼•çš„æ€§èƒ½è¶Šå¥½ï¼Œè€Œå‡ºåº¦çš„ä¸Šé™å–å†³äºèŠ‚ç‚¹å†…keyå’Œdataçš„å¤§å°ï¼š</p><p></p><p></p><p>(d_{max}=floor(pagesize / (keysize + datasize + pointsize)))</p><p></p><p></p><p>floorè¡¨ç¤ºå‘ä¸‹å–æ•´ã€‚ç”±äºB+Treeå†…èŠ‚ç‚¹å»æ‰äº†dataåŸŸï¼Œå› æ­¤å¯ä»¥æ‹¥æœ‰æ›´å¤§çš„å‡ºåº¦ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p><p></p><p></p><p>è¿™ä¸€ç« ä»ç†è®ºè§’åº¦è®¨è®ºäº†ä¸ç´¢å¼•ç›¸å…³çš„æ•°æ®ç»“æ„ä¸ç®—æ³•é—®é¢˜ï¼Œä¸‹ä¸€ç« å°†è®¨è®ºB+Treeæ˜¯å¦‚ä½•å…·ä½“å®ç°ä¸ºMySQLä¸­ç´¢å¼•ï¼ŒåŒæ—¶å°†ç»“åˆMyISAMå’ŒInnDBå­˜å‚¨å¼•æ“ä»‹ç»éèšé›†ç´¢å¼•å’Œèšé›†ç´¢å¼•ä¸¤ç§ä¸åŒçš„ç´¢å¼•å®ç°å½¢å¼ã€‚</p><p></p><p></p><h1><a name="nav-3"></a>MySQLç´¢å¼•å®ç°</h1><p></p><p></p><p>åœ¨MySQLä¸­ï¼Œç´¢å¼•å±äºå­˜å‚¨å¼•æ“çº§åˆ«çš„æ¦‚å¿µï¼Œä¸åŒå­˜å‚¨å¼•æ“å¯¹ç´¢å¼•çš„å®ç°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œæœ¬æ–‡ä¸»è¦è®¨è®ºMyISAMå’ŒInnoDBä¸¤ä¸ªå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°æ–¹å¼ã€‚</p><p></p><p></p><h2><a name="nav-3-1"></a>MyISAMç´¢å¼•å®ç°</h2><p></p><p></p><p>MyISAMå¼•æ“ä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚ä¸‹å›¾æ˜¯MyISAMç´¢å¼•çš„åŸç†å›¾ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/8.png"></p><p></p><p></p><p align="center">å›¾8</p><p></p><p></p><p>è¿™é‡Œè®¾è¡¨ä¸€å…±æœ‰ä¸‰åˆ—ï¼Œå‡è®¾æˆ‘ä»¬ä»¥Col1ä¸ºä¸»é”®ï¼Œåˆ™å›¾8æ˜¯ä¸€ä¸ªMyISAMè¡¨çš„ä¸»ç´¢å¼•ï¼ˆPrimary keyï¼‰ç¤ºæ„ã€‚å¯ä»¥çœ‹å‡ºMyISAMçš„ç´¢å¼•æ–‡ä»¶ä»…ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚åœ¨MyISAMä¸­ï¼Œä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ï¼ˆSecondary keyï¼‰åœ¨ç»“æ„ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œåªæ˜¯ä¸»ç´¢å¼•è¦æ±‚keyæ˜¯å”¯ä¸€çš„ï¼Œè€Œè¾…åŠ©ç´¢å¼•çš„keyå¯ä»¥é‡å¤ã€‚å¦‚æœæˆ‘ä»¬åœ¨Col2ä¸Šå»ºç«‹ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™æ­¤ç´¢å¼•çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/9.png"></p><p></p><p></p><p align="center">å›¾9</p><p></p><p></p><p>åŒæ ·ä¹Ÿæ˜¯ä¸€é¢—B+Treeï¼ŒdataåŸŸä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚å› æ­¤ï¼ŒMyISAMä¸­ç´¢å¼•æ£€ç´¢çš„ç®—æ³•ä¸ºé¦–å…ˆæŒ‰ç…§B+Treeæœç´¢ç®—æ³•æœç´¢ç´¢å¼•ï¼Œå¦‚æœæŒ‡å®šçš„Keyå­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶dataåŸŸçš„å€¼ï¼Œç„¶åä»¥dataåŸŸçš„å€¼ä¸ºåœ°å€ï¼Œè¯»å–ç›¸åº”æ•°æ®è®°å½•ã€‚</p><p></p><p></p><p>MyISAMçš„ç´¢å¼•æ–¹å¼ä¹Ÿå«åšâ€œéèšé›†â€çš„ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆç§°å‘¼æ˜¯ä¸ºäº†ä¸InnoDBçš„èšé›†ç´¢å¼•åŒºåˆ†ã€‚</p><p></p><p></p><h2><a name="nav-3-2"></a>InnoDBç´¢å¼•å®ç°</h2><p></p><p></p><p>è™½ç„¶InnoDBä¹Ÿä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†å…·ä½“å®ç°æ–¹å¼å´ä¸MyISAMæˆªç„¶ä¸åŒã€‚</p><p></p><p></p><p>ç¬¬ä¸€ä¸ªé‡å¤§åŒºåˆ«æ˜¯InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ã€‚ä»ä¸Šæ–‡çŸ¥é“ï¼ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚è€Œåœ¨InnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„ï¼Œè¿™æ£µæ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤InnoDBè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/10.png"></p><p></p><p></p><p align="center">å›¾10</p><p></p><p></p><p>å›¾10æ˜¯InnoDBä¸»ç´¢å¼•ï¼ˆåŒæ—¶ä¹Ÿæ˜¯æ•°æ®æ–‡ä»¶ï¼‰çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°å¶èŠ‚ç‚¹åŒ…å«äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ç§ç´¢å¼•å«åšèšé›†ç´¢å¼•ã€‚å› ä¸ºInnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«è¦æŒ‰ä¸»é”®èšé›†ï¼Œæ‰€ä»¥InnoDBè¦æ±‚è¡¨å¿…é¡»æœ‰ä¸»é”®ï¼ˆMyISAMå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å½¢ã€‚</p><p></p><p></p><p>ç¬¬äºŒä¸ªä¸MyISAMç´¢å¼•çš„ä¸åŒæ˜¯InnoDBçš„è¾…åŠ©ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯åœ°å€ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDBçš„æ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚ä¾‹å¦‚ï¼Œå›¾11ä¸ºå®šä¹‰åœ¨Col3ä¸Šçš„ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/11.png"></p><p></p><p></p><p align="center">å›¾11</p><p></p><p></p><p>è¿™é‡Œä»¥è‹±æ–‡å­—ç¬¦çš„ASCIIç ä½œä¸ºæ¯”è¾ƒå‡†åˆ™ã€‚èšé›†ç´¢å¼•è¿™ç§å®ç°æ–¹å¼ä½¿å¾—æŒ‰ä¸»é”®çš„æœç´¢ååˆ†é«˜æ•ˆï¼Œä½†æ˜¯è¾…åŠ©ç´¢å¼•æœç´¢éœ€è¦æ£€ç´¢ä¸¤éç´¢å¼•ï¼šé¦–å…ˆæ£€ç´¢è¾…åŠ©ç´¢å¼•è·å¾—ä¸»é”®ï¼Œç„¶åç”¨ä¸»é”®åˆ°ä¸»ç´¢å¼•ä¸­æ£€ç´¢è·å¾—è®°å½•ã€‚</p><p></p><p></p><p>äº†è§£ä¸åŒå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°æ–¹å¼å¯¹äºæ­£ç¡®ä½¿ç”¨å’Œä¼˜åŒ–ç´¢å¼•éƒ½éå¸¸æœ‰å¸®åŠ©ï¼Œä¾‹å¦‚çŸ¥é“äº†InnoDBçš„ç´¢å¼•å®ç°åï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»ç´¢å¼•ï¼Œè¿‡é•¿çš„ä¸»ç´¢å¼•ä¼šä»¤è¾…åŠ©ç´¢å¼•å˜å¾—è¿‡å¤§ã€‚å†ä¾‹å¦‚ï¼Œç”¨éå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®åœ¨InnoDBä¸­ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºInnoDBæ•°æ®æ–‡ä»¶æœ¬èº«æ˜¯ä¸€é¢—B+Treeï¼Œéå•è°ƒçš„ä¸»é”®ä¼šé€ æˆåœ¨æ’å…¥æ–°è®°å½•æ—¶æ•°æ®æ–‡ä»¶ä¸ºäº†ç»´æŒB+Treeçš„ç‰¹æ€§è€Œé¢‘ç¹çš„åˆ†è£‚è°ƒæ•´ï¼Œååˆ†ä½æ•ˆï¼Œè€Œä½¿ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p></p><p></p><p>ä¸‹ä¸€ç« å°†å…·ä½“è®¨è®ºè¿™äº›ä¸ç´¢å¼•æœ‰å…³çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p><p></p><p></p><h1><a name="nav-4"></a>ç´¢å¼•ä½¿ç”¨ç­–ç•¥åŠä¼˜åŒ–</h1><p></p><p></p><p>MySQLçš„ä¼˜åŒ–ä¸»è¦åˆ†ä¸ºç»“æ„ä¼˜åŒ–ï¼ˆScheme optimizationï¼‰å’ŒæŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery optimizationï¼‰ã€‚æœ¬ç« è®¨è®ºçš„é«˜æ€§èƒ½ç´¢å¼•ç­–ç•¥ä¸»è¦å±äºç»“æ„ä¼˜åŒ–èŒƒç•´ã€‚æœ¬ç« çš„å†…å®¹å®Œå…¨åŸºäºä¸Šæ–‡çš„ç†è®ºåŸºç¡€ï¼Œå®é™…ä¸Šä¸€æ—¦ç†è§£äº†ç´¢å¼•èƒŒåçš„æœºåˆ¶ï¼Œé‚£ä¹ˆé€‰æ‹©é«˜æ€§èƒ½çš„ç­–ç•¥å°±å˜æˆäº†çº¯ç²¹çš„æ¨ç†ï¼Œå¹¶ä¸”å¯ä»¥ç†è§£è¿™äº›ç­–ç•¥èƒŒåçš„é€»è¾‘ã€‚</p><p></p><p></p><h2><a name="nav-4-1"></a>ç¤ºä¾‹æ•°æ®åº“</h2><p></p><p></p><p>ä¸ºäº†è®¨è®ºç´¢å¼•ç­–ç•¥ï¼Œéœ€è¦ä¸€ä¸ªæ•°æ®é‡ä¸ç®—å°çš„æ•°æ®åº“ä½œä¸ºç¤ºä¾‹ã€‚æœ¬æ–‡é€‰ç”¨MySQLå®˜æ–¹æ–‡æ¡£ä¸­æä¾›çš„ç¤ºä¾‹æ•°æ®åº“ä¹‹ä¸€ï¼šemployeesã€‚è¿™ä¸ªæ•°æ®åº“å…³ç³»å¤æ‚åº¦é€‚ä¸­ï¼Œä¸”æ•°æ®é‡è¾ƒå¤§ã€‚ä¸‹å›¾æ˜¯è¿™ä¸ªæ•°æ®åº“çš„E-Rå…³ç³»å›¾ï¼ˆå¼•ç”¨è‡ªMySQLå®˜æ–¹æ‰‹å†Œï¼‰ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/12.png"></p><p></p><p></p><p align="center">å›¾12</p><p></p><p></p><p>MySQLå®˜æ–¹æ–‡æ¡£ä¸­å…³äºæ­¤æ•°æ®åº“çš„é¡µé¢ä¸º<a title="http://dev.mysql.com/doc/employee/en/employee.html" href="http://dev.mysql.com/doc/employee/en/employee.html" target="_blank" rel="noopener">http://dev.mysql.com/doc/employee/en/employee.html</a>ã€‚é‡Œé¢è¯¦ç»†ä»‹ç»äº†æ­¤æ•°æ®åº“ï¼Œå¹¶æä¾›äº†ä¸‹è½½åœ°å€å’Œå¯¼å…¥æ–¹æ³•ï¼Œå¦‚æœæœ‰å…´è¶£å¯¼å…¥æ­¤æ•°æ®åº“åˆ°è‡ªå·±çš„MySQLå¯ä»¥å‚è€ƒæ–‡ä¸­å†…å®¹ã€‚</p><p></p><p></p><h2><a name="nav-4-2"></a>æœ€å·¦å‰ç¼€åŸç†ä¸ç›¸å…³ä¼˜åŒ–</h2><p></p><p></p><p>é«˜æ•ˆä½¿ç”¨ç´¢å¼•çš„é¦–è¦æ¡ä»¶æ˜¯çŸ¥é“ä»€ä¹ˆæ ·çš„æŸ¥è¯¢ä¼šä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¸ªé—®é¢˜å’ŒB+Treeä¸­çš„â€œæœ€å·¦å‰ç¼€åŸç†â€æœ‰å…³ï¼Œä¸‹é¢é€šè¿‡ä¾‹å­è¯´æ˜æœ€å·¦å‰ç¼€åŸç†ã€‚</p><p></p><p></p><p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹è”åˆç´¢å¼•çš„æ¦‚å¿µã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾ç´¢å¼•åªå¼•ç”¨äº†å•ä¸ªçš„åˆ—ï¼Œå®é™…ä¸Šï¼ŒMySQLä¸­çš„ç´¢å¼•å¯ä»¥ä»¥ä¸€å®šé¡ºåºå¼•ç”¨å¤šä¸ªåˆ—ï¼Œè¿™ç§ç´¢å¼•å«åšè”åˆç´¢å¼•ï¼Œä¸€èˆ¬çš„ï¼Œä¸€ä¸ªè”åˆç´¢å¼•æ˜¯ä¸€ä¸ªæœ‰åºå…ƒç»„&lt;a1, a2, â€¦, an&gt;ï¼Œå…¶ä¸­å„ä¸ªå…ƒç´ å‡ä¸ºæ•°æ®è¡¨çš„ä¸€åˆ—ï¼Œå®é™…ä¸Šè¦ä¸¥æ ¼å®šä¹‰ç´¢å¼•éœ€è¦ç”¨åˆ°å…³ç³»ä»£æ•°ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä¸æƒ³è®¨è®ºå¤ªå¤šå…³ç³»ä»£æ•°çš„è¯é¢˜ï¼Œå› ä¸ºé‚£æ ·ä¼šæ˜¾å¾—å¾ˆæ¯ç‡¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†åšä¸¥æ ¼å®šä¹‰ã€‚å¦å¤–ï¼Œå•åˆ—ç´¢å¼•å¯ä»¥çœ‹æˆè”åˆç´¢å¼•å…ƒç´ æ•°ä¸º1çš„ç‰¹ä¾‹ã€‚</p><p></p><p></p><p>ä»¥employees.titlesè¡¨ä¸ºä¾‹ï¼Œä¸‹é¢å…ˆæŸ¥çœ‹å…¶ä¸Šéƒ½æœ‰å“ªäº›ç´¢å¼•ï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW INDEX FROM employees.titles;<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+<br>| Table  | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Null | Index_type |<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+<br>| titles |          0 | PRIMARY  |            1 | emp_no      | A         |        NULL |      | BTREE      |<br>| titles |          0 | PRIMARY  |            2 | title       | A         |        NULL |      | BTREE      |<br>| titles |          0 | PRIMARY  |            3 | from_date   | A         |      443308 |      | BTREE      |<br>| titles |          1 | emp_no   |            1 | emp_no      | A         |      443308 |      | BTREE      |<br>+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+</pre></p><p></p><p>ä»ç»“æœä¸­å¯ä»¥åˆ°titlesè¡¨çš„ä¸»ç´¢å¼•ä¸º&lt;emp_no, title, from_date&gt;ï¼Œè¿˜æœ‰ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no&gt;ã€‚ä¸ºäº†é¿å…å¤šä¸ªç´¢å¼•ä½¿äº‹æƒ…å˜å¤æ‚ï¼ˆMySQLçš„SQLä¼˜åŒ–å™¨åœ¨å¤šç´¢å¼•æ—¶è¡Œä¸ºæ¯”è¾ƒå¤æ‚ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¾…åŠ©ç´¢å¼•dropæ‰ï¼š</p><p></p><p><pre class="prettyprint linenums">ALTER TABLE employees.titles DROP INDEX emp_no;</pre></p><p></p><p>è¿™æ ·å°±å¯ä»¥ä¸“å¿ƒåˆ†æç´¢å¼•PRIMARYçš„è¡Œä¸ºäº†ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸€ï¼šå…¨åˆ—åŒ¹é…ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™ AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref               | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | const | PRIMARY       | PRIMARY | 59      | const,const,const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>å¾ˆæ˜æ˜¾ï¼Œå½“æŒ‰ç…§ç´¢å¼•ä¸­æ‰€æœ‰åˆ—è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ˆè¿™é‡Œç²¾ç¡®åŒ¹é…æŒ‡â€œ=â€æˆ–â€œINâ€åŒ¹é…ï¼‰æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç†è®ºä¸Šç´¢å¼•å¯¹é¡ºåºæ˜¯æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äºMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´whereå­å¥çš„æ¡ä»¶é¡ºåºä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ï¼Œä¾‹å¦‚æˆ‘ä»¬å°†whereä¸­çš„æ¡ä»¶é¡ºåºé¢ å€’ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™ AND emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref               | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | const | PRIMARY       | PRIMARY | 59      | const,const,const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><p></p><p></p><h3>æƒ…å†µäºŒï¼šæœ€å·¦å‰ç¼€åŒ¹é…ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 |       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+</pre></p><p></p><p>å½“æŸ¥è¯¢æ¡ä»¶ç²¾ç¡®åŒ¹é…ç´¢å¼•çš„å·¦è¾¹è¿ç»­ä¸€ä¸ªæˆ–å‡ ä¸ªåˆ—æ—¶ï¼Œå¦‚&lt;emp_no&gt;æˆ–&lt;emp_no, title&gt;ï¼Œæ‰€ä»¥å¯ä»¥è¢«ç”¨åˆ°ï¼Œä½†æ˜¯åªèƒ½ç”¨åˆ°ä¸€éƒ¨åˆ†ï¼Œå³æ¡ä»¶æ‰€ç»„æˆçš„æœ€å·¦å‰ç¼€ã€‚ä¸Šé¢çš„æŸ¥è¯¢ä»åˆ†æç»“æœçœ‹ç”¨åˆ°äº†PRIMARYç´¢å¼•ï¼Œä½†æ˜¯key_lenä¸º4ï¼Œè¯´æ˜åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—å‰ç¼€ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸‰ï¼šæŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†ç´¢å¼•ä¸­åˆ—çš„ç²¾ç¡®åŒ¹é…ï¼Œä½†æ˜¯ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>æ­¤æ—¶ç´¢å¼•ä½¿ç”¨æƒ…å†µå’Œæƒ…å†µäºŒç›¸åŒï¼Œå› ä¸ºtitleæœªæä¾›ï¼Œæ‰€ä»¥æŸ¥è¯¢åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œè€Œåé¢çš„from_dateè™½ç„¶ä¹Ÿåœ¨ç´¢å¼•ä¸­ï¼Œä½†æ˜¯ç”±äºtitleä¸å­˜åœ¨è€Œæ— æ³•å’Œå·¦å‰ç¼€è¿æ¥ï¼Œå› æ­¤éœ€è¦å¯¹ç»“æœè¿›è¡Œæ‰«æè¿‡æ»¤from_dateï¼ˆè¿™é‡Œç”±äºemp_noå”¯ä¸€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ‰«æï¼‰ã€‚å¦‚æœæƒ³è®©from_dateä¹Ÿä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯whereè¿‡æ»¤ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no, from_date&gt;ï¼Œæ­¤æ—¶ä¸Šé¢çš„æŸ¥è¯¢ä¼šä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸ºâ€œéš”ç¦»åˆ—â€çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå°†emp_noä¸from_dateä¹‹é—´çš„â€œå‘â€å¡«ä¸Šã€‚</p><p></p><p></p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹titleä¸€å…±æœ‰å‡ ç§ä¸åŒçš„å€¼ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT DISTINCT(title) FROM employees.titles;<br>+â€”â€”â€”â€”â€”â€”â€“+<br>| title              |<br>+â€”â€”â€”â€”â€”â€”â€“+<br>| Senior Engineer    |<br>| Staff              |<br>| Engineer           |<br>| Senior Staff       |<br>| Assistant Engineer |<br>| Technique Leader   |<br>| Manager            |<br>+â€”â€”â€”â€”â€”â€”â€“+</pre></p><p></p><p>åªæœ‰7ç§ã€‚åœ¨è¿™ç§æˆä¸ºâ€œå‘â€çš„åˆ—å€¼æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ç”¨â€œINâ€æ¥å¡«è¡¥è¿™ä¸ªâ€œå‘â€ä»è€Œå½¢æˆæœ€å·¦å‰ç¼€ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no=â€™10001â€™<br>AND title IN (â€˜Senior Engineerâ€™, â€˜Staffâ€™, â€˜Engineerâ€™, â€˜Senior Staffâ€™, â€˜Assistant Engineerâ€™, â€˜Technique Leaderâ€™, â€˜Managerâ€™)<br>AND from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 59      | NULL |    7 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>è¿™æ¬¡key_lenä¸º59ï¼Œè¯´æ˜ç´¢å¼•è¢«ç”¨å…¨äº†ï¼Œä½†æ˜¯ä»typeå’Œrowsçœ‹å‡ºINå®é™…ä¸Šæ‰§è¡Œäº†ä¸€ä¸ªrangeæŸ¥è¯¢ï¼Œè¿™é‡Œæ£€æŸ¥äº†7ä¸ªkeyã€‚çœ‹ä¸‹ä¸¤ç§æŸ¥è¯¢çš„æ€§èƒ½æ¯”è¾ƒï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW PROFILES;<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Query_ID | Duration   | Query                                                                         |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|       10 | 0.00058000 | SELECT <em> FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™|<br>|       11 | 0.00052500 | SELECT </em> FROM employees.titles WHERE emp_no=â€™10001â€™ AND title IN â€¦          |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+</pre></p><p></p><p>â€œå¡«å‘â€åæ€§èƒ½æå‡äº†ä¸€ç‚¹ã€‚å¦‚æœç»è¿‡emp_noç­›é€‰åä½™ä¸‹å¾ˆå¤šæ•°æ®ï¼Œåˆ™åè€…æ€§èƒ½ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚å½“ç„¶ï¼Œå¦‚æœtitleçš„å€¼å¾ˆå¤šï¼Œç”¨å¡«å‘å°±ä¸åˆé€‚äº†ï¼Œå¿…é¡»å»ºç«‹è¾…åŠ©ç´¢å¼•ã€‚</p><p></p><p></p><h3>æƒ…å†µå››ï¼šæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‡å®šç´¢å¼•ç¬¬ä¸€åˆ—ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ALL  | NULL          | NULL | NULL    | NULL | 443308 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>ç”±äºä¸æ˜¯æœ€å·¦å‰ç¼€ï¼Œç´¢å¼•è¿™æ ·çš„æŸ¥è¯¢æ˜¾ç„¶ç”¨ä¸åˆ°ç´¢å¼•ã€‚</p><p></p><p></p><h3>æƒ…å†µäº”ï¼šåŒ¹é…æŸåˆ—çš„å‰ç¼€å­—ç¬¦ä¸²ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title LIKE â€˜Senior%â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 56      | NULL |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>æ­¤æ—¶å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œ<strike>ä½†æ˜¯å¦‚æœé€šé…ç¬¦ä¸æ˜¯åªå‡ºç°åœ¨æœ«å°¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</strike>ï¼ˆåŸæ–‡è¡¨è¿°æœ‰è¯¯ï¼Œå¦‚æœé€šé…ç¬¦%ä¸å‡ºç°åœ¨å¼€å¤´ï¼Œåˆ™å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ ¹æ®å…·ä½“æƒ…å†µä¸åŒå¯èƒ½åªä¼šç”¨å…¶ä¸­ä¸€ä¸ªå‰ç¼€ï¼‰</p><p></p><p></p><h3>æƒ…å†µå…­ï¼šèŒƒå›´æŸ¥è¯¢ã€‚</h3><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no &lt; â€˜10010â€™ and title=â€™Senior Engineerâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 4       | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆå¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚åŒæ—¶ï¼Œç´¢å¼•æœ€å¤šç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå› æ­¤å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•ã€‚</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no &lt; â€˜10010â€™<br>AND title=â€™Senior Engineerâ€™<br>AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 4       | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>å¯ä»¥çœ‹åˆ°ç´¢å¼•å¯¹ç¬¬äºŒä¸ªèŒƒå›´ç´¢å¼•æ— èƒ½ä¸ºåŠ›ã€‚è¿™é‡Œç‰¹åˆ«è¦è¯´æ˜MySQLä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä»…ç”¨explainå¯èƒ½æ— æ³•åŒºåˆ†èŒƒå›´ç´¢å¼•å’Œå¤šå€¼åŒ¹é…ï¼Œå› ä¸ºåœ¨typeä¸­è¿™ä¸¤è€…éƒ½æ˜¾ç¤ºä¸ºrangeã€‚åŒæ—¶ï¼Œç”¨äº†â€œbetweenâ€å¹¶ä¸æ„å‘³ç€å°±æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles<br>WHERE emp_no BETWEEN â€˜10001â€™ AND â€˜10010â€™<br>AND title=â€™Senior Engineerâ€™<br>AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type  | possible_keys | key     | key_len | ref  | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | range | PRIMARY       | PRIMARY | 59      | NULL |   16 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>çœ‹èµ·æ¥æ˜¯ç”¨äº†ä¸¤ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œä½†ä½œç”¨äºemp_noä¸Šçš„â€œBETWEENâ€å®é™…ä¸Šç›¸å½“äºâ€œINâ€ï¼Œä¹Ÿå°±æ˜¯è¯´emp_noå®é™…æ˜¯å¤šå€¼ç²¾ç¡®åŒ¹é…ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŸ¥è¯¢ç”¨åˆ°äº†ç´¢å¼•å…¨éƒ¨ä¸‰ä¸ªåˆ—ã€‚å› æ­¤åœ¨MySQLä¸­è¦è°¨æ…åœ°åŒºåˆ†å¤šå€¼åŒ¹é…å’ŒèŒƒå›´åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¹MySQLçš„è¡Œä¸ºäº§ç”Ÿå›°æƒ‘ã€‚</p><p></p><p></p><h3>æƒ…å†µä¸ƒï¼šæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ã€‚</h3><p></p><p></p><p>å¾ˆä¸å¹¸ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œåˆ™MySQLä¸ä¼šä¸ºè¿™åˆ—ä½¿ç”¨ç´¢å¼•ï¼ˆè™½ç„¶æŸäº›åœ¨æ•°å­¦æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨ï¼‰ã€‚ä¾‹å¦‚ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND left(title, 6)=â€™Seniorâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key     | key_len | ref   | rows | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ref  | PRIMARY       | PRIMARY | 4       | const |    1 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+</pre></p><p></p><p>è™½ç„¶è¿™ä¸ªæŸ¥è¯¢å’Œæƒ…å†µäº”ä¸­åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ç”±äºä½¿ç”¨äº†å‡½æ•°leftï¼Œåˆ™æ— æ³•ä¸ºtitleåˆ—åº”ç”¨ç´¢å¼•ï¼Œè€Œæƒ…å†µäº”ä¸­ç”¨LIKEåˆ™å¯ä»¥ã€‚å†å¦‚ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.titles WHERE emp_no - 1=â€™10000â€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | titles | ALL  | NULL          | NULL | NULL    | NULL | 443308 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>æ˜¾ç„¶è¿™ä¸ªæŸ¥è¯¢ç­‰ä»·äºæŸ¥è¯¢emp_noä¸º10001çš„å‡½æ•°ï¼Œä½†æ˜¯ç”±äºæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒMySQLæ— æ³•ä¸ºå…¶ä½¿ç”¨ç´¢å¼•ã€‚çœ‹æ¥MySQLè¿˜æ²¡æœ‰æ™ºèƒ½åˆ°è‡ªåŠ¨ä¼˜åŒ–å¸¸é‡è¡¨è¾¾å¼çš„ç¨‹åº¦ï¼Œå› æ­¤åœ¨å†™æŸ¥è¯¢è¯­å¥æ—¶å°½é‡é¿å…è¡¨è¾¾å¼å‡ºç°åœ¨æŸ¥è¯¢ä¸­ï¼Œè€Œæ˜¯å…ˆæ‰‹å·¥ç§ä¸‹ä»£æ•°è¿ç®—ï¼Œè½¬æ¢ä¸ºæ— è¡¨è¾¾å¼çš„æŸ¥è¯¢è¯­å¥ã€‚</p><p></p><p></p><h2><a name="nav-4-3"></a>ç´¢å¼•é€‰æ‹©æ€§ä¸å‰ç¼€ç´¢å¼•</h2><p></p><p></p><p>æ—¢ç„¶ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯åªè¦æ˜¯æŸ¥è¯¢è¯­å¥éœ€è¦ï¼Œå°±å»ºä¸Šç´¢å¼•ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å› ä¸ºç´¢å¼•è™½ç„¶åŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ç´¢å¼•ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼šç´¢å¼•æ–‡ä»¶æœ¬èº«è¦æ¶ˆè€—å­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶ç´¢å¼•ä¼šåŠ é‡æ’å…¥ã€åˆ é™¤å’Œä¿®æ”¹è®°å½•æ—¶çš„è´Ÿæ‹…ï¼Œå¦å¤–ï¼ŒMySQLåœ¨è¿è¡Œæ—¶ä¹Ÿè¦æ¶ˆè€—èµ„æºç»´æŠ¤ç´¢å¼•ï¼Œå› æ­¤ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä¸€èˆ¬ä¸¤ç§æƒ…å†µä¸‹ä¸å»ºè®®å»ºç´¢å¼•ã€‚</p><p></p><p></p><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯è¡¨è®°å½•æ¯”è¾ƒå°‘ï¼Œä¾‹å¦‚ä¸€ä¸¤åƒæ¡ç”šè‡³åªæœ‰å‡ ç™¾æ¡è®°å½•çš„è¡¨ï¼Œæ²¡å¿…è¦å»ºç´¢å¼•ï¼Œè®©æŸ¥è¯¢åšå…¨è¡¨æ‰«æå°±å¥½äº†ã€‚è‡³äºå¤šå°‘æ¡è®°å½•æ‰ç®—å¤šï¼Œè¿™ä¸ªä¸ªäººæœ‰ä¸ªäººçš„çœ‹æ³•ï¼Œæˆ‘ä¸ªäººçš„ç»éªŒæ˜¯ä»¥2000ä½œä¸ºåˆ†ç•Œçº¿ï¼Œè®°å½•æ•°ä¸è¶…è¿‡ 2000å¯ä»¥è€ƒè™‘ä¸å»ºç´¢å¼•ï¼Œè¶…è¿‡2000æ¡å¯ä»¥é…Œæƒ…è€ƒè™‘ç´¢å¼•ã€‚</p><p></p><p></p><p>å¦ä¸€ç§ä¸å»ºè®®å»ºç´¢å¼•çš„æƒ…å†µæ˜¯ç´¢å¼•çš„é€‰æ‹©æ€§è¾ƒä½ã€‚æ‰€è°“ç´¢å¼•çš„é€‰æ‹©æ€§ï¼ˆSelectivityï¼‰ï¼Œæ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆä¹Ÿå«åŸºæ•°ï¼ŒCardinalityï¼‰ä¸è¡¨è®°å½•æ•°ï¼ˆ#Tï¼‰çš„æ¯”å€¼ï¼š</p><p></p><p></p><p>Index Selectivity = Cardinality / #T</p><p></p><p></p><p>æ˜¾ç„¶é€‰æ‹©æ€§çš„å–å€¼èŒƒå›´ä¸º(0, 1]ï¼Œé€‰æ‹©æ€§è¶Šé«˜çš„ç´¢å¼•ä»·å€¼è¶Šå¤§ï¼Œè¿™æ˜¯ç”±B+Treeçš„æ€§è´¨å†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œä¸Šæ–‡ç”¨åˆ°çš„employees.titlesè¡¨ï¼Œå¦‚æœtitleå­—æ®µç»å¸¸è¢«å•ç‹¬æŸ¥è¯¢ï¼Œæ˜¯å¦éœ€è¦å»ºç´¢å¼•ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(title))/count(*) AS Selectivity FROM employees.titles;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.0000 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>titleçš„é€‰æ‹©æ€§ä¸è¶³0.0001ï¼ˆç²¾ç¡®å€¼ä¸º0.00001579ï¼‰ï¼Œæ‰€ä»¥å®åœ¨æ²¡æœ‰ä»€ä¹ˆå¿…è¦ä¸ºå…¶å•ç‹¬å»ºç´¢å¼•ã€‚</p><p></p><p></p><p>æœ‰ä¸€ç§ä¸ç´¢å¼•é€‰æ‹©æ€§æœ‰å…³çš„ç´¢å¼•ä¼˜åŒ–ç­–ç•¥å«åšå‰ç¼€ç´¢å¼•ï¼Œå°±æ˜¯ç”¨åˆ—çš„å‰ç¼€ä»£æ›¿æ•´ä¸ªåˆ—ä½œä¸ºç´¢å¼•keyï¼Œå½“å‰ç¼€é•¿åº¦åˆé€‚æ—¶ï¼Œå¯ä»¥åšåˆ°æ—¢ä½¿å¾—å‰ç¼€ç´¢å¼•çš„é€‰æ‹©æ€§æ¥è¿‘å…¨åˆ—ç´¢å¼•ï¼ŒåŒæ—¶å› ä¸ºç´¢å¼•keyå˜çŸ­è€Œå‡å°‘äº†ç´¢å¼•æ–‡ä»¶çš„å¤§å°å’Œç»´æŠ¤å¼€é”€ã€‚ä¸‹é¢ä»¥employees.employeesè¡¨ä¸ºä¾‹ä»‹ç»å‰ç¼€ç´¢å¼•çš„é€‰æ‹©å’Œä½¿ç”¨ã€‚</p><p></p><p></p><p>ä»å›¾12å¯ä»¥çœ‹åˆ°employeesè¡¨åªæœ‰ä¸€ä¸ªç´¢å¼•&lt;emp_no&gt;ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³æŒ‰åå­—æœç´¢ä¸€ä¸ªäººï¼Œå°±åªèƒ½å…¨è¡¨æ‰«æäº†ï¼š</p><p></p><p><pre class="prettyprint linenums">EXPLAIN SELECT * FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™;<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows   | Extra       |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+<br>|  1 | SIMPLE      | employees | ALL  | NULL          | NULL | NULL    | NULL | 300024 | Using where |<br>+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+</pre></p><p></p><p>å¦‚æœé¢‘ç¹æŒ‰åå­—æœç´¢å‘˜å·¥ï¼Œè¿™æ ·æ˜¾ç„¶æ•ˆç‡å¾ˆä½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘å»ºç´¢å¼•ã€‚æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå»º&lt;first_name&gt;æˆ–&lt;first_name, last_name&gt;ï¼Œçœ‹ä¸‹ä¸¤ä¸ªç´¢å¼•çš„é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(first_name))/count(<em>) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.0042 |<br>+â€”â€”â€”â€”-+<br>SELECT count(DISTINCT(concat(first_name, last_name)))/count(</em>) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.9313 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>&lt;first_name&gt;æ˜¾ç„¶é€‰æ‹©æ€§å¤ªä½ï¼Œ&lt;first_name, last_name&gt;é€‰æ‹©æ€§å¾ˆå¥½ï¼Œä½†æ˜¯first_nameå’Œlast_nameåŠ èµ·æ¥é•¿åº¦ä¸º30ï¼Œæœ‰æ²¡æœ‰å…¼é¡¾é•¿åº¦å’Œé€‰æ‹©æ€§çš„åŠæ³•ï¼Ÿå¯ä»¥è€ƒè™‘ç”¨first_nameå’Œlast_nameçš„å‰å‡ ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œä¾‹å¦‚&lt;first_name, left(last_name, 3)&gt;ï¼Œçœ‹çœ‹å…¶é€‰æ‹©æ€§ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(concat(first_name, left(last_name, 3))))/count(*) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.7879 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>é€‰æ‹©æ€§è¿˜ä¸é”™ï¼Œä½†ç¦»0.9313è¿˜æ˜¯æœ‰ç‚¹è·ç¦»ï¼Œé‚£ä¹ˆæŠŠlast_nameå‰ç¼€åŠ åˆ°4ï¼š</p><p></p><p><pre class="prettyprint linenums">SELECT count(DISTINCT(concat(first_name, left(last_name, 4))))/count(*) AS Selectivity FROM employees.employees;<br>+â€”â€”â€”â€”-+<br>| Selectivity |<br>+â€”â€”â€”â€”-+<br>|      0.9007 |<br>+â€”â€”â€”â€”-+</pre></p><p></p><p>è¿™æ—¶é€‰æ‹©æ€§å·²ç»å¾ˆç†æƒ³äº†ï¼Œè€Œè¿™ä¸ªç´¢å¼•çš„é•¿åº¦åªæœ‰18ï¼Œæ¯”&lt;first_name, last_name&gt;çŸ­äº†æ¥è¿‘ä¸€åŠï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‰ç¼€ç´¢å¼• å»ºä¸Šï¼š</p><p></p><p><pre class="prettyprint linenums">ALTER TABLE employees.employees<br>ADD INDEX <code>first_name_last_name4</code> (first_name, last_name(4));</pre></p><p></p><p>æ­¤æ—¶å†æ‰§è¡Œä¸€éæŒ‰åå­—æŸ¥è¯¢ï¼Œæ¯”è¾ƒåˆ†æä¸€ä¸‹ä¸å»ºç´¢å¼•å‰çš„ç»“æœï¼š</p><p></p><p><pre class="prettyprint linenums">SHOW PROFILES;<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Query_ID | Duration   | Query                                                                           |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>|       87 | 0.11941700 | SELECT <em> FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ |<br>|       90 | 0.00092400 | SELECT </em> FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ |<br>+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</pre></p><p></p><p>æ€§èƒ½çš„æå‡æ˜¯æ˜¾è‘—çš„ï¼ŒæŸ¥è¯¢é€Ÿåº¦æé«˜äº†120å¤šå€ã€‚</p><p></p><p></p><p>å‰ç¼€ç´¢å¼•å…¼é¡¾ç´¢å¼•å¤§å°å’ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹æ˜¯ä¸èƒ½ç”¨äºORDER BYå’ŒGROUP BYæ“ä½œï¼Œä¹Ÿä¸èƒ½ç”¨äºCovering indexï¼ˆå³å½“ç´¢å¼•æœ¬èº«åŒ…å«æŸ¥è¯¢æ‰€éœ€å…¨éƒ¨æ•°æ®æ—¶ï¼Œä¸å†è®¿é—®æ•°æ®æ–‡ä»¶æœ¬èº«ï¼‰ã€‚</p><p></p><p></p><h2><a name="nav-4-4"></a>InnoDBçš„ä¸»é”®é€‰æ‹©ä¸æ’å…¥ä¼˜åŒ–</h2><p></p><p></p><p>åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œè¯·æ°¸è¿œä½¿ç”¨ä¸€ä¸ªä¸ä¸šåŠ¡æ— å…³çš„è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ã€‚</p><p></p><p></p><p>ç»å¸¸çœ‹åˆ°æœ‰å¸–å­æˆ–åšå®¢è®¨è®ºä¸»é”®é€‰æ‹©é—®é¢˜ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸šåŠ¡æ— å…³çš„è‡ªå¢ä¸»é”®ï¼Œæœ‰äººè§‰å¾—æ²¡æœ‰å¿…è¦ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨å¦‚å­¦å·æˆ–èº«ä»½è¯å·è¿™ç§å”¯ä¸€å­—æ®µä½œä¸ºä¸»é”®ã€‚ä¸è®ºæ”¯æŒå“ªç§è®ºç‚¹ï¼Œå¤§å¤šæ•°è®ºæ®éƒ½æ˜¯ä¸šåŠ¡å±‚é¢çš„ã€‚å¦‚æœä»æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–è§’åº¦çœ‹ï¼Œä½¿ç”¨InnoDBå¼•æ“è€Œä¸ä½¿ç”¨è‡ªå¢ä¸»é”®ç»å¯¹æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä¸»æ„ã€‚</p><p></p><p></p><p>ä¸Šæ–‡è®¨è®ºè¿‡InnoDBçš„ç´¢å¼•å®ç°ï¼ŒInnoDBä½¿ç”¨èšé›†ç´¢å¼•ï¼Œæ•°æ®è®°å½•æœ¬èº«è¢«å­˜äºä¸»ç´¢å¼•ï¼ˆä¸€é¢—B+Treeï¼‰çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚è¿™å°±è¦æ±‚åŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…ï¼ˆå¤§å°ä¸ºä¸€ä¸ªå†…å­˜é¡µæˆ–ç£ç›˜é¡µï¼‰çš„å„æ¡æ•°æ®è®°å½•æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œå› æ­¤æ¯å½“æœ‰ä¸€æ¡æ–°çš„è®°å½•æ’å…¥æ—¶ï¼ŒMySQLä¼šæ ¹æ®å…¶ä¸»é”®å°†å…¶æ’å…¥é€‚å½“çš„èŠ‚ç‚¹å’Œä½ç½®ï¼Œå¦‚æœé¡µé¢è¾¾åˆ°è£…è½½å› å­ï¼ˆInnoDBé»˜è®¤ä¸º15/16ï¼‰ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µï¼ˆèŠ‚ç‚¹ï¼‰ã€‚</p><p></p><p></p><p>å¦‚æœè¡¨ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/13.png"></p><p></p><p></p><p align="center">å›¾13</p><p></p><p></p><p>è¿™æ ·å°±ä¼šå½¢æˆä¸€ä¸ªç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œè¿‘ä¼¼é¡ºåºå¡«æ»¡ã€‚ç”±äºæ¯æ¬¡æ’å…¥æ—¶ä¹Ÿä¸éœ€è¦ç§»åŠ¨å·²æœ‰æ•°æ®ï¼Œå› æ­¤æ•ˆç‡å¾ˆé«˜ï¼Œä¹Ÿä¸ä¼šå¢åŠ å¾ˆå¤šå¼€é”€åœ¨ç»´æŠ¤ç´¢å¼•ä¸Šã€‚</p><p></p><p></p><p>å¦‚æœä½¿ç”¨éè‡ªå¢ä¸»é”®ï¼ˆå¦‚æœèº«ä»½è¯å·æˆ–å­¦å·ç­‰ï¼‰ï¼Œç”±äºæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°çºªå½•éƒ½è¦è¢«æ’åˆ°ç°æœ‰ç´¢å¼•é¡µå¾—ä¸­é—´æŸä¸ªä½ç½®ï¼š</p><p></p><p></p><p class="picture"><img alt src="/uploads/pictures/theory-of-mysql-index/14.png"></p><p></p><p></p><p align="center">å›¾14</p><p></p><p></p><p>æ­¤æ—¶MySQLä¸å¾—ä¸ä¸ºäº†å°†æ–°è®°å½•æ’åˆ°åˆé€‚ä½ç½®è€Œç§»åŠ¨æ•°æ®ï¼Œç”šè‡³ç›®æ ‡é¡µé¢å¯èƒ½å·²ç»è¢«å›å†™åˆ°ç£ç›˜ä¸Šè€Œä»ç¼“å­˜ä¸­æ¸…æ‰ï¼Œæ­¤æ—¶åˆè¦ä»ç£ç›˜ä¸Šè¯»å›æ¥ï¼Œè¿™å¢åŠ äº†å¾ˆå¤šå¼€é”€ï¼ŒåŒæ—¶é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢ç‰‡ï¼Œå¾—åˆ°äº†ä¸å¤Ÿç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œåç»­ä¸å¾—ä¸é€šè¿‡OPTIMIZE TABLEæ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–å¡«å……é¡µé¢ã€‚</p><p></p><p></p><p>å› æ­¤ï¼Œåªè¦å¯ä»¥ï¼Œè¯·å°½é‡åœ¨InnoDBä¸Šé‡‡ç”¨è‡ªå¢å­—æ®µåšä¸»é”®ã€‚</p><p></p><p></p><h1><a name="nav-5"></a>åè®°</h1><p></p><p></p><p>è¿™ç¯‡æ–‡ç« æ–­æ–­ç»­ç»­å†™äº†åŠä¸ªæœˆï¼Œä¸»è¦å†…å®¹å°±æ˜¯ä¸Šé¢è¿™äº›äº†ã€‚ä¸å¯å¦è®¤ï¼Œè¿™ç¯‡æ–‡ç« åœ¨ä¸€å®šç¨‹åº¦ä¸Šæœ‰çº¸ä¸Šè°ˆå…µä¹‹å«Œï¼Œå› ä¸ºæˆ‘æœ¬äººå¯¹MySQLçš„ä½¿ç”¨å±äºèœé¸Ÿçº§åˆ«ï¼Œæ›´æ²¡æœ‰å¤ªå¤šæ•°æ®åº“è°ƒä¼˜çš„ç»éªŒï¼Œåœ¨è¿™é‡Œå¤§è°ˆæ•°æ®åº“ç´¢å¼•è°ƒä¼˜æœ‰ç‚¹å¤§è¨€ä¸æƒ­ã€‚å°±å½“æ˜¯æˆ‘ä¸ªäººçš„ä¸€ç¯‡å­¦ä¹ ç¬”è®°äº†ã€‚</p><p></p><p></p><p>å…¶å®æ•°æ®åº“ç´¢å¼•è°ƒä¼˜æ˜¯ä¸€é¡¹æŠ€æœ¯æ´»ï¼Œä¸èƒ½ä»…ä»…é ç†è®ºï¼Œå› ä¸ºå®é™…æƒ…å†µåƒå˜ä¸‡åŒ–ï¼Œè€Œä¸”MySQLæœ¬èº«å­˜åœ¨å¾ˆå¤æ‚çš„æœºåˆ¶ï¼Œå¦‚æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥å’Œå„ç§å¼•æ“çš„å®ç°å·®å¼‚ç­‰éƒ½ä¼šä½¿æƒ…å†µå˜å¾—æ›´åŠ å¤æ‚ã€‚ä½†åŒæ—¶è¿™äº›ç†è®ºæ˜¯ç´¢å¼•è°ƒä¼˜çš„åŸºç¡€ï¼Œåªæœ‰åœ¨æ˜ç™½ç†è®ºçš„åŸºç¡€ä¸Šï¼Œæ‰èƒ½å¯¹è°ƒä¼˜ç­–ç•¥è¿›è¡Œåˆç†æ¨æ–­å¹¶äº†è§£å…¶èƒŒåçš„æœºåˆ¶ï¼Œç„¶åç»“åˆå®è·µä¸­ä¸æ–­çš„å®éªŒå’Œæ‘¸ç´¢ï¼Œä»è€ŒçœŸæ­£è¾¾åˆ°é«˜æ•ˆä½¿ç”¨MySQLç´¢å¼•çš„ç›®çš„ã€‚</p><p></p><p></p><p>å¦å¤–ï¼ŒMySQLç´¢å¼•åŠå…¶ä¼˜åŒ–æ¶µç›–èŒƒå›´éå¸¸å¹¿ï¼Œæœ¬æ–‡åªæ˜¯æ¶‰åŠåˆ°å…¶ä¸­ä¸€éƒ¨åˆ†ã€‚å¦‚ä¸æ’åºï¼ˆORDER BYï¼‰ç›¸å…³çš„ç´¢å¼•ä¼˜åŒ–åŠè¦†ç›–ç´¢å¼•ï¼ˆCovering indexï¼‰çš„è¯é¢˜æœ¬æ–‡å¹¶æœªæ¶‰åŠï¼ŒåŒæ—¶é™¤B-Treeç´¢å¼•å¤–MySQLè¿˜æ ¹æ®ä¸åŒå¼•æ“æ”¯æŒçš„å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰ç­‰æœ¬æ–‡ä¹Ÿå¹¶æœªæ¶‰åŠã€‚å¦‚æœæœ‰æœºä¼šï¼Œå¸Œæœ›å†å¯¹æœ¬æ–‡æœªæ¶‰åŠçš„éƒ¨åˆ†è¿›è¡Œè¡¥å……å§ã€‚</p><br><p></p><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç† ä½œè€… å¼ æ´‹ | å‘å¸ƒäº 2011-10-18</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> MySQL, Index, Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Difference between Process and Thread</title>
      <link href="/2020/02/05/The-Difference-between-Process-and-Thread/"/>
      <url>/2020/02/05/The-Difference-between-Process-and-Thread/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œè¿›ç¨‹æ˜¯æ•´ä¸ªç°ä»£æ“ä½œç³»ç»Ÿçš„æ ¹æœ¬ï¼Œæ“ä½œç³»çµ±æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½æ‰§è¡Œä»»åŠ¡ã€‚éšç€æŠ€æœ¯å‘å±•ï¼Œåœ¨æ‰§è¡Œä¸€äº›ç»†å°ä»»åŠ¡ï¼Œä¸”æœ¬èº«æ— éœ€åˆ†é…å•ç‹¬èµ„æºæ—¶ï¼Œè¿›ç¨‹çš„å®ç°æœºåˆ¶ä¾ç„¶ä¼šç¹ççš„å°†èµ„æºåˆ†å‰²ï¼Œè¿™æ ·é€ æˆæµªè´¹ï¼Œè€Œä¸”è¿˜æ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸“é—¨çš„å¤šä»»åŠ¡æŠ€æœ¯è¢«åˆ›é€ å‡ºæ¥â€”â€”çº¿ç¨‹ã€‚ çº¿ç¨‹çš„ç‰¹ç‚¹å°±æ˜¯åœ¨ä¸éœ€è¦ç‹¬ç«‹èµ„æºçš„æƒ…å†µä¸‹å°±å¯ä»¥è¿è¡Œã€‚å¦‚æ­¤ä¸€æ¥ä¼šæå¤§èŠ‚çœèµ„æºå¼€é”€ï¼Œä»¥åŠå¤„ç†æ—¶é—´ã€‚</p><p>è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸»è¦å·®åˆ«åœ¨äºå®ƒä»¬æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†æ–¹å¼ã€‚è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶å®ƒè¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆç‡è¦å·®ä¸€äº›ã€‚ä½†å¯¹äºä¸€äº›è¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”åˆè¦å…±äº«æŸäº›å˜é‡çš„å¹¶å‘æ“ä½œï¼Œåªèƒ½ç”¨çº¿ç¨‹ï¼Œä¸èƒ½ç”¨è¿›ç¨‹ã€‚</p><p>æˆ‘ä»¬æœ‰å¦‚ä¸‹å¯¹æ¯”å›¾ç‰‡ï¼š</p><table><thead><tr><th>Tables</th><th style="text-align:center">Process   è¿›ç¨‹</th><th style="text-align:right">Threadçº¿ç¨‹</th></tr></thead><tbody><tr><td>å¼•å…¥ç›®çš„</td><td style="text-align:center">å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œæé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡</td><td style="text-align:right">è°ƒé«˜å¹¶å‘æ‰§è¡Œçš„é€Ÿåº¦ï¼Œè¿›ä¸€æ­¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡</td></tr><tr><td>å¹¶å‘æ€§</td><td style="text-align:center">è¾ƒä½</td><td style="text-align:right">è¾ƒé«˜</td></tr><tr><td>åŸºæœ¬å±æ€§ï¼ˆè°ƒåº¦ï¼‰</td><td style="text-align:center">èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹</td><td style="text-align:right">èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯çº¿ç¨‹</td></tr><tr><td>åŸºæœ¬çŠ¶æ€</td><td style="text-align:center">å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾…</td><td style="text-align:right">å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾…</td></tr><tr><td>ç³»ç»Ÿå¼€é”€</td><td style="text-align:center">åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå¤§</td><td style="text-align:right">åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå°</td></tr><tr><td>ç³»ç»Ÿæ“ä½œ</td><td style="text-align:center">åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢</td><td style="text-align:right">åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢</td></tr><tr><td>å­˜åœ¨çŠ¶æ€</td><td style="text-align:center">è¿›ç¨‹æ§åˆ¶å—PCB</td><td style="text-align:right">è¿›ç¨‹æ§åˆ¶å—PCBï¼Œè¿›ç¨‹æ§åˆ¶å—TCB</td></tr></tbody></table><h4 id="ä½†æ˜¯å¯¹äº-Linux-æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº-Linux-è€Œè¨€ï¼š"><a href="#ä½†æ˜¯å¯¹äº-Linux-æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº-Linux-è€Œè¨€ï¼š" class="headerlink" title="ä½†æ˜¯å¯¹äº Linux æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº Linux è€Œè¨€ï¼š"></a>ä½†æ˜¯å¯¹äº Linux æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äº Linux è€Œè¨€ï¼š</h4><ul><li>ç³»ç»Ÿå¯åŠ¨åçš„ ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯ initï¼Œå®ƒçš„ PID æ˜¯ 1ã€‚init æ˜¯å”¯ä¸€ä¸€ä¸ªç”±ç³»ç»Ÿå†…æ ¸ç›´æ¥è¿è¡Œçš„è¿›ç¨‹ã€‚</li><li>é™¤äº† init ä¹‹å¤–ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ çˆ¶è¿›ç¨‹ï¼ˆPPID æ ‡è¯†ï¼‰</li><li>æ¯ä¸ªè¿›ç¨‹è¿˜æœ‰å››ä¸ª ä¸ç”¨æˆ·å’Œç»„ç›¸å…³çš„è¯†åˆ«å·<br>1.å®é™…ç”¨æˆ·è¯†åˆ«å· ï¼ˆreal user IDï¼ŒRUIDï¼‰<br>2.å®é™…ç»„è¯†åˆ«å· ï¼ˆreal group IDï¼ŒRGIDï¼‰<br>3.æœ‰æ•ˆç”¨æˆ·è¯†åˆ«å· ï¼ˆeffect user IDï¼ŒEUIDï¼‰<br>4.æœ‰æ•ˆç»„è¯†åˆ«å· ï¼ˆeffect group IDï¼ŒEGID</li></ul><p>######åœ¨ Linux å†…æ ¸ 2.4 ç‰ˆä»¥å‰ï¼Œçº¿ç¨‹çš„å®ç°å’Œç®¡ç†æ–¹å¼å°±æ˜¯å®Œå…¨æŒ‰ç…§è¿›ç¨‹æ–¹å¼å®ç°çš„ã€‚åœ¨ 2.6 ç‰ˆå†…æ ¸ä»¥åæ‰æœ‰äº†å•ç‹¬çš„çº¿ç¨‹å®ç°,ä¸ºäº†å¼¥è¡¥ä¸æ”¯æŒçº¿ç¨‹çš„ç¼ºé™·ï¼ŒLinux å¼•å…¥çº¿ç¨‹ç»„çš„æ¦‚å¿µï¼Œå³è¯¥ç»„ä¸­ç¬¬ä¸€ä¸ªè½»é‡çº§è¿›ç¨‹çš„ PIDï¼Œå®ƒè¢«å­˜å…¥è¿›ç¨‹æè¿°ç¬¦çš„ tgid å­—æ®µä¸­ã€‚<code>getpid()</code>ç³»ç»Ÿè°ƒç”¨è¿”å›å½“å‰è¿›ç¨‹çš„ tgid å€¼è€Œä¸æ˜¯ pid å€¼ï¼Œå› æ­¤ï¼Œä¸€ä¸ªå¤šçº¿ç¨‹åº”ç”¨çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„ PIDã€‚</p><ul><li><code>fork()</code>ç³»ç»Ÿè°ƒç”¨æ˜¯Unixä¸‹ä»¥è‡ªèº«è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä¸€æ¬¡è°ƒç”¨ï¼Œä¸¤æ¬¡è¿”å›ï¼Œå¦‚æœè¿”å›æ˜¯0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹ï¼Œå¦‚æœè¿”å›å€¼&gt;0ï¼Œåˆ™æ˜¯çˆ¶è¿›ç¨‹ï¼ˆè¿”å›å€¼æ˜¯å­è¿›ç¨‹çš„pidï¼‰,å¦‚æœforkå‡ºé”™ï¼Œè¿”å›ä¸€ä¸ªè´Ÿå€¼.</li><li>åœ¨<code>fork()</code>çš„è°ƒç”¨å¤„ï¼Œæ•´ä¸ªçˆ¶è¿›ç¨‹ç©ºé—´ä¼šåŸæ¨¡åŸæ ·åœ°å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ï¼ŒåŒ…æ‹¬æŒ‡ä»¤ï¼Œå˜é‡å€¼ï¼Œç¨‹åºè°ƒç”¨æ ˆï¼Œç¯å¢ƒå˜é‡ï¼Œç¼“å†²åŒºï¼Œç­‰ç­‰ã€‚</li><li><code>fork()</code>å‡½æ•°ä¼šæŠŠå®ƒæ‰€åœ¨è¯­å¥ä»¥åçš„è¯­å¥å¤åˆ¶åˆ°ä¸€ä¸ªå­è¿›ç¨‹é‡Œï¼Œå•ç‹¬æ‰§è¡Œã€‚</li><li><p>å¦‚æœ<code>printf</code>å‡½æ•°æœ€åæ²¡æœ‰<code>&quot;\n&quot;</code>ï¼Œåˆ™è¾“å‡ºç¼“å†²åŒºä¸ä¼šè¢«ç«‹å³æ¸…ç©ºï¼Œè€Œforkå‡½æ•°ä¼šæŠŠè¾“å‡ºç¼“å†²åŒºé‡Œçš„å†…å®¹ä¹Ÿéƒ½å¤åˆ¶åˆ°å­è¿›ç¨‹é‡Œ</p></li><li><p>è¿›ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯çº¿çŠ¶çš„ï¼Œå°½ç®¡ä¸­é—´ä¼šå‘ç”Ÿä¸­æ–­æˆ–æš‚åœï¼Œä½†è¯¥è¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºåªä¸ºè¯¥çº¿çŠ¶æ‰§è¡Œè¿‡ç¨‹æœåŠ¡ã€‚ä¸€æ—¦å‘ç”Ÿè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™äº›èµ„æºéƒ½æ˜¯è¦è¢«ä¿æŠ¤èµ·æ¥çš„ã€‚</p></li><li>çº¿ç¨‹çš„æ”¹å˜åªä»£è¡¨äº† CPU æ‰§è¡Œè¿‡ç¨‹çš„æ”¹å˜ï¼Œè€Œæ²¡æœ‰å‘ç”Ÿè¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºå˜åŒ–ã€‚</li><li>è®¡ç®—æœºå†…çš„è½¯ç¡¬ä»¶èµ„æºçš„åˆ†é…ä¸çº¿ç¨‹æ— å…³ï¼Œçº¿ç¨‹åªèƒ½å…±äº«å®ƒæ‰€å±è¿›ç¨‹çš„èµ„æºã€‚</li><li>è¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸ä¾èµ–äºçº¿ç¨‹è€Œç‹¬ç«‹å­˜åœ¨ï¼›åä¹‹ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ²¡æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä¸è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«åˆ†é…ç»™è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li><li>çº¿ç¨‹ä¸­æ‰§è¡Œæ—¶ä¸€èˆ¬éƒ½è¦è¿›è¡ŒåŒæ­¥å’Œäº’æ–¥ï¼Œå› ä¸ºä»–ä»¬å…±äº«åŒä¸€è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li></ul><p><strong>æ–‡ç« æ¥æº:</strong><br><a href="https://zhuanlan.zhihu.com/p/60558136" target="_blank" rel="noopener">è¿›ç¨‹å’Œçº¿ç¨‹æœ‰å“ªäº›åŒºåˆ«ä¸è”ç³»ï¼ŸåŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Operation System </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Everything About HashMap</title>
      <link href="/2020/02/04/Everything-About-HashMap/"/>
      <url>/2020/02/04/Everything-About-HashMap/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ" class="headerlink" title="1.ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ"></a>1.ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ</h2><ul><li>HashMapæ˜¯ä¸€ä¸ªæ•£åˆ—æ¡¶ï¼ˆæ•°ç»„å’Œé“¾è¡¨ï¼‰ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹(key-value)æ˜ å°„ã€‚</li><li>HashMapé‡‡ç”¨äº†æ•°ç»„å’Œé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œèƒ½åœ¨æŸ¥è¯¢å’Œä¿®æ”¹æ–¹ä¾¿ç»§æ‰¿äº†æ•°ç»„çš„çº¿æ€§æŸ¥æ‰¾å’Œé“¾è¡¨çš„å¯»å€ä¿®æ”¹ã€‚æ•°ç»„æ˜¯ç”¨æ¥ç¡®å®šæ¡¶çš„ä½ç½®ï¼Œåˆ©ç”¨å…ƒç´ çš„keyçš„hashå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°. é“¾è¡¨æ˜¯ç”¨æ¥è§£å†³hashå†²çªé—®é¢˜ï¼Œå½“å‡ºç°hashå€¼ä¸€æ ·çš„æƒ…å½¢ï¼Œå°±åœ¨æ•°ç»„ä¸Šçš„å¯¹åº”ä½ç½®å½¢æˆä¸€æ¡é“¾è¡¨ã€‚</li><li>ç”¨LinkedListä»£æ›¿æ•°ç»„ç»“æ„å¯ä»¥ä¹ˆ?</li></ul><p>å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œç¨å¾®è¯´æ˜ä¸€ä¸‹ï¼Œæ­¤é¢˜çš„æ„æ€æ˜¯ï¼Œæºç ä¸­æ˜¯è¿™æ ·çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Entry[] table = <span class="keyword">new</span> Entry[capacity];</span><br><span class="line"></span><br><span class="line">Entryå°±æ˜¯ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ã€‚ é‚£ä¸‹é¢è¿™æ ·è¡¨ç¤ºï¼Œæ˜¯å¦å¯è¡Œ?</span><br><span class="line"></span><br><span class="line">List&lt;Entry&gt; table = <span class="keyword">new</span> LinkedList&lt;Entry&gt;();</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼Œæ˜¯å¯ä»¥çš„ã€‚</p><p>æ—¢ç„¶æ˜¯å¯ä»¥çš„,ä¸ºä»€ä¹ˆHashMapä¸ç”¨LinkedList,è€Œé€‰ç”¨æ•°ç»„?<br>å› ä¸ºç”¨æ•°ç»„æ•ˆç‡æœ€é«˜ï¼åœ¨HashMapä¸­ï¼Œå®šä½æ¡¶çš„ä½ç½®æ˜¯åˆ©ç”¨å…ƒç´ çš„keyçš„å“ˆå¸Œå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²å¾—åˆ°æ¡¶çš„ä½ç½®ã€‚æ˜¾ç„¶æ•°ç»„çš„æŸ¥æ‰¾æ•ˆç‡æ¯”LinkedListå¤§ã€‚</p><ul><li>é‚£ArrayListï¼Œåº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼ŒæŸ¥æ‰¾ä¹Ÿå¿«å•Šï¼Œä¸ºå•¥ä¸ç”¨ArrayList?<br>å› ä¸ºé‡‡ç”¨åŸºæœ¬æ•°ç»„ç»“æ„ï¼Œæ‰©å®¹æœºåˆ¶å¯ä»¥è‡ªå·±å®šä¹‰ï¼ŒHashMapä¸­æ•°ç»„æ‰©å®¹åˆšå¥½æ˜¯2çš„æ¬¡å¹‚ï¼Œåœ¨åšå–æ¨¡è¿ç®—çš„æ•ˆç‡é«˜ã€‚ è€ŒArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯1.5å€æ‰©å®¹ï¼Œé‚£ArrayListä¸ºä»€ä¹ˆæ˜¯1.5å€æ‰©å®¹è¿™å°±ä¸åœ¨æœ¬æ–‡è¯´æ˜äº†ã€‚</li><li>HashMapæ˜¯ésynchronizedï¼Œæ‰€ä»¥HashMapå¾ˆå¿«ã€‚</li><li>HashMapå¯ä»¥æ¥å—nullé”®å’Œå€¼ï¼Œè€ŒHashtableåˆ™ä¸èƒ½ï¼ˆåŸå› å°±æ˜¯<code>equlas()</code>æ–¹æ³•éœ€è¦å¯¹è±¡ï¼Œå› ä¸ºHashMapæ˜¯åå‡ºçš„APIç»è¿‡å¤„ç†æ‰å¯ä»¥ï¼‰</li><li>å½“é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘åï¼Œä»€ä¹ˆæ—¶å€™é€€åŒ–ä¸ºé“¾è¡¨?<br>ä¸º6çš„æ—¶å€™é€€è½¬ä¸ºé“¾è¡¨ã€‚ä¸­é—´æœ‰ä¸ªå·®å€¼7å¯ä»¥é˜²æ­¢é“¾è¡¨å’Œæ ‘ä¹‹é—´é¢‘ç¹çš„è½¬æ¢ã€‚å‡è®¾ä¸€ä¸‹ï¼Œå¦‚æœè®¾è®¡æˆé“¾è¡¨ä¸ªæ•°è¶…è¿‡8åˆ™é“¾è¡¨è½¬æ¢æˆæ ‘ç»“æ„ï¼Œé“¾è¡¨ä¸ªæ•°å°äº8åˆ™æ ‘ç»“æ„è½¬æ¢æˆé“¾è¡¨ï¼Œå¦‚æœä¸€ä¸ªHashMapä¸åœçš„æ’å…¥ã€åˆ é™¤å…ƒç´ ï¼Œé“¾è¡¨ä¸ªæ•°åœ¨8å·¦å³å¾˜å¾Šï¼Œå°±ä¼šé¢‘ç¹çš„å‘ç”Ÿæ ‘è½¬é“¾è¡¨ã€é“¾è¡¨è½¬æ ‘ï¼Œæ•ˆç‡ä¼šå¾ˆä½ã€‚</li></ul><h2 id="2-HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>HashMapæ˜¯åŸºäºhashingçš„åŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­ï¼Œä½¿ç”¨get(key)ä»HashMapä¸­è·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•ï¼Œè®¡ç®—å¹¶è¿”å›çš„hashCodeæ˜¯ç”¨äºæ‰¾åˆ°Mapæ•°ç»„çš„bucketä½ç½®æ¥å‚¨å­˜Node å¯¹è±¡ã€‚è¿™é‡Œå…³é”®ç‚¹åœ¨äºæŒ‡å‡ºï¼ŒHashMapæ˜¯åœ¨bucketä¸­å‚¨å­˜é”®å¯¹è±¡å’Œå€¼å¯¹è±¡ï¼Œä½œä¸ºMap.Nodeã€‚ã€€ã€€</p><ul><li>ä»¥ä¸‹æ˜¯HashMapåˆå§‹åŒ– ï¼Œç®€å•æ¨¡æ‹Ÿæ•°æ®ç»“æ„<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Node[] table=<span class="keyword">new</span> Node[<span class="number">16</span>]  æ•£åˆ—æ¡¶åˆå§‹åŒ–ï¼Œtable</span><br><span class="line"></span><br><span class="line">ã€€ã€€ <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€hash;<span class="comment">//hashå€¼</span></span><br><span class="line"></span><br><span class="line">     key;<span class="comment">//é”®</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€value;<span class="comment">//å€¼</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€node next;<span class="comment">//ç”¨äºæŒ‡å‘é“¾è¡¨çš„ä¸‹ä¸€å±‚ï¼ˆäº§ç”Ÿå†²çªï¼Œç”¨æ‹‰é“¾æ³•ï¼‰</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="putè¿‡ç¨‹ï¼ˆJDK1-8ç‰ˆï¼‰"><a href="#putè¿‡ç¨‹ï¼ˆJDK1-8ç‰ˆï¼‰" class="headerlink" title="putè¿‡ç¨‹ï¼ˆJDK1.8ç‰ˆï¼‰"></a><code>put</code>è¿‡ç¨‹ï¼ˆJDK1.8ç‰ˆï¼‰</h4><ul><li>å¯¹Keyç”¨HashCode()æ±‚Hashå€¼ï¼Œç„¶åå†è®¡ç®—ä¸‹æ ‡</li><li>å¦‚æœæ²¡æœ‰ç¢°æ’ï¼Œç›´æ¥æ”¾å…¥æ¡¶ä¸­ï¼ˆç¢°æ’çš„æ„æ€æ˜¯è®¡ç®—å¾—åˆ°çš„Hashå€¼ç›¸åŒï¼Œéœ€è¦æ”¾åˆ°åŒä¸€ä¸ªbucketä¸­ï¼‰</li><li>å¦‚æœç¢°æ’äº†ï¼Œä»¥é“¾è¡¨çš„æ–¹å¼é“¾æ¥åˆ°åé¢</li><li>å¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡é˜€å€¼( TREEIFY THRESHOLD==8)ï¼Œå°±æŠŠé“¾è¡¨è½¬æˆçº¢é»‘æ ‘ï¼Œé“¾è¡¨é•¿åº¦ä½äº6ï¼Œå°±æŠŠçº¢é»‘æ ‘è½¬å›é“¾è¡¨</li><li>å¦‚æœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢æ—§å€¼</li><li>å¦‚æœæ¡¶æ»¡äº†(å®¹é‡16*åŠ è½½å› å­0.75)ï¼Œå°±éœ€è¦ resizeï¼ˆæ‰©å®¹2å€åé‡æ’ï¼‰</li></ul><p><strong>æ‰©å®¹åï¼Œå…ƒç´ è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®ï¼Œä¸”é“¾è¡¨é¡ºåºä¸å˜ã€‚</strong></p><h4 id="Getè¿‡ç¨‹-è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ"><a href="#Getè¿‡ç¨‹-è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ" class="headerlink" title="Getè¿‡ç¨‹(è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ)"></a><code>Getè¿‡ç¨‹</code>(è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿ)</h4><p>å½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•ï¼ŒHashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®ï¼Œæ‰¾åˆ°bucketä½ç½®ä¹‹åï¼Œä¼šè°ƒç”¨keys.equals()æ–¹æ³•å»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡ã€‚</p><p>ã€€ã€€</p><h2 id="3-æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ"><a href="#3-æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ" class="headerlink" title="3.æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ"></a>3.æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’ï¼Ÿ</h2><ul><li>æ‰°åŠ¨å‡½æ•°å¯ä»¥å‡å°‘ç¢°æ’ï¼ŒåŸç†æ˜¯å¦‚æœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±ä¼šå°äº›ï¼Œè¿™å°±æ„å‘³ç€å­˜é“¾è¡¨ç»“æ„å‡å°ï¼Œè¿™æ ·å–å€¼çš„è¯å°±ä¸ä¼šé¢‘ç¹è°ƒç”¨equalæ–¹æ³•ï¼Œè¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½ã€‚ï¼ˆæ‰°åŠ¨å³Hashæ–¹æ³•å†…éƒ¨çš„ç®—æ³•å®ç°ï¼Œç›®çš„æ˜¯è®©ä¸åŒå¯¹è±¡è¿”å›ä¸åŒhashcodeã€‚ï¼‰</li><li>ä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜ä½œfinalçš„å¯¹è±¡ï¼Œå¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯ï¼Œå°†ä¼šå‡å°‘ç¢°æ’çš„å‘ç”Ÿã€‚ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcodeï¼Œè¿™å°†æé«˜æ•´ä¸ªè·å–å¯¹è±¡çš„é€Ÿåº¦ï¼Œä½¿ç”¨Stringï¼ŒIntergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿå› ä¸ºStringæ˜¯finalçš„ï¼Œè€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†ã€‚ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode()ï¼Œå°±è¦é˜²æ­¢é”®å€¼æ”¹å˜ï¼Œå¦‚æœé”®å€¼åœ¨æ”¾å…¥æ—¶å’Œè·å–æ—¶è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»HashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚</li></ul><h2 id="4-HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„"><a href="#4-HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„" class="headerlink" title="4.HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„?"></a>4.HashMapä¸­hashå‡½æ•°æ€ä¹ˆæ˜¯æ˜¯å®ç°çš„?</h2><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨hashmapä¸­è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ ï¼Œéœ€è¦æ ¹æ®keyçš„hashå€¼æ¥æ±‚å¾—å¯¹åº”æ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚ä½•è®¡ç®—è¿™ä¸ªä½ç½®å°±æ˜¯hashç®—æ³•ã€‚å‰é¢è¯´è¿‡hashmapçš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›è¿™ä¸ªhashmapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡çš„åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç”¨hashç®—æ³•æ±‚å¾—è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±å¯ä»¥çŸ¥é“å¯¹åº”ä½ç½®çš„å…ƒç´ å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œè€Œä¸ç”¨å†å»éå†é“¾è¡¨ã€‚ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠhashcodeå¯¹æ•°ç»„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå…ƒç´ çš„åˆ†å¸ƒç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚ä½†æ˜¯ï¼Œâ€œæ¨¡â€è¿ç®—çš„æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œèƒ½ä¸èƒ½æ‰¾ä¸€ç§æ›´å¿«é€Ÿï¼Œæ¶ˆè€—æ›´å°çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹JDK1.8çš„æºç æ˜¯æ€ä¹ˆåšçš„.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">int</span> h;</span><br><span class="line">     h=key.hashCode()ï¼›è¿”å›æ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode</span><br><span class="line">      <span class="comment">// ^ ï¼šæŒ‰ä½å¼‚æˆ–</span></span><br><span class="line">      <span class="comment">// &gt;&gt;&gt;:æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½</span></span><br><span class="line">      <span class="comment">//å…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå³Mapçš„æ•°ç»„éƒ¨åˆ†åˆå§‹åŒ–é•¿åº¦</span></span><br><span class="line">     <span class="keyword">return</span>  (n-<span class="number">1</span>)&amp;(h ^ (h &gt;&gt;&gt; <span class="number">16</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>é«˜16ä½å¼‚æˆ–ä½16ä½ä»¥åï¼Œè¿›è¡Œå–æ¨¡è¿ç®—</strong><br>1.é«˜16bitä¸å˜ï¼Œä½16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–(å¾—åˆ°çš„HashCodeè½¬åŒ–ä¸º32ä½çš„äºŒè¿›åˆ¶ï¼Œå‰16ä½å’Œå16ä½ä½16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–)<br>2.(nÂ·1)&amp;hash=-&gt;å¾—åˆ°ä¸‹æ ‡</p><ul><li>ä¸ºä»€ä¹ˆæ‰©å®¹æ˜¯2çš„æ¬¡å¹‚?</li></ul><p>HashMapä¸ºäº†å­˜å–é«˜æ•ˆï¼Œè¦å°½é‡è¾ƒå°‘ç¢°æ’ï¼Œå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨é•¿åº¦å¤§è‡´ç›¸åŒï¼Œè¿™ä¸ªå®ç°å°±åœ¨æŠŠæ•°æ®å­˜åˆ°å“ªä¸ªé“¾è¡¨ä¸­çš„ç®—æ³•<br>è¿™ä¸ªç®—æ³•å®é™…å°±æ˜¯å–æ¨¡ï¼Œhash%lengthã€‚ ä½†æ˜¯ï¼Œå¤§å®¶éƒ½çŸ¥é“è¿™ç§è¿ç®—ä¸å¦‚ä½ç§»è¿ç®—å¿«ã€‚<br>å› æ­¤ï¼Œæºç ä¸­åšäº†ä¼˜åŒ–hash&amp;(length-1)ã€‚ ä¹Ÿå°±æ˜¯è¯´hash%length==hash&amp;(length-1)</p><h2 id="5-æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ"><a href="#5-æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ" class="headerlink" title="5.æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ"></a>5.æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿ</h2><p>ä¹‹æ‰€ä»¥é€‰æ‹©çº¢é»‘æ ‘æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šå˜æˆä¸€æ¡çº¿æ€§ç»“æ„ï¼ˆè¿™å°±è·ŸåŸæ¥ä½¿ç”¨é“¾è¡¨ç»“æ„ä¸€æ ·äº†ï¼Œé€ æˆå¾ˆæ·±çš„é—®é¢˜ï¼‰ï¼Œéå†æŸ¥æ‰¾ä¼šéå¸¸æ…¢ã€‚è€Œçº¢é»‘æ ‘åœ¨æ’å…¥æ–°æ•°æ®åå¯èƒ½éœ€è¦é€šè¿‡å·¦æ—‹ï¼Œå³æ—‹ã€å˜è‰²è¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡ï¼Œå¼•å…¥çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†æŸ¥æ‰¾æ•°æ®å¿«ï¼Œè§£å†³é“¾è¡¨æŸ¥è¯¢æ·±åº¦çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“çº¢é»‘æ ‘å±äºå¹³è¡¡äºŒå‰æ ‘ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒâ€œå¹³è¡¡â€æ˜¯éœ€è¦ä»˜å‡ºä»£ä»·çš„ï¼Œä½†æ˜¯è¯¥ä»£ä»·æ‰€æŸè€—çš„èµ„æºè¦æ¯”éå†çº¿æ€§é“¾è¡¨è¦å°‘ï¼Œæ‰€ä»¥å½“é•¿åº¦å¤§äº8çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨çº¢é»‘æ ‘ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¾ˆçŸ­çš„è¯ï¼Œæ ¹æœ¬ä¸éœ€è¦å¼•å…¥çº¢é»‘æ ‘ï¼Œå¼•å…¥åè€Œä¼šæ…¢ã€‚</p><h2 id="6-å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ"><a href="#6-å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ" class="headerlink" title="6.å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ"></a>6.å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ</h2><ul><li>èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚</li><li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚(ä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹)</li><li><strong>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚</strong></li></ul><h2 id="7-è§£å†³hash-ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ"><a href="#7-è§£å†³hash-ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ" class="headerlink" title="7.è§£å†³hash ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ"></a>7.è§£å†³hash ç¢°æ’è¿˜æœ‰é‚£äº›åŠæ³•ï¼Ÿ</h2><p><strong>æ¯”è¾ƒå‡ºåçš„æœ‰å››ç§ (1)å¼€æ”¾å®šå€æ³• (2)é“¾åœ°å€æ³• (3)å†å“ˆå¸Œæ³• (4)å…¬å…±æº¢å‡ºåŒºåŸŸæ³•</strong></p><ul><li>å¼€æ”¾å®šå€æ³•<br>å¼€æ”¾å®šå€æ³•å°±æ˜¯ä¸€æ—¦å‘ç”Ÿäº†å†²çªï¼Œå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€ï¼Œåªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°ï¼Œå¹¶å°†è®°å½•å­˜å…¥ã€‚</li><li>é“¾åœ°å€æ³•<br>å°†å“ˆå¸Œè¡¨çš„æ¯ä¸ªå•å…ƒä½œä¸ºé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œæ‰€æœ‰å“ˆå¸Œåœ°å€ä¸ºiçš„å…ƒç´ æ„æˆä¸€ä¸ªåŒä¹‰è¯é“¾è¡¨ã€‚å³å‘ç”Ÿå†²çªæ—¶å°±æŠŠè¯¥å…³é”®å­—é“¾åœ¨ä»¥è¯¥å•å…ƒä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨çš„å°¾éƒ¨ã€‚</li><li>å†å“ˆå¸Œæ³•<br>å½“å“ˆå¸Œåœ°å€å‘ç”Ÿå†²çªç”¨å…¶ä»–çš„å‡½æ•°è®¡ç®—å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°åœ°å€ï¼Œç›´åˆ°å†²çªä¸å†äº§ç”Ÿä¸ºæ­¢ã€‚</li><li>å»ºç«‹å…¬å…±æº¢å‡ºåŒº<br>å°†å“ˆå¸Œè¡¨åˆ†ä¸ºåŸºæœ¬è¡¨å’Œæº¢å‡ºè¡¨ä¸¤éƒ¨åˆ†ï¼Œå‘ç”Ÿå†²çªçš„å…ƒç´ éƒ½æ”¾å…¥æº¢å‡ºè¡¨ä¸­ã€‚</li></ul><p><strong>ä¸‹é¢ç»™ä¸€ä¸ªçº¿æ€§æ¢æŸ¥æ³•çš„ä¾‹å­</strong>ã€€</p><p><strong>é—®é¢˜ï¼šå·²çŸ¥ä¸€ç»„å…³é”®å­—ä¸º(26ï¼Œ36ï¼Œ41ï¼Œ38ï¼Œ44ï¼Œ15ï¼Œ68ï¼Œ12ï¼Œ06ï¼Œ51)ï¼Œç”¨é™¤ä½™æ³•æ„é€ æ•£åˆ—å‡½æ•°ï¼Œç”¨çº¿æ€§æ¢æŸ¥æ³•è§£å†³å†²çªæ„é€ è¿™ç»„å…³é”®å­—çš„æ•£åˆ—è¡¨</strong></p><p> <strong>è§£ç­”ï¼šä¸ºäº†å‡å°‘å†²çªï¼Œé€šå¸¸ä»¤è£…å¡«å› å­Î±ç”±é™¤ä½™æ³•å› å­æ˜¯13çš„æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºçš„ä¸Šè¿°å…³é”®å­—åºåˆ—çš„æ•£åˆ—åœ°å€ä¸º(0ï¼Œ10ï¼Œ2ï¼Œ12ï¼Œ5ï¼Œ2ï¼Œ3ï¼Œ12ï¼Œ6ï¼Œ12)ã€‚</strong></p><ul><li>å‰5ä¸ªå…³é”®å­—æ’å…¥æ—¶ï¼Œå…¶ç›¸åº”çš„åœ°å€å‡ä¸ºå¼€æ”¾åœ°å€ï¼Œæ•…å°†å®ƒä»¬ç›´æ¥æ’å…¥T[0]ï¼ŒT[10)ï¼ŒT[2]ï¼ŒT[12]å’ŒT[5]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬6ä¸ªå…³é”®å­—15æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€2(å³h(15)=15ï¼…13=2)å·²è¢«å…³é”®å­—41(15å’Œ41äº’ä¸ºåŒä¹‰è¯)å ç”¨ã€‚æ•…æ¢æŸ¥h1=(2+1)ï¼…13=3ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œæ‰€ä»¥å°†15æ”¾å…¥T[3]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬7ä¸ªå…³é”®å­—68æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€3å·²è¢«éåŒä¹‰è¯15å…ˆå ç”¨ï¼Œæ•…å°†å…¶æ’å…¥åˆ°T[4]ä¸­ã€‚</li><li>å½“æ’å…¥ç¬¬8ä¸ªå…³é”®å­—12æ—¶ï¼Œæ•£åˆ—åœ°å€12å·²è¢«åŒä¹‰è¯38å ç”¨ï¼Œæ•…æ¢æŸ¥hl=(12+1)ï¼…13=0ï¼Œè€ŒT[0]äº¦è¢«26å ç”¨ï¼Œå†æ¢æŸ¥h2=(12+2)ï¼…13=1ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œå¯å°†12æ’å…¥å…¶ä¸­ã€‚</li><li>ç±»ä¼¼åœ°ï¼Œç¬¬9ä¸ªå…³é”®å­—06ç›´æ¥æ’å…¥T[6]ä¸­ï¼›è€Œæœ€åä¸€ä¸ªå…³é”®å­—51æ’äººæ—¶ï¼Œå› æ¢æŸ¥çš„åœ°å€12ï¼Œ0ï¼Œ1ï¼Œâ€¦ï¼Œ6å‡éç©ºï¼Œæ•…51æ’å…¥T[7]ä¸­ã€‚</li></ul><h2 id="8-å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­-load-factor-å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#8-å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­-load-factor-å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="8.å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>8.å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿ</h2><p>ã€€ã€€é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™ï¼Œå’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·ï¼Œå°†ä¼šåˆ›å»ºåŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„ï¼Œæ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°ï¼Œå¹¶å°†åŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashingï¼Œå› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®ã€‚è¿™ä¸ªå€¼åªå¯èƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯åŸä¸‹æ ‡çš„ä½ç½®ï¼Œå¦ä¸€ç§æ˜¯åœ¨ä¸‹æ ‡ä¸º <strong>&lt;åŸä¸‹æ ‡+åŸå®¹é‡&gt;</strong> çš„ä½ç½®ã€€ã€€</p><h2 id="9-é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ"><a href="#9-é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ" class="headerlink" title="9.é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ"></a>9.é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</h2><ul><li>å½“æ‰©å®¹é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™ï¼Œç¡®å®å­˜åœ¨æ¡ä»¶ç«äº‰ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘ç°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†ï¼Œå®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°ã€‚åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥ï¼Œå› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™ï¼ŒHashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éå†(tail traversing)ã€‚å› ä¸ºç›´æ¥æ’å…¥çš„æ•ˆç‡æ›´é«˜ã€‚å¦‚æœæ¡ä»¶ç«äº‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå°±æ­»å¾ªç¯äº†ã€‚(å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä¸ä½¿ç”¨HashMapï¼‰ã€‚</li><li>ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¯¼è‡´æ­»å¾ªç¯ï¼Œå®ƒæ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ<br>HashMapçš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚å½“ç»è¿‡å¤šæ¬¡å…ƒç´ æ’å…¥ï¼Œä½¿å¾—HashMapè¾¾åˆ°ä¸€å®šé¥±å’Œåº¦æ—¶ï¼ŒKeyæ˜ å°„ä½ç½®å‘ç”Ÿå†²çªçš„å‡ ç‡ä¼šé€æ¸æé«˜ã€‚è¿™æ—¶å€™ï¼ŒHashMapéœ€è¦æ‰©å±•å®ƒçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¿›è¡ŒResizeã€‚1.æ‰©å®¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Entryç©ºæ•°ç»„ï¼Œé•¿åº¦æ˜¯åŸæ•°ç»„çš„2å€ã€‚2.ReHashï¼šéå†åŸEntryæ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„Entryé‡æ–°Hashåˆ°æ–°æ•°ç»„ã€‚</li></ul><blockquote><p> <strong>HashMap æ‰©å®¹çš„æ—¶å€™ä¼šè°ƒç”¨ resize() æ–¹æ³•ï¼Œå°±æ˜¯è¿™é‡Œçš„å¹¶å‘æ“ä½œå®¹æ˜“åœ¨ä¸€ä¸ªæ¡¶ä¸Šå½¢æˆç¯å½¢é“¾è¡¨ï¼›è¿™æ ·å½“è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„ key æ—¶ï¼Œè®¡ç®—å‡ºçš„ index æ­£å¥½æ˜¯ç¯å½¢é“¾è¡¨çš„ä¸‹æ ‡å°±ä¼šå‡ºç°æ­»å¾ªç¯ã€‚</strong></p></blockquote><blockquote><p>åœ¨HashMap1.7ä¹‹å‰æ˜¯å¤´æ’æ³•ï¼Œåœ¨æ‰©å®¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆä¸€ä¸ªresize()çš„æ–¹æ³•ï¼Œç„¶åè°ƒç”¨transfer()æ–¹æ³•ï¼ŒæŠŠé‡Œé¢çš„Entryè¿›è¡Œäº†Rehashï¼Œåœ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆé“¾è¡¨çš„å¾ªç¯ï¼Œåœ¨ä¸€ä¸‹æ¬¡Get()ä¸­å‡ºç°æ­»å¾ªç¯ï¼Œæˆ–è€…å‡ºç°æ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥æ•°æ®ä¸å®‰å…¨</p></blockquote><h2 id="10-HashTable"><a href="#10-HashTable" class="headerlink" title="10.HashTable"></a>10.HashTable</h2><p>æ•°ç»„ + é“¾è¡¨æ–¹å¼å­˜å‚¨<br>é»˜è®¤å®¹é‡ï¼š 11(è´¨æ•°ä¸ºå®œ)</p><h4 id="Put"><a href="#Put" class="headerlink" title="Put:"></a><code>Put:</code></h4><ul><li>å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æœæ²¡ç¢°æ’ç›´æ¥æ”¾åˆ°bucketé‡Œï¼› å¦‚æœç¢°æ’äº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåï¼› å¦‚æœç¢°æ’å¯¼è‡´é“¾è¡¨è¿‡é•¿(å¤§äºç­‰äºTREEIFY_THRESHOLD)ï¼Œå°±æŠŠé“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘(JDK1.8ä¸­çš„æ”¹åŠ¨)ï¼› å¦‚æœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯ä¸€æ€§) å¦‚æœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resizeã€‚</li><li>ç´¢å¼•è®¡ç®— : ï¼ˆkey.hashCode() &amp; 0x7FFFFFFFï¼‰% table.length</li><li>è‹¥åœ¨é“¾è¡¨ä¸­æ‰¾åˆ°äº†ï¼Œåˆ™æ›¿æ¢æ—§å€¼ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™ç»§ç»­</li><li>å½“æ€»å…ƒç´ ä¸ªæ•°è¶…è¿‡å®¹é‡*åŠ è½½å› å­æ—¶ï¼Œæ‰©å®¹ä¸ºåŸæ¥ 2 å€å¹¶é‡æ–°æ•£åˆ—ã€‚</li><li><strong>å°†æ–°å…ƒç´ åŠ åˆ°é“¾è¡¨å¤´éƒ¨,å¯¹ä¿®æ”¹ Hashtable å†…éƒ¨å…±äº«æ•°æ®çš„æ–¹æ³•æ·»åŠ äº† synchronizedï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</strong>ã€‚<h4 id="Get"><a href="#Get" class="headerlink" title="Get:"></a><code>Get:</code></h4>å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æœåœ¨bucketé‡Œçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹é‡Œç›´æ¥å‘½ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›ï¼› å¦‚æœæœ‰å†²çªï¼Œåˆ™é€šè¿‡key.equals(k)å»æŸ¥æ‰¾å¯¹åº”çš„Entry;<br>â€¢ è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(logn)ï¼›<br>â€¢ è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(n)ã€‚</li></ul><h2 id="11-HashMap-ï¼ŒHashTable-åŒºåˆ«"><a href="#11-HashMap-ï¼ŒHashTable-åŒºåˆ«" class="headerlink" title="11.HashMap ï¼ŒHashTable åŒºåˆ«"></a>11.HashMap ï¼ŒHashTable åŒºåˆ«</h2><ul><li>é»˜è®¤å®¹é‡ä¸åŒã€‚æ‰©å®¹ä¸åŒ</li><li>çº¿ç¨‹å®‰å…¨æ€§ï¼ŒHashTable å®‰å…¨  </li><li>æ•ˆç‡ä¸åŒ HashTable è¦æ…¢å› ä¸ºåŠ é”</li></ul><h2 id="12-å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ"><a href="#12-å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ" class="headerlink" title="12.å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ"></a>12.å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ</h2><p>æˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„ï¼Œä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚ConcurrentHashMapå½“ç„¶å¯ä»¥ä»£æ›¿HashTableï¼Œä½†æ˜¯HashTableæä¾›æ›´å¼ºçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚å®ƒä»¬éƒ½å¯ä»¥ç”¨äºå¤šçº¿ç¨‹çš„ç¯å¢ƒï¼Œä½†æ˜¯å½“Hashtableçš„å¤§å°å¢åŠ åˆ°ä¸€å®šçš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œå› ä¸ºè¿­ä»£æ—¶éœ€è¦è¢«é”å®šå¾ˆé•¿çš„æ—¶é—´ã€‚å› ä¸ºConcurrentHashMapå¼•å…¥äº†åˆ†å‰²(segmentation)ï¼Œä¸è®ºå®ƒå˜å¾—å¤šä¹ˆå¤§ï¼Œä»…ä»…éœ€è¦é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€Œå…¶å®ƒçš„çº¿ç¨‹ä¸éœ€è¦ç­‰åˆ°è¿­ä»£å®Œæˆæ‰èƒ½è®¿é—®mapã€‚ç®€è€Œè¨€ä¹‹ï¼Œåœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒConcurrentHashMapä»…ä»…é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€ŒHashtableåˆ™ä¼šé”å®šæ•´ä¸ªmapã€‚</p><h2 id="13-CocurrentHashMapï¼ˆ1-8ï¼‰"><a href="#13-CocurrentHashMapï¼ˆ1-8ï¼‰" class="headerlink" title="13.CocurrentHashMapï¼ˆ1.8ï¼‰"></a>13.CocurrentHashMapï¼ˆ1.8ï¼‰</h2><ul><li>å…¶ä¸­æŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº†<code>CAS + synchronized</code>æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚</li><li>å…¶ä¸­çš„ val next éƒ½ç”¨äº† <code>volatile</code>ä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§</li><li>æœ€å¤§ç‰¹ç‚¹æ˜¯å¼•å…¥äº† CASï¼ˆå€ŸåŠ© Unsafe æ¥å®ç°ã€native codeã€‘ï¼‰<br>CASæœ‰3ä¸ªæ“ä½œæ•°ï¼Œå†…å­˜å€¼Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li><p>CAS ä¼šå‡ºç°çš„é—®é¢˜ï¼šABA<br>è§£å†³ï¼šå¯¹å˜é‡å¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œç‰ˆæœ¬å·åŠ  1ï¼Œæ¯”è¾ƒçš„æ—¶å€™æ¯”è¾ƒç‰ˆæœ¬å·ã€‚<br>####<code>Putè¿‡ç¨‹</code></p></li><li><p>æ ¹æ® key è®¡ç®—å‡º hashcode ã€‚åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚</p></li><li>é€šè¿‡ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ CAS å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚</li><li>å¦‚æœå½“å‰ä½ç½®çš„ hashcode == MOVED == -1,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</li><li>å¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚</li><li><p>å¦‚æœæ•°é‡å¤§äº TREEIFY_THRESHOLD åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><h4 id="Getè¿‡ç¨‹"><a href="#Getè¿‡ç¨‹" class="headerlink" title="Getè¿‡ç¨‹"></a><code>Getè¿‡ç¨‹</code></h4></li><li><p>æ ¹æ®è®¡ç®—å‡ºæ¥çš„ hashcode å¯»å€ï¼Œå¦‚æœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆç›´æ¥è¿”å›å€¼ã€‚</p></li><li>å¦‚æœæ˜¯çº¢é»‘æ ‘é‚£å°±æŒ‰ç…§æ ‘çš„æ–¹å¼è·å–å€¼ã€‚</li><li>éƒ½ä¸æ»¡è¶³é‚£å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†è·å–å€¼ã€‚</li></ul><h2 id="14-TreeMap"><a href="#14-TreeMap" class="headerlink" title="14.TreeMap"></a>14.TreeMap</h2><p>TreeMap åˆ™æ˜¯åŸºäºçº¢é»‘æ ‘çš„ä¸€ç§æä¾›é¡ºåºè®¿é—®çš„ Mapï¼Œå’ŒHashMapä¸åŒï¼Œå®ƒçš„getã€putã€removeä¹‹ç±»æ“ä½œéƒ½æ˜¯O(logn)çš„å¤æ‚åº¦ï¼Œå…·ä½“é¡ºåºå¯ä»¥ç”±æŒ‡å®šçš„Comparatoræ¥å†³å®šï¼Œæˆ–è€…æ ¹æ®é”®çš„è‡ªç„¶é¡ºåºæ¥åˆ¤æ–­</p><h2 id="15-hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ"><a href="#15-hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ" class="headerlink" title="15.hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ"></a>15.hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼Ÿ</h2><p>Hashå‡½æ•°æ˜¯æŒ‡æŠŠä¸€ä¸ªå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´ã€‚æŠŠå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´çš„ç›®çš„å¾€å¾€æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œä½¿å¾—æ•°æ®å®¹æ˜“ä¿å­˜ã€‚<br>æ¯”è¾ƒå‡ºåçš„ç®—æ³•æœ‰SHA,MD4ã€MD5ç­‰</p><p>è¯´è¯´Stringä¸­hashcodeçš„å®ç°?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="number">0</span> &amp;&amp; value.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">char</span> val[] = value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value.length; i++) &#123;</span><br><span class="line">            h = <span class="number">31</span> * h + val[i];</span><br><span class="line">        &#125;</span><br><span class="line">        hash = h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>Stringç±»ä¸­çš„hashCodeè®¡ç®—æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°±æ˜¯ä»¥31ä¸ºæƒï¼Œæ¯ä¸€ä½ä¸ºå­—ç¬¦çš„ASCIIå€¼è¿›è¡Œè¿ç®—ï¼Œç”¨è‡ªç„¶æº¢å‡ºæ¥ç­‰æ•ˆå–æ¨¡ã€‚</li><li>å“ˆå¸Œè®¡ç®—å…¬å¼å¯ä»¥è®¡ä¸º<figure class="highlight plain"><figcaption><span>+ s[1]*31^(n-2) + ... + s[n-1]```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* é‚£ä¸ºä»€ä¹ˆä»¥31ä¸ºè´¨æ•°å‘¢?</span><br><span class="line">ä¸»è¦æ˜¯å› ä¸º31æ˜¯ä¸€ä¸ªå¥‡è´¨æ•°ï¼Œæ‰€ä»¥```31*i=32*i-i=(i&lt;&lt;5)-i```ï¼Œè¿™ç§ä½ç§»ä¸å‡æ³•ç»“åˆçš„è®¡ç®—ç›¸æ¯”ä¸€èˆ¬çš„è¿ç®—å¿«å¾ˆå¤šã€‚</span><br><span class="line"></span><br><span class="line">## 16.å¥å¯ä»¥ä¸ºNullå€¼ä¹ˆ?</span><br><span class="line"></span><br><span class="line">å¯ä»¥ï¼Œkeyä¸ºnullçš„æ—¶å€™ï¼Œhashç®—æ³•æœ€åçš„å€¼ä»¥0æ¥è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æ”¾åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</span><br><span class="line"></span><br><span class="line">## 17.ä¸€èˆ¬ç”¨ä»€ä¹ˆä½œä¸ºHashMapçš„key?</span><br><span class="line"></span><br><span class="line">ä¸€èˆ¬ç”¨Integerã€Stringè¿™ç§ä¸å¯å˜ç±»å½“HashMapå½“keyï¼Œè€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨ã€‚</span><br><span class="line">â€¢ (1) å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨å®ƒåˆ›å»ºçš„æ—¶å€™hashcodeå°±è¢«ç¼“å­˜äº†ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚è¿™å°±ä½¿å¾—å­—ç¬¦ä¸²å¾ˆé€‚åˆä½œä¸ºMapä¸­çš„é”®ï¼Œå­—ç¬¦ä¸²çš„å¤„ç†é€Ÿåº¦è¦å¿«è¿‡å…¶å®ƒçš„é”®å¯¹è±¡ã€‚è¿™å°±æ˜¯HashMapä¸­çš„é”®å¾€å¾€éƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€‚</span><br><span class="line">â€¢ (2) å› ä¸ºè·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•ï¼Œé‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„,è¿™äº›ç±»å·²ç»å¾ˆè§„èŒƒçš„è¦†å†™äº†hashCode()ä»¥åŠequals()æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">## Hashcode</span><br><span class="line">* ä¸€ã€hashCodeç®€ä»‹</span><br><span class="line">public int hashCode()ï¼š``hashCode``æ˜¯æ ¹ç±»Obejectä¸­çš„æ–¹æ³•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒObjectä¸­çš„``hashCode() ``è¿”å›å¯¹è±¡çš„32ä½jvmå†…å­˜åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœå¯¹è±¡ä¸é‡å†™è¯¥æ–¹æ³•ï¼Œåˆ™è¿”å›ç›¸åº”å¯¹è±¡çš„32ä¸ºJVMå†…å­˜åœ°å€ã€‚</span><br><span class="line">* äºŒã€hashCodeæ³¨æ„ç‚¹</span><br><span class="line">å…³äºhashCodeæ–¹æ³•ï¼Œä¸€è‡´çš„çº¦å®šæ˜¯ï¼š</span><br><span class="line">1ã€é‡å†™äº†``euqls``æ–¹æ³•çš„å¯¹è±¡å¿…é¡»åŒæ—¶é‡å†™``hashCode()``æ–¹æ³•ã€‚</span><br><span class="line">2ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ</span><br><span class="line">3ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ï¼Œå­˜æ”¾äºåŒä¸€ä¸ªä½ç½®</span><br><span class="line">* ä¸‰ã€hashCodeä½œç”¨</span><br><span class="line">ä»Objectè§’åº¦çœ‹ï¼ŒJVMæ¯newä¸€ä¸ªObjectï¼Œå®ƒéƒ½ä¼šå°†è¿™ä¸ªObjectä¸¢åˆ°ä¸€ä¸ªHashè¡¨ä¸­å»ï¼Œè¿™æ ·çš„è¯ï¼Œä¸‹æ¬¡åšObjectçš„æ¯”è¾ƒæˆ–è€…å–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ˆè¯»å–è¿‡ç¨‹ï¼‰ï¼Œå®ƒä¼šæ ¹æ®å¯¹è±¡çš„HashCodeå†ä»Hashè¡¨ä¸­å–è¿™ä¸ªå¯¹è±¡ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜å–å¯¹è±¡çš„æ•ˆç‡ã€‚è‹¥HashCodeç›¸åŒå†å»è°ƒç”¨equalã€‚</span><br><span class="line">HashCodeæ˜¯ç”¨äºæŸ¥æ‰¾ä½¿ç”¨çš„ï¼Œè€Œequalsæ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ˜¯å¦ç›¸ç­‰çš„ã€‚</span><br><span class="line">* å››ã€ä¸ºä»€ä¹ˆé‡å†™</span><br><span class="line">å®é™…å¼€å‘çš„è¿‡ç¨‹ä¸­åœ¨hashmapæˆ–è€…hashseté‡Œå¦‚æœä¸é‡å†™çš„hashcodeå’Œequalsæ–¹æ³•çš„è¯ä¼šå¯¼è‡´æˆ‘ä»¬å­˜å¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠå¯¹è±¡å­˜è¿›å»äº†ï¼Œå–çš„æ—¶å€™å´å–ä¸åˆ°æƒ³è¦çš„å¯¹è±¡ã€‚</span><br><span class="line">é‡å†™äº†hashcodeå’Œequalsæ–¹æ³•å¯ä»¥è¿…é€Ÿçš„åœ¨hashmapä¸­æ‰¾åˆ°é”®çš„ä½ç½®ï¼›</span><br><span class="line">#### **é‡å†™hashcodeæ˜¯ä¸ºäº†ä¿è¯ç›¸åŒçš„å¯¹è±¡ä¼šæœ‰ç›¸åŒçš„hashcodeï¼›**</span><br><span class="line">#### **é‡å†™equalsæ˜¯ä¸ºäº†ä¿è¯åœ¨å‘ç”Ÿå†²çªçš„æƒ…å†µä¸‹å–å¾—åˆ°Entryå¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£æ˜¯keyæˆ–æ˜¯å…ƒç´ ï¼‰**ï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å­˜åœ¨ä¸€ä¸ªtableæ•°ç»„ï¼Œé‡Œé¢æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªnodeé“¾è¡¨ï¼Œå½“æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆkey-valueï¼‰æ—¶ï¼Œå°±é¦–å…ˆè®¡ç®—å…ƒç´ keyçš„hashå€¼ï¼Œé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashå€¼è¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œä»¥æ­¤ç¡®å®šæ’å…¥æ•°ç»„ä¸­çš„ä½ç½®ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨åŒä¸€hashå€¼çš„å…ƒç´ å·²ç»è¢«æ”¾åœ¨æ•°ç»„åŒä¸€ä½ç½®äº†ï¼Œè¿™æ—¶å°±æŠŠè¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°åŒä¸€hashå€¼çš„nodeé“¾è¡¨çš„é“¾å°¾ï¼Œä»–ä»¬åœ¨æ•°ç»„çš„åŒä¸€ä½ç½®ï¼Œä½†æ˜¯å½¢æˆäº†é“¾è¡¨ï¼ŒåŒä¸€å„é“¾è¡¨ä¸Šçš„Hashå€¼æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¯´æ•°ç»„å­˜æ”¾çš„æ˜¯é“¾è¡¨ã€‚è€Œå½“é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œé“¾è¡¨å°±å¯èƒ½è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æŸ¥æ‰¾çš„æ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191102133424361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM1ODMzMTE=,size_16,color_FFFFFF,t_70&quot; alt=&quot;å­˜å‚¨ç»“æ„&quot; /&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```Java</span><br><span class="line">static class Node&amp;lt;K,V&amp;gt; implements Map.Entry&amp;lt;K,V&amp;gt; &#123;</span><br><span class="line">        final int hash;</span><br><span class="line">        final K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&amp;lt;K,V&amp;gt; next; //å¯ä»¥çœ‹å¾—å‡ºè¿™æ˜¯ä¸€ä¸ªé“¾è¡¨</span><br><span class="line"></span><br><span class="line">        Node(int hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123;</span><br><span class="line">            this.hash = hash;</span><br><span class="line">            this.key = key;</span><br><span class="line">            this.value = value;</span><br><span class="line">            this.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">        *</span><br><span class="line">        *</span><br><span class="line">        *</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">transient Node&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure></li></ul><li>HashMapå†…éƒ¨åŒ…å«ä¸€ä¸ªNodeç±»å‹çš„æ•°ç»„tableï¼ŒNodeç”±Map.Entryç»§æ‰¿è€Œæ¥ã€‚</li><br><li>Nodeå­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«å››ä¸ªå­—æ®µï¼Œä»nextå­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡ºnodeæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚</li><br><li>tableæ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®éƒ½å¯ä»¥å½“åšä¸€ä¸ªæ¡¶ï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚</li><br><li>HashMapä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªå­˜æ”¾æ•£åˆ—å€¼ç›¸åŒçš„Nodeã€‚</li><br><h4 id="æ•°æ®åŸŸ">æ•°æ®åŸŸ</h4><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">362498820763181265L</span>;  </span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å®¹é‡ï¼Œåˆå§‹åŒ–æœ‰16ä¸ªæ¡¶</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &amp;lt;&amp;lt; <span class="number">4</span>; <span class="comment">// aka 16  </span></span><br><span class="line"><span class="comment">// æœ€å¤§å®¹é‡  1 073 741 824, 10äº¿å¤š</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &amp;lt;&amp;lt; <span class="number">30</span>;</span><br><span class="line"><span class="comment">// é»˜è®¤çš„è´Ÿè½½å› å­ã€‚å› æ­¤åˆå§‹æƒ…å†µä¸‹ï¼Œå½“é”®å€¼å¯¹çš„æ•°é‡å¤§äº 16 * 0.75 = 12 æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line"><span class="comment">// å½“put()ä¸€ä¸ªå…ƒç´ åˆ°æŸä¸ªæ¡¶ï¼Œå…¶é“¾è¡¨é•¿åº¦è¾¾åˆ°8æ—¶æœ‰å¯èƒ½å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘  </span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;  </span><br><span class="line"><span class="comment">// åœ¨hashMapæ‰©å®¹æ—¶ï¼Œå¦‚æœå‘ç°é“¾è¡¨é•¿åº¦å°äºç­‰äº6ï¼Œåˆ™ä¼šç”±çº¢é»‘æ ‘é‡æ–°é€€åŒ–ä¸ºé“¾è¡¨ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;  </span><br><span class="line"><span class="comment">// åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äº 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>;  </span><br><span class="line"><span class="comment">// å­˜å‚¨å…ƒç´ çš„æ•°ç»„  </span></span><br><span class="line"><span class="keyword">transient</span> Node&amp;lt;k,v&amp;gt;[] table;</span><br><span class="line"><span class="comment">// å­˜æ”¾å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="comment">// è¢«ä¿®æ”¹çš„æ¬¡æ•°fast-failæœºåˆ¶   </span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> modCount;</span><br><span class="line"><span class="comment">// ä¸´ç•Œå€¼ å½“å®é™…å¤§å°(å®¹é‡*å¡«å……æ¯”)è¶…è¿‡ä¸´ç•Œå€¼æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹   </span></span><br><span class="line"><span class="keyword">int</span> threshold;</span><br><span class="line"><span class="comment">// å¡«å……æ¯”</span></span><br><span class="line">final float loadFactor;&lt;/code&gt;&lt;/pre&gt;</span><br><span class="line">&lt;h4 id="æ„é€ å‡½æ•°"&gt;æ„é€ å‡½æ•°&lt;/h4&gt;</span><br><span class="line">&lt;pre <span class="class"><span class="keyword">class</span></span>=<span class="string">"java"</span>&gt;&lt;code&gt;<span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &amp;lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal initial capacity: &amp;quot; +</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &amp;gt; MAXIMUM_CAPACITY)</span><br><span class="line">            initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">        <span class="keyword">if</span> (loadFactor &amp;lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(&amp;quot;Illegal load factor: &amp;quot; +</span><br><span class="line">                                               loadFactor);</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">        <span class="comment">// tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæ¥è¿‘initialCapacity</span></span><br><span class="line">        <span class="comment">// å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚</span></span><br><span class="line">        <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(Map&amp;lt;? extends K, ? extends V&amp;gt; m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">        putMapEntries(m, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li><p>HashMapæ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥å®¹é‡ä¸æ˜¯2çš„næ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º2çš„næ¬¡æ–¹ã€‚</p><br></li></ul><br>### <code>Put()</code>æºç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h;</span><br><span class="line">        <span class="comment">// â€œæ‰°åŠ¨å‡½æ•°â€ã€‚å‚è€ƒ https://www.cnblogs.com/zhengwang/p/8136164.html</span></span><br><span class="line">        <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; <span class="number">16</span>);</span><br><span class="line">&#125;    </span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">        <span class="comment">// æœªåˆå§‹åŒ–åˆ™åˆå§‹åŒ–table</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">        <span class="comment">// é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œ</span></span><br><span class="line">        <span class="comment">// ç„¶ååˆ¤æ–­tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„æ˜¯å¦å·²ç»å­˜åœ¨nodeã€‚</span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp;amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">            <span class="comment">// å¦‚æœtableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„ä¸ºç©ºåˆ™æ–°åˆ›å»ºä¸€ä¸ªnodeæ”¾åœ¨è¯¥å¤„</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è¿è¡Œåˆ°è¿™ä»£è¡¨tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„å·²ç»å­˜åœ¨nodeï¼Œå³å‘ç”Ÿäº†ç¢°æ’</span></span><br><span class="line">            HashMap.Node&amp;lt;K,V&amp;gt; e; K k;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                    ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                e = p;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeæ˜¯å¦å·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="comment">// å¦‚æœè¿™ä¸ªnodeå·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘åˆ™ç»§ç»­å¾€æ ‘ç§æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">                e = ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="comment">// åœ¨è¿™é‡Œå¾ªç¯éå†nodeé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// åˆ¤æ–­æ˜¯å¦åˆ°è¾¾é“¾è¡¨å°¾</span></span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="comment">// åˆ°è¾¾é“¾è¡¨å°¾ï¼Œç›´æ¥æŠŠæ–°nodeæ’å…¥é“¾è¡¨ï¼Œæ’å…¥é“¾è¡¨å°¾éƒ¨ï¼Œåœ¨jdk8ä¹‹å‰æ˜¯å¤´æ’æ³•</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (binCount &amp;gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            <span class="comment">// å¦‚æœnodeé“¾è¡¨çš„é•¿åº¦å¤§äºç­‰äº8åˆ™å¯èƒ½æŠŠè¿™ä¸ªnodeè½¬æ¢ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å½“æ’å…¥keyå­˜åœ¨ï¼Œåˆ™æ›´æ–°valueå€¼å¹¶è¿”å›æ—§value</span></span><br><span class="line">            <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                V oldValue = e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                    e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹æ¬¡æ•°++</span></span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰å¤§å°å¤§äºé—¨é™ï¼Œé—¨é™åŸæœ¬æ˜¯åˆå§‹å®¹é‡*0.75</span></span><br><span class="line">        <span class="keyword">if</span> (++size &amp;gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br><br><ul><br><li>ä¸‹é¢ç®€å•è¯´ä¸‹put()æµç¨‹ï¼š<br><ol><br><li>åˆ¤æ–­é”®å€¼å¯¹æ•°ç»„table[]æ˜¯å¦ä¸ºç©ºæˆ–ä¸ºnullï¼Œå¦åˆ™ä»¥é»˜è®¤å¤§å°resize()ï¼›</li><br><li>æ ¹æ®é”®keyè®¡ç®—hashå€¼ä¸tableçš„é•¿åº¦è¿›è¡Œä¸è¿ç®—å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼• indexï¼Œå¦‚æœtab[index] == nullï¼Œç›´æ¥æ ¹æ®key-valueæ–°å»ºnodeæ·»åŠ ï¼Œå¦åˆ™è½¬å…¥3</li><br><li>åˆ¤æ–­å½“å‰æ•°ç»„ä¸­å¤„ç†hashå†²çªçš„æ–¹å¼ä¸ºé“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘(checkç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹å³å¯),åˆ†åˆ«å¤„ç†</li><br></ol></li><p><li>ä¸ºå•¥å¤´æ’æ³•ä¸ºä»€ä¹ˆè¦æ¢æˆå°¾æ’ï¼šjdk1.7æ—¶å€™ç”¨å¤´æ’æ³•å¯èƒ½æ˜¯è€ƒè™‘åˆ°äº†ä¸€ä¸ªæ‰€è°“çš„çƒ­ç‚¹æ•°æ®çš„ç‚¹(æ–°æ’å…¥çš„æ•°æ®å¯èƒ½ä¼šæ›´æ—©ç”¨åˆ°)ï¼›æ‰¾åˆ°é“¾è¡¨å°¾éƒ¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæˆ–è€…éœ€è¦ä½¿ç”¨é¢å¤–çš„å†…å­˜åœ°å€æ¥ä¿å­˜é“¾è¡¨å°¾éƒ¨çš„ä½ç½®ï¼Œå¤´æ’æ³•å¯ä»¥èŠ‚çœæ’å…¥è€—æ—¶ã€‚ä½†æ˜¯åœ¨æ‰©å®¹æ—¶ä¼šæ”¹å˜é“¾è¡¨ä¸­å…ƒç´ åŸæœ¬çš„é¡ºåºï¼Œä»¥è‡³äºåœ¨<strong>å¹¶å‘åœºæ™¯ä¸‹å¯¼è‡´é“¾è¡¨æˆç¯</strong>çš„é—®é¢˜ã€‚</li></p><p><li>ä»putVal()æºç å¯ä»¥çœ‹å‡ºï¼ŒHashMapå¹¶æ²¡æœ‰å¯¹nullçš„é”®å€¼å¯¹åšé™åˆ¶ï¼ˆhashå€¼è®¾ä¸º0ï¼‰ï¼Œå³HashMapå…è®¸æ’å…¥é”®å°¾nullçš„é”®å€¼å¯¹ã€‚ä½†åœ¨JDK1.8ä¹‹å‰HashMapä½¿ç”¨ç¬¬0ä¸ªnodeå­˜æ”¾é”®ä¸ºnullçš„é”®å€¼å¯¹ã€‚</li></p><p><li>ç¡®å®šnodeä¸‹æ ‡ï¼šé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashè¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexã€‚</li></p><p><li>åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äº 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚</li><br></p></ul><p></p><h2 id="å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ"></a><a href="https://www.cnblogs.com/wen-he/p/11496050.html" target="_blank" rel="noopener">å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆç¯çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ</a></h2><h3 id="get-æ“ä½œæºç è§£æ"><a href="#get-æ“ä½œæºç è§£æ" class="headerlink" title="get()æ“ä½œæºç è§£æ"></a>get()æ“ä½œæºç è§£æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt; e;</span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> HashMap.Node&amp;lt;K,V&amp;gt; getNode(<span class="keyword">int</span> hash, Object key) &#123;</span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">        <span class="comment">// tableä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;amp;&amp;amp; (n = tab.length) &amp;gt; <span class="number">0</span> &amp;amp;&amp;amp;</span><br><span class="line">                <span class="comment">// é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œtable</span></span><br><span class="line">                <span class="comment">// ä¸‹æ ‡ä½indexå¤„çš„å…ƒç´ ä¸ä¸ºç©ºï¼Œå³å…ƒç´ ä¸ºnodeé“¾è¡¨</span></span><br><span class="line">                (first = tab[(n - <span class="number">1</span>) &amp;amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆåˆ¤æ–­nodeé“¾è¡¨ä¸­ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;amp;&amp;amp; <span class="comment">// always check first node</span></span><br><span class="line">                    <span class="comment">// åˆ†åˆ«åˆ¤æ–­keyä¸ºnullå’Œkeyä¸ä¸ºnullçš„æƒ…å†µ</span></span><br><span class="line">                    ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                <span class="comment">// keyç›¸ç­‰åˆ™è¿”å›ç¬¬ä¸€ä¸ª</span></span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹keyä¸åŒä¸”nodeé“¾è¡¨ä¸æ­¢åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­nodeé“¾è¡¨æ˜¯å¦è½¬ä¸ºçº¢é»‘æ ‘ã€‚</span></span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> HashMap.TreeNode)</span><br><span class="line">                    <span class="comment">// åˆ™åœ¨çº¢é»‘æ ‘ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</span></span><br><span class="line">                    <span class="keyword">return</span> ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="comment">// å¾ªç¯éå†nodeé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œåˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;</span><br><span class="line">                            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;amp;&amp;amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// keyåœ¨tableä¸­ä¸å­˜åœ¨åˆ™è¿”å›nullã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>get(key)æ–¹æ³•é¦–å…ˆè·å–keyçš„hashå€¼ï¼Œ</li><li>è®¡ç®—hash &amp; (table.len - 1)å¾—åˆ°åœ¨é“¾è¡¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œ</li><li>å…ˆåˆ¤æ–­nodeé“¾è¡¨ï¼ˆæ¡¶ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„keyæ˜¯å¦ä¸å‚æ•°keyç›¸ç­‰ï¼Œ</li><li>ä¸ç­‰åˆ™åˆ¤æ–­æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘ï¼Œè‹¥è½¬ä¸ºçº¢é»‘æ ‘åˆ™åœ¨çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾ï¼Œ</li><li>å¦‚æ²¡æœ‰è½¬ä¸ºçº¢é»‘æ ‘å°±éå†åé¢çš„é“¾è¡¨æ‰¾åˆ°ç›¸åŒçš„keyå€¼è¿”å›å¯¹åº”çš„Valueå€¼å³å¯ã€‚</li></ul><h3 id="resize-æ“ä½œæºç è§£æ"><a href="#resize-æ“ä½œæºç è§£æ" class="headerlink" title="resize()æ“ä½œæºç è§£æ"></a>resize()æ“ä½œæºç è§£æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–æˆ–è€…æ‰©å®¹ä¹‹åçš„å…ƒç´ è°ƒæ•´</span></span><br><span class="line">    <span class="keyword">final</span> HashMap.Node&amp;lt;K,V&amp;gt;[] resize() &#123;</span><br><span class="line">        <span class="comment">// è·å–æ—§table</span></span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] oldTab = table;</span><br><span class="line">        <span class="comment">// æ—§tableå®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">        <span class="comment">// æ—§tableæ‰©å®¹ä¸´ç•Œå€¼</span></span><br><span class="line">        <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">        <span class="comment">// å®šä¹‰æ–°tableå®¹é‡å’Œä¸´ç•Œå€¼</span></span><br><span class="line">        <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœåŸtableä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœtableå®¹é‡è¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™ä¿®æ”¹ä¸´ç•Œå€¼ä¸ºInteger.MAX_VALUE</span></span><br><span class="line">            <span class="comment">// MAXIMUM_CAPACITY = 1 &amp;lt;&amp;lt; 30;</span></span><br><span class="line">            <span class="comment">// Integer.MAX_VALUE = 1 &amp;lt;&amp;lt; 31 - 1;</span></span><br><span class="line">            <span class="keyword">if</span> (oldCap &amp;gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">                <span class="comment">// Mapè¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œè¿™æ—¶è¿˜è¦å‘mapä¸­æ”¾æ•°æ®ï¼Œåˆ™ç›´æ¥è®¾ç½®ä¸´ç•Œå€¼ä¸ºæ•´æ•°çš„æœ€å¤§å€¼</span></span><br><span class="line">                <span class="comment">// åœ¨å®¹é‡æ²¡æœ‰è¾¾åˆ°æœ€å¤§å€¼ä¹‹å‰ä¸ä¼šå†resizeã€‚</span></span><br><span class="line">                threshold = Integer.MAX_VALUE;</span><br><span class="line">                <span class="comment">// ç»“æŸæ“ä½œ</span></span><br><span class="line">                <span class="keyword">return</span> oldTab;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸‹é¢å°±æ˜¯æ‰©å®¹æ“ä½œï¼ˆ2å€ï¼‰</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &amp;lt;&amp;lt; <span class="number">1</span>) &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp;</span><br><span class="line">                    oldCap &amp;gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">                <span class="comment">// ä¸´ç•Œå€¼ä¹Ÿå˜ä¸ºä¸¤å€</span></span><br><span class="line">                newThr = oldThr &amp;lt;&amp;lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &amp;gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * è¿›å…¥æ­¤ifè¯æ˜åˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æ„é€ ï¼špublic HashMap(int initialCapacity)</span></span><br><span class="line"><span class="comment">             * æˆ– public HashMap(int initialCapacity, float loadFactor)</span></span><br><span class="line"><span class="comment">             * æ³¨ï¼šå¸¦å‚çš„æ„é€ ä¸­initialCapacityï¼ˆåˆå§‹å®¹é‡å€¼ï¼‰ä¸ç®¡æ˜¯è¾“å…¥å‡ éƒ½ä¼šé€šè¿‡</span></span><br><span class="line"><span class="comment">             * tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæ¥è¿‘initialCapacity</span></span><br><span class="line"><span class="comment">             * å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚</span></span><br><span class="line"><span class="comment">             * æ‰€ä»¥å®é™…åˆ›å»ºçš„å®¹é‡å¹¶ä¸ç­‰äºè®¾ç½®çš„åˆå§‹å®¹é‡ã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            newCap = oldThr;</span><br><span class="line">        <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">            <span class="comment">// è¿›å…¥æ­¤ifè¯æ˜åˆ›å»ºmapæ—¶ç”¨çš„æ— å‚æ„é€ ï¼š</span></span><br><span class="line">            <span class="comment">// ç„¶åå°†å‚æ•°newCapï¼ˆæ–°çš„å®¹é‡ï¼‰ã€newThr(æ–°çš„æ‰©å®¹é˜€ç•Œå€¼)è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">            newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">            newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è¿›å…¥è¿™ä»£è¡¨æœ‰ä¸¤ç§å¯èƒ½ã€‚</span></span><br><span class="line">            <span class="comment">// 1. è¯´æ˜old tableå®¹é‡å¤§äº0ä½†æ˜¯å°äº16.</span></span><br><span class="line">            <span class="comment">// 2. åˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æ„é€ ï¼Œæ ¹æ®loadFactorè®¡ç®—ä¸´ç•Œå€¼ã€‚</span></span><br><span class="line">            <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">            newThr = (newCap &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; ft &amp;lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                    (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹ä¸´ç•Œå€¼</span></span><br><span class="line">        threshold = newThr;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(&#123;&amp;quot;rawtypes&amp;quot;,&amp;quot;unchecked&amp;quot;&#125;)</span><br><span class="line">        <span class="comment">// æ ¹æ®æ–°çš„å®¹é‡ç”Ÿæˆæ–°çš„ table</span></span><br><span class="line">        HashMap.Node&amp;lt;K,V&amp;gt;[] newTab = (HashMap.Node&amp;lt;K,V&amp;gt;[])<span class="keyword">new</span> HashMap.Node[newCap];</span><br><span class="line">        <span class="comment">// æ›¿æ¢æˆæ–°çš„table</span></span><br><span class="line">        table = newTab;</span><br><span class="line">        <span class="comment">// å¦‚æœoldTabä¸ä¸ºnullè¯´æ˜æ˜¯æ‰©å®¹ï¼Œå¦åˆ™ç›´æ¥è¿”å›newTab</span></span><br><span class="line">        <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">/* éå†åŸæ¥çš„table */</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &amp;lt; oldCap; ++j) &#123;</span><br><span class="line">                HashMap.Node&amp;lt;K,V&amp;gt; e;</span><br><span class="line">                <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­è¿™ä¸ªæ¡¶ï¼ˆé“¾è¡¨ï¼‰ä¸­å°±åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)</span><br><span class="line">                        <span class="comment">// æ ¹æ®æ–°çš„å®¹é‡é‡æ–°è®¡ç®—åœ¨tableä¸­çš„ä½ç½®indexï¼Œå¹¶æŠŠå½“å‰å…ƒç´ èµ‹å€¼ç»™ä»–ã€‚</span></span><br><span class="line">                        newTab[e.hash &amp;amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­è¿™ä¸ªé“¾è¡¨æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> HashMap.TreeNode)</span><br><span class="line">                        <span class="comment">// åœ¨splitå‡½æ•°ä¸­å¯èƒ½ç”±äºçº¢é»‘æ ‘çš„é•¿åº¦å°äºç­‰äºUNTREEIFY_THRESHOLDï¼ˆ6ï¼‰</span></span><br><span class="line">                        <span class="comment">// åˆ™æŠŠçº¢é»‘æ ‘é‡æ–°è½¬ä¸ºé“¾è¡¨</span></span><br><span class="line">                        ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                    <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                        <span class="comment">// è¿è¡Œåˆ°è¿™é‡Œè¯æ˜æ¡¶ä¸­æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚</span></span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                        HashMap.Node&amp;lt;K,V&amp;gt; next;</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            <span class="comment">// å¯¹æ¡¶è¿›è¡Œéå†</span></span><br><span class="line">                            next = e.next;</span><br><span class="line">                            <span class="keyword">if</span> ((e.hash &amp;amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                    loHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    loTail.next = e;</span><br><span class="line">                                loTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                    hiHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hiTail.next = e;</span><br><span class="line">                                hiTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j] = loHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j + oldCap] = hiHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newTab;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="HashMap-çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"><a href="#HashMap-çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ" class="headerlink" title="HashMap çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ?"></a>HashMap çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ?</h2><p>HashMapåŸºäºhashingåŸç†ï¼Œæˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å­˜å‚¨å’Œè·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶ï¼Œå®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcodeï¼Œç„¶åæ‰¾åˆ°bucketä½ç½®æ¥å­˜å‚¨å€¼å¯¹è±¡ã€‚å½“è·å–å¯¹è±¡æ—¶ï¼Œé€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹ï¼Œç„¶åè¿”å›å€¼å¯¹è±¡ã€‚HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’é—®é¢˜ï¼Œå½“å‘ç”Ÿç¢°æ’äº†ï¼Œå¯¹è±¡å°†ä¼šå­˜å‚¨åœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé“¾æ¥åŸå…ˆçš„å¯¹è±¡èŠ‚ç‚¹ï¼ŒHashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å­˜å‚¨é”®å€¼å¯¹å¯¹è±¡ã€‚</p><h2 id="å¿«é€Ÿå¤±è´¥-fail-fast-å’Œå®‰å…¨å¤±è´¥-fail-safe-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¿«é€Ÿå¤±è´¥-fail-fast-å’Œå®‰å…¨å¤±è´¥-fail-safe-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¿«é€Ÿå¤±è´¥ (fail-fast) å’Œå®‰å…¨å¤±è´¥ (fail-safe) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¿«é€Ÿå¤±è´¥ (fail-fast) å’Œå®‰å…¨å¤±è´¥ (fail-safe) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>1ã€å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰<br>åœ¨ç”¨è¿­ä»£å™¨éå†ä¸€ä¸ªé›†åˆå¯¹è±¡æ—¶ï¼Œå¦‚æœéå†è¿‡ç¨‹ä¸­å¯¹é›†åˆå¯¹è±¡çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼ˆå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºConcurrent Modification Exception.<br>åŸç†ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ªmodCountå˜é‡ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()/next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚<br>æ³¨æ„ï¼šè¿™é‡Œå¼‚å¸¸çš„æŠ›å‡ºæ¡ä»¶æ˜¯æ£€æµ‹åˆ°modCount!=expectedmodCountè¿™ä¸ªæ¡ä»¶ã€‚å¦‚æœé›†åˆå‘ç”Ÿå˜åŒ–æ—¶ä¿®æ”¹modCountå€¼åˆšå¥½åˆè®¾ç½®ä¸ºäº†expectedmodCountå€¼ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šæŠ›å‡ºã€‚å› æ­¤ï¼Œä¸èƒ½ä¾èµ–äºè¿™ä¸ªå¼‚å¸¸æ˜¯å¦æŠ›å‡ºè€Œè¿›è¡Œå¹¶å‘æ“ä½œçš„ç¼–ç¨‹ï¼Œè¿™ä¸ªå¼‚å¸¸åªå»ºè®®ç”¨äºæ£€æµ‹å¹¶å‘ä¿®æ”¹çš„bugã€‚<br>åœºæ™¯ï¼šjava.utilåŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ã€‚</li><li>2ã€å®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰<br>é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚<br>åŸç†ï¼šç”±äºè¿­ä»£æ—¶æ˜¯å¯¹åŸé›†åˆçš„æ‹·è´è¿›è¡Œéå†ï¼Œæ‰€ä»¥åœ¨éå†è¿‡ç¨‹ä¸­å¯¹åŸé›†åˆæ‰€ä½œçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘Concurrent Modification Exceptionã€‚<br>ç¼ºç‚¹ï¼šåŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº†Concurrent Modification Exception,ä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ï¼Œå³ï¼šè¿­ä»£å™¨éå†çš„æ˜¯å¼€å§‹éå†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éå†æœŸé—´åŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„<br>åœºæ™¯ï¼šjava.util.concurrentåŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚</li></ul><p><img src="https://img1.sycdn.imooc.com/5d56493300011c0e19151612.png" alt="æºç å¯¼è¯»"></p><p><a href="https://blog.csdn.net/weixin_44460333/article/details/86770169" target="_blank" rel="noopener">HashMapï¼ŸConcurrentHashMapï¼Ÿç›¸ä¿¡çœ‹å®Œè¿™ç¯‡æ²¡äººèƒ½éš¾ä½ä½ </a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Analyst of SourceCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithms, Part I | Princeton Online</title>
      <link href="/2020/01/16/Algorithms-Part-I-Princeton-Online/"/>
      <url>/2020/01/16/Algorithms-Part-I-Princeton-Online/</url>
      
        <content type="html"><![CDATA[<h2 id="Princeton-Online-course"><a href="#Princeton-Online-course" class="headerlink" title="Princeton Online course"></a><a href="https://algs4.cs.princeton.edu/" target="_blank" rel="noopener">Princeton Online course</a></h2><h2 id="You-can-find-all-the-code-and-comments-details-in-this-Repository"><a href="#You-can-find-all-the-code-and-comments-details-in-this-Repository" class="headerlink" title="You can find all the code and comments details in this Repository"></a><a href="https://github.com/Williamren97/Alg4" target="_blank" rel="noopener">You can find all the code and comments details in this Repository</a></h2><h3 id="What-algorithms-and-data-structures-will-be-covered-in-this-course"><a href="#What-algorithms-and-data-structures-will-be-covered-in-this-course" class="headerlink" title="What algorithms and data structures will be covered in this course?"></a>What algorithms and data structures will be covered in this course?</h3><h4 id="The-first-part-will-focus-on-the-basic-data-structure-sorting-and-searching"><a href="#The-first-part-will-focus-on-the-basic-data-structure-sorting-and-searching" class="headerlink" title="The first part will focus on the basic data structure, sorting, and searching."></a>The first part will focus on the basic data structure, sorting, and searching.</h4><ul><li>Topics include: parallel search algorithm, binary search, stack, queue, backpack, insert sort, select sort, hill sort, fast sort, three-way fast sort, merge sort, heap sort, binary heap, binary search tree, red-black tree , Split link and linear probe hash tables, Graham scans, kd trees.</li></ul><h4 id="The-second-part-will-focus-on-graph-and-string-processing-algorithms"><a href="#The-second-part-will-focus-on-graph-and-string-processing-algorithms" class="headerlink" title="The second part will focus on graph and string processing algorithms."></a>The second part will focus on graph and string processing algorithms.</h4><ul><li>Topics include: depth-first search, width-first search, topology sorting, Kosaraju-Sharir algorithm, Kruskal algorithm, Prim algorithm, Dijkistra algorithm, Bellman-Ford algorithm, Ford-Fulkerson algorithm, LSD cardinality ranking algorithm, MSD cardinality ranking algorithm, three-way Cardinality fast sorting algorithm, multi-path trie algorithm, ternary search trie algorithm, Knuth-Morris-Pratt algorithm, Boyer-Moore algorithm, Rabin-Karp algorithm, regular matching, run-length encoding, Huffman encoding, LZW compression, Burrows-Wheeler transform .</li></ul><h4 id="The-Imp-of-Algorithm-in-Princeton-University"><a href="#The-Imp-of-Algorithm-in-Princeton-University" class="headerlink" title="The Imp of Algorithm in Princeton University."></a>The Imp of Algorithm in Princeton University.</h4>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithms, </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EveryThing About MySQL</title>
      <link href="/2020/01/14/EveryThing-About-MySQL/"/>
      <url>/2020/01/14/EveryThing-About-MySQL/</url>
      
        <content type="html"><![CDATA[<h1 id="MYSQL"><a href="#MYSQL" class="headerlink" title="MYSQL"></a>MYSQL</h1><p><a href="https://blog.csdn.net/chai471793/article/details/99563704" target="_blank" rel="noopener">å½»åº•ææ‡‚ç³»åˆ—B-æ ‘ã€B+æ ‘ã€B-æ ‘ã€B*æ ‘</a></p><p><a href="https://www.cnblogs.com/nullzx/p/8729425.html" target="_blank" rel="noopener">Bæ ‘å’ŒB+æ ‘çš„æ’å…¥ã€åˆ é™¤å›¾æ–‡è¯¦è§£</a></p><h3 id="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B-æ ‘"><a href="#å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B-æ ‘" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B+æ ‘"></a><a href="https://baijiahao.baidu.com/s?id=1658675762218129560&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B+æ ‘</a></h3><blockquote><p>==B+æ ‘çš„æ•°æ®åªå‡ºç°åœ¨å¶å­èŠ‚ç‚¹ä¸Š==ï¼Œå› æ­¤åœ¨æŸ¥è¯¢å•æ¡æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢é€Ÿåº¦éå¸¸ç¨³å®šã€‚å› æ­¤ï¼Œ==åœ¨åšå•ä¸€æ•°æ®çš„æŸ¥è¯¢ä¸Šï¼Œå…¶å¹³å‡æ€§èƒ½å¹¶ä¸å¦‚Bæ ‘==ã€‚ä½†æ˜¯ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šæœ‰æŒ‡é’ˆè¿›è¡Œç›¸è¿ï¼Œå› æ­¤åœ¨åšæ•°æ®éå†çš„æ—¶å€™ï¼Œ==åªéœ€è¦å¯¹å¶å­èŠ‚ç‚¹è¿›è¡Œéå†å³å¯ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—B+æ ‘éå¸¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢==ã€‚</p></blockquote><ul><li>æ²¡å‡†æ˜¯==Mysqlä¸­æ•°æ®éå†æ“ä½œæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ç»“æ„==ã€‚å‡¡åšè¿™ç§å…³è”æŸ¥è¯¢ï¼Œä½ èº²ä¸å¼€joinæ“ä½œçš„ï¼æ—¢ç„¶æ¶‰åŠåˆ°äº†<code>Join</code>æ“ä½œï¼Œæ— å¤–ä¹ä»ä¸€ä¸ªè¡¨ä¸­å–ä¸€ä¸ªæ•°æ®ï¼Œå»å¦ä¸€ä¸ªè¡¨ä¸­é€è¡ŒåŒ¹é…ï¼Œå¦‚æœç´¢å¼•ç»“æ„æ˜¯B+æ ‘ï¼Œå¶å­èŠ‚ç‚¹ä¸Šæ˜¯æœ‰æŒ‡é’ˆçš„ï¼Œèƒ½å¤Ÿæå¤§çš„æé«˜è¿™ç§ä¸€è¡Œä¸€è¡Œçš„åŒ¹é…é€Ÿåº¦</li><li>==è€ŒMongodbæ˜¯åšå•ä¸€æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œæ•°æ®éå†æ“ä½œæ¯”è¾ƒå°‘==ï¼Œæ‰€ä»¥ç”¨Bæ ‘ä½œä¸ºç´¢å¼•ç»“æ„ã€‚</li></ul><p>é‚£ä¹ˆä¸ºä»€ä¹ˆMysqlåšæ•°æ®éå†æ“ä½œå¤šï¼Ÿè€ŒMongodbåšæ•°æ®éå†æ“ä½œå°‘å‘¢ï¼Ÿå› ä¸ºMysqlæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè€ŒMongodbæ˜¯éå…³ç³»å‹æ•°æ®ã€‚</p><p>å¹³è¡¡äºŒå‰æ ‘åˆ™æ˜¯å­æ ‘é«˜è¯»ä¸èƒ½è¶…è¿‡2ï¼ŒBæ ‘éå¶å­èŠ‚ç‚¹ä¹Ÿå¯ä»¥å­˜å‚¨æ•°æ®ï¼ŒB+æ ‘åˆ™æ˜¯å¶å­èŠ‚ç‚¹æ‰å¯ä»¥å­˜å‚¨æ•°æ®ã€‚</p><ul><li>æˆ‘ä»¬è¯´çš„==å¹³è¡¡äºŒå‰æ ‘ç»“æ„ï¼ŒæŒ‡çš„æ˜¯é€»è¾‘ç»“æ„ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘ï¼Œå…¶ç‰©ç†å®ç°æ˜¯æ•°ç»„==ã€‚ç„¶åç”±äºåœ¨é€»è¾‘ç»“æ„ä¸Šç›¸è¿‘çš„èŠ‚ç‚¹åœ¨ç‰©ç†ç»“æ„ä¸Šå¯èƒ½ä¼šå·®å¾ˆè¿œã€‚å› æ­¤ï¼Œæ¯æ¬¡è¯»å–çš„ç£ç›˜é¡µçš„æ•°æ®ä¸­æœ‰è®¸å¤šæ˜¯ç”¨ä¸ä¸Šçš„ã€‚å› æ­¤ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä¸­è¦è¿›è¡Œè®¸å¤šæ¬¡çš„ç£ç›˜è¯»å–æ“ä½œã€‚è€Œé€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„åº”è¯¥æ˜¯å°½å¯èƒ½å°‘çš„æ‰§è¡Œç£ç›˜IOæ“ä½œï¼Œå› ä¸ºæ‰§è¡Œç£ç›˜IOæ“ä½œéå¸¸çš„è€—æ—¶ã€‚å› æ­¤ï¼Œå¹³è¡¡äºŒå‰æ ‘å¹¶ä¸é€‚åˆä½œä¸ºç´¢å¼•ç»“æ„</li><li>çº¢é»‘æ ‘è¿™ç§ç»“æ„==hæ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§==ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨çº¢é»‘æ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰ç»“æ„çš„è¯ï¼Œæ¯æ¬¡ç£ç›˜é¢„è¯»ä¸­çš„å¾ˆå¤šæ•°æ®æ˜¯ç”¨ä¸ä¸Šçš„æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒæ²¡èƒ½åˆ©ç”¨å¥½ç£ç›˜é¢„è¯»çš„æä¾›çš„æ•°æ®ã€‚ç„¶ååˆç”±äºæ·±åº¦å¤§ï¼ˆè¾ƒBæ ‘è€Œè¨€ï¼‰ï¼Œæ‰€ä»¥è¿›è¡Œçš„ç£ç›˜IOæ“ä½œæ›´å¤šã€‚</li><li>==Bæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…³é”®å­—ï¼Œå®ƒå°†èŠ‚ç‚¹å¤§å°è®¾ç½®ä¸ºç£ç›˜é¡µçš„å¤§å°ï¼Œå……åˆ†åˆ©ç”¨äº†ç£ç›˜é¢„è¯»çš„åŠŸèƒ½==ã€‚æ¯æ¬¡è¯»å–ç£ç›˜é¡µæ—¶å°±ä¼šè¯»å–ä¸€æ•´ä¸ªèŠ‚ç‚¹ã€‚==ä¹Ÿæ­£å› æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ç€éå¸¸å¤šä¸ªå…³é”®å­—ï¼Œæ ‘çš„æ·±åº¦å°±ä¼šéå¸¸çš„å°==ã€‚è¿›è€Œè¦æ‰§è¡Œçš„ç£ç›˜è¯»å–æ“ä½œæ¬¡æ•°å°±ä¼šéå¸¸å°‘ï¼Œæ›´å¤šçš„æ˜¯åœ¨å†…å­˜ä¸­å¯¹è¯»å–è¿›æ¥çš„æ•°æ®è¿›è¡ŒæŸ¥æ‰¾ã€‚</li><li>==Bæ ‘çš„æŸ¥è¯¢ï¼Œä¸»è¦å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œè€Œå¹³è¡¡äºŒå‰æ ‘çš„æŸ¥è¯¢ï¼Œåˆ™æ˜¯å‘ç”Ÿåœ¨ç£ç›˜è¯»å–ä¸­==ã€‚å› æ­¤ï¼Œè™½ç„¶Bæ ‘æŸ¥è¯¢æŸ¥è¯¢çš„æ¬¡æ•°ä¸æ¯”å¹³è¡¡äºŒå‰æ ‘çš„æ¬¡æ•°å°‘ï¼Œä½†æ˜¯ç›¸æ¯”èµ·ç£ç›˜IOé€Ÿåº¦ï¼Œå†…å­˜ä¸­æ¯”è¾ƒçš„è€—æ—¶å°±å¯ä»¥å¿½ç•¥ä¸è®¡äº†ã€‚å› æ­¤ï¼ŒBæ ‘æ›´é€‚åˆä½œä¸ºç´¢å¼•ã€‚</li></ul><h1 id="ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB-æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„-ä»¥åŠç´¢å¼•åŸç†-é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½"><a href="#ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB-æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„-ä»¥åŠç´¢å¼•åŸç†-é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½" class="headerlink" title="ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB+æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„ ä»¥åŠç´¢å¼•åŸç†(é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½"></a><a href="https://www.cnblogs.com/aspirant/p/9214485.html" target="_blank" rel="noopener">ä¸€æ­¥æ­¥åˆ†æä¸ºä»€ä¹ˆB+æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æ„ ä»¥åŠç´¢å¼•åŸç†(é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½</a></h1><p>B+Treeæ˜¯mysqlä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€ä¸ªç´¢å¼•æ•°æ®ç»“æ„ï¼Œæ˜¯Inodbå’ŒMyisamå­˜å‚¨å¼•æ“æ¨¡å¼çš„ç´¢å¼•ç±»å‹ã€‚ç›¸å¯¹Hashç´¢å¼•ï¼ŒB+Treeåœ¨æŸ¥æ‰¾å•æ¡è®°å½•çš„é€Ÿåº¦æ¯”ä¸ä¸ŠHashç´¢å¼•(Memoryè¡¨åªå­˜åœ¨å†…å­˜ä¸­)ï¼Œä½†æ˜¯å› ä¸ºæ›´é€‚åˆæ’åºç­‰æ“ä½œï¼Œæ‰€ä»¥å®ƒæ›´å—æ¬¢è¿ã€‚æ¯•ç«Ÿä¸å¯èƒ½åªå¯¹æ•°æ®åº“è¿›è¡Œå•æ¡è®°å½•çš„æ“ä½œã€‚</p><ul><li><p>å¸¦é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree</p><blockquote><p>B+Treeæ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”å¢åŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æœ‰æŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚è¿™æ ·åšæ˜¯ä¸ºäº†æé«˜åŒºé—´æ•ˆç‡ï¼Œä¾‹å¦‚æŸ¥è¯¢keyä¸ºä»18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åï¼Œåªè¦é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéå†å°±å¯ä»¥ä»¥æ­¤å‘è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæå¤§æé«˜äº†åŒºé—´æŸ¥è¯¢æ•ˆç‡ã€‚</p></blockquote></li><li><p>å¤§å¤§å‡å°‘ç£ç›˜I/Oè¯»å–</p><blockquote><p>æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥</p></blockquote></li></ul><p><strong>å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXTï¼‰=mysqlçš„myISAMæœç´¢å¼•æ“é»˜è®¤çš„ç´¢å¼•ç±»å‹</strong>==ä¸è¿‡åˆ‡è®°å¯¹äºå¤§å®¹é‡çš„æ•°æ®è¡¨ï¼Œç”Ÿæˆå…¨æ–‡ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ—¶é—´éå¸¸æ¶ˆè€—ç¡¬ç›˜ç©ºé—´çš„åšæ³•==ã€‚</p><p>æ–‡æœ¬å­—æ®µä¸Šçš„æ™®é€šç´¢å¼•åªèƒ½åŠ å¿«å¯¹å‡ºç°åœ¨å­—æ®µå†…å®¹æœ€å‰é¢çš„å­—ç¬¦ä¸²(ä¹Ÿå°±æ˜¯å­—æ®µå†…å®¹å¼€å¤´çš„å­—ç¬¦)è¿›è¡Œæ£€ç´¢æ“ä½œã€‚å¦‚æœå­—æ®µé‡Œå­˜æ”¾çš„æ˜¯ç”±å‡ ä¸ªã€ç”šè‡³æ˜¯å¤šä¸ªå•è¯æ„æˆçš„è¾ƒå¤§æ®µæ–‡å­—ï¼Œæ™®é€šç´¢å¼•å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚è¿™ç§æ£€ç´¢å¾€å¾€ä»¥LIKE%word%çš„å½¢å¼å‡ºç°ï¼Œè¿™å¯¹MySQLæ¥è¯´å¾ˆå¤æ‚ï¼Œå¦‚æœéœ€è¦å¤„ç†çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå“åº”æ—¶é—´å°±ä¼šå¾ˆé•¿ã€‚</p><p>è¿™ç±»åœºåˆæ­£æ˜¯å…¨æ–‡ç´¢å¼•(full-textindex)å¯ä»¥å¤§æ˜¾èº«æ‰‹çš„åœ°æ–¹ã€‚åœ¨ç”Ÿæˆè¿™ç§ç±»å‹çš„ç´¢å¼•æ—¶ï¼ŒMySQLå°†æŠŠåœ¨æ–‡æœ¬ä¸­å‡ºç°çš„æ‰€æœ‰å•è¯åˆ›å»ºä¸ºä¸€ä»½æ¸…å•ï¼ŒæŸ¥è¯¢æ“ä½œå°†æ ¹æ®è¿™ä»½æ¸…å•å»æ£€ç´¢æœ‰å…³çš„æ•°æ®è®°å½•ã€‚å…¨æ–‡ç´¢å¼•å³å¯ä»¥éšæ•°æ®è¡¨ä¸€åŒåˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç­‰æ—¥åæœ‰å¿…è¦æ—¶å†ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤æ·»åŠ ï¼š<br><code>ALTER TABLE table_name ADD FULLTEXT(column1, column2)</code></p><p>æœ‰äº†å…¨æ–‡ç´¢å¼•ï¼Œå°±å¯ä»¥ç”¨SELECTæŸ¥è¯¢å‘½ä»¤å»æ£€ç´¢é‚£äº›åŒ…å«ç€ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šå•è¯çš„æ•°æ®è®°å½•äº†ã€‚ä¸‹é¢æ˜¯è¿™ç±»æŸ¥è¯¢å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ï¼š<br>ã€€ã€€<br><code>SELECT * FROM table_name WHERE MATCH(column1, column2) AGAINST(&#39;word1&#39;, &#39;word2&#39;, &#39;word3&#39;)</code></p><p>ä¸Šé¢è¿™æ¡å‘½ä»¤å°†æŠŠcolumn1å’Œcolumn2å­—æ®µé‡Œæœ‰word1ã€word2å’Œword3çš„æ•°æ®è®°å½•å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ã€‚</p><p><a href="https://blog.csdn.net/qq_33330687/article/details/89004462" target="_blank" rel="noopener">InnoDBå¦‚ä½•è§£å†³å¹»è¯»</a></p><blockquote><p>ä½¿ç”¨MVCC</p></blockquote><p><a href="https://www.jianshu.com/p/bbaeab492a64" target="_blank" rel="noopener">ä¸€æ¡SQLè¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„</a></p><p>ç”±serverå±‚å’Œå­˜å‚¨å¼•æ“ç»„æˆ</p><blockquote><p>server å±‚åŒ…æ‹¬è¿æ¥å™¨ã€åˆ†æå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ï¼Œæ¶µç›– MySQLçš„æ ¸å¿ƒæœåŠ¡ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­¦ã€åŠ å¯†å‡½æ•°ç­‰ï¼‰ï¼Œè¿˜æœ‰æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚</p></blockquote><p><a href="https://blog.csdn.net/zxp0727/article/details/84580277" target="_blank" rel="noopener">ä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</a></p><blockquote><p>é‡Œé¢åŒ…å«binlogå’Œredolog,ä¸¤é˜¶æ®µæäº¤</p></blockquote><h4 id="ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè§†å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚</li><li>æ¸¸æ ‡æ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚æ¸¸æ ‡å¯ä»¥å®šåœ¨è¯¥å•å…ƒä¸­çš„ç‰¹å®šè¡Œï¼Œä»ç»“æœé›†çš„å½“å‰è¡Œæ£€ç´¢ä¸€è¡Œæˆ–å¤šè¡Œã€‚å¯ä»¥å¯¹ç»“æœé›†å½“å‰è¡Œåšä¿®æ”¹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚</li></ul><h3 id="è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"><a href="#è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"></a>è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h3><h3 id="åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>åœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><p>åŒä¸€ä¸ªå±æ€§é‡Œé¢åŒ…å«å¤šä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ç´¢å¼•.enum åœ¨æ•°æ®åº“åº•å±‚ä»¥æ•´å‹æ–¹å¼å‚¨å­˜ï¼Œä» 1 å¼€å§‹ï¼Œ0 ç”¨äºæŒ‡ä»£ç©ºæˆ–é”™è¯¯çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><h3 id="CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ"><a href="#CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ"></a>CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿ</h3><p>char å›ºå®šé•¿åº¦255ï¼Œä¸è¶³çš„éƒ¨åˆ†è¡¥ç©ºæ ¼ï¼Œå–å‡ºæ—¶å†å»æ‰ç©ºæ ¼ã€‚varchar ä¸å®šé•¿åº¦</p><h3 id="drop-deleteä¸truncateçš„åŒºåˆ«"><a href="#drop-deleteä¸truncateçš„åŒºåˆ«" class="headerlink" title="drop,deleteä¸truncateçš„åŒºåˆ«"></a>drop,deleteä¸truncateçš„åŒºåˆ«</h3><p>dropåˆ é™¤è¡¨ï¼Œtruncateæ¸…ç©ºè¡¨ï¼Œdeleteåˆ é™¤è¡¨ã€dropå’Œtruncateä¸èƒ½å›æ»šã€‚</p><h3 id="å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«"><a href="#å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«"></a>å­˜å‚¨è¿‡ç¨‹ä¸è§¦å‘å™¨çš„åŒºåˆ«</h3><ul><li>è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å®ƒå¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»è€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚ï¼ŒæŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚</li><li>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œä»¥ååœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯SQLè¯­å¥æ‰§è¡Œè¦å¿«ã€‚å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚<blockquote><p>å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘è¿‡çš„ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ç›´æ¥å­˜æ”¾äºæ•°æ®åº“ä¸­ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹åç›´æ¥è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œé€šè®¯ã€‚å®‰å…¨æ€§é«˜ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æœ‰ä¸€å®šæƒé™çš„ç”¨æˆ·ã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯å‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚==ç¼ºç‚¹ï¼šç§»æ¤æ€§å·®==ã€‚</p></blockquote></li></ul><p>2ï¼‰å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚</p><h3 id="å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ"><a href="#å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ" class="headerlink" title="å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿ"></a><a href="https://www.cnblogs.com/hwlong/p/9009311.html" target="_blank" rel="noopener">å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›</a>ï¼Ÿ</h3><p>æ•°æ®å®Œæ•´æ€§(Data Integrity)æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®(Accuracy)å’Œå¯é æ€§(Reliability)ã€‚</p><ul><li>å®ä½“å®Œæ•´æ€§ï¼šè§„å®šè¡¨çš„æ¯ä¸€è¡Œåœ¨è¡¨ä¸­æ˜¯æƒŸä¸€çš„å®ä½“ã€‚</li><li>åŸŸå®Œæ•´æ€§ï¼šæ˜¯æŒ‡è¡¨ä¸­çš„åˆ—å¿…é¡»æ»¡è¶³æŸç§ç‰¹å®šçš„æ•°æ®ç±»å‹çº¦æŸï¼Œå…¶ä¸­çº¦æŸåˆåŒ…æ‹¬å–å€¼èŒƒå›´ã€ç²¾åº¦ç­‰è§„å®šã€‚</li><li>å‚ç…§å®Œæ•´æ€§ï¼šæ˜¯æŒ‡ä¸¤ä¸ªè¡¨çš„ä¸»å…³é”®å­—å’Œå¤–å…³é”®å­—çš„æ•°æ®åº”ä¸€è‡´ï¼Œä¿è¯äº†è¡¨ä¹‹é—´çš„æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé˜²æ­¢äº†æ•°æ®ä¸¢å¤±æˆ–æ— æ„ä¹‰çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­æ‰©æ•£ã€‚</li><li>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼šä¸åŒçš„å…³ç³»æ•°æ®åº“ç³»ç»Ÿæ ¹æ®å…¶åº”ç”¨ç¯å¢ƒçš„ä¸åŒï¼Œå¾€å¾€è¿˜éœ€è¦ä¸€äº›ç‰¹æ®Šçš„çº¦æŸæ¡ä»¶ã€‚ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§å³æ˜¯é’ˆå¯¹æŸä¸ªç‰¹å®šå…³ç³»æ•°æ®åº“çš„çº¦æŸæ¡ä»¶ï¼Œå®ƒåæ˜ æŸä¸€å…·ä½“åº”ç”¨å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ã€‚</li></ul><p>ä¸è¡¨æœ‰å…³çš„çº¦æŸï¼šåŒ…æ‹¬åˆ—çº¦æŸ(NOT NULLï¼ˆéç©ºçº¦æŸï¼‰)å’Œè¡¨çº¦æŸ(PRIMARY KEYã€foreign keyã€checkã€UNIQUE)</p><p>MySqlä¸æ”¯æŒcheck</p><h3 id="Mysql-çš„å­˜å‚¨å¼•æ“-myisamå’Œinnodbçš„åŒºåˆ«ã€‚"><a href="#Mysql-çš„å­˜å‚¨å¼•æ“-myisamå’Œinnodbçš„åŒºåˆ«ã€‚" class="headerlink" title="Mysql çš„å­˜å‚¨å¼•æ“,myisamå’Œinnodbçš„åŒºåˆ«ã€‚"></a>Mysql çš„å­˜å‚¨å¼•æ“,myisamå’Œinnodbçš„åŒºåˆ«ã€‚</h3><pre><code>NULL | myisam | innodb</code></pre><p>   â€”|â€”|â€”<br>äº‹åŠ¡æ”¯æŒ|ä¸æ”¯æŒ| æ”¯æŒ| row 2 col 2<br>å­˜å‚¨ç»“æ„     |ä¸‰ç§æ–‡ä»¶  | ä¸€ç§æ–‡ä»¶<br>å­˜å‚¨ç©ºé—´     |ä½“ç§¯å° | ä½“ç§¯å¤§<br>å¯ç§»æ¤æ€§     |æ–¹ä¾¿ | å›°éš¾<br>é”åŠ›åº¦     |è¡¨çº§é”| è¡¨çº§é”ï¼Œè¡Œçº§é”<br>å…¨æ–‡ç´¢å¼•     |æ”¯æŒ | ä¸æ”¯æŒ<br>è¡¨ä¸»é”®     |å¯ä»¥æ²¡æœ‰|å¿…é¡»æœ‰ï¼Œæ²¡æœ‰å°±è‡ªåŠ¨ç”Ÿæˆ<br>å¤–é”®     |ä¸æ”¯æŒ | æ”¯æŒ</p><h2 id="1-é”"><a href="#1-é”" class="headerlink" title="1.é”"></a>1.é”</h2><ul><li>MyISAM æ˜¯éäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼Œé€‚åˆç”¨äºé¢‘ç¹æŸ¥è¯¢çš„åº”ç”¨ã€‚è¡¨é”ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼Œé€‚åˆå°æ•°æ®ï¼Œå°å¹¶å‘ã€‚</li><li>Innodbæ˜¯æ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼Œåˆäºæ’å…¥å’Œæ›´æ–°æ“ä½œæ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œè®¾è®¡åˆç†çš„è¯æ˜¯è¡Œé”ï¼ˆæœ€å¤§åŒºåˆ«å°±åœ¨é”çš„çº§åˆ«ä¸Šï¼‰ï¼Œé€‚åˆå¤§æ•°æ®ï¼Œå¤§å¹¶å‘<br><img src="https://upload-images.jianshu.io/upload_images/2604566-27832dbe20e803fa.png" alt="image"><h3 id="è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«"><a href="#è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«" class="headerlink" title="è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«"></a>è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«</h3><h5 id="è¡¨é”"><a href="#è¡¨é”" class="headerlink" title="è¡¨é”"></a>è¡¨é”</h5></li><li>ç‰¹ç‚¹ï¼šå¼€é”€å°ã€åŠ é”å¿«ã€<strong>æ— æ­»é”</strong>ï¼›é”ç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡é«˜ï¼Œ<strong>é«˜å¹¶å‘ä¸‹æ€§èƒ½ä½</strong></li><li>åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚æŸ¥è¯¢æ“ä½œï¼ˆSELECTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚<h5 id="è¡Œé”"><a href="#è¡Œé”" class="headerlink" title="è¡Œé”"></a>è¡Œé”</h5></li><li>ç‰¹ç‚¹ï¼šé”çš„ç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ã€<strong>å¤„ç†å¹¶å‘çš„èƒ½åŠ›å¼º</strong>ï¼›å¼€é”€å¤§ã€åŠ é”æ…¢ã€<strong>ä¼šå‡ºç°æ­»é”</strong></li><li><p>åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼›å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ã€‚</p></li><li><p>ä¹è§‚é”ï¼šä¸åŠ é”ï¼Œåªæœ‰åœ¨æ›´æ–°æ—¶éªŒè¯æ•°æ®æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æ›´æ–°ï¼Œååé‡è¾ƒé«˜ï¼Œé€‚ç”¨äºå¤šè¯»åœºæ™¯ã€‚å®ƒ==å‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆå½“å‰æ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›æ»š==ã€‚</p><blockquote><p>ä¹è§‚é”å®ç°æ–¹å¼æ˜¯ï¼šç‰ˆæœ¬å·versionå’ŒCAS(compare and swap)</p></blockquote></li><li>æ‚²è§‚é”ï¼šè¯»å–æ—¶åŠ é”ï¼Œæ›´æ–°å®Œé‡Šæ”¾é”ï¼Œå†æ­¤è¿‡ç¨‹ä¸­ä¼šé€ æˆå…¶ä»–çº¿ç¨‹é˜»å¡ï¼Œå¯¼è‡´ååé‡ä½ï¼Œé€‚ç”¨äºå¤šå†™åœºæ™¯ã€‚å½“äº‹åŠ¡Aå¯¹æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œ==å¹¶ä¸”å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾åï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œ==ï¼Œè¿™é‡Œäº‹åŠ¡Aæ‰€æ–½åŠ çš„é”å°±å«æ‚²è§‚é”ã€‚</li></ul><blockquote><p>è¡Œé”(å…±äº«é”å’Œæ’ä»–é”),é—´éš™é”(next-keylockï¼‰éƒ½å±äºæ‚²è§‚é”ã€‚<br>InnoDBå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š</p><ul><li>å…±äº«é”ï¼ˆSï¼‰ï¼š==å…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”==ã€‚</li><li>æ’ä»–é”ï¼ˆX)ï¼š==å…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚==<br>å¦å¤–ï¼Œä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®ç°å¤šç²’åº¦é”æœºåˆ¶ï¼ŒInnoDBè¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯è¡¨é”ã€‚</li></ul></blockquote><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ISé”ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”* ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„IXé”ã€‚<h5 id="é—´éš™é”ï¼ˆNext-Keyé”ï¼‰"><a href="#é—´éš™é”ï¼ˆNext-Keyé”ï¼‰" class="headerlink" title="é—´éš™é”ï¼ˆNext-Keyé”ï¼‰:"></a>é—´éš™é”ï¼ˆNext-Keyé”ï¼‰:</h5></li><li>å½“æˆ‘ä»¬ç”¨èŒƒå›´æ¡ä»¶è€Œä¸æ˜¯ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•é¡¹åŠ é”ï¼›</li><li>å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAP)â€ï¼ŒInnoDBä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é—´éš™é”ï¼ˆNext-Key)é”ã€‚</li></ul><hr><ul><li>1:<strong>è¡¨çº§é”ä¸ä¼šæ­»é”,è¡Œçº§é”å’Œé¡µçº§é”å¯èƒ½æ­»é”</strong></li><li>2:åœ¨æ•°æ®åº“å®ç°èµ„æºé”å®šçš„è¿‡ç¨‹ä¸­ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œé”å®šç›¸åŒæ•°æ®é‡çš„æ•°æ®æ‰€éœ€è¦æ¶ˆè€—çš„å†…å­˜æ•°é‡æ˜¯è¶Šæ¥è¶Šå¤šçš„ï¼Œå®ç°ç®—æ³•ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ä¸è¿‡ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œåº”ç”¨ç¨‹åºçš„è®¿é—®è¯·æ±‚é‡åˆ°é”ç­‰å¾…çš„å¯èƒ½æ€§ä¹Ÿä¼šéšä¹‹é™ä½ï¼Œç³»ç»Ÿæ•´ä½“å¹¶å‘åº¦ä¹Ÿéšä¹‹æå‡ã€‚</li><li>3:==ä»é”çš„è§’åº¦æ¥è¯´ï¼Œè¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Webåº”==ç”¨ï¼›è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶å‘æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿã€‚</li><li>4:æ„å‘é”æ˜¯InnoDBè‡ªåŠ¨åŠ çš„ï¼Œä¸éœ€ç”¨æˆ·å¹²é¢„ã€‚==å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)==ï¼›å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼›</li><li>5:InnoDBè¡Œé”å®ç°æ–¹å¼: ==InnoDBè¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”==</li></ul><h3 id="Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£"><a href="#Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£" class="headerlink" title="Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£"></a><a href="https://blog.csdn.net/w2064004678/article/details/83012387" target="_blank" rel="noopener">Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŸç†è¯¦è§£</a></h3><p>MVCCæ˜¯ä¸€ç§å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚MVCCæ˜¯é€šè¿‡ä¿å­˜æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ¥å®ç°çš„ã€‚åœ¨æ¯ä¸ªè¡¨åæ·»åŠ åˆ›å»ºç‰ˆæœ¬å·å’Œåˆ é™¤ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·ä¸ºä¿®æ”¹è¯¥é¡¹çš„äº‹åŠ¡ç‰ˆæœ¬å·ã€‚</p><ul><li>SELECT:InnoDBä¼šæ ¹æ®ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ£€æŸ¥æ¯è¡Œè®°å½•<blockquote><p>InnoDBåªä¼šæŸ¥æ‰¾ç‰ˆæœ¬æ—©äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œ(ä¹Ÿå°±æ˜¯,è¡Œçš„ç³»ç»Ÿç‰ˆæœ¬å·å°äºæˆ–ç­‰äºäº‹åŠ¡çš„ç³»ç»Ÿç‰ˆæœ¬å·)ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–çš„è¡Œï¼Œè¦ä¹ˆæ˜¯åœ¨äº‹åŠ¡å¼€å§‹å‰å·²ç»å­˜åœ¨çš„ï¼Œè¦ä¹ˆæ˜¯äº‹åŠ¡è‡ªèº«æ’å…¥æˆ–è€…ä¿®æ”¹è¿‡çš„.</p></blockquote></li></ul><blockquote><p>è¡Œçš„åˆ é™¤ç‰ˆæœ¬è¦ä¹ˆæœªå®šä¹‰,è¦ä¹ˆå¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·,è¿™å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–åˆ°çš„è¡Œï¼Œåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰æœªè¢«åˆ é™¤.<br>åªæœ‰a,båŒæ—¶æ»¡è¶³çš„è®°å½•ï¼Œæ‰èƒ½è¿”å›ä½œä¸ºæŸ¥è¯¢ç»“æœ.</p></blockquote><ul><li><p>DELETE:InnoDBä¼šä¸ºåˆ é™¤çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·(äº‹åŠ¡çš„ID)ä½œä¸ºåˆ é™¤æ ‡è¯†.</p></li><li><p>UPDATE:InnoDBæ‰§è¡ŒUPDATEï¼Œå®é™…ä¸Šæ˜¯æ–°æ’å…¥äº†ä¸€è¡Œè®°å½•ï¼Œå¹¶ä¿å­˜å…¶åˆ›å»ºæ—¶é—´ä¸ºå½“å‰äº‹åŠ¡çš„IDï¼ŒåŒæ—¶ä¿å­˜å½“å‰äº‹åŠ¡IDåˆ°è¦UPDATEçš„è¡Œçš„åˆ é™¤æ—¶é—´ã€‚</p></li></ul><h2 id="é”ç­–ç•¥"><a href="#é”ç­–ç•¥" class="headerlink" title="é”ç­–ç•¥"></a><a href="https://www.nowcoder.com/discuss/151430" target="_blank" rel="noopener">é”ç­–ç•¥</a></h2><h2 id="2-æ—¥å¿—"><a href="#2-æ—¥å¿—" class="headerlink" title="2.æ—¥å¿—"></a>2.æ—¥å¿—</h2><h3 id="redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“"><a href="#redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“" class="headerlink" title="redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“"></a>redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“</h3><ul><li>binlog</li><li>redolog,ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œç¼“å­˜åŒºä¸­æ•°æ®ä¼šæ…¢æ…¢æ›´æ–°åˆ°æ•°æ®åº“çš„ç¡¬ç›˜ä¸Šã€‚</li><li>undologï¼Œè®°å½•äº†ä¿®æ”¹å‡ ç‡ï¼Œå¯ä»¥éšä¾¿å›æ»šï¼Œä¿è¯åŸå­æ€§ã€‚</li></ul><h2 id="3-äº‹åŠ¡"><a href="#3-äº‹åŠ¡" class="headerlink" title="3.äº‹åŠ¡"></a>3.äº‹åŠ¡</h2><p>MVCC (MultiVersion Concurrency Control) å«åš==å¤šç‰ˆæœ¬å¹¶å‘==æ§åˆ¶ã€‚==ç”±undologå’Œè®°å½•ç‰ˆæœ¬çš„ä¸€ä¸ªä¸œè¥¿ç»„æˆ==ã€‚</p><blockquote><p>InnoDBçš„ MVCCï¼Œæ˜¯é€šè¿‡åœ¨æ¯è¡Œè®°å½•çš„åé¢ä¿å­˜ä¸¤ä¸ªéšè—çš„åˆ—æ¥å®ç°çš„ã€‚è¿™ä¸¤ä¸ªåˆ—ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„åˆ›å»ºæ—¶é—´ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„è¿‡æœŸæ—¶é—´ï¼Œå½“ç„¶å­˜å‚¨çš„å¹¶ä¸æ˜¯å®é™…çš„æ—¶é—´å€¼ï¼Œè€Œæ˜¯ç³»ç»Ÿç‰ˆæœ¬å·ã€‚</p></blockquote><p>ä»¥ä¸Šç‰‡æ®µæ‘˜è‡ªã€Šé«˜æ€§èƒ½Mysqlã€‹è¿™æœ¬ä¹¦å¯¹MVCCçš„å®šä¹‰ã€‚ä»–çš„ä¸»è¦å®ç°æ€æƒ³æ˜¯é€šè¿‡==æ•°æ®å¤šç‰ˆæœ¬==æ¥åšåˆ°==è¯»å†™åˆ†ç¦»==ã€‚ä»è€Œå®ç°ä¸åŠ é”è¯»è¿›è€Œåšåˆ°è¯»å†™å¹¶è¡Œã€‚</p><p><strong>MVCCåœ¨mysqlä¸­çš„å®ç°ä¾èµ–çš„æ˜¯undo logä¸read view</strong></p><ul><li>undolog :undologä¸­è®°å½•æŸè¡Œæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚</li><li>read view :ç”¨æ¥åˆ¤æ–­å½“å‰ç‰ˆæœ¬æ•°æ®çš„å¯è§æ€§<h3 id="ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„"><a href="#ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„"></a>ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„</h3></li><li>äº‹åŠ¡çš„åŸå­æ€§æ˜¯é€šè¿‡ undo log æ¥å®ç°çš„</li><li>äº‹åŠ¡çš„æŒä¹…æ€§æ€§æ˜¯é€šè¿‡ redo log æ¥å®ç°çš„</li><li>äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡ (è¯»å†™é”+MVCC)æ¥å®ç°çš„</li><li>è€Œäº‹åŠ¡çš„ç»ˆæå¤§bossä¸€è‡´æ€§æ˜¯é€šè¿‡åŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æ¥å®ç°çš„ï¼ï¼ï¼<blockquote><p>åŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æŠ˜è…¾åŠå¤©çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼ACIDåªæ˜¯ä¸ªæ¦‚å¿µï¼Œäº‹åŠ¡æœ€ç»ˆç›®çš„æ˜¯è¦ä¿éšœæ•°æ®çš„å¯é æ€§ï¼Œä¸€è‡´æ€§</p></blockquote></li><li><a href="https://www.sohu.com/a/316482862_663371" target="_blank" rel="noopener">äº‹åŠ¡æ˜¯å¦‚ä½•é€šè¿‡æ—¥å¿—å®ç°çš„</a></li><li>mysql ä¸ºäº†æå‡æ€§èƒ½ä¸ä¼šæŠŠæ¯æ¬¡çš„ä¿®æ”¹éƒ½å®æ—¶åŒæ­¥åˆ°ç£ç›˜ï¼Œè€Œæ˜¯ä¼šå…ˆå­˜åˆ°Buffer Pool(ç¼“å†²æ± )é‡Œå¤´ï¼ŒæŠŠè¿™ä¸ªå½“ä½œç¼“å­˜æ¥ç”¨ã€‚ç„¶åä½¿ç”¨åå°çº¿ç¨‹å»åšç¼“å†²æ± å’Œç£ç›˜ä¹‹é—´çš„åŒæ­¥ã€‚<blockquote><p>redologæ¥è®°å½•å·²æˆåŠŸæäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šæŠŠredologæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œç³»ç»Ÿé‡å¯ä¹‹ååœ¨è¯»å–redo logæ¢å¤æœ€æ–°æ•°æ®ã€‚redologæ˜¯ç”¨æ¥æ¢å¤æ•°æ®çš„ ç”¨äºä¿éšœï¼Œå·²æäº¤äº‹åŠ¡çš„æŒä¹…åŒ–ç‰¹æ€§</p></blockquote></li></ul><blockquote><p>undolog å«åšå›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚<strong>ä»–æ­£å¥½è·Ÿå‰é¢æ‰€è¯´çš„é‡åšæ—¥å¿—æ‰€è®°å½•çš„ç›¸åï¼Œredologè®°å½•æ•°æ®è¢«ä¿®æ”¹åçš„ä¿¡æ¯ã€‚undologä¸»è¦è®°å½•çš„æ˜¯æ•°æ®çš„é€»è¾‘å˜åŒ–</strong>ï¼Œä¸ºäº†åœ¨å‘ç”Ÿé”™è¯¯æ—¶å›æ»šä¹‹å‰çš„æ“ä½œï¼Œéœ€è¦å°†ä¹‹å‰çš„æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œç„¶ååœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰å¯ä»¥å›æ»šã€‚undologè®°å½•äº‹åŠ¡ä¿®æ”¹ä¹‹å‰ç‰ˆæœ¬çš„æ•°æ®ä¿¡æ¯ï¼Œå› æ­¤å‡å¦‚ç”±äºç³»ç»Ÿé”™è¯¯æˆ–è€…rollbackæ“ä½œè€Œå›æ»šçš„è¯å¯ä»¥æ ¹æ®undologçš„ä¿¡æ¯æ¥è¿›è¡Œå›æ»šåˆ°æ²¡è¢«ä¿®æ”¹å‰çš„çŠ¶æ€ã€‚</p></blockquote><p><code>redoå’Œundo</code>åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š<br>å› ä¸ºäº‹åŠ¡åœ¨ä¿®æ”¹é¡µæ—¶ï¼Œè¦å…ˆè®° undoï¼Œåœ¨è®° undo ä¹‹å‰è¦è®° undo çš„ redoï¼Œ ç„¶åä¿®æ”¹æ•°æ®é¡µï¼Œå†è®°æ•°æ®é¡µä¿®æ”¹çš„ redoã€‚ Redoï¼ˆé‡Œé¢åŒ…æ‹¬ undo çš„ä¿®æ”¹ï¼‰ ä¸€å®šè¦æ¯”æ•°æ®é¡µå…ˆæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚ å½“äº‹åŠ¡éœ€è¦å›æ»šæ—¶ï¼Œå› ä¸ºæœ‰ undoï¼Œå¯ä»¥æŠŠæ•°æ®é¡µå›æ»šåˆ°å‰é•œåƒçš„çŠ¶æ€ï¼Œå´©æºƒæ¢å¤æ—¶ï¼Œå¦‚æœ redo log ä¸­äº‹åŠ¡æ²¡æœ‰å¯¹åº”çš„ commit è®°å½•ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ undoæŠŠè¯¥äº‹åŠ¡çš„ä¿®æ”¹å›æ»šåˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‚ å¦‚æœæœ‰ commit è®°å½•ï¼Œå°±ç”¨ redo å‰æ»šåˆ°è¯¥äº‹åŠ¡å®Œæˆæ—¶å¹¶æäº¤æ‰ã€‚</p><h2 id="4-ç´¢å¼•"><a href="#4-ç´¢å¼•" class="headerlink" title="4.ç´¢å¼•"></a>4.ç´¢å¼•</h2><h3 id="MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†"><a href="#MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†" class="headerlink" title="MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†"></a><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†</a></h3><h3 id="å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰"><a href="#å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰" class="headerlink" title="å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰"></a>å¤šç§å¼•æ“çš„å®ç°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŸåˆ™ç­‰ç­‰ï¼ˆéå¸¸é‡è¦ï¼‰</h3><ul><li><p>å”¯ä¸€ç´¢å¼•</p><blockquote><p>å”¯ä¸€ç´¢å¼•æ˜¯<strong>ä¸å…è®¸å…¶ä¸­ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒç´¢å¼•å€¼çš„ç´¢å¼•</strong>ã€‚å½“ç°æœ‰æ•°æ®ä¸­å­˜åœ¨é‡å¤çš„é”®å€¼æ—¶ï¼Œå¤§å¤šæ•°æ•°æ®åº“ä¸å…è®¸å°†æ–°åˆ›å»ºçš„å”¯ä¸€ç´¢å¼•ä¸è¡¨ä¸€èµ·ä¿å­˜ã€‚æ•°æ®åº“è¿˜å¯èƒ½é˜²æ­¢æ·»åŠ å°†åœ¨è¡¨ä¸­åˆ›å»ºé‡å¤é”®å€¼çš„æ–°æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨employeeè¡¨ä¸­èŒå‘˜çš„å§“(lname)ä¸Šåˆ›å»ºäº†å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ä»»ä½•ä¸¤ä¸ªå‘˜å·¥éƒ½ä¸èƒ½åŒå§“ã€‚</p></blockquote></li><li><p>ä¸»é”®ç´¢å¼•</p><blockquote><p>æ•°æ®åº“è¡¨ç»å¸¸æœ‰ä¸€åˆ—æˆ–åˆ—ç»„åˆï¼Œå…¶å€¼å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¯¥åˆ—ç§°ä¸ºè¡¨çš„ä¸»é”®ã€‚åœ¨æ•°æ®åº“å…³ç³»å›¾ä¸­ä¸ºè¡¨å®šä¹‰ä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹å®šç±»å‹ã€‚è¯¥ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼éƒ½å”¯ä¸€ã€‚å½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»é”®ç´¢å¼•æ—¶ï¼Œå®ƒè¿˜å…è®¸å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚</p></blockquote></li><li><p>èšé›†ç´¢å¼•</p><blockquote><p>è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘ï¼ˆç´¢å¼•ï¼‰é¡ºåºç›¸åŒã€‚ä¸€ä¸ªè¡¨åªèƒ½åŒ…å«ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚å¦‚æœæŸç´¢å¼•ä¸æ˜¯èšé›†ç´¢å¼•ï¼Œåˆ™è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘é¡ºåºä¸åŒ¹é…ã€‚ä¸éèšé›†ç´¢å¼•ç›¸æ¯”ï¼Œèšé›†ç´¢å¼•é€šå¸¸æä¾›æ›´å¿«çš„æ•°æ®è®¿é—®é€Ÿåº¦ã€‚</p></blockquote><h3 id="å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™"><a href="#å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™" class="headerlink" title="å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™"></a>å»ºç´¢å¼•æœ‰å“ªäº›åŸåˆ™</h3><blockquote><p>ç´¢å¼•æ˜¯å»ºç«‹åœ¨æ•°æ®åº“è¡¨ä¸­çš„æŸäº›åˆ—çš„ä¸Šé¢ã€‚åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œåº”è¯¥è€ƒè™‘åœ¨å“ªäº›åˆ—ä¸Šå¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œåœ¨å“ªäº›åˆ—ä¸Šä¸èƒ½åˆ›å»ºç´¢å¼•ã€‚ä¸€èˆ¬æ¥è¯´åº”è¯¥åœ¨è¿™äº›åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼š</p></blockquote></li><li><p>åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦</p></li><li>åœ¨ä½œä¸ºä¸»é”®çš„åˆ—ä¸Šï¼Œå¼ºåˆ¶è¯¥åˆ—çš„å”¯ä¸€æ€§å’Œç»„ç»‡è¡¨ä¸­æ•°æ®çš„æ’åˆ—ç»“æ„ï¼›</li><li>åœ¨ç»å¸¸ç”¨åœ¨è¿æ¥çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿æ¥çš„é€Ÿåº¦ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ ¹æ®èŒƒå›´è¿›è¡Œæœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œå…¶æŒ‡å®šçš„èŒƒå›´æ˜¯è¿ç»­çš„ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æ’åºï¼ŒåŠ å¿«æ’åºæŸ¥è¯¢æ—¶é—´ï¼›</li><li>åœ¨ç»å¸¸ä½¿ç”¨åœ¨WHEREå­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚</li></ul><h3 id="ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨"></a>ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨</h3><ul><li>æ¡ä»¶ä¸­ä½¿ç”¨äº† orï¼Œè€Œç›¸å…³åˆ—ä¸å…¨æœ‰ç´¢å¼•</li><li>æ¡ä»¶ä¸­ä½¿ç”¨äº†andï¼Œè€Œç›¸å…³åˆ—ä¸æ»¡è¶³æœ€å·¦åŸåˆ™</li><li>ç´¢å¼•åˆ—çš„æ•°æ®ç±»å‹å‡ºç°éšå½¢è½¬æ¢ï¼Œå¦‚varcharä¸åŠ å•å¼•å·çš„è¯å¯èƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºintå‹ï¼‰</li><li>likeæŸ¥è¯¢æ˜¯ä»¥%å¼€å¤´</li><li>where å­å¥é‡Œå¯¹ç´¢å¼•åˆ—ä¸Šæœ‰æ•°å­¦è¿ç®—/å‡½æ•°</li><li>mysqlä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ</h3></li><li>å¯¹äºé‚£äº›åœ¨æŸ¥è¯¢ä¸­==å¾ˆå°‘ä½¿ç”¨æˆ–è€…å‚è€ƒçš„åˆ—ä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¢ç„¶è¿™äº›åˆ—å¾ˆå°‘ä½¿ç”¨åˆ°ï¼Œå› æ­¤æœ‰ç´¢å¼•æˆ–è€…æ— ç´¢å¼•ï¼Œå¹¶ä¸èƒ½æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ç›¸åï¼Œç”±äºå¢åŠ äº†ç´¢å¼•ï¼Œåè€Œé™ä½äº†ç³»ç»Ÿçš„ç»´æŠ¤é€Ÿåº¦å’Œå¢å¤§äº†ç©ºé—´éœ€æ±‚ã€‚</li><li>å¯¹äºé‚£äº›==åªæœ‰å¾ˆå°‘æ•°æ®å€¼çš„åˆ—==ä¹Ÿä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚ä¸¾ä¾‹æ¯”å¦‚æ€§åˆ«åªæœ‰ç”·å’Œå¥³</li><li>å¯¹äº==é‚£äº›å®šä¹‰ä¸ºtext,imageå’Œbitæ•°æ®ç±»å‹çš„åˆ—ä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™äº›åˆ—çš„æ•°æ®é‡è¦ä¹ˆç›¸å½“å¤§ï¼Œè¦ä¹ˆå–å€¼å¾ˆå°‘==ã€‚</li><li>ç»==å¸¸é¢‘ç¹æ›´æ–°çš„åˆ—==ä¸è¦å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºè‚¯å®šä¼šå½±å“æ’å…¥æˆ–æ›´æ–°çš„æ•ˆç‡</li><li>å°½é‡é¿==å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ ï¼= æˆ–è€… &lt;&gt; æ“ä½œç¬¦ï¼ŒæŸ¥è¯¢å¼•ç”¨ä¼šæ”¾å¼ƒç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«==æã€‚</li><li>å½“==ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¿®æ”¹æ€§èƒ½å’Œæ£€ç´¢æ€§èƒ½æ˜¯äº’ç›¸çŸ›ç›¾çš„ã€‚å½“å¢åŠ ç´¢å¼•æ—¶ï¼Œä¼šæé«˜æ£€ç´¢æ€§èƒ½ï¼Œä½†æ˜¯ä¼šé™ä½ä¿®æ”¹æ€§èƒ½ã€‚å½“å‡å°‘ç´¢å¼•æ—¶ï¼Œä¼šæé«˜ä¿®æ”¹æ€§èƒ½ï¼Œé™ä½æ£€ç´¢æ€§èƒ½ã€‚å› æ­¤ï¼Œå½“ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•ã€‚</li><li>å°½é‡é¿å…NULLï¼šåœ¨MySQLä¸­ï¼Œ==å«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚==ã€‚å¯ä»¥é‡‡ç”¨0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼<blockquote><p>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ã€‚ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœè¦å»ºç«‹èšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆç”¨B-æ ‘"><a href="#ä¸ºä»€ä¹ˆç”¨B-æ ‘" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨B-æ ‘"></a>ä¸ºä»€ä¹ˆç”¨B-æ ‘</h3>ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æ„çš„ä¼˜åŠ£ã€‚å…ˆä»B-Treeåˆ†æï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†==ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥== ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®é™…å®ç°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š</li></ul><p>æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®ç°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚</p><p>ä¸ºä»€ä¹ˆä¸ç”¨çº¢é»‘æ ‘</p><blockquote><p>çº¢é»‘æ ‘è¿™ç§ç»“æ„ï¼Œh(å±‚æ•°)æ˜æ˜¾è¦æ·±çš„å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚</p></blockquote><h3 id="MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚"><a href="#MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚" class="headerlink" title="MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚"></a>MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚</h3><p>ä¾‹å¦‚ï¼š åœ¨WHEREæ¡ä»¶çš„LIKEå…³é”®å­—åŒ¹é…çš„å­—ç¬¦ä¸²ä»¥â€%â€œå¼€å¤´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•æ˜¯ä¸ä¼šèµ·åˆ°ä½œç”¨çš„ï¼›WHEREæ¡ä»¶ä¸­ä½¿ç”¨ORå…³é”®å­—æ¥è¿æ¥å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œé‚£ä¹ˆå…¶ä»–çš„ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ï¼›å¤šåˆ—ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤šåˆ—ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ã€‚ ä½¿ç”¨inæŸ¥è¯¢æ—¶ï¼ŒinæŸ¥è¯¢æ¡ä»¶è¶…è¿‡æ•°æ®åº“è¡¨çš„ä¸€åŠçš„æ—¶å€™ä¹Ÿä¼šå¤±æ•ˆã€‚</p><h3 id="æœ€å·¦åŒ¹é…åŸåˆ™"><a href="#æœ€å·¦åŒ¹é…åŸåˆ™" class="headerlink" title="æœ€å·¦åŒ¹é…åŸåˆ™"></a>æœ€å·¦åŒ¹é…åŸåˆ™</h3><ul><li>ç´¢å¼•å­—æ®µè¦å°½é‡çš„å°</li><li>ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼ˆå³ä»å·¦å¾€å³åŒ¹é…ï¼‰ï¼šå½“b+æ ‘çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚(name,age,sex)çš„æ—¶å€™ï¼Œb+æ•°æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ¥å»ºç«‹æœç´¢æ ‘çš„ï¼Œæ¯”å¦‚å½“(å¼ ä¸‰,20,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢çš„æ—¶å€™ï¼Œb+æ ‘ä¼šä¼˜å…ˆæ¯”è¾ƒnameæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘ï¼Œå¦‚æœnameç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒageå’Œsexï¼Œæœ€åå¾—åˆ°æ£€ç´¢çš„æ•°æ®ï¼›ä½†å½“(20,F)è¿™æ ·çš„æ²¡æœ‰nameçš„æ•°æ®æ¥çš„æ—¶å€™ï¼Œb+æ ‘å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™nameå°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ®nameæ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥å»å“ªé‡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚å½“(å¼ ä¸‰,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼Œb+æ ‘å¯ä»¥ç”¨nameæ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µageçš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åå†åŒ¹é…æ€§åˆ«æ˜¯Fçš„æ•°æ®äº†ï¼Œ è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚</li></ul><h3 id="MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’"><a href="#MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’" class="headerlink" title="MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’"></a><a href="https://mp.weixin.qq.com/s/TSbfdC6G-r8pvgpQ3qyjMA" target="_blank" rel="noopener">MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’</a></h3><h3 id="å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜"><a href="#å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜" class="headerlink" title="å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜"></a>å¦‚æœæœ‰2çº§ç´¢å¼•æ€ä¹ˆå­˜</h3><h3 id="å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»"><a href="#å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»" class="headerlink" title="å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»"></a>å±€éƒ¨æ€§åŸç†ä¸ç£ç›˜é¢„è¯»</h3><p>ç”±äºå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œ==ç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»è¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚==è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„==<br>å±€éƒ¨æ€§åŸç†ï¼šå½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­==ã€‚</p><p><strong>ç”±äºç£ç›˜é¡ºåºè¯»å–çš„æ•ˆç‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆ</strong>ç‡ã€‚</p><p>é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿ç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œ<strong>ä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åè¿ç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åå¼‚å¸¸è¿”å›ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</strong></p><h2 id="5-SQLè¯­å¥"><a href="#5-SQLè¯­å¥" class="headerlink" title="5.SQLè¯­å¥"></a>5.SQLè¯­å¥</h2><p> <a href="https://www.runoob.com/sql/sql-groupby.html" target="_blank" rel="noopener">SQLè¯­å¥èœé¸Ÿæ•™ç¨‹</a></p><h4 id="SQLæ•™ç¨‹"><a href="#SQLæ•™ç¨‹" class="headerlink" title="SQLæ•™ç¨‹"></a>SQLæ•™ç¨‹</h4><ul><li><code>AND</code>è¿ç®—ç¬¦ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ AND è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚</li><li><p><code>ORè¿ç®—ç¬¦</code>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶ä¸­åªè¦æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ OR è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">WHERE alexa &gt; 15</span><br><span class="line">AND (country=&apos;CN&apos; OR country=&apos;USA&apos;);</span><br></pre></td></tr></table></figure></li><li><p><code>ORDER BY</code> å…³é”®å­—é»˜è®¤æŒ‰ç…§å‡åºå¯¹è®°å½•è¿›è¡Œæ’åºã€‚å¦‚æœéœ€è¦æŒ‰ç…§é™åºå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ DESC å…³é”®å­—ã€‚</p></li><li><code>IN</code>æ“ä½œç¬¦INæ“ä½œç¬¦å…è®¸åœ¨WHEREå­å¥ä¸­è§„å®šå¤šä¸ªå€¼ã€‚</li><li><p><code>BETWEEN</code>æ“ä½œç¬¦ç”¨äºé€‰å–ä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´å†…çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">WHERE (alexa BETWEEN 1 AND 20)</span><br><span class="line">AND country NOT IN (&apos;USA&apos;, &apos;IND&apos;);</span><br></pre></td></tr></table></figure></li><li><p>INNER JOINï¼šå¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</p></li><li>LEFT JOINï¼šå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li><li>RIGHT JOINï¼šå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li><li>FULL JOINï¼šåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</li></ul><h4 id="SQLé«˜çº§æ•™ç¨‹"><a href="#SQLé«˜çº§æ•™ç¨‹" class="headerlink" title="SQLé«˜çº§æ•™ç¨‹"></a>SQLé«˜çº§æ•™ç¨‹</h4><ul><li>æ¨¡ç³ŠæŸ¥è¯¢(like)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Websites</span><br><span class="line">ä»¥&quot;G&quot;å¼€å§‹çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;G%&apos;;</span><br><span class="line">ä»¥&quot;k&quot;ç»“å°¾çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;%k&apos;;</span><br><span class="line">è¿˜å¯ä»¥å†™NOT LIKEåšåå‘æŸ¥è¯¢</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://blog.csdn.net/lu0422/article/details/78892497" target="_blank" rel="noopener">è§£é‡ŠMySQLå¤–è¿æ¥ã€å†…è¿æ¥(outer joinå’Œinner join)ä¸è‡ªè¿æ¥çš„åŒºåˆ«å¤–è¿æ¥</a><br><img src="https://www.runoob.com/wp-content/uploads/2019/01/sql-join.png" alt="SQL JOINS"></p><ul><li>å·¦è¿æ¥ï¼šè¿æ¥ä¸¤å¼ è¡¨ï¼Œå·¦è¡¨æ•°æ®å®Œå…¨æ˜¾ç¤ºï¼Œå³è¡¨åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼›åœ¨è¿™é‡Œï¼Œt_employeeå°±æ˜¯å·¦è¡¨ï¼Œä¹Ÿå°±æ˜¯åŸºå‡†è¡¨ï¼Œ==ç”¨åŸºå‡†è¡¨çš„æ•°æ®å»åŒ¹é…å³è¡¨çš„æ•°æ®ï¼Œæ‰€ä»¥å·¦è¡¨çš„è®°å½•æ˜¯å…¨éƒ¨ä¼šæŸ¥è¯¢å‡ºæ¥çš„ï¼Œå¦‚æœå³è¡¨æ²¡æœ‰è®°å½•å¯¹åº”çš„è¯å°±æ˜¾ç¤ºnull==ã€‚<blockquote><p>LEFT JOIN å…³é”®å­—ä»å·¦è¡¨ï¼ˆtable1ï¼‰è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³ä½¿å³è¡¨ï¼ˆtable2ï¼‰ä¸­æ²¡æœ‰åŒ¹é…ã€‚å¦‚æœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œåˆ™ç»“æœä¸º NULLã€‚</p></blockquote></li><li>å³è¿æ¥ï¼šåŒä¸Šï¼Œæ¢ä¸ªæ–¹å‘ï¼›<br>å…¨å¤–è¿æ¥ï¼šä¸¤è¡¨å­—æ®µéƒ½åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼›</li><li>å†…è¿æ¥ï¼šæ‰€æœ‰æŸ¥è¯¢å‡ºçš„ç»“æœéƒ½æ˜¯èƒ½å¤Ÿåœ¨è¿æ¥çš„è¡¨ä¸­æœ‰å¯¹åº”è®°å½•çš„ã€‚è¿™å°±æ˜¯å†…è¿æ¥çš„ç‰¹ç‚¹ï¼Œ==åªæŸ¥è¯¢åœ¨è¿æ¥çš„è¡¨ä¸­èƒ½å¤Ÿæœ‰å¯¹åº”çš„è®°å½•==ï¼Œ<blockquote><p>INNER JOINå…³é”®å­—åœ¨è¡¨ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªåŒ¹é…æ—¶è¿”å›è¡Œã€‚</p></blockquote></li><li>å…¨å¤–è¿æ¥ï¼š==mysqlæ˜¯æ²¡æœ‰å…¨å¤–è¿æ¥çš„==(mysqlä¸­æ²¡æœ‰<code>full outer join</code>å…³é”®å­—)ï¼Œ==æƒ³è¦è¾¾åˆ°å…¨å¤–è¿æ¥çš„æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨<code>union</code>å…³é”®å­—è¿æ¥å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥==ã€‚<strong>å¦‚æœåœ¨Oracleä¸­ï¼Œç›´æ¥å°±ä½¿ç”¨<code>full outer join</code>å…³é”®å­—è¿æ¥ä¸¤è¡¨å°±è¡Œäº†ã€‚</strong></li><li><p>UNION</p><blockquote><p>SQL UNION æ“ä½œç¬¦åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT country FROM Websites</span><br><span class="line">UNION</span><br><span class="line">SELECT country FROM apps</span><br><span class="line">ORDER BY country;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>SELECT INTO</p><blockquote><p>é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚SELECT INTO è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªæ–°è¡¨ä¸­</p></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE æ–°è¡¨</span><br><span class="line">AS</span><br><span class="line">SELECT * FROM æ—§è¡¨</span><br></pre></td></tr></table></figure><ul><li><p>INSERT INTO SELECT</p><blockquote><p>é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚INSERT INTO SELECT è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table2</span><br><span class="line">SELECT * FROM table1;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>è‡ªè¿æ¥ï¼šæ‰¾åˆ°ä¸¤è¡¨çš„å…¬å…±å­—æ®µï¼Œç„¶åå’Œå†…è¿æ¥ä¸€æ ·ã€‚</p></li><li>äº¤å‰è¿æ¥: ç”Ÿæˆç¬›å¡å°”ç§¯ï¼å®ƒä¸ä½¿ç”¨ä»»ä½•åŒ¹é…æˆ–è€…é€‰å–æ¡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥å°†ä¸€ä¸ªæ•°æ®æºä¸­çš„æ¯ä¸ªè¡Œä¸å¦ä¸€ä¸ªæ•°æ®æºçš„æ¯ä¸ªè¡Œéƒ½ä¸€ä¸€åŒ¹é…</li></ul><p><code>SELECT type,pub_name FROM titles CROSS JOIN publishers ORDER BY type</code></p><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a><a href="https://www.cnblogs.com/wz123/p/9722942.html" target="_blank" rel="noopener">å­æŸ¥è¯¢</a></h3><p>ä¸€ä¸ªSELECTè¯­å¥åµŒå¥—åœ¨å¦ä¸€ä¸ªSELECTè¯­å¥ä¸­ï¼Œå­æŸ¥è¯¢ä¹Ÿå«åšå†…éƒ¨æŸ¥è¯¢ï¼Œè€ŒåŒ…å«å­æŸ¥è¯¢çš„è¯­å¥åˆç§°ä¸ºå¤–éƒ¨æŸ¥è¯¢æˆ–ä¸»æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è‡ªèº«å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­æŸ¥è¯¢ï¼Œä¸€ä¸ªæŸ¥è¯¢è¯­å¥ä¸­å¯ä»¥åµŒå¥—ä»»æ„æ•°é‡çš„å­æŸ¥è¯¢ã€‚</p><h4 id="SQLæŸ¥è¯¢é‡å¤è®°å½•"><a href="#SQLæŸ¥è¯¢é‡å¤è®°å½•" class="headerlink" title="SQLæŸ¥è¯¢é‡å¤è®°å½•"></a><a href="https://www.cnblogs.com/njccqx/p/9672504.html" target="_blank" rel="noopener">SQLæŸ¥è¯¢é‡å¤è®°å½•</a></h4><hr><p><a href="https://blog.csdn.net/a755199443/article/details/88723685" target="_blank" rel="noopener">MySQLä¸¤é“ç»å…¸SQLé¢è¯•é¢˜(è¡Œè½¬åˆ—/åˆ—è½¬è¡Œ/æ±‚æœ€å€¼)</a></p><h3 id="SQLå‡½æ•°"><a href="#SQLå‡½æ•°" class="headerlink" title="SQLå‡½æ•°"></a>SQLå‡½æ•°</h3><ul><li>GROUP BY<blockquote><p>GROUP BY è¯­å¥ç”¨äºç»“åˆèšåˆå‡½æ•°ï¼Œæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»Ÿè®¡ access_log å„ä¸ª site_id çš„è®¿é—®é‡ï¼š</span><br><span class="line">SELECT site_id, SUM(access_log.count) AS nums</span><br><span class="line">FROM access_log GROUP BY site_id;</span><br></pre></td></tr></table></figure></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT Websites.name,COUNT(access_log.aid) AS nums FROM access_log</span><br><span class="line">LEFT JOIN Websites</span><br><span class="line">ON access_log.site_id=Websites.id</span><br><span class="line">GROUP BY Websites.name;</span><br></pre></td></tr></table></figure><ul><li>HAVING<blockquote><p>åœ¨ SQL ä¸­å¢åŠ  HAVING å­å¥åŸå› æ˜¯ï¼Œ==WHERE å…³é”®å­—æ— æ³•ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨==ã€‚HAVING å­å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰åˆ†ç»„åçš„å„ç»„æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾æ€»è®¿é—®é‡å¤§äº 200 çš„ç½‘ç«™ã€‚</span><br><span class="line">SELECT Websites.name, Websites.url, SUM(access_log.count) AS nums FROM (access_log INNER JOIN Websites</span><br><span class="line">ON access_log.site_id=Websites.id)</span><br><span class="line">GROUP BY Websites.name</span><br><span class="line">HAVING SUM(access_log.count) &gt; 200;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="6-SQLä¼˜åŒ–"><a href="#6-SQLä¼˜åŒ–" class="headerlink" title="6.SQLä¼˜åŒ–"></a>6.SQLä¼˜åŒ–</h2><h6 id="æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤"><a href="#æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤" class="headerlink" title="æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤"></a>æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤</h6><h6 id="500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–"><a href="#500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–"></a><a href="https://mp.weixin.qq.com/s/-ZSBoPVYUY5UN_lrwqQKVw" target="_blank" rel="noopener">500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–</a></h6><h6 id="æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„"><a href="#æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„" class="headerlink" title="æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„"></a><a href="https://mp.weixin.qq.com/s/zhvN31uYtm-507k3GKJeKg" target="_blank" rel="noopener">æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®é™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„</a></h6><h6 id="å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€"><a href="#å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€" class="headerlink" title="å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€"></a><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NzA4MTkxNQ==&amp;mid=2247485120&amp;idx=2&amp;sn=c80bd2698209858d86975d551b2144f3&amp;source=41#wechat_redirect" target="_blank" rel="noopener">å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆç‡è‡³å°‘æé«˜3å€</a></h6><h6 id="ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ"></a><a href="https://www.cnblogs.com/tuhooo/p/9582223.html" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿ</a></h6><h6 id="ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W-æ•°æ®ï¼Œä»17såˆ°300ms"><a href="#ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W-æ•°æ®ï¼Œä»17såˆ°300ms" class="headerlink" title="ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W+æ•°æ®ï¼Œä»17såˆ°300ms"></a><a href="https://www.jianshu.com/p/0768ebc4e28d" target="_blank" rel="noopener">ä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æï¼ˆ900W+æ•°æ®ï¼Œä»17såˆ°300ms</a></h6><h6 id="é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ"><a href="#é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ" class="headerlink" title="é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ"></a><a href="https://www.jianshu.com/p/bf27be3fd448" target="_blank" rel="noopener">é¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ</a></h6><h6 id="æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"><a href="#æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±" class="headerlink" title="æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"></a><a href="https://www.cnblogs.com/a-phper/p/10313948.html" target="_blank" rel="noopener">æ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±</a></h6><h6 id="MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ"><a href="#MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ"></a><a href="https://blog.csdn.net/hao_yunfeng/article/details/82392261" target="_blank" rel="noopener">MYSQLçš„ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› åŠè§£å†³æ–¹æ¡ˆ</a></h6><ul><li>mysqlä¸»ä»å¤åˆ¶ç”¨é€”<blockquote><p>ä»åº“ç”Ÿæˆä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œä¸€ä¸ªSQLçº¿ç¨‹ï¼›i/oçº¿ç¨‹å»è¯·æ±‚ä¸»åº“çš„binlogï¼Œå¹¶å°†å¾—åˆ°çš„binlogæ—¥å¿—å†™åˆ°relaylogï¼ˆä¸­ç»§æ—¥å¿—ï¼‰æ–‡ä»¶ä¸­ï¼›ä¸»åº“ä¼šç”Ÿæˆä¸€ä¸ª log dump çº¿ç¨‹ï¼Œç”¨æ¥ç»™ä»åº“i/oçº¿ç¨‹ä¼ binlogï¼›<br>SQL çº¿ç¨‹ï¼Œä¼šè¯»å–relay logæ–‡ä»¶ä¸­çš„æ—¥å¿—ï¼Œå¹¶è§£ææˆå…·ä½“æ“ä½œï¼Œæ¥å®ç°ä¸»ä»çš„æ“ä½œä¸€è‡´ï¼Œè€Œæœ€ç»ˆæ•°æ®ä¸€è‡´ï¼›</p></blockquote></li></ul><p>å®æ—¶ç¾å¤‡ï¼Œç”¨äºæ•…éšœåˆ‡æ¢,==è¯»å†™åˆ†ç¦»(ä¸»å†™ä»è¯»æ¯”ä¾‹ä¸º10ï¼š1)==ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡<br>å¤‡ä»½ï¼Œé¿å…å½±å“ä¸šåŠ¡</p><ul><li>ä¸»ä»éƒ¨ç½²å¿…è¦æ¡ä»¶ï¼š<br>ä¸»åº“å¼€å¯binlogæ—¥å¿—ï¼ˆè®¾ç½®log-binå‚æ•°ï¼‰,ä¸»ä»server-idä¸åŒ,ä»åº“æœåŠ¡å™¨èƒ½è¿é€šä¸»åº“<h6 id="æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨"><a href="#æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨" class="headerlink" title="æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨"></a><a href="https://blog.csdn.net/dhfzhishi/article/details/82561939" target="_blank" rel="noopener">æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨</a></h6><h6 id="ç°åº¦å‘å¸ƒ"><a href="#ç°åº¦å‘å¸ƒ" class="headerlink" title="ç°åº¦å‘å¸ƒ"></a><a href="https://blog.csdn.net/qq_42234452/article/details/90906692?fps=1&amp;locationNum=2" target="_blank" rel="noopener">ç°åº¦å‘å¸ƒ</a></h6>åœ¨ç°åº¦å‘å¸ƒå¼€å§‹åï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸ç›´æ¥å°†æµé‡åˆ‡è¿‡æ¥ï¼Œè€Œæ˜¯æµ‹è¯•äººå‘˜å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œçº¿ä¸Šæµ‹è¯•ï¼Œå¯åŠ¨çš„è¿™ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‘ä¸é›€ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°†å°‘é‡çš„ç”¨æˆ·æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œç„¶åå†å¯¹æ–°ç‰ˆæœ¬åšè¿è¡ŒçŠ¶æ€è§‚å¯Ÿï¼Œæ”¶é›†å„ç§è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚æœæ­¤æ—¶å¯¹æ–°æ—§ç‰ˆæœ¬åšå„ç§æ•°æ®å¯¹æ¯”ï¼Œå°±æ˜¯æ‰€è°“çš„A/Bæµ‹è¯•ã€‚</li></ul><p>å½“ç¡®è®¤æ–°ç‰ˆæœ¬è¿è¡Œè‰¯å¥½åï¼Œå†é€æ­¥å°†æ›´å¤šçš„æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œåœ¨æ­¤æœŸé—´ï¼Œè¿˜å¯ä»¥ä¸æ–­åœ°è°ƒæ•´æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„è¿è¡Œçš„æœåŠ¡å™¨å‰¯æœ¬æ•°é‡ï¼Œä»¥ä½¿å¾—æ–°ç‰ˆæœ¬èƒ½å¤Ÿæ‰¿å—è¶Šæ¥è¶Šå¤§çš„æµé‡å‹åŠ›ã€‚ç›´åˆ°å°†100%çš„æµé‡éƒ½åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œæœ€åå…³é—­å‰©ä¸‹çš„è€ç‰ˆæœ¬æœåŠ¡ï¼Œå®Œæˆç°åº¦å‘å¸ƒã€‚</p><p>å¦‚æœåœ¨ç°åº¦å‘å¸ƒè¿‡ç¨‹ä¸­ï¼ˆç°åº¦æœŸï¼‰å‘ç°äº†æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå°±åº”è¯¥ç«‹å³å°†æµé‡åˆ‡å›è€ç‰ˆæœ¬ä¸Šï¼Œè¿™æ ·ï¼Œå°±ä¼šå°†è´Ÿé¢å½±å“æ§åˆ¶åœ¨æœ€å°èŒƒå›´å†…ã€‚</p><h2 id="MySQLä¼˜åŒ–"><a href="#MySQLä¼˜åŒ–" class="headerlink" title="MySQLä¼˜åŒ–"></a>MySQLä¼˜åŒ–</h2><h6 id="åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–"><a href="#åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–" class="headerlink" title="åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–"></a>åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ–</h6><ul><li>æ•´æ•°TinyInt,SmallInt,MediumInt,Int,BigInt ä½¿ç”¨çš„å­˜å‚¨ 8,16,24,32,64 ä½å­˜å‚¨ç©ºé—´ã€‚ä½¿ç”¨ Unsigned è¡¨ç¤ºä¸å…è®¸è´Ÿæ•°ï¼Œå¯ä»¥ä½¿æ­£æ•°çš„ä¸Šçº¿æé«˜ä¸€å€ã€‚</li><li>å®æ•°Float,Double , æ”¯æŒè¿‘ä¼¼çš„æµ®ç‚¹è¿ç®—ã€‚<br>Decimalï¼Œç”¨äºå­˜å‚¨ç²¾ç¡®çš„å°æ•°ã€‚</li><li>å­—ç¬¦ä¸²VarCharï¼Œå­˜å‚¨å˜é•¿çš„å­—ç¬¦ä¸²ã€‚éœ€è¦ 1 æˆ– 2 ä¸ªé¢å¤–çš„å­—èŠ‚è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚Charï¼Œå®šé•¿ï¼Œé€‚åˆå­˜å‚¨å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚ MD5 å€¼ã€‚</li><li>Blobï¼ŒTextä¸ºäº†å­˜å‚¨å¾ˆå¤§çš„æ•°æ®è€Œè®¾è®¡çš„ã€‚åˆ†åˆ«é‡‡ç”¨äºŒè¿›åˆ¶å’Œå­—ç¬¦çš„æ–¹å¼ã€‚</li><li>æ—¶é—´ç±»å‹DateTimeï¼Œä¿å­˜å¤§èŒƒå›´çš„å€¼ï¼Œå  8 ä¸ªå­—èŠ‚ã€‚TimeStampï¼Œæ¨èï¼Œä¸ UNIX æ—¶é—´æˆ³ç›¸åŒï¼Œå  4 ä¸ªå­—èŠ‚ã€‚<h6 id="SQLè¯­å¥ä¼˜åŒ–"><a href="#SQLè¯­å¥ä¼˜åŒ–" class="headerlink" title="SQLè¯­å¥ä¼˜åŒ–"></a>SQLè¯­å¥ä¼˜åŒ–</h6></li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š<code>select id from t where num is null</code>å¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š<code>select id from t where num=0</code></li><li>ç”¨EXISTSæ›¿ä»£INã€ç”¨NOT EXISTSæ›¿ä»£NOT IN</li><li>ç”¨Whereå­å¥æ›¿æ¢HAVING å­å¥ å› ä¸ºHAVING åªä¼šåœ¨æ£€ç´¢å‡ºæ‰€æœ‰è®°å½•ä¹‹åæ‰å¯¹ç»“æœé›†è¿›è¡Œè¿‡æ»¤ã€‚</li><li>å°½é‡é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æ</li><li>Whereå­å¥ä¸­ï¼šwhereè¡¨ä¹‹é—´çš„è¿æ¥å¿…é¡»å†™åœ¨å…¶ä»–Whereæ¡ä»¶ä¹‹å‰ï¼Œé‚£äº›å¯ä»¥è¿‡æ»¤æ‰æœ€å¤§æ•°é‡è®°å½•çš„æ¡ä»¶å¿…é¡»å†™åœ¨Whereå­å¥çš„æœ«å°¾.HAVINGæœ€åã€‚</li><li>å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œåº”å°½é‡é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆåº”è€ƒè™‘åœ¨ where åŠ order by æ¶‰åŠçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•<h6 id="ç´¢å¼•ä¼˜åŒ–-é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹"><a href="#ç´¢å¼•ä¼˜åŒ–-é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹" class="headerlink" title="ç´¢å¼•ä¼˜åŒ–(é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹)"></a>ç´¢å¼•ä¼˜åŒ–(é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»å‹)</h6>MySQLæ”¯æŒå¾ˆå¤šæ•°æ®ç±»å‹ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹å­˜å‚¨æ•°æ®å¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ã€‚</li><li>è¶Šå°çš„æ•°æ®ç±»å‹é€šå¸¸æ›´å¥½ï¼šè¶Šå°çš„æ•°æ®ç±»å‹é€šå¸¸åœ¨ç£ç›˜ã€å†…å­˜å’Œcpuç¼“å­˜ä¸­éƒ½éœ€è¦æ›´å°‘çš„ç©ºé—´ï¼Œå¤„ç†èµ·æ¥æ›´å¿«ã€‚</li><li>ç®€å•çš„æ•°æ®ç±»å‹æ›´å¥½ï¼šæ•´å½¢æ•°æ®æ¯”èµ·å­—ç¬¦ï¼Œå¤„ç†å¼€é”€æ›´å°ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„æ¯”è¾ƒæ›´å¤æ‚ã€‚åœ¨MySQLä¸­ï¼Œåº”ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å­˜å‚¨æ—¶é—´ï¼›ä»¥åŠç”¨æ•´å½¢æ•°æ®å­˜å‚¨IPåœ°å€ã€‚</li><li>å°½é‡é¿å…NULLï¼šåº”è¯¥åˆ¶å®šåˆ—ä¸ºNOT NULLï¼Œé™¤éä½ æƒ³å­˜å‚¨NULLã€‚åœ¨MySQLä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºä»–ä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚</li><li>ä¸ºäº†æ›´å¤šçš„æé«˜mysqlæ•ˆç‡å¯å»ºç«‹ç»„åˆç´¢å¼•ï¼Œéµå¾ªâ€œæœ€å·¦å‰ç¼€â€åŸåˆ™ã€‚åˆ›å»ºå¤åˆç´¢å¼•åº”è¯¥å°†æœ€å¸¸ç”¨ï¼ˆé¢‘ç‡ï¼‰åšé™åˆ¶æ¡ä»¶çš„åˆ—æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä¸€æ¬¡é€’å‡ã€‚ç»„åˆç´¢å¼•æœ€å·¦å­—æ®µç”¨inæ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„ã€‚ç›¸å½“äºå»ºç«‹äº†col1,col1col2,col1col2col3ä¸‰ä¸ªç´¢å¼•ã€‚<h6 id="åˆ†åº“åˆ†è¡¨ä¼˜åŒ–"><a href="#åˆ†åº“åˆ†è¡¨ä¼˜åŒ–" class="headerlink" title="åˆ†åº“åˆ†è¡¨ä¼˜åŒ–"></a>åˆ†åº“åˆ†è¡¨ä¼˜åŒ–</h6></li><li><p>å‚ç›´æ‹†åˆ†ï¼šè§£å†³é—®é¢˜ï¼šè¡¨ä¸è¡¨ä¹‹é—´çš„ioç«äº‰ ä¸è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢é•¿å‡ºç°çš„å‹åŠ›</p><blockquote><p>æ–¹æ¡ˆï¼š æŠŠäº§å“è¡¨å’Œç”¨æˆ·è¡¨æ”¾åˆ°ä¸€ä¸ªserverä¸Š è®¢å•è¡¨å•ç‹¬æ”¾åˆ°ä¸€ä¸ªserverä¸Šã€‚</p></blockquote></li><li><p>æ°´å¹³æ‹†åˆ†ï¼š è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢é•¿å‡ºç°çš„å‹åŠ› ä¸è§£å†³é—®é¢˜ï¼šè¡¨ä¸è¡¨ä¹‹é—´çš„ioäº‰å¤º</p><blockquote><p>ç”¨æˆ·è¡¨é€šè¿‡æ€§åˆ«æ‹†åˆ†ä¸ºç”·ç”¨æˆ·è¡¨å’Œå¥³ç”¨æˆ·è¡¨ è®¢å•è¡¨é€šè¿‡å·²å®Œæˆå’Œå®Œæˆä¸­æ‹†åˆ†ä¸ºå·²å®Œæˆè®¢å•å’Œæœªå®Œæˆè®¢å• äº§å“è¡¨ æœªå®Œæˆè®¢å•æ”¾ä¸€ä¸ªserverä¸Š å·²å®Œæˆè®¢å•è¡¨ç›’ç”·ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š å¥³ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š(å¥³çš„çˆ±è´­ç‰© å“ˆå“ˆ)ï¼Œ<br><strong>==å¯ä»¥æŠŠå­¦æ ¡èŒƒå›´å†…çš„ç”¨æˆ·å•ç‹¬ç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨==ã€‚</strong></p></blockquote></li></ul><p>MySQLä¸éœ€è¦æ‰§è¡Œåé¢çš„å¤æ‚æ“ä½œï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œ==ä½†æ˜¯æŸ¥è¯¢ç¼“å­˜å¤±æ•ˆéå¸¸é¢‘ç¹ï¼Œåªè¦æœ‰å¯¹ä¸€ä¸ªè¡¨çš„æ›´æ–°ï¼Œè¿™ä¸ªè¡¨çš„æ‰€æœ‰æŸ¥è¯¢ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œå› æ­¤å¯èƒ½ä½ è´¹åŠ›åœ°æŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œè¿˜æ²¡ä½¿ç”¨ï¼Œå°±è¢«ä¸€ä¸ªæ›´æ–°å…¨éƒ¨æ¸…ç©ºäº†ã€‚é™¤éä½ çš„ä¸šåŠ¡æ˜¯ä¸€å¼ é™æ€è¡¨ï¼Œå¾ˆé•¿æ—¶é—´æ‰ä¼šæ›´æ–°ä¸€æ¬¡ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜==ã€‚(==æŠŠç®¡ç†å‘˜ä¿¡æ¯æ”¾è¿›å»==)</p><h2 id="7-ä¸‰èŒƒå¼"><a href="#7-ä¸‰èŒƒå¼" class="headerlink" title="7.ä¸‰èŒƒå¼"></a>7.ä¸‰èŒƒå¼</h2><h4 id="ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰"><a href="#ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰" class="headerlink" title="ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰"></a>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</h4><p>==å¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±æ€§çš„åŸŸéƒ½æ˜¯åŸå­çš„æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹==ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®ä½“ä¸­çš„æŸä¸ªå±æ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±æ€§ã€‚å¦‚æœå‡ºç°é‡å¤çš„å±æ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®ä½“ï¼Œæ–°çš„å®ä½“ç”±é‡å¤çš„å±æ€§æ„æˆï¼Œæ–°å®ä½“ä¸åŸå®ä½“ä¹‹é—´ä¸ºä¸€å¯¹å¤šå…³ç³»ã€‚åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ä¸­è¡¨çš„æ¯ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªå®ä¾‹çš„ä¿¡æ¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—ã€‚</p><h4 id="ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰"><a href="#ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰" class="headerlink" title="ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰"></a>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</h4><p>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€‚ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªå®ä¾‹æˆ–è¡Œå¿…é¡»å¯ä»¥è¢«æƒŸä¸€åœ°åŒºåˆ†ã€‚ä¸ºå®ç°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®ä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚è¿™ä¸ªæƒŸä¸€å±æ€§åˆ—è¢«ç§°ä¸ºä¸»å…³é”®å­—æˆ–ä¸»é”®ã€ä¸»ç ã€‚ï¼ˆ2NFï¼‰==è¦æ±‚å®ä½“çš„å±æ€§å®Œå…¨ä¾èµ–äºä¸»å…³é”®å­—ã€‚æ‰€è°“å®Œå…¨ä¾èµ–æ˜¯æŒ‡ä¸èƒ½å­˜åœ¨ä»…ä¾èµ–ä¸»å…³é”®å­—ä¸€éƒ¨åˆ†çš„å±æ€§==ï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§å’Œä¸»å…³é”®å­—çš„è¿™ä¸€éƒ¨åˆ†åº”è¯¥åˆ†ç¦»å‡ºæ¥å½¢æˆä¸€ä¸ªæ–°çš„å®ä½“ï¼Œæ–°å®ä½“ä¸åŸå®ä½“ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ä¸ºå®ç°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®ä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬äºŒèŒƒå¼å°±æ˜¯éä¸»å±æ€§ééƒ¨åˆ†ä¾èµ–äºä¸»å…³é”®å­—ã€‚</p><h4 id="ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰"><a href="#ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰" class="headerlink" title="ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰"></a>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</h4><ul><li>æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éä¸»å…³é”®å­—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå­˜åœ¨ä¸€ä¸ªéƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªéƒ¨é—¨æœ‰éƒ¨é—¨ç¼–å·ï¼ˆdept_idï¼‰ã€éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨å‘˜å·¥ä¿¡æ¯è¡¨ä¸­åˆ—å‡ºéƒ¨é—¨ç¼–å·åå°±ä¸èƒ½å†å°†éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¸éƒ¨é—¨æœ‰å…³çš„ä¿¡æ¯å†åŠ å…¥å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ã€‚å¦‚æœä¸å­˜åœ¨éƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œåˆ™æ ¹æ®ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ä¹Ÿåº”è¯¥æ„å»ºå®ƒï¼Œå¦åˆ™å°±ä¼šæœ‰å¤§é‡çš„æ•°æ®å†—ä½™ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼å°±æ˜¯å±æ€§ä¸ä¾èµ–äºå…¶å®ƒéä¸»å±æ€§ã€‚ï¼ˆæˆ‘çš„ç†è§£æ˜¯æ¶ˆé™¤å†—ä½™ï¼‰</li><li>ä¼˜ç‚¹:å¯ä»¥å°½é‡å¾—å‡å°‘æ•°æ®å†—ä½™ï¼Œä½¿å¾—æ›´æ–°å¿«ï¼Œä½“ç§¯å°</li><li>ç¼ºç‚¹:å¯¹äºæŸ¥è¯¢éœ€è¦å¤šä¸ªè¡¨è¿›è¡Œå…³è”ï¼Œå‡å°‘å†™å¾—æ•ˆç‡å¢åŠ è¯»å¾—æ•ˆç‡ï¼Œæ›´éš¾è¿›è¡Œç´¢å¼•ä¼˜åŒ–</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> MySQL, DataBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SortAlgorithms</title>
      <link href="/2020/01/13/SortAlgorithm/"/>
      <url>/2020/01/13/SortAlgorithm/</url>
      
        <content type="html"><![CDATA[<h1 id="SortAlgorithms"><a href="#SortAlgorithms" class="headerlink" title="SortAlgorithms"></a>SortAlgorithms</h1><blockquote><p>åŸæ–‡é“¾æ¥ï¼š <a href="https://itimetraveler.github.io/2017/07/18/%E5%85%AB%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%E4%B8%8Ejava%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener"><strong>å…«å¤§æ’åºç®—æ³•æ€»ç»“ä¸javaå®ç°</strong> - iTimeTraveler</a></p></blockquote><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/big-o.png" alt></p><ul><li><a href="#ä¸€ç›´æ¥æ’å…¥æ’åºinsertion-sort">ç›´æ¥æ’å…¥æ’åº</a></li><li><a href="#äºŒå¸Œå°”æ’åºshell-sort">å¸Œå°”æ’åº</a></li><li><a href="#ä¸‰é€‰æ‹©æ’åºselection-sort">ç®€å•é€‰æ‹©æ’åº</a></li><li><a href="#å››å †æ’åºheap-sort">å †æ’åº</a></li><li><a href="#äº”å†’æ³¡æ’åºbubble-sort">å†’æ³¡æ’åº</a></li><li><a href="#å…­å¿«é€Ÿæ’åºquick-sort">å¿«é€Ÿæ’åº</a></li><li><a href="#ä¸ƒå½’å¹¶æ’åºmerging-sort">å½’å¹¶æ’åº</a></li><li><a href="#å…«åŸºæ•°æ’åºradix-sort">åŸºæ•°æ’åº</a></li></ul><a id="more"></a><p>å…¶ä¸­æˆ‘ä»¬è®¨è®ºçš„è¿™å…«å¤§æ’åºç®—æ³•çš„å®ç°å¯ä»¥å‚è€ƒ<a href="https://github.com/iTimeTraveler/SortAlgorithms" target="_blank" rel="noopener">æˆ‘çš„Githubï¼š<strong>SortAlgorithms</strong></a>ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ’åºæµ‹è¯•æ¨¡å—<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/src/main/java/com/example/Test.java" target="_blank" rel="noopener">[Test.java]</a>å’Œæ’åºç®—æ³•å¯¹æ¯”æ¨¡å—<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/src/main/java/com/example/Bench.java" target="_blank" rel="noopener">[Bench.java]</a>ï¼Œå¤§å®¶å¯ä»¥è¯•è¿è¡Œã€‚</p><p>å®ƒä»¬éƒ½å±äºå†…éƒ¨æ’åºï¼Œä¹Ÿå°±æ˜¯åªè€ƒè™‘æ•°æ®é‡è¾ƒå°ä»…éœ€è¦ä½¿ç”¨å†…å­˜çš„æ’åºç®—æ³•ï¼Œä»–ä»¬ä¹‹é—´å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/1156494-ab4cecff133d87b3.png" alt></p><h3 id="ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>ä¸€ã€ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h3><hr><p>æ’å…¥æ’åºçš„è®¾è®¡åˆè¡·æ˜¯<strong>å¾€æœ‰åºçš„æ•°ç»„ä¸­å¿«é€Ÿæ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ </strong>ã€‚å®ƒçš„ç®—æ³•æ€æƒ³æ˜¯ï¼šæŠŠè¦æ’åºçš„æ•°ç»„åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†, ä¸€éƒ¨åˆ†æ˜¯æ•°ç»„çš„å…¨éƒ¨å…ƒç´ (é™¤å»å¾…æ’å…¥çš„å…ƒç´ ), å¦ä¸€éƒ¨åˆ†æ˜¯å¾…æ’å…¥çš„å…ƒç´ ; å…ˆå°†ç¬¬ä¸€éƒ¨åˆ†æ’åºå®Œæˆ, ç„¶åå†æ’å…¥è¿™ä¸ªå…ƒç´ . å…¶ä¸­ç¬¬ä¸€éƒ¨åˆ†çš„æ’åºä¹Ÿæ˜¯é€šè¿‡å†æ¬¡æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥è¿›è¡Œçš„.</p><p>æ’å…¥æ’åºç”±äºæ“ä½œä¸å°½ç›¸åŒ, å¯åˆ†ä¸º <code>ç›´æ¥æ’å…¥æ’åº</code> , <code>æŠ˜åŠæ’å…¥æ’åº</code>(åˆç§°äºŒåˆ†æ’å…¥æ’åº), <code>é“¾è¡¨æ’å…¥æ’åº</code> , <code>å¸Œå°”æ’åº</code> ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›´æ¥æ’å…¥æ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³"><a href="#1ã€åŸºæœ¬æ€æƒ³" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>ç›´æ¥æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡è·Ÿå‰é¢å·²ç»æ’å¥½çš„å…ƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚æœé€‰æ‹©çš„å…ƒç´ æ¯”å·²æ’åºçš„å…ƒç´ å°ï¼Œåˆ™äº¤æ¢ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ éƒ½æ¯”è¾ƒè¿‡ä¸ºæ­¢ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Insertion-sort-example-300px.gif" alt="ä½¿ç”¨æ’å…¥æ’åºä¸ºä¸€åˆ—æ•°å­—è¿›è¡Œæ’åºçš„è¿‡ç¨‹"></p><h4 id="2ã€ç®—æ³•æè¿°"><a href="#2ã€ç®—æ³•æè¿°" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨in-placeåœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº<br><br>â‘¡. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ<br><br>â‘¢. å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®<br><br>â‘£. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®<br><br>â‘¤. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å<br><br>â‘¥. é‡å¤æ­¥éª¤â‘¡~â‘¤<br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/insert-sort.gif" alt="ç›´æ¥æ’å…¥æ’åºæ¼”ç¤º"></p><p>ç®—æ³•å®ç°ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨æ¯æ¬¡æ¯”è¾ƒæ“ä½œå‘ç°å–å‡ºæ¥çš„æ–°å…ƒç´ å°äºç­‰äºå·²æ’åºçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥å°†å·²æ’åºçš„å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼Œç„¶åå°†å–å‡ºæ¥çš„æ–°å…ƒç´ æ’å…¥è¯¥ä½ç½®ï¼ˆå³ç›¸é‚»ä½ç½®å¯¹è°ƒï¼‰ï¼Œæ¥ç€å†ä¸å‰é¢çš„å·²æ’åºçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ ·åšç¼ºç‚¹æ˜¯äº¤æ¢æ“ä½œä»£ä»·æ¯”è¾ƒå¤§ã€‚å¦ä¸€ç§åšæ³•æ˜¯ï¼šå°†æ–°å…ƒç´ å–å‡ºï¼ˆæŒ–å‘ï¼‰ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ä¸å·²æ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœå·²æ’åºçš„å…ƒç´ å¤§äºå–å‡ºçš„æ–°å…ƒç´ ï¼Œé‚£ä¹ˆå°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå¡«å‘ï¼‰ï¼Œæ¥ç€å†ä¸å‰é¢çš„å·²æ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼Œè¿™æ—¶å†å°†æ–°å…ƒç´ æ’å…¥è¿›å»ã€‚å°±åƒåŸºæœ¬æ€æƒ³ä¸­çš„åŠ¨å›¾æ¼”ç¤ºçš„é‚£æ ·ã€‚</p><p>å¦‚æœ<em>æ¯”è¾ƒæ“ä½œ</em>çš„ä»£ä»·æ¯”<em>äº¤æ¢æ“ä½œ</em>å¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨<a href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾æ³•</a>æ¥å‡å°‘<em>æ¯”è¾ƒæ“ä½œ</em>çš„æ•°ç›®ã€‚å¯ä»¥è®¤ä¸ºæ˜¯<strong>æ’å…¥æ’åº</strong>çš„ä¸€ä¸ªå˜ç§ï¼Œç§°ä¸º<a href="https://zh.wikipedia.org/w/index.php?title=%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener">äºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åº</a>ã€‚</p><h4 id="3ã€ä»£ç å®ç°"><a href="#3ã€ä»£ç å®ç°" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</span></span><br><span class="line"><span class="comment"> * 2. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</span></span><br><span class="line"><span class="comment"> * 3. å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</span></span><br><span class="line"><span class="comment"> * 4. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="comment"> * 5. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</span></span><br><span class="line"><span class="comment"> * 6. é‡å¤æ­¥éª¤2~5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++ ) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[i];    <span class="comment">// å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</span></span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = i; j &gt;= <span class="number">0</span>; j-- ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( j &gt; <span class="number">0</span> &amp;&amp; arr[j-<span class="number">1</span>] &gt; temp ) &#123;</span><br><span class="line">                arr[j] = arr[j-<span class="number">1</span>];    <span class="comment">// å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºå–å‡ºçš„å…ƒç´ tempï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</span></span><br><span class="line">                System.out.println(<span class="string">"Temping:  "</span> + Arrays.toString(arr));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</span></span><br><span class="line">                arr[j] = temp;</span><br><span class="line">                System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤æ¢æ¬¡æ•°è¾ƒå¤šçš„å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr.length-<span class="number">1</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j=i+<span class="number">1</span>; j&gt;<span class="number">0</span>; j-- ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( arr[j-<span class="number">1</span>] &lt;= arr[j] )</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[j];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">            arr[j] = arr[j-<span class="number">1</span>];</span><br><span class="line">            arr[j-<span class="number">1</span>] = temp;</span><br><span class="line">            System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥æ’å…¥æ’åºå¤æ‚åº¦å¦‚ä¸‹ï¼š</p><ul><li>æœ€å¥½æƒ…å†µä¸‹ï¼Œæ’åºå‰å¯¹è±¡å·²ç»æŒ‰ç…§è¦æ±‚çš„æœ‰åºã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnâˆ’1ï¼›ç§»åŠ¨æ¬¡æ•°(RMN)ä¸º0ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</li><li>æœ€åæƒ…å†µä¸‹ï¼Œæ’åºå‰å¯¹è±¡ä¸ºè¦æ±‚çš„é¡ºåºçš„ååºã€‚ç¬¬iè¶Ÿæ—¶ç¬¬iä¸ªå¯¹è±¡å¿…é¡»ä¸å‰é¢iä¸ªå¯¹è±¡éƒ½åšæ’åºç æ¯”è¾ƒï¼Œå¹¶ä¸”æ¯åš1æ¬¡æ¯”è¾ƒå°±è¦åš1æ¬¡æ•°æ®ç§»åŠ¨ï¼ˆä»ä¸Šé¢ç»™å‡ºçš„ä»£ç ä¸­çœ‹å‡ºï¼‰ã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnÂ²/2 ; ç§»åŠ¨æ¬¡æ•°(RMN)ä¸ºï¼šnÂ²/2ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚</li><li>å¦‚æœæ’åºè®°å½•æ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆæ ¹æ®æ¦‚ç‡ç›¸åŒçš„åŸåˆ™ï¼Œåœ¨å¹³å‡æƒ…å†µä¸‹çš„æ’åºç æ¯”è¾ƒæ¬¡æ•°å’Œå¯¹è±¡ç§»åŠ¨æ¬¡æ•°çº¦ä¸ºnÂ²/2ï¼Œå› æ­¤ï¼Œ<strong>ç›´æ¥æ’å…¥æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦</strong>ä¸ºO(nÂ²)ã€‚</li></ul><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>Tips: ç”±äºç›´æ¥æ’å…¥æ’åºæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ çš„ä½ï¼Œ å¹¶ä¸ä¼šæ”¹å˜å€¼ç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„æ’åºï¼Œ å› æ­¤å®ƒæ˜¯ä¸€ç§ç¨³å®šæ’åºã€‚</p><h3 id="äºŒã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰"><a href="#äºŒã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰" class="headerlink" title="äºŒã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰"></a>äºŒã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</h3><hr><blockquote><p>ç¬¬ä¸€ä¸ªçªç ´O(n^2)çš„æ’åºç®—æ³•ï¼›æ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆï¼›å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ã€‚</p></blockquote><p>å¸Œå°”æ’åºï¼Œä¹Ÿç§°<strong>é€’å‡å¢é‡æ’åºç®—æ³•</strong>ï¼Œ1959å¹´Shellå‘æ˜ã€‚æ˜¯æ’å…¥æ’åºçš„ä¸€ç§é«˜é€Ÿè€Œç¨³å®šçš„æ”¹è¿›ç‰ˆæœ¬ã€‚</p><p>å¸Œå°”æ’åºæ˜¯å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-1"><a href="#1ã€åŸºæœ¬æ€æƒ³-1" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/shell-sort.jpg" alt></p><p>å°†å¾…æ’åºæ•°ç»„æŒ‰ç…§æ­¥é•¿gapè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå°†æ¯ç»„çš„å…ƒç´ åˆ©ç”¨ç›´æ¥æ’å…¥æ’åºçš„æ–¹æ³•è¿›è¡Œæ’åºï¼›æ¯æ¬¡å†å°†gapæŠ˜åŠå‡å°ï¼Œå¾ªç¯ä¸Šè¿°æ“ä½œï¼›å½“gap=1æ—¶ï¼Œåˆ©ç”¨ç›´æ¥æ’å…¥ï¼Œå®Œæˆæ’åºã€‚</p><p>å¯ä»¥çœ‹åˆ°æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´æœ€ç®€å•çš„æ­¥é•¿å–å€¼æ˜¯<strong>åˆæ¬¡å–æ•°ç»„é•¿åº¦çš„ä¸€åŠ</strong>ä¸ºå¢é‡ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ã€‚æ›´å¥½çš„æ­¥é•¿åºåˆ—å–å€¼å¯ä»¥å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F#.E6.AD.A5.E9.95.BF.E5.BA.8F.E5.88.97" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a>ã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-1"><a href="#2ã€ç®—æ³•æè¿°-1" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆ<strong>ä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1</strong>ï¼‰<br><br>â‘¡. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›<br><br>â‘¢. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-1"><a href="#3ã€ä»£ç å®ç°-1" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®ç°ï¼Œå¯ä»¥çœ‹åˆ°å®ç°å¾ˆå¹¼ç¨šï¼Œä½†æ˜¯å¥½å¤„æ˜¯ç†è§£èµ·æ¥å¾ˆç®€å•ã€‚å› ä¸ºæ²¡æœ‰ç»è¿‡ä»»ä½•çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¸å»ºè®®å¤§å®¶ç›´æ¥ä½¿ç”¨ã€‚å»ºè®®å¯¹æ¯”ä¸‹æ–¹çš„ç»´åŸºç™¾ç§‘å®˜æ–¹å®ç°ä»£ç ï¼Œç‰¹åˆ«æ˜¯æ­¥é•¿å–å€¼ç­–ç•¥éƒ¨åˆ†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸Œå°”æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ï¼‰</span></span><br><span class="line"><span class="comment"> * 2. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›</span></span><br><span class="line"><span class="comment"> * 3. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap = arr.length / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>) &#123;      <span class="comment">//ä¸æ–­ç¼©å°gapï¼Œç›´åˆ°1ä¸ºæ­¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; (j+gap) &lt; arr.length; j++)&#123;     <span class="comment">//ä½¿ç”¨å½“å‰gapè¿›è¡Œç»„å†…æ’å…¥æ’åº</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; (k+gap)&lt; arr.length; k += gap)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[k] &gt; arr[k+gap]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = arr[k+gap];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">                    arr[k+gap] = arr[k];</span><br><span class="line">                    arr[k] = temp;</span><br><span class="line">                    System.out.println(<span class="string">"    Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç»´åŸºç™¾ç§‘å®˜æ–¹å®ç°ï¼Œå¤§å®¶æ³¨æ„gapæ­¥é•¿å–å€¼éƒ¨åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸Œå°”æ’åºï¼ˆWikiå®˜æ–¹ç‰ˆï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆæ³¨æ„æ­¤ç®—æ³•çš„gapå–å€¼ï¼‰</span></span><br><span class="line"><span class="comment"> * 2. æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›</span></span><br><span class="line"><span class="comment"> * 3. æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shell_sort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap = <span class="number">1</span>, i, j, len = arr.length;</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">while</span> (gap &lt; len / <span class="number">3</span>)</span><br><span class="line">        gap = gap * <span class="number">3</span> + <span class="number">1</span>;      <span class="comment">// &lt;O(n^(3/2)) by Knuth,1973&gt;: 1, 4, 13, 40, 121, ...</span></span><br><span class="line">    <span class="keyword">for</span> (; gap &gt; <span class="number">0</span>; gap /= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</span><br><span class="line">            temp = arr[i];</span><br><span class="line">            <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)</span><br><span class="line">                arr[j + gap] = arr[j];</span><br><span class="line">            arr[j + gap] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å¸Œå°”æ’åºå¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlog2 n)</td><td>O(nlog2 n)</td><td>O(nlog2 n)</td><td>O(1)</td></tr></tbody></table><h3 id="ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>ä¸‰ã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h3><hr><blockquote><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Selection-Sort-Animation.gif" alt="é€‰æ‹©æ’åºçš„ç¤ºä¾‹åŠ¨ç”»ã€‚çº¢è‰²è¡¨ç¤ºå½“å‰æœ€å°å€¼ï¼Œé»„è‰²è¡¨ç¤ºå·²æ’åºåºåˆ—ï¼Œè“è‰²è¡¨ç¤ºå½“å‰ä½ç½®ã€‚"></p></blockquote><p>ä»ç®—æ³•é€»è¾‘ä¸Šçœ‹ï¼Œé€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œåœ¨ç®€å•é€‰æ‹©æ’åºè¿‡ç¨‹ä¸­ï¼Œæ‰€éœ€ç§»åŠ¨è®°å½•çš„æ¬¡æ•°æ¯”è¾ƒå°‘ã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-2"><a href="#1ã€åŸºæœ¬æ€æƒ³-2" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>é€‰æ‹©æ’åºçš„åŸºæœ¬æ€æƒ³ï¼šæ¯”è¾ƒ + äº¤æ¢ã€‚</p><p>åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æœªæ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-2"><a href="#2ã€ç®—æ³•æè¿°-2" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . ä»å¾…æ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼›<br><br>â‘¡. å¦‚æœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼›<br><br>â‘¢. ä»ä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æ’åºç»“æŸã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-2"><a href="#3ã€ä»£ç å®ç°-2" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>é€‰æ‹©æ’åºæ¯”è¾ƒç®€å•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®ç°ï¼Œè·Ÿå®˜æ–¹ç‰ˆå·®ä¸å¤šï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥å‚è€ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. ä»å¾…æ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * 2. å¦‚æœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼›</span></span><br><span class="line"><span class="comment"> * 3. ä»ä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æ’åºç»“æŸã€‚</span></span><br><span class="line"><span class="comment"> *    ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length-<span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; arr.length; j++)&#123;    <span class="comment">//é€‰å‡ºä¹‹åå¾…æ’åºä¸­å€¼æœ€å°çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &lt; arr[min])&#123;</span><br><span class="line">                min = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(min != i)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[min];      <span class="comment">//äº¤æ¢æ“ä½œ</span></span><br><span class="line">            arr[min] = arr[i];</span><br><span class="line">            arr[i] = temp;</span><br><span class="line">            System.out.println(<span class="string">"Sorting:  "</span> + Arrays.toString(arr));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯é€‰æ‹©æ’åºå¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>é€‰æ‹©æ’åºçš„ç®€å•å’Œç›´è§‚åå‰¯å…¶å®ï¼Œè¿™ä¹Ÿé€ å°±äº†å®ƒâ€å‡ºäº†åçš„æ…¢æ€§å­â€ï¼Œæ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œå“ªæ€•åŸæ•°ç»„å·²æ’åºå®Œæˆï¼Œå®ƒä¹Ÿå°†èŠ±è´¹å°†è¿‘nÂ²/2æ¬¡éå†æ¥ç¡®è®¤ä¸€éã€‚å³ä¾¿æ˜¯è¿™æ ·ï¼Œå®ƒçš„æ’åºç»“æœä¹Ÿè¿˜æ˜¯ä¸ç¨³å®šçš„ã€‚ å”¯ä¸€å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œå®ƒå¹¶ä¸è€—è´¹é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p><h3 id="å››ã€å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#å››ã€å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="å››ã€å †æ’åºï¼ˆHeap Sortï¼‰"></a>å››ã€å †æ’åºï¼ˆHeap Sortï¼‰</h3><hr><blockquote><p>1991å¹´çš„è®¡ç®—æœºå…ˆé©±å¥–è·å¾—è€…ã€æ–¯å¦ç¦å¤§å­¦è®¡ç®—æœºç§‘å­¦ç³»æ•™æˆç½—ä¼¯ç‰¹Â·å¼—æ´›ä¼Šå¾·(Robert Wï¼Floyd) å’Œå¨å»‰å§†æ–¯(Jï¼Williams) åœ¨1964å¹´å…±åŒå‘æ˜äº†è‘—åçš„å †æ’åºç®—æ³•(Heap Sort).</p></blockquote><p>å †çš„å®šä¹‰å¦‚ä¸‹ï¼šnä¸ªå…ƒç´ çš„åºåˆ—{k1,k2,Â·Â·Â·,kn}ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä¸‹å…³ç³»æ—¶ï¼Œç§°ä¹‹ä¸ºå †ã€‚</p><p>ki &lt;= k(2i)  ä¸”   ki &lt;= k(2i+1) <br></p><p>æˆ–ï¼š   ki &gt;= k(2i)  ä¸”  ki &gt;=  k(2i+1) <br></p><p>æŠŠæ­¤åºåˆ—å¯¹åº”çš„äºŒç»´æ•°ç»„çœ‹æˆä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚é‚£ä¹ˆå †çš„å«ä¹‰å°±æ˜¯ï¼š<strong>å®Œå…¨äºŒå‰æ ‘ä¸­ä»»ä½•ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„å€¼å‡ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶å·¦ï¼Œå³å­©å­èŠ‚ç‚¹çš„å€¼ã€‚</strong>ç”±ä¸Šè¿°æ€§è´¨å¯çŸ¥å¤§é¡¶å †çš„å †é¡¶çš„å…³é”®å­—è‚¯å®šæ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å¤§çš„ï¼Œå°é¡¶å †çš„å †é¡¶çš„å…³é”®å­—æ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å°çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä½¿ç”¨å¤§é¡¶å †è¿›è¡Œå‡åºæ’åº, ä½¿ç”¨å°é¡¶å †è¿›è¡Œé™åºæ’åºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-3"><a href="#1ã€åŸºæœ¬æ€æƒ³-3" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>æ­¤å¤„ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œå †æ’åºçš„è¿‡ç¨‹å°±æ˜¯å°†å¾…æ’åºçš„åºåˆ—æ„é€ æˆä¸€ä¸ªå †ï¼Œé€‰å‡ºå †ä¸­æœ€å¤§çš„ç§»èµ°ï¼Œå†æŠŠå‰©ä½™çš„å…ƒç´ è°ƒæ•´æˆå †ï¼Œæ‰¾å‡ºæœ€å¤§çš„å†ç§»èµ°ï¼Œé‡å¤ç›´è‡³æœ‰åºã€‚</p><h4 id="2ã€ç®—æ³•æè¿°-3"><a href="#2ã€ç®—æ³•æè¿°-3" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>â‘ . å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº.<br><br>â‘¡. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..n-1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..n-1].keys &lt;= K[n].key <br><br>â‘¢. äº¤æ¢K1 å’Œ Kn å, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..n-1]è°ƒæ•´ä¸ºå †. ç„¶åé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢. <br></p><p>åŠ¨å›¾æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/heap_sort_gif.gif" alt="å †æ’åºè¿‡ç¨‹"></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Sorting_heapsort_anim.gif" alt="å †æ’åºç®—æ³•çš„æ¼”ç¤ºã€‚é¦–å…ˆï¼Œå°†å…ƒç´ è¿›è¡Œé‡æ’ï¼Œä»¥åŒ¹é…å †çš„æ¡ä»¶ã€‚å›¾ä¸­æ’åºè¿‡ç¨‹ä¹‹å‰ç®€å•çš„ç»˜å‡ºäº†å †æ ‘çš„ç»“æ„ã€‚"></p><h4 id="3ã€ä»£ç å®ç°-3"><a href="#3ã€ä»£ç å®ç°-3" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ä»ç®—æ³•æè¿°æ¥çœ‹ï¼Œå †æ’åºéœ€è¦ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸€æ˜¯å»ºç«‹å †ï¼ŒäºŒæ˜¯å †é¡¶ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚æ‰€ä»¥å †æ’åºæœ‰ä¸¤ä¸ªå‡½æ•°ç»„æˆã€‚ä¸€æ˜¯å»ºå †å‡½æ•°ï¼ŒäºŒæ˜¯åå¤è°ƒç”¨å»ºå †å‡½æ•°ä»¥é€‰æ‹©å‡ºå‰©ä½™æœªæ’å…ƒç´ ä¸­æœ€å¤§çš„æ•°æ¥å®ç°æ’åºçš„å‡½æ•°ã€‚</p><p>æ€»ç»“èµ·æ¥å°±æ˜¯å®šä¹‰äº†ä»¥ä¸‹å‡ ç§æ“ä½œï¼š</p><ul><li>æœ€å¤§å †è°ƒæ•´ï¼ˆMax_Heapifyï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹</li><li>åˆ›å»ºæœ€å¤§å †ï¼ˆBuild_Max_Heapï¼‰ï¼šå°†å †æ‰€æœ‰æ•°æ®é‡æ–°æ’åº</li><li>å †æ’åºï¼ˆHeapSortï¼‰ï¼šç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—</li></ul><p>å¯¹äºå †èŠ‚ç‚¹çš„è®¿é—®ï¼š</p><ul><li>çˆ¶èŠ‚ç‚¹içš„å·¦å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>(2*i+1)</code>;</li><li>çˆ¶èŠ‚ç‚¹içš„å³å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>(2*i+2)</code>;</li><li>å­èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®ï¼š<code>floor((i-1)/2)</code>;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å †æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1. å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº.</span></span><br><span class="line"><span class="comment"> * 2. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..nâˆ’1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..nâˆ’1].keysâ©½K[n].key</span></span><br><span class="line"><span class="comment"> * 3. äº¤æ¢K1 å’Œ Kn å, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..nâˆ’1]è°ƒæ•´ä¸ºå †. ç„¶åé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = arr.length; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">        max_heapify(arr, i);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> temp = arr[<span class="number">0</span>];      <span class="comment">//å †é¡¶å…ƒç´ (ç¬¬ä¸€ä¸ªå…ƒç´ )ä¸Knäº¤æ¢</span></span><br><span class="line">        arr[<span class="number">0</span>] = arr[i-<span class="number">1</span>];</span><br><span class="line">        arr[i-<span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">max_heapify</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> limit)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span> || arr.length &lt; limit) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> parentIdx = limit / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(; parentIdx &gt;= <span class="number">0</span>; parentIdx--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(parentIdx * <span class="number">2</span> &gt;= limit)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> left = parentIdx * <span class="number">2</span>;       <span class="comment">//å·¦å­èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> right = (left + <span class="number">1</span>) &gt;= limit ? left : (left + <span class="number">1</span>);    <span class="comment">//å³å­èŠ‚ç‚¹ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å³èŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºå·¦èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxChildId = arr[left] &gt;= arr[right] ? left : right;</span><br><span class="line">        <span class="keyword">if</span>(arr[maxChildId] &gt; arr[parentIdx])&#123;   <span class="comment">//äº¤æ¢çˆ¶èŠ‚ç‚¹ä¸å·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">int</span> temp = arr[parentIdx];</span><br><span class="line">            arr[parentIdx] = arr[maxChildId];</span><br><span class="line">            arr[maxChildId] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Max_Heapify: "</span> + Arrays.toString(arr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨:</strong> x&gt;&gt;1 æ˜¯ä½è¿ç®—ä¸­çš„å³ç§»è¿ç®—, è¡¨ç¤ºå³ç§»ä¸€ä½, ç­‰åŒäºxé™¤ä»¥2å†å–æ•´, å³ x&gt;&gt;1 == Math.floor(x/2) .</p></blockquote><p>ä»¥ä¸Š,<br>â‘ . å»ºç«‹å †çš„è¿‡ç¨‹, ä»length/2 ä¸€ç›´å¤„ç†åˆ°0, æ—¶é—´å¤æ‚åº¦ä¸ºO(n);<br>â‘¡. è°ƒæ•´å †çš„è¿‡ç¨‹æ˜¯æ²¿ç€å †çš„çˆ¶å­èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´, æ‰§è¡Œæ¬¡æ•°ä¸ºå †çš„æ·±åº¦, æ—¶é—´å¤æ‚åº¦ä¸ºO(lgn);<br>â‘¢. å †æ’åºçš„è¿‡ç¨‹ç”±næ¬¡ç¬¬â‘¡æ­¥å®Œæˆ, æ—¶é—´å¤æ‚åº¦ä¸ºO(nlgn).</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlog2n)</td><td>O(nlog2n)</td><td>O(nlog2n)</td><td>O(1)</td></tr></tbody></table><p>Tips: <strong>ç”±äºå †æ’åºä¸­åˆå§‹åŒ–å †çš„è¿‡ç¨‹æ¯”è¾ƒæ¬¡æ•°è¾ƒå¤š, å› æ­¤å®ƒä¸å¤ªé€‚ç”¨äºå°åºåˆ—.</strong> åŒæ—¶ç”±äºå¤šæ¬¡ä»»æ„ä¸‹æ ‡ç›¸äº’äº¤æ¢ä½ç½®, ç›¸åŒå…ƒç´ ä¹‹é—´åŸæœ¬ç›¸å¯¹çš„é¡ºåºè¢«ç ´åäº†, å› æ­¤, å®ƒæ˜¯ä¸ç¨³å®šçš„æ’åº.</p><h3 id="äº”ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#äº”ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="äº”ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>äº”ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h3><hr><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/bubble-sort02.gif" alt="å†’æ³¡æ’åºçš„æ€æƒ³"></p><blockquote><p>æˆ‘æƒ³å¯¹äºå®ƒæ¯ä¸ªå­¦è¿‡Cè¯­è¨€çš„éƒ½ä¼šäº†è§£ï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººæ¥è§¦çš„ç¬¬ä¸€ä¸ªæ’åºç®—æ³•ã€‚</p></blockquote><h4 id="1ã€åŸºæœ¬æ€æƒ³-4"><a href="#1ã€åŸºæœ¬æ€æƒ³-4" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/bubble-sort.gif" alt="å†’æ³¡æ’åºæ¼”ç¤º"></p><h4 id="2ã€ç®—æ³•æè¿°-4"><a href="#2ã€ç®—æ³•æè¿°-4" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>å†’æ³¡æ’åºç®—æ³•çš„è¿ä½œå¦‚ä¸‹ï¼š</p><p>â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚<br><br>â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚<br><br>â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚<br><br>â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚<br></p><h4 id="3ã€ä»£ç å®ç°-4"><a href="#3ã€ä»£ç å®ç°-4" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>å†’æ³¡æ’åºéœ€è¦ä¸¤ä¸ªåµŒå¥—çš„å¾ªç¯. å…¶ä¸­, <strong>å¤–å±‚å¾ªç¯</strong>ç§»åŠ¨æ¸¸æ ‡; <strong>å†…å±‚å¾ªç¯</strong>éå†æ¸¸æ ‡åŠä¹‹å(æˆ–ä¹‹å‰)çš„å…ƒç´ , é€šè¿‡ä¸¤ä¸¤äº¤æ¢çš„æ–¹å¼, æ¯æ¬¡åªç¡®ä¿è¯¥å†…å¾ªç¯ç»“æŸä½ç½®æ’åºæ­£ç¡®, ç„¶åå†…å±‚å¾ªç¯å‘¨æœŸç»“æŸ, äº¤ç”±å¤–å±‚å¾ªç¯å¾€å(æˆ–å‰)ç§»åŠ¨æ¸¸æ ‡, éšå³å¼€å§‹ä¸‹ä¸€è½®å†…å±‚å¾ªç¯, ä»¥æ­¤ç±»æ¨, ç›´è‡³å¾ªç¯ç»“æŸ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</span></span><br><span class="line"><span class="comment"> * â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr  å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;      <span class="comment">//å¤–å±‚å¾ªç¯ç§»åŠ¨æ¸¸æ ‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)&#123;    <span class="comment">//å†…å±‚å¾ªç¯éå†æ¸¸æ ‡åŠä¹‹å(æˆ–ä¹‹å‰)çš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">int</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">                System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å†’æ³¡æ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td></tr></tbody></table><p>å†’æ³¡æ’åºæ˜¯æœ€å®¹æ˜“å®ç°çš„æ’åº, æœ€åçš„æƒ…å†µæ˜¯æ¯æ¬¡éƒ½éœ€è¦äº¤æ¢, å…±éœ€éå†å¹¶äº¤æ¢å°†è¿‘nÂ²/2æ¬¡, æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). æœ€ä½³çš„æƒ…å†µæ˜¯å†…å¾ªç¯éå†ä¸€æ¬¡åå‘ç°æ’åºæ˜¯å¯¹çš„, å› æ­¤é€€å‡ºå¾ªç¯, æ—¶é—´å¤æ‚åº¦ä¸ºO(n). å¹³å‡æ¥è®², æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). ç”±äºå†’æ³¡æ’åºä¸­åªæœ‰ç¼“å­˜çš„tempå˜é‡éœ€è¦å†…å­˜ç©ºé—´, å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸é‡O(1).</p><p>Tips: ç”±äºå†’æ³¡æ’åºåªåœ¨ç›¸é‚»å…ƒç´ å¤§å°ä¸ç¬¦åˆè¦æ±‚æ—¶æ‰è°ƒæ¢ä»–ä»¬çš„ä½ç½®, å®ƒå¹¶ä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåº, å› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•.</p><h3 id="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a>å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h3><hr><p>å¿«é€Ÿæ’åºï¼ˆQuicksortï¼‰æ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œå€Ÿç”¨äº†åˆ†æ²»çš„æ€æƒ³ï¼Œç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-5"><a href="#1ã€åŸºæœ¬æ€æƒ³-5" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å¿«é€Ÿæ’åºçš„åŸºæœ¬æ€æƒ³ï¼š<strong>æŒ–å‘å¡«æ•°+åˆ†æ²»æ³•</strong>ã€‚</p><p>é¦–å…ˆé€‰ä¸€ä¸ªè½´å€¼(pivotï¼Œä¹Ÿæœ‰å«åŸºå‡†çš„)ï¼Œé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/Sorting_quicksort_anim.gif" alt="ä½¿ç”¨å¿«é€Ÿæ’åºæ³•å¯¹ä¸€åˆ—æ•°å­—è¿›è¡Œæ’åºçš„è¿‡ç¨‹"></p><h4 id="2ã€ç®—æ³•æè¿°-5"><a href="#2ã€ç®—æ³•æè¿°-5" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚æ­¥éª¤ä¸ºï¼š</p><p>â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚<br><br>â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚<br><br>â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚<br></p><p>é€’å½’åˆ°æœ€åº•éƒ¨æ—¶ï¼Œæ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯å·²ç»æ’åºå¥½äº†ã€‚è¿™ä¸ªç®—æ³•ä¸€å®šä¼šç»“æŸï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ï¼ˆiterationï¼‰ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åçš„ä½ç½®å»ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/quick-sort09.gif" alt="å¿«é€Ÿæ’åºæ¼”ç¤º"></p><h4 id="3ã€ä»£ç å®ç°-5"><a href="#3ã€ä»£ç å®ç°-5" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . <code>i = L; j = R;</code> å°†åŸºå‡†æ•°æŒ–å‡ºå½¢æˆç¬¬ä¸€ä¸ªå‘<code>a[i]</code>ã€‚<br><br>â‘¡ï¼<code>j--</code>ï¼Œç”±åå‘å‰æ‰¾æ¯”å®ƒå°çš„æ•°ï¼Œæ‰¾åˆ°åæŒ–å‡ºæ­¤æ•°å¡«å‰ä¸€ä¸ªå‘<code>a[i]</code>ä¸­ã€‚<br><br>â‘¢ï¼<code>i++</code>ï¼Œç”±å‰å‘åæ‰¾æ¯”å®ƒå¤§çš„æ•°ï¼Œæ‰¾åˆ°åä¹ŸæŒ–å‡ºæ­¤æ•°å¡«åˆ°å‰ä¸€ä¸ªå‘<code>a[j]</code>ä¸­ã€‚<br><br>â‘£ï¼å†é‡å¤æ‰§è¡Œâ‘¡ï¼Œâ‘¢äºŒæ­¥ï¼Œç›´åˆ°<code>i==j</code>ï¼Œå°†åŸºå‡†æ•°å¡«å…¥<code>a[i]</code>ä¸­ <br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/200px-Partition_example.svg.png" alt="å¿«é€Ÿæ’åºé‡‡ç”¨â€œåˆ†è€Œæ²»ä¹‹ã€å„ä¸ªå‡»ç ´â€çš„è§‚å¿µï¼Œæ­¤ä¸ºåŸåœ°ï¼ˆIn-placeï¼‰åˆ†åŒºç‰ˆæœ¬ã€‚"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åºï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr   å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> low   å·¦è¾¹ç•Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> high  å³è¾¹ç•Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> left = low;</span><br><span class="line">    <span class="keyword">int</span> right = high;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> temp = arr[left];   <span class="comment">//æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right &amp;&amp; arr[right] &gt;= temp)&#123;  <span class="comment">//å‘2ï¼šä»åå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­</span></span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[left] = arr[right];</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right &amp;&amp; arr[left] &lt;= temp)&#123;   <span class="comment">//å‘3ï¼šä»å‰å¾€åæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­</span></span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[right] = arr[left];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[left] = temp;   <span class="comment">//åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æ’</span></span><br><span class="line">    System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">    quickSort(arr, low, left-<span class="number">1</span>);</span><br><span class="line">    quickSort(arr, left+<span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯é€’å½’ç‰ˆçš„å¿«é€Ÿæ’åºï¼šé€šè¿‡æŠŠåŸºå‡†tempæ’å…¥åˆ°åˆé€‚çš„ä½ç½®æ¥å®ç°åˆ†æ²»ï¼Œå¹¶é€’å½’åœ°å¯¹åˆ†æ²»åçš„ä¸¤ä¸ªåˆ’åˆ†ç»§ç»­å¿«æ’ã€‚é‚£ä¹ˆéé€’å½’ç‰ˆçš„å¿«æ’å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><p>å› ä¸º<strong>é€’å½’çš„æœ¬è´¨æ˜¯æ ˆ</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬éé€’å½’å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å€ŸåŠ©æ ˆæ¥ä¿å­˜ä¸­é—´å˜é‡å°±å¯ä»¥å®ç°éé€’å½’äº†ã€‚åœ¨è¿™é‡Œä¸­é—´å˜é‡ä¹Ÿå°±æ˜¯é€šè¿‡Pritationå‡½æ•°åˆ’åˆ†åŒºé—´ä¹‹ååˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆï¼Œåªéœ€è¦ä¿å­˜è¿™ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åºï¼ˆéé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * â‘¡. é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> * â‘¢. æŠŠåˆ†åŒºä¹‹åä¸¤ä¸ªåŒºé—´çš„è¾¹ç•Œï¼ˆlowå’Œhighï¼‰å‹å…¥æ ˆä¿å­˜ï¼Œå¹¶å¾ªç¯â‘ ã€â‘¡æ­¥éª¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr   å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSortByStack</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹çŠ¶æ€çš„å·¦å³æŒ‡é’ˆå…¥æ ˆ</span></span><br><span class="line">    stack.push(<span class="number">0</span>);</span><br><span class="line">    stack.push(arr.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">int</span> high = stack.pop();     <span class="comment">//å‡ºæ ˆè¿›è¡Œåˆ’åˆ†</span></span><br><span class="line">        <span class="keyword">int</span> low = stack.pop();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> pivotIdx = partition(arr, low, high);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¿å­˜ä¸­é—´å˜é‡</span></span><br><span class="line">        <span class="keyword">if</span>(pivotIdx &gt; low) &#123;</span><br><span class="line">            stack.push(low);</span><br><span class="line">            stack.push(pivotIdx - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pivotIdx &lt; high &amp;&amp; pivotIdx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">            stack.push(pivotIdx + <span class="number">1</span>);</span><br><span class="line">            stack.push(high);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> l = low;</span><br><span class="line">    <span class="keyword">int</span> r = high;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> pivot = arr[l];    <span class="comment">//æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r &amp;&amp; arr[r] &gt;= pivot)&#123;  <span class="comment">//å‘2ï¼šä»åå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­</span></span><br><span class="line">            r--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[l] = arr[r];</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r &amp;&amp; arr[l] &lt;= pivot)&#123;   <span class="comment">//å‘3ï¼šä»å‰å¾€åæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­</span></span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[r] = arr[l];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[l] = pivot;   <span class="comment">//åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æ’</span></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¿«é€Ÿæ’åºæ˜¯é€šå¸¸è¢«è®¤ä¸ºåœ¨åŒæ•°é‡çº§ï¼ˆO(nlog2n)ï¼‰çš„æ’åºæ–¹æ³•ä¸­å¹³å‡æ€§èƒ½æœ€å¥½çš„ã€‚ä½†è‹¥åˆå§‹åºåˆ—æŒ‰å…³é”®ç æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œå¿«æ’åºåè€Œèœ•åŒ–ä¸ºå†’æ³¡æ’åºã€‚ä¸ºæ”¹è¿›ä¹‹ï¼Œé€šå¸¸ä»¥â€œä¸‰è€…å–ä¸­æ³•â€æ¥é€‰å–åŸºå‡†è®°å½•ï¼Œå³å°†æ’åºåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ä¸ä¸­ç‚¹ä¸‰ä¸ªè®°å½•å…³é”®ç å±…ä¸­çš„è°ƒæ•´ä¸ºæ”¯ç‚¹è®°å½•ã€‚å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚</p><p>ä»¥ä¸‹æ˜¯å¿«é€Ÿæ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nÂ²)</td><td>O(1)ï¼ˆåŸåœ°åˆ†åŒºé€’å½’ç‰ˆï¼‰</td></tr></tbody></table><p>å¿«é€Ÿæ’åºæ’åºæ•ˆç‡éå¸¸é«˜ã€‚ è™½ç„¶å®ƒè¿è¡Œæœ€ç³Ÿç³•æ—¶å°†è¾¾åˆ°O(nÂ²)çš„æ—¶é—´å¤æ‚åº¦, ä½†é€šå¸¸å¹³å‡æ¥çœ‹, å®ƒçš„æ—¶é—´å¤æ‚ä¸ºO(nlogn), æ¯”åŒæ ·ä¸ºO(nlogn)æ—¶é—´å¤æ‚åº¦çš„å½’å¹¶æ’åºè¿˜è¦å¿«. å¿«é€Ÿæ’åºä¼¼ä¹æ›´åçˆ±ä¹±åºçš„æ•°åˆ—, è¶Šæ˜¯ä¹±åºçš„æ•°åˆ—, å®ƒç›¸æ¯”å…¶ä»–æ’åºè€Œè¨€, ç›¸å¯¹æ•ˆç‡æ›´é«˜.</p><p>Tips: åŒé€‰æ‹©æ’åºç›¸ä¼¼, å¿«é€Ÿæ’åºæ¯æ¬¡äº¤æ¢çš„å…ƒç´ éƒ½æœ‰å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„, å› æ­¤å®ƒæœ‰å¯èƒ½æ‰“ç ´åŸæ¥å€¼ä¸ºç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåº. å› æ­¤, å¿«é€Ÿæ’åºå¹¶ä¸ç¨³å®š.</p><h3 id="ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging-Sortï¼‰"><a href="#ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging-Sortï¼‰" class="headerlink" title="ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging Sortï¼‰"></a>ä¸ƒã€å½’å¹¶æ’åºï¼ˆMerging Sortï¼‰</h3><hr><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/merging-sort_sample.jpg" alt></p><p>å½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œ1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-6"><a href="#1ã€åŸºæœ¬æ€æƒ³-6" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å½’å¹¶æ’åºç®—æ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/2016-07-15_å½’å¹¶æ’åº.gif" alt="è¿™ä¸ªå›¾å¾ˆæœ‰æ¦‚æ‹¬æ€§ï¼Œæ¥è‡ªç»´åŸº"></p><h4 id="2ã€ç®—æ³•æè¿°-6"><a href="#2ã€ç®—æ³•æè¿°-6" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p><strong>å½’å¹¶æ’åºå¯é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ï¼š</strong></p><ul><li>è‡ªä¸Šè€Œä¸‹çš„é€’å½’</li><li>è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£</li></ul><p><strong>ä¸€ã€é€’å½’æ³•</strong>ï¼ˆå‡è®¾åºåˆ—å…±æœ‰nä¸ªå…ƒç´ ï¼‰ï¼š</p><p>â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›<br><br>â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼›<br><br>â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚<br></p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/merging-sort.gif" alt></p><p><strong>äºŒã€è¿­ä»£æ³•</strong></p><p>â‘ . ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ— <br><br>â‘¡. è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½® <br><br>â‘¢. æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½® <br><br>â‘£. é‡å¤æ­¥éª¤â‘¢ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ <br><br>â‘¤. å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ <br></p><h4 id="3ã€ä»£ç å®ç°-6"><a href="#3ã€ä»£ç å®ç°-6" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>å½’å¹¶æ’åºå…¶å®è¦åšä¸¤ä»¶äº‹ï¼š</p><ul><li>åˆ†è§£ï¼šå°†åºåˆ—æ¯æ¬¡æŠ˜åŠæ‹†åˆ†</li><li>åˆå¹¶ï¼šå°†åˆ’åˆ†åçš„åºåˆ—æ®µä¸¤ä¸¤æ’åºåˆå¹¶</li></ul><p>å› æ­¤ï¼Œå½’å¹¶æ’åºå®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ‹†åˆ†+åˆå¹¶</p><p><strong>å¦‚ä½•åˆå¹¶ï¼Ÿ</strong></p><p>L[firstâ€¦mid]ä¸ºç¬¬ä¸€æ®µï¼ŒL[mid+1â€¦last]ä¸ºç¬¬äºŒæ®µï¼Œå¹¶ä¸”ä¸¤ç«¯å·²ç»æœ‰åºï¼Œç°åœ¨æˆ‘ä»¬è¦å°†ä¸¤ç«¯åˆæˆè¾¾åˆ°L[firstâ€¦last]å¹¶ä¸”ä¹Ÿæœ‰åºã€‚</p><p>é¦–å…ˆä¾æ¬¡ä»ç¬¬ä¸€æ®µä¸ç¬¬äºŒæ®µä¸­å–å‡ºå…ƒç´ æ¯”è¾ƒï¼Œå°†è¾ƒå°çš„å…ƒç´ èµ‹å€¼ç»™temp[]<br><br>é‡å¤æ‰§è¡Œä¸Šä¸€æ­¥ï¼Œå½“æŸä¸€æ®µèµ‹å€¼ç»“æŸï¼Œåˆ™å°†å¦ä¸€æ®µå‰©ä¸‹çš„å…ƒç´ èµ‹å€¼ç»™temp[]<br><br>æ­¤æ—¶å°†temp[]ä¸­çš„å…ƒç´ å¤åˆ¶ç»™L[]ï¼Œåˆ™å¾—åˆ°çš„L[firstâ€¦last]æœ‰åº<br></p><p><strong>å¦‚ä½•åˆ†è§£ï¼Ÿ</strong></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨é€’å½’çš„æ–¹æ³•ï¼Œé¦–å…ˆå°†å¾…æ’åºåˆ—åˆ†æˆA,Bä¸¤ç»„ï¼›ç„¶åé‡å¤å¯¹Aã€Båºåˆ—<br>åˆ†ç»„ï¼›ç›´åˆ°åˆ†ç»„åç»„å†…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¤ä¸ºç»„å†…æ‰€æœ‰å…ƒç´ æœ‰åºï¼Œåˆ™åˆ†ç»„ç»“æŸã€‚</p><p>è¿™é‡Œæˆ‘å†™äº†é€’å½’ç®—æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½’å¹¶æ’åºï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] mergingSort(<span class="keyword">int</span>[] arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> num = arr.length &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] leftArr = Arrays.copyOfRange(arr, <span class="number">0</span>, num);</span><br><span class="line">    <span class="keyword">int</span>[] rightArr = Arrays.copyOfRange(arr, num, arr.length);</span><br><span class="line">    System.out.println(<span class="string">"split two array: "</span> + Arrays.toString(leftArr) + <span class="string">" And "</span> + Arrays.toString(rightArr));</span><br><span class="line">    <span class="keyword">return</span> mergeTwoArray(mergingSort(leftArr), mergingSort(rightArr));      <span class="comment">//ä¸æ–­æ‹†åˆ†ä¸ºæœ€å°å•å…ƒï¼Œå†æ’åºåˆå¹¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] mergeTwoArray(<span class="keyword">int</span>[] arr1, <span class="keyword">int</span>[] arr2)&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length + arr2.length];  <span class="comment">//ç”³è¯·é¢å¤–çš„ç©ºé—´å­˜å‚¨åˆå¹¶ä¹‹åçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">while</span>(i &lt; arr1.length &amp;&amp; j &lt; arr2.length)&#123;      <span class="comment">//é€‰å–ä¸¤ä¸ªåºåˆ—ä¸­çš„è¾ƒå°å€¼æ”¾å…¥æ–°æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span>(arr1[i] &lt;= arr2[j])&#123;</span><br><span class="line">            result[k++] = arr1[i++];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            result[k++] = arr2[j++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; arr1.length)&#123;     <span class="comment">//åºåˆ—1ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„</span></span><br><span class="line">        result[k++] = arr1[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(j &lt; arr2.length)&#123;     <span class="comment">//åºåˆ—2ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„</span></span><br><span class="line">        result[k++] = arr2[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Merging: "</span> + Arrays.toString(result));</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±ä¸Š, é•¿åº¦ä¸ºnçš„æ•°ç»„, æœ€ç»ˆä¼šè°ƒç”¨mergeSortå‡½æ•°2n-1æ¬¡ã€‚<strong>é€šè¿‡è‡ªä¸Šè€Œä¸‹çš„é€’å½’å®ç°çš„å½’å¹¶æ’åº, å°†å­˜åœ¨å †æ ˆæº¢å‡ºçš„é£é™©ã€‚</strong></p><p>ä»¥ä¸‹æ˜¯å½’å¹¶æ’åºç®—æ³•å¤æ‚åº¦:</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(n)</td></tr></tbody></table><p>ä»æ•ˆç‡ä¸Šçœ‹ï¼Œå½’å¹¶æ’åºå¯ç®—æ˜¯æ’åºç®—æ³•ä¸­çš„â€ä½¼ä½¼è€…â€. å‡è®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œé‚£ä¹ˆæ‹†åˆ†æ•°ç»„å…±éœ€lognï¼Œ, åˆæ¯æ­¥éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆå¹¶å­æ•°ç»„çš„è¿‡ç¨‹ï¼Œ æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ æ•…å…¶ç»¼åˆæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å¦ä¸€æ–¹é¢ï¼Œ å½’å¹¶æ’åºå¤šæ¬¡é€’å½’è¿‡ç¨‹ä¸­æ‹†åˆ†çš„å­æ•°ç»„éœ€è¦ä¿å­˜åœ¨å†…å­˜ç©ºé—´ï¼Œ å…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><blockquote><p>å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯<code>O(n log nï¼‰</code>çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p></blockquote><h3 id="å…«ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰"><a href="#å…«ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰" class="headerlink" title="å…«ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰"></a>å…«ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</h3><hr><p>åŸºæ•°æ’åºçš„å‘æ˜å¯ä»¥è¿½æº¯åˆ°1887å¹´èµ«å°”æ›¼Â·ä½•ä¹ç¤¼åœ¨æ‰“å­”å¡ç‰‡åˆ¶è¡¨æœºï¼ˆTabulation Machineï¼‰, æ’åºå™¨æ¯æ¬¡åªèƒ½çœ‹åˆ°ä¸€ä¸ªåˆ—ã€‚å®ƒæ˜¯åŸºäºå…ƒç´ å€¼çš„æ¯ä¸ªä½ä¸Šçš„å­—ç¬¦æ¥æ’åºçš„ã€‚ å¯¹äºæ•°å­—è€Œè¨€å°±æ˜¯åˆ†åˆ«åŸºäºä¸ªä½ï¼Œåä½ï¼Œ ç™¾ä½æˆ–åƒä½ç­‰ç­‰æ•°å­—æ¥æ’åºã€‚</p><p>åŸºæ•°æ’åºï¼ˆRadix sortï¼‰æ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚</p><h4 id="1ã€åŸºæœ¬æ€æƒ³-7"><a href="#1ã€åŸºæœ¬æ€æƒ³-7" class="headerlink" title="1ã€åŸºæœ¬æ€æƒ³"></a>1ã€åŸºæœ¬æ€æƒ³</h4><p>å®ƒæ˜¯è¿™æ ·å®ç°çš„ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><p>åŸºæ•°æ’åºæŒ‰ç…§ä¼˜å…ˆä»é«˜ä½æˆ–ä½ä½æ¥æ’åºæœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š</p><ul><li><p><strong>MSDï¼ˆMost significant digitalï¼‰ ä»æœ€å·¦ä¾§é«˜ä½å¼€å§‹è¿›è¡Œæ’åº</strong>ã€‚å…ˆæŒ‰k1æ’åºåˆ†ç»„, åŒä¸€ç»„ä¸­è®°å½•, å…³é”®ç k1ç›¸ç­‰, å†å¯¹å„ç»„æŒ‰k2æ’åºåˆ†æˆå­ç»„, ä¹‹å, å¯¹åé¢çš„å…³é”®ç ç»§ç»­è¿™æ ·çš„æ’åºåˆ†ç»„, ç›´åˆ°æŒ‰æœ€æ¬¡ä½å…³é”®ç kdå¯¹å„å­ç»„æ’åºå. å†å°†å„ç»„è¿æ¥èµ·æ¥, ä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚<em>MSDæ–¹å¼é€‚ç”¨äºä½æ•°å¤šçš„åºåˆ—</em>ã€‚</p></li><li><p><strong>LSD ï¼ˆLeast significant digitalï¼‰ä»æœ€å³ä¾§ä½ä½å¼€å§‹è¿›è¡Œæ’åº</strong>ã€‚å…ˆä»kdå¼€å§‹æ’åºï¼Œå†å¯¹kd-1è¿›è¡Œæ’åºï¼Œä¾æ¬¡é‡å¤ï¼Œç›´åˆ°å¯¹k1æ’åºåä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚<em>LSDæ–¹å¼é€‚ç”¨äºä½æ•°å°‘çš„åºåˆ—</em>ã€‚</p></li></ul><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/radix-sort_sample.gif" alt="åŸºæ•°æ’åºLSDåŠ¨å›¾æ¼”ç¤º"></p><h4 id="2ã€ç®—æ³•æè¿°-7"><a href="#2ã€ç®—æ³•æè¿°-7" class="headerlink" title="2ã€ç®—æ³•æè¿°"></a>2ã€ç®—æ³•æè¿°</h4><p>æˆ‘ä»¬ä»¥LSDä¸ºä¾‹ï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œå…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><p>â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›<br><br>â‘¡. arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›<br><br>â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›<br></p><h4 id="3ã€ä»£ç å®ç°-7"><a href="#3ã€ä»£ç å®ç°-7" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><p>åŸºæ•°æ’åºï¼šé€šè¿‡åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„å€¼ï¼Œå¯¹æ’åºçš„Nä¸ªå…ƒç´ è¿›è¡Œè‹¥å¹²è¶Ÿçš„â€œåˆ†é…â€ä¸â€œæ”¶é›†â€æ¥å®ç°æ’åºã€‚</p><ul><li><p><strong>åˆ†é…</strong>ï¼šæˆ‘ä»¬å°†L[i]ä¸­çš„å…ƒç´ å–å‡ºï¼Œé¦–å…ˆç¡®å®šå…¶ä¸ªä½ä¸Šçš„æ•°å­—ï¼Œæ ¹æ®è¯¥æ•°å­—åˆ†é…åˆ°ä¸ä¹‹åºå·ç›¸åŒçš„æ¡¶ä¸­</p></li><li><p><strong>æ”¶é›†</strong>ï¼šå½“åºåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œå†æŒ‰ç…§é¡ºåºä¾æ¬¡å°†æ¡¶ä¸­çš„å…ƒç´ æ”¶é›†å½¢æˆæ–°çš„ä¸€ä¸ªå¾…æ’åºåˆ—L[]ã€‚å¯¹æ–°å½¢æˆçš„åºåˆ—L[]é‡å¤æ‰§è¡Œåˆ†é…å’Œæ”¶é›†å…ƒç´ ä¸­çš„åä½ã€ç™¾ä½â€¦ç›´åˆ°åˆ†é…å®Œè¯¥åºåˆ—ä¸­çš„æœ€é«˜ä½ï¼Œåˆ™æ’åºç»“æŸ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºæ•°æ’åºï¼ˆLSD ä»ä½ä½å¼€å§‹ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åŸºæ•°æ’åºé€‚ç”¨äºï¼š</span></span><br><span class="line"><span class="comment"> *  (1)æ•°æ®èŒƒå›´è¾ƒå°ï¼Œå»ºè®®åœ¨å°äº1000</span></span><br><span class="line"><span class="comment"> *  (2)æ¯ä¸ªæ•°å€¼éƒ½è¦å¤§äºç­‰äº0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¡. arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›</span></span><br><span class="line"><span class="comment"> * â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    å¾…æ’åºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">radixSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°</span></span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(max &lt; arr[i])&#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxDigit = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(max / <span class="number">10</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        maxDigit++;</span><br><span class="line">        max = max / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"maxDigit: "</span> + maxDigit);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”³è¯·ä¸€ä¸ªæ¡¶ç©ºé—´</span></span><br><span class="line">    <span class="keyword">int</span>[][] buckets = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][arr.length];</span><br><span class="line">    <span class="keyword">int</span> base = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»ä½ä½åˆ°é«˜ä½ï¼Œå¯¹æ¯ä¸€ä½éå†ï¼Œå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxDigit; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span>[] bktLen = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];        <span class="comment">//å­˜å‚¨å„ä¸ªæ¡¶ä¸­å­˜å‚¨å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ†é…ï¼šå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length; j++)&#123;</span><br><span class="line">            <span class="keyword">int</span> whichBucket = (arr[j] % base) / (base / <span class="number">10</span>);</span><br><span class="line">            buckets[whichBucket][bktLen[whichBucket]] = arr[j];</span><br><span class="line">            bktLen[whichBucket]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†ï¼šå°†ä¸åŒæ¡¶é‡Œæ•°æ®æŒ¨ä¸ªæå‡ºæ¥,ä¸ºä¸‹ä¸€è½®é«˜ä½æ’åºåšå‡†å¤‡,ç”±äºé è¿‘æ¡¶åº•çš„å…ƒç´ æ’åé å‰,å› æ­¤ä»æ¡¶åº•å…ˆæ</span></span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> b = <span class="number">0</span>; b &lt; buckets.length; b++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; bktLen[b]; p++)&#123;</span><br><span class="line">                arr[k++] = buckets[b][p];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Sorting: "</span> + Arrays.toString(arr));</span><br><span class="line">        base *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯åŸºæ•°æ’åºç®—æ³•å¤æ‚åº¦ï¼Œå…¶ä¸­kä¸ºæœ€å¤§æ•°çš„ä½æ•°ï¼š</p><table><thead><tr><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>ç©ºé—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>O(d*(n+r))</td><td>O(d*(n+r))</td><td>O(d*(n+r))</td><td>O(n+r)</td></tr></tbody></table><p>å…¶ä¸­ï¼Œ<strong>d ä¸ºä½æ•°ï¼Œr ä¸ºåŸºæ•°ï¼Œn ä¸ºåŸæ•°ç»„ä¸ªæ•°</strong>ã€‚åœ¨åŸºæ•°æ’åºä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¯”è¾ƒæ“ä½œï¼Œæ‰€ä»¥åœ¨å¤æ‚ä¸Šï¼Œæœ€å¥½çš„æƒ…å†µä¸æœ€åçš„æƒ…å†µåœ¨æ—¶é—´ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå‡ä¸º <code>O(d*(n + r))</code>ã€‚</p><p>åŸºæ•°æ’åºæ›´é€‚åˆç”¨äºå¯¹æ—¶é—´, å­—ç¬¦ä¸²ç­‰è¿™äº›<strong>æ•´ä½“æƒå€¼æœªçŸ¥çš„æ•°æ®</strong>è¿›è¡Œæ’åºã€‚</p><p>Tips: åŸºæ•°æ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚</p><p><strong>åŸºæ•°æ’åº vs è®¡æ•°æ’åº vs æ¡¶æ’åº</strong></p><p>è¿™ä¸‰ç§æ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæœ‰æ˜æ˜¾å·®å¼‚ï¼š</p><ol><li>åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶</li><li>è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼</li><li>æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼</li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><hr><p>å„ç§æ’åºæ€§èƒ½å¯¹æ¯”å¦‚ä¸‹å›¾ï¼Œæœ‰äº›æ’åºæœªè¯¦ç»†ä»‹ç»ï¼Œæš‚ä¸”æ”¾åˆ°è¿™é‡Œã€‚<br>å®ä¾‹æµ‹è¯•ç»“æœå¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://github.com/iTimeTraveler/SortAlgorithms/blob/master/BENCH_RESULT.md" target="_blank" rel="noopener"><strong>å…«å¤§æ’åºç®—æ³•è€—æ—¶å¯¹æ¯”</strong></a> ã€‚</p><table><thead><tr><th>æ’åºç±»å‹</th><th>å¹³å‡æƒ…å†µ</th><th>æœ€å¥½æƒ…å†µ</th><th>æœ€åæƒ…å†µ</th><th>è¾…åŠ©ç©ºé—´</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>ç›´æ¥æ’å…¥æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>æŠ˜åŠæ’å…¥æ’åº</td><td>O(nÂ²)</td><td>O(n)</td><td>O(nÂ²)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>å¸Œå°”æ’åº</td><td>O(n^1.3)</td><td>O(nlogn)</td><td>O(nÂ²)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>å½’å¹¶æ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(n)</td><td>ç¨³å®š</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nÂ²)</td><td>O(nlogâ‚‚n)</td><td>ä¸ç¨³å®š</td></tr><tr><td>å †æ’åº</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(nlogâ‚‚n)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr><tr><td>è®¡æ•°æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>O(n+k)</td><td>O(k)</td><td>ç¨³å®š</td></tr><tr><td>æ¡¶æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>O(nÂ²)</td><td>O(n+k)</td><td>(ä¸)ç¨³å®š</td></tr><tr><td>åŸºæ•°æ’åº</td><td>O(d(n+k))</td><td>O(d(n+k))</td><td>O(d(n+kd))</td><td>O(n+kd)</td><td>ç¨³å®š</td></tr></tbody></table><p>ä»æ—¶é—´å¤æ‚åº¦æ¥è¯´ï¼š</p><p>(1). å¹³æ–¹é˜¶O(nÂ²)æ’åºï¼š<strong><code>å„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åº</code></strong>ï¼›</p><p>(2). çº¿æ€§å¯¹æ•°é˜¶O(nlogâ‚‚n)æ’åºï¼š<strong><code>å¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åº</code></strong>ï¼›</p><p>(3). O(n1+Â§))æ’åºï¼ŒÂ§æ˜¯ä»‹äº0å’Œ1ä¹‹é—´çš„å¸¸æ•°ï¼š<strong><code>å¸Œå°”æ’åº</code></strong></p><p>(4). çº¿æ€§é˜¶O(n)æ’åºï¼š<strong><code>åŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åº</code></strong>ã€‚</p><p>åˆ°æ­¤ï¼Œå¾ˆå¤šäººä¼šæ³¨æ„åˆ°<strong>åŸºæ•°æ’åº</strong>çš„æ—¶é—´å¤æ‚åº¦æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå´æ²¡æœ‰å¿«æ’ã€å †æ’åºæµè¡Œå‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ä¸‹å›¾ç®—æ³•å¯¼è®ºçš„ç›¸å…³è¯´æ˜ï¼š</p><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/radixsort-comparison.jpg" alt></p><p>åŸºæ•°æ’åºåªé€‚ç”¨äºæœ‰åŸºæ•°çš„æƒ…å†µï¼Œè€ŒåŸºäºæ¯”è¾ƒçš„æ’åºé€‚ç”¨èŒƒå›´å°±å¹¿å¾—å¤šã€‚å¦ä¸€æ–¹é¢æ˜¯å†…å­˜ä¸Šçš„è€ƒè™‘ã€‚ä½œä¸ºä¸€ç§é€šç”¨çš„æ’åºæ–¹æ³•ï¼Œæœ€å¥½ä¸è¦å¸¦æ¥æ„æ–™ä¹‹å¤–çš„å†…å­˜å¼€é”€ï¼Œæ‰€ä»¥å„è¯­è¨€çš„é»˜è®¤å®ç°éƒ½æ²¡æœ‰ç”¨åŸºæ•°æ’åºï¼Œä½†æ˜¯ä¸èƒ½å¦è®¤åŸºæ•°æ’åºåœ¨å„é¢†åŸŸçš„åº”ç”¨ã€‚</p><h4 id="æ—¶é—´å¤æ‚åº¦æé™"><a href="#æ—¶é—´å¤æ‚åº¦æé™" class="headerlink" title="æ—¶é—´å¤æ‚åº¦æé™"></a>æ—¶é—´å¤æ‚åº¦æé™</h4><p><strong>å½“è¢«æ’åºçš„æ•°æœ‰ä¸€äº›æ€§è´¨çš„æ—¶å€™</strong>ï¼ˆæ¯”å¦‚æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚æœ‰ä¸€å®šçš„èŒƒå›´ï¼‰ï¼Œæ’åºç®—æ³•çš„å¤æ‚åº¦æ˜¯å¯ä»¥å°äºO(nlgn)çš„ã€‚æ¯”å¦‚ï¼š</p><ol><li>è®¡æ•°æ’åº å¤æ‚åº¦O( k+n)     è¦æ±‚ï¼šè¢«æ’åºçš„æ•°æ˜¯0~kèŒƒå›´å†…çš„æ•´æ•°</li><li>åŸºæ•°æ’åº å¤æ‚åº¦O( d(k+n) )  è¦æ±‚ï¼šdä½æ•°ï¼Œæ¯ä¸ªæ•°ä½æœ‰kä¸ªå–å€¼</li><li>æ¡¶æ’åº    å¤æ‚åº¦ O( n ) ï¼ˆå¹³å‡ï¼‰ è¦æ±‚ï¼šè¢«æ’åºæ•°åœ¨æŸä¸ªèŒƒå›´å†…ï¼Œå¹¶ä¸”æœä»å‡åŒ€åˆ†å¸ƒ</li></ol><p>ä½†æ˜¯ï¼Œå½“è¢«æ’åºçš„æ•°ä¸å…·æœ‰ä»»ä½•æ€§è´¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä½¿ç”¨åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œè€Œ<strong>åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦çš„ä¸‹é™å¿…é¡»æ˜¯O(nlgn)</strong>ã€‚ å‚è€ƒ<a href="https://www.zhihu.com/question/24516934" target="_blank" rel="noopener">å¾ˆå¤šé«˜æ•ˆæ’åºç®—æ³•çš„ä»£ä»·æ˜¯ nlognï¼Œéš¾é“è¿™æ˜¯æ’åºç®—æ³•çš„æé™äº†å—ï¼Ÿ</a></p><h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><ul><li>å½“åŸè¡¨æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œç›´æ¥æ’å…¥æ’åºå’Œå†’æ³¡æ’åºå°†å¤§å¤§å‡å°‘æ¯”è¾ƒæ¬¡æ•°å’Œç§»åŠ¨è®°å½•çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™è‡³Oï¼ˆnï¼‰ï¼›</li><li>è€Œå¿«é€Ÿæ’åºåˆ™ç›¸åï¼Œå½“åŸè¡¨åŸºæœ¬æœ‰åºæ—¶ï¼Œå°†èœ•åŒ–ä¸ºå†’æ³¡æ’åºï¼Œæ—¶é—´å¤æ‚åº¦æé«˜ä¸ºOï¼ˆn2ï¼‰ï¼›</li><li>åŸè¡¨æ˜¯å¦æœ‰åºï¼Œå¯¹ç®€å•é€‰æ‹©æ’åºã€å †æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å½±å“ä¸å¤§ã€‚</li></ul><p><img src="https://itimetraveler.github.io/gallery/sort-algorithms/2016-07-15_å¸¸ç”¨æ’åºç®—æ³•.png" alt></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>æ•°æ®ç»“æ„å¯è§†åŒ–ï¼š<a href="https://visualgo.net/zh" target="_blank" rel="noopener">visualgo</a>ï¼Œ<a href="https://www.toptal.com/developers/sorting-algorithms/" target="_blank" rel="noopener">Sorting Algorithms Animations</a>ï¼Œ<a href="https://codepen.io/iTimeTraveler/pen/dRrwZr" target="_blank" rel="noopener">CodePen</a> &amp; <a href="https://codepen.io/iTimeTraveler/pen/weORyW" target="_blank" rel="noopener">sort it out</a></li><li><a href="https://coolshell.cn/articles/536.html" target="_blank" rel="noopener">ä¸€ä¸ªæ˜¾ç¤ºæ’åºè¿‡ç¨‹çš„PYTHONè„šæœ¬</a></li><li>æ’åºç®—æ³•æµ‹è¯•ï¼š<a href="http://www.cse.chalmers.se/edu/course/DIT960/lab1-sorting.html" target="_blank" rel="noopener">Lab 1: Sorting - å“¥å¾·å ¡å¤§å­¦è¯¾ä»¶ï¼ˆUniversity of Gothenburgï¼‰</a></li><li><a href="http://www.sorting-algorithms.com/" target="_blank" rel="noopener">Sorting Algorithm Animations - ä¸€ä¸ªæ’åºç®—æ³•æ¯”è¾ƒçš„ç½‘ç«™</a></li><li><a href="https://www.cs.cmu.edu/~adamchik/15-121/lectures/Sorting%20Algorithms/sorting.html" target="_blank" rel="noopener">Sorting - å¡å†…åŸºæ¢…éš†å¤§å­¦è¯¾ä»¶</a></li><li><a href="http://www.jianshu.com/p/7d037c332a9d" target="_blank" rel="noopener">æ•°æ®ç»“æ„å¸¸è§çš„å…«å¤§æ’åºç®—æ³•ï¼ˆè¯¦ç»†æ•´ç†ï¼‰</a></li><li><a href="http://www.jianshu.com/p/8c915179fd02" target="_blank" rel="noopener">å¿…é¡»çŸ¥é“çš„å…«å¤§ç§æ’åºç®—æ³•ã€javaå®ç°ã€‘</a></li><li><a href="http://web.jobbole.com/87968/" target="_blank" rel="noopener">åå¤§ç»å…¸æ’åºç®—æ³•</a></li><li><a href="http://blog.jobbole.com/11745/" target="_blank" rel="noopener">è§†è§‰ç›´è§‚æ„Ÿå— 7 ç§å¸¸ç”¨çš„æ’åºç®—æ³•</a></li><li><a href="http://louiszhai.github.io/2016/12/23/sort/" target="_blank" rel="noopener">JSä¸­å¯èƒ½ç”¨å¾—åˆ°çš„å…¨éƒ¨çš„æ’åºç®—æ³•</a></li><li><a href="http://www.cnblogs.com/minkaihui/p/4077888.html" target="_blank" rel="noopener">æ€»ç»“5ç§æ¯”è¾ƒé«˜æ•ˆå¸¸ç”¨çš„æ’åºç®—æ³•</a></li><li><a href="http://www.cnblogs.com/zyb428/p/5673738.html" target="_blank" rel="noopener">å¸¸è§æ’åºç®—æ³•C++æ€»ç»“</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithms, </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EveryThing About Operation System</title>
      <link href="/2019/12/27/EveryThing-About-Operation-System/"/>
      <url>/2019/12/27/EveryThing-About-Operation-System/</url>
      
        <content type="html"><![CDATA[<h2 id="å †å’Œæ ˆçš„åŒºåˆ«"><a href="#å †å’Œæ ˆçš„åŒºåˆ«" class="headerlink" title="å †å’Œæ ˆçš„åŒºåˆ«"></a>å †å’Œæ ˆçš„åŒºåˆ«</h2><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><ul><li>ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ï¼Œåˆ†é…æ–¹å¼ç±»ä¼¼äºé“¾è¡¨ã€‚å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥å†³å®šï¼ˆå¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›æ”¶ï¼‰ã€‚æ‰€ä»¥è°ƒç”¨è¿™äº›å¯¹è±¡çš„é€Ÿåº¦è¦ç›¸å¯¹æ¥å¾—ä½ä¸€äº›å †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æ’åºã€‚</li></ul><h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><ul><li>ç”±æ“ä½œç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆæ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œ å®ƒä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾ã€‚ä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„</li></ul><h3 id="ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚"><a href="#ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚" class="headerlink" title="ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚"></a>ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚</h3><ul><li><p>å†…æ ¸æ€ï¼šè¿è¡Œæ“ä½œç³»ç»Ÿç¨‹åºï¼Œæ§åˆ¶è®¡ç®—æœºçš„ç¡¬ä»¶èµ„æºï¼Œå¹¶æä¾›ä¸Šå±‚åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒï¼Œè¿è¡Œåœ¨é«˜ç‰¹æƒçº§ä¸Šã€‚<strong>å†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€çš„é€”å¾„â€”â€”&gt;è®¾ç½®ç¨‹åºçŠ¶æ€å­—</strong>ã€‚</p></li><li><p>ç”¨æˆ·æ€ï¼šè¿è¡Œç”¨æˆ·ç¨‹åºä¸Šå±‚åº”ç”¨ç¨‹åºçš„æ´»åŠ¨ç©ºé—´ï¼Œè¿è¡Œåœ¨ä½ç‰¹æƒçº§åˆ«ä¸Šã€‚ä¸ºäº†ä½¿ä¸Šå±‚åº”ç”¨èƒ½å¤Ÿè®¿é—®åˆ°è¿™äº›èµ„æºï¼Œå†…æ ¸ä¸ºä¸Šå±‚åº”ç”¨æä¾›è®¿é—®çš„æ¥å£ã€‚<strong>ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„å”¯ä¸€é€”å¾„(ç”³è¯·å¤–éƒ¨èµ„æº)â€”â€”&gt;ä¸­æ–­/å¼‚å¸¸/ç³»ç»Ÿè°ƒç”¨</strong>(è¯»å†™æ–‡ä»¶,ç”³è¯·å †å†…å­˜,ç¼ºé¡µ(è™šæ‹Ÿå†…å­˜åœ°å€æ²¡æœ‰æ˜ å°„åˆ°ç‰©ç†å†…å­˜åœ°å€,åœ¨Javaä¸­Newä¸€ä¸ªå¯¹è±¡))ã€‚ç³»ç»Ÿè°ƒç”¨ Systemï¼Œ Callaccept:å¥—æ¥å­—çš„å®¢æˆ·ç«¯è¿æ¥å¥—æ¥å­—ï¼Œbindå¥—æ¥å­—çš„æœåŠ¡ç«¯ç›‘å¬ç«¯å£</p></li></ul><h2 id="ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»"><a href="#ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»" class="headerlink" title="ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»"></a>ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³»</h2><ul><li>ä¿¡å·ï¼šï¼ˆsignalï¼‰æ˜¯ä¸€ç§å¤„ç†å¼‚æ­¥äº‹ä»¶çš„æ–¹å¼ã€‚ä¿¡å·æ—¶æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥å—è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿï¼Œé™¤äº†ç”¨äºè¿›ç¨‹å¤–ï¼Œè¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«ã€‚linuxé™¤äº†æ”¯æŒunixæ—©æœŸçš„ä¿¡å·è¯­ä¹‰å‡½æ•°ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆposix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigactionã€‚</li><li>ä¿¡å·é‡ï¼šï¼ˆSemaphoreï¼‰è¿›ç¨‹é—´é€šä¿¡å¤„ç†åŒæ­¥äº’æ–¥çš„æœºåˆ¶ã€‚æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨çš„ä¸€ç§è®¾æ–½, å®ƒè´Ÿè´£åè°ƒå„ä¸ªçº¿ç¨‹, ä»¥ä¿è¯å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®ã€åˆç†çš„ä½¿ç”¨å…¬å…±èµ„æºã€‚<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰"></a>è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰</h2>å•¥æ˜¯è¿›ç¨‹ï¼Œå•¥æ˜¯çº¿ç¨‹ï¼Œä»–ä»¬çš„æœ¬è´¨åŒºåˆ«ï¼Ÿæˆ‘ä»¬è¿è¡Œä¸€ä¸ªç¨‹åºæ—¶ï¼Œæ•°æ®æ”¾åœ¨å“ªé‡Œï¼Ÿä»£ç æ”¾åœ¨å“ªé‡Œï¼Ÿå’‹å°±è¿˜è¦åˆ†å †å’Œæ ˆï¼Ÿçº¿ç¨‹åˆ‡æ¢æ—¶æ˜¯ä¸Šä¸‹æ–‡æ˜¯å•¥æ„æ€ï¼Ÿ</li></ul><p>è™šæ‹Ÿåœ°å€æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿ï¼Ÿçº¿ç¨‹éœ€è¦é‚£ä¹ˆå¤šç§çŠ¶æ€å¹²å•¥å­ï¼Ÿä»€ä¹ˆæ˜¯ä¹è§‚é”ã€æ‚²è§‚é”ï¼Ÿæ­»é”æ˜¯æ€ä¹ˆé€ æˆçš„ï¼Ÿè§£å†³æ­»é”çš„ç­–ç•¥æœ‰å“ªäº›ï¼Ÿç­‰ç­‰<br>2ã€è¿›ç¨‹ã€çº¿ç¨‹ç©¶ç«Ÿæ˜¯ç”±ä»€ä¹ˆç»„æˆçš„ï¼Ÿæœ‰å“ªäº›æ•°æ®ï¼Ÿ</p><p>3ã€å†…å­˜ç®¡ç†ï¼ŒåŒ…æ‹¬ï¼šè™šæ‹Ÿå†…å­˜ï¼ˆé‡ç‚¹ï¼‰ã€åˆ†é¡µã€åˆ†æ®µã€åˆ†é¡µç³»ç»Ÿåœ°å€æ˜ å°„ã€å†…å­˜ç½®æ¢ç®—æ³•ï¼ˆé‡ç‚¹ï¼‰ã€‚</p><p>å®‰å…¨ç³»ç»Ÿä¸ä¼šæ­»é”</p><h2 id="è¿›ç¨‹æ˜¯ä»€ä¹ˆ"><a href="#è¿›ç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="è¿›ç¨‹æ˜¯ä»€ä¹ˆ"></a>è¿›ç¨‹æ˜¯ä»€ä¹ˆ</h2><p>è¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œé‡ç‚¹åœ¨ç³»ç»Ÿè°ƒåº¦å’Œç‹¬ç«‹çš„å•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹æ˜¯å¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ä¸€æ®µç¨‹åºã€‚</p><h2 id="çº¿ç¨‹æ˜¯ä»€ä¹ˆ"><a href="#çº¿ç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="çº¿ç¨‹æ˜¯ä»€ä¹ˆ"></a>çº¿ç¨‹æ˜¯ä»€ä¹ˆ</h2><p>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåœ¨è¿è¡Œæ—¶ï¼Œåªæ˜¯æš‚ç”¨ä¸€äº›è®¡æ•°å™¨ï¼Œå¯„å­˜å™¨ï¼Œå’Œæ ˆã€‚</p><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»"></a>è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»</h2><ul><li>ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆé€šå¸¸è¯´çš„ä¸»çº¿ç¨‹ï¼‰ã€‚</li><li>èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚</li><li>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åä½œåŒæ­¥ï¼Œä¸åŒè¿›ç¨‹çš„çº¿ç¨‹é—´è¦åˆ©ç”¨æ¶ˆæ¯é€šä¿¡çš„æ–¹æ³•å®ç°åŒæ­¥ã€‚</li><li>å¤„ç†æœºåˆ†é…ç»™çº¿ç¨‹ï¼Œå³çœŸæ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ˜¯çº¿ç¨‹ã€‚</li><li>çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹å†…çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯è¿›ç¨‹å†…çš„å¯è°ƒåº¦å®ä½“ã€‚</li><li>è¿›ç¨‹ä¼šé‡Šæ”¾èµ„æºï¼Œçº¿ç¨‹ä¸ä¼šã€‚<h2 id="ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«"><a href="#ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«"></a>ä»4ä¸ªè§’åº¦æ¥åˆ†æè¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„åŒºåˆ«</h2></li><li>è°ƒåº¦ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºçš„åŸºæœ¬å•ä½</li><li>å¹¶å‘æ€§ï¼šä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥å¹¶å‘æ‰§è¡Œ</li><li>æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†æ˜¯å¯ä»¥è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æº</li><li>ç³»ç»Ÿå¼€é”€ï¼šåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶ç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ï¼ŒI/Oè®¾å¤‡ç­‰ï¼ŒOSæ‰€ä»˜å‡ºçš„å¼€é”€æ˜¾è‘—å¤§äºåœ¨åˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ï¼Œè¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ä¹Ÿè¿œå¤§äºçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€<h2 id="è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€"><a href="#è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€" class="headerlink" title="è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€"></a>è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€</h2></li><li>å°±ç»ªçŠ¶æ€ï¼šè¿›ç¨‹å·²ç»è·å¾—é™¤å¤„ç†æœºä»¥å¤–çš„æ‰€æœ‰èµ„æºï¼Œç­‰å¾…åˆ†é…å¤„ç†æœºèµ„æº</li><li>è¿è¡ŒçŠ¶æ€ï¼šå ç”¨å¤„ç†æœºèµ„æºè¿è¡Œï¼Œå¤„äºæ­¤çŠ¶æ€çš„è¿›ç¨‹æ•°å°äºç­‰äºCPUæ•°ç›®</li><li>é˜»å¡çŠ¶æ€ï¼šè¿›ç¨‹ç­‰å¾…æŸç§æ¡ä»¶ï¼Œåœ¨æ¡ä»¶æ»¡è¶³ä¹‹å‰æ— æ³•è¿è¡Œ<h2 id="çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€"><a href="#çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€" class="headerlink" title="çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€"></a>çº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€</h2></li><li>æ‰§è¡ŒçŠ¶æ€ï¼šè¡¨ç¤ºçº¿ç¨‹å·²ç»è·å¾—å¤„ç†æœºè€Œæ­£åœ¨è¿è¡Œ</li><li>å°±ç»ªçŠ¶æ€ï¼šæŒ‡çº¿ç¨‹å·²ç»å…·å¤‡äº†å„ç§æ‰§è¡Œæ¡ä»¶ï¼Œåªéœ€å†è·å¾—CPUä¾¿å¯ä»¥ç«‹å³æ‰§è¡Œéš¾</li><li>é˜»å¡çŠ¶æ€ï¼šçº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å› æŸäº‹å—é˜»è€Œå¤„äºæš‚åœçŠ¶æ€<h2 id="æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§"><a href="#æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§" class="headerlink" title="æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§"></a>æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§</h2></li><li>éæŠ¢å å¼æ–¹å¼ï¼šé‡‡ç”¨è¿™ç§è°ƒåº¦æ–¹å¼æ—¶ï¼Œä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™æŸä¸ªè¿›ç¨‹åï¼Œå°±ä¸€ç›´è®©å®ƒè¿è¡Œä¸‹å»ï¼Œå†³ä¸ä¼šå› ä¸ºæ—¶é’Ÿä¸­æ–­æˆ–ä»»ä½•å…¶å®ƒåŸå› å»æŠ¢å å½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„å¤„ç†æœºï¼Œç›´è‡³è¯¥è¿›ç¨‹å®Œæˆï¼Œæˆ–å‘ç”ŸæŸç§äº‹ä»¶è€Œè¢«é˜»å¡æ—¶ï¼Œæ‰æŠŠå¤„ç†æœºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹</li><li>æŠ¢å å¼æ–¹å¼ï¼šè¿™ç§è°ƒåº¦æ–¹å¼å…è®¸è°ƒåº¦ç¨‹åºæ ¹æ®æŸç§åŸåˆ™ï¼Œå»æš‚åœæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å·²ç»åˆ†é…ç»™è¯¥è¿›ç¨‹çš„å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€è¿›ç¨‹ï¼Œåœ¨ç°ä»£OSä¸­å¹¿æ³›é‡‡ç”¨æŠ¢å æ–¹å¼ã€‚<br>è¿›ç¨‹ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥<br>è¿›ç¨‹åŒæ­¥æœºåˆ¶çš„ä¸»è¦ä»»åŠ¡æ˜¯å¯¹å¤šä¸ªç›¸å…³è¿›ç¨‹åœ¨æ‰§è¡Œæ¬¡åºä¸Šè¿›è¡Œåè°ƒï¼Œä½¿å¾—å¹¶å‘æ‰§è¡Œçš„å„ä¸ªè¿›ç¨‹ä¹‹é—´èƒ½æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æˆ–æ—¶åºå…±äº«ç³»ç»Ÿèµ„æºï¼Œå¹¶èƒ½å¾ˆå¥½çš„ç›¸äº’åˆä½œï¼Œä»è€Œä½¿å¾—ç¨‹åºçš„æ‰§è¡Œå…·æœ‰å¯å†ç°æ€§</li></ul><h2 id="åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹"><a href="#åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹" class="headerlink" title="åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹"></a>åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜å…¶ä¼˜ç¼ºç‚¹</h2><ul><li>ç¡¬ä»¶åŒæ­¥æœºåˆ¶ï¼š</li><li>ä¿¡å·é‡æœºåˆ¶ï¼š</li><li>ç®¡ç¨‹æœºåˆ¶ï¼š<h2 id="è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"><a href="#è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„" class="headerlink" title="è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"></a>è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„</h2><a href="https://mp.weixin.qq.com/s/5CbYGrylSKx1JwtOiW3aOQ" target="_blank" rel="noopener">è¿›ç¨‹ä¹‹é—´é€šä¿¡æ–¹å‘</a></li><li>ç®¡é“ï¼šç®¡é“æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œè€Œä¸”åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´ä½¿ç”¨ï¼Œè¿›ç¨‹çš„äº²ç¼˜å…³ç³»é€šå¸¸æ˜¯æŒ‡çˆ¶å­è¿›ç¨‹å…³ç³»</li><li>æœ‰åç®¡é“ï¼šæœ‰åç®¡é“ä¹Ÿæ˜¯åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œä½†æ˜¯å®ƒå…è®¸æ— äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡</li><li>ä¿¡å·é‡ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œå®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºï¼Œå› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”±æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹</li><li>ä¿¡å·ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿ</li><li>å…±äº«å†…å­˜ï¼šå…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜ï¼Œè¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºï¼Œä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ï¼Œå…±äº«å†…å­˜æ˜¯æœ€å¿«çš„IPCæ–¹å¼ï¼Œå®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆç‡ä½è€Œä¸“é—¨è®¾è®¡çš„ï¼Œå®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ï¼Œé…åˆä½¿ç”¨ï¼Œæ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡</li><li>Socket(å¥—æ¥å­—)ï¼šå¥—æ¥å­—å¯ä»¥ç”¨äºä¸åŒçš„è¿›ç¨‹é—´çš„é€šä¿¡<h2 id="çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"><a href="#çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„" class="headerlink" title="çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„"></a>çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„</h2></li><li>é”æœºåˆ¶ï¼šåŒ…æ‹¬äº’æ–¥é”ï¼Œæ¡ä»¶å˜é‡ï¼Œè¯»å†™é” äº’æ–¥é”æä¾›äº†ä»¥æ’ä»–æ–¹å¼é˜²æ­¢æ•°æ®ç»“æ„è¢«å¹¶å‘ä¿®æ”¹çš„æ–¹æ³• æ¡ä»¶å˜é‡å¯ä»¥ä»¥åŸå­çš„æ–¹å¼é˜»å¡è¿›ç¨‹ï¼Œç›´åˆ°æŸä¸ªç‰¹å®šæ¡ä»¶ä¸ºçœŸä¸ºæ­¢ï¼Œå¯¹æ¡ä»¶çš„æµ‹è¯•æ˜¯åœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œçš„ï¼Œæ¡ä»¶å˜é‡å§‹ç»ˆä¸äº’æ–¥é”ä¸€èµ·ä½¿ç”¨ è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å…±äº«æ•°æ®ï¼Œè€Œå¯¹å†™æ“ä½œæ˜¯äº’æ–¥çš„</li><li>ä¿¡å·é‡æœºåˆ¶ï¼šåŒ…æ‹¬æ— åçº¿ç¨‹ä¿¡å·é‡å’Œå‘½åçº¿ç¨‹ä¿¡å·é‡</li><li>ä¿¡å·æœºåˆ¶ï¼šç±»ä¼¼è¿›ç¨‹é—´çš„ä¿¡å·å¤„ç† <strong>æ³¨æ„ï¼šçº¿ç¨‹é—´çš„é€šä¿¡çš„ç›®çš„ä¸»è¦æ˜¯ç”¨äºçº¿ç¨‹çš„åŒæ­¥ï¼Œæ‰€ä»¥çº¿ç¨‹æ²¡æœ‰åƒè¿›ç¨‹é€šä¿¡ä¸­çš„ç”¨äºæ•°æ®äº¤æ¢çš„é€šä¿¡æœºåˆ¶</strong></li></ul><h2 id="å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥"><a href="#å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥" class="headerlink" title="å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥"></a>å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥</h2><blockquote><p>ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰ã€ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ã€äº‹ä»¶ï¼ˆEventï¼‰çš„åŒºåˆ«</p></blockquote><h3 id="ä¸´ç•ŒåŒºï¼š"><a href="#ä¸´ç•ŒåŒºï¼š" class="headerlink" title="ä¸´ç•ŒåŒºï¼š"></a>ä¸´ç•ŒåŒºï¼š</h3><p>é€šè¿‡å¯¹å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ§åˆ¶æ•°æ®è®¿é—®ã€‚åœ¨ä»»æ„æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®å…¬å…±èµ„æºï¼Œé‚£ä¹ˆåœ¨æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åï¼Œå…¶ä»–è¯•å›¾è®¿é—®å…¬å…±èµ„æºçš„çº¿ç¨‹å°†è¢«æŒ‚èµ·ï¼Œå¹¶ä¸€ç›´ç­‰åˆ°è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ç¦»å¼€ï¼Œä¸´ç•ŒåŒºåœ¨è¢«é‡Šæ”¾åï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥æŠ¢å ã€‚</p><h3 id="äº’æ–¥é‡ï¼š"><a href="#äº’æ–¥é‡ï¼š" class="headerlink" title="äº’æ–¥é‡ï¼š"></a>äº’æ–¥é‡ï¼š</h3><p>é‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ã€‚ åªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ï¼Œå› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥èƒ½ä¿è¯å…¬å…±èµ„æºä¸ä¼šåŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ã€‚äº’æ–¥ä¸ä»…èƒ½å®ç°åŒä¸€åº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº«ï¼Œè¿˜èƒ½å®ç°ä¸åŒåº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº« .äº’æ–¥é‡æ¯”ä¸´ç•ŒåŒºå¤æ‚ã€‚å› ä¸ºä½¿ç”¨äº’æ–¥ä¸ä»…ä»…èƒ½å¤Ÿåœ¨åŒä¸€åº”ç”¨ç¨‹åºä¸åŒçº¿ç¨‹ä¸­å®ç°èµ„æºçš„å®‰å…¨å…±äº«ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸åŒåº”ç”¨ç¨‹åºçš„çº¿ç¨‹ä¹‹é—´å®ç°å¯¹èµ„æºçš„å®‰å…¨å…±äº«ã€‚</p><h3 id="ä¿¡å·é‡ï¼š"><a href="#ä¿¡å·é‡ï¼š" class="headerlink" title="ä¿¡å·é‡ï¼š"></a>ä¿¡å·é‡ï¼š</h3><p>å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›® .ä¿¡å·é‡å¯¹è±¡å¯¹çº¿ç¨‹çš„åŒæ­¥æ–¹å¼ä¸å‰é¢å‡ ç§æ–¹æ³•ä¸åŒï¼Œä¿¡å·å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨å…±äº«èµ„æºï¼Œè¿™ä¸æ“ä½œç³»ç»Ÿä¸­çš„PVæ“ä½œç›¸åŒã€‚å®ƒæŒ‡å‡ºäº†åŒæ—¶è®¿é—®å…±äº«èµ„æºçš„çº¿ç¨‹æœ€å¤§æ•°ç›®ã€‚å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›®ã€‚</p><p>PVæ“ä½œåŠä¿¡å·é‡çš„æ¦‚å¿µéƒ½æ˜¯ç”±è·å…°ç§‘å­¦å®¶E.W.Dijkstraæå‡ºçš„ã€‚ä¿¡å·é‡Sæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒSå¤§äºç­‰äºé›¶æ—¶ä»£è¡¨å¯ä¾›å¹¶å‘è¿›ç¨‹ä½¿ç”¨çš„èµ„æºå®ä½“æ•°ï¼Œä½†Så°äºé›¶æ—¶åˆ™è¡¨ç¤ºæ­£åœ¨ç­‰å¾…ä½¿ç”¨å…±äº«èµ„æºçš„è¿›ç¨‹æ•°ã€‚</p><h6 id="Pæ“ä½œç”³è¯·èµ„æºï¼š"><a href="#Pæ“ä½œç”³è¯·èµ„æºï¼š" class="headerlink" title="Pæ“ä½œç”³è¯·èµ„æºï¼š"></a>Pæ“ä½œç”³è¯·èµ„æºï¼š</h6><ul><li>Så‡1ï¼›</li><li>è‹¥Så‡1åä»å¤§äºç­‰äºé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›</li><li><p>è‹¥Så‡1åå°äºé›¶ï¼Œåˆ™è¯¥è¿›ç¨‹è¢«é˜»å¡åè¿›å…¥ä¸è¯¥ä¿¡å·ç›¸å¯¹åº”çš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åè½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ã€€ã€€</p><h5 id="Væ“ä½œé‡Šæ”¾èµ„æºï¼š"><a href="#Væ“ä½œé‡Šæ”¾èµ„æºï¼š" class="headerlink" title="Væ“ä½œé‡Šæ”¾èµ„æºï¼š"></a>Væ“ä½œé‡Šæ”¾èµ„æºï¼š</h5></li><li><p>SåŠ 1ï¼›</p></li><li>è‹¥ç›¸åŠ ç»“æœå¤§äºé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›</li><li>è‹¥ç›¸åŠ ç»“æœå°äºç­‰äºé›¶ï¼Œåˆ™ä»è¯¥ä¿¡å·çš„ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªç­‰å¾…è¿›ç¨‹ï¼Œç„¶åå†è¿”å›åŸè¿›ç¨‹ç»§ç»­æ‰§è¡Œæˆ–è½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ã€€ã€€<h3 id="äº‹ä»¶ï¼š"><a href="#äº‹ä»¶ï¼š" class="headerlink" title="äº‹ä»¶ï¼š"></a>äº‹ä»¶ï¼š</h3>é€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿å®ç°å¯¹å¤šä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒçš„æ“ä½œ .</li></ul><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul><li>äº’æ–¥é‡ä¸ä¸´ç•ŒåŒºçš„ä½œç”¨éå¸¸ç›¸ä¼¼ï¼Œä½†äº’æ–¥é‡æ˜¯å¯ä»¥å‘½åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è·¨è¶Šè¿›ç¨‹ä½¿ç”¨ã€‚æ‰€ä»¥åˆ›å»ºäº’æ–¥é‡éœ€è¦çš„èµ„æºæ›´å¤šï¼Œæ‰€ä»¥å¦‚æœåªä¸ºäº†åœ¨è¿›ç¨‹å†…éƒ¨æ˜¯ç”¨çš„è¯ä½¿ç”¨ä¸´ç•ŒåŒºä¼šå¸¦æ¥é€Ÿåº¦ä¸Šçš„ä¼˜åŠ¿å¹¶èƒ½å¤Ÿå‡å°‘èµ„æºå ç”¨é‡ã€‚å› ä¸ºäº’æ–¥é‡æ˜¯è·¨è¿›ç¨‹çš„äº’æ–¥é‡ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±å¯ä»¥é€šè¿‡åå­—æ‰“å¼€å®ƒã€‚</li><li>äº’æ–¥é‡ï¼ˆMutexï¼‰ï¼Œä¿¡å·ç¯ï¼ˆSemaphoreï¼‰ï¼Œäº‹ä»¶ï¼ˆEventï¼‰éƒ½å¯ä»¥è¢«è·¨è¶Šè¿›ç¨‹ä½¿ç”¨æ¥è¿›è¡ŒåŒæ­¥æ•°æ®æ“ä½œï¼Œè€Œå…¶ä»–çš„å¯¹è±¡ä¸æ•°æ®åŒæ­¥æ“ä½œæ— å…³ï¼Œä½†å¯¹äºè¿›ç¨‹å’Œçº¿ç¨‹æ¥è®²ï¼Œå¦‚æœè¿›ç¨‹å’Œçº¿ç¨‹åœ¨è¿è¡ŒçŠ¶æ€åˆ™ä¸ºæ— ä¿¡å·çŠ¶æ€ï¼Œåœ¨é€€å‡ºåä¸ºæœ‰ä¿¡å·çŠ¶æ€ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨WaitForSingleObjectæ¥ç­‰å¾…è¿›ç¨‹å’Œçº¿ç¨‹é€€å‡ºã€‚</li><li>é€šè¿‡äº’æ–¥é‡å¯ä»¥æŒ‡å®šèµ„æºè¢«ç‹¬å çš„æ–¹å¼ä½¿ç”¨ï¼Œä½†å¦‚æœæœ‰ä¸‹é¢ä¸€ç§æƒ…å†µé€šè¿‡äº’æ–¥é‡å°±æ— æ³•å¤„ç†ï¼Œæ¯”å¦‚ç°åœ¨ä¸€ä½ç”¨æˆ·è´­ä¹°äº†ä¸€ä»½ä¸‰ä¸ªå¹¶å‘è®¿é—®è®¸å¯çš„æ•°æ®åº“ç³»ç»Ÿï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è´­ä¹°çš„è®¿é—®è®¸å¯æ•°é‡æ¥å†³å®šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹/è¿›ç¨‹èƒ½åŒæ—¶è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œè¿™æ—¶å€™å¦‚æœåˆ©ç”¨äº’æ–¥é‡å°±æ²¡æœ‰åŠæ³•å®Œæˆè¿™ä¸ªè¦æ±‚ï¼Œä¿¡å·ç¯å¯¹è±¡å¯ä»¥è¯´æ˜¯ä¸€ç§èµ„æºè®¡æ•°å™¨ã€‚ã€€ã€€</li></ul><h2 id="æ­»é”çš„å®šä¹‰"><a href="#æ­»é”çš„å®šä¹‰" class="headerlink" title="æ­»é”çš„å®šä¹‰"></a>æ­»é”çš„å®šä¹‰</h2><p>å¦‚æœä¸€ç»„è¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä»…ç”±è¯¥ç»„è¿›ç¨‹ä¸­çš„å…¶å®ƒè¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥ç»„è¿›ç¨‹æ˜¯æ­»é”çš„</p><h2 id="è¿›ç¨‹æ­»é”çš„åŸå› "><a href="#è¿›ç¨‹æ­»é”çš„åŸå› " class="headerlink" title="è¿›ç¨‹æ­»é”çš„åŸå› "></a>è¿›ç¨‹æ­»é”çš„åŸå› </h2><p>å¤šä¸ªè¿›ç¨‹å¯¹èµ„æºçš„äº‰å¤ºï¼ŒåŒ…æ‹¬å¯¹ä¸å¯æŠ¢å èµ„æºå’Œå¯¹å¯æ¶ˆè€—èµ„æº</p><h2 id="è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶"><a href="#è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶"></a>è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶</h2><ul><li>äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡Œæ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå…¶èµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰è¯¥èµ„æºçš„è¿›ç¨‹ç”¨å®Œé‡Šæ”¾</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²ç»è¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†å¯¹è‡ªå·±å·²ç»è·å¾—çš„èµ„æºä¿æŒä¸æ”¾</li><li>ä¸å¯æŠ¢å æ¡ä»¶ï¼šè¿›ç¨‹å·²ç»è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«æŠ¢å ï¼Œåªèƒ½åœ¨è¿›ç¨‹ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹-èµ„æºå¾ªç¯é“¾ï¼Œå³è¿›ç¨‹é›†åˆï½›P0,P1,â€¦â€¦,PNï½ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼ŒP1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPN æ­£åœ¨ç­‰å¾…P0å ç”¨çš„èµ„æº<h2 id="è¿›ç¨‹æ­»é”çš„å¤„ç†"><a href="#è¿›ç¨‹æ­»é”çš„å¤„ç†" class="headerlink" title="è¿›ç¨‹æ­»é”çš„å¤„ç†"></a>è¿›ç¨‹æ­»é”çš„å¤„ç†</h2></li><li>é¢„é˜²æ­»é”ï¼šé€šè¿‡è®¾ç½®æŸäº›é™åˆ¶æ¡ä»¶ï¼Œå»ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ç§</li><li>é¿å…æ­»é”ï¼šåœ¨èµ„æºçš„åŠ¨æ€åˆ†é…è¿‡ç¨‹ä¸­ï¼Œç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€</li><li>æ£€æµ‹æ­»é”ï¼šé€šè¿‡æ£€æµ‹æœºæ„åŠæ—¶æ£€æµ‹å‡ºæ­»é”çš„å‘ç”Ÿï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½ï¼ŒæŠŠè¿›ç¨‹ä»æ­»é”ä¸­è§£è„±å‡ºæ¥</li><li>è§£é™¤æ­»é”ï¼šå½“æ£€æµ‹åˆ°ç³»ç»Ÿä¸­å·²ç»å‘ç”Ÿæ­»é”æ—¶ï¼Œé‡‡å–ç›¸åº”çš„æªæ–½ï¼Œå°†è¿›ç¨‹ä»æ­»é”çŠ¶æ€è§£è„±å‡ºæ¥ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯æ’¤é”€ä¸€äº›è¿›ç¨‹ï¼Œå›æ”¶ä»–ä»¬çš„èµ„æºï¼Œå°†å®ƒä»¬åˆ†é…ç»™å·²ç»å¤„äºé˜»å¡çŠ¶æ€çš„è¿›ç¨‹ï¼Œä½¿å…¶èƒ½å¤Ÿç»§ç»­è¿è¡Œ<h2 id="æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾"><a href="#æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾" class="headerlink" title="æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾"></a>æè¿°å®æ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾</h2>å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯æŒ‡æ“ä½œç³»ç»Ÿå·¥ä½œæ—¶ï¼Œå…¶å„ç§èµ„æºå¯ä»¥æ ¹æ®éœ€è¦éšæ—¶è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œç”±äºå„ç§èµ„æºå¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œå› æ­¤ï¼Œå…¶å¤„ç†äº‹åŠ¡çš„èƒ½åŠ›è¾ƒå¼º æ¢è¨€ä¹‹ï¼Œåœ¨ç‰¹å®šæ—¶é—´å†…å®Œæˆç‰¹å®šçš„ä»»åŠ¡ï¼Œå…·æœ‰å®æ—¶æ€§ä¸å¯é æ€§</li></ul><h2 id="æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹"><a href="#æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹" class="headerlink" title="æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹"></a>æ“ä½œç³»ç»Ÿä¸­æ–­ä¸è½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹</h2><ul><li>è½®è¯¢ï¼šå¯¹I/Oè®¾å¤‡çš„ç¨‹åºè½®è¯¢çš„æ–¹å¼æ˜¯æ—©æœŸçš„è®¡ç®—æœºç³»ç»Ÿå¯¹I/Oè®¾å¤‡çš„ä¸€ç§ç®¡ç†æ–¹å¼ï¼Œå®ƒå®šæ—¶å¯¹å„ç§è®¾å¤‡è½®æµè¯¢é—®ä¸€éæœ‰æ— å¤„ç†è¦æ±‚ã€‚è½®è¯¢å æ®äº†CPUç›¸å½“ä¸€éƒ¨åˆ†å¤„ç†æ—¶é—´ï¼Œå› æ­¤ï¼Œç¨‹åºè½®è¯¢æ˜¯ä¸€ç§æ•ˆç‡è¾ƒä½çš„æ–¹å¼ï¼Œåœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­å·²ç»å¾ˆå°‘åº”ç”¨</li><li><p>ä¸­æ–­ï¼šä¸­æ–­æ˜¯æŒ‡CPUåœ¨æ­£å¸¸è¿è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œç”±äºå‘ç”Ÿçš„å†…éƒ¨æˆ–å¤–éƒ¨çš„ç‰¹å®šçš„äº‹ä»¶ï¼Œä½¿å¾—CPUä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œè€Œè½¬åˆ°å“åº”çš„æœåŠ¡ç¨‹åºå»å¤„ç†</p><h2 id="ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª"><a href="#ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª"></a>ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çª</h2><p>æ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µç¨‹åºç§°ä¸ºä¸´ç•ŒåŒºï¼Œæ¯æ¬¡åªå‡†è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿›å…¥åä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥ è§£å†³å†²çªçš„æ–¹æ³•ï¼š</p></li><li><p>å¦‚æœæœ‰è‹¥å¹²ä¸ªè¿›ç¨‹è¦æ±‚è¿›å…¥ç©ºé—²çš„ä¸´ç•ŒåŒºï¼Œä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥</p></li><li>ä»»ä½•æ—¶å€™ï¼Œå¤„äºä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹ä¸å¯ä»¥å¤šäºä¸€ä¸ªï¼Œå¦‚æœå·²ç»æœ‰è¿›ç¨‹è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™å…¶ä»–æ‰€æœ‰è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…</li><li>è¿›å…¥ä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹è¦åœ¨æœ‰é™æ—¶é—´å†…é€€å‡ºï¼Œä»¥ä¾¿å…¶å®ƒè¿›ç¨‹èƒ½åŠæ—¶è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒº</li><li>å¦‚æœè¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™åº”è¯¥è®©å‡ºCPUï¼Œé¿å…è¿›ç¨‹å‡ºç°â€œå¿™ç¢Œâ€ç°è±¡ã€‚<h2 id="windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„"><a href="#windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„" class="headerlink" title="windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„"></a>windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„</h2>windowsæ“çºµå†…å­˜å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå±‚é¢ï¼Œç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ã€‚</li></ul><h3 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­"><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­" class="headerlink" title="è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)"></a>è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)</h3><ul><li>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼‰ï¼šç»™æ¯ä¸ªè¿›ç¨‹å›ºå®šçš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè®©è¿›ç¨‹åœ¨å•ä½æ—¶é—´ç‰‡å†…æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåä¾¿è°ƒåº¦ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ä¸è€ƒè™‘è¿›ç¨‹ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œå±äºæŠ¢å å¼è°ƒåº¦ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼›ç¼ºç‚¹æ˜¯å¹³å‡ç­‰å¾…æ—¶é—´è¾ƒé•¿ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢è¾ƒè´¹æ—¶ã€‚é€‚ç”¨äºåˆ†æ—¶ç³»ç»Ÿã€‚</li><li>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼ˆFCFSï¼‰ï¼šæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºæ‰§è¡Œè¿›ç¨‹ï¼Œä¸è€ƒè™‘ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œä¼šäº§ç”Ÿé¥¥é¥¿ç°è±¡ã€‚å±äºéæŠ¢å å¼è°ƒåº¦ï¼Œä¼˜ç‚¹æ˜¯å…¬å¹³ï¼Œå®ç°ç®€å•ï¼›ç¼ºç‚¹æ˜¯ä¸åˆ©äºçŸ­ä½œä¸šã€‚</li><li>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆHPFï¼‰ï¼šåœ¨è¿›ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„æ¥æ‰§è¡Œã€‚</li><li>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼šå°†æ—¶é—´ç‰‡è½®è½¬ä¸ä¼˜å…ˆçº§è°ƒåº¦ç›¸ç»“åˆï¼ŒæŠŠè¿›ç¨‹æŒ‰ä¼˜å…ˆçº§åˆ†æˆä¸åŒçš„é˜Ÿåˆ—ï¼Œå…ˆæŒ‰ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä¼˜å…ˆçº§ç›¸åŒçš„ï¼ŒæŒ‰æ—¶é—´ç‰‡è½®è½¬ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œæœ‰è¾ƒå¥½çš„å“åº”æ—¶é—´ï¼Œå¯è¡Œæ€§å¼ºï¼Œé€‚ç”¨äºå„ç§ä½œä¸šç¯å¢ƒã€‚</li><li>é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼šæ ¹æ®â€œå“åº”æ¯”=ï¼ˆè¿›ç¨‹æ‰§è¡Œæ—¶é—´+è¿›ç¨‹ç­‰å¾…æ—¶é—´ï¼‰/ è¿›ç¨‹æ‰§è¡Œæ—¶é—´â€è¿™ä¸ªå…¬å¼å¾—åˆ°çš„å“åº”æ¯”æ¥è¿›è¡Œè°ƒåº¦ã€‚é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•åœ¨ç­‰å¾…æ—¶é—´ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä½œä¸šæ‰§è¡Œçš„æ—¶é—´è¶ŠçŸ­ï¼Œå“åº”æ¯”è¶Šé«˜ï¼Œæ»¡è¶³æ®µä»»åŠ¡ä¼˜å…ˆï¼ŒåŒæ—¶å“åº”æ¯”ä¼šéšç€ç­‰å¾…æ—¶é—´å¢åŠ è€Œå˜å¤§ï¼Œä¼˜å…ˆçº§ä¼šæé«˜ï¼Œèƒ½å¤Ÿé¿å…é¥¥é¥¿ç°è±¡ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œç¼ºç‚¹æ˜¯è®¡ç®—å“åº”æ¯”å¼€é”€å¤§ï¼Œé€‚ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿã€‚</li></ul><h3 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­-1"><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•-é•¿ä¸­çŸ­-1" class="headerlink" title="è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)"></a>è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­)</h3><ul><li><strong>é•¿ç¨‹è°ƒåº¦ï¼ŒæŠŠä½œä¸šåèƒŒé˜Ÿåˆ—è°ƒå…¥å†…å­˜</strong>ï¼Œåˆç§°ä¸ºä½œä¸šè°ƒåº¦æˆ–é«˜çº§è°ƒåº¦ï¼Œè¿™ç§è°ƒåº¦å°†å·²è¿›å…¥ç³»ç»Ÿå¹¶å¤„äºåå¤‡çŠ¶æ€çš„ä½œä¸šæŒ‰æŸç§ç®—æ³•é€‰æ‹©ä¸€ä¸ªæˆ–ä¸€æ‰¹ï¼Œä¸ºå…¶å»ºç«‹è¿›ç¨‹ï¼Œå¹¶è¿›å…¥ä¸»æœºï¼Œå½“è¯¥ä½œä¸šæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¿˜è´Ÿè´£å›æ”¶ç³»ç»Ÿèµ„æºï¼Œåœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œéœ€è¦æœ‰ä½œä¸šè°ƒåº¦çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å°†å®ƒä»¬åˆ†æ‰¹åœ°è£…å…¥å†…å­˜ï¼Œåœ¨åˆ†æ—¶ç³»ç»Ÿå’Œå®æ—¶ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸éœ€è¦é•¿æœŸè°ƒåº¦ã€‚å®ƒçš„é¢‘ç‡æ¯”è¾ƒä½ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶å†…å­˜ä¸­è¿›ç¨‹çš„æ•°é‡ã€‚</li><li><strong>ä¸­ç¨‹è°ƒåº¦ï¼Œå†…å¤–å­˜é˜»å¡è¿›ç¨‹æ¥å›åˆ‡æ¢</strong>ï¼Œåˆç§°ä¸ºäº¤æ¢è°ƒåº¦ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯èƒ½å°†è¿›ç¨‹ä»å†…å­˜æˆ–ä»CPUç«äº‰ä¸­ç§»å‡ºï¼Œä»è€Œé™ä½å¤šé“ç¨‹åºè®¾è®¡çš„ç¨‹åº¦ï¼Œä¹‹åè¿›ç¨‹èƒ½è¢«é‡æ–°è°ƒå…¥å†…å­˜ï¼Œå¹¶ä»ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œï¼Œè¿™ç§äº¤æ¢çš„***ä½œå¯ä»¥è°ƒæ•´è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„å­˜åœ¨æ•°é‡å’Œæ—¶æœºã€‚å…¶ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§ç»™å®šçš„åŸåˆ™å’Œç­–ç•¥ï¼Œå°†å¤„äºå¤–å­˜äº¤æ¢åŒºä¸­çš„å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹è°ƒå…¥å†…å­˜ï¼Œæˆ–æŠŠå¤„äºå†…å­˜å°±ç»ªçŠ¶æ€æˆ–å†…å­˜ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹äº¤æ¢åˆ°å¤–å­˜äº¤æ¢åŒºã€‚</li><li><strong>çŸ­ç¨‹è°ƒåº¦ï¼ŒæŠŠè¿›ç¨‹åˆ†é…ç»™CPUæ‰§è¡Œ</strong>ã€‚åˆç§°ä¸ºè¿›ç¨‹è°ƒåº¦ã€ä½çº§è°ƒåº¦æˆ–å¾®è§‚è°ƒåº¦ã€‚è¿™ä¹Ÿæ˜¯é€šå¸¸æ‰€è¯´çš„è°ƒåº¦ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯çŸ­æœŸè°ƒåº¦ã€‚å®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§æŸç§ç­–ç•¥å’Œç®—æ³•å°†å¤„ç†æœºåˆ†é…ç»™ä¸€ä¸ªå¤„äºå°±ç»ªçŠ¶æ€çš„è¿›ç¨‹ï¼Œåˆ†ä¸ºæŠ¢å å¼å’ŒéæŠ¢å å¼ã€‚ å¯ä»¥ä»ä¸‹å›¾ä¸­æ¸…æ™°çš„çœ‹åˆ°è¿™äº›è°ƒåº¦ä¹‹é—´çš„åŒºåˆ«ã€‚</li></ul><h3 id="ç£ç›˜å¯»é“ç®—æ³•"><a href="#ç£ç›˜å¯»é“ç®—æ³•" class="headerlink" title="ç£ç›˜å¯»é“ç®—æ³•"></a>ç£ç›˜å¯»é“ç®—æ³•</h3><ul><li>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•ï¼ˆFCFSï¼‰First Come First Service</li></ul><p>è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ç£ç›˜è°ƒåº¦ç®—æ³•ã€‚å®ƒæ ¹æ®è¿›ç¨‹è¯·æ±‚è®¿é—®ç£ç›˜çš„å…ˆåæ¬¡åºè¿›è¡Œè°ƒåº¦ã€‚æ­¤ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å…¬å¹³ã€ç®€å•ï¼Œä¸”æ¯ä¸ªè¿›ç¨‹çš„è¯·æ±‚éƒ½èƒ½ä¾æ¬¡å¾—åˆ°å¤„ç†ï¼Œä¸ä¼šå‡ºç°æŸä¸€è¿›ç¨‹çš„è¯·æ±‚é•¿æœŸå¾—ä¸åˆ°æ»¡è¶³çš„æƒ…å†µã€‚æ­¤ç®—æ³•ç”±äºæœªå¯¹å¯»é“è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨å¯¹ç£ç›˜çš„è®¿é—®è¯·æ±‚æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ­¤ç®—æ³•å°†é™ä½è®¾å¤‡æœåŠ¡çš„ååé‡ï¼Œè‡´ä½¿å¹³å‡å¯»é“æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œä½†å„è¿›ç¨‹å¾—åˆ°æœåŠ¡çš„å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦è¾ƒå°ã€‚<strong>åœ¨å•ç”¨æˆ·ç³»ç»Ÿç¯å¢ƒä¸­ï¼ŒI/Oé˜Ÿåˆ—çš„é•¿åº¦é€šå¸¸ä¸º1ï¼Œå› æ­¤ï¼Œå…ˆæ¥å…ˆæœåŠ¡FCFSç®—æ³•æ˜¯æœ€ç»æµå®æƒ çš„ç£ç›˜è°ƒåº¦ç®—æ³•</strong>.</p><p>å…ˆæ¥å…ˆæœåŠ¡ ï¼ˆ125ï¼‰86.147.91.177.94.150.102.175.130</p><ul><li>æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSSTFï¼‰ Shortest Seek Time First</li></ul><p>è¯¥ç®—æ³•é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹ï¼Œå…¶è¦æ±‚è®¿é—®çš„ç£é“ä¸å½“å‰ç£å¤´æ‰€åœ¨çš„ç£é“è·ç¦»æœ€è¿‘ï¼Œä»¥ä½¿æ¯æ¬¡çš„å¯»é“æ—¶é—´æœ€çŸ­ï¼Œè¯¥ç®—æ³•å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¥½çš„ååé‡ï¼Œä½†å´ä¸èƒ½ä¿è¯å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚å…¶ç¼ºç‚¹æ˜¯å¯¹ç”¨æˆ·çš„æœåŠ¡è¯·æ±‚çš„å“åº”æœºä¼šä¸æ˜¯å‡ç­‰çš„ï¼Œå› è€Œå¯¼è‡´å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦å¾ˆå¤§ã€‚åœ¨æœåŠ¡è¯·æ±‚å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå¯¹å†…å¤–è¾¹ç¼˜ç£é“çš„è¯·æ±‚å°†ä¼šæ— é™æœŸçš„è¢«å»¶è¿Ÿï¼Œæœ‰äº›è¯·æ±‚çš„å“åº”æ—¶é—´å°†ä¸å¯é¢„æœŸã€‚æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆï¼ˆ125ï¼‰130.147.150.175.177.102.94.91.86</p><ul><li>æ‰«æç®—æ³•ï¼ˆSCANï¼‰ç”µæ¢¯è°ƒåº¦</li></ul><p>æ‰«æç®—æ³•ä¸ä»…è€ƒè™‘åˆ°æ¬²è®¿é—®çš„ç£é“ä¸å½“å‰ç£é“çš„è·ç¦»ï¼Œæ›´ä¼˜å…ˆè€ƒè™‘çš„æ˜¯ç£å¤´çš„å½“å‰ç§»åŠ¨æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œå½“ç£å¤´æ­£åœ¨è‡ªé‡Œå‘å¤–ç§»åŠ¨æ—¶ï¼Œæ‰«æç®—æ³•æ‰€é€‰æ‹©çš„ä¸‹ä¸€ä¸ªè®¿é—®å¯¹è±¡åº”æ˜¯å…¶æ¬²è®¿é—®çš„ç£é“æ—¢åœ¨å½“å‰ç£é“ä¹‹å¤–ï¼Œåˆæ˜¯è·ç¦»æœ€è¿‘çš„ã€‚è¿™æ ·è‡ªé‡Œå‘å¤–åœ°è®¿é—®ï¼Œç›´åˆ°å†æ— æ›´å¤–çš„ç£é“éœ€è¦è®¿é—®æ‰å°†ç£è‡‚æ¢å‘ï¼Œè‡ªå¤–å‘é‡Œç§»åŠ¨ã€‚è¿™æ—¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ¯æ¬¡é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹æ¥è°ƒåº¦ï¼Œå³å…¶è¦è®¿é—®çš„ç£é“ï¼Œåœ¨å½“å‰ç£é“ä¹‹å†…ï¼Œä»è€Œé¿å…äº†é¥¥é¥¿ç°è±¡çš„å‡ºç°ã€‚ç”±äºè¿™ç§ç®—æ³•ä¸­ç£å¤´ç§»åŠ¨çš„è§„å¾‹é¢‡ä¼¼ç”µæ¢¯çš„è¿è¡Œï¼Œæ•…åˆç§°ä¸ºç”µæ¢¯è°ƒåº¦ç®—æ³•ã€‚æ­¤ç®—æ³•åŸºæœ¬ä¸Šå…‹æœäº†æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„æœåŠ¡é›†ä¸­äºä¸­é—´ç£é“å’Œå“åº”æ—¶é—´å˜åŒ–æ¯”è¾ƒå¤§çš„ç¼ºç‚¹ï¼Œè€Œå…·æœ‰æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„ä¼˜ç‚¹å³ååé‡è¾ƒå¤§ï¼Œå¹³å‡å“åº”æ—¶é—´è¾ƒå°ï¼Œä½†ç”±äºæ˜¯æ‘†åŠ¨å¼çš„æ‰«ææ–¹æ³•ï¼Œä¸¤ä¾§ç£é“è¢«è®¿é—®çš„é¢‘ç‡ä»ä½äºä¸­é—´ç£é“ã€‚ç”µæ¢¯è°ƒåº¦ï¼ˆ125ï¼‰102.94.91.86.130.147.150.175.177</p><ul><li>å¾ªç¯æ‰«æç®—æ³•ï¼ˆCSCANï¼‰</li></ul><p>å¾ªç¯æ‰«æç®—æ³•æ˜¯å¯¹æ‰«æç®—æ³•çš„æ”¹è¿›ã€‚å¦‚æœå¯¹ç£é“çš„è®¿é—®è¯·æ±‚æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œå½“ç£å¤´åˆ°è¾¾ç£ç›˜çš„ä¸€ç«¯ï¼Œå¹¶åå‘è¿åŠ¨æ—¶è½åœ¨ç£å¤´ä¹‹åçš„è®¿é—®è¯·æ±‚ç›¸å¯¹è¾ƒå°‘ã€‚è¿™æ˜¯ç”±äºè¿™äº›ç£é“åˆšè¢«å¤„ç†ï¼Œè€Œç£ç›˜å¦ä¸€ç«¯çš„è¯·æ±‚å¯†åº¦ç›¸å½“é«˜ï¼Œä¸”è¿™äº›è®¿é—®è¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ï¼Œä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œå¾ªç¯æ‰«æç®—æ³•è§„å®šç£å¤´å•å‘ç§»åŠ¨ã€‚ä¾‹å¦‚ï¼Œåªè‡ªé‡Œå‘å¤–ç§»åŠ¨ï¼Œå½“ç£å¤´ç§»åˆ°æœ€å¤–çš„è¢«è®¿é—®ç£é“æ—¶ï¼Œç£å¤´ç«‹å³è¿”å›åˆ°æœ€é‡Œçš„æ¬²è®¿ç£é“ï¼Œå³å°†æœ€å°ç£é“å·ç´§æ¥ç€æœ€å¤§ç£é“å·æ„æˆå¾ªç¯ï¼Œè¿›è¡Œæ‰«æã€‚å¾ªç¯æ‰«æ ï¼ˆ125ï¼‰130.147.150.175.177.86.91.94.102</p><h3 id="å­¸é•·ç­†è¨˜é€£çµ"><a href="#å­¸é•·ç­†è¨˜é€£çµ" class="headerlink" title="å­¸é•·ç­†è¨˜é€£çµ"></a>å­¸é•·ç­†è¨˜é€£çµ</h3><ul><li><p><a href="https://kim85326.github.io/2018/01/09/CH6-%E8%A1%8C%E7%A8%8B%E6%8E%92%E7%8F%AD-(Process-Scheduling)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH6-%E8%A1%8C%E7%A8%8B%E6%8E%92%E7%8F%AD-(Process-Scheduling)/</a><br>ä¿¡è™Ÿ</p></li><li><p><a href="https://kim85326.github.io/2018/01/10/CH10-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-(File-System)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/10/CH10-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-(File-System)/</a></p></li><li><p>æª”æ¡ˆç³»çµ±<br><a href="https://kim85326.github.io/2018/01/09/CH8-%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Memory-Management-Strategies)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH8-%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Memory-Management-Strategies)/</a><br>è¨˜æ†¶é«”ç®¡ç†</p></li><li><p><a href="https://kim85326.github.io/2018/01/09/CH9-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Virtual-Memory-Management)/" target="_blank" rel="noopener">https://kim85326.github.io/2018/01/09/CH9-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Virtual-Memory-Management)/</a><br>è™›æ“¬è¨˜æ†¶è£¡ lru</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Operation System </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SDN_OpenFlow</title>
      <link href="/2019/11/06/SDN-OpenFlow/"/>
      <url>/2019/11/06/SDN-OpenFlow/</url>
      
        <content type="html"><![CDATA[<h1 id="107-SDN"><a href="#107-SDN" class="headerlink" title="107 SDN"></a>107 SDN</h1><h2 id="a10715005-ä»»å‰"><a href="#a10715005-ä»»å‰" class="headerlink" title="a10715005 ä»»å‰"></a>a10715005 ä»»å‰</h2><h3 id="Boot-onosproject"><a href="#Boot-onosproject" class="headerlink" title="Boot onosproject"></a>Boot onosproject</h3><p><img src="https://imgur.com/GBqQTM5.png" alt></p><h3 id="Configuration-Json-file-and-Create-Topo-using-command-line"><a href="#Configuration-Json-file-and-Create-Topo-using-command-line" class="headerlink" title="Configuration Json file and Create Topo using command line"></a>Configuration Json file and Create Topo using command line</h3><p><img src="https://imgur.com/ZBZABkv.png" alt></p><h1 id="å·²ç¶“è§£æ±º"><a href="#å·²ç¶“è§£æ±º" class="headerlink" title="å·²ç¶“è§£æ±º"></a>å·²ç¶“è§£æ±º</h1><h2 id="ONOS-GUIä¸­çš„topology"><a href="#ONOS-GUIä¸­çš„topology" class="headerlink" title="ONOS GUIä¸­çš„topology"></a>ONOS GUIä¸­çš„topology</h2><p><img src="https://imgur.com/meGhS42.png" alt></p><h2 id="Ping-æˆåŠŸçš„ç•«é¢"><a href="#Ping-æˆåŠŸçš„ç•«é¢" class="headerlink" title="Ping æˆåŠŸçš„ç•«é¢"></a>Ping æˆåŠŸçš„ç•«é¢</h2><p><img src="https://imgur.com/gvkVOIL.png" alt></p><h2 id="Switch-s3çš„forwarding-table"><a href="#Switch-s3çš„forwarding-table" class="headerlink" title="Switch s3çš„forwarding table"></a>Switch s3çš„forwarding table</h2><p><img src="https://imgur.com/VpZQL2l.png" alt></p><h1 id="é‚„æ²’æœ‰è§£æ±º"><a href="#é‚„æ²’æœ‰è§£æ±º" class="headerlink" title="é‚„æ²’æœ‰è§£æ±º"></a>é‚„æ²’æœ‰è§£æ±º</h1><p><del>h1 ping h2</del><br><del>ç”¢ç”Ÿæœ‰å…©æ¢è·¯å¾‘çš„topology</del></p><ul><li>è®“ping packetèµ°è¼ƒé•·çš„è·¯å¾‘</li></ul><p>åŸæ¥æ˜¯<br><img src="https://imgur.com/fX9oXev.png" alt></p><p>ç°åœ¨æƒ³è®©ä»–å˜æˆ<br><img src="https://imgur.com/LJETsWO.png" alt></p><h2 id="Pre-requisites"><a href="#Pre-requisites" class="headerlink" title="Pre-requisites:"></a>Pre-requisites:</h2><p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener"><code>VirtualBox</code></a></p><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration:"></a>Configuration:</h3><p><a href="https://jingyan.baidu.com/article/e2284b2b61a2efe2e6118d39.html" target="_blank" rel="noopener">JDK Configuration in Ubuntu</a></p><p><a href="https://blog.csdn.net/u010558281/article/details/78419321" target="_blank" rel="noopener">Install ONOS on Ubuntu</a></p><h3 id="Using-Linux-command"><a href="#Using-Linux-command" class="headerlink" title="Using Linux command:"></a>Using Linux command:</h3><p>modification file in Linux <code>gedit</code></p><h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h4><ul><li><p><a href="https://wiki.onosproject.org/display/ONOS/Basic+ONOS+Tutorial" target="_blank" rel="noopener"><code>Basic ONOS Tutorial</code></a></p></li><li><p><a href="https://www.youtube.com/watch?v=l25Ukkmk6Sk" target="_blank" rel="noopener"><code>OpenFlow</code></a></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ONOS OpenFlow SDN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CV</title>
      <link href="/2019/11/05/CV/"/>
      <url>/2019/11/05/CV/</url>
      
        <content type="html"><![CDATA[<p><a href="https://medium.com/@xiaosean5408/pix2pixhd%E7%B0%A1%E4%BB%8B-high-resolution-image-synthesis-and-semantic-manipulation-with-conditional-gans-2099bd492f5" target="_blank" rel="noopener">pix2pixHDç°¡ä»‹ â€” High-Resolution Image Synthesis and Semantic Manipulation with Conditional GANs</a></p><p><a href="https://www.bilibili.com/video/av5987715" target="_blank" rel="noopener">ã€ç†Ÿè‚‰ã€‘çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - 01 - å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</a></p><p><a href="https://wei2624.github.io/machine%20learning/Machine-Learning-Notes/" target="_blank" rel="noopener">Machine-Learning-Notes</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>108FALL</title>
      <link href="/2019/10/18/108FALL/"/>
      <url>/2019/10/18/108FALL/</url>
      
        <content type="html"><![CDATA[<h1 id="CS5095701-Advanced-Database-Systems"><a href="#CS5095701-Advanced-Database-Systems" class="headerlink" title="CS5095701 Advanced Database Systems"></a>CS5095701 Advanced Database Systems</h1><ul><li><p><a href="http://faculty.csie.ntust.edu.tw/~ywu/cs5095701/index.html" target="_blank" rel="noopener">CourseInfo</a></p></li><li><p><a href="https://docs.google.com/presentation/d/1HP7sgi0ClYdZmHQpGbO5SYVTYlU4V5MpYIx4xEOi4Co/edit" target="_blank" rel="noopener">PrensentationSlides</a></p></li><li><p>11/15 Proposal presentation (all 14 groups)</p></li><li>11/22 Mid-term exam</li><li>11/29 paper presentation (4 groups)(sequence        1~4)</li></ul><h2 id="Project-proposal"><a href="#Project-proposal" class="headerlink" title="Project proposal:"></a>Project proposal:</h2><p>You are required to propose a database related research project in this course. You are encouraged to have a publication as a goal for your project. A list of project ideas is listed below.</p><h2 id="You-proposal-should-include-the-following-aspects"><a href="#You-proposal-should-include-the-following-aspects" class="headerlink" title="You proposal should include the following aspects:"></a>You proposal should include the following aspects:</h2><ul><li><p>importance of the proposed project</p></li><li><p>your algorithm and ideas</p></li><li><p>main contributions</p></li><li><p>the design of the software you propose to build</p></li><li><p>how you propose to evaluate your ideas</p></li><li><p>the design of the experiments</p></li><li><p>literature survey</p></li></ul><h3 id="You-will-present-to-the-class-about-your-proposal-5-minutes-and-write-a-proposal-report-2-4-pages-in-IEEE-format"><a href="#You-will-present-to-the-class-about-your-proposal-5-minutes-and-write-a-proposal-report-2-4-pages-in-IEEE-format" class="headerlink" title="You will present to the class about your proposal (~ 5 minutes) and write a proposal report (2~4 pages in IEEE format)."></a>You will present to the class about your proposal (~ 5 minutes) and write a proposal report (2~4 pages in IEEE format).</h3><h1 id="CS5014701-é›»è…¦èˆ‡æ©Ÿå™¨äººè¦–è¦º-Computer-and-Robot-Vision"><a href="#CS5014701-é›»è…¦èˆ‡æ©Ÿå™¨äººè¦–è¦º-Computer-and-Robot-Vision" class="headerlink" title="CS5014701 é›»è…¦èˆ‡æ©Ÿå™¨äººè¦–è¦º Computer and Robot Vision"></a>CS5014701 é›»è…¦èˆ‡æ©Ÿå™¨äººè¦–è¦º Computer and Robot Vision</h1><ul><li><p><a href="https://docs.google.com/presentation/d/1IGnx-zBDaD7oFmCo3vJa4of-yKDxCmiLzA4EswjaXX0/edit" target="_blank" rel="noopener">Everybody Dance NOW<br></a></p></li><li><p><a href="https://docs.google.com/presentation/d/1KySt5eAGNONS2xu5TM4nkeAA_78sE_DKQ-Eq6oCJjJE/edit#slide=id.p" target="_blank" rel="noopener">Joint Discriminative and Generative Learning for Person Re-identification</a></p></li></ul><h1 id="CS5146701-è™›æ“¬åŒ–ç¶²è·¯åŠæ‡‰ç”¨-Virtualized-Networks-and-Applications"><a href="#CS5146701-è™›æ“¬åŒ–ç¶²è·¯åŠæ‡‰ç”¨-Virtualized-Networks-and-Applications" class="headerlink" title="CS5146701 è™›æ“¬åŒ–ç¶²è·¯åŠæ‡‰ç”¨ Virtualized Networks and Applications"></a>CS5146701 è™›æ“¬åŒ–ç¶²è·¯åŠæ‡‰ç”¨ Virtualized Networks and Applications</h1><ul><li>Proposal</li></ul><h2 id="Catch-up-from-Flick"><a href="#Catch-up-from-Flick" class="headerlink" title="Catch up from Flick"></a>Catch up from Flick</h2><p><a href="https://www.youtube.com/watch?v=wLDK8ZCnuBc&t=2s" target="_blank" rel="noopener">network virtualization</a></p><iframe width="560" height="315" src="https://www.youtube.com/embed/WenaxhSv35c?start=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h1 id="CS5023701-Knowledge-Based-Systems"><a href="#CS5023701-Knowledge-Based-Systems" class="headerlink" title="CS5023701  Knowledge-Based Systems"></a>CS5023701  Knowledge-Based Systems</h1><p><a href="https://docs.google.com/presentation/d/1qY_z_h-IgD5GLm81VX1pLvkQcwI_KNSnJgOVYtuUyJY/edit#slide=id.p" target="_blank" rel="noopener">Revisit Fuzzy Neural Network: Demystifying Batch Normalization and ReLU with Generalized Hamming Network</a></p><h1 id="CS5141701-æ·±åº¦å­¸ç¿’å°è«–åŠå…¶æ‡‰ç”¨-Introduction-to-Deep-Learning-and-Its-Applications"><a href="#CS5141701-æ·±åº¦å­¸ç¿’å°è«–åŠå…¶æ‡‰ç”¨-Introduction-to-Deep-Learning-and-Its-Applications" class="headerlink" title="CS5141701 æ·±åº¦å­¸ç¿’å°è«–åŠå…¶æ‡‰ç”¨ Introduction to Deep Learning and Its Applications"></a>CS5141701 æ·±åº¦å­¸ç¿’å°è«–åŠå…¶æ‡‰ç”¨ Introduction to Deep Learning and Its Applications</h1><p><a href="http://speech.ee.ntu.edu.tw/~tlkagk/courses_MLSD15_2.html" target="_blank" rel="noopener">Hung-yi Leeâ€™S CourseInfo</a></p><p><a href="https://datawhalechina.github.io/leeml-notes/#/" target="_blank" rel="noopener">æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°(LeeML-Notes)</a></p><iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PLXVfgk9fNX2I7tB6oIINGBmW50rrmFTqf" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PLXVfgk9fNX2IQOYPmqjqWsNUFl2kpk1U2" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><iframe width="560" height="315" src="https://www.youtube.com/embed/CXgbekl66jc?start=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><iframe width="560" height="315" src="https://www.youtube.com/embed/JGZFYJFoxDA?start=3947" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h1 id="ã€è²¡é‡‘å­¸ç¨‹ã€‘FBG006301-å“ç‰Œåƒ¹å€¼å‰µæ–°è¬›åº§-Seminar-on-Brand-Value-Innovation"><a href="#ã€è²¡é‡‘å­¸ç¨‹ã€‘FBG006301-å“ç‰Œåƒ¹å€¼å‰µæ–°è¬›åº§-Seminar-on-Brand-Value-Innovation" class="headerlink" title="ã€è²¡é‡‘å­¸ç¨‹ã€‘FBG006301 å“ç‰Œåƒ¹å€¼å‰µæ–°è¬›åº§ Seminar on Brand Value Innovation"></a>ã€è²¡é‡‘å­¸ç¨‹ã€‘FBG006301 å“ç‰Œåƒ¹å€¼å‰µæ–°è¬›åº§ Seminar on Brand Value Innovation</h1><p><a href="https://docs.google.com/presentation/d/1EokcapXuKWdFcqMF8_RCJ9WLSpPHzAfqs9S3ddTh7A0/edit?usp=sharing" target="_blank" rel="noopener">æŸ¯é”ä¼æ¥­å¤±æ•—å€‹æ¡ˆåˆ†æ</a></p><h1 id="TCG037301-è¦ªè¿‘ç¶“å…¸æ™ºæ…§-Wisdom-in-Classics"><a href="#TCG037301-è¦ªè¿‘ç¶“å…¸æ™ºæ…§-Wisdom-in-Classics" class="headerlink" title="TCG037301 è¦ªè¿‘ç¶“å…¸æ™ºæ…§ Wisdom in Classics"></a>TCG037301 è¦ªè¿‘ç¶“å…¸æ™ºæ…§ Wisdom in Classics</h1><p><a href="https://docs.google.com/presentation/d/1VrzqySkwp_2s_XxrMa3tAunXpURI08F3ZUdXqflCeE8/edit?usp=sharing" target="_blank" rel="noopener">ç•œç‰§æ¥­çš„é™°è¬€</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Recommend System</title>
      <link href="/2019/10/03/Recommend-System/"/>
      <url>/2019/10/03/Recommend-System/</url>
      
        <content type="html"><![CDATA[<p><a href="http://wepon.me/" target="_blank" rel="noopener">http://wepon.me/</a> pku<br><a href="https://coladrill.github.io/about/" target="_blank" rel="noopener">https://coladrill.github.io/about/</a> seu<br><a href="https://github.com/ColaDrill/2018spa" target="_blank" rel="noopener">https://github.com/ColaDrill/2018spa</a> æ¨èç³»ç»Ÿ</p><p><a href="https://www.zhihu.com/people/coladrill/activities" target="_blank" rel="noopener">https://www.zhihu.com/people/coladrill/activities</a><br>æ¨èç³»ç»Ÿ å¿…çœ‹</p><p><a href="https://zhuanlan.zhihu.com/p/82671707?utm_source=wechat_session&utm_medium=social&utm_oi=973611927536181248" target="_blank" rel="noopener">æ‰‹å†™xgboost</a></p><h1 id="Special-Projects"><a href="#Special-Projects" class="headerlink" title="Special Projects"></a>Special Projects</h1><h2 id="Previous"><a href="#Previous" class="headerlink" title="Previous"></a>Previous</h2><p>The Uni require all the undergraduate student to reach out the Special Projects.</p><h2 id="Mission"><a href="#Mission" class="headerlink" title="Mission:"></a>Mission:</h2><p>Recommend systems based on the Collaborative Filtering</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2><ul><li><p><a href="https://spinningup.readthedocs.io/zh_CN/latest/" target="_blank" rel="noopener">Reinforcement Spinning Up</a></p></li><li><p><a href="https://d2l.ai/chapter_recommender-systems/index.html" target="_blank" rel="noopener">Introduction to Deep Learning STAT 157, UC Berkeley, Spring, 2019</a><br>Reference By <a href="https://zhuanlan.zhihu.com/p/66062438" target="_blank" rel="noopener">åœ¨ä¼¯å…‹åˆ©æ•™æ·±åº¦å­¦ä¹ </a></p></li></ul><p><a href="https://www.bilibili.com/video/av63439164?from=search&seid=3600678311547036502" target="_blank" rel="noopener">Talk in Mandarin</a></p><ul><li><a href="https://zhuanlan.zhihu.com/p/27908027" target="_blank" rel="noopener">Intro CNN</a></li></ul><iframe width="560" height="315" src="https://www.youtube.com/embed/tH9FH1DH5n0?start=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><blockquote class="blockquote-center"><p>Elegant in code, simple in core</p></blockquote><h3 id="IEEE-International-Conference-on-Signal-Information-and-Data-Processing-2019"><a href="#IEEE-International-Conference-on-Signal-Information-and-Data-Processing-2019" class="headerlink" title="IEEE International Conference on Signal, Information and Data Processing 2019"></a>IEEE International Conference on Signal, Information and Data Processing 2019</h3><p><a href="https://www.scribd.com/document/431478280/Automatic-Digital-Recognition-of-Multiple-E-lect-rici-ty-Dash-boar-ds-pdf" target="_blank" rel="noopener">Automatic Digital Recognition of Multiple Electricity Dashboards, (accepted) [EI]</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>108_FALL</title>
      <link href="/2019/09/28/Prepare4Interview/"/>
      <url>/2019/09/28/Prepare4Interview/</url>
      
        <content type="html"><![CDATA[<h3 id="è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿ"><a href="#è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿ"></a>è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿ</h3><ul><li><p>ä¸€ä¸ªæµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼šæŠŠæ‰€æœ‰æµç¨‹è¿èµ·æ¥æŠŠæƒ³åˆ°çš„çŸ¥è¯†æ¢³ç†ä¸€éï¼Œhttpä¼ è¾“ï¼Œjsonè§£æï¼Œtomcatæ”¶åˆ°è¯·æ±‚ï¼Œ springmvcè§£æè¯·æ±‚ï¼Œ ä¼ ç»™æœåŠ¡å±‚ï¼Œ è¯·æ±‚æ•°æ®åº“ï¼Œ æŸ¥è¯¢æ•°æ®åº“ï¼Œ æ•°æ®åº“æŸ¥æ‰¾ç´¢å¼•ï¼Œæ•°æ®åº“è¿”å›æ•°æ®ã€‚</p></li><li><p>ç¡¬ç›˜è½¬é€Ÿå’Œæ–‡ä»¶ç³»ç»Ÿè¯»å†™é€Ÿåº¦çš„å…³ç³»</p></li><li><p>åŠ å¯†ä¸ºä»€ä¹ˆä¸ç”¨https</p></li></ul><h1 id="ä¹ç« ç®—æ³•-ã€ŠJavaå…¥é—¨ä¸åŸºç¡€ç®—æ³•ç­ã€‹"><a href="#ä¹ç« ç®—æ³•-ã€ŠJavaå…¥é—¨ä¸åŸºç¡€ç®—æ³•ç­ã€‹" class="headerlink" title="ä¹ç« ç®—æ³• ã€ŠJavaå…¥é—¨ä¸åŸºç¡€ç®—æ³•ç­ã€‹"></a>ä¹ç« ç®—æ³• ã€ŠJavaå…¥é—¨ä¸åŸºç¡€ç®—æ³•ç­ã€‹</h1><ul><li><p>Javaè¯­è¨€åŸºç¡€ï¼šæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œå‡½æ•°ï¼Œç±»ï¼Œå¯¹è±¡ï¼Œå¼•ç”¨</p></li><li><p>Javaç®—æ³•åŸºç¡€ï¼š æšä¸¾æ³•ï¼Œè´ªå¿ƒæ³•ï¼Œé€’å½’ï¼Œé“¾è¡¨ï¼Œæ ˆï¼Œæ ‘ï¼Œé€’å½’ï¼Œå“ˆå¸Œè¡¨ï¼Œæ’åº</p></li></ul><h1 id="é—®é¢˜ç±»å‹"><a href="#é—®é¢˜ç±»å‹" class="headerlink" title="é—®é¢˜ç±»å‹"></a>é—®é¢˜ç±»å‹</h1><ul><li>æ“ä½œç³»ç»Ÿï¼šï¼ˆæ‰¾æ‰‹æœºç›¸å†Œé‡Œé¢çš„å›¾ç‰‡ï¼‰</li></ul><h2 id="ç´ è´¨æµ‹è¯•æ•°å­—æ¨ç†å’Œå›¾å½¢æ¨ç†"><a href="#ç´ è´¨æµ‹è¯•æ•°å­—æ¨ç†å’Œå›¾å½¢æ¨ç†" class="headerlink" title="ç´ è´¨æµ‹è¯•æ•°å­—æ¨ç†å’Œå›¾å½¢æ¨ç†"></a>ç´ è´¨æµ‹è¯•æ•°å­—æ¨ç†å’Œå›¾å½¢æ¨ç†</h2><p>å­—ç¬¦ä¸²æ’é‡å¹¶æ’åº</p><h2 id="ä¸“ä¸šæµ‹è¯•"><a href="#ä¸“ä¸šæµ‹è¯•" class="headerlink" title="ä¸“ä¸šæµ‹è¯•"></a>ä¸“ä¸šæµ‹è¯•</h2><h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><h4 id="ä¸€çº§ä¸­è¯"><a href="#ä¸€çº§ä¸­è¯" class="headerlink" title="ä¸€çº§ä¸­è¯"></a>ä¸€çº§ä¸­è¯</h4><p>dijkstra<br>lruç¼“å­˜æœºåˆ¶ ç®—æ³•ä¹Ÿå¯ä»¥è€ƒç³»ç»Ÿè®¾è®¡<br>é“¾è¡¨æ’åº<br>lruå¦‚ä½•ä¿è¯o1çš„æŸ¥æ‰¾å’Œä¿®æ”¹</p><p>å¤©å“¥é¢è¯•ï¼šï¼ˆå¿…ä¼šï¼‰</p><ul><li><p>1:å†™ä¸€ä¸ªäºŒå‰æ ‘çš„å±‚æ¬¡éå†æˆ–è€…é“¾è¡¨çš„å–ä¸­å¿ƒç‚¹+æŠŠé“¾è¡¨ä¸­å¿ƒç‚¹åçš„éƒ¨åˆ†åè½¬</p></li><li><p>2:å¿«é€Ÿæ’åºå’ŒäºŒåˆ†å½’å¹¶æ’åºæœ‰ä»€ä¹ˆä¸åŒï¼Œæœ€åå’Œå¹³å‡æ—¶é—´å¤æ‚åº¦åˆ†åŠæ˜¯å¤šå°‘</p></li><li><p>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œé™¤äº†æ—¶é—´ç‰‡è½®è½¬æ³•å¤–ï¼Œä½ è¿˜çŸ¥é“ä»€ä¹ˆè¿›ç¨‹è°ƒåº¦ç®—æ³•</p></li><li><p>çº¿ç¨‹æŒæœ‰é”çš„å˜é‡æ—¶ï¼Œçº¿ç¨‹è¢«åˆ‡æ¢äº†ï¼ˆè‹¥åªæœ‰cpuæ—¶é—´ç‰‡åˆ°äº†çš„è¯ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œä¸ç„¶ä¹Ÿå°±ä¸å­˜åœ¨æ­»é”é—®é¢˜äº†ï¼‰ï¼Œé”ä¼šè¢«é‡Šæ”¾å—ï¼Ÿ<br>ä¸ä¼šï¼Œè¿›ç¨‹é‡Šæ”¾æ‰€æœ‰èµ„æºï¼Œçº¿ç¨‹ä¸ä¼šï¼Œ</p></li><li><p>Javaå®ç°b+æ ‘ï¼Œé“¾è¡¨å’Œæ ˆï¼Œéœå¤«æ›¼ã€‚ï¼ˆJavaé›†åˆçš„åº•å±‚å®ç°ï¼‰hashmap</p></li><li><p>dpå’Œå†™æ­£åˆ™</p></li><li><p>é€»è¾‘å›å½’å’Œsvméƒ½å¯ä»¥ç”¨æ¥ä½œäºŒåˆ†ç±»ï¼Œä»–ä»¬çš„lost functionæœ‰ä»€ä¹ˆä¸åŒ</p></li><li><p>å†™ä¸€ä¸ªdnnæˆ–è€…çº¿æ€§å›å½’çš„åå‘ä¼ æ’­ç®—æ³•çš„æ¨å¯¼</p></li><li><p>svmä¸­æ ¸å‡½æ•°èµ·åˆ°çš„ä½œç”¨ï¼Œ</p></li><li><p>ä¿¡æ¯å¢ç›Šæ˜¯æ€ä¹ˆç”¨äºå†³ç­–æ ‘ä¸­çš„ç‰¹å¾é€‰æ‹©</p></li><li><p>pcaçš„åŸç†æ˜¯ä»€ä¹ˆ</p></li><li><p>cnnä¸­çš„resnetä¸­çš„resæŒ‡ä»€ä¹ˆ</p></li><li><p>depthwiseæœ‰ä»€ä¹ˆå¥½å¤„</p></li><li><p>è®¡ç®—ä¸€ä¸‹ä¸€ä¸ªcnnå·ç§¯ä¸€æ¬¡çš„è®¡ç®—é‡</p></li><li><p>ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°</p></li></ul><h4 id="äºŒçº§ä¸­è¯"><a href="#äºŒçº§ä¸­è¯" class="headerlink" title="äºŒçº§ä¸­è¯"></a>äºŒçº§ä¸­è¯</h4><p>çº¢é»‘æ ‘ï¼Œå¹³è¡¡æ ‘ï¼Œb+æ ‘ï¼Œè·³è·ƒè¡¨</p><h3 id="JavaåŸºç¡€"><a href="#JavaåŸºç¡€" class="headerlink" title="JavaåŸºç¡€"></a>JavaåŸºç¡€</h3><ul><li>åŸºç¡€æ•°æ®ç±»å‹</li><li>protectedä¿®é¥°ç¬¦</li><li>æŠ½è±¡ç±»å’Œæ¥å£åŒºåˆ«</li><li>Javaå†…å­˜ç»“æ„ï¼ˆé‡è¦ï¼‰</li><li>Javaå¹¶å‘å’Œçº¿ç¨‹åŒæ­¥ã€‚åŒæ­¥æœºåˆ¶å’Œé”è§£é‡Šä¸€ä¸‹</li><li>synchronizedå’ŒlockåŒºåˆ«</li><li>ç±»ï¼Œç»§æ‰¿ï¼Œå¤šæ€çš„æ¦‚å¿µ</li><li>è®¾è®¡çˆ¬è™«ï¼Œä½ éœ€è¦è®¾è®¡ä»€ä¹ˆ</li><li>wait()å’Œsleep(åŒºåˆ«)</li><li>å¤šçº¿ç¨‹çš„ç†è§£</li><li>hashtableå’ŒhashmapåŒºåˆ«</li><li><p>synchronizedå¦‚ä½•ä¿è¯åŸå­æ€§ï¼š<br>monitor ï¼Œç»§ç»­æ·±å…¥ï¼šå¦‚ä½•ä¿è¯è¯»å–å¯¹è±¡å¤´å’Œä¿®æ”¹å¯¹è±¡å¤´çš„åŸå­æ€§<br>*</p><h3 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h3></li><li><p>è®¾è®¡æ¨¡å¼ï¼šæ‰‹ç”»ä»£ç†æ¨¡å¼</p></li></ul><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><p>äº‹åŠ¡ä¸€å®šä¼šé”è¡¨å—</p><h3 id="é¡¹ç›®"><a href="#é¡¹ç›®" class="headerlink" title="é¡¹ç›®"></a>é¡¹ç›®</h3><p>æ‰¾åˆ°ä¸€ä¸ªç—›ç‚¹ éš¾ç‚¹ï¼š<br>ï¼ˆç‰¹è‰²æ¨¡å—ï¼‰ï¼šå•ç‚¹ç™»å½•ï¼Œå…¨å±€æœç´¢ï¼ˆæœå…³é”®å­—ï¼Œå¿«é€Ÿæ‰¾åˆ°ï¼‰</p><h3 id="åä¸º"><a href="#åä¸º" class="headerlink" title="åä¸º"></a>åä¸º</h3><ul><li>6ä¸ªæ•°æ‰¾å‡ºé‡Œé¢æœ€å¤§çš„ä¸¤ä¸ªæ•°</li><li>ä¸€ä¸ªå››åˆ™è¿ç®—å­—ç¬¦ä¸²å†™ç¨‹åºè¿ç®—å‡ºç»“æœ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Computer Networks</title>
      <link href="/2019/08/28/Computer-Networkds/"/>
      <url>/2019/08/28/Computer-Networkds/</url>
      
        <content type="html"><![CDATA[<p>##<br><a href="https://www.cnblogs.com/inception6-lxc/p/9152691.html" target="_blank" rel="noopener">è®¡ç®—æœºç½‘ç»œå¸¸è§é¢è¯•é¢˜</a></p><p><a href="https://www.cnblogs.com/fundebug/p/what-happens-from-url-to-webpage.html" target="_blank" rel="noopener">ç»å…¸é¢è¯•é¢˜ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿä»€ä¹ˆä¹‹ä¼šè¯é¡ºåºï¼Ÿ</a></p><h3 id="æ¶‰åŠåˆ°çš„åè®®"><a href="#æ¶‰åŠåˆ°çš„åè®®" class="headerlink" title="æ¶‰åŠåˆ°çš„åè®®"></a>æ¶‰åŠåˆ°çš„åè®®</h3><p>(1) åº”ç”¨å±‚ï¼šHTTP(WWWè®¿é—®åè®®)ï¼ŒDNS(åŸŸåè§£ææœåŠ¡)</p><p>(2) ä¼ è¾“å±‚ï¼šTCP(ä¸ºHTTPæä¾›å¯é çš„æ•°æ®ä¼ è¾“)ï¼ŒUDP(DNSä½¿ç”¨UDPä¼ è¾“)</p><p>(3) ç½‘ç»œå±‚ï¼šIP(IPæ•°æ®æ•°æ®åŒ…ä¼ è¾“å’Œè·¯ç”±é€‰æ‹©)ï¼ŒICMP(æä¾›ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å·®é”™æ£€æµ‹)ï¼ŒARP(å°†æœ¬æœºçš„é»˜è®¤ç½‘å…³IPåœ°å€æ˜ å°„æˆç‰©ç†MACåœ°å€)</p><p><a href="https://www.cnblogs.com/gopark/p/8430916.html" target="_blank" rel="noopener">ä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿä»€ä¹ˆä¹‹åˆ†å¸ƒå¼DNSåŸç†åŠè§£æé¡ºåºï¼Œæµè§ˆå™¨å¦‚ä½•é€šè¿‡åŸŸåå»æŸ¥è¯¢ URL å¯¹åº”çš„ IP </a></p><blockquote><p>è·¯ç”±å™¨æ˜¯ä¸€ç§ä¸‰å±‚è®¾å¤‡ï¼Œä¸»è¦ä½¿ç”¨ipåœ°å€è¿›è¡Œç½‘é—´è·¯ç”±æŸ¥è¯¢ä¸ipåŒ…çš„è½¬å‘ã€‚è€Œäº¤æ¢æœºæ˜¯ä¸€ç§äºŒå±‚è®¾å¤‡ï¼Œä½¿ç”¨MACåœ°å€è¿›è¡Œå¯»å€ï¼Œå®ç°ä¸€ä¸ªç½‘ç»œå†…çš„æ•°æ®å¸§çš„è½¬å‘ã€‚<br>Aç±»ç½‘ç»œä¸º1åˆ°126<br>Bç±»ç½‘ç»œä¸º129åˆ°191<br>Cç±»ç½‘ç»œä¸º192åˆ°223<br>IPV4æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€ï¼Œç”¨4ä¸ªåè¿›åˆ¶æ•°å­—è¡¨ç¤ºã€‚ä»¥Cç±»åœ°å€192.168.24.1ä¸ºä¾‹ï¼Œå…¶ä¸­å‰24ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå8ä½æ˜¯ä¸»æœºåœ°å€ã€‚å¦‚æœä¸¤ä¸ªIPåœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘å†…ï¼Œåˆ™ç½‘ç»œåœ°å€ä¸€å®šç›¸åŒã€‚</p></blockquote><blockquote><p>æœºå™¨Açš„ipåœ°å€ä¸º 202.96.128.130ï¼Œå­ç½‘æ©ç ä¸º255.255.255.128ï¼Œåˆ™IPåœ°å€çš„ç½‘ç»œå·ä¸º202.96.128ï¼Œä¸»æœºå·ä¸º130</p></blockquote><p> äºŒå±‚äº¤æ¢æœºå·¥ä½œäºOSIæ¨¡å‹çš„ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚ï¼ˆç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ï¼‰ï¼Œå®ƒå¯ä»¥è¯†åˆ«æ•°æ®åŒ…ä¸­çš„MACåœ°å€ä¿¡æ¯ï¼Œ<strong>æ ¹æ®<code>MACåœ°å€</code>è¿›è¡Œè½¬å‘</strong>ï¼Œå¹¶å°†è¿™å†™åœ°å€ä¸å¯¹åº”çš„è¿æ¥ç«¯å£è®°å½•åœ¨è‡ªå·±å†…éƒ¨çš„ä¸€ä¸ªåœ°å€è¡¨ä¸­ã€‚</p><p>ä¸‰å±‚äº¤æ¢æœºï¼ˆè·¯ç”±å™¨ï¼‰<br>ä¸‰å±‚äº¤æ¢æœºå·¥ä½œäºOSIæ¨¡å‹ä¸­çš„ç¬¬ä¸‰å±‚ç½‘ç»œå±‚ï¼Œä¸»è¦ç›®çš„æ˜¯åŠ å¿«å¤§å‹å±€åŸŸç½‘å†…éƒ¨çš„æ•°æ®äº¤æ¢ã€‚äºŒå±‚äº¤æ¢æœºæ˜¯æ ¹æ®MACåœ°å€è¿›è¡Œå¤„ç†æ•°æ®ï¼Œ <strong>ä¸‰å±‚äº¤æ¢æœºæ˜¯æ ¹æ®<code>IPåœ°å€</code>è¿›è¡Œå¤„ç†æ•°</strong>æ®</p><blockquote><p>å­ç½‘æ©ç ï¼šå­ç½‘æ©ç åªæœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯å°†æŸä¸ªIPåœ°å€åˆ’åˆ†æˆç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†.é€šè¿‡ANDæŒ‰ä½ä¸è¿ç®—å³å¯ç¡®å®šã€‚</p></blockquote><p>DNSæ˜¯åº”ç”¨å±‚åè®®</p><p>ç½‘å…³æ˜¯ä»ä¸€ä¸ªç½‘ç»œåˆ°å¦ä¸€ä¸ªç½‘ç»œçš„å…³å£ï¼Œæˆ–è€…è¯´æ˜¯ä»ä¸€ä¸ªç½‘ç»œé€šå‘å…¶ä»–ç½‘ç»œçš„IPåœ°å€ã€‚æ¯”å¦‚æœ‰ç½‘ç»œAå’Œç½‘ç»œBï¼ŒAçš„IPèŒƒå›´<code>192.168.1.1</code> ~ <code>192.168.1.254</code>ï¼Œå­ç½‘æ©ç <code>255.255.255.0</code>ï¼ŒBçš„IPèŒƒå›´æ˜¯<code>192.168.2.1</code> ~ <code>192.168.2.254</code>ï¼Œå­ç½‘æ©ç ä¸º<code>255.255.255.0</code>.åœ¨æ²¡æœ‰è·¯ç”±å™¨çš„æƒ…å†µä¸‹ï¼ŒAç½‘ç»œå’ŒBç½‘ç»œæ˜¯ä¸èƒ½è¿›è¡ŒTCPï¼ŸIPé€šä¿¡çš„ã€‚TCP/IPåè®®ä¼šåˆ¤å®šä¸¤ä¸ªç½‘ç»œä¸­çš„ä¸»æœºå±äºä¸åŒçš„ç½‘ç»œã€‚å¦‚æœç½‘ç»œAä¸­çš„ä¸»æœºå‘ç°æ•°æ®åŒ…çš„ç›®çš„ä¸»æœºä¸åœ¨è‡ªå·±æ‰€å±çš„ç½‘ç»œä¸­ï¼Œå®ƒå°±ä¼šæŠŠæ•°æ®åŒ…å‘é€ç»™è‡ªå·±çš„ç½‘å…³ï¼Œå†ç”±ç½‘å…³è½¬å‘ç»™ç½‘ç»œBçš„ç½‘å…³ï¼Œæœ€ç»ˆç½‘ç»œBçš„ç½‘å…³å†è½¬å‘ä¸ªç½‘ç»œBä¸­çš„æŸä¸ªä¸»æœºã€‚</p><p><a href="https://blog.csdn.net/A_LINGYUAN/article/details/80036329" target="_blank" rel="noopener">ARPåŸç†</a></p><ul><li>åªè¦çŸ¥é“äº†ç›®æ ‡åœ°å€çš„IPï¼Œå°±å¯ä»¥æƒ³è¿™ä¸ªç›®æ ‡IPå‘é€æ•°æ®åŒ…ï¼Œä½†æ˜¯ï¼Œåœ¨ç½‘ç»œå±‚ä»¥ä¸‹çš„é“¾è·¯å±‚ï¼Œå®é™…è¿›è¡Œé€šä¿¡çš„è¿˜æ˜¯MACï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯ä¸¤ä¸ªç½‘å¡ä¹‹é—´çš„é€šä¿¡ã€‚ARPåœ°å€è§£æåè®®ä»¥IPåœ°å€ä¸ºçº¿ç´¢ï¼Œç”¨æ¥å®šä½ä¸‹ä¸€ä¸ªåº”è¯¥æ¥æ”¶æ•°æ®åŒ…çš„ä¸»æœºçš„MACåœ°å€ã€‚ARPæ˜¯æ ¹æ®IPåœ°å€è·å–MACåœ°å€çš„ä¸€ä¸ªç½‘ç»œå±‚åè®®ã€‚</li></ul><blockquote><p>Aç±»åœ°å€ï¼šç¬¬1åˆ°8ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œé¦–ä½ä»¥äºŒè¿›åˆ¶0å¼€å¤´ï¼Œå24ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚<br>Bç±»åœ°å€ï¼šç¬¬1åˆ°16ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰ä¸¤ä½æ˜¯äºŒè¿›åˆ¶10ï¼Œå16ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚<br>Cç±»åœ°å€ï¼šç¬¬1åˆ°24ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰ä¸‰ä½æ˜¯äºŒè¿›åˆ¶110ï¼Œå8ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚<br>Dç±»åœ°å€ï¼šç¬¬1åˆ°32ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰å››ä½æ˜¯äºŒè¿›åˆ¶1110ï¼Œæ²¡æœ‰ä¸»æœºåœ°å€ã€‚</p></blockquote><p>æ‰€ä»¥åªæœ‰è®¾ç½®å¥½ç½‘å…³çš„IPï¼ŒTCP/IPåè®®æ‰èƒ½å®ç°ä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ã€‚ç½‘å…³çš„IPåœ°å€æ˜¯å…·æœ‰è·¯ç”±åŠŸèƒ½çš„è®¾å¤‡çš„IPåœ°å€ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å™¨ã€‚</p><p><a href="https://blog.csdn.net/weixin_34183910/article/details/91858109" target="_blank" rel="noopener">ç½‘ç»œä¼ è¾“ä¸­çš„å¿ƒè·³æ§åˆ¶</a></p><h3 id="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ</h3><p>å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒ æ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿æ¥æ—¶ï¼Œå½“Serverç«¯<br>æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€ä½  å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘<br>æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ­¥æ¡æ‰‹ã€‚<br><img src="https://pic1.zhimg.com/80/v2-e0f97d5a91bba0350232020bdbbe5f38_hd.jpg" alt="TCP / IPä¸‰æ¡å››æŒ¥"></p><h2 id="DNSçš„åŸç†"><a href="#DNSçš„åŸç†" class="headerlink" title="DNSçš„åŸç†"></a>DNSçš„åŸç†</h2><h2 id="HTTPæŠ¥æ–‡æ ¼å¼ã€å¤´éƒ¨å­—æ®µç­‰"><a href="#HTTPæŠ¥æ–‡æ ¼å¼ã€å¤´éƒ¨å­—æ®µç­‰" class="headerlink" title="HTTPæŠ¥æ–‡æ ¼å¼ã€å¤´éƒ¨å­—æ®µç­‰"></a>HTTPæŠ¥æ–‡æ ¼å¼ã€å¤´éƒ¨å­—æ®µç­‰</h2><ul><li>è¯·æ±‚æ–¹æ³•â€œæ–¹æ³•URLè®®/ç‰ˆæœ¬â€ï¼š<code>GET/sample.jsp HTTP/1.1</code></li><li><p>è¯·æ±‚å¤´(Request Header)<br>è¯·æ±‚å¤´åŒ…å«è®¸å¤šæœ‰å…³çš„å®¢æˆ·ç«¯ç¯å¢ƒå’Œè¯·æ±‚æ­£æ–‡çš„æœ‰ç”¨ä¿¡æ¯ã€‚è¯·æ±‚å¤´å¯ä»¥å£°æ˜æµè§ˆå™¨æ‰€ç”¨çš„è¯­è¨€ï¼Œè¯·æ±‚æ­£æ–‡çš„é•¿åº¦ç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Accept:image/gif.image/jpeg.*/*</span><br><span class="line">Accept-Language:zh-cn</span><br><span class="line">Connection:Keep-Alive</span><br><span class="line">Host:localhost</span><br><span class="line">User-Agent:Mozila/4.0(compatible:MSIE5.01:Windows NT5.0)</span><br><span class="line">Accept-Encoding:gzip,deflate.</span><br></pre></td></tr></table></figure></li><li><p>è¯·æ±‚æ­£æ–‡<br>  è¯·æ±‚å¤´å’Œè¯·æ±‚æ­£æ–‡ä¹‹é—´æ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œè¿™ä¸ªè¡Œéå¸¸é‡è¦ï¼Œå®ƒè¡¨ç¤ºè¯·æ±‚å¤´å·²ç»ç»“æŸï¼Œæ¥ä¸‹æ¥çš„æ˜¯è¯·æ±‚æ­£æ–‡ã€‚è¯·æ±‚æ­£æ–‡ä¸­å¯ä»¥åŒ…å«å®¢æˆ·æäº¤çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¿¡æ¯ï¼š<br><code>username=jinqiao&amp;password=1234</code></p></li></ul><h2 id="sessionå’Œcookie"><a href="#sessionå’Œcookie" class="headerlink" title="sessionå’Œcookie"></a>sessionå’Œcookie</h2><p>cookieæ˜¯WebæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„ä¸€å—ä¿¡æ¯ã€‚æµè§ˆå™¨ä¼šåœ¨æœ¬åœ°æ–‡ä»¶ä¸­ç»™æ¯ä¸€ä¸ªWebæœåŠ¡å™¨å­˜å‚¨cookieã€‚ä»¥åæµè§ˆå™¨åœ¨ç»™ç‰¹å®šçš„WebæœåŠ¡å™¨å‘è¯·æ±‚çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šå‘é€æ‰€æœ‰ä¸ºè¯¥æœåŠ¡å™¨å­˜å‚¨çš„cookieã€‚ä¸‹é¢åˆ—å‡ºäº†sessionå’Œcookieçš„åŒºåˆ«ï¼š</p><ul><li>æ— è®ºå®¢æˆ·ç«¯æµè§ˆå™¨åšæ€ä¹ˆæ ·çš„è®¾ç½®ï¼Œsessionéƒ½åº”è¯¥èƒ½æ­£å¸¸å·¥ä½œã€‚å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ç¦ç”¨cookieï¼Œä½†æ˜¯ï¼Œsessionä»ç„¶æ˜¯èƒ½å¤Ÿå·¥ä½œçš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯æ— æ³•ç¦ç”¨æœåŠ¡ç«¯çš„sessionã€‚</li><li>åœ¨å­˜å‚¨çš„æ•°æ®é‡æ–¹é¢sessionå’Œcookiesä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚sessionèƒ½å¤Ÿå­˜å‚¨ä»»æ„çš„Javaå¯¹è±¡ï¼Œcookieåªèƒ½å­˜å‚¨Stringç±»å‹çš„å¯¹è±¡ã€‚<h2 id="IPv4å’ŒIPv6"><a href="#IPv4å’ŒIPv6" class="headerlink" title="IPv4å’ŒIPv6"></a>IPv4å’ŒIPv6</h2></li><li>åœ°å€ç©ºé—´ä¸åŒï¼ŒIPv4ä¸­è§„å®šIPåœ°å€é•¿åº¦ä¸º32ï¼Œè€ŒIPv6ä¸­IPåœ°å€çš„é•¿åº¦ä¸º128ã€‚</li><li>è·¯ç”±è¡¨å¤§å°ä¸åŒï¼ŒIPv6çš„è·¯ç”±è¡¨ç›¸æ¯”IPv4çš„æ›´å°ã€‚</li><li>å®‰å…¨æ€§ä¸åŒï¼ŒIPv6çš„å®‰å…¨æ€§æ›´é«˜ï¼Œåœ¨ä½¿ç”¨IPv6çš„ç½‘ç»œæ—¶ï¼Œç”¨æˆ·å¯å¯¹ç½‘ç»œå±‚çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚</li></ul><h2 id="æ•°å­—è¯ä¹¦å¦‚ä½•ç”Ÿæˆ"><a href="#æ•°å­—è¯ä¹¦å¦‚ä½•ç”Ÿæˆ" class="headerlink" title="æ•°å­—è¯ä¹¦å¦‚ä½•ç”Ÿæˆ"></a><a href="https://baijiahao.baidu.com/s?id=1632331114122702660&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">æ•°å­—è¯ä¹¦å¦‚ä½•ç”Ÿæˆ</a></h2><h3 id="DHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€çš„é…ç½®å‚æ•°çš„æ‰‹æ®µ"><a href="#DHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€çš„é…ç½®å‚æ•°çš„æ‰‹æ®µ" class="headerlink" title="DHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€çš„é…ç½®å‚æ•°çš„æ‰‹æ®µ"></a>DHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€çš„é…ç½®å‚æ•°çš„æ‰‹æ®µ</h3><ul><li><a href="https://blog.csdn.net/weikanghuan/article/details/50825762?locationNum=6&amp;fps=1" target="_blank" rel="noopener">ICMP pingæ£€æµ‹ç½‘ç»œé€šä¿¡æ•…éšœå’Œå®ç°é“¾è·¯è¿½è¸ª</a></li><li>ICMPï¼ˆInternet Control Message Protocolï¼‰Internetæ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP/IPåè®®ç°‡çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚</li></ul><h3 id="ä»ç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹"><a href="#ä»ç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹" class="headerlink" title="ä»ç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹"></a>ä»ç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹</h3><h3 id="å›¾è§£TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><a href="#å›¾è§£TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å›¾è§£TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></a><a href="https://hetaobackend.cn/2019/11/14/%E5%9B%BE%E8%A7%A3TCP&amp;IP-TCP%E4%B8%8EUDP/" target="_blank" rel="noopener">å›¾è§£TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</a></h3><h3 id="TCPåè®®å¦‚ä½•æ¥ä¿è¯ä¼ è¾“çš„å¯é æ€§"><a href="#TCPåè®®å¦‚ä½•æ¥ä¿è¯ä¼ è¾“çš„å¯é æ€§" class="headerlink" title="TCPåè®®å¦‚ä½•æ¥ä¿è¯ä¼ è¾“çš„å¯é æ€§"></a>TCPåè®®å¦‚ä½•æ¥ä¿è¯ä¼ è¾“çš„å¯é æ€§</h3><h3 id="å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§"><a href="#å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§" class="headerlink" title="å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§"></a>å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§</h3><h3 id="Getä¸POSTçš„åŒºåˆ«"><a href="#Getä¸POSTçš„åŒºåˆ«" class="headerlink" title="Getä¸POSTçš„åŒºåˆ«"></a>Getä¸POSTçš„åŒºåˆ«</h3><ul><li>getè¯·æ±‚å‚æ•°åœ¨urlåœ°å€ä¸Šï¼Œç›´æ¥æš´éœ²ï¼Œpostè¯·æ±‚çš„å‚æ•°æ”¾bodyéƒ¨åˆ†ï¼ŒæŒ‰F12ä¹Ÿç›´æ¥æš´éœ²äº†</li><li>GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚é•¿çš„è¯´ï¼šå¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200okï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚</li><li>getä¼ è¾“é‡å°,å› ä¸ºå—URLé•¿åº¦é™åˆ¶,ä½†æ•ˆç‡è¾ƒä½ã€‚postå¯ä»¥ä¼ è¾“å¤§é‡æ•°æ®,æ‰€ä»¥ä¸Šä¼ æ–‡ä»¶æ—¶åªèƒ½ç”¨postæ–¹å¼<h3 id="TCPçš„æ‹¥å¡å¤„ç†"><a href="#TCPçš„æ‹¥å¡å¤„ç†" class="headerlink" title="TCPçš„æ‹¥å¡å¤„ç†"></a>TCPçš„æ‹¥å¡å¤„ç†</h3><h3 id="TCPæ˜¯å¦‚ä½•è¿›è¡Œæµé‡æ§åˆ¶"><a href="#TCPæ˜¯å¦‚ä½•è¿›è¡Œæµé‡æ§åˆ¶" class="headerlink" title="TCPæ˜¯å¦‚ä½•è¿›è¡Œæµé‡æ§åˆ¶"></a>TCPæ˜¯å¦‚ä½•è¿›è¡Œæµé‡æ§åˆ¶</h3><h3 id="TCPå’ŒUDPåˆ†åˆ«å¯¹åº”çš„å¸¸è§åº”ç”¨å±‚åè®®"><a href="#TCPå’ŒUDPåˆ†åˆ«å¯¹åº”çš„å¸¸è§åº”ç”¨å±‚åè®®" class="headerlink" title="TCPå’ŒUDPåˆ†åˆ«å¯¹åº”çš„å¸¸è§åº”ç”¨å±‚åè®®"></a>TCPå’ŒUDPåˆ†åˆ«å¯¹åº”çš„å¸¸è§åº”ç”¨å±‚åè®®</h3><h3 id="IPåœ°å€çš„åˆ†ç±»"><a href="#IPåœ°å€çš„åˆ†ç±»" class="headerlink" title="IPåœ°å€çš„åˆ†ç±»"></a>IPåœ°å€çš„åˆ†ç±»</h3><h3 id="æœ‰äº†å”¯ä¸€çš„Macåœ°å€ä¸ºå•¥è¿˜éœ€è¦IPåœ°å€ï¼Ÿ"><a href="#æœ‰äº†å”¯ä¸€çš„Macåœ°å€ä¸ºå•¥è¿˜éœ€è¦IPåœ°å€ï¼Ÿ" class="headerlink" title="æœ‰äº†å”¯ä¸€çš„Macåœ°å€ä¸ºå•¥è¿˜éœ€è¦IPåœ°å€ï¼Ÿ"></a>æœ‰äº†å”¯ä¸€çš„Macåœ°å€ä¸ºå•¥è¿˜éœ€è¦IPåœ°å€ï¼Ÿ</h3><h3 id="äº¤æ¢æœºã€é›†çº¿å™¨ä¸è·¯ç”±å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#äº¤æ¢æœºã€é›†çº¿å™¨ä¸è·¯ç”±å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="äº¤æ¢æœºã€é›†çº¿å™¨ä¸è·¯ç”±å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>äº¤æ¢æœºã€é›†çº¿å™¨ä¸è·¯ç”±å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h3 id="ç½‘æ¡¥çš„ä½œç”¨"><a href="#ç½‘æ¡¥çš„ä½œç”¨" class="headerlink" title="ç½‘æ¡¥çš„ä½œç”¨"></a>ç½‘æ¡¥çš„ä½œç”¨</h3>ç½‘æ¡¥å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå°†ä¸¤ä¸ªLANè¿èµ·æ¥ï¼Œæ ¹æ®MACåœ°å€æ¥è½¬å‘å¸§ï¼Œå¯ä»¥çœ‹ä½œä¸€ä¸ªâ€œä½å±‚çš„è·¯ç”±å™¨â€ï¼ˆè·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œæ ¹æ®ç½‘ç»œåœ°å€å¦‚IPåœ°å€è¿›è¡Œè½¬å‘</li><li>è¿‡æ»¤é€šä¿¡é‡ã€‚ç½‘æ¡¥å¯ä»¥ä½¿ç”¨å±€åŸŸç½‘çš„ä¸€ä¸ªç½‘æ®µä¸Šå„å·¥ä½œç«™ä¹‹é—´çš„ä¿¡æ¯é‡å±€é™åœ¨æœ¬ç½‘æ®µçš„èŒƒå›´å†…ï¼Œè€Œä¸ä¼šç»è¿‡ç½‘æ¡¥æºœåˆ°å…¶ä»–ç½‘æ®µå»ã€‚</li><li>æ‰©å¤§äº†ç‰©ç†èŒƒå›´ï¼Œä¹Ÿå¢åŠ äº†æ•´ä¸ªå±€åŸŸç½‘ä¸Šçš„å·¥ä½œç«™çš„æœ€å¤§æ•°ç›®ã€‚</li><li>å¯ä½¿ç”¨ä¸åŒçš„ç‰©ç†å±‚ï¼Œå¯äº’è¿ä¸åŒçš„å±€åŸŸç½‘ã€‚</li><li>æé«˜äº†å¯é æ€§ã€‚å¦‚æœæŠŠè¾ƒå¤§çš„å±€åŸŸç½‘åˆ†å‰²æˆè‹¥å¹²è¾ƒå°çš„å±€åŸŸç½‘ï¼Œå¹¶ä¸”æ¯ä¸ªå°çš„å±€åŸŸç½‘å†…éƒ¨çš„ä¿¡æ¯é‡æ˜æ˜¾åœ°é«˜äºç½‘é—´çš„ä¿¡æ¯é‡ï¼Œé‚£ä¹ˆæ•´ä¸ªäº’è¿ç½‘ç»œçš„æ€§èƒ½å°±å˜å¾—æ›´å¥½<br>ç½‘æ¡¥ç¼ºç‚¹</li><li>ç”±äºç½‘æ¡¥å¯¹æ¥æ”¶çš„å¸§è¦å…ˆå­˜å‚¨å’ŒæŸ¥æ‰¾ç«™è¡¨ï¼Œç„¶åè½¬å‘ï¼Œè¿™å°±å¢åŠ äº†æ—¶å»¶ã€‚</li><li>åœ¨MACå­å±‚å¹¶æ²¡æœ‰æµé‡æ§åˆ¶åŠŸèƒ½ã€‚å½“ç½‘ç»œä¸Šè´Ÿè·å¾ˆé‡æ—¶ï¼Œå¯èƒ½å› ç½‘æ¡¥ç¼“å†²åŒºçš„å­˜å‚¨ç©ºé—´ä¸å¤Ÿè€Œå‘ç”Ÿæº¢å‡ºï¼Œä»¥è‡´äº§ç”Ÿå¸§ä¸¢å¤±çš„ç°è±¡ã€‚</li><li>å…·æœ‰ä¸åŒMACå­å±‚çš„ç½‘æ®µæ¡¥æ¥å†ä¸€èµ·æ—¶ï¼Œç½‘æ¡¥åœ¨è½¬å‘ä¸€ä¸ªå¸§ä¹‹å‰ï¼Œå¿…é¡»ä¿®æ”¹å¸§çš„æŸäº›å­—æ®µçš„å†…å®¹ï¼Œä»¥é€‚åˆå¦ä¸€ä¸ªMACå­å±‚çš„è¦æ±‚ï¼Œå¢åŠ æ—¶å»¶ã€‚</li><li>ç½‘æ¡¥åªé€‚åˆäºç”¨æˆ·æ•°ä¸å¤ªå¤šï¼ˆä¸è¶…è¿‡å‡ ç™¾ä¸ªï¼‰å’Œä¿¡æ¯é‡ä¸å¤ªå¤§çš„å±€åŸŸç½‘ï¼Œå¦åˆ™æœ‰æ—¶ä¼šäº§ç”Ÿè¾ƒå¤§çš„å¹¿æ’­é£æš´ã€‚<h3 id="ç½‘ç»œæ¥å£å¡ï¼ˆç½‘å¡ï¼‰çš„åŠŸèƒ½ï¼Ÿ"><a href="#ç½‘ç»œæ¥å£å¡ï¼ˆç½‘å¡ï¼‰çš„åŠŸèƒ½ï¼Ÿ" class="headerlink" title="ç½‘ç»œæ¥å£å¡ï¼ˆç½‘å¡ï¼‰çš„åŠŸèƒ½ï¼Ÿ"></a>ç½‘ç»œæ¥å£å¡ï¼ˆç½‘å¡ï¼‰çš„åŠŸèƒ½ï¼Ÿ</h3>ç½‘ç»œæ¥å£å¡å³ç½‘å¡ä¹Ÿå°±æ˜¯ç½‘ç»œé€‚é…å™¨ï¼Œæ¥æ”¶ä¸Šä¸€å±‚çš„ipæ•°æ®æŠ¥ï¼Œå¹¶å°†å…¶å°è£…æˆå¸§å‘é€åˆ°å±€åŸŸç½‘ä¸­ã€‚ä¸€èˆ¬çš„é€‚é…å™¨éƒ½åŒ…å«ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚è¿™ä¸¤å±‚çš„åŠŸèƒ½ã€‚ç½‘ç»œæ¥å£å¡å®ç°çš„æ˜¯TCP/IPå››å±‚å‚è€ƒæ¨¡å‹ä¸­çš„ç½‘ç»œæ¥å£å±‚ï¼Œå¯¹åº”OSIä¸ƒ å±‚å‚è€ƒæ¨¡å‹ä¸­çš„ ç‰©ç†å±‚åè®®å’Œæ•°æ®é“¾è·¯å±‚åè®®ã€‚</li></ul><h3 id="URIå’ŒURLçš„åŒºåˆ«"><a href="#URIå’ŒURLçš„åŒºåˆ«" class="headerlink" title="URIå’ŒURLçš„åŒºåˆ«"></a>URIå’ŒURLçš„åŒºåˆ«</h3><p>URIæ ‡è®°äº†ä¸€ä¸ªç½‘ç»œèµ„æºï¼Œä»…æ­¤è€Œå·²ï¼›  URLæ ‡è®°äº†ä¸€ä¸ªWWWäº’è”ç½‘èµ„æºï¼ˆç”¨åœ°å€æ ‡è®°ï¼‰ï¼Œå¹¶ç»™å‡ºäº†ä»–çš„è®¿é—®åœ°å€</p><h3 id="GETè¯·æ±‚ä¸­URLç¼–ç çš„æ„ä¹‰"><a href="#GETè¯·æ±‚ä¸­URLç¼–ç çš„æ„ä¹‰" class="headerlink" title="GETè¯·æ±‚ä¸­URLç¼–ç çš„æ„ä¹‰"></a>GETè¯·æ±‚ä¸­URLç¼–ç çš„æ„ä¹‰</h3><blockquote><p> é¦–å…ˆ url åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶ä½¿ç”¨ascllç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¸€ä¸ªè¯·æ±‚å‘å‡ºå»æœ€ç»ˆæ˜¯ä½¿ç”¨ascllç¼–ç çš„ï¼Œè¿™æ ·å­è¦æ˜¯æˆ‘ä»¬å‘å‡ºå»çš„è¯·æ±‚ä¸­åŒ…å«æœ‰éascllå­—ç¬¦çš„è¯ï¼Œå°±ä¼šè¢«æµè§ˆå™¨ç¼–ç ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œå„ä¸ªæµè§ˆå™¨å¯¹äºurlçš„ç¼–ç æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼ï¼ï¼è¿™å°±ä¼šå¯¼è‡´å¾ˆå¤§çš„é—®é¢˜ï¼ŒåŒä¸€ä¸ªurlåœ¨ä¸åŒçš„æµè§ˆå™¨ä¸­å®é™…å‘å‡ºçš„urléƒ½ä¸ä¸€æ ·äº†ï¼ŒæœåŠ¡å™¨è¿˜è¦æ€ä¹ˆè§£æè¿™äº›è¯·æ±‚çš„ï¼Ÿè¦è§£å†³è¿™ä¸ªé—®é¢˜æ•ˆç‡æœ€æœ€é«˜çš„æ–¹æ³•å°±æ˜¯åœ¨å‰ç«¯ä¸­å¯¹è¦å‘å‡ºçš„urlä½¿ç”¨js è¿›è¡Œç¼–ç ï¼Œç¼–ç åçš„urlå°±åªå‰©ä¸‹ascllç¼–ç ä¸­æœ‰çš„å­—ç¬¦äº†ã€‚è¿™å°±æ˜¯URLç¼–ç ã€‚<br>URLç¼–ç æŒ‡çš„æ˜¯å¯¹ç½‘å€ä¸Šçš„ä¸å®‰å…¨çš„å­—ç¬¦ï¼Œä¾‹å¦‚ä¸­æ–‡ï¼Œè¿›è¡Œç¼–ç ï¼Œç¼–ç åçš„ä¸­æ–‡æ–¹ä¾¿åœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚<strong>URLç¼–ç æ˜¯è´Ÿè´£æŠŠURLé‡Œé¢çš„ç©ºæ ¼å’Œå…¶ä»–çš„ç‰¹æ®Šå­—ç¬¦æ›¿æ¢æˆå¯¹åº”çš„åå…­è¿›åˆ¶è¡¨ç¤º</strong>ï¼Œåä¹‹å°±æ˜¯è§£ç ã€‚</p></blockquote><h3 id="APPlication-Sessionå’ŒCookieçš„åŒºåˆ«"><a href="#APPlication-Sessionå’ŒCookieçš„åŒºåˆ«" class="headerlink" title="APPlication,Sessionå’ŒCookieçš„åŒºåˆ«"></a><a href="https://www.cnblogs.com/breezeblew/archive/2008/05/02/1179143.html" target="_blank" rel="noopener">APPlication,Sessionå’ŒCookieçš„åŒºåˆ«</a></h3><h3 id="å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken"><a href="#å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken" class="headerlink" title="å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken"></a><a href="https://segmentfault.com/a/1190000017831088" target="_blank" rel="noopener">å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken</a></h3><h3 id="httpç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆ"><a href="#httpç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆ" class="headerlink" title="httpç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆ"></a><a href="https://blog.csdn.net/zouzixuan/article/details/84677548" target="_blank" rel="noopener">httpç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆ</a></h3><h3 id="å¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜"><a href="#å¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="å¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜"></a><a href="https://www.php.cn/website-design-ask-413969.html" target="_blank" rel="noopener">å¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜</a></h3><h3 id="ä»€ä¹ˆæ˜¯åˆ†å—ä¼ é€ã€‚"><a href="#ä»€ä¹ˆæ˜¯åˆ†å—ä¼ é€ã€‚" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å—ä¼ é€ã€‚"></a>ä»€ä¹ˆæ˜¯åˆ†å—ä¼ é€ã€‚</h3><p>å¦‚æœ HTTP æ•´å—ä¼ è¾“ï¼Œéœ€è¦æå‰è®¾ç½® Content-Lengthã€‚<br>åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked transfer encodingï¼‰å…è®¸æœåŠ¡ç«¯åœ¨ä¸é¢„å…ˆç»™å‡ºæŠ¥æ–‡é•¿åº¦çš„æƒ…å†µä¸‹ï¼Œåˆ†å—å°†è¾“å‡ºå‘é€ç»™å®¢æˆ·ç«¯ã€‚è¾“å‡ºç©ºæ®µè¡¨ç¤ºæŠ¥æ–‡ç»“æŸã€‚</p><h3 id="å‡ ç§ç½‘ç»œæ”»å‡»æ–¹æ³•"><a href="#å‡ ç§ç½‘ç»œæ”»å‡»æ–¹æ³•" class="headerlink" title="å‡ ç§ç½‘ç»œæ”»å‡»æ–¹æ³•"></a>å‡ ç§ç½‘ç»œæ”»å‡»æ–¹æ³•</h3><ul><li>XSS ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡») ã€æ”»å‡»è€…åœ¨ Web é¡µé¢ä¸­æ’å…¥æ¶æ„è„šæœ¬ï¼Œå½“ç”¨æˆ·æµè§ˆé¡µé¢æ—¶ï¼Œä¿ƒä½¿è„šæœ¬æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»ç›®çš„ã€‘<blockquote><p>(1)å®¢æœç«¯åŠæœåŠ¡ç«¯ç”¨æˆ·çš„è¾“å…¥æ•°æ®è¿›è¡ŒåŒé‡éªŒè¯(2)å¯¹æ‰€æœ‰çš„æ•°æ®è¿›è¡Œé€‚å½“çš„ç¼–ç (3)è®¾ç½® HTTP Headerï¼š â€œX-XSS-Protection:1â€</p></blockquote></li><li>DDos åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼Œã€å‘é€å¤§é‡è¯·æ±‚ï¼Œä½¿æœåŠ¡å™¨ç˜«ç—ªã€‘<blockquote><p>æœåŠ¡å™¨åŠ å¸¦å®½ï¼ˆæˆæœ¬æ˜‚è´µï¼‰2.ä½¿ç”¨DDos é˜²å¾¡äº§å“</p></blockquote></li><li>CSRF è·¨ç«™è¯·æ±‚ä¼ªé€  ã€ç”¨æˆ·æœ¬åœ°å­˜å‚¨cookieï¼Œæ”»å‡»è€…åˆ©ç”¨ç”¨æˆ·çš„cookieè¿›è¡Œè®¤è¯ï¼Œç„¶åä¼ªé€ ç”¨æˆ·å‘å‡ºè¯·æ±‚ã€‘<blockquote><p>æ£€æŸ¥æ ‡å‡†è¯·æ±‚å¤´ ï¼Œç¡®è®¤æ˜¯å¦åŒæº(2)æ£€æŸ¥CSRF token</p></blockquote></li><li>SQLæ³¨å…¥(é€šè¿‡ç”¨æˆ·è¾“å…¥,æ‹¼æ¥æˆæ¶æ„Sql,å¹¶æ‰§è¡Œ)<blockquote><p>é¢„ç¼–è¯‘SQL 2.éªŒè¯ç”¨æˆ·è¾“å…¥3.ç”¨æˆ·è¾“å…¥ç¼–ç </p></blockquote></li></ul><h3 id="XXSæ”»å‡»å’ŒSQLæ³¨å…¥"><a href="#XXSæ”»å‡»å’ŒSQLæ³¨å…¥" class="headerlink" title="XXSæ”»å‡»å’ŒSQLæ³¨å…¥"></a><a href="https://baijiahao.baidu.com/s?id=1618267672561552800&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">XXSæ”»å‡»å’ŒSQLæ³¨å…¥</a></h3><p><a href="https://www.jianshu.com/p/2a66b2ddc0fd" target="_blank" rel="noopener">MySQLæœ€å…¨çš„é‡è¦çŸ¥è¯†ç‚¹å­¦ä¹ </a></p><p><a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="noopener">SSL/TLSåè®®è¿è¡Œæœºåˆ¶çš„æ¦‚è¿°</a></p><h1 id="HTTP-å¸¸è§é¢è¯•é¢˜"><a href="#HTTP-å¸¸è§é¢è¯•é¢˜" class="headerlink" title="HTTP å¸¸è§é¢è¯•é¢˜"></a><a href="https://zhuanlan.zhihu.com/p/85363975" target="_blank" rel="noopener">HTTP å¸¸è§é¢è¯•é¢˜</a></h1><h3 id="httpåè®®æœ‰å“ªå‡ ç§è¯·æ±‚æ–¹å¼ï¼Ÿ"><a href="#httpåè®®æœ‰å“ªå‡ ç§è¯·æ±‚æ–¹å¼ï¼Ÿ" class="headerlink" title="httpåè®®æœ‰å“ªå‡ ç§è¯·æ±‚æ–¹å¼ï¼Ÿ"></a>httpåè®®æœ‰å“ªå‡ ç§è¯·æ±‚æ–¹å¼ï¼Ÿ</h3><ul><li>GET:ç”¨äºè¯·æ±‚è®¿é—®å·²ç»è¢«URI(ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)è¯†åˆ«çš„èµ„æº,å¯ä»¥é€šè¿‡URLä¼ å‚ç»™æœåŠ¡å™¨</li><li>POST:ç”¨äºä¼ è¾“ä¿¡æ¯ç»™æœåŠ¡å™¨,ä¸»è¦åŠŸèƒ½ä¸GETæ–¹æ³•ç±»ä¼¼,ä½†ä¸€èˆ¬æ¨èä½¿ç”¨POSTæ–¹å¼</li><li>PUT:ä¼ è¾“æ–‡ä»¶,æŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹,ä¿å­˜åˆ°å¯¹åº”URIä½ç½®</li><li>HEAD:è·å¾—æŠ¥æ–‡é¦–éƒ¨,ä¸GETæ–¹æ³•ç±»ä¼¼,åªæ˜¯ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“,ä¸€èˆ¬ç”¨äºéªŒè¯URIæ˜¯å¦æœ‰æ•ˆ</li><li>DELETE:åˆ é™¤æ–‡ä»¶,ä¸PUTæ–¹æ³•ç›¸å,åˆ é™¤å¯¹åº”URIä½ç½®çš„æ–‡ä»¶</li><li>OPTIONS:æŸ¥è¯¢å“åº”URIæ”¯æŒçš„HTTPæ–¹æ³•</li></ul><h3 id="httpå’ŒhttpsåŒºåˆ«ï¼Ÿ"><a href="#httpå’ŒhttpsåŒºåˆ«ï¼Ÿ" class="headerlink" title="httpå’ŒhttpsåŒºåˆ«ï¼Ÿ"></a>httpå’ŒhttpsåŒºåˆ«ï¼Ÿ</h3><p>HTTPåè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨HTTPåè®®ä¼ è¾“éšç§ä¿¡æ¯éå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼Œäºæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†SSLï¼ˆSecure Sockets Layerï¼‰åè®®ç”¨äºå¯¹HTTPåè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œå°±è¯ç”Ÿäº†HTTPSã€‚ç®€å•æ¥è¯´ï¼ŒHTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”httpåè®®å®‰å…¨ã€‚<br>æ€»çš„æ¥è¯´ï¼š HTTPS=SSL+HTTP</p><ul><li>httpsåè®®éœ€è¦åˆ°caç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨ã€‚</li><li>httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚</li><li>httpå’Œhttpsä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼Œåè€…æ˜¯443ã€‚<br>ï¼ˆè¿™ä¸ªåªæ˜¯é»˜è®¤ç«¯å£ä¸ä¸€æ ·ï¼Œå®é™…ä¸Šç«¯å£æ˜¯å¯ä»¥æ”¹çš„ï¼‰</li><li>httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚</li></ul><h3 id="HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡æ ¼å¼"><a href="#HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡æ ¼å¼" class="headerlink" title="HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡æ ¼å¼"></a>HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡æ ¼å¼</h3><p>è¯·æ±‚æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š</p><ul><li><strong>è¯·æ±‚è¡Œï¼šåŒ…å«è¯·æ±‚æ–¹æ³•ã€URIã€HTTPç‰ˆæœ¬ä¿¡æ¯</strong></li><li>è¯·æ±‚å¤´éƒ¨ï¼ˆheadersï¼‰å­—æ®µ</li><li>è¯·æ±‚å†…å®¹å®ä½“(body)</li></ul><p>å“åº”æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š</p><ul><li><strong>çŠ¶æ€è¡Œï¼šåŒ…å«HTTPç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€ç çš„åŸå› çŸ­</strong></li><li>å“åº”å¤´éƒ¨ï¼ˆheadersï¼‰å­—æ®µ</li><li>å“åº”å†…å®¹(body)å®ä½“</li></ul><h3 id="HTTPçŠ¶æ€ç "><a href="#HTTPçŠ¶æ€ç " class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h3><ul><li>200 è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚</li><li>201 è¯·æ±‚å·²ç»è¢«å®ç°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œå»ºç«‹ï¼Œä¸”å…¶ URI å·²ç»éšLocation å¤´ä¿¡æ¯è¿”å›</li><li>202 æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†</li><li>301 ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚</li><li>302 ï¼ˆä¸´æ—¶ç§»åŠ¨ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</li><li>303 ï¼ˆæŸ¥çœ‹å…¶ä»–ä½ç½®ï¼‰ è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç ã€‚</li><li>304 ï¼ˆæœªä¿®æ”¹ï¼‰ è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚</li><li>305 ï¼ˆä½¿ç”¨ä»£ç†ï¼‰ è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚ å¦‚æœæœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç†ã€‚</li><li><p>307 ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</p></li><li><p>401 å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚å¦‚æœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº† Authorization è¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦</p></li><li>403 æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤</li><li>404 è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°</li><li>500 æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éƒ½ä¼šåœ¨æœåŠ¡å™¨çš„ç¨‹åºç å‡ºé”™æ—¶å‡ºç°ã€‚</li><li>501 æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ã€‚å½“æœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æ”¯æŒå…¶å¯¹ä»»ä½•èµ„æºçš„è¯·æ±‚ã€‚</li><li>502 ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</li><li>503 ç”±äºä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚è¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸”å°†åœ¨ä¸€æ®µæ—¶é—´ä»¥åæ¢å¤ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Computer Networks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Travel</title>
      <link href="/2019/05/17/Travel/"/>
      <url>/2019/05/17/Travel/</url>
      
        <content type="html"><![CDATA[<h1 id="Europe"><a href="#Europe" class="headerlink" title="Europe"></a>Europe</h1><ul><li><a href="https://www.goteamjosh.com/europe" target="_blank" rel="noopener">Europe</a></li></ul><h1 id="Asian"><a href="#Asian" class="headerlink" title="Asian"></a>Asian</h1><h2 id="TAIWAN"><a href="#TAIWAN" class="headerlink" title="TAIWAN"></a>TAIWAN</h2><ul><li><a href="https://www.goteamjosh.com/blog/lionshead" target="_blank" rel="noopener">taiwan</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Travel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Design Pattern-Behavioral-pattern</title>
      <link href="/2019/05/16/Design-Pattern-Behavioral-pattern/"/>
      <url>/2019/05/16/Design-Pattern-Behavioral-pattern/</url>
      
        <content type="html"><![CDATA[<h1 id="Design-Patternsâ€-Is-a-Bad-Name-From-laike9m"><a href="#Design-Patternsâ€-Is-a-Bad-Name-From-laike9m" class="headerlink" title="Design Patternsâ€ Is a Bad Name From laike9m"></a><a href="https://laike9m.com/blog/design-patterns-is-a-bad-name,131/" target="_blank" rel="noopener">Design Patternsâ€ Is a Bad Name From laike9m</a></h1><p></p><h2 id="-">è¡Œä¸ºå‹æ¨¡å¼</h2><p></p><p>è¡Œä¸ºå‹æ¨¡å¼å…³æ³¨çš„æ˜¯å„ä¸ªç±»ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼Œå°†èŒè´£åˆ’åˆ†æ¸…æ¥šï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´åŠ åœ°æ¸…æ™°ã€‚</p><br><h3 id="-">ç­–ç•¥æ¨¡å¼</h3><br><p>ç­–ç•¥æ¨¡å¼å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åˆ°æœ€å‰é¢è¿›è¡Œä»‹ç»ã€‚å®ƒæ¯”è¾ƒç®€å•ï¼Œæˆ‘å°±ä¸åºŸè¯ï¼Œç›´æ¥ç”¨ä»£ç è¯´äº‹å§ã€‚</p><br><p>ä¸‹é¢è®¾è®¡çš„åœºæ™¯æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ç”»ä¸€ä¸ªå›¾å½¢ï¼Œå¯é€‰çš„ç­–ç•¥å°±æ˜¯ç”¨çº¢è‰²ç¬”æ¥ç”»ï¼Œè¿˜æ˜¯ç»¿è‰²ç¬”æ¥ç”»ï¼Œæˆ–è€…è“è‰²ç¬”æ¥ç”»ã€‚</p><br><p>é¦–å…ˆï¼Œå…ˆå®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼š</p><br><pre><code class="lang-java">public interface Strategy {<br>   public void draw(int radius, int x, int y);<br>}<br></code></pre><br><p>ç„¶åæˆ‘ä»¬å®šä¹‰å…·ä½“çš„å‡ ä¸ªç­–ç•¥ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedPen</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">int</span> radius, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">      System.out.println(&amp;quot;ç”¨çº¢è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreenPen</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">int</span> radius, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">      System.out.println(&amp;quot;ç”¨ç»¿è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BluePen</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">int</span> radius, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">      System.out.println(&amp;quot;ç”¨è“è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p>ä½¿ç”¨ç­–ç•¥çš„ç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Strategy strategy;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Context</span><span class="params">(Strategy strategy)</span></span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.strategy = strategy;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">executeDraw</span><span class="params">(<span class="keyword">int</span> radius, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> strategy.draw(radius, x, y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>å®¢æˆ·ç«¯æ¼”ç¤ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Context context = <span class="keyword">new</span> Context(<span class="keyword">new</span> BluePen()); <span class="comment">// ä½¿ç”¨ç»¿è‰²ç¬”æ¥ç”»</span></span><br><span class="line">      context.executeDraw(<span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p><img src="https://www.javadoop.com/blogimages/design-pattern/strategy-1.png" alt="strategy-1"></p><br><p>è¿™ä¸ªæ—¶å€™ï¼Œå¤§å®¶æœ‰æ²¡æœ‰è”æƒ³åˆ°ç»“æ„å‹æ¨¡å¼ä¸­çš„æ¡¥æ¢æ¨¡å¼ï¼Œå®ƒä»¬å…¶å®éå¸¸ç›¸ä¼¼ï¼Œæˆ‘æŠŠæ¡¥æ¢æ¨¡å¼çš„å›¾æ‹¿è¿‡æ¥å¤§å®¶å¯¹æ¯”ä¸‹ï¼š</p><br><p><img src="https://www.javadoop.com/blogimages/design-pattern/bridge-1.png" alt="bridge-1"></p><br><p>è¦æˆ‘è¯´çš„è¯ï¼Œå®ƒä»¬éå¸¸ç›¸ä¼¼ï¼Œæ¡¥æ¢æ¨¡å¼åœ¨å·¦ä¾§åŠ äº†ä¸€å±‚æŠ½è±¡è€Œå·²ã€‚æ¡¥æ¢æ¨¡å¼çš„è€¦åˆæ›´ä½ï¼Œç»“æ„æ›´å¤æ‚ä¸€äº›ã€‚</p><h3 id="-">è§‚å¯Ÿè€…æ¨¡å¼</h3><br><p>è§‚å¯Ÿè€…æ¨¡å¼å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼ŒçœŸæ˜¯å†ç®€å•ä¸è¿‡äº†ã€‚æ— å¤–ä¹ä¸¤ä¸ªæ“ä½œï¼Œè§‚å¯Ÿè€…è®¢é˜…è‡ªå·±å…³å¿ƒçš„ä¸»é¢˜å’Œä¸»é¢˜æœ‰æ•°æ®å˜åŒ–åé€šçŸ¥è§‚å¯Ÿè€…ä»¬ã€‚</p><br><p>é¦–å…ˆï¼Œéœ€è¦å®šä¹‰ä¸»é¢˜ï¼Œæ¯ä¸ªä¸»é¢˜éœ€è¦æŒæœ‰è§‚å¯Ÿè€…åˆ—è¡¨çš„å¼•ç”¨ï¼Œç”¨äºåœ¨æ•°æ®å˜æ›´çš„æ—¶å€™é€šçŸ¥å„ä¸ªè§‚å¯Ÿè€…ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&amp;lt;Observer&amp;gt; observers = <span class="keyword">new</span> ArrayList&amp;lt;Observer&amp;gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> state;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">        <span class="comment">// æ•°æ®å·²å˜æ›´ï¼Œé€šçŸ¥è§‚å¯Ÿè€…ä»¬</span></span><br><span class="line">        notifyAllObservers();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ³¨å†Œè§‚å¯Ÿè€…</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attach</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šçŸ¥è§‚å¯Ÿè€…ä»¬</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyAllObservers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">            observer.update();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p>å®šä¹‰è§‚å¯Ÿè€…æ¥å£ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Subject subject;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p>å…¶å®å¦‚æœåªæœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ç±»çš„è¯ï¼Œæ¥å£éƒ½ä¸ç”¨å®šä¹‰äº†ï¼Œä¸è¿‡ï¼Œé€šå¸¸åœºæ™¯ä¸‹ï¼Œæ—¢ç„¶ç”¨åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬å°±æ˜¯å¸Œæœ›ä¸€ä¸ªäº‹ä»¶å‡ºæ¥äº†ï¼Œä¼šæœ‰å¤šä¸ªä¸åŒçš„ç±»éœ€è¦å¤„ç†ç›¸åº”çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œè®¢å•ä¿®æ”¹æˆåŠŸäº‹ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›å‘çŸ­ä¿¡çš„ç±»å¾—åˆ°é€šçŸ¥ã€å‘é‚®ä»¶çš„ç±»å¾—åˆ°é€šçŸ¥ã€å¤„ç†ç‰©æµä¿¡æ¯çš„ç±»å¾—åˆ°é€šçŸ¥ç­‰ã€‚</p><br><p>æˆ‘ä»¬æ¥å®šä¹‰å…·ä½“çš„å‡ ä¸ªè§‚å¯Ÿè€…ç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinaryObserver</span> <span class="keyword">extends</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨æ„é€ æ–¹æ³•ä¸­è¿›è¡Œè®¢é˜…ä¸»é¢˜</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinaryObserver</span><span class="params">(Subject subject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subject = subject;</span><br><span class="line">        <span class="comment">// é€šå¸¸åœ¨æ„é€ æ–¹æ³•ä¸­å°† this å‘å¸ƒå‡ºå»çš„æ“ä½œä¸€å®šè¦å°å¿ƒ</span></span><br><span class="line">        <span class="keyword">this</span>.subject.attach(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯¥æ–¹æ³•ç”±ä¸»é¢˜ç±»åœ¨æ•°æ®å˜æ›´çš„æ—¶å€™è¿›è¡Œè°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String result = Integer.toBinaryString(subject.getState());</span><br><span class="line">        System.out.println(&amp;quot;è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºäºŒè¿›åˆ¶å€¼ä¸ºï¼š&amp;quot; + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HexaObserver</span> <span class="keyword">extends</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HexaObserver</span><span class="params">(Subject subject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subject = subject;</span><br><span class="line">        <span class="keyword">this</span>.subject.attach(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String result = Integer.toHexString(subject.getState()).toUpperCase();</span><br><span class="line">        System.out.println(&amp;quot;è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºåå…­è¿›åˆ¶å€¼ä¸ºï¼š&amp;quot; + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p>å®¢æˆ·ç«¯ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…ˆå®šä¹‰ä¸€ä¸ªä¸»é¢˜</span></span><br><span class="line">    Subject subject1 = <span class="keyword">new</span> Subject();</span><br><span class="line">    <span class="comment">// å®šä¹‰è§‚å¯Ÿè€…</span></span><br><span class="line">    <span class="keyword">new</span> BinaryObserver(subject1);</span><br><span class="line">    <span class="keyword">new</span> HexaObserver(subject1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®å˜æ›´ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè§‚å¯Ÿè€…ä»¬çš„ update æ–¹æ³•å°†ä¼šè¢«è°ƒç”¨</span></span><br><span class="line">    subject.setState(<span class="number">11</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><p>output:</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºäºŒè¿›åˆ¶å€¼ä¸ºï¼š<span class="number">1011</span></span><br><span class="line">è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºåå…­è¿›åˆ¶å€¼ä¸ºï¼šB</span><br></pre></td></tr></table></figure><br><br>å½“ç„¶ï¼Œjdk ä¹Ÿæä¾›äº†ç›¸ä¼¼çš„æ”¯æŒï¼Œå…·ä½“çš„å¤§å®¶å¯ä»¥å‚è€ƒ <code>java.util.Observable</code>å’Œ <code>java.util.Observer</code>è¿™ä¸¤ä¸ªç±»ã€‚<p></p><br><p>å®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¾€å¾€ç”¨æ¶ˆæ¯ä¸­é—´ä»¶æ¥å®ç°ï¼Œå¦‚æœè¦å®ç°å•æœºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œç¬”è€…å»ºè®®è¯»è€…ä½¿ç”¨ Guava ä¸­çš„ EventBusï¼Œå®ƒæœ‰åŒæ­¥å®ç°ä¹Ÿæœ‰å¼‚æ­¥å®ç°ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»è®¾è®¡æ¨¡å¼ï¼Œå°±ä¸å±•å¼€è¯´äº†ã€‚</p><br><p>è¿˜æœ‰ï¼Œå³ä½¿æ˜¯ä¸Šé¢çš„è¿™ä¸ªä»£ç ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šå˜ç§ï¼Œå¤§å®¶åªè¦è®°ä½æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œé‚£å°±æ˜¯ä¸€å®šæœ‰ä¸€ä¸ªåœ°æ–¹å­˜æ”¾äº†æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œç„¶ååœ¨äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œéå†è§‚å¯Ÿè€…ï¼Œè°ƒç”¨å®ƒä»¬çš„å›è°ƒå‡½æ•°ã€‚</p><br><br><h3 id="-">è´£ä»»é“¾æ¨¡å¼</h3><p></p><p>è´£ä»»é“¾é€šå¸¸éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œç„¶åè°ƒç”¨æ–¹åªéœ€è¦è°ƒç”¨å¤´éƒ¨èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œåé¢ä¼šè‡ªåŠ¨æµè½¬ä¸‹å»ã€‚æ¯”å¦‚æµç¨‹å®¡æ‰¹å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œåªè¦ç»ˆç«¯ç”¨æˆ·æäº¤ç”³è¯·ï¼Œæ ¹æ®ç”³è¯·çš„å†…å®¹ä¿¡æ¯ï¼Œè‡ªåŠ¨å»ºç«‹ä¸€æ¡è´£ä»»é“¾ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹æµè½¬äº†ã€‚</p><p></p><p></p><p>æœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œç”¨æˆ·å‚åŠ ä¸€ä¸ªæ´»åŠ¨å¯ä»¥é¢†å–å¥–å“ï¼Œä½†æ˜¯æ´»åŠ¨éœ€è¦è¿›è¡Œå¾ˆå¤šçš„è§„åˆ™æ ¡éªŒç„¶åæ‰èƒ½æ”¾è¡Œï¼Œæ¯”å¦‚é¦–å…ˆéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯å¦æ˜¯æ–°ç”¨æˆ·ã€ä»Šæ—¥å‚ä¸äººæ•°æ˜¯å¦æœ‰é™é¢ã€å…¨åœºå‚ä¸äººæ•°æ˜¯å¦æœ‰é™é¢ç­‰ç­‰ã€‚è®¾å®šçš„è§„åˆ™éƒ½é€šè¿‡åï¼Œæ‰èƒ½è®©ç”¨æˆ·é¢†èµ°å¥–å“ã€‚</p><p></p><p><blockquote></blockquote></p><p></p><p>å¦‚æœäº§å“ç»™ä½ è¿™ä¸ªéœ€æ±‚çš„è¯ï¼Œæˆ‘æƒ³å¤§éƒ¨åˆ†äººä¸€å¼€å§‹è‚¯å®šæƒ³çš„å°±æ˜¯ï¼Œç”¨ä¸€ä¸ª List æ¥å­˜æ”¾æ‰€æœ‰çš„è§„åˆ™ï¼Œç„¶å foreach æ‰§è¡Œä¸€ä¸‹æ¯ä¸ªè§„åˆ™å°±å¥½äº†ã€‚ä¸è¿‡ï¼Œè¯»è€…ä¹Ÿå…ˆåˆ«æ€¥ï¼Œçœ‹çœ‹è´£ä»»é“¾æ¨¡å¼å’Œæˆ‘ä»¬è¯´çš„è¿™ä¸ªæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</p><br><p></p><p></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®šä¹‰æµç¨‹ä¸ŠèŠ‚ç‚¹çš„åŸºç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RuleHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åç»§èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">protected</span> RuleHandler successor;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(Context context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccessor</span><span class="params">(RuleHandler successor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.successor = successor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RuleHandler <span class="title">getSuccessor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> successor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å…·ä½“çš„æ¯ä¸ªèŠ‚ç‚¹äº†ã€‚</p><p></p><p></p><p>æ ¡éªŒç”¨æˆ·æ˜¯å¦æ˜¯æ–°ç”¨æˆ·ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewUserRuleHandler</span> <span class="keyword">extends</span> <span class="title">RuleHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (context.isNewUser()) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæœ‰åç»§èŠ‚ç‚¹çš„è¯ï¼Œä¼ é€’ä¸‹å»</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getSuccessor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.getSuccessor().apply(context);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(&amp;quot;è¯¥æ´»åŠ¨ä»…é™æ–°ç”¨æˆ·å‚ä¸&amp;quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>æ ¡éªŒç”¨æˆ·æ‰€åœ¨åœ°åŒºæ˜¯å¦å¯ä»¥å‚ä¸ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocationRuleHandler</span> <span class="keyword">extends</span> <span class="title">RuleHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> allowed = activityService.isSupportedLocation(context.getLocation);</span><br><span class="line">        <span class="keyword">if</span> (allowed) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getSuccessor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.getSuccessor().apply(context);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(&amp;quot;éå¸¸æŠ±æ­‰ï¼Œæ‚¨æ‰€åœ¨çš„åœ°åŒºæ— æ³•å‚ä¸æœ¬æ¬¡æ´»åŠ¨&amp;quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>æ ¡éªŒå¥–å“æ˜¯å¦å·²é¢†å®Œï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LimitRuleHandler</span> <span class="keyword">extends</span> <span class="title">RuleHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> remainedTimes = activityService.queryRemainedTimes(context); <span class="comment">// æŸ¥è¯¢å‰©ä½™å¥–å“</span></span><br><span class="line">        <span class="keyword">if</span> (remainedTimes &amp;gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getSuccessor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.getSuccessor().apply(userInfo);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(&amp;quot;æ‚¨æ¥å¾—å¤ªæ™šäº†ï¼Œå¥–å“è¢«é¢†å®Œäº†&amp;quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>å®¢æˆ·ç«¯ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    RuleHandler newUserHandler = <span class="keyword">new</span> NewUserRuleHandler();</span><br><span class="line">    RuleHandler locationHandler = <span class="keyword">new</span> LocationRuleHandler();</span><br><span class="line">    RuleHandler limitHandler = <span class="keyword">new</span> LimitRuleHandler();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡è®¾æœ¬æ¬¡æ´»åŠ¨ä»…æ ¡éªŒåœ°åŒºå’Œå¥–å“æ•°é‡ï¼Œä¸æ ¡éªŒæ–°è€ç”¨æˆ·</span></span><br><span class="line">    locationHandler.setSuccessor(limitHandler);</span><br><span class="line"></span><br><span class="line">    locationHandler.apply(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>ä»£ç å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆå®šä¹‰å¥½ä¸€ä¸ªé“¾è¡¨ï¼Œç„¶ååœ¨é€šè¿‡ä»»æ„ä¸€èŠ‚ç‚¹åï¼Œå¦‚æœæ­¤èŠ‚ç‚¹æœ‰åç»§èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¼ é€’ä¸‹å»ã€‚</p><p></p><p></p><p>è‡³äºå®ƒå’Œæˆ‘ä»¬å‰é¢è¯´çš„ç”¨ä¸€ä¸ª List å­˜æ”¾éœ€è¦æ‰§è¡Œçš„è§„åˆ™çš„åšæ³•æœ‰ä»€ä¹ˆå¼‚åŒï¼Œç•™ç»™è¯»è€…è‡ªå·±ç¢ç£¨å§ã€‚</p><p></p><p></p><h3 id="-">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3><p></p><p></p><p>åœ¨å«æœ‰ç»§æ‰¿ç»“æ„çš„ä»£ç ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯éå¸¸å¸¸ç”¨çš„ã€‚</p><p></p><p></p><p>é€šå¸¸ä¼šæœ‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractTemplate</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">templateMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        init();</span><br><span class="line">        apply(); <span class="comment">// è¿™ä¸ªæ˜¯é‡ç‚¹</span></span><br><span class="line">        end(); <span class="comment">// å¯ä»¥ä½œä¸ºé’©å­æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;init æŠ½è±¡å±‚å·²ç»å®ç°ï¼Œå­ç±»ä¹Ÿå¯ä»¥é€‰æ‹©è¦†å†™&amp;quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç•™ç»™å­ç±»å®ç°</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">end</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>æ¨¡æ¿æ–¹æ³•ä¸­è°ƒç”¨äº† 3 ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ apply() æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°å®ƒï¼Œå…¶å®æ¨¡æ¿æ–¹æ³•ä¸­æœ‰å‡ ä¸ªæŠ½è±¡æ–¹æ³•å®Œå…¨æ˜¯è‡ªç”±çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸‰ä¸ªæ–¹æ³•éƒ½è®¾ç½®ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œè®©å­ç±»æ¥å®ç°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡æ¿æ–¹æ³•åªè´Ÿè´£å®šä¹‰ç¬¬ä¸€æ­¥åº”è¯¥è¦åšä»€ä¹ˆï¼Œç¬¬äºŒæ­¥åº”è¯¥åšä»€ä¹ˆï¼Œç¬¬ä¸‰æ­¥åº”è¯¥åšä»€ä¹ˆï¼Œè‡³äºæ€ä¹ˆåšï¼Œç”±å­ç±»æ¥å®ç°ã€‚</p><p></p><p></p><p>æˆ‘ä»¬å†™ä¸€ä¸ªå®ç°ç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteTemplate</span> <span class="keyword">extends</span> <span class="title">AbstractTemplate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;å­ç±»å®ç°æŠ½è±¡æ–¹æ³• apply&amp;quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">end</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;æˆ‘ä»¬å¯ä»¥æŠŠ method3 å½“åšé’©å­æ–¹æ³•æ¥ä½¿ç”¨ï¼Œéœ€è¦çš„æ—¶å€™è¦†å†™å°±å¯ä»¥äº†&amp;quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>å®¢æˆ·ç«¯è°ƒç”¨æ¼”ç¤ºï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    AbstractTemplate t = <span class="keyword">new</span> ConcreteTemplate();</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ¨¡æ¿æ–¹æ³•</span></span><br><span class="line">    t.templateMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>ä»£ç å…¶å®å¾ˆç®€å•ï¼ŒåŸºæœ¬ä¸Šçœ‹åˆ°å°±æ‡‚äº†ï¼Œå…³é”®æ˜¯è¦å­¦ä¼šç”¨åˆ°è‡ªå·±çš„ä»£ç ä¸­ã€‚</p><p></p><p></p><h3 id="-">çŠ¶æ€æ¨¡å¼</h3><p></p><p></p><p>update: 2017-10-19</p><p></p><p></p><p>åºŸè¯æˆ‘å°±ä¸è¯´äº†ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å•†å“åº“å­˜ä¸­å¿ƒæœ‰ä¸ªæœ€åŸºæœ¬çš„éœ€æ±‚æ˜¯å‡åº“å­˜å’Œè¡¥åº“å­˜ï¼Œæˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆç”¨çŠ¶æ€æ¨¡å¼æ¥å†™ã€‚</p><p></p><p></p><p>æ ¸å¿ƒåœ¨äºï¼Œæˆ‘ä»¬çš„å…³æ³¨ç‚¹ä¸å†æ˜¯ Context æ˜¯è¯¥è¿›è¡Œå“ªç§æ“ä½œï¼Œè€Œæ˜¯å…³æ³¨åœ¨è¿™ä¸ª Context ä¼šæœ‰å“ªäº›æ“ä½œã€‚</p><p></p><p></p><p>å®šä¹‰çŠ¶æ€æ¥å£ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAction</span><span class="params">(Context context)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>å®šä¹‰å‡åº“å­˜çš„çŠ¶æ€ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeductState</span> <span class="keyword">implements</span> <span class="title">State</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAction</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;å•†å“å–å‡ºï¼Œå‡†å¤‡å‡åº“å­˜&amp;quot;);</span><br><span class="line">        context.setState(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//... æ‰§è¡Œå‡åº“å­˜çš„å…·ä½“æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;Deduct State&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>å®šä¹‰è¡¥åº“å­˜çŠ¶æ€ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RevertState</span> <span class="keyword">implements</span> <span class="title">State</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAction</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;ç»™æ­¤å•†å“è¡¥åº“å­˜&amp;quot;);</span><br><span class="line">        context.setState(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//... æ‰§è¡ŒåŠ åº“å­˜çš„å…·ä½“æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;Revert State&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>å‰é¢ç”¨åˆ°äº† context.setState(this)ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆå®šä¹‰ Context ç±»ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> State state;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">Context</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(State state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹å®¢æˆ·ç«¯è°ƒç”¨ï¼Œå¤§å®¶å°±ä¸€æ¸…äºŒæ¥šäº†ï¼š</p><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬éœ€è¦æ“ä½œçš„æ˜¯ iPhone X</span></span><br><span class="line">    Context context = <span class="keyword">new</span> Context(&amp;quot;iPhone X&amp;quot;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœ‹çœ‹æ€ä¹ˆè¿›è¡Œè¡¥åº“å­˜æ“ä½œ</span></span><br><span class="line">      State revertState = <span class="keyword">new</span> RevertState();</span><br><span class="line">      revertState.doAction(context);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ ·çš„ï¼Œå‡åº“å­˜æ“ä½œä¹Ÿéå¸¸ç®€å•</span></span><br><span class="line">      State deductState = <span class="keyword">new</span> DeductState();</span><br><span class="line">      deductState.doAction(context);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœéœ€è¦æˆ‘ä»¬å¯ä»¥è·å–å½“å‰çš„çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// context.getState().toString();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><p>è¯»è€…å¯èƒ½ä¼šå‘ç°ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒå½“å‰ context å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œé‚£ä¹ˆ Context å°±å¯ä»¥ä¸ç”¨ç»´æŠ¤ state å±æ€§äº†ï¼Œé‚£æ ·ä»£ç ä¼šç®€å•å¾ˆå¤šã€‚</p><p></p><p></p><p>ä¸è¿‡ï¼Œå•†å“åº“å­˜è¿™ä¸ªä¾‹å­æ¯•ç«Ÿåªæ˜¯ä¸ªä¾‹ï¼Œæˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå®ä¾‹æ˜¯éœ€è¦çŸ¥é“å½“å‰ context å¤„äºä»€ä¹ˆçŠ¶æ€çš„ã€‚</p><p></p><p></p><h3 id="-">è¡Œä¸ºå‹æ¨¡å¼æ€»ç»“</h3><p></p><p></p><p>è¡Œä¸ºå‹æ¨¡å¼éƒ¨åˆ†ä»‹ç»äº†ç­–ç•¥æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼å’ŒçŠ¶æ€æ¨¡å¼ï¼Œå…¶å®ï¼Œç»å…¸çš„è¡Œä¸ºå‹æ¨¡å¼è¿˜åŒ…æ‹¬å¤‡å¿˜å½•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ç­‰ï¼Œä½†æ˜¯å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒæœ‰é™ï¼Œè€Œä¸”æœ¬æ–‡ç¯‡å¹…ä¹ŸæŒºå¤§äº†ï¼Œæˆ‘å°±ä¸è¿›è¡Œä»‹ç»äº†ã€‚</p><p></p><p></p><h2 id="-">æ€»ç»“</h2><p></p><p></p><p> å­¦ä¹ è®¾è®¡æ¨¡å¼çš„ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ çš„ä¼˜é›…ã€æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•ã€‚è¿™æ¬¡æ•´ç†è¿™ç¯‡æ–‡ç« ï¼Œè®©æˆ‘é‡æ–°å®¡è§†äº†ä¸€ä¸‹å„ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå¯¹æˆ‘è‡ªå·±è€Œè¨€æ”¶è·è¿˜æ˜¯æŒºå¤§çš„ã€‚æˆ‘æƒ³ï¼Œæ–‡ç« çš„æœ€å¤§æ”¶ç›Šè€…ä¸€èˆ¬éƒ½æ˜¯ä½œè€…æœ¬äººï¼Œä¸ºäº†å†™ä¸€ç¯‡æ–‡ç« ï¼Œéœ€è¦å·©å›ºè‡ªå·±çš„çŸ¥è¯†ï¼Œéœ€è¦å¯»æ‰¾å„ç§èµ„æ–™ï¼Œè€Œä¸”ï¼Œè‡ªå·±å†™è¿‡çš„æ‰æœ€å®¹æ˜“è®°ä½ï¼Œä¹Ÿç®—æ˜¯æˆ‘ç»™è¯»è€…çš„å»ºè®®å§ã€‚</p><p></p><p></p><p>ï¼ˆå…¨æ–‡å®Œï¼‰</p><br><p></p><p><a href="https://javadoop.com/post/design-pattern" target="_blank" rel="noopener">https://javadoop.com/post/design-pattern</a></p>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Design Patterns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DesignPattern-Structural-pattern part2</title>
      <link href="/2019/05/16/DesignPattern-Structural-pattern-part2/"/>
      <url>/2019/05/16/DesignPattern-Structural-pattern-part2/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  è¯¦è§£è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹æ¨¡å¼ï¼ˆä¸Šï¼‰ä¸­æˆ‘ä»¬å­¦ä¹ äº†ä¸‰ç§ç»“æ„å‹æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€‚æœ¬æ–‡æˆ‘ä»¬å°†ä»‹ç»å‰©ä½™å››ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><ul><li>è£…é¥°æ¨¡å¼</li><li>å¤–è§‚æ¨¡å¼</li><li>äº«å…ƒæ¨¡å¼</li><li>ä»£ç†æ¨¡å¼</li></ul><h2 id="å››ã€è£…é¥°æ¨¡å¼"><a href="#å››ã€è£…é¥°æ¨¡å¼" class="headerlink" title="å››ã€è£…é¥°æ¨¡å¼"></a>å››ã€è£…é¥°æ¨¡å¼</h2><p>æåˆ°è£…é¥°ï¼Œæˆ‘ä»¬å…ˆæ¥æƒ³ä¸€ä¸‹ç”Ÿæ´»ä¸­æœ‰å“ªäº›è£…é¥°ï¼š</p><ul><li>å¥³ç”Ÿçš„é¦–é¥°ï¼šæˆ’æŒ‡ã€è€³ç¯ã€é¡¹é“¾ç­‰è£…é¥°å“</li><li>å®¶å±…è£…é¥°å“ï¼šç²˜é’©ã€é•œå­ã€å£ç”»ã€ç›†æ ½ç­‰</li></ul><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›è£…é¥°å“å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°æ˜¯ä¸ºäº†ç¾ï¼Œæˆ’æŒ‡ã€è€³ç¯ã€é¡¹é“¾ã€å£ç”»ã€ç›†æ ½ç­‰éƒ½æ˜¯ä¸ºäº†æé«˜é¢œå€¼æˆ–å¢åŠ ç¾è§‚åº¦ã€‚ä½†ç²˜é’©ã€é•œå­ä¸ä¸€æ ·ï¼Œå®ƒä»¬æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŒ‚ä¸œè¥¿ã€æ´—æ¼±ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºè£…é¥°å“å…±æœ‰ä¸¤ç§åŠŸèƒ½ï¼š</p><ul><li>å¢å¼ºåŸæœ‰çš„ç‰¹æ€§ï¼šæˆ‘ä»¬æœ¬èº«å°±æ˜¯æœ‰ä¸€å®šé¢œå€¼çš„ï¼Œæ·»åŠ è£…é¥°å“æé«˜äº†æˆ‘ä»¬çš„é¢œå€¼ã€‚åŒæ ·ï¼Œæˆ¿å±‹æœ¬èº«å°±æœ‰ä¸€å®šçš„ç¾è§‚åº¦ï¼Œå®¶å±…è£…é¥°æé«˜äº†æˆ¿å±‹çš„ç¾è§‚åº¦ã€‚</li><li>æ·»åŠ æ–°çš„ç‰¹æ€§ï¼šåœ¨å¢™ä¸ŠæŒ‚ä¸Šç²˜é’©ï¼Œè®©å¢™å£æœ‰äº†æŒ‚ä¸œè¥¿çš„åŠŸèƒ½ã€‚åœ¨æ´—æ¼±å°è£…ä¸Šé•œå­ï¼Œè®©æ´—æ¼±å°æœ‰äº†ç…§é•œå­çš„åŠŸèƒ½ã€‚</li></ul><p>å¹¶ä¸”ï¼Œæˆ‘ä»¬å‘ç°è£…é¥°å“å¹¶ä¸ä¼šæ”¹å˜ç‰©å“æœ¬èº«ï¼Œåªæ˜¯èµ·åˆ°ä¸€ä¸ªé”¦ä¸Šæ·»èŠ±çš„ä½œç”¨ã€‚è£…é¥°æ¨¡å¼ä¹Ÿä¸€æ ·ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ï¼š</p><ul><li>å¢å¼ºä¸€ä¸ªç±»åŸæœ‰çš„åŠŸèƒ½</li><li>ä¸ºä¸€ä¸ªç±»æ·»åŠ æ–°çš„åŠŸèƒ½<br>å¹¶ä¸” è£…é¥°æ¨¡å¼ä¹Ÿä¸ä¼šæ”¹å˜åŸæœ‰çš„ç±»ã€‚</li></ul><blockquote><p>è£…é¥°æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ å¯¹è±¡åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®ç°æ›´ä¸ºçµæ´»ã€‚å…¶åˆ«åä¹Ÿå¯ä»¥ç§°ä¸ºåŒ…è£…å™¨ï¼Œä¸é€‚é…å™¨æ¨¡å¼çš„åˆ«åç›¸åŒï¼Œä½†å®ƒä»¬é€‚ç”¨äºä¸åŒçš„åœºåˆã€‚æ ¹æ®ç¿»è¯‘çš„ä¸åŒï¼Œè£…é¥°æ¨¡å¼ä¹Ÿæœ‰äººç§°ä¹‹ä¸ºâ€œæ²¹æ¼†å·¥æ¨¡å¼â€ã€‚</p></blockquote><h2 id="1-ç”¨äºå¢å¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼"><a href="#1-ç”¨äºå¢å¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼" class="headerlink" title="1. ç”¨äºå¢å¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼"></a>1. ç”¨äºå¢å¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼</h2><p>æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹æˆ´ä¸Šè£…é¥°å“æé«˜æˆ‘ä»¬é¢œå€¼çš„è¿‡ç¨‹ï¼š</p><p>æ–°å»ºé¢œå€¼æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IBeauty</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getBeautyValue</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»º Me ç±»ï¼Œå®ç°é¢œå€¼æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Me</span> <span class="keyword">implements</span> <span class="title">IBeauty</span> </span>&#123;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBeautyValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ’æŒ‡è£…é¥°ç±»ï¼Œå°† Me åŒ…è£…èµ·æ¥ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RingDecorator</span> <span class="keyword">implements</span> <span class="title">IBeauty</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IBeauty me;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RingDecorator</span><span class="params">(IBeauty me)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.me = me;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBeautyValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> me.getBeautyValue() + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯æµ‹è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IBeauty me = <span class="keyword">new</span> Me();</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘åŸæœ¬çš„é¢œå€¼ï¼š"</span> + me.getBeautyValue());</span><br><span class="line">â€‹</span><br><span class="line">        IBeauty meWithRing = <span class="keyword">new</span> RingDecorator(me);</span><br><span class="line">        System.out.println(<span class="string">"æˆ´ä¸Šäº†æˆ’æŒ‡åï¼Œæˆ‘çš„é¢œå€¼ï¼š"</span> + meWithRing.getBeautyValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘åŸæœ¬çš„é¢œå€¼ï¼š<span class="number">100</span></span><br><span class="line">æˆ´ä¸Šäº†æˆ’æŒ‡åï¼Œæˆ‘çš„é¢œå€¼ï¼š<span class="number">120</span></span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯æœ€ç®€å•çš„å¢å¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼ã€‚ä»¥åæˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´å¤šçš„è£…é¥°ç±»ï¼Œæ¯”å¦‚ï¼š</p><p>è€³ç¯è£…é¥°ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EarringDecorator</span> <span class="keyword">implements</span> <span class="title">IBeauty</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IBeauty me;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EarringDecorator</span><span class="params">(IBeauty me)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.me = me;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBeautyValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> me.getBeautyValue() + <span class="number">50</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é¡¹é“¾è£…é¥°ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NecklaceDecorator</span> <span class="keyword">implements</span> <span class="title">IBeauty</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IBeauty me;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NecklaceDecorator</span><span class="params">(IBeauty me)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.me = me;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBeautyValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> me.getBeautyValue() + <span class="number">80</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯æµ‹è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IBeauty me = <span class="keyword">new</span> Me();</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘åŸæœ¬çš„é¢œå€¼ï¼š"</span> + me.getBeautyValue());</span><br><span class="line">â€‹</span><br><span class="line">        <span class="comment">// éšæ„æŒ‘é€‰è£…é¥°</span></span><br><span class="line">        IBeauty meWithNecklace = <span class="keyword">new</span> NecklaceDecorator(me);</span><br><span class="line">        System.out.println(<span class="string">"æˆ´ä¸Šäº†é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š"</span> + meWithNecklace.getBeautyValue());</span><br><span class="line">â€‹</span><br><span class="line">        <span class="comment">// å¤šæ¬¡è£…é¥°</span></span><br><span class="line">        IBeauty meWithManyDecorators = <span class="keyword">new</span> NecklaceDecorator(<span class="keyword">new</span> RingDecorator(<span class="keyword">new</span> EarringDecorator(me)));</span><br><span class="line">        System.out.println(<span class="string">"æˆ´ä¸Šè€³ç¯ã€æˆ’æŒ‡ã€é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š"</span> + meWithManyDecorators.getBeautyValue());</span><br><span class="line">â€‹</span><br><span class="line">        <span class="comment">// ä»»æ„æ­é…è£…é¥°</span></span><br><span class="line">        IBeauty meWithNecklaceAndRing = <span class="keyword">new</span> NecklaceDecorator(<span class="keyword">new</span> RingDecorator(me));</span><br><span class="line">        System.out.println(<span class="string">"æˆ´ä¸Šæˆ’æŒ‡ã€é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š"</span> + meWithNecklaceAndRing.getBeautyValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æˆ‘åŸæœ¬çš„é¢œå€¼ï¼š<span class="number">100</span></span><br><span class="line">æˆ´ä¸Šäº†é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š<span class="number">180</span></span><br><span class="line">æˆ´ä¸Šè€³ç¯ã€æˆ’æŒ‡ã€é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š<span class="number">250</span></span><br><span class="line">æˆ´ä¸Šæˆ’æŒ‡ã€é¡¹é“¾åï¼Œæˆ‘çš„é¢œå€¼ï¼š<span class="number">200</span></span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè£…é¥°å™¨ä¹Ÿå®ç°äº† IBeauty æ¥å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„è£…é¥°å™¨ä»…ç”¨äºå¢å¼ºåŠŸèƒ½ï¼Œå¹¶ä¸ä¼šæ”¹å˜ Me åŸæœ‰çš„åŠŸèƒ½ï¼Œè¿™ç§è£…é¥°æ¨¡å¼ç§°ä¹‹ä¸º é€æ˜è£…é¥°æ¨¡å¼ï¼Œç”±äºæ²¡æœ‰æ”¹å˜æ¥å£ï¼Œä¹Ÿæ²¡æœ‰æ–°å¢æ–¹æ³•ï¼Œæ‰€ä»¥é€æ˜è£…é¥°æ¨¡å¼å¯ä»¥æ— é™è£…é¥°ã€‚</p><p>è£…é¥°æ¨¡å¼æ˜¯ ç»§æ‰¿ çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚æœ¬ä¾‹å¦‚æœä¸ä½¿ç”¨è£…é¥°æ¨¡å¼ï¼Œè€Œæ˜¯æ”¹ç”¨ç»§æ‰¿å®ç°çš„è¯ï¼Œæˆ´ç€æˆ’æŒ‡çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€é¡¹é“¾çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€è€³ç¯çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€æˆ’æŒ‡ + é¡¹é“¾çš„éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»â€¦â€¦å„ç§å„æ ·çš„æ’åˆ—ç»„åˆä¼šé€ æˆç±»çˆ†ç‚¸ã€‚è€Œé‡‡ç”¨äº†è£…é¥°æ¨¡å¼å°±åªéœ€è¦ä¸ºæ¯ä¸ªè£…é¥°å“ç”Ÿæˆä¸€ä¸ªè£…é¥°ç±»å³å¯ï¼Œæ‰€ä»¥è¯´å°± å¢åŠ å¯¹è±¡åŠŸèƒ½ æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®ç°æ›´ä¸ºçµæ´»ã€‚</p><h2 id="2-ç”¨äºæ·»åŠ åŠŸèƒ½çš„è£…é¥°æ¨¡å¼"><a href="#2-ç”¨äºæ·»åŠ åŠŸèƒ½çš„è£…é¥°æ¨¡å¼" class="headerlink" title="2. ç”¨äºæ·»åŠ åŠŸèƒ½çš„è£…é¥°æ¨¡å¼"></a>2. ç”¨äºæ·»åŠ åŠŸèƒ½çš„è£…é¥°æ¨¡å¼</h2><p>æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹æˆ¿å±‹è£…é¥°ç²˜é’©åï¼Œæ–°å¢äº†æŒ‚ä¸œè¥¿åŠŸèƒ½çš„è¿‡ç¨‹ï¼š</p><p>æ–°å»ºæˆ¿å±‹æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IHouse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">live</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ¿å±‹ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">House</span> <span class="keyword">implements</span> <span class="title">IHouse</span></span>&#123;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">live</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ¿å±‹åŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»ºç²˜é’©è£…é¥°å™¨æ¥å£ï¼Œç»§æ‰¿è‡ªæˆ¿å±‹æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStickyHookHouse</span> <span class="keyword">extends</span> <span class="title">IHouse</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hangThings</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç²˜é’©è£…é¥°ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StickyHookDecorator</span> <span class="keyword">implements</span> <span class="title">IStickyHookHouse</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IHouse house;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StickyHookDecorator</span><span class="params">(IHouse house)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.house = house;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">live</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        house.live();</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hangThings</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æœ‰äº†ç²˜é’©åï¼Œæ–°å¢äº†æŒ‚ä¸œè¥¿åŠŸèƒ½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯æµ‹è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IHouse house = <span class="keyword">new</span> House();</span><br><span class="line">        house.live();</span><br><span class="line">â€‹</span><br><span class="line">        IStickyHookHouse stickyHookHouse = <span class="keyword">new</span> StickyHookDecorator(house);</span><br><span class="line">        stickyHookHouse.live();</span><br><span class="line">        stickyHookHouse.hangThings();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æˆ¿å±‹åŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½</span><br><span class="line">æˆ¿å±‹åŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½</span><br><span class="line">æœ‰äº†ç²˜é’©åï¼Œæ–°å¢äº†æŒ‚ä¸œè¥¿åŠŸèƒ½</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯ç”¨äº æ–°å¢åŠŸèƒ½ çš„è£…é¥°æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨æ¥å£ä¸­æ–°å¢äº†æ–¹æ³•ï¼šhangThingsï¼Œç„¶ååœ¨è£…é¥°å™¨ä¸­å°† House ç±»åŒ…è£…èµ·æ¥ï¼Œä¹‹å‰ House ä¸­çš„æ–¹æ³•ä»ç„¶è°ƒç”¨ house å»æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¹¶æ²¡æœ‰ä¿®æ”¹åŸæœ‰çš„åŠŸèƒ½ï¼Œåªæ˜¯æ‰©å±•äº†æ–°çš„åŠŸèƒ½ï¼Œè¿™ç§æ¨¡å¼åœ¨è£…é¥°æ¨¡å¼ä¸­ç§°ä¹‹ä¸º åŠé€æ˜è£…é¥°æ¨¡å¼ã€‚</p><p>ä¸ºä»€ä¹ˆå«åŠé€æ˜å‘¢ï¼Ÿç”±äºæ–°çš„æ¥å£ IStickyHookHouse æ‹¥æœ‰ä¹‹å‰ IHouse ä¸å…·æœ‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœè¦ä½¿ç”¨è£…é¥°å™¨ä¸­æ·»åŠ çš„åŠŸèƒ½ï¼Œå°±ä¸å¾—ä¸åŒºåˆ«å¯¹å¾… è£…é¥°å‰çš„å¯¹è±¡å’Œè£…é¥°åçš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯è¦ä½¿ç”¨æ–°æ–¹æ³•ï¼Œå¿…é¡»çŸ¥é“å…·ä½“çš„è£…é¥°ç±» StickyHookDecoratorï¼Œæ‰€ä»¥è¿™ä¸ªè£…é¥°ç±»å¯¹å®¢æˆ·ç«¯æ¥è¯´æ˜¯å¯è§çš„ã€ä¸é€æ˜çš„ã€‚è€Œè¢«è£…é¥°è€…ä¸ä¸€å®šè¦æ˜¯ Houseï¼Œå®ƒå¯ä»¥æ˜¯å®ç°äº† IHouse æ¥å£çš„ä»»æ„å¯¹è±¡ï¼Œæ‰€ä»¥è¢«è£…é¥°è€…å¯¹å®¢æˆ·ç«¯æ˜¯ä¸å¯è§çš„ã€é€æ˜çš„ã€‚ç”±äºä¸€åŠé€æ˜ï¼Œä¸€åŠä¸é€æ˜ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºåŠé€æ˜è£…é¥°æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´å¤šçš„è£…é¥°å™¨ï¼š</p><p>æ–°å»ºé•œå­è£…é¥°å™¨çš„æ¥å£ï¼Œç»§æ‰¿è‡ªæˆ¿å±‹æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IMirrorHouse</span> <span class="keyword">extends</span> <span class="title">IHouse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">lookMirror</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é•œå­è£…é¥°ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MirrorDecorator</span> <span class="keyword">implements</span> <span class="title">IMirrorHouse</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IHouse house;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MirrorDecorator</span><span class="params">(IHouse house)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.house = house;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">live</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        house.live();</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lookMirror</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æœ‰äº†é•œå­åï¼Œæ–°å¢äº†ç…§é•œå­åŠŸèƒ½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯æµ‹è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IHouse house = <span class="keyword">new</span> House();</span><br><span class="line">        house.live();</span><br><span class="line">â€‹</span><br><span class="line">        IMirrorHouse mirrorHouse = <span class="keyword">new</span> MirrorDecorator(house);</span><br><span class="line">        mirrorHouse.live();</span><br><span class="line">        mirrorHouse.lookMirror();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æˆ¿å±‹åŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½</span><br><span class="line">æˆ¿å±‹åŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½</span><br><span class="line">â€‹æœ‰äº†é•œå­åï¼Œæ–°å¢äº†ç…§é•œå­åŠŸèƒ½</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬ä»¿ç…§ é€æ˜è£…é¥°æ¨¡å¼ çš„å†™æ³•ï¼ŒåŒæ—¶æ·»åŠ ç²˜é’©å’Œé•œå­è£…é¥°è¯•ä¸€è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IHouse house = <span class="keyword">new</span> House();</span><br><span class="line">        house.live();</span><br><span class="line">â€‹</span><br><span class="line">        IStickyHookHouse stickyHookHouse = <span class="keyword">new</span> StickyHookDecorator(house);</span><br><span class="line">        IMirrorHouse houseWithStickyHookMirror = <span class="keyword">new</span> MirrorDecorator(stickyHookHouse);</span><br><span class="line">        houseWithStickyHookMirror.live();</span><br><span class="line">        houseWithStickyHookMirror.hangThings(); <span class="comment">// è¿™é‡Œä¼šæŠ¥é”™ï¼Œæ‰¾ä¸åˆ° hangThings æ–¹æ³•</span></span><br><span class="line">        houseWithStickyHookMirror.lookMirror();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>â€‹æˆ‘ä»¬ä¼šå‘ç°ï¼Œç¬¬äºŒæ¬¡è£…é¥°æ—¶ï¼Œæ— æ³•è·å¾—ä¸Šä¸€æ¬¡è£…é¥°æ·»åŠ çš„æ–¹æ³•ã€‚åŸå› å¾ˆæ˜æ˜¾ï¼Œå½“æˆ‘ä»¬ç”¨ IMirrorHouse è£…é¥°å™¨åï¼Œæ¥å£å˜ä¸ºäº† IMirrorHouseï¼Œè¿™ä¸ªæ¥å£ä¸­å¹¶æ²¡æœ‰ hangThings æ–¹æ³•ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬èƒ½å¦è®© IMirrorHouse ç»§æ‰¿è‡ª IStickyHookHouseï¼Œä»¥å®ç°æ–°å¢ä¸¤ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p><p>å¯ä»¥ï¼Œä½†é‚£æ ·åšçš„è¯ä¸¤ä¸ªè£…é¥°ç±»ä¹‹é—´æœ‰äº†ä¾èµ–å…³ç³»ï¼Œé‚£å°±ä¸æ˜¯è£…é¥°æ¨¡å¼äº†ã€‚è£…é¥°ç±»ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè€Œåº”è¯¥åœ¨åŸæœ¬çš„ç±»ä¸Šè¿›è¡Œè£…é¥°ã€‚è¿™å°±æ„å‘³ç€ï¼ŒåŠé€æ˜è£…é¥°æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å¤šæ¬¡è£…é¥°ã€‚</p><p>æœ‰çš„åŒå­¦ä¼šé—®äº†ï¼Œæ—¢å¢å¼ºäº†åŠŸèƒ½ï¼Œåˆæ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼å«ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>â€”â€” ä¸¾ä¸€åä¸‰ï¼Œè‚¯å®šæ˜¯å«å…¨ä¸é€æ˜è£…é¥°æ¨¡å¼ï¼</p><p>â€”â€” å¹¶ä¸æ˜¯ï¼åªè¦æ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼éƒ½ç§°ä¹‹ä¸º åŠé€æ˜è£…é¥°æ¨¡å¼ï¼Œä»–ä»¬éƒ½å…·æœ‰ä¸å¯ä»¥å¤šæ¬¡è£…é¥°çš„ç‰¹ç‚¹ã€‚ä»”ç»†ç†è§£ä¸Šæ–‡åŠé€æ˜åç§°çš„ç”±æ¥å°±çŸ¥é“äº†ï¼Œâ€œé€æ˜â€æŒ‡çš„æ˜¯æˆ‘ä»¬æ— éœ€çŸ¥é“è¢«è£…é¥°è€…å…·ä½“çš„ç±»ï¼Œæ—¢å¢å¼ºäº†åŠŸèƒ½ï¼Œåˆæ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼ä»ç„¶å…·æœ‰åŠé€æ˜ç‰¹æ€§ã€‚</p><p>çœ‹äº†è¿™ä¸¤ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å‘ç°è£…é¥°æ¨¡å¼å¾ˆç®€å•å‘¢ï¼Ÿæ­å–œä½ å­¦ä¼šäº† 1 + 1 = 2ï¼Œç°åœ¨ä½ å·²ç»æŒæ¡äº†ç®—æ•°çš„åŸºæœ¬æ€æƒ³ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥åšä¸€é“å¾®ç§¯åˆ†é¢˜ç»ƒä¹ ä¸€ä¸‹ã€‚</p><h2 id="I-O-ä¸­çš„è£…é¥°æ¨¡å¼"><a href="#I-O-ä¸­çš„è£…é¥°æ¨¡å¼" class="headerlink" title="I/O ä¸­çš„è£…é¥°æ¨¡å¼"></a>I/O ä¸­çš„è£…é¥°æ¨¡å¼</h2><p>I/O æŒ‡çš„æ˜¯ Input/Outputï¼Œå³è¾“å…¥ã€è¾“å‡ºã€‚æˆ‘ä»¬ä»¥ Input ä¸ºä¾‹ã€‚å…ˆåœ¨ src æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ readme.textï¼Œéšä¾¿å†™ç‚¹æ–‡å­—ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¦æ­¢å¥—å¨ƒ</span><br><span class="line">ç¦æ­¢ç¦æ­¢å¥—å¨ƒ</span><br><span class="line">â€‹ç¦æ­¢ç¦æ­¢ç¦æ­¢å¥—å¨ƒ</span><br></pre></td></tr></table></figure></p><p>ç„¶åç”¨ Java çš„ InputStream è¯»å–ï¼Œä»£ç ä¸€èˆ¬é•¿è¿™æ ·ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">io</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>));</span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span> (in.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(buffer));</span><br><span class="line">    &#125;</span><br><span class="line">    in.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å†™æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœè¯»å–è¿‡ç¨‹ä¸­å‡ºç°äº† IO å¼‚å¸¸ï¼ŒInputStream å°±ä¸èƒ½æ­£ç¡®å…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨tryâ€¦finallyæ¥ä¿è¯ InputStream æ­£ç¡®å…³é—­ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">io</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InputStream in = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>));</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> (in.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buffer));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (in != <span class="keyword">null</span>) &#123;</span><br><span class="line">            in.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ç§å†™æ³•å®åœ¨æ˜¯å¤ªä¸‘äº†ï¼Œè€Œ IO æ“ä½œåˆå¿…é¡»è¿™ä¹ˆå†™ï¼Œæ˜¾ç„¶ Java ä¹Ÿæ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ Java 7 ä¸­å¼•å…¥äº†try(resource)è¯­æ³•ç³–ï¼ŒIO çš„ä»£ç å°±å¯ä»¥ç®€åŒ–å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">io</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (InputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>))) &#123;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> (in.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buffer));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ç§å†™æ³•å’Œä¸Šä¸€ç§é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œè¿è¡Œç¨‹åºï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¦æ­¢å¥—å¨ƒ</span><br><span class="line">ç¦æ­¢ç¦æ­¢å¥—å¨ƒ</span><br><span class="line">ç¦æ­¢ç¦æ­¢ç¦æ­¢å¥—å¨ƒ</span><br></pre></td></tr></table></figure></p><p>è§‚å¯Ÿè·å– InputStream è¿™å¥ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>));</span><br></pre></td></tr></table></figure></p><p>æ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬ä¹‹å‰å¤šæ¬¡è£…é¥°çš„ä»£ç éå¸¸ç›¸ä¼¼ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ¬¡è£…é¥°</span></span><br><span class="line">IBeauty meWithManyDecorators = <span class="keyword">new</span> NecklaceDecorator(<span class="keyword">new</span> RingDecorator(<span class="keyword">new</span> EarringDecorator(me)));</span><br></pre></td></tr></table></figure></p><p>äº‹å®ä¸Šï¼ŒæŸ¥çœ‹ I/O çš„æºç å¯çŸ¥ï¼ŒJava I/O çš„è®¾è®¡æ¡†æ¶ä¾¿æ˜¯ä½¿ç”¨çš„ è£…é¥°è€…æ¨¡å¼ï¼ŒInputStream çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š</p><p>å…¶ä¸­ï¼ŒInputStream æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¯¹åº”ä¸Šæ–‡ä¾‹å­ä¸­çš„ IHouseï¼Œå…¶ä¸­æœ€é‡è¦çš„æ–¹æ³•æ˜¯ read æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStream</span> <span class="keyword">implements</span> <span class="title">Closeable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›å­—èŠ‚è¡¨ç¤ºçš„ int å€¼ï¼ˆ0~255ï¼‰ï¼Œè¿”å› -1 è¡¨ç¤ºå·²è¯»åˆ°æœ«å°¾ã€‚ç”±äºå®ƒæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥å…·ä½“çš„é€»è¾‘äº¤ç”±å­ç±»å®ç°ã€‚</p><p>ä¸Šå›¾ä¸­ï¼Œå·¦è¾¹çš„ä¸‰ä¸ªç±» FileInputStreamã€ByteArrayInputStreamã€ServletInputStream æ˜¯ InputStream çš„ä¸‰ä¸ªå­ç±»ï¼Œå¯¹åº”ä¸Šæ–‡ä¾‹å­ä¸­å®ç°äº† IHouse æ¥å£çš„ Houseã€‚</p><p>å³ä¸‹è§’çš„ä¸‰ä¸ªç±» BufferedInputStreamã€DataInputStreamã€CheckedInputStream æ˜¯ä¸‰ä¸ªå…·ä½“çš„è£…é¥°è€…ç±»ï¼Œä»–ä»¬éƒ½ä¸º InputStream å¢å¼ºäº†åŸæœ‰åŠŸèƒ½æˆ–æ·»åŠ äº†æ–°åŠŸèƒ½ã€‚</p><p>FilterInputStream æ˜¯æ‰€æœ‰è£…é¥°ç±»çš„çˆ¶ç±»ï¼Œå®ƒæ²¡æœ‰å®ç°å…·ä½“çš„åŠŸèƒ½ï¼Œä»…ç”¨æ¥åŒ…è£…äº†ä¸€ä¸‹ InputStreamï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterInputStream</span> <span class="keyword">extends</span> <span class="title">InputStream</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">volatile</span> InputStream in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">FilterInputStream</span><span class="params">(InputStream in)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.in = in;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> in.read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ä»¥ BufferedInputStream ä¸ºä¾‹ã€‚åŸæœ‰çš„ InputStream è¯»å–æ–‡ä»¶æ—¶ï¼Œæ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚è¯»å–çš„ï¼Œè¿™ç§æ–¹å¼çš„æ‰§è¡Œæ•ˆç‡å¹¶ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç«‹ä¸€ä¸ªç¼“å†²åŒºï¼Œå…ˆå°†å†…å®¹è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œç¼“å†²åŒºè¯»æ»¡åï¼Œå°†å†…å®¹ä»ç¼“å†²åŒºä¸­å–å‡ºæ¥ï¼Œè¿™æ ·å°±å˜æˆäº†ä¸€æ®µä¸€æ®µè¯»å–ï¼Œç”¨å†…å­˜æ¢å–æ•ˆç‡ã€‚BufferedInputStream å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªçš„ã€‚å®ƒç»§æ‰¿è‡ª FilterInputStreamï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedInputStream</span> <span class="keyword">extends</span> <span class="title">FilterInputStream</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_BUFFER_SIZE = <span class="number">8192</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">volatile</span> <span class="keyword">byte</span> buf[];</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedInputStream</span><span class="params">(InputStream in)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(in, DEFAULT_BUFFER_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedInputStream</span><span class="params">(InputStream in, <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(in);</span><br><span class="line">        <span class="keyword">if</span> (size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Buffer size &lt;= 0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        buf = <span class="keyword">new</span> <span class="keyword">byte</span>[size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹å®ƒçš„æ„é€ æ–¹æ³•ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ï¼Œæ–°å»ºäº†ä¸€ä¸ª byte[] ä½œä¸ºç¼“å†²åŒºï¼Œä»æºç ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ŒJava é»˜è®¤è®¾ç½®çš„ç¼“å†²åŒºå¤§å°ä¸º 8192 byteï¼Œä¹Ÿå°±æ˜¯ 8 KBã€‚</p><p>ç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ read æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">â€‹<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedInputStream</span> <span class="keyword">extends</span> <span class="title">FilterInputStream</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pos &gt;= count) &#123;</span><br><span class="line">            fill();</span><br><span class="line">            <span class="keyword">if</span> (pos &gt;= count)</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getBufIfOpen()[pos++] &amp; <span class="number">0xff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// å¾€ç¼“å†²åŒºå†…å¡«å……è¯»å–å†…å®¹çš„è¿‡ç¨‹</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨ read æ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº† fill æ–¹æ³•ï¼Œfill æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å¾€ç¼“å†²åŒºä¸­å¡«å……è¯»å–çš„å†…å®¹ã€‚è¿™æ ·å°±å®ç°äº†å¢å¼ºåŸæœ‰çš„åŠŸèƒ½ã€‚</p><p>åœ¨æºç ä¸­æˆ‘ä»¬å‘ç°ï¼ŒBufferedInputStream æ²¡æœ‰æ·»åŠ  InputStream ä¸­æ²¡æœ‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥ BufferedInputStream ä½¿ç”¨çš„æ˜¯ é€æ˜çš„è£…é¥°æ¨¡å¼ã€‚</p><p>DataInputStream ç”¨äºæ›´åŠ æ–¹ä¾¿åœ°è¯»å– intã€double ç­‰å†…å®¹ï¼Œè§‚å¯Ÿ DataInputStream çš„æºç å¯ä»¥å‘ç°ï¼ŒDataInputStream ä¸­æ–°å¢äº† readIntã€readLong ç­‰æ–¹æ³•ï¼Œæ‰€ä»¥ DataInputStream ä½¿ç”¨çš„æ˜¯ åŠé€æ˜è£…é¥°æ¨¡å¼ã€‚</p><p>ç†è§£äº† InputStream åï¼Œå†çœ‹ä¸€ä¸‹ OutputStream çš„ç»§æ‰¿å…³ç³»ï¼Œç›¸ä¿¡å¤§å®¶ä¸€çœ¼å°±èƒ½çœ‹å‡ºå„ä¸ªç±»çš„ä½œç”¨äº†ï¼š</p><p>è¿™å°±æ˜¯è£…é¥°æ¨¡å¼ï¼Œæ³¨æ„ä¸è¦å’Œé€‚é…å™¨æ¨¡å¼æ··æ·†äº†ã€‚ä¸¤è€…åœ¨ä½¿ç”¨æ—¶éƒ½æ˜¯åŒ…è£…ä¸€ä¸ªç±»ï¼Œä½†ä¸¤è€…çš„åŒºåˆ«å…¶å®ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><ul><li>çº¯ç²¹çš„é€‚é…å™¨æ¨¡å¼ ä»…ç”¨äºæ”¹å˜æ¥å£ï¼Œä¸æ”¹å˜å…¶åŠŸèƒ½ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸€ç‚¹åŠŸèƒ½ä»¥é€‚é…æ–°æ¥å£ã€‚ä½†ä½¿ç”¨é€‚é…å™¨æ¨¡å¼æ—¶ï¼Œæ¥å£ä¸€å®šä¼šæœ‰ä¸€ä¸ª å›ç‚‰é‡é€  çš„è¿‡ç¨‹ã€‚</li><li>è£…é¥°æ¨¡å¼ ä¸æ”¹å˜åŸæœ‰çš„æ¥å£ï¼Œä»…ç”¨äºå¢å¼ºåŸæœ‰åŠŸèƒ½æˆ–æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¼ºè°ƒçš„æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚</li></ul><p>æŒæ¡äº†è£…é¥°è€…æ¨¡å¼ä¹‹åï¼Œç†è§£ Java I/O çš„æ¡†æ¶è®¾è®¡å°±éå¸¸å®¹æ˜“äº†ã€‚ä½†å¯¹äºä¸ç†è§£è£…é¥°æ¨¡å¼çš„äººæ¥è¯´ï¼Œå„ç§å„æ ·ç›¸ä¼¼çš„ InputStream éå¸¸å®¹æ˜“è®©å¼€å‘è€…æ„Ÿåˆ°å›°æƒ‘ã€‚è¿™ä¸€ç‚¹æ­£æ˜¯è£…é¥°æ¨¡å¼çš„ç¼ºç‚¹ï¼šå®¹æ˜“é€ æˆç¨‹åºä¸­æœ‰å¤§é‡ç›¸ä¼¼çš„ç±»ã€‚è™½ç„¶è¿™æ›´åƒæ˜¯å¼€å‘è€…çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥åšçš„æ˜¯æé«˜è‡ªå·±çš„æŠ€æœ¯ï¼ŒæŒæ¡äº†è¿™ä¸ªè®¾è®¡æ¨¡å¼ä¹‹åå®ƒå°±æ˜¯æˆ‘ä»¬çš„ä¸€æŠŠåˆ©å™¨ã€‚ç°åœ¨æˆ‘ä»¬å†çœ‹åˆ° I/O ä¸åŒçš„ InputStream è£…é¥°ç±»ï¼Œåªéœ€è¦å…³æ³¨å®ƒå¢å¼ºäº†ä»€ä¹ˆåŠŸèƒ½æˆ–æ·»åŠ äº†ä»€ä¹ˆåŠŸèƒ½å³å¯ã€‚</p><h2 id="äº”ã€å¤–è§‚æ¨¡å¼"><a href="#äº”ã€å¤–è§‚æ¨¡å¼" class="headerlink" title="äº”ã€å¤–è§‚æ¨¡å¼"></a>äº”ã€å¤–è§‚æ¨¡å¼</h2><p>å¤–è§‚æ¨¡å¼éå¸¸ç®€å•ï¼Œä½“ç°çš„å°±æ˜¯ Java ä¸­å°è£…çš„æ€æƒ³ã€‚å°†å¤šä¸ªå­ç³»ç»Ÿå°è£…èµ·æ¥ï¼Œæä¾›ä¸€ä¸ªæ›´ç®€æ´çš„æ¥å£ä¾›å¤–éƒ¨è°ƒç”¨ã€‚</p><blockquote><p>å¤–è§‚æ¨¡å¼ï¼šå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚å¤–è§‚æ¨¡å¼åˆç§°ä¸ºé—¨é¢æ¨¡å¼ã€‚</p></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æ¯å¤©æ‰“å¼€ç”µè„‘æ—¶ï¼Œéƒ½éœ€è¦åšä¸‰ä»¶äº‹ï¼š</p><ul><li>æ‰“å¼€æµè§ˆå™¨</li><li>æ‰“å¼€ IDE</li><li>æ‰“å¼€å¾®ä¿¡</li></ul><p>æ¯å¤©ä¸‹ç­æ—¶ï¼Œå…³æœºå‰éœ€è¦åšä¸‰ä»¶äº‹ï¼š</p><ul><li>å…³é—­æµè§ˆå™¨</li><li>å…³é—­ IDE</li><li>å…³é—­å¾®ä¿¡</li></ul><p>ç”¨ç¨‹åºæ¨¡æ‹Ÿå¦‚ä¸‹ï¼š</p><p>æ–°å»ºæµè§ˆå™¨ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Browser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰“å¼€æµè§ˆå™¨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å…³é—­æµè§ˆå™¨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»º IDE ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IDE</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰“å¼€ IDE"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å…³é—­ IDE"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»ºå¾®ä¿¡ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Wechat</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰“å¼€å¾®ä¿¡"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å…³é—­å¾®ä¿¡"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯è°ƒç”¨ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¸Šç­:"</span>);</span><br><span class="line">        Browser.open();</span><br><span class="line">        IDE.open();</span><br><span class="line">        Wechat.open();</span><br><span class="line">â€‹</span><br><span class="line">        System.out.println(<span class="string">"ä¸‹ç­:"</span>);</span><br><span class="line">        Browser.close();</span><br><span class="line">        IDE.close();</span><br><span class="line">        Wechat.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šç­:</span><br><span class="line">æ‰“å¼€æµè§ˆå™¨</span><br><span class="line">æ‰“å¼€ IDE</span><br><span class="line">æ‰“å¼€å¾®ä¿¡</span><br><span class="line">ä¸‹ç­:</span><br><span class="line">å…³é—­æµè§ˆå™¨</span><br><span class="line">å…³é—­ IDE</span><br><span class="line">å…³é—­å¾®ä¿¡</span><br></pre></td></tr></table></figure></p><p>ç”±äºæˆ‘ä»¬æ¯å¤©éƒ½è¦åšè¿™å‡ ä»¶äº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ å¤–è§‚æ¨¡å¼ï¼Œå°†è¿™å‡ ä¸ªå­ç³»ç»Ÿå°è£…èµ·æ¥ï¼Œæä¾›æ›´ç®€æ´çš„æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Browser.open();</span><br><span class="line">        IDE.open();</span><br><span class="line">        Wechat.open();</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Browser.close();</span><br><span class="line">        IDE.close();</span><br><span class="line">        Wechat.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯å°±å¯ä»¥ç®€åŒ–ä»£ç ï¼Œåªå’Œè¿™ä¸ªå¤–è§‚ç±»æ‰“äº¤é“ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Facade facade = <span class="keyword">new</span> Facade();</span><br><span class="line">        System.out.println(<span class="string">"ä¸Šç­:"</span>);</span><br><span class="line">        facade.open();</span><br><span class="line">â€‹</span><br><span class="line">        System.out.println(<span class="string">"ä¸‹ç­:"</span>);</span><br><span class="line">        facade.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>â€‹è¿è¡Œç¨‹åºï¼Œè¾“å‡ºä¸ä¹‹å‰ä¸€æ ·ã€‚</p><p>å¤–è§‚æ¨¡å¼å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå®ƒä½¿å¾—ä¸¤ç§ä¸åŒçš„ç±»ä¸ç”¨ç›´æ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶â€”â€”ä¹Ÿå°±æ˜¯å¤–è§‚ç±»â€”â€”é—´æ¥äº¤äº’ã€‚å¤–è§‚ç±»ä¸­åªéœ€è¦æš´éœ²ç®€æ´çš„æ¥å£ï¼Œéšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œæ‰€ä»¥è¯´ç™½äº†å°±æ˜¯å°è£…çš„æ€æƒ³ã€‚</p><p>å¤–è§‚æ¨¡å¼éå¸¸å¸¸ç”¨ï¼Œï¼ˆå½“ç„¶äº†ï¼å†™ä»£ç å“ªæœ‰ä¸å°è£…çš„ï¼ï¼‰å°¤å…¶æ˜¯åœ¨ç¬¬ä¸‰æ–¹åº“çš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æä¾›å°½é‡ç®€æ´çš„æ¥å£ä¾›åˆ«äººè°ƒç”¨ã€‚å¦å¤–ï¼Œåœ¨ MVC æ¶æ„ä¸­ï¼ŒC å±‚ï¼ˆControllerï¼‰å°±å¯ä»¥çœ‹ä½œæ˜¯å¤–è§‚ç±»ï¼ŒModel å’Œ View å±‚é€šè¿‡ Controller äº¤äº’ï¼Œå‡å°‘äº†è€¦åˆã€‚</p><h2 id="å…­ã€äº«å…ƒæ¨¡å¼"><a href="#å…­ã€äº«å…ƒæ¨¡å¼" class="headerlink" title="å…­ã€äº«å…ƒæ¨¡å¼"></a>å…­ã€äº«å…ƒæ¨¡å¼</h2><p>äº«å…ƒæ¨¡å¼ä½“ç°çš„æ˜¯ ç¨‹åºå¯å¤ç”¨ çš„ç‰¹ç‚¹ï¼Œä¸ºäº†èŠ‚çº¦å®è´µçš„å†…å­˜ï¼Œç¨‹åºåº”è¯¥å°½å¯èƒ½åœ°å¤ç”¨ï¼Œå°±åƒã€Šæé™ç¼–ç¨‹ã€‹ä½œè€… Kent åœ¨ä¹¦é‡Œè¯´åˆ°çš„é‚£æ ·ï¼šDonâ€™t repeat yourself. ç®€å•æ¥è¯´ äº«å…ƒæ¨¡å¼å°±æ˜¯å…±äº«å¯¹è±¡ï¼Œæé«˜å¤ç”¨æ€§ï¼Œå®˜æ–¹çš„å®šä¹‰å€’æ˜¯æ˜¾å¾—æ–‡ç»‰ç»‰çš„ï¼š</p><blockquote><p>äº«å…ƒæ¨¡å¼ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ç³»ç»Ÿåªä½¿ç”¨å°‘é‡çš„å¯¹è±¡ï¼Œè€Œè¿™äº›å¯¹è±¡éƒ½å¾ˆç›¸ä¼¼ï¼ŒçŠ¶æ€å˜åŒ–å¾ˆå°ï¼Œå¯ä»¥å®ç°å¯¹è±¡çš„å¤šæ¬¡å¤ç”¨ã€‚ç”±äºäº«å…ƒæ¨¡å¼è¦æ±‚èƒ½å¤Ÿå…±äº«çš„å¯¹è±¡å¿…é¡»æ˜¯ç»†ç²’åº¦å¯¹è±¡ï¼Œå› æ­¤å®ƒåˆç§°ä¸ºè½»é‡çº§æ¨¡å¼ã€‚</p></blockquote><p>â€‹æœ‰ä¸ªç»†èŠ‚å€¼å¾—æ³¨æ„ï¼šæœ‰äº›å¯¹è±¡æœ¬èº«ä¸ä¸€æ ·ï¼Œä½†é€šè¿‡ä¸€ç‚¹ç‚¹å˜åŒ–åå°±å¯ä»¥å¤ç”¨ï¼Œæˆ‘ä»¬ç¼–ç¨‹æ—¶å¯èƒ½ç¨ä¸æ³¨æ„å°±ä¼šå¿˜è®°å¤ç”¨è¿™äº›å¯¹è±¡ã€‚æ¯”å¦‚è¯´ä¼Ÿå¤§çš„ã€Šè¶…çº§ç›ä¸½ã€‹ï¼Œè°èƒ½æƒ³åˆ°è‰å’Œäº‘æ›´æ”¹ä¸€ä¸‹é¢œè‰²å°±å¯ä»¥å®ç°å¤ç”¨å‘¢ï¼Ÿ</p><p>è¿˜æœ‰é‡Œé¢çš„ä¸‰ç§ä¹Œé¾Ÿï¼Œæ¢ä¸€ä¸ªé¢œè‰²ã€åŠ ä¸€ä¸ªè£…é¥°å°±å˜æˆäº†ä¸åŒçš„æ€ªï¼š</p><p>åœ¨ã€Šè¶…çº§ç›ä¸½ã€‹ä¸­ï¼Œè¿™æ ·çš„ç»†èŠ‚è¿˜æœ‰å¾ˆå¤šï¼Œæ­£æ˜¯è¿™äº›ç²¾æ¹›çš„å¤ç”¨ä½¿å¾—è¿™ä¸€æ¬¾çº¢éå…¨çƒçš„æ¸¸æˆä»…æœ‰ 40KB å¤§å°ã€‚æ­£æ˜¯å°è¯äº†é‚£å¥åè¨€ï¼šç¥åœ¨ç»†èŠ‚ä¹‹ä¸­ã€‚</p><h2 id="ä¸ƒã€ä»£ç†æ¨¡å¼"><a href="#ä¸ƒã€ä»£ç†æ¨¡å¼" class="headerlink" title="ä¸ƒã€ä»£ç†æ¨¡å¼"></a>ä¸ƒã€ä»£ç†æ¨¡å¼</h2><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª äºº ç±»ï¼Œä»–æ•´å¤©å°±åªè´Ÿè´£åƒé¥­ã€ç¡è§‰ï¼š</p><p>äººç±»çš„æ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IPerson</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>äºº ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">IPerson</span></span>&#123;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘åœ¨åƒé¥­"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘åœ¨ç¡è§‰"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯æµ‹è¯•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.eat();</span><br><span class="line">        person.sleep();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â€‹æˆ‘åœ¨åƒé¥­</span><br><span class="line">æˆ‘åœ¨ç¡è§‰</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç±»åŒ…è£…åˆ°å¦ä¸€ä¸ªç±»ä¸­ï¼Œå®ç°å®Œå…¨ä¸€æ ·çš„è¡Œä¸ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonProxy</span> <span class="keyword">implements</span> <span class="title">IPerson</span> </span>&#123;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Person person;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PersonProxy</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        person.eat();</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        person.sleep();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å°†å®¢æˆ·ç«¯ä¿®æ”¹ä¸ºè°ƒç”¨è¿™ä¸ªæ–°çš„ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        PersonProxy proxy = <span class="keyword">new</span> PersonProxy(person);</span><br><span class="line">        proxy.eat();</span><br><span class="line">        proxy.sleep();</span><br><span class="line">    &#125;</span><br><span class="line">â€‹&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘åœ¨åƒé¥­</span><br><span class="line">æˆ‘åœ¨ç¡è§‰</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚</p><p>ç¬”è€…å°½é‡ç”¨æœ€ç®€æ´çš„ä»£ç è®²è§£æ­¤æ¨¡å¼ï¼Œåªè¦ç†è§£äº†ä¸Šè¿°è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å°±çŸ¥é“ä»£ç†æ¨¡å¼æ˜¯æ€ä¹ˆä¸€å›äº‹äº†ã€‚æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯å’Œ Person ç±»ä¹‹é—´æ–°å¢äº†ä¸€ä¸ªä¸­é—´ä»¶ PersonProxyï¼Œè¿™ä¸ªç±»å°±å«åšä»£ç†ç±»ï¼Œä»–å®ç°äº†å’Œ Person ç±»ä¸€æ¨¡ä¸€æ ·çš„è¡Œä¸ºã€‚</p><blockquote><p>ä»£ç†æ¨¡å¼ï¼šç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</p></blockquote><p>ç°åœ¨è¿™ä¸ªä»£ç†ç±»è¿˜çœ‹ä¸å‡ºä»»ä½•æ„ä¹‰ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹å·¥ä½œä¸­çš„éœ€æ±‚ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šåœ¨ç½‘ç»œè¯·æ±‚å‰åï¼Œåˆ†åˆ«æ‰“å°å°†è¦å‘é€çš„æ•°æ®å’Œæ¥æ”¶åˆ°æ•°æ®ä½œä¸ºæ—¥å¿—ä¿¡æ¯ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥æ–°å»ºä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„ä»£ç†ç±»ï¼Œè®©å®ƒä»£ä¸ºå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå¹¶åœ¨ä»£ç†ç±»ä¸­æ‰“å°è¿™äº›æ—¥å¿—ä¿¡æ¯ã€‚</p><p>æ–°å»ºç½‘ç»œè¯·æ±‚æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IHttp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">request</span><span class="params">(String sendData)</span></span>;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String receivedData)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»º Http è¯·æ±‚å·¥å…·ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> <span class="keyword">implements</span> <span class="title">IHttp</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">(String sendData)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç½‘ç»œè¯·æ±‚ä¸­..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String receivedData)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç½‘ç»œè¯·æ±‚å®Œæˆã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»º Http ä»£ç†ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpProxy</span> <span class="keyword">implements</span> <span class="title">IHttp</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HttpUtil httpUtil;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpProxy</span><span class="params">(HttpUtil httpUtil)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.httpUtil = httpUtil;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">(String sendData)</span> </span>&#123;</span><br><span class="line">        httpUtil.request(sendData);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String receivedData)</span> </span>&#123;</span><br><span class="line">        httpUtil.onSuccess(receivedData);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ°è¿™é‡Œï¼Œå’Œæˆ‘ä»¬ä¸Šè¿°åƒé¥­ç¡è§‰çš„ä»£ç æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œç°åœ¨æˆ‘ä»¬åœ¨ HttpProxy ä¸­æ–°å¢æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpProxy</span> <span class="keyword">implements</span> <span class="title">IHttp</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HttpUtil httpUtil;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpProxy</span><span class="params">(HttpUtil httpUtil)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.httpUtil = httpUtil;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">(String sendData)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å‘é€æ•°æ®:"</span> + sendData);</span><br><span class="line">        httpUtil.request(sendData);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String receivedData)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°æ•°æ®:"</span> + receivedData);</span><br><span class="line">        httpUtil.onSuccess(receivedData);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯éªŒè¯ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">        HttpProxy proxy = <span class="keyword">new</span> HttpProxy(httpUtil);</span><br><span class="line">        proxy.request(<span class="string">"request data"</span>);</span><br><span class="line">        proxy.onSuccess(<span class="string">"received result"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘é€æ•°æ®:request data</span><br><span class="line">ç½‘ç»œè¯·æ±‚ä¸­...</span><br><span class="line">æ”¶åˆ°æ•°æ®:received result</span><br><span class="line">ç½‘ç»œè¯·æ±‚å®Œæˆã€‚</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªåº”ç”¨ï¼Œé™¤äº† æ‰“å°æ—¥å¿—ï¼Œå®ƒè¿˜å¯ä»¥ç”¨æ¥åšæƒé™ç®¡ç†ã€‚è¯»è€…çœ‹åˆ°è¿™é‡Œå¯èƒ½å·²ç»å‘ç°äº†ï¼Œè¿™ä¸ªä»£ç†ç±»çœ‹èµ·æ¥å’Œè£…é¥°æ¨¡å¼çš„ FilterInputStream ä¸€æ¨¡ä¸€æ ·ï¼Œä½†ä¸¤è€…çš„ç›®çš„ä¸åŒï¼Œè£…é¥°æ¨¡å¼æ˜¯ä¸ºäº† å¢å¼ºåŠŸèƒ½æˆ–æ·»åŠ åŠŸèƒ½ï¼Œä»£ç†æ¨¡å¼ä¸»è¦æ˜¯ä¸ºäº†åŠ ä»¥æ§åˆ¶ã€‚</p><h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><p>ä¸Šä¾‹ä¸­çš„ä»£ç†è¢«ç§°ä¹‹ä¸ºé™æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†ä¸é™æ€ä»£ç†çš„åŸç†ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯æ¢äº†ä¸€ç§å†™æ³•ã€‚ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼Œéœ€è¦æŠŠä¸€ä¸ªç±»ä¼ å…¥ï¼Œç„¶åæ ¹æ®å®ƒæ­£åœ¨è°ƒç”¨çš„æ–¹æ³•ååˆ¤æ–­æ˜¯å¦éœ€è¦åŠ ä»¥æ§åˆ¶ã€‚ç”¨ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpProxy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HttpUtil httpUtil;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpProxy</span><span class="params">(HttpUtil httpUtil)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.httpUtil = httpUtil;</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="comment">// å‡è®¾è°ƒç”¨ httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½è¦é€šè¿‡è¿™ä¸ªæ–¹æ³•é—´æ¥è°ƒç”¨, methodName è¡¨ç¤ºæ–¹æ³•åï¼Œargs è¡¨ç¤ºæ–¹æ³•ä¸­ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">visit</span><span class="params">(String methodName, Object[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (methodName.equals(<span class="string">"request"</span>)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ–¹æ³•åæ˜¯ requestï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ request æ–¹æ³•ï¼Œargs çš„ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">            System.out.println(<span class="string">"å‘é€æ•°æ®:"</span> + args[<span class="number">0</span>]);</span><br><span class="line">            httpUtil.request(args[<span class="number">0</span>].toString());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (methodName.equals(<span class="string">"onSuccess"</span>)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ–¹æ³•åæ˜¯ onSuccessï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ onSuccess æ–¹æ³•ï¼Œargs çš„ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">            System.out.println(<span class="string">"æ”¶åˆ°æ•°æ®:"</span> + args[<span class="number">0</span>]);</span><br><span class="line">            httpUtil.onSuccess(args[<span class="number">0</span>].toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¼ªä»£ç çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå®ç°èµ·æ¥å”¯ä¸€çš„éš¾ç‚¹å°±æ˜¯ æ€ä¹ˆè®© httpUtil è°ƒç”¨ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½é€šè¿‡ä¸€ä¸ªæ–¹æ³•é—´æ¥è°ƒç”¨ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ°åå°„æŠ€æœ¯ï¼Œä¸äº†è§£åå°„æŠ€æœ¯ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸å¦¨æŠŠå®ƒè®°åšå›ºå®šçš„å†™æ³•ã€‚å®é™…çš„åŠ¨æ€ä»£ç†ç±»ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HttpUtil httpUtil;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IHttp <span class="title">getInstance</span><span class="params">(HttpUtil httpUtil)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.httpUtil = httpUtil;</span><br><span class="line">        <span class="keyword">return</span> (IHttp) Proxy.newProxyInstance(httpUtil.getClass().getClassLoader(), httpUtil.getClass().getInterfaces(), <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">â€‹</span><br><span class="line">    <span class="comment">// è°ƒç”¨ httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½è¦é€šè¿‡è¿™ä¸ªæ–¹æ³•è°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (method.getName().equals(<span class="string">"request"</span>)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ–¹æ³•åæ˜¯ requestï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ request æ–¹æ³•</span></span><br><span class="line">            System.out.println(<span class="string">"å‘é€æ•°æ®:"</span> + args[<span class="number">0</span>]);</span><br><span class="line">            result = method.invoke(httpUtil, args);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.getName().equals(<span class="string">"onSuccess"</span>)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ–¹æ³•åæ˜¯ onSuccessï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ onSuccess æ–¹æ³•</span></span><br><span class="line">            System.out.println(<span class="string">"æ”¶åˆ°æ•°æ®:"</span> + args[<span class="number">0</span>]);</span><br><span class="line">            result = method.invoke(httpUtil, args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…ˆçœ‹ getInstance æ–¹æ³•ï¼ŒProxy.newProxyInstance æ–¹æ³•æ˜¯ Java ç³»ç»Ÿæä¾›çš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºåŠ¨æ€ä»£ç†ã€‚å…¶ä¸­ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«ä»£ç†çš„ç±»çš„ ClassLoaderï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«ä»£ç†ç±»çš„ Interfacesï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Object ä¸­çš„ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ï¼Œè¿™é‡Œå°±æ˜¯å›ºå®šå†™æ³•ã€‚æˆ‘ä»¬åªè¦çŸ¥é“ç³»ç»Ÿéœ€è¦è¿™ä¸¤ä¸ªå‚æ•°æ‰èƒ½è®©æˆ‘ä»¬å®ç°æˆ‘ä»¬çš„ç›®çš„ï¼šè°ƒç”¨è¢«ä»£ç†ç±»çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½é€šè¿‡ä¸€ä¸ªæ–¹æ³•é—´æ¥è°ƒç”¨ã€‚ç°åœ¨æˆ‘ä»¬ç»™ç³»ç»Ÿæä¾›äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œç³»ç»Ÿå°±ä¼šåœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªç›®çš„ã€‚</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ InvocationHandler æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable</span>;</span><br></pre></td></tr></table></figure></p><p>â€‹é‚£ä¹ˆä¸ç”¨çŒœå°±çŸ¥é“ï¼Œç°åœ¨æˆ‘ä»¬è°ƒç”¨è¢«ä»£ç†ç±» httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šé€šè¿‡è¿™ä¸ª invoke æ–¹æ³•è°ƒç”¨äº†ã€‚invoke æ–¹æ³•ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬æš‚æ—¶ç”¨ä¸ä¸Šï¼Œç¬¬äºŒä¸ªå‚æ•° method å°±æ˜¯è°ƒç”¨çš„æ–¹æ³•ï¼Œä½¿ç”¨ method.getName() å¯ä»¥è·å–åˆ°æ–¹æ³•åï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è°ƒç”¨ method æ–¹æ³•éœ€è¦ä¼ å…¥çš„å‚æ•°ã€‚æœ¬ä¾‹ä¸­æ— è®º request è¿˜æ˜¯ onSuccess éƒ½åªæœ‰ä¸€ä¸ª String ç±»å‹çš„å‚æ•°ï¼Œå¯¹åº”åˆ°è¿™é‡Œå°±æ˜¯ args[0]ã€‚è¿”å›çš„ Object æ˜¯ method æ–¹æ³•çš„è¿”å›å€¼ï¼Œæœ¬ä¾‹ä¸­éƒ½æ˜¯æ— è¿”å›å€¼çš„ã€‚</p><p>æˆ‘ä»¬åœ¨ invoke æ–¹æ³•ä¸­åˆ¤æ–­äº†å½“å‰è°ƒç”¨æ–¹æ³•çš„æ–¹æ³•åï¼Œå¦‚æœç°åœ¨è°ƒç”¨çš„æ–¹æ³•æ˜¯ requestï¼Œé‚£ä¹ˆæ‰“å°è¯·æ±‚å‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿™ä¸€è¡Œä»£ç ç»§ç»­æ‰§è¡Œå½“å‰æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = method.invoke(httpUtil, args);</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯ åå°„è°ƒç”¨å‡½æ•° çš„å†™æ³•ï¼Œå¦‚æœä¸äº†è§£å¯ä»¥è®°åšå›ºå®šå†™æ³•ï¼Œæƒ³è¦äº†è§£çš„åŒå­¦å¯ä»¥çœ‹ä¹‹å‰çš„è¿™ç¯‡æ–‡ç« ï¼šè¯¦è§£é¢è¯•ä¸­å¸¸è€ƒçš„ Java åå°„æœºåˆ¶ã€‚è™½ç„¶è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å°† result è¿”å›ï¼Œè¿™æ˜¯æ ‡å‡†åšæ³•ã€‚</p><p>å¦‚æœç°åœ¨è°ƒç”¨çš„æ–¹æ³•æ˜¯ onSuccessï¼Œé‚£ä¹ˆæ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå¹¶åå°„ç»§ç»­æ‰§è¡Œå½“å‰æ–¹æ³•ã€‚</p><p>ä¿®æ”¹å®¢æˆ·ç«¯éªŒè¯ä¸€ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">        IHttp proxy = <span class="keyword">new</span> HttpProxy().getInstance(httpUtil);</span><br><span class="line">        proxy.request(<span class="string">"request data"</span>);</span><br><span class="line">        proxy.onSuccess(<span class="string">"received result"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºä¸ä¹‹å‰ä¸€æ ·ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘é€æ•°æ®:request data</span><br><span class="line">ç½‘ç»œè¯·æ±‚ä¸­...</span><br><span class="line">æ”¶åˆ°æ•°æ®:received result</span><br><span class="line">ç½‘ç»œè¯·æ±‚å®Œæˆã€‚</span><br></pre></td></tr></table></figure></p><p>åŠ¨æ€ä»£ç†æœ¬è´¨ä¸Šä¸é™æ€ä»£ç†æ²¡æœ‰åŒºåˆ«ï¼Œå®ƒçš„å¥½å¤„æ˜¯ èŠ‚çœä»£ç é‡ã€‚æ¯”å¦‚è¢«ä»£ç†ç±»æœ‰ 20 ä¸ªæ–¹æ³•ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦æ§åˆ¶å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥ç”¨åŠ¨æ€ä»£ç†é€šè¿‡æ–¹æ³•åå¯¹è¢«ä»£ç†ç±»è¿›è¡ŒåŠ¨æ€çš„æ§åˆ¶ï¼Œè€Œå¦‚æœç”¨é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å¦å¤–çš„ 18 ä¸ªæ–¹æ³•ä¹Ÿå†™å‡ºæ¥ï¼Œéå¸¸ç¹çã€‚è¿™å°±æ˜¯åŠ¨æ€ä»£ç†çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p><h2 id="å…«-äº«å…ƒæ¨¡å¼-Flyweight-Pattern"><a href="#å…«-äº«å…ƒæ¨¡å¼-Flyweight-Pattern" class="headerlink" title="å…«. äº«å…ƒæ¨¡å¼ Flyweight Pattern"></a>å…«. äº«å…ƒæ¨¡å¼ Flyweight Pattern</h2><p>è‹±æ–‡æ˜¯ Flyweight Patternï¼Œä¸çŸ¥é“æ˜¯è°æœ€å…ˆç¿»è¯‘çš„è¿™ä¸ªè¯ï¼Œæ„Ÿè§‰è¿™ç¿»è¯‘çœŸçš„ä¸å¥½ç†è§£ï¼Œæˆ‘ä»¬è¯•ç€å¼ºè¡Œå…³è”èµ·æ¥å§ã€‚Flyweight æ˜¯è½»é‡çº§çš„æ„æ€ï¼Œäº«å…ƒåˆ†å¼€æ¥è¯´å°±æ˜¯ å…±äº« å…ƒå™¨ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤ç”¨å·²ç»ç”Ÿæˆçš„å¯¹è±¡ï¼Œè¿™ç§åšæ³•å½“ç„¶ä¹Ÿå°±æ˜¯è½»é‡çº§çš„äº†ã€‚</p><p>å¤ç”¨å¯¹è±¡æœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼Œç”¨ä¸€ä¸ª HashMap æ¥å­˜æ”¾æ¯æ¬¡æ–°ç”Ÿæˆçš„å¯¹è±¡ã€‚æ¯æ¬¡éœ€è¦ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå…ˆåˆ° HashMap ä¸­çœ‹çœ‹æœ‰æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡æ”¾å…¥ HashMap ä¸­</p><h1 id="ç»“æ„å‹æ¨¡å¼æ€»ç»“"><a href="#ç»“æ„å‹æ¨¡å¼æ€»ç»“" class="headerlink" title="ç»“æ„å‹æ¨¡å¼æ€»ç»“"></a>ç»“æ„å‹æ¨¡å¼æ€»ç»“</h1><p>å‰é¢ï¼Œæˆ‘ä»¬è¯´äº†ä»£ç†æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¢æ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€é—¨é¢æ¨¡å¼ã€ç»„åˆæ¨¡å¼å’Œäº«å…ƒæ¨¡å¼ã€‚è¯»è€…æ˜¯å¦å¯ä»¥åˆ†åˆ«æŠŠè¿™å‡ ä¸ªæ¨¡å¼è¯´æ¸…æ¥šäº†å‘¢ï¼Ÿåœ¨è¯´åˆ°è¿™äº›æ¨¡å¼çš„æ—¶å€™ï¼Œå¿ƒä¸­æ˜¯å¦æœ‰ä¸€ä¸ªæ¸…æ™°çš„å›¾æˆ–å¤„ç†æµç¨‹åœ¨è„‘æµ·é‡Œå‘¢ï¼Ÿ</p><blockquote><p>ä»£ç†æ¨¡å¼æ˜¯åšæ–¹æ³•å¢å¼ºçš„ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯æŠŠé¸¡åŒ…è£…æˆé¸­è¿™ç§ç”¨æ¥é€‚é…æ¥å£çš„ï¼Œæ¡¥æ¢æ¨¡å¼åšåˆ°äº†å¾ˆå¥½çš„è§£è€¦ï¼Œè£…é¥°æ¨¡å¼ä»åå­—ä¸Šå°±çœ‹å¾—å‡ºæ¥ï¼Œé€‚åˆäºè£…é¥°ç±»æˆ–è€…è¯´æ˜¯å¢å¼ºç±»çš„åœºæ™¯ï¼Œé—¨é¢æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒå®ä¾‹åŒ–è¿‡ç¨‹ï¼Œåªè¦è°ƒç”¨éœ€è¦çš„æ–¹æ³•å³å¯ï¼Œç»„åˆæ¨¡å¼ç”¨äºæè¿°å…·æœ‰å±‚æ¬¡ç»“æ„çš„æ•°æ®ï¼Œäº«å…ƒæ¨¡å¼æ˜¯ä¸ºäº†åœ¨ç‰¹å®šçš„åœºæ™¯ä¸­ç¼“å­˜å·²ç»åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨äºæé«˜æ€§èƒ½ã€‚</p></blockquote><p>æœ¬æ–‡ä½œè€…ï¼šAlpinist Wang</p><p>å£°æ˜ï¼šæœ¬æ–‡å½’ â€œåŠ›æ‰£â€ ç‰ˆæƒæ‰€æœ‰ï¼Œå¦‚éœ€è½¬è½½è¯·è”ç³»ã€‚æ–‡ç« å°é¢å›¾å’Œæ–‡ä¸­éƒ¨åˆ†å›¾ç‰‡æ¥æºäºç½‘ç»œï¼Œä¸ºéå•†ä¸šç”¨é€”ä½¿ç”¨ï¼Œå¦‚æœ‰ä¾µæƒè”ç³»åˆ é™¤ã€‚</p><p>ç¼–è¾‘äº 2019-11-28</p>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Design Patterns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CV And SoP</title>
      <link href="/2019/05/14/CV-AND-SOP/"/>
      <url>/2019/05/14/CV-AND-SOP/</url>
      
        <content type="html"><![CDATA[<h2 id="THE-GUIDELINE-OF-CV-AND-SOP-PS"><a href="#THE-GUIDELINE-OF-CV-AND-SOP-PS" class="headerlink" title="THE GUIDELINE OF CV AND SOP(PS)"></a>THE GUIDELINE OF CV AND SOP(PS)</h2><ul><li><p>ç¾å›½ç ”ç©¶ç”Ÿç”³è¯·æ—¶ç»å¸¸ä¼šåœ¨Application Requirementséƒ¨åˆ†çœ‹åˆ°å‡ ç§ä¸åŒåç§°çš„ç”³è¯·æ–‡ä¹¦ï¼Œæ¯”å¦‚ï¼špersonal statementï¼ŒPSï¼ŒPersonal history statementï¼Œstatementï¼ŒStatement of goalsï¼ŒPersonal purposeï¼Œpersonal essayæˆ–Statement of Purposeã€‚ä¸ç®¡åå­—å¦‚ä½•å˜åŒ–ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬å¤§å®¶éƒ½çŸ¥é“çš„ç ”ç©¶ç”Ÿç”³è¯·ä¸»æ–‡ä¹¦â€”â€”ä¸ªäººé™ˆè¿°ï¼Œåªä¸è¿‡ä¸åŒçš„ç¾å›½å¤§å­¦åœ¨ç”³è¯·æ—¶å…³æ³¨ç”³è¯·äººçš„ä¾§é‡ç‚¹ä¸åŒï¼Œè¦æ±‚å­¦ç”Ÿä¸»è¦é™ˆè¿°å’Œä»‹ç»è‡ªå·±çš„å†…å®¹å æ¯”ä¸åŒï¼Œä½†æ ¸å¿ƒå†…å®¹å¹¶æ— å¤ªå¤šå·®å¼‚ã€‚</p></li><li><p>é€šè¿‡ä¸Šé¢è¿™äº›ç¾å›½å¤§å­¦çš„å®˜æ–¹ç ”ç©¶ç”Ÿç”³è¯·æ–‡ä¹¦çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¸ªäººé™ˆè¿°æ–‡ä¹¦ä¸»è¦æ˜¯è®©ç”³è¯·äººè¦æè¿°ä¸ªäººèƒŒæ™¯ï¼ç»å†ã€å­¦ä¹ ï¼å­¦æœ¯æƒ…å†µã€ä¸ç”³è¯·ä¸“ä¸šç›¸å…³çš„ç ”ç©¶ï¼å®ä¹ ï¼å·¥ä½œæƒ…å†µï¼Œä»¥åŠèŒä¸šç›®æ ‡è¿™å››éƒ¨åˆ†ã€‚</p></li><li><ol><li>æˆ‘è¦ç”³è¯·ä»€ä¹ˆä¸“ä¸šï¼é¡¹ç›®ï¼Ÿè¦ç”³è¯·å…·ä½“å“ªä¸ªåˆ†æ”¯ï¼Ÿ</li></ol></li><li><ol start="2"><li>æˆ‘ä¸ºä»€ä¹ˆè¦ç”³è¯·è¿™ä¸ªä¸“ä¸šï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªåˆ†æ”¯ï¼Ÿ</li></ol></li><li><ol start="3"><li>æˆ‘ä»€ä¹ˆç‰¹æ®Šç»å†æˆ–ä¸ªäººåŸå› è®©ä½ å¼€å§‹å…³æ³¨è¿™ä¸ªä¸“ä¸šé¢†åŸŸï¼Œå¼€å§‹å¯¹è¿™ä¸ªåˆ†æ”¯æ–¹å‘æ„Ÿå…´è¶£ï¼Ÿ</li></ol></li><li><ol start="4"><li>æˆ‘æ˜¯å¦ä¹‹å‰åœ¨å­¦ä¹ ã€ç ”ç©¶ã€å®ä¹ æˆ–å·¥ä½œä¸­æœ‰ä¸ç”³è¯·ä¸“ä¸šå’Œç”³è¯·åˆ†æ”¯ç›¸å…³çš„ä¸ªäººç»å†ã€å­¦æœ¯èƒ½åŠ›ã€ä¸“ä¸šæŠ€èƒ½æˆ–ç ”ç©¶æˆæœï¼Ÿ</li></ol></li><li><ol start="5"><li>æˆ‘è§‰å¾—æˆ‘ç›®å‰åœ¨è¿™ä¸ªä¸“ä¸šå’Œè¿™ä¸ªåˆ†æ”¯é¢†åŸŸè¿˜å­˜åœ¨å“ªäº›ä¸è¶³ï¼Œè¿˜å¸Œæœ›è¿›è¡Œæ€æ ·çš„ä¸“ä¸šèƒ½åŠ›æå‡å’Œè‡ªæˆ‘å®Œå–„ï¼Ÿ</li></ol></li><li><ol start="6"><li>æˆ‘æœªæ¥çš„å­¦ä¹ ï¼ç ”ç©¶è®¡åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ</li></ol></li><li><ol start="7"><li>æˆ‘æœªæ¥çš„çŸ­æœŸå’Œé•¿æœŸçš„èŒä¸šè§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ</li></ol></li><li><ol start="8"><li>æˆ‘ä¸ºä»€ä¹ˆä¼šé€‰æ‹©ç”³è¯·è¿™æ‰€å¤§å­¦ï¼Ÿå¸å¼•æˆ‘çš„ä¸»è¦å› ç´ éƒ½æœ‰å“ªäº›ï¼Ÿ</li></ol></li><li><ol start="9"><li>é™¤äº†å­¦æœ¯ã€ç ”ç©¶ã€å·¥ä½œæ–¹é¢ç»å†å’Œèƒ½åŠ›æœ¬èº«ï¼Œä½ è¿˜æœ‰å“ªäº›ä¸ªäººç‹¬ç‰¹çš„ã€æœ‰åˆ«å…¶ä»–äººçš„åœ°æ–¹ï¼Ÿ</li></ol></li></ul><h2 id="UCSD"><a href="#UCSD" class="headerlink" title="UCSD"></a>UCSD</h2><ul><li>çœ‹ä¸Šé¢å®˜ç½‘æˆªå›¾å›¾ç‰‡å†…å®¹æˆ‘ä»¬èƒ½çœ‹å‡ºï¼Œè¦æ±‚PSç¯‡å¹…1é¡µï¼Œå¹¶ä¸”éœ€è¦åŒ…æ‹¬ï¼šä½ æ„Ÿå…´è¶£çš„å…·ä½“é¢†åŸŸï¼Œä½ å…³æ³¨çš„åˆ†æ”¯æ–¹å‘ï¼Œä»¥åŠä½ æ„Ÿå…´è¶£çš„æ•™æˆæ˜¯è°ã€‚è¿™ä¸ªPSçš„å‘½é¢˜è¦æ±‚éœ€è¦æˆ‘ä»¬æ³¨æ„æ˜ç¡®ç¯‡å¹…å­—æ•°ï¼ŒåŒæ—¶æ–‡ä¹¦å†…å®¹é‡ç‚¹æ˜¯åœ¨å­¦æœ¯èƒ½åŠ›å’Œé¡¹ç›®ç ”ç©¶æ–¹é¢å»ä»‹ç»è‡ªå·±å’Œå±•ç¤ºè‡ªå·±èƒ½åŠ›ï¼Œä»¥åŠè¦å¯¹è¿™ä¸ªå­¦æ ¡çš„ç”³è¯·éƒ¨é—¨å’Œæ•™æˆä»¬æœ‰ä¸€äº›äº†è§£å’Œå…³æ³¨ï¼Œå› ä¸ºæ˜¯è¦æ˜ç¡®å…·ä½“çš„å›ç­”ä½ æ„Ÿå…´è¶£è¿™ä¸ªå­¦æ ¡çš„åˆ†æ”¯æ–¹å‘å’ŒæŸä¸ªæ•™æˆçš„ï¼Œå¦‚æœä½ ä¸æå‰è¿›è¡Œäº†è§£ï¼Œå›ç­”çš„æ²¡æœ‰é’ˆå¯¹æ€§ï¼Œæˆ–è€…ä½ æåˆ°çš„æ•™æˆæ“…é•¿ç ”ç©¶é¢†åŸŸæ ¹æœ¬ä¸æ˜¯ä½ æ–‡ä¹¦ä¸­è¡¨è¾¾çš„æ„Ÿå…´è¶£æ–¹å‘ï¼Œé‚£ä¹ˆä½ è¿™æ ·çš„å†…å®¹è¡¨è¿°ä¹Ÿä¼šç»™ä½ çš„ç”³è¯·å‡åˆ†ã€‚æˆ‘ä¸è¿‡è¿™ä¸ªå­¦æ ¡çš„é¢˜ç›®è¦æ±‚å¹¶ä¸ç¯‡ï¼Œå®Œå…¨å¯ä»¥åœ¨é€šç”¨ç‰ˆPSçš„åŸºç¡€ä¸Šæœ€åè¡¥å……1-2å¥æ„Ÿå…´è¶£æ•™æˆå’Œå¯¹äºè¿™åæ•™æˆçš„æ„Ÿå…´è¶£åŸå› å°±å¯ä»¥äº†ï¼Œå› ä¸ºå¤§éƒ¨åˆ†é€šç”¨ç‰ˆçš„PSå†…å®¹ä¸­æˆ‘æ˜¯ä¼šç»™å­¦ç”Ÿä»¬ç›´æ¥é™ˆè¿°å‡ºç”³è¯·äººæ“…é•¿å’Œæ„Ÿå…´è¶£çš„é¢†åŸŸå’Œåˆ†æ”¯æ–¹å‘çš„ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹ä¸éœ€è¦é¢å¤–æ–°å¢å’Œè¡¥å……ï¼Œåªæ˜¯æœ‰é’ˆå¯¹æ€§çš„è¡¥å……æ„Ÿå…´è¶£æ•™æˆå°±è¡Œäº†ã€‚</li></ul><h2 id="University-of-Michiganâ€“Ann-Arborçš„ç”³è¯·æ–‡ä¹¦è¦æ±‚ä¸­éœ€è¦åŒæ—¶é€’äº¤ä¸¤ç§æ–‡ä¹¦ï¼Œåˆ†åˆ«æ˜¯Statement-of-Purposeå’ŒPersonal-Statementï¼Œ"><a href="#University-of-Michiganâ€“Ann-Arborçš„ç”³è¯·æ–‡ä¹¦è¦æ±‚ä¸­éœ€è¦åŒæ—¶é€’äº¤ä¸¤ç§æ–‡ä¹¦ï¼Œåˆ†åˆ«æ˜¯Statement-of-Purposeå’ŒPersonal-Statementï¼Œ" class="headerlink" title="University of Michiganâ€“Ann Arborçš„ç”³è¯·æ–‡ä¹¦è¦æ±‚ä¸­éœ€è¦åŒæ—¶é€’äº¤ä¸¤ç§æ–‡ä¹¦ï¼Œåˆ†åˆ«æ˜¯Statement of Purposeå’ŒPersonal Statementï¼Œ"></a>University of Michiganâ€“Ann Arborçš„ç”³è¯·æ–‡ä¹¦è¦æ±‚ä¸­éœ€è¦åŒæ—¶é€’äº¤ä¸¤ç§æ–‡ä¹¦ï¼Œåˆ†åˆ«æ˜¯Statement of Purposeå’ŒPersonal Statementï¼Œ</h2><ul><li>è¿™ä¸¤ä¸ªä¸åŒåç§°çš„æ–‡ä¹¦åœ¨å†…å®¹è¦æ±‚ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œç¬¬ä¸€ä¸ªStatement of Purposeä¸»è¦æ˜¯è®©æˆ‘ä»¬ä»‹ç»è‡ªå·±å…³äºå­¦æœ¯ã€ç ”ç©¶æ–¹é¢çš„èƒŒæ™¯å’Œæœªæ¥èŒä¸šè§„åˆ’ï¼Œè¿™äº›éƒ¨åˆ†æ­£å¥½æ˜¯æˆ‘ä¸Šé¢æåˆ°è¦åœ¨é€šç”¨ç‰ˆPSä¸­æ¶µç›–çš„ç¬¬1ã€2ã€4ã€5ã€6ã€7é—®é¢˜éƒ¨åˆ†å†…å®¹ã€‚ç¬¬äºŒä¸ªPersonal Statementä¸»è¦æ˜¯è®©æˆ‘ä»¬è®²è¿°è‡ªå·±çš„ä¸ªäººç»å†ã€æƒ³æ³•è§‚ç‚¹ã€å…´è¶£å€¾å‘ï¼Œä»¥åŠé€‰æ‹©ç”³è¯·è¿™æ‰€å¤§å­¦æ ¸å¿ƒéƒ¨åˆ†åŸå› ç­‰å†…å®¹ï¼Œè¿™äº›éƒ¨åˆ†æ­£å¥½æ˜¯æˆ‘ä¸Šé¢æåˆ°è¦åœ¨é€šç”¨ç‰ˆPSä¸­æ¶µç›–çš„ç¬¬3ã€8ã€9é—®é¢˜éƒ¨åˆ†å†…å®¹ã€‚æˆ‘ä»¬åªè¦æ ¹æ®é¢˜ç›®å°†é€šç”¨ç‰ˆPSå†…å®¹è¿›è¡Œæœ‰æ•ˆæ‹†åˆ†å°±å¯ä»¥äº†ï¼Œä¹Ÿå¹¶ä¸éœ€è¦è·Ÿåˆ«å•ç‹¬å†æ–°å†™ä¸¤ç¯‡æ–‡ä¹¦çš„ã€‚</li></ul><h2 id="ç‰¹åˆ«ã€ç‰¹åˆ«ã€ç‰¹åˆ«é‡ç‚¹å¼ºè°ƒçš„å…³é”®ç‚¹ï¼š"><a href="#ç‰¹åˆ«ã€ç‰¹åˆ«ã€ç‰¹åˆ«é‡ç‚¹å¼ºè°ƒçš„å…³é”®ç‚¹ï¼š" class="headerlink" title="ç‰¹åˆ«ã€ç‰¹åˆ«ã€ç‰¹åˆ«é‡ç‚¹å¼ºè°ƒçš„å…³é”®ç‚¹ï¼š"></a>ç‰¹åˆ«ã€ç‰¹åˆ«ã€ç‰¹åˆ«é‡ç‚¹å¼ºè°ƒçš„å…³é”®ç‚¹ï¼š</h2><ul><li><p>PSå†…å®¹ä¸è¦å†™çš„è·Ÿresumeæˆ–CVä¸€æ ·ï¼Œå°±æ˜¯ä¸ç”¨å†å®Œæ•´çš„é™ˆè¿°ä¸€éä½ ç®€å†ä¸­å·²ç»å‡ºç°è¿‡çš„å†…å®¹äº†ï¼Œå› ä¸ºç”³è¯·æ–‡ä¹¦ä¹‹é—´æ˜¯ç›¸äº’å‘¼åº”å’Œç»“åˆçš„ï¼Œæ‰€ä»¥PSè¦æœ‰é’ˆå¯¹æ€§å’Œä¾§é‡ç‚¹çš„å»è¡¨è¿°é‡ç‚¹ï¼Œè€Œä¸æ˜¯æµæ°´è´¦ä¸€æ ·çš„å†è®²ä¸€éï¼</p></li><li><p>PSç”³è¯·æ–‡ä¹¦è¡¨è¿°çš„å½¢å¼è¦ä»¥å­¦æœ¯é£æ ¼ä¸ºä¸»ï¼Œä¸¥è°¨ã€æœ‰æ¡ç†ã€æœ‰é€»è¾‘æœ€é‡è¦ï¼Œè¦å®¢è§‚é™ˆè¿°ï¼Œé¿å…ä½¿ç”¨è¿‡å¤šå½¢å®¹è¯ï¼Œä½†ä¸è¦èŠ±å¾ˆå¤§æ¯”é‡å»è®²è¿°å’Œä½“ç°ä½ çš„å­¦æœ¯æˆ–é¡¹ç›®ç ”ç©¶å®Œæˆè¿‡ç¨‹å’Œé¡¹ç›®è°ƒç ”å¤§ç¯‡å¹…å†…å®¹ï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯é€šè¿‡Writing sampleæˆ–Research paperå»å±•ç¤ºçš„ï¼Œè€Œä¸æ˜¯PSã€‚</p></li><li><p>å¦‚æœæˆ‘ä»¬é€’äº¤ç”³è¯·æ—¶ä¼šåŒæ—¶é€’äº¤å‡ ç¯‡æ–‡ä¹¦ï¼ˆç®€å†é™¤å¤–ï¼‰ï¼Œé‚£ä¹ˆè¯·æ³¨æ„æ¯ç¯‡æ–‡ä¹¦ä¹‹é—´çš„ç´ æé€‰æ‹©å’Œæ–‡ä¹¦å†…å®¹è¦æœ‰ä¸åŒï¼Œä¸è¦æœ‰å¤ªå¤šç›¸åŒå†…å®¹é‡å¤å‡ºç°ï¼Œå› ä¸ºäººæ˜¯å¤šå…ƒçš„ï¼Œæ‰€ä»¥è¯·å°½é‡æ›´å¤šç´ æé€‰æ‹©çš„å»å…¨é¢å±•ç¤ºè‡ªå·±ã€‚</p></li></ul><p><a href="https://www.cantabenglish.com/blog/fiona-the-point-of-no-return" target="_blank" rel="noopener">CV SOPå¯«ä½œå¿ƒå¾—</a></p><p><a href="http://exploringsharing.blogspot.com/2012/04/10-cv.html" target="_blank" rel="noopener">ç•™å­¸ç”³è«‹(10) - è®“åˆ¥äººä¸€çœ¼å°±äº†è§£ä½ çš„CV</a></p><p><a href="http://jxyzabc.blogspot.com/2008/08/cs-grad-school-part-4-applications.html" target="_blank" rel="noopener">å¥³åšå£«çš„ç”³è«‹è¨˜éŒ„ï¼ˆå¥¹çš„éƒ¨è½æ ¼ï¼‰</a></p><p><a href="http://www.pgbovine.net/grad-school-app-tips.htm" target="_blank" rel="noopener">UCSDæ•™æˆçµ¦å‡ºçš„æŒ‡å°å»ºè­°(é‡è¦)</a></p><p><a href="http://www.pgbovine.net/PhD-application-tips.htm" target="_blank" rel="noopener">UCSDæ•™æˆå’Œä»–çš„å­¸ç”Ÿåœ¨ç”³è«‹æ–¯å¦ä½›åšå£«å­¸ä½æ™‚ä½¿ç”¨çš„SOP</a></p><p><a href="https://users.soe.ucsc.edu/~ejw/advice/" target="_blank" rel="noopener">Advice for Foreign Students Wishing to Pursue Graduate Study in Computer Science at UCSC by Professor Jim Whitehead</a></p><p><a href="https://lin698.wixsite.com/essaypro1" target="_blank" rel="noopener">Native Speaker Editor+ç†å·¥å•†æ³•å°ˆæ¥­èƒŒæ™¯ + ä¸­æ–‡å®¢æœ(é«˜å­¸æ­·+è±å¯Œç¾åœ‹å·¥ä½œç¶“é©—) modify</a></p><p><a href="https://myshika.wordpress.com/2012/10/19/personal-statements-advice/" target="_blank" rel="noopener">ç”³è«‹æ–‡ä»¶ï¼šPersonal Statement</a></p><ul><li><p>Shau-ru Lin(<a href="mailto:shau.ru.lin@gmail.com" target="_blank" rel="noopener">shau.ru.lin@gmail.com</a>)ï¼Œè²»ç”¨è¨ˆç®—æ˜¯(2012/2013)ï¼š</p></li><li><p>Translation: $0.10/word (72 hours); $0.12/word (24 hours)</p></li><li><p>English Editing: $0.05/word (72 hours); $0.06/word (24 hours)</p></li></ul><p>##å­—æ•°è¦æ±‚ï¼š</p><ul><li><p>personal_statement ï¼š ä¸‰ç‰ˆ 500 700 1000</p></li><li><p>SOP ï¼šä¸‰ç‰ˆ 500 700 1000</p></li><li><p>ä¸åŒå­¸æ ¡çš„SOPå¯èƒ½æœƒæœ‰ä¸åŒçš„å­—é«”, å­—æ•¸é™åˆ¶, æœ‰äº›å­¸æ ¡çš„å­—æ•¸é™åˆ¶æ˜¯æ­»çš„, ä¹Ÿå°±æ˜¯èªªä»–ä¸æœƒè®“ä½ ä¸Šå‚³WORDæˆ–PDFæª”,è€Œæ˜¯åœ¨ç”³è«‹ç³»çµ±å…§ç›´æ¥æ‰“å­—, ç•¶ä½ æ‰“è¶…éè¦å®šçš„å­—æ•¸æ™‚ä»–ä¹Ÿä¸æœƒè®“ä½ å¯«ä¸‹å»äº†, è€Œæœ‰äº›å­¸æ ¡å‰‡æ˜¯ä¸Šå‚³WORDæˆ–PDFæª”, å¯ä»¥ç¹³äº¤è¶…éå­¸æ ¡å­—æ•¸è¦å®šçš„SOP, ä½†æ˜¯è¶…éå­—æ•¸æœƒæœ‰ç”šéº¼å¾Œæœæœ‰ç”šéº¼å½±éŸ¿ç•¶ç„¶é‚„æ˜¯è¦å…ˆå¯„ä¿¡è·Ÿå­¸æ ¡å•æ¸…æ¥š, å¦‚æœæ ¡æ–¹èªªæ²’å•é¡Œ, ç•¶ç„¶å¯ä»¥å°è¶…éä¸€äº›, æˆ‘å¯«SOPçš„æ–¹å¼æ˜¯å…ˆæŠŠç¬¬ä¸€å¿—é¡˜çš„SOPå¯«å‡ºä¾†, æˆ‘çš„ç¬¬ä¸€å¿—é¡˜SOPæ‰€é™åˆ¶çš„å­—æ•¸æ˜¯1000å­—, å¦å¤–å¹¾é–“å­¸æ ¡éƒ½é™åˆ¶500å­—æˆ–800å­—, å…ˆæŠŠæœ€é•·çš„å¯«å®Œ, ä¹‹å¾Œå†ç”¨1000å­—çš„ä¿®å³å¯, SOPçš„æ ¼å¼ä¾ç…§ä¾ƒå¨çš„å»ºè­°æ¡å–5è‡³6æ®µ, ç¬¬ä¸€æ®µçš„ç›®çš„æ˜¯è¦å¸å¼•è®€è€…æ‰€ä»¥æœƒä»¥é¡ä¼¼å°èªªçš„å¯«æ³•ä½œç‚ºé–‹é ­. äºŒä¸‰æ®µåˆ†åˆ¥åœ¨æè¿°è‡ªå·±åœ¨å­¸æ ¡åšéçš„å…©å€‹projects, ç¬¬å››æ®µå‰‡æ˜¯è¬›ç•¢æ¥­å°ˆé¡Œ, äº”èˆ‡å…­æ®µå‰‡æ˜¯åœ¨è¬›å­¸æ ¡çš„èª²ç¨‹æˆ–æ˜¯å­¸æ ¡æœ‰å“ªæ–¹é¢å¾ˆå¸å¼•ä½ , ä»¥åŠä½ çš„æœªä¾†è¦åŠƒ.</p></li><li><p>CVæ–¹é¢å¦‚æœä½ æœ‰ç™¼publicationé‚£ç•¶ç„¶æ˜¯éå¸¸åŠ åˆ†çš„, publicationä¹‹ä¸‹å°±æ˜¯åœ¨å­¸æ ¡åšçš„å„å€‹projectæˆ–è‡ªå·±åšçš„side-project, ä½ è¦ºå¾—è¶Šé‡è¦è¶Šèƒ½å¸å¼•å¯©æŸ¥å“¡çœ¼ç›çš„ç¶“æ­·å°±è¦æ”¾åœ¨è¶Šå‰é¢, ä¾‹å¦‚æˆ‘æ²’æœ‰ç™¼éä»»ä½•çš„publication, æˆ‘å°±æŠŠæˆ‘åœ¨å­¸æ ¡åšçš„å…©å€‹å°ˆé¡Œä»¥åŠç•¢æ¥­å°ˆé¡Œæ”¾åœ¨æœ€å‰é¢, å› ç‚ºè‡ªå·±æœ‰è¨±å¤šå¿—å·¥ç¶“æ­·ä¹Ÿæœ‰å‰µç«‹éç¤¾åœ˜, é€™äº›ç›¸æ¯”ä¹‹ä¸‹æ¯”è¼ƒæ²’é‚£éº¼é‡è¦çš„å°±æ”¾åœ¨å¾Œé¢çš„é æ•¸, CVæˆ‘å€‹äººèªç‚ºä¸è¦è¶…é2é , è€Œæœ‰äº›äººä¹Ÿèªªå¯©æŸ¥è€…é€šå¸¸åªæœƒçœ‹ç¬¬ä¸€é , æ‰€ä»¥èªªèƒ½ç›¡é‡æŠ“ä½ä»–å€‘çœ¼ç›çš„æ±è¥¿å°±ç›¡é‡å¾€å‰ç§», æ’ç‰ˆæ–¹é¢ä¾ƒå¨ä¹Ÿå¹«æˆ‘ä¿®äº†å¤§æ¦‚5â€“6æ¬¡, ç¶²è·¯ä¸Šä¹Ÿæœ‰è¨±å¤šçš„templateå¯ä¾›å¤§å®¶åšé¸æ“‡.</p></li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.1point3acres.com/bbs/thread-146008-1-1.html" target="_blank" rel="noopener">NWUåŒå­¦çš„CV</a></li></ul><ul><li><p><a href="https://github.com/jeanqasaur/academic-application-materials/blob/master/phd-application-2007/personal_statement.pdf" target="_blank" rel="noopener">é€™è£¡æ˜¯å¥³åšå£«çš„ç”³è«‹æ–‡ä»¶</a></p></li><li><p><a href="https://kan-wei.com/testimonial/calvin/" target="_blank" rel="noopener">NTU_UCLA</a></p></li></ul><p>æœ‰ä¼¯å…‹åˆ©çš„å°å¤§ç”µæœºç³»åŒå­¦çš„åœ¨ç”µè„‘é‡Œé¢å¯ä»¥æ‹¿æ¥å‚è€ƒ</p><h3 id="åŸºæœ¬çŸ¥è¯†ï¼š"><a href="#åŸºæœ¬çŸ¥è¯†ï¼š" class="headerlink" title="åŸºæœ¬çŸ¥è¯†ï¼š"></a>åŸºæœ¬çŸ¥è¯†ï¼š</h3><pre><code>1. personal statementâ†’ä¸ºä»€ä¹ˆæ¥è¯»ï¼ˆå…´è¶£ï¼‰ï¼Œä¸ºä»€ä¹ˆé€‰é¡¹ç›®ï¼Œä¸ºç›®æ ‡åšäº†ä»€ä¹ˆï¼ˆç»å†ï¼‰ï¼Œå¯ä»¥ç»™é¡¹ç›®å¸¦æ¥ä»€ä¹ˆï¼ˆå¯¹åŒå­¦è´¡çŒ®ï¼Œå¯¹æ•™æˆè´¡çŒ®ï¼‰2. SOPâ†’è¦æ±‚ä¸€ç¯‡sop=psï¼ˆä¸ªäººç»å†ï¼Œè¯¾å¤–æ´»åŠ¨ï¼Œå¿—æ„¿è€…ï¼Œäººç”Ÿè§„åˆ’ç­‰ï¼‰--å­¦æœ¯ç”Ÿæ´»å†™ä¸€ç¯‡ï¼Œè¦æ±‚ä¸¤ç¯‡--sopä¾§é‡å­¦æœ¯ï¼ˆå­¦æœ¯å…´è¶£ï¼ŒèŒä¸šè§„åˆ’ï¼Œå­¦æœ¯ç»å†ï¼‰--åˆ†å¼€å†™ï¼Œé€‚å½“å¢å‡ã€‚3. statement of diversityâ†’å­¦ç”ŸèƒŒæ™¯å¤šæ ·æ€§ï¼ˆå­¦æœ¯é¢†åŸŸï¼Œå…´è¶£ï¼Œå®¶åº­ï¼Œç¤¾ä¼šæ—ç¾¤ï¼‰ï¼Œæˆ‘çš„è§„åˆ’èƒ½å¸¦æ¥ä»€ä¹ˆå¤šæ ·æ€§ï¼ˆä»€ä¹ˆå¤šæ ·æ€§ï¼Œæ€ä¹ˆå¸¦æ¥ï¼‰eg.ä¸­åŒ»ä¸–å®¶ç”³è¯·ç”Ÿç‰©åŒ»è¯ï¼Œæ”¿åºœå®˜å‘˜å®¶åº­ï¼ˆäº†è§£ä¸­å›½ï¼‰ç”³è¯·ç¤¾ä¼šå­¦å†å²å­¦ç­‰ï¼Œå°‘æ•°æ°‘æ—ï¼ˆè¯­è¨€èåˆï¼‰ç”³è¯·è¯­è¨€ç±»ï¼Œå®¶åº­èƒŒæ™¯ï¼ˆå’Œæœ¬å›½æ¯”ï¼‰å·®æ€ä¹ˆå¯¹è‡ªå·±æ€§æ ¼å¡‘é€ äº§ç”Ÿå½±å“4. æœ‰äº›å­¦æ ¡æœ‰æ˜ç¡®è¦æ±‚ï¼ŒæŒ‰ç…§è¦æ±‚æ¥ã€‚eg.æœ‰äº›å­¦æ ¡ä¼šè¦æ±‚â€˜ä¸è¦å†™ä»€ä¹ˆâ€™ï¼Œå¯ä»¥æ‰“ç”µè¯/å‘é‚®ä»¶ç»™å°èœœï¼ˆé—®psçš„æ˜ç¡®è¦æ±‚ï¼‰5. æ ¼å¼è¦æ±‚ï¼šå¯ä»¥æœ‰é¡µçœ‰ï¼ˆCVä¸è¦æœ‰ï¼‰ï¼Œæ­£æ–‡å°±åˆ«å†å†™é¢˜ç›®äº†ï¼Œä¸€å®šè¦æœ‰é¡µç ï¼Œç”¨é»˜è®¤é¡µè¾¹è·ï¼Œç”¨TIMESæˆ–è€…Cabrialï¼Œå­—å·12ï¼Œä¸è¦æœ‰æ°´å°/Logoï¼Œæ ¹æ®è¦æ±‚ï¼ˆsingle spaceï¼Œdouble spaceï¼‰ï¼Œä¸è¦åˆ†ç‰ˆå—ï¼Œæ®µé¦–ç¼©è¿›äº”æ ¼ï¼ˆæ•²äº”ä¸‹ï¼‰</code></pre><h3 id="å†™ä»€ä¹ˆ-æ€ä¹ˆå†™ï¼š"><a href="#å†™ä»€ä¹ˆ-æ€ä¹ˆå†™ï¼š" class="headerlink" title="å†™ä»€ä¹ˆ/æ€ä¹ˆå†™ï¼š"></a>å†™ä»€ä¹ˆ/æ€ä¹ˆå†™ï¼š</h3><pre><code>1. æˆ‘æœ‰ä»€ä¹ˆå…´è¶£ï¼Œä¸ºä»€ä¹ˆï¼Œåšäº†ä»€ä¹ˆï¼Œæ„å‘³ç€ä»€ä¹ˆï¼ˆåšäº†å“ªäº›æ€è€ƒï¼Œå¾—åˆ°äº†ä»€ä¹ˆï¼‰ï¼Œä¸ºä»€ä¹ˆé€‰è¿™ä¸ªé¡¹ç›®2. å­¦æ ¡çœ‹å®Œpsè¦èƒ½å›ç­”çš„ä¸‰ä¸ªé—®é¢˜ï¼š        * ä¸ºä»€ä¹ˆèƒ½å†graduate levelçš„å­¦ä¹ ä¸­æˆåŠŸï¼ˆå­¦ä¹ èƒ½åŠ›ï¼Œå­¦ä¹ æ€åº¦â†’GPAï¼ŒåŸºç¡€çŸ¥è¯†â†’æˆç»©å•ï¼Œè‹¥æ²¡æœ‰ï¼Œéœ€è¦å†™å‡ºâ€˜æˆ‘æœ‰è¶³å¤Ÿçš„åŸºç¡€â€™ï¼Œæˆ‘æœ‰å…´è¶£ï¼‰        * ä¸ºä»€ä¹ˆèƒ½åœ¨èŒä¸šå‘å±•ä¸­æˆåŠŸï¼ˆæœ‰çƒ­æƒ…/å…´è¶£ï¼Œå¯¹é¢†åŸŸæœ‰ç†è§£ï¼Œæœ‰ç»éªŒâ†’ç»†èŠ‚ï¼Œæœ‰èƒ½åŠ›ï¼‰        * ä¸ºä»€ä¹ˆæˆ‘å’Œä½ çš„é¡¹ç›®å¾ˆåŒ¹é…ï¼ˆä¸ºä»€ä¹ˆé¡¹ç›®èƒ½å¸®æˆ‘å®ç°æˆ‘çš„ç›®æ ‡ï¼Œæˆ‘æ˜¯ä½ é¡¹ç›®è¦æ‰¾çš„äººâ†’è¯»é€‰æ ¡è¦æ±‚+æ¨èä¿¡ï¼‰3. ç ”ç©¶å…´è¶£/å­¦æœ¯å…´è¶£ï¼š        * eg. ç”³è¯·MEï¼Œå¯¹ç‡ƒçƒ§æ„Ÿå…´è¶£ï¼ˆç¬¼ç»Ÿï¼‰â†’æ”¹ä¸ºå¯¹å…¬å…±æ”¿ç­–ä¸“ä¸šé‡Œçš„å…·ä½“æ–¹é¢æ„Ÿå…´è¶£ï¼Œå¦‚health policyé‡Œçš„ä¸å¥åº·ç›¸å…³çš„XXé—®é¢˜ï¼ˆç»†åŒ–åˆ°ä¸€ä¸ªå¤§çš„ç ”ç©¶é—®é¢˜è€Œä¸æ˜¯å…·ä½“çš„é¢˜ç›®ï¼‰           * eg. ç”³è¯·media/communicationï¼Œå¦‚ä½•è¯„åˆ¤social mediaä¸­ä¸€ä¸ªè¯é¢˜çš„è®¨è®º/å½±å“ï¼ˆä¸å¼ºè°ƒä»€ä¹ˆè¯é¢˜ä»€ä¹ˆå½±å“ï¼Œè€Œæ˜¯â€˜å¦‚ä½•â€™è¯„åˆ¤ï¼‰        * æ€»ç»“ï¼šå¯ä»¥è¢«å®è·µæ¢ç´¢çš„é—®é¢˜ï¼ˆPHDå¿…é¡»æœ‰ç ”ç©¶å…´è¶£ï¼ŒMSä¸ä¸€å®šï¼Œä½†è¦æœ‰ç›¸å…³çš„æ„Ÿå…´è¶£çš„é—®é¢˜oræƒ³å¼„æ¸…æ¥šç­‰â†’ä½“ç°å®ƒä¿ƒä½¿ä½ åŠªåŠ›å­¦ï¼‰ï¼Œç›¸å…³å…´è¶£ç‚¹ä¸è¦è¶…è¿‡ä¸‰ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªæœ€å¥½ï¼Œä¸ç›¸å…³å…´è¶£ç‚¹ä¸è¦è¶…è¿‡ä¸¤ä¸ªï¼ˆä¸å¤Ÿfocusï¼‰ã€‚        * å…·ä½“åˆ°â€˜å“ªä¸ªæ•™æˆå“ªä¸ªæ–¹å‘â€™ï¼Œ</code></pre><ul><li><p>æœ€å¥½å†™ç›¸å¯¹generalï¼Œä¸è¦å†™æ•™æˆåå­—ï¼ˆé™¤éå¥—è¿‡è¾ï¼Œæˆ–è€…ç›®æ ‡åŠå…¶æ˜ç¡®ï¼‰ï¼Œå…å¾—è¯¥æ–¹å‘æ•™æˆä¸æ‹›äººï¼ˆå¯ä»¥å¤šå†™ä¸€ä¸ªç ”ç©¶å…´è¶£ï¼‰ã€‚</p></li><li><p>è¦äº†è§£é¢†åŸŸåŠ¨æ€ï¼Œä½ æ„Ÿå…´è¶£çš„ï¼ˆä¸èƒ½å¤ªè¿‡æ—¶ï¼‰æ˜¯å¦è·Ÿç¾å›½é™¢æ ¡ä¸»æµå…´è¶£matchçš„ï¼Œè¿™ä¸ªå­¦æ ¡çš„æ“…é•¿é¢†åŸŸæ˜¯å¦è·Ÿè‡ªå·±matchï¼ˆå¦‚ä¸“æ’ï¼‰ï¼Œè‡ªå·±çš„èƒŒæ™¯æ˜¯å¦justifyâ€“çœŸå®ï¼Œåˆç†ã€‚</p></li><li><p>å¯¹äºèŒä¸šå‹MSï¼Œè¦çªå‡ºè‡ªå·±çš„è¡Œä¸šé¢†åŸŸå…´è¶£ï¼ˆå…·ä½“å“ªä¸ªè¡Œä¸šï¼Œgovernmentï¼Œnonprofit.â€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€..ï¼‰å…¬å¸æœåŠ¡æ–¹å‘ï¼ˆcreativeï¼Œresearchï¼Œanalysisï¼Œbrandingï¼Œprï¼‰å’Œå…·ä½“éƒ¨é—¨</p></li><li><p>è‹¥ä¸ç¡®å®šè¡Œä¸š/èŒèƒ½â†’é‡ç‚¹å†™è‡ªå·±è¦åšä»€ä¹ˆä¸œè¥¿ï¼ˆå²—ä½èŒèƒ½ï¼‰ï¼Œeg. æˆ‘æƒ³è¿›industryåšç ”å‘â†’è¿›ä»€ä¹ˆæ–¹å‘çš„ä¼ä¸šåšä»€ä¹ˆæ–¹å‘çš„ç ”å‘ï¼Œåœ°åŸŸä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªtalking pointã€‚å¯ä»¥é—®é—®å°èœœé€šå¸¸å‡ºæ¥çš„å­¦ç”Ÿéƒ½åšå•¥ã€‚</p></li></ul><h3 id="4-å†™æ³•-åŸå› ï¼ˆæ€ä¹ˆè¡¨ç°å…´è¶£ï¼‰ï¼š"><a href="#4-å†™æ³•-åŸå› ï¼ˆæ€ä¹ˆè¡¨ç°å…´è¶£ï¼‰ï¼š" class="headerlink" title="4. å†™æ³•/åŸå› ï¼ˆæ€ä¹ˆè¡¨ç°å…´è¶£ï¼‰ï¼š"></a>4. å†™æ³•/åŸå› ï¼ˆæ€ä¹ˆè¡¨ç°å…´è¶£ï¼‰ï¼š</h3><ul><li><p>æˆ‘è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œäº§ç”Ÿäº†ä»€ä¹ˆå¥½å¤„ã€‚</p></li><li><p>æˆ‘å¯¹å­¦ç§‘æœ‰å¾ˆæ·±çš„äº†è§£ï¼ŒçŸ¥é“å®ƒçš„é­…åŠ›ï¼Œå›°éš¾ï¼ŒçŸ¥é“æ€ä¹ˆå»å…‹æœã€‚</p></li><li><p>æˆ‘æœ‰æ¢ç´¢ï¼Œæœ‰æ€è€ƒï¼Œegæˆ‘å°±æƒ³çŸ¥é“social mediaæ€ä¹ˆè¯„åˆ¤ï¼Œæˆ‘åšäº†XXè°ƒæŸ¥/æ€è€ƒ/åˆ†æï¼ˆå……å®ï¼‰ã€‚</p></li><li><p>å±•ç°æ•´ä¸ªè¿‡ç¨‹ï¼šä¸ºä»€ä¹ˆäº§ç”Ÿé—®é¢˜ï¼Œå¯¹è¿™ä¸ªé—®é¢˜åˆä»€ä¹ˆäº†è§£æ¢ç´¢ï¼Œè¿‡ç¨‹ä¸­æ€ä¹ˆæ€è€ƒï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹è¶Šæ¥è¶Šæ˜ç¡®åšå®šã€‚</p></li></ul><h3 id="5-ç»å†ï¼š"><a href="#5-ç»å†ï¼š" class="headerlink" title="5.ç»å†ï¼š"></a>5.ç»å†ï¼š</h3><ul><li>æˆ‘åšçš„ä»€ä¹ˆäº‹ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®/é—®é¢˜é‡è¦ï¼Œæˆ‘ç”¨äº†ä»€ä¹ˆæ–¹æ³•ï¼ˆä¸ºä»€ä¹ˆç”¨è¿™äº›æ–¹æ³•ï¼‰ï¼Œé‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Œæ€ä¹ˆå…‹æœï¼ˆæ˜¯å¦å…‹æœï¼‰ï¼Œæœ‰ä»€ä¹ˆæ€è€ƒï¼Œå¾—åˆ°äº†ä»€ä¹ˆå˜åŒ–ï¼ˆå…´è¶£æ›´åšå®šä¹‹ç±»ï¼‰ã€‚èƒ½ä¸èƒ½è®©å¯¹ä½ ä¸“ä¸šä¸å¤ªäº†è§£çš„èƒ½çŸ¥é“ä½ åšäº†ä»€ä¹ˆä¸ºä»€ä¹ˆåšï¼Œè®©åŒä¸“ä¸šçš„è®¤å¯ä½ çš„æˆæœã€‚æ¯æ®µç»å†éƒ½å·®ä¸å¤šå­—æ•°ï¼Œæœ‰é€‰æ‹©åœ°è®²ï¼ˆæœ€èƒ½ä½“ç°æˆ‘èƒ½åŠ›çš„åœ°æ–¹ï¼‰ï¼Œä¸è¦æŠŠä¸€ä¸ªç ”ç©¶åˆ†å‡ æ®µå†™ï¼Œä¸åŒçš„ç ”ç©¶å†…å®¹å¯ä»¥é€‚å½“åˆå¹¶åœ¨ä¸€èµ·ã€‚æŠŠé‡è¦çš„ç»å†éƒ½å†™ä¸Šï¼Œæ²¡æœ‰æ•°é‡é™åˆ¶ã€‚ä¸è¦æµæ°´è´¦ã€‚ä¸ä¸€å®šè¦å’Œä¸“ä¸šç›¸å…³ã€‚</li></ul><h3 id="6-be-specificï¼š"><a href="#6-be-specificï¼š" class="headerlink" title="6. be specificï¼š"></a>6. be specificï¼š</h3><ul><li>eg. æˆ‘å‘ç°Xåœ¨Yå­¦ç§‘å¾ˆé‡è¦â†’æ€ä¹ˆé‡è¦ï¼Œæé«˜äº†æˆ‘çš„ç ”ç©¶èƒ½åŠ›â†’ä»€ä¹ˆèƒ½åŠ›</li></ul><h3 id="7"><a href="#7" class="headerlink" title="7."></a>7.</h3><ul><li><p>such asï¼šåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…ï¼ˆhowï¼‰ï¼Œwhat it isï¼Œ what does it meanï¼ˆè‡ªå·±é—®è‡ªå·±ï¼‰</p><h3 id="8-be-strongï¼š"><a href="#8-be-strongï¼š" class="headerlink" title="8. be strongï¼š"></a>8. be strongï¼š</h3></li><li><p>ä¸»åŠ¨è¯­æ€ï¼è¢«åŠ¨è¯­æ€ã€‚eg. was used, was obtainedâ†’we obtained, I realizedâ€¦PSä¸è¦å®¢è§‚ï¼Œè€Œæ˜¯å¼ºè°ƒâ€˜æˆ‘â€™çš„å‚ä¸æ€§ï¼ŒCVä¹Ÿæ˜¯ã€‚</p></li><li>solutionï¼problemã€‚å¼ºè°ƒè§£å†³è¿‡ç¨‹ã€‚</li><li><p>whâ€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€at do you do nextï¼what do you thinkã€‚ç†ç”±åŒä¸Šã€‚</p></li><li><ol start="9"><li>ç”¨ç§¯ææ›¿æ¢æ¶ˆæ¯ã€‚ä¸è¦æœ‰â€˜æˆ‘çŸ¥é“XXXåœ°æ–¹ä¸è¶³â€œï¼Œæ”¹æˆâ€™æˆ‘ä¼šæœ‰å…´è¶£åœ°å­¦ä¹ XXXâ€ï¼Œæˆ‘åšäº†XXXï¼Œè™½ç„¶å½±å“äº†GPAï¼Œä½†æ˜¯æ”¶è·äº†XXXï¼ŒåŒæ—¶å…¶ä»–æ–¹é¢è¡¨ç°äº†æˆ‘çš„èƒ½åŠ›ã€‚ä¸è¦å¼ºè°ƒè‡ªå·±å¤šä¹ˆè‹¦å¤šä¹ˆæƒ¨å¤šä¹ˆå¤šæŒ‘æˆ˜ï¼Œè€Œæ˜¯å†™æˆå¾ˆäº«å—è¿‡ç¨‹ã€‚</li></ol></li><li><ol start="10"><li>é€‰æ ¡ç†ç”±ï¼šä¸è¦å†™å¾ˆæ™®éçš„ä¸œè¥¿ï¼ˆæ¯”å¦‚as we all knowâ€¦ï¼‰ä¸éœ€è¦ç‰¹åˆ«åä¸½çš„è¯­è¨€ï¼ˆNO PAIN, NO GAINè¿™ç§ï¼‰ã€‚ç´§å¯†ç»“åˆæ‰€å†™çš„ä¸œè¥¿ã€‚é€‰æ ¡ç†ç”±ä¸è¦åƒç¯‡ä¸€å¾‹ï¼ˆä½ç½®å¥½ï¼Œå­¦æœ¯å¥½ï¼Œæ’åå¥½ï¼‰ï¼Œä¸è¦å¤ªpersonalï¼ˆç”·å¥³æœ‹å‹ï¼‰ã€‚å­¦æ ¡çš„è¯¾ç¨‹è®¾ç½®æ€ä¹ˆfitæˆ‘ï¼Œå­¦æ ¡çš„è¯¾ç¨‹è®¾ç½®å¾ˆç‹¬ç‰¹ç­‰ã€‚ä¸ºä»€ä¹ˆå–œæ¬¢æ•™æˆï¼Œå–œæ¬¢å“ªå‡ ä¸ªï¼ˆXXçš„ç†è®ºå¯¹è‡ªå·±å°è±¡æ·±åˆ»ï¼‰ï¼Œæˆ‘å’Œå­¦é•¿/æ•™æˆèŠäº†ï¼Œä»–ä»¬å‘Šè¯‰æˆ‘XXXimpress meï¼Œæ‰€ä»¥æƒ³æ¥ã€‚</li></ol></li></ul><h3 id="å¸ƒå±€ï¼š"><a href="#å¸ƒå±€ï¼š" class="headerlink" title="å¸ƒå±€ï¼š"></a>å¸ƒå±€ï¼š</h3><pre><code>1. æ•…äº‹å‹ã€‚è¯´æ˜è‡ªå·±çš„å¤§æˆå°±ã€‚é—®é¢˜--ä¸impressiveï¼Œå¤ªnaiveã€‚å¼€å¤´æ•…äº‹è¦conciseã€‚æœ€åˆæ€ä¹ˆæ„Ÿå…´è¶£ï¼Œåšäº†ä»€ä¹ˆæ¢ç´¢ï¼Œå…·ä½“çš„è§„åˆ’ï¼Œä¸ºä»€ä¹ˆé€‰æ ¡ã€‚2. å•åˆ€ç›´å…¥å‹ã€‚å¼€å¤´ç›´æ¥å†™æˆ‘çš„å…´è¶£ï¼Œæˆ‘çš„ä¼˜åŠ¿ï¼Œæˆ‘ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªå­¦æ ¡ã€‚3. é€‰æ‹©æœ€æœ‰åˆ©çš„è¯æ®ã€‚æŠ›æ‰æ°´è¯æ®ã€‚</code></pre><h3 id="æ€ä¹ˆè¯„ä»·ï¼š"><a href="#æ€ä¹ˆè¯„ä»·ï¼š" class="headerlink" title="æ€ä¹ˆè¯„ä»·ï¼š"></a>æ€ä¹ˆè¯„ä»·ï¼š</h3><pre><code>1. æ˜¯ä¸æ˜¯æ¯å¥è¯éƒ½æ¸…æ¥šå…·ä½“ï¼Œè¯­æ³•ä¸Šï¼Œä¸“ä¸šä¸Šã€‚2. æ˜¯ä¸æ˜¯å›ç­”äº†â€™ä¸‰å¤§é—®é¢˜â€˜3. èƒ½ä¸èƒ½å±•ç°æˆ‘çš„ç‰¹ç‚¹4. èƒ½ä¸èƒ½ç»™åˆ«äººç•™ä¸‹å°è±¡5. æ€è€ƒæœ‰æ²¡æœ‰æ·±åº¦ï¼ˆæ–‡ç¬”åƒå°å­¦ç”Ÿï¼‰6. æ˜¯å¦è¶³å¤Ÿç®€æ´ï¼ˆä¸è¦è€ƒè™‘è¯­è¨€æ˜¯å¦åä¸½ï¼‰æ¨èçœ‹Emilyçš„PSä¿®æ”¹å»ºè®®å’Œå‰åå¯¹æ¯”ï¼Œçœ‹é»„é»„ï¼ˆç‰ˆä¸»ï¼‰çš„ps</code></pre><h3 id="ç»†èŠ‚ï¼š"><a href="#ç»†èŠ‚ï¼š" class="headerlink" title="ç»†èŠ‚ï¼š"></a>ç»†èŠ‚ï¼š</h3><pre><code>1. çœ‹è¦æ±‚ï¼Œä¸€èˆ¬ä¸è¶…è¿‡1Kå­—2. ä¸è¦å†™æˆæµæ°´è´¦3. è‹±è¯­è¡¨è¾¾&amp;ä¸“ä¸šæœ¯è¯­4. ä¸è¦assumeè¯»è€…ä»€ä¹ˆéƒ½ä¸çŸ¥é“è§£é‡Šä¸€å¤§å †ï¼Œå°½é‡ç®€æ´5. ä¸è¦å¤ªemotionalï¼ˆå»æ‰ä½ çš„æƒŠå¹å·ï¼‰ï¼Œä¸è¦å†™åˆ«äººçš„æ„Ÿå—åšæ³•ç­‰ï¼Œåªå†™è‡ªå·±çš„6. æ®µè½åˆ†é…è¦åˆç†</code></pre><h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h3><p>ç§‘ç ”ç»å†ä¸ä¸€å®šå¾ˆmatchï¼Œå…³é”®ä½“ç°ä½ çš„æ€è€ƒæ–¹å¼ç­‰<br>ä¸ç”¨è‡ªçˆ†å®¶é—¨ï¼Œä»€ä¹ˆå­¦æ ¡ä»€ä¹ˆä¸“ä¸š<br>ä¸ç”¨å†™ä½ çš„è®ºæ–‡å<br>ä¸ç”¨å†™é¡¹ç›®çš„å…¨ç§°<br>æè¿°è¯¦ç»†åˆ°â€™ä½ æƒ³ç ”ç©¶ä»€ä¹ˆé—®é¢˜â€˜å°±å¯ä»¥äº†<br>å¦‚æœæ˜¯å¤§æ–¹å‘çš„ï¼Œè¦çªå‡ºç ”ç©¶èƒ½åŠ›ï¼Œå¯ä»¥æ‰¯ä¸€äº›ä½“ç°ç›¸å…³æ€§çš„ä¸œè¥¿<br>åšäº†å¤§æ¯”èµ›è·å¾—å¾ˆå¤šæé«˜ä½†æ˜¯æ²¡è·å¥–ï¼Œè¿˜æ˜¯è¦å†™ï¼Œçªå‡ºæ”¶è·<br>å®ä¹ ç»å†ä¸ä¸€å®šè¦å†™ï¼Œçœ‹ç”³è¯·å­¦æ ¡æ˜¯å¦çœ‹é‡</p>]]></content>
      
      
      
        <tags>
            
            <tag> Application </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>System Design</title>
      <link href="/2019/05/14/System-Design/"/>
      <url>/2019/05/14/System-Design/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.1point3acres.com/bbs/thread-208829-1-1.html" target="_blank" rel="noopener">ç³»çµ±è¨­è¨ˆæ•‘æ˜Ÿ! ä¸€å¤©å…§æ‰‹æŠŠæ‰‹æ•™ä½ é¢è©¦System design</a></p>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Foundation </tag>
            
            <tag> System Design </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DesignPattern_Structural pattern part1</title>
      <link href="/2019/05/13/DesignPattern-Structural-pattern%20part1/"/>
      <url>/2019/05/13/DesignPattern-Structural-pattern%20part1/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å­¦ä¹ äº† 5 ç§æ„å»ºå‹æ¨¡å¼ã€‚å®ƒä»¬ä¸»è¦ç”¨äºæ„å»ºå¯¹è±¡ã€‚è®©æˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ï¼š</p><ul><li><p>â€‹å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šä¸ºæ¯ä¸€ç±»å¯¹è±¡å»ºç«‹å·¥å‚ï¼Œå°†å¯¹è±¡äº¤ç”±å·¥å‚åˆ›å»ºï¼Œå®¢æˆ·ç«¯åªå’Œå·¥å‚æ‰“äº¤é“ã€‚</p></li><li><p>â€‹æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šä¸ºæ¯ä¸€ç±»å·¥å‚æå–å‡ºæŠ½è±¡æ¥å£ï¼Œä½¿å¾—æ–°å¢å·¥å‚ã€æ›¿æ¢å·¥å‚å˜å¾—éå¸¸å®¹æ˜“ã€‚</p></li><li>â€‹å»ºé€ è€…æ¨¡å¼ï¼šç”¨äºåˆ›å»ºæ„é€ è¿‡ç¨‹ç¨³å®šçš„å¯¹è±¡ï¼Œä¸åŒçš„ Builder å¯ä»¥å®šä¹‰ä¸åŒçš„é…ç½®ã€‚</li><li>â€‹å•ä¾‹æ¨¡å¼ï¼šå…¨å±€ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ†ä¸ºé¥¿æ±‰å¼å’Œæ‡’æ±‰å¼ã€‚æ‡’æ±‰å¼æœ‰åŒæ£€é”å’Œå†…éƒ¨ç±»ä¸¤ç§å®ç°æ–¹å¼ã€‚</li><li>â€‹åŸå‹æ¨¡å¼ï¼šä¸ºä¸€ä¸ªç±»å®šä¹‰ clone æ–¹æ³•ï¼Œä½¿å¾—åˆ›å»ºç›¸åŒçš„å¯¹è±¡æ›´æ–¹ä¾¿ã€‚</li></ul><p>æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ ç»“æ„å‹æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œç»“æ„å‹æ¨¡å¼æ˜¯ç”¨æ¥è®¾è®¡ç¨‹åºçš„ç»“æ„çš„ã€‚ç»“æ„å‹æ¨¡å¼å°±åƒæ­ç§¯æœ¨ï¼Œå°†ä¸åŒçš„ç±»ç»“åˆåœ¨ä¸€èµ·å½¢æˆå¥‘åˆçš„ç»“æ„ã€‚åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>â€‹é€‚é…å™¨æ¨¡å¼</li><li>â€‹æ¡¥æ¥æ¨¡å¼</li><li>â€‹ç»„åˆæ¨¡å¼</li><li>â€‹è£…é¥°æ¨¡å¼</li><li>â€‹å¤–è§‚æ¨¡å¼</li><li>â€‹äº«å…ƒæ¨¡å¼</li><li>â€‹ä»£ç†æ¨¡å¼</li></ul><p>ç”±äºå†…å®¹è¾ƒå¤šï¼Œæœ¬ç¯‡æˆ‘ä»¬å…ˆè®²è§£å‰ä¸‰ç§æ¨¡å¼ã€‚</p><h2 id="ä¸€ã€é€‚é…å™¨æ¨¡å¼"><a href="#ä¸€ã€é€‚é…å™¨æ¨¡å¼" class="headerlink" title="ä¸€ã€é€‚é…å™¨æ¨¡å¼"></a>ä¸€ã€é€‚é…å™¨æ¨¡å¼</h2><blockquote><p>Adapter<br>    Convert the existing interfaces to a new interface to achieve compatibility and reusability of the unrelated classes in one application. Also known as Wrapper pattern.</p></blockquote><p>è¯´åˆ°é€‚é…å™¨ï¼Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„è«è¿‡äºç”µæºé€‚é…å™¨äº†ï¼Œä¹Ÿå°±æ˜¯æ‰‹æœºçš„å……ç”µå¤´ã€‚å®ƒå°±æ˜¯é€‚é…å™¨æ¨¡å¼çš„ä¸€ä¸ªåº”ç”¨ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€æ¡è¿æ¥ç”µè„‘å’Œæ‰‹æœºçš„ USB æ•°æ®çº¿ï¼Œè¿æ¥ç”µè„‘çš„ä¸€ç«¯ä»ç”µè„‘æ¥å£å¤„æ¥æ”¶ 5V çš„ç”µå‹ï¼Œè¿æ¥æ‰‹æœºçš„ä¸€ç«¯å‘æ‰‹æœºè¾“å‡º 5V çš„ç”µå‹ï¼Œå¹¶ä¸”ä»–ä»¬å·¥ä½œè‰¯å¥½ã€‚</p><p>ä¸­å›½çš„å®¶ç”¨ç”µå‹éƒ½æ˜¯ 220Vï¼Œæ‰€ä»¥ USB æ•°æ®çº¿ä¸èƒ½ç›´æ¥æ‹¿æ¥ç»™æ‰‹æœºå……ç”µï¼Œè¿™æ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><p>å•ç‹¬åˆ¶ä½œæ‰‹æœºå……ç”µå™¨ï¼Œæ¥æ”¶ 220V å®¶ç”¨ç”µå‹ï¼Œè¾“å‡º 5V ç”µå‹ã€‚<br>æ·»åŠ ä¸€ä¸ªé€‚é…å™¨ï¼Œå°† 220V å®¶åº­ç”µå‹è½¬åŒ–ä¸ºç±»ä¼¼ç”µè„‘æ¥å£çš„ 5V ç”µå‹ï¼Œå†è¿æ¥æ•°æ®çº¿ç»™æ‰‹æœºå……ç”µã€‚<br>å¦‚æœä½ ä½¿ç”¨è¿‡æ—©æœŸçš„æ‰‹æœºï¼Œå°±ä¼šçŸ¥é“ä»¥å‰çš„æ‰‹æœºå‚å•†é‡‡ç”¨çš„å°±æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šæ—©æœŸçš„æ‰‹æœºå……ç”µå™¨éƒ½æ˜¯å•ç‹¬åˆ¶ä½œçš„ï¼Œå……ç”µå¤´å’Œå……ç”µçº¿æ˜¯è¿åœ¨ä¸€èµ·çš„ã€‚ç°åœ¨çš„æ‰‹æœºéƒ½é‡‡ç”¨äº†ç”µæºé€‚é…å™¨åŠ æ•°æ®çº¿çš„æ–¹æ¡ˆã€‚è¿™æ˜¯ç”Ÿæ´»ä¸­åº”ç”¨é€‚é…å™¨æ¨¡å¼çš„ä¸€ä¸ªè¿›æ­¥ã€‚</p><blockquote><p>é€‚é…å™¨æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚<br>é€‚é…çš„æ„æ€æ˜¯é€‚åº”ã€åŒ¹é…ã€‚é€šä¿—åœ°è®²ï¼Œé€‚é…å™¨æ¨¡å¼é€‚ç”¨äº æœ‰ç›¸å…³æ€§ä½†ä¸å…¼å®¹çš„ç»“æ„ï¼Œæºæ¥å£é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶è½¬æ¢åæ‰å¯ä»¥é€‚ç”¨äºç›®æ ‡æ¥å£ï¼Œè¿™ä¸ªè½¬æ¢è¿‡ç¨‹å°±æ˜¯é€‚é…ï¼Œè¿™ä¸ªä¸­é—´ä»¶å°±ç§°ä¹‹ä¸ºé€‚é…å™¨ã€‚</p></blockquote><p>å®¶ç”¨ç”µæºå’Œ USB æ•°æ®çº¿æœ‰ç›¸å…³æ€§ï¼šå®¶ç”¨ç”µæºè¾“å‡ºç”µå‹ï¼ŒUSB æ•°æ®çº¿è¾“å…¥ç”µå‹ã€‚ä½†ä¸¤ä¸ªæ¥å£æ— æ³•å…¼å®¹ï¼Œå› ä¸ºä¸€ä¸ªè¾“å‡º 220Vï¼Œä¸€ä¸ªè¾“å…¥ 5Vï¼Œé€šè¿‡é€‚é…å™¨å°†è¾“å‡º 220V è½¬æ¢æˆè¾“å‡º 5V ä¹‹åæ‰å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p><p>è®©æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>é¦–å…ˆï¼Œå®¶åº­ç”µæºæä¾› 220V çš„ç”µå‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeBattery</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">supply</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®¶ç”¨ç”µæºæä¾›ä¸€ä¸ª 220V çš„è¾“å‡ºç”µå‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">220</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>USB æ•°æ®çº¿åªæ¥æ”¶ 5V çš„å……ç”µç”µå‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">USBLine</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">charge</span><span class="params">(<span class="keyword">int</span> volt)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœç”µå‹ä¸æ˜¯ 5Vï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">if</span> (volt != <span class="number">5</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"åªèƒ½æ¥æ”¶ 5V ç”µå‹"</span>);</span><br><span class="line">        <span class="comment">// å¦‚æœç”µå‹æ˜¯ 5Vï¼Œæ­£å¸¸å……ç”µ</span></span><br><span class="line">        System.out.println(<span class="string">"æ­£å¸¸å……ç”µ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…ˆæ¥çœ‹çœ‹é€‚é…ä¹‹å‰ï¼Œç”¨æˆ·å¦‚æœç›´æ¥ç”¨å®¶åº­ç”µæºç»™æ‰‹æœºå……ç”µï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">chargeForPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HomeBattery homeBattery = <span class="keyword">new</span> HomeBattery();</span><br><span class="line">        <span class="keyword">int</span> homeVolt = homeBattery.supply();</span><br><span class="line">        System.out.println(<span class="string">"å®¶åº­ç”µæºæä¾›çš„ç”µå‹æ˜¯ "</span> + homeVolt + <span class="string">"V"</span>);</span><br><span class="line"></span><br><span class="line">        USBLine usbLine = <span class="keyword">new</span> USBLine();</span><br><span class="line">        usbLine.charge(homeVolt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">å®¶åº­ç”µæºæä¾›çš„ç”µå‹æ˜¯ <span class="number">220</span>V</span><br><span class="line"></span><br><span class="line">java.lang.IllegalArgumentException: åªèƒ½æ¥æ”¶ <span class="number">5</span>V ç”µå‹</span><br><span class="line">è¿™æ—¶ï¼Œæˆ‘ä»¬åŠ å…¥ç”µæºé€‚é…å™¨ï¼š</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">convert</span><span class="params">(<span class="keyword">int</span> homeVolt)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é€‚é…è¿‡ç¨‹ï¼šä½¿ç”¨ç”µé˜»ã€ç”µå®¹ç­‰å™¨ä»¶å°†å…¶é™ä½ä¸ºè¾“å‡º 5V</span></span><br><span class="line">        <span class="keyword">int</span> chargeVolt = homeVolt - <span class="number">215</span>;</span><br><span class="line">        <span class="keyword">return</span> chargeVolt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç”¨æˆ·å†ä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µæºæä¾›çš„ç”µå‹è½¬æ¢ä¸ºå……ç”µç”µå‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">chargeForPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HomeBattery homeBattery = <span class="keyword">new</span> HomeBattery();</span><br><span class="line">        <span class="keyword">int</span> homeVolt = homeBattery.supply();</span><br><span class="line">        System.out.println(<span class="string">"å®¶åº­ç”µæºæä¾›çš„ç”µå‹æ˜¯ "</span> + homeVolt + <span class="string">"V"</span>);</span><br><span class="line"></span><br><span class="line">        Adapter adapter = <span class="keyword">new</span> Adapter();</span><br><span class="line">        <span class="keyword">int</span> chargeVolt = adapter.convert(homeVolt);</span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µå‹è½¬æ¢æˆäº† "</span> + chargeVolt + <span class="string">"V"</span>);</span><br><span class="line"></span><br><span class="line">        USBLine usbLine = <span class="keyword">new</span> USBLine();</span><br><span class="line">        usbLine.charge(chargeVolt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">å®¶åº­ç”µæºæä¾›çš„ç”µå‹æ˜¯ <span class="number">220</span>V</span><br><span class="line">ä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µå‹è½¬æ¢æˆäº† <span class="number">5</span>V</span><br><span class="line">æ­£å¸¸å……ç”µ</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚åœ¨æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°å„ç§å„æ ·çš„ Adapterï¼Œéƒ½å±äºé€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ã€‚</p><p>ä½†é€‚é…å™¨æ¨¡å¼å¹¶ä¸æ¨èå¤šç”¨ã€‚å› ä¸ºæœªé›¨ç»¸ç¼ªå¥½è¿‡äº¡ç¾Šè¡¥ç‰¢ï¼Œå¦‚æœäº‹å…ˆèƒ½é¢„é˜²æ¥å£ä¸åŒçš„é—®é¢˜ï¼Œä¸åŒ¹é…é—®é¢˜å°±ä¸ä¼šå‘ç”Ÿï¼Œåªæœ‰é‡åˆ°æºæ¥å£æ— æ³•æ”¹å˜æ—¶ï¼Œæ‰åº”è¯¥è€ƒè™‘ä½¿ç”¨é€‚é…å™¨ã€‚æ¯”å¦‚ç°ä»£çš„ç”µæºæ’å£ä¸­å¾ˆå¤šå·²ç»å¢åŠ äº†ä¸“é—¨çš„å……ç”µæ¥å£ï¼Œè®©æˆ‘ä»¬ä¸éœ€è¦å†ä½¿ç”¨é€‚é…å™¨è½¬æ¢æ¥å£ï¼Œè¿™åˆæ˜¯ç¤¾ä¼šçš„ä¸€ä¸ªè¿›æ­¥ã€‚</p><h2 id="äºŒã€æ¡¥æ¥æ¨¡å¼"><a href="#äºŒã€æ¡¥æ¥æ¨¡å¼" class="headerlink" title="äºŒã€æ¡¥æ¥æ¨¡å¼"></a>äºŒã€æ¡¥æ¥æ¨¡å¼</h2><blockquote><p>Bridge<br>    Decouple an abstraction or interface from its implementation so that the two can vary independently.</p></blockquote><p>è€ƒè™‘è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šç»˜åˆ¶çŸ©å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢è¿™ä¸‰ç§å›¾æ¡ˆã€‚æŒ‰ç…§é¢å‘å¯¹è±¡çš„ç†å¿µï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸‰ä¸ªå…·ä½“ç±»ï¼Œå¯¹åº”ä¸‰ç§ä¸åŒçš„å›¾å½¢ã€‚</p><p>æŠ½è±¡æ¥å£ IShapeï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸‰ä¸ªå…·ä½“å½¢çŠ¶ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶çŸ©å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Round</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶åœ†å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶ä¸‰è§’å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æœ‰äº†æ–°çš„éœ€æ±‚ï¼Œæ¯ç§å½¢çŠ¶éƒ½éœ€è¦æœ‰å››ç§ä¸åŒçš„é¢œè‰²ï¼šçº¢ã€è“ã€é»„ã€ç»¿ã€‚</p><p>è¿™æ—¶æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ä¸¤ç§è®¾è®¡æ–¹æ¡ˆï¼š</p><ul><li>ä¸ºäº†å¤ç”¨å½¢çŠ¶ç±»ï¼Œå°†æ¯ç§å½¢çŠ¶å®šä¹‰ä¸ºçˆ¶ç±»ï¼Œæ¯ç§ä¸åŒé¢œè‰²çš„å›¾å½¢ç»§æ‰¿è‡ªå…¶å½¢çŠ¶çˆ¶ç±»ã€‚æ­¤æ—¶ä¸€å…±æœ‰ 12 ä¸ªç±»ã€‚</li><li>ä¸ºäº†å¤ç”¨é¢œè‰²ç±»ï¼Œå°†æ¯ç§é¢œè‰²å®šä¹‰ä¸ºçˆ¶ç±»ï¼Œæ¯ç§ä¸åŒé¢œè‰²çš„å›¾å½¢ç»§æ‰¿è‡ªå…¶é¢œè‰²çˆ¶ç±»ã€‚æ­¤æ—¶ä¸€å…±æœ‰ 12 ä¸ªç±»ã€‚<br>ä¹ä¸€çœ‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„ç»§æ‰¿ç‰¹æ€§ï¼Œå¤ç”¨äº†çˆ¶ç±»çš„ä»£ç å¹¶æ‰©å±•äº†æ–°çš„åŠŸèƒ½ã€‚</li></ul><p>ä½†ä»”ç»†æƒ³ä¸€æƒ³ï¼Œå¦‚æœä»¥åè¦å¢åŠ ä¸€ç§é¢œè‰²ï¼Œæ¯”å¦‚é»‘è‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¢åŠ ä¸‰ä¸ªç±»ï¼›å¦‚æœå†è¦å¢åŠ ä¸€ç§å½¢çŠ¶ï¼Œæˆ‘ä»¬åˆéœ€è¦å¢åŠ äº”ä¸ªç±»ï¼Œå¯¹åº” 5 ç§é¢œè‰²ã€‚</p><p>æ›´ä¸ç”¨è¯´é‡åˆ°å¢åŠ  20 ä¸ªå½¢çŠ¶ï¼Œ20 ç§é¢œè‰²çš„éœ€æ±‚ï¼Œä¸åŒçš„æ’åˆ—ç»„åˆå°†ä¼šä½¿å·¥ä½œé‡å˜å¾—æ— æ¯”çš„åºå¤§ã€‚çœ‹æ¥æˆ‘ä»¬ä¸å¾—ä¸é‡æ–°æ€è€ƒè®¾è®¡æ–¹æ¡ˆã€‚</p><p>å½¢çŠ¶å’Œé¢œè‰²ï¼Œéƒ½æ˜¯å›¾å½¢çš„ä¸¤ä¸ªå±æ€§ã€‚ä»–ä»¬ä¸¤è€…çš„å…³ç³»æ˜¯å¹³ç­‰çš„ï¼Œæ‰€ä»¥ä¸å±äºç»§æ‰¿å…³ç³»ã€‚æ›´å¥½çš„çš„å®ç°æ–¹å¼æ˜¯ï¼šå°†å½¢çŠ¶å’Œé¢œè‰²åˆ†ç¦»ï¼Œæ ¹æ®éœ€è¦å¯¹å½¢çŠ¶å’Œé¢œè‰²è¿›è¡Œç»„åˆï¼Œè¿™å°±æ˜¯æ¡¥æ¥æ¨¡å¼çš„æ€æƒ³ã€‚</p><blockquote><p>æ¡¥æ¥æ¨¡å¼ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ï¼Œåˆç§°ä¸ºæŸ„ä½“æ¨¡å¼æˆ–æ¥å£æ¨¡å¼ã€‚<br>å®˜æ–¹å®šä¹‰éå¸¸ç²¾å‡†ã€ç®€ç»ƒï¼Œä½†å´æœ‰ç‚¹ä¸æ˜“ç†è§£ã€‚é€šä¿—åœ°è¯´ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰ä¸¤ç§æˆ–è€…å¤šç§åˆ†ç±»æ–¹å¼ï¼Œå¹¶ä¸”ä¸¤ç§åˆ†ç±»æ–¹å¼éƒ½å®¹æ˜“å˜åŒ–ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­çš„å½¢çŠ¶å’Œé¢œè‰²ã€‚è¿™æ—¶ä½¿ç”¨ç»§æ‰¿å¾ˆå®¹æ˜“é€ æˆå­ç±»è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯æŠŠè¿™ç§åˆ†ç±»æ–¹å¼åˆ†ç¦»å‡ºæ¥ï¼Œè®©ä»–ä»¬ç‹¬ç«‹å˜åŒ–ï¼Œä½¿ç”¨æ—¶å°†ä¸åŒçš„åˆ†ç±»è¿›è¡Œç»„åˆå³å¯ã€‚</p></blockquote><p>è¯´åˆ°è¿™é‡Œï¼Œä¸å¾—ä¸æä¸€ä¸ªè®¾è®¡åŸåˆ™ï¼šåˆæˆ / èšåˆå¤ç”¨åŸåˆ™ã€‚è™½ç„¶å®ƒæ²¡æœ‰è¢«åˆ’åˆ†åˆ°å…­å¤§è®¾è®¡åŸåˆ™ä¸­ï¼Œä½†å®ƒåœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ä¹Ÿéå¸¸çš„é‡è¦ã€‚</p><blockquote><p>åˆæˆ / èšåˆå¤ç”¨åŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨åˆæˆ / èšåˆï¼Œè€Œä¸æ˜¯ç±»ç»§æ‰¿ã€‚</p></blockquote><p>ç»§æ‰¿è™½ç„¶æ˜¯é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œä½†ç»§æ‰¿ä¼šå¯¼è‡´å­ç±»ä¸çˆ¶ç±»æœ‰éå¸¸ç´§å¯†çš„ä¾èµ–å…³ç³»ï¼Œå®ƒä¼šé™åˆ¶å­ç±»çš„çµæ´»æ€§å’Œå­ç±»çš„å¤ç”¨æ€§ã€‚è€Œä½¿ç”¨åˆæˆ / èšåˆï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ¥å£å®ç°çš„æ–¹å¼ï¼Œå°±ä¸å­˜åœ¨ä¾èµ–é—®é¢˜ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‹“å±•åŠŸèƒ½ã€‚</p><p>è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æœ¬ä¾‹ä½¿ç”¨æ¡¥æ¥æ¨¡å¼çš„ç¨‹åºå®ç°ï¼š</p><p>æ–°å»ºæ¥å£ç±» IColorï¼Œä»…åŒ…å«ä¸€ä¸ªè·å–é¢œè‰²çš„æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IColor</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">getColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¯ç§é¢œè‰²éƒ½å®ç°æ­¤æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Red</span> <span class="keyword">implements</span> <span class="title">IColor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"çº¢"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blue</span> <span class="keyword">implements</span> <span class="title">IColor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"è“"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yellow</span> <span class="keyword">implements</span> <span class="title">IColor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"é»„"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Green</span> <span class="keyword">implements</span> <span class="title">IColor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ç»¿"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨æ¯ä¸ªå½¢çŠ¶ç±»ä¸­ï¼Œæ¡¥æ¥ IColor æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IColor color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setColor</span><span class="params">(IColor color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶"</span> + color.getColor() + <span class="string">"çŸ©å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Round</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IColor color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setColor</span><span class="params">(IColor color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶"</span> + color.getColor() + <span class="string">"åœ†å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">implements</span> <span class="title">IShape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IColor color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setColor</span><span class="params">(IColor color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»˜åˆ¶"</span> + color.getColor() + <span class="string">"ä¸‰è§’å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æµ‹è¯•å‡½æ•°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Rectangle rectangle = <span class="keyword">new</span> Rectangle();</span><br><span class="line">    rectangle.setColor(<span class="keyword">new</span> Red());</span><br><span class="line">    rectangle.draw();</span><br><span class="line"></span><br><span class="line">    Round round = <span class="keyword">new</span> Round();</span><br><span class="line">    round.setColor(<span class="keyword">new</span> Blue());</span><br><span class="line">    round.draw();</span><br><span class="line"></span><br><span class="line">    Triangle triangle = <span class="keyword">new</span> Triangle();</span><br><span class="line">    triangle.setColor(<span class="keyword">new</span> Yellow());</span><br><span class="line">    triangle.draw();</span><br><span class="line">&#125;</span><br><span class="line">è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">ç»˜åˆ¶çº¢çŸ©å½¢</span><br><span class="line">ç»˜åˆ¶è“åœ†å½¢</span><br><span class="line">ç»˜åˆ¶é»„ä¸‰è§’å½¢</span><br></pre></td></tr></table></figure></p><p>è¿™æ—¶æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹å®˜æ–¹å®šä¹‰ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚æŠ½è±¡éƒ¨åˆ†æŒ‡çš„æ˜¯çˆ¶ç±»ï¼Œå¯¹åº”æœ¬ä¾‹ä¸­çš„å½¢çŠ¶ç±»ï¼Œå®ç°éƒ¨åˆ†æŒ‡çš„æ˜¯ä¸åŒå­ç±»çš„åŒºåˆ«ä¹‹å¤„ã€‚å°†å­ç±»çš„åŒºåˆ«æ–¹å¼ â€”â€” ä¹Ÿå°±æ˜¯æœ¬ä¾‹ä¸­çš„é¢œè‰² â€”â€” åˆ†ç¦»æˆæ¥å£ï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼æ¡¥æ¥é¢œè‰²å’Œå½¢çŠ¶ï¼Œè¿™å°±æ˜¯æ¡¥æ¥æ¨¡å¼ï¼Œå®ƒä¸»è¦ç”¨äº ä¸¤ä¸ªæˆ–å¤šä¸ªåŒç­‰çº§çš„æ¥å£ã€‚</p><h2 id="ä¸‰ã€ç»„åˆæ¨¡å¼"><a href="#ä¸‰ã€ç»„åˆæ¨¡å¼" class="headerlink" title="ä¸‰ã€ç»„åˆæ¨¡å¼"></a>ä¸‰ã€ç»„åˆæ¨¡å¼</h2><blockquote><p>Composite<br>    Build a complex object out of elemental objects and itself like a tree structure.</p></blockquote><p>ä¸Šæ–‡è¯´åˆ°ï¼Œæ¡¥æ¥æ¨¡å¼ç”¨äºå°†åŒç­‰çº§çš„æ¥å£äº’ç›¸ç»„åˆï¼Œé‚£ä¹ˆç»„åˆæ¨¡å¼å’Œæ¡¥æ¥æ¨¡å¼æœ‰ä»€ä¹ˆå…±åŒç‚¹å—ï¼Ÿ</p><p>äº‹å®ä¸Šç»„åˆæ¨¡å¼å’Œæ¡¥æ¥æ¨¡å¼çš„ç»„åˆå®Œå…¨ä¸ä¸€æ ·ã€‚ç»„åˆæ¨¡å¼ç”¨äº æ•´ä½“ä¸éƒ¨åˆ†çš„ç»“æ„ï¼Œå½“æ•´ä½“ä¸éƒ¨åˆ†æœ‰ç›¸ä¼¼çš„ç»“æ„ï¼Œåœ¨æ“ä½œæ—¶å¯ä»¥è¢«ä¸€è‡´å¯¹å¾…æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚ä¾‹å¦‚ï¼š</p><p>æ–‡ä»¶å¤¹å’Œå­æ–‡ä»¶å¤¹çš„å…³ç³»ï¼šæ–‡ä»¶å¤¹ä¸­å¯ä»¥å­˜æ”¾æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹ä¹Ÿä¸€æ ·ã€‚<br>æ€»å…¬å¸å­å…¬å¸çš„å…³ç³»ï¼šæ€»å…¬å¸å¯ä»¥è®¾ç«‹éƒ¨é—¨ï¼Œä¹Ÿå¯ä»¥è®¾ç«‹åˆ†å…¬å¸ï¼Œå­å…¬å¸ä¹Ÿä¸€æ ·ã€‚<br>æ ‘æå’Œåˆ†æ ‘æçš„å…³ç³»ï¼šæ ‘æå¯ä»¥é•¿å‡ºå¶å­ï¼Œä¹Ÿå¯ä»¥é•¿å‡ºæ ‘æï¼Œåˆ†æ ‘æä¹Ÿä¸€æ ·ã€‚<br>åœ¨è¿™äº›å…³ç³»ä¸­ï¼Œè™½ç„¶æ•´ä½“åŒ…å«äº†éƒ¨åˆ†ï¼Œä½†æ— è®ºæ•´ä½“æˆ–éƒ¨åˆ†ï¼Œéƒ½å…·æœ‰ä¸€è‡´çš„è¡Œä¸ºã€‚</p><blockquote><p>ç»„åˆæ¨¡å¼ï¼šåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚<br>è€ƒè™‘è¿™æ ·ä¸€ä¸ªå®é™…åº”ç”¨ï¼šè®¾è®¡ä¸€ä¸ªå…¬å¸çš„äººå‘˜åˆ†å¸ƒç»“æ„ï¼Œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p></blockquote><p>æˆ‘ä»¬æ³¨æ„åˆ°äººå‘˜ç»“æ„ä¸­æœ‰ä¸¤ç§ç»“æ„ï¼Œä¸€æ˜¯ç®¡ç†è€…ï¼Œå¦‚è€æ¿ï¼ŒPMï¼ŒCFOï¼ŒCTOï¼ŒäºŒæ˜¯èŒå‘˜ã€‚å…¶ä¸­æœ‰çš„ç®¡ç†è€…ä¸ä»…ä»…è¦ç®¡ç†èŒå‘˜ï¼Œè¿˜ä¼šç®¡ç†å…¶ä»–çš„ç®¡ç†è€…ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ•´ä½“ä¸éƒ¨åˆ†çš„ç»“æ„ã€‚</p><h3 id="3-1-ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ"><a href="#3-1-ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="3.1.ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ"></a>3.1.ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ</h3><p>è¦æè¿°è¿™æ ·çš„ç»“æ„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ä»¥ä¸‹è®¾è®¡æ–¹æ¡ˆï¼š</p><p>æ–°å»ºç®¡ç†è€…ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">    <span class="comment">// èŒä½</span></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line">    <span class="comment">// å·¥ä½œå†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">    <span class="comment">// ç®¡ç†çš„ç®¡ç†è€…</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Manager&gt; managers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">// ç®¡ç†çš„èŒå‘˜</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Employee&gt; employees = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addManager</span><span class="params">(Manager manager)</span> </span>&#123;</span><br><span class="line">        managers.add(manager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeManager</span><span class="params">(Manager manager)</span> </span>&#123;</span><br><span class="line">        managers.remove(manager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEmployee</span><span class="params">(Employee employee)</span> </span>&#123;</span><br><span class="line">        employees.add(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeEmployee</span><span class="params">(Employee employee)</span> </span>&#123;</span><br><span class="line">        employees.remove(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘æ˜¯"</span> + position + <span class="string">"ï¼Œæˆ‘æ­£åœ¨"</span> + job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥ä¸‹å±</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        work();</span><br><span class="line">        <span class="keyword">for</span> (Employee employee : employees) &#123;</span><br><span class="line">            employee.work();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Manager manager : managers) &#123;</span><br><span class="line">            manager.check();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–°å»ºèŒå‘˜ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="comment">// èŒä½</span></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line">    <span class="comment">// å·¥ä½œå†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘æ˜¯"</span> + position + <span class="string">"ï¼Œæˆ‘æ­£åœ¨"</span> + job);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯å»ºç«‹äººå‘˜ç»“æ„å…³ç³»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Manager boss = <span class="keyword">new</span> Manager(<span class="string">"è€æ¿"</span>, <span class="string">"å”±æ€’æ”¾çš„ç”Ÿå‘½"</span>);</span><br><span class="line">        Employee HR = <span class="keyword">new</span> Employee(<span class="string">"äººåŠ›èµ„æº"</span>, <span class="string">"èŠå¾®ä¿¡"</span>);</span><br><span class="line">        Manager PM = <span class="keyword">new</span> Manager(<span class="string">"äº§å“ç»ç†"</span>, <span class="string">"ä¸çŸ¥é“å¹²å•¥"</span>);</span><br><span class="line">        Manager CFO = <span class="keyword">new</span> Manager(<span class="string">"è´¢åŠ¡ä¸»ç®¡"</span>, <span class="string">"çœ‹å‰§"</span>);</span><br><span class="line">        Manager CTO = <span class="keyword">new</span> Manager(<span class="string">"æŠ€æœ¯ä¸»ç®¡"</span>, <span class="string">"åˆ’æ°´"</span>);</span><br><span class="line">        Employee UI = <span class="keyword">new</span> Employee(<span class="string">"è®¾è®¡å¸ˆ"</span>, <span class="string">"ç”»ç”»"</span>);</span><br><span class="line">        Employee operator = <span class="keyword">new</span> Employee(<span class="string">"è¿è¥äººå‘˜"</span>, <span class="string">"å…¼èŒå®¢æœ"</span>);</span><br><span class="line">        Employee webProgrammer = <span class="keyword">new</span> Employee(<span class="string">"ç¨‹åºå‘˜"</span>, <span class="string">"å­¦ä¹ è®¾è®¡æ¨¡å¼"</span>);</span><br><span class="line">        Employee backgroundProgrammer = <span class="keyword">new</span> Employee(<span class="string">"åå°ç¨‹åºå‘˜"</span>, <span class="string">"CRUD"</span>);</span><br><span class="line">        Employee accountant = <span class="keyword">new</span> Employee(<span class="string">"ä¼šè®¡"</span>, <span class="string">"èƒŒä¹ä¹ä¹˜æ³•è¡¨"</span>);</span><br><span class="line">        Employee clerk = <span class="keyword">new</span> Employee(<span class="string">"æ–‡å‘˜"</span>, <span class="string">"ç»™è€æ¿é€’éº¦å…‹é£"</span>);</span><br><span class="line">        boss.addEmployee(HR);</span><br><span class="line">        boss.addManager(PM);</span><br><span class="line">        boss.addManager(CFO);</span><br><span class="line">        PM.addEmployee(UI);</span><br><span class="line">        PM.addManager(CTO);</span><br><span class="line">        PM.addEmployee(operator);</span><br><span class="line">        CTO.addEmployee(webProgrammer);</span><br><span class="line">        CTO.addEmployee(backgroundProgrammer);</span><br><span class="line">        CFO.addEmployee(accountant);</span><br><span class="line">        CFO.addEmployee(clerk);</span><br><span class="line"></span><br><span class="line">        boss.check();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼ˆä¸ºæ–¹ä¾¿æŸ¥çœ‹ï¼Œç¬”è€…æ·»åŠ äº†ç¼©è¿›ï¼‰ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ˜¯è€æ¿ï¼Œæˆ‘æ­£åœ¨å”±æ€’æ”¾çš„ç”Ÿå‘½</span><br><span class="line">æˆ‘æ˜¯äººåŠ›èµ„æºï¼Œæˆ‘æ­£åœ¨èŠå¾®ä¿¡</span><br><span class="line">æˆ‘æ˜¯äº§å“ç»ç†ï¼Œæˆ‘æ­£åœ¨ä¸çŸ¥é“å¹²å•¥</span><br><span class="line">æˆ‘æ˜¯è®¾è®¡å¸ˆï¼Œæˆ‘æ­£åœ¨ç”»ç”»</span><br><span class="line">æˆ‘æ˜¯è¿è¥äººå‘˜ï¼Œæˆ‘æ­£åœ¨å…¼èŒå®¢æœ</span><br><span class="line">æˆ‘æ˜¯æŠ€æœ¯ä¸»ç®¡ï¼Œæˆ‘æ­£åœ¨åˆ’æ°´</span><br><span class="line">æˆ‘æ˜¯ç¨‹åºå‘˜ï¼Œæˆ‘æ­£åœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼</span><br><span class="line">æˆ‘æ˜¯åå°ç¨‹åºå‘˜ï¼Œæˆ‘æ­£åœ¨CRUD</span><br><span class="line">æˆ‘æ˜¯è´¢åŠ¡ä¸»ç®¡ï¼Œæˆ‘æ­£åœ¨çœ‹å‰§</span><br><span class="line">æˆ‘æ˜¯ä¼šè®¡ï¼Œæˆ‘æ­£åœ¨èƒŒä¹ä¹ä¹˜æ³•è¡¨</span><br><span class="line">æˆ‘æ˜¯æ–‡å‘˜ï¼Œæˆ‘æ­£åœ¨ç»™è€æ¿é€’éº¦å…‹é£</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·æˆ‘ä»¬å°±è®¾è®¡å‡ºäº†å…¬å¸çš„ç»“æ„ï¼Œä½†æ˜¯è¿™æ ·çš„è®¾è®¡æœ‰ä¸¤ä¸ªå¼Šç«¯ï¼š</p><ul><li>name å­—æ®µï¼Œjob å­—æ®µï¼Œwork æ–¹æ³•é‡å¤äº†ã€‚</li><li>ç®¡ç†è€…å¯¹å…¶ç®¡ç†çš„ç®¡ç†è€…å’ŒèŒå‘˜éœ€è¦åŒºåˆ«å¯¹å¾…ã€‚</li></ul><p>å…³äºç¬¬ä¸€ä¸ªå¼Šç«¯ï¼Œè™½ç„¶è¿™é‡Œä¸ºäº†è®²è§£ï¼Œåªæœ‰ä¸¤ä¸ªå­—æ®µå’Œä¸€ä¸ªæ–¹æ³•é‡å¤ï¼Œå®é™…å·¥ä½œä¸­è¿™æ ·çš„æ•´ä½“éƒ¨åˆ†ç»“æ„ä¼šæœ‰ç›¸å½“å¤šçš„é‡å¤ã€‚æ¯”å¦‚æ­¤ä¾‹ä¸­è¿˜å¯èƒ½æœ‰å·¥å·ã€å¹´é¾„ç­‰å­—æ®µï¼Œé¢†å–å·¥èµ„ã€ä¸Šä¸‹ç­æ‰“å¡ã€å¼€å„ç§æ— èŠçš„ä¼šç­‰æ–¹æ³•ã€‚</p><p>å¤§é‡çš„é‡å¤æ˜¾ç„¶æ˜¯å¾ˆä¸‘é™‹çš„ä»£ç ï¼Œåˆ†æä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œ Manager ç±»åªæ¯” Employee ç±»å¤šä¸€ä¸ªç®¡ç†äººå‘˜çš„åˆ—è¡¨å­—æ®µï¼Œå¤šå‡ ä¸ªå¢åŠ  / ç§»é™¤äººå‘˜çš„æ–¹æ³•ï¼Œå…¶ä»–çš„å­—æ®µå’Œæ–¹æ³•å…¨éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>æœ‰è¯»è€…åº”è¯¥ä¼šæƒ³åˆ°ï¼šæˆ‘ä»¬å¯ä»¥å°†é‡å¤çš„å­—æ®µå’Œæ–¹æ³•æå–åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼Œè®© Employee å’Œ Manager éƒ½å»è°ƒç”¨æ­¤å·¥å…·ç±»ï¼Œå°±å¯ä»¥æ¶ˆé™¤é‡å¤äº†ã€‚</p><p>è¿™æ ·å›ºç„¶å¯è¡Œï¼Œä½†å±äº Employee å’Œ Manager ç±»è‡ªå·±çš„ä¸œè¥¿å´è¦é€šè¿‡å…¶ä»–ç±»è°ƒç”¨ï¼Œå¹¶ä¸åˆ©äºç¨‹åºçš„é«˜å†…èšã€‚</p><p>å…³äºç¬¬äºŒä¸ªå¼Šç«¯ï¼Œæ­¤æ–¹æ¡ˆæ— æ³•è§£å†³ï¼Œæ­¤æ–¹æ¡ˆä¸­ Employee å’Œ Manager ç±»å®Œå…¨æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä¸¤è€…çš„ç›¸ä¼¼æ€§è¢«å¿½ç•¥äº†ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æœ‰æ›´å¥½çš„è®¾è®¡æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ç»„åˆæ¨¡å¼ï¼</p><h3 id="3-2-ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ"><a href="#3-2-ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="3.2.ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ"></a>3.2.ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ</h3><p>ç»„åˆæ¨¡å¼æœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯è®©ç”¨æˆ·å¯ä»¥ä¸€è‡´å¯¹å¾…æ•´ä½“å’Œéƒ¨åˆ†ç»“æ„ï¼Œå°†ä¸¤è€…éƒ½ä½œä¸ºä¸€ä¸ªç›¸åŒçš„ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªæŠ½è±¡çš„ç»„ä»¶ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// èŒä½</span></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line">    <span class="comment">// å·¥ä½œå†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Component</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘æ˜¯"</span> + position + <span class="string">"ï¼Œæˆ‘æ­£åœ¨"</span> + job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addComponent</span><span class="params">(Component component)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">removeComponent</span><span class="params">(Component component)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç®¡ç†è€…ç»§æ‰¿è‡ªæ­¤æŠ½è±¡ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç®¡ç†çš„ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Component&gt; components = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(position, job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        components.add(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        components.remove(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥ä¸‹å±</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        work();</span><br><span class="line">        <span class="keyword">for</span> (Component component : components) &#123;</span><br><span class="line">            component.check();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>èŒå‘˜åŒæ ·ç»§æ‰¿è‡ªæ­¤æŠ½è±¡ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(position, job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"èŒå‘˜æ²¡æœ‰ç®¡ç†æƒé™"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"èŒå‘˜æ²¡æœ‰ç®¡ç†æƒé™"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        work();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹å®¢æˆ·ç«¯å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Component boss = <span class="keyword">new</span> Manager(<span class="string">"è€æ¿"</span>, <span class="string">"å”±æ€’æ”¾çš„ç”Ÿå‘½"</span>);</span><br><span class="line">        Component HR = <span class="keyword">new</span> Employee(<span class="string">"äººåŠ›èµ„æº"</span>, <span class="string">"èŠå¾®ä¿¡"</span>);</span><br><span class="line">        Component PM = <span class="keyword">new</span> Manager(<span class="string">"äº§å“ç»ç†"</span>, <span class="string">"ä¸çŸ¥é“å¹²å•¥"</span>);</span><br><span class="line">        Component CFO = <span class="keyword">new</span> Manager(<span class="string">"è´¢åŠ¡ä¸»ç®¡"</span>, <span class="string">"çœ‹å‰§"</span>);</span><br><span class="line">        Component CTO = <span class="keyword">new</span> Manager(<span class="string">"æŠ€æœ¯ä¸»ç®¡"</span>, <span class="string">"åˆ’æ°´"</span>);</span><br><span class="line">        Component UI = <span class="keyword">new</span> Employee(<span class="string">"è®¾è®¡å¸ˆ"</span>, <span class="string">"ç”»ç”»"</span>);</span><br><span class="line">        Component operator = <span class="keyword">new</span> Employee(<span class="string">"è¿è¥äººå‘˜"</span>, <span class="string">"å…¼èŒå®¢æœ"</span>);</span><br><span class="line">        Component webProgrammer = <span class="keyword">new</span> Employee(<span class="string">"ç¨‹åºå‘˜"</span>, <span class="string">"å­¦ä¹ è®¾è®¡æ¨¡å¼"</span>);</span><br><span class="line">        Component backgroundProgrammer = <span class="keyword">new</span> Employee(<span class="string">"åå°ç¨‹åºå‘˜"</span>, <span class="string">"CRUD"</span>);</span><br><span class="line">        Component accountant = <span class="keyword">new</span> Employee(<span class="string">"ä¼šè®¡"</span>, <span class="string">"èƒŒä¹ä¹ä¹˜æ³•è¡¨"</span>);</span><br><span class="line">        Component clerk = <span class="keyword">new</span> Employee(<span class="string">"æ–‡å‘˜"</span>, <span class="string">"ç»™è€æ¿é€’éº¦å…‹é£"</span>);</span><br><span class="line">        boss.addComponent(HR);</span><br><span class="line">        boss.addComponent(PM);</span><br><span class="line">        boss.addComponent(CFO);</span><br><span class="line">        PM.addComponent(UI);</span><br><span class="line">        PM.addComponent(CTO);</span><br><span class="line">        PM.addComponent(operator);</span><br><span class="line">        CTO.addComponent(webProgrammer);</span><br><span class="line">        CTO.addComponent(backgroundProgrammer);</span><br><span class="line">        CFO.addComponent(accountant);</span><br><span class="line">        CFO.addComponent(clerk);</span><br><span class="line"></span><br><span class="line">        boss.check();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œè¾“å‡ºç»“æœä¸ä¹‹å‰çš„ç»“æœä¸€æ¨¡ä¸€æ ·ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ç»„åˆæ¨¡å¼åï¼Œæˆ‘ä»¬è§£å†³äº†ä¹‹å‰çš„ä¸¤ä¸ªå¼Šç«¯ã€‚ä¸€æ˜¯å°†å…±æœ‰çš„å­—æ®µä¸æ–¹æ³•ç§»åˆ°äº†çˆ¶ç±»ä¸­ï¼Œæ¶ˆé™¤äº†é‡å¤ï¼Œå¹¶ä¸”åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œå¯ä»¥ä¸€è‡´å¯¹å¾… Manager å’Œ Employee ç±»ï¼š</p><ul><li>Manager ç±»å’Œ Employee ç±»ç»Ÿä¸€å£°æ˜ä¸º Component å¯¹è±¡</li><li>ç»Ÿä¸€è°ƒç”¨ Component å¯¹è±¡çš„ addComponent æ–¹æ³•æ·»åŠ å­å¯¹è±¡å³å¯ã€‚</li></ul><h3 id="3-3-ç»„åˆæ¨¡å¼ä¸­çš„å®‰å…¨æ–¹å¼ä¸é€æ˜æ–¹å¼"><a href="#3-3-ç»„åˆæ¨¡å¼ä¸­çš„å®‰å…¨æ–¹å¼ä¸é€æ˜æ–¹å¼" class="headerlink" title="3.3.ç»„åˆæ¨¡å¼ä¸­çš„å®‰å…¨æ–¹å¼ä¸é€æ˜æ–¹å¼"></a>3.3.ç»„åˆæ¨¡å¼ä¸­çš„å®‰å…¨æ–¹å¼ä¸é€æ˜æ–¹å¼</h3><p>è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼ŒEmployee ç±»è™½ç„¶ç»§æ‰¿äº†çˆ¶ç±»çš„ addComponent å’Œ removeComponent æ–¹æ³•ï¼Œä½†æ˜¯ä»…ä»…æä¾›äº†ä¸€ä¸ªç©ºå®ç°ï¼Œå› ä¸º Employee ç±»æ˜¯ä¸æ”¯æŒæ·»åŠ å’Œç§»é™¤ç»„ä»¶çš„ã€‚è¿™æ ·æ˜¯å¦è¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™å‘¢ï¼Ÿ</p><blockquote><p>æ¥å£éš”ç¦»åŸåˆ™ï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚å¦‚æœä¸€ä¸ªæ¥å£åœ¨å®ç°æ—¶ï¼Œéƒ¨åˆ†æ–¹æ³•ç”±äºå†—ä½™è¢«å®¢æˆ·ç«¯ç©ºå®ç°ï¼Œåˆ™åº”è¯¥å°†æ¥å£æ‹†åˆ†ï¼Œè®©å®ç°ç±»åªéœ€ä¾èµ–è‡ªå·±éœ€è¦çš„æ¥å£æ–¹æ³•ã€‚</p></blockquote><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™æ ·ç¡®å®è¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™ã€‚è¿™ç§æ–¹å¼åœ¨ç»„åˆæ¨¡å¼ä¸­è¢«ç§°ä½œé€æ˜æ–¹å¼.</p><blockquote><p>é€æ˜æ–¹å¼ï¼šåœ¨ Component ä¸­å£°æ˜æ‰€æœ‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ add ã€remove ç­‰ï¼Œè¿™æ ·ç»§æ‰¿è‡ª Component çš„å­ç±»éƒ½å…·å¤‡äº† addã€remove æ–¹æ³•ã€‚å¯¹äºå¤–ç•Œæ¥è¯´å¶èŠ‚ç‚¹å’ŒæèŠ‚ç‚¹æ˜¯é€æ˜çš„ï¼Œå®ƒä»¬å…·å¤‡å®Œå…¨ä¸€è‡´çš„æ¥å£ã€‚</p></blockquote><p>è¿™ç§æ–¹å¼æœ‰å®ƒçš„ä¼˜ç‚¹ï¼šè®© Manager ç±»å’Œ Employee ç±»å…·å¤‡å®Œå…¨ä¸€è‡´çš„è¡Œä¸ºæ¥å£ï¼Œè°ƒç”¨è€…å¯ä»¥ä¸€è‡´å¯¹å¾…å®ƒä»¬ã€‚</p><p>ä½†å®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼šEmployee ç±»å¹¶ä¸æ”¯æŒç®¡ç†å­å¯¹è±¡ï¼Œä¸ä»…è¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™ï¼Œè€Œä¸”å®¢æˆ·ç«¯å¯ä»¥ç”¨ Employee ç±»è°ƒç”¨ addComponent å’Œ removeComponent æ–¹æ³•ï¼Œå¯¼è‡´ç¨‹åºå‡ºé”™ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯ä¸å®‰å…¨çš„ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥å°† addComponent å’Œ removeComponent æ–¹æ³•ç§»åˆ° Manager å­ç±»ä¸­å»å•ç‹¬å®ç°ï¼Œè®© Employee ä¸å†å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•å‘¢ï¼Ÿæˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ã€‚</p><p>å°†æŠ½è±¡ç±»ä¿®æ”¹ä¸ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// èŒä½</span></span><br><span class="line">    <span class="keyword">private</span> String position;</span><br><span class="line">    <span class="comment">// å·¥ä½œå†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Component</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.position = position;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆ‘æ˜¯"</span> + position + <span class="string">"ï¼Œæˆ‘æ­£åœ¨"</span> + job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨çˆ¶ç±»ä¸­å»æ‰äº† addComponent å’Œ removeComponent è¿™ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</p><p>Manager ç±»ä¿®æ”¹ä¸ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç®¡ç†çš„ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Component&gt; components = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(position, job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        components.add(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeComponent</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        components.remove(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥ä¸‹å±</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        work();</span><br><span class="line">        <span class="keyword">for</span> (Component component : components) &#123;</span><br><span class="line">            component.check();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Manager ç±»å•ç‹¬å®ç°äº† addComponent å’Œ removeComponent è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå»æ‰äº† @Override æ³¨è§£ã€‚</p><p>Employee ç±»ä¿®æ”¹ä¸ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String position, String job)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(position, job);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        work();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯å»ºç«‹äººå‘˜ç»“æ„å…³ç³»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Manager boss = <span class="keyword">new</span> Manager(<span class="string">"è€æ¿"</span>, <span class="string">"å”±æ€’æ”¾çš„ç”Ÿå‘½"</span>);</span><br><span class="line">        Employee HR = <span class="keyword">new</span> Employee(<span class="string">"äººåŠ›èµ„æº"</span>, <span class="string">"èŠå¾®ä¿¡"</span>);</span><br><span class="line">        Manager PM = <span class="keyword">new</span> Manager(<span class="string">"äº§å“ç»ç†"</span>, <span class="string">"ä¸çŸ¥é“å¹²å•¥"</span>);</span><br><span class="line">        Manager CFO = <span class="keyword">new</span> Manager(<span class="string">"è´¢åŠ¡ä¸»ç®¡"</span>, <span class="string">"çœ‹å‰§"</span>);</span><br><span class="line">        Manager CTO = <span class="keyword">new</span> Manager(<span class="string">"æŠ€æœ¯ä¸»ç®¡"</span>, <span class="string">"åˆ’æ°´"</span>);</span><br><span class="line">        Employee UI = <span class="keyword">new</span> Employee(<span class="string">"è®¾è®¡å¸ˆ"</span>, <span class="string">"ç”»ç”»"</span>);</span><br><span class="line">        Employee operator = <span class="keyword">new</span> Employee(<span class="string">"è¿è¥äººå‘˜"</span>, <span class="string">"å…¼èŒå®¢æœ"</span>);</span><br><span class="line">        Employee webProgrammer = <span class="keyword">new</span> Employee(<span class="string">"ç¨‹åºå‘˜"</span>, <span class="string">"å­¦ä¹ è®¾è®¡æ¨¡å¼"</span>);</span><br><span class="line">        Employee backgroundProgrammer = <span class="keyword">new</span> Employee(<span class="string">"åå°ç¨‹åºå‘˜"</span>, <span class="string">"CRUD"</span>);</span><br><span class="line">        Employee accountant = <span class="keyword">new</span> Employee(<span class="string">"ä¼šè®¡"</span>, <span class="string">"èƒŒä¹ä¹ä¹˜æ³•è¡¨"</span>);</span><br><span class="line">        Employee clerk = <span class="keyword">new</span> Employee(<span class="string">"æ–‡å‘˜"</span>, <span class="string">"ç»™è€æ¿é€’éº¦å…‹é£"</span>);</span><br><span class="line">        boss.addComponent(HR);</span><br><span class="line">        boss.addComponent(PM);</span><br><span class="line">        boss.addComponent(CFO);</span><br><span class="line">        PM.addComponent(UI);</span><br><span class="line">        PM.addComponent(CTO);</span><br><span class="line">        PM.addComponent(operator);</span><br><span class="line">        CTO.addComponent(webProgrammer);</span><br><span class="line">        CTO.addComponent(backgroundProgrammer);</span><br><span class="line">        CFO.addComponent(accountant);</span><br><span class="line">        CFO.addComponent(clerk);</span><br><span class="line"></span><br><span class="line">        boss.check();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœä¸ä¹‹å‰ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>è¿™ç§æ–¹å¼åœ¨ç»„åˆæ¨¡å¼ä¸­ç§°ä¹‹ä¸ºå®‰å…¨æ–¹å¼ã€‚</p><blockquote><p>å®‰å…¨æ–¹å¼ï¼šåœ¨ Component ä¸­ä¸å£°æ˜ add å’Œ remove ç­‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™æ ·å¶èŠ‚ç‚¹å°±æ— éœ€å®ç°å®ƒï¼Œåªéœ€åœ¨æèŠ‚ç‚¹ä¸­å®ç°ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•å³å¯ã€‚</p></blockquote><p>å®‰å…¨æ–¹å¼éµå¾ªäº†æ¥å£éš”ç¦»åŸåˆ™ï¼Œä½†ç”±äºä¸å¤Ÿé€æ˜ï¼ŒManager å’Œ Employee ç±»ä¸å…·æœ‰ç›¸åŒçš„æ¥å£ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å°† Manager å’Œ Employee ç»Ÿä¸€å£°æ˜ä¸º Component ç±»äº†ï¼Œå¿…é¡»è¦åŒºåˆ«å¯¹å¾…ï¼Œå¸¦æ¥äº†ä½¿ç”¨ä¸Šçš„ä¸æ–¹ä¾¿ã€‚</p><p>å®‰å…¨æ–¹å¼å’Œé€æ˜æ–¹å¼å„æœ‰å¥½å¤„ï¼Œåœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µå†³å®šã€‚ä½†å¤§å¤šæ•°ä½¿ç”¨ç»„åˆæ¨¡å¼çš„åœºæ™¯éƒ½æ˜¯é‡‡ç”¨çš„é€æ˜æ–¹å¼ï¼Œè™½ç„¶å®ƒæœ‰ç‚¹ä¸å®‰å…¨ï¼Œä½†æ˜¯å®¢æˆ·ç«¯æ— éœ€åšä»»ä½•åˆ¤æ–­æ¥åŒºåˆ†æ˜¯å¶å­ç»“ç‚¹è¿˜æ˜¯æèŠ‚ç‚¹ï¼Œç”¨èµ·æ¥æ˜¯çœŸé¦™ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆ°è¿™é‡Œæˆ‘ä»¬å°±æŠŠç»“æ„å‹æ¨¡å¼çš„å‰ä¸‰ç§ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š</p><ul><li>é€‚é…å™¨æ¨¡å¼ï¼šç”¨äºæœ‰ç›¸å…³æ€§ä½†ä¸å…¼å®¹çš„æ¥å£</li><li>æ¡¥æ¥æ¨¡å¼ï¼šç”¨äºåŒç­‰çº§çš„æ¥å£äº’ç›¸ç»„åˆ</li><li>ç»„åˆæ¨¡å¼ï¼šç”¨äºæ•´ä½“ä¸éƒ¨åˆ†çš„ç»“æ„</li></ul><p>å‰©ä½™å››ç§ç»“æ„å‹æ¨¡å¼æˆ‘ä»¬å°†åœ¨ä¸‹ç¯‡æ–‡ç« ä¸­å­¦ä¹ ã€‚</p><p>æœ¬æ–‡ä½œè€…ï¼šAlpinist Wang</p><p>å£°æ˜ï¼šæœ¬æ–‡å½’ â€œåŠ›æ‰£â€ ç‰ˆæƒæ‰€æœ‰ï¼Œå¦‚éœ€è½¬è½½è¯·è”ç³»ã€‚æ–‡ç« å°é¢å›¾å’Œæ–‡ä¸­éƒ¨åˆ†å›¾ç‰‡æ¥æºäºç½‘ç»œï¼Œä¸ºéå•†ä¸šç”¨é€”ä½¿ç”¨ï¼Œå¦‚æœ‰ä¾µæƒè”ç³»åˆ é™¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Design Patterns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DesignPattern_Creational Pattern</title>
      <link href="/2019/05/12/DesignPattern_Creational%20Pattern/"/>
      <url>/2019/05/12/DesignPattern_Creational%20Pattern/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿ"><a href="#å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿ"></a>å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿ</h1><p>é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹æ˜¯å¯ç»´æŠ¤ã€å¯å¤ç”¨ã€å¯æ‰©å±•ã€çµæ´»æ€§å¥½ï¼Œå®ƒçœŸæ­£å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼šéšç€ä¸šåŠ¡å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œé¢å‘å¯¹è±¡ä¾ç„¶èƒ½å¤Ÿä½¿å¾—ç¨‹åºç»“æ„è‰¯å¥½ï¼Œè€Œé¢å‘è¿‡ç¨‹å´ä¼šå¯¼è‡´ç¨‹åºè¶Šæ¥è¶Šè‡ƒè‚¿ã€‚</p><p>è®©é¢å‘å¯¹è±¡ä¿æŒç»“æ„è‰¯å¥½çš„ç§˜è¯€å°±æ˜¯ è®¾è®¡æ¨¡å¼ï¼Œä»Šå¤©åŠ›æ‰£å°±å¸¦é¢†å¤§å®¶ä¸€èµ·æ¥æ¢ç´¢è®¾è®¡æ¨¡å¼çš„ä¸–ç•Œï¼</p><h2 id="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™</h2><p>è®¾è®¡æ¨¡å¼çš„ä¸–ç•Œä¸°å¯Œå¤šå½©ï¼Œæ¯”å¦‚ç”Ÿäº§ä¸€ä¸ªä¸ªã€Œäº§å“ã€çš„å·¥å‚æ¨¡å¼ï¼Œè¡”æ¥ä¸¤ä¸ªä¸ç›¸å…³æ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼Œç”¨ä¸åŒçš„æ–¹å¼åšåŒä¸€ä»¶äº‹çš„ç­–ç•¥æ¨¡å¼ï¼Œæ„å»ºæ­¥éª¤ç¨³å®šã€æ ¹æ®æ„å»ºè¿‡ç¨‹çš„ä¸åŒé…ç½®æ„å»ºå‡ºä¸åŒå¯¹è±¡çš„å»ºé€ è€…æ¨¡å¼ç­‰ã€‚</p><p>é¢å‘å¯¹è±¡ç»“åˆè®¾è®¡æ¨¡å¼ï¼Œæ‰èƒ½çœŸæ­£ä½“ä¼šåˆ°ç¨‹åºå˜å¾—å¯ç»´æŠ¤ã€å¯å¤ç”¨ã€å¯æ‰©å±•ã€çµæ´»æ€§å¥½ã€‚è®¾è®¡æ¨¡å¼å¯¹äºç¨‹åºå‘˜è€Œè¨€å¹¶ä¸é™Œç”Ÿï¼Œæ¯ä¸ªç¨‹åºå‘˜åœ¨ç¼–ç¨‹æ—¶éƒ½ä¼šæˆ–å¤šæˆ–å°‘åœ°æ¥è§¦åˆ°è®¾è®¡æ¨¡å¼ã€‚æ— è®ºæ˜¯åœ¨å¤§å‹ç¨‹åºçš„æ¶æ„ä¸­ï¼Œäº¦æˆ–æ˜¯åœ¨æºç çš„å­¦ä¹ ä¸­ï¼Œè®¾è®¡æ¨¡å¼éƒ½æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ã€‚</p><p>è®¾è®¡æ¨¡å¼åŸºäºå…­å¤§åŸåˆ™ï¼š</p><ul><li>å¼€é—­åŸåˆ™ Open Close Principleï¼šä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹ä¿®æ”¹å°é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚</li><li>å•ä¸€èŒè´£åŸåˆ™ Single Responsibility Principleï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼Œä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å®ƒä¿®æ”¹çš„åŸå› ã€‚</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™ Liskov Substitution Principleï¼šå­ç±»åº”è¯¥å¯ä»¥å®Œå…¨æ›¿æ¢çˆ¶ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œåªæ‰©å±•æ–°åŠŸèƒ½ï¼Œè€Œä¸è¦ç ´åçˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚</li><li>ä¾èµ–å€’ç½®åŸåˆ™ Dependence Inversion Principleï¼šç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼ŒæŠ½è±¡ä¸åº”ä¾èµ–äºç»†èŠ‚ã€‚æŠŠæŠ½è±¡å±‚æ”¾åœ¨ç¨‹åºè®¾è®¡çš„é«˜å±‚ï¼Œå¹¶ä¿æŒç¨³å®šï¼Œç¨‹åºçš„ç»†èŠ‚å˜åŒ–ç”±ä½å±‚çš„å®ç°å±‚æ¥å®Œæˆã€‚</li><li>è¿ªç±³ç‰¹æ³•åˆ™ Law of Demeter ï¼ˆæœ€å°‘çŸ¥è¯†åŸåˆ™ Least Knowledge Principleï¼‰ï¼šåˆåã€Œæœ€å°‘çŸ¥é“åŸåˆ™ã€ï¼Œä¸€ä¸ªç±»ä¸åº”çŸ¥é“è‡ªå·±æ“ä½œçš„ç±»çš„ç»†èŠ‚ï¼Œæ¢è¨€ä¹‹ï¼Œåªå’Œæœ‹å‹è°ˆè¯ï¼Œä¸å’Œæœ‹å‹çš„æœ‹å‹è°ˆè¯ã€‚</li><li>æ¥å£éš”ç¦»åŸåˆ™ Interface segregation Principleï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚å¦‚æœä¸€ä¸ªæ¥å£åœ¨å®ç°æ—¶ï¼Œéƒ¨åˆ†æ–¹æ³•ç”±äºå†—ä½™è¢«å®¢æˆ·ç«¯ç©ºå®ç°ï¼Œåˆ™åº”è¯¥å°†æ¥å£æ‹†åˆ†ï¼Œè®©å®ç°ç±»åªéœ€ä¾èµ–è‡ªå·±éœ€è¦çš„æ¥å£æ–¹æ³•ã€‚</li></ul><p>æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸ºäº†ç¨‹åºèƒ½æ›´å¥½çš„æ»¡è¶³è¿™å…­å¤§åŸåˆ™ã€‚è®¾è®¡æ¨¡å¼ä¸€å…±æœ‰ 23 ç§ï¼Œä»Šå¤©æˆ‘ä»¬å…ˆæ¥å­¦ä¹ æ„å»ºå‹æ¨¡å¼ï¼Œä¸€å…±äº”ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>å·¥å‚æ–¹æ³•æ¨¡å¼</li><li>æŠ½è±¡å·¥å‚æ¨¡å¼</li><li>å•ä¾‹æ¨¡å¼</li><li>å»ºé€ å‹æ¨¡å¼</li><li>åŸå‹æ¨¡å¼</li></ul><h2 id="ä¸€ã€å·¥å‚æ¨¡å¼"><a href="#ä¸€ã€å·¥å‚æ¨¡å¼" class="headerlink" title="ä¸€ã€å·¥å‚æ¨¡å¼"></a>ä¸€ã€å·¥å‚æ¨¡å¼</h2><blockquote><p>Factory Method<br>    Provides an abstraction or an interface and lets subclass or implementing classes decide which class or method should be     instantiated or called, based on the conditions or parameters given.</p></blockquote><p>åœ¨å¹³æ—¶ç¼–ç¨‹ä¸­ï¼Œæ„å»ºå¯¹è±¡æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ new ä¸€ä¸ªå¯¹è±¡ã€‚ä¹ä¸€çœ‹è¿™ç§åšæ³•æ²¡ä»€ä¹ˆä¸å¥½ï¼Œè€Œå®é™…ä¸Šè¿™ä¹Ÿå±äºä¸€ç§ç¡¬ç¼–ç ã€‚æ¯ new ä¸€ä¸ªå¯¹è±¡ï¼Œç›¸å½“äºè°ƒç”¨è€…å¤šçŸ¥é“äº†ä¸€ä¸ªç±»ï¼Œå¢åŠ äº†ç±»ä¸ç±»ä¹‹é—´çš„è”ç³»ï¼Œä¸åˆ©äºç¨‹åºçš„æ¾è€¦åˆã€‚å…¶å®æ„å»ºè¿‡ç¨‹å¯ä»¥è¢«å°è£…èµ·æ¥ï¼Œå·¥å‚æ¨¡å¼ä¾¿æ˜¯ç”¨äºå°è£…å¯¹è±¡çš„è®¾è®¡æ¨¡å¼ã€‚</p><h3 id="1-1-ç®€å•å·¥å‚æ¨¡å¼"><a href="#1-1-ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="1.1.ç®€å•å·¥å‚æ¨¡å¼"></a>1.1.ç®€å•å·¥å‚æ¨¡å¼</h3><blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œç›´æ¥ new å¯¹è±¡çš„æ–¹å¼ç›¸å½“äºå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‹¹æœæ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è‹¹æœçš„æ„é€ æ–¹æ³•ï¼Œéœ€è¦ä¸€ä¸ªæ¢¨å­æ—¶ï¼Œéœ€è¦çŸ¥é“æ¢¨å­çš„æ„é€ æ–¹æ³•ã€‚æ›´å¥½çš„å®ç°æ–¹å¼æ˜¯æœ‰ä¸€ä¸ªæ°´æœå·¥å‚ï¼Œæˆ‘ä»¬å‘Šè¯‰å·¥å‚éœ€è¦ä»€ä¹ˆç§ç±»çš„æ°´æœï¼Œæ°´æœå·¥å‚å°†æˆ‘ä»¬éœ€è¦çš„æ°´æœåˆ¶é€ å‡ºæ¥ç»™æˆ‘ä»¬å°±å¯ä»¥äº†ã€‚è¿™æ ·æˆ‘ä»¬å°±æ— éœ€çŸ¥é“è‹¹æœã€æ¢¨å­æ˜¯æ€ä¹ˆç§å‡ºæ¥çš„ï¼Œåªç”¨å’Œæ°´æœå·¥å‚æ‰“äº¤é“å³å¯ã€‚</p></blockquote><p>æ°´æœå·¥å‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"è‹¹æœ"</span>: <span class="keyword">return</span> <span class="keyword">new</span> Apple();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"æ¢¨å­"</span>: <span class="keyword">return</span> <span class="keyword">new</span> Pear();</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"æš‚æ—¶æ²¡æœ‰è¿™ç§æ°´æœ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨è€…ï¼š</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FruitFactory fruitFactory = <span class="keyword">new</span> FruitFactory();</span><br><span class="line">        Fruit apple = fruitFactory.create(<span class="string">"è‹¹æœ"</span>);</span><br><span class="line">        Fruit pear = fruitFactory.create(<span class="string">"æ¢¨å­"</span>);</span><br><span class="line">        apple.eat();</span><br><span class="line">        pear.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>äº‹å®ä¸Šï¼Œå°†æ„å»ºè¿‡ç¨‹å°è£…çš„å¥½å¤„ä¸ä»…å¯ä»¥é™ä½è€¦åˆï¼Œå¦‚æœæŸä¸ªäº§å“æ„é€ æ–¹æ³•ç›¸å½“å¤æ‚ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼å¯ä»¥å¤§å¤§å‡å°‘ä»£ç é‡å¤ã€‚æ¯”å¦‚ï¼Œå¦‚æœç”Ÿäº§ä¸€ä¸ªè‹¹æœéœ€è¦è‹¹æœç§å­ã€é˜³å…‰ã€æ°´åˆ†ï¼Œå°†å·¥å‚ä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"è‹¹æœ"</span>:</span><br><span class="line">                AppleSeed appleSeed = <span class="keyword">new</span> AppleSeed();</span><br><span class="line">                Sunlight sunlight = <span class="keyword">new</span> Sunlight();</span><br><span class="line">                Water water = <span class="keyword">new</span> Water();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Apple(appleSeed, sunlight, water);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"æ¢¨å­"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Pear();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"æš‚æ—¶æ²¡æœ‰è¿™ç§æ°´æœ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨è€…çš„ä»£ç åˆ™å®Œå…¨ä¸éœ€è¦å˜åŒ–ï¼Œè€Œä¸”è°ƒç”¨è€…ä¸éœ€è¦åœ¨æ¯æ¬¡éœ€è¦è‹¹æœæ—¶ï¼Œè‡ªå·±å»æ„å»ºè‹¹æœç§å­ã€é˜³å…‰ã€æ°´åˆ†ä»¥è·å¾—è‹¹æœã€‚è‹¹æœçš„ç”Ÿäº§è¿‡ç¨‹å†å¤æ‚ï¼Œä¹Ÿåªæ˜¯å·¥å‚çš„äº‹ã€‚è¿™å°±æ˜¯å°è£…çš„å¥½å¤„ï¼Œå‡å¦‚æŸå¤©ç§‘å­¦å®¶å‘æ˜äº†è®©è‹¹æœæ›´é¦™ç”œçš„è‚¥æ–™ï¼Œè¦åŠ å…¥è‹¹æœçš„ç”Ÿäº§è¿‡ç¨‹ä¸­çš„è¯ï¼Œä¹Ÿåªéœ€è¦åœ¨å·¥å‚ä¸­ä¿®æ”¹ï¼Œè°ƒç”¨è€…å®Œå…¨ä¸ç”¨å…³å¿ƒã€‚</p><p>ä¸çŸ¥ä¸è§‰ä¸­ï¼Œæˆ‘ä»¬å°±å†™å‡ºäº†ç®€å•å·¥å‚æ¨¡å¼çš„ä»£ç ã€‚å·¥å‚æ¨¡å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</p><ul><li>ç®€å•å·¥å‚æ¨¡å¼</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼</li><li>æŠ½è±¡å·¥å‚æ¨¡å¼</li></ul><p>æ³¨ï¼šåœ¨ GoF æ‰€è‘—çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œç®€å•å·¥å‚æ¨¡å¼è¢«åˆ’åˆ†ä¸ºå·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ï¼Œæ²¡æœ‰å•ç‹¬è¢«åˆ—å‡ºæ¥ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œç®€å•å·¥å‚æ¨¡å¼å°±æ˜¯è®©ä¸€ä¸ªå·¥å‚ç±»æ‰¿æ‹…æ„å»ºæ‰€æœ‰å¯¹è±¡çš„èŒè´£ã€‚è°ƒç”¨è€…éœ€è¦ä»€ä¹ˆäº§å“ï¼Œè®©å·¥å‚ç”Ÿäº§å‡ºæ¥å³å¯ã€‚å®ƒçš„å¼Šç«¯ä¹Ÿæ˜¾è€Œæ˜“è§ï¼š</p><p>ä¸€æ˜¯å¦‚æœéœ€è¦ç”Ÿäº§çš„äº§å“è¿‡å¤šï¼Œæ­¤æ¨¡å¼ä¼šå¯¼è‡´å·¥å‚ç±»è¿‡äºåºå¤§ï¼Œæ‰¿æ‹…è¿‡å¤šçš„èŒè´£ï¼Œå˜æˆè¶…çº§ç±»ã€‚å½“è‹¹æœç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œè¦æ¥ä¿®æ”¹æ­¤å·¥å‚ã€‚æ¢¨å­ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œä¹Ÿè¦æ¥ä¿®æ”¹æ­¤å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç±»ä¸æ­¢ä¸€ä¸ªå¼•èµ·ä¿®æ”¹çš„åŸå› ã€‚è¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ã€‚<br>äºŒæ˜¯å½“è¦ç”Ÿäº§æ–°çš„äº§å“æ—¶ï¼Œå¿…é¡»åœ¨å·¥å‚ç±»ä¸­æ·»åŠ æ–°çš„åˆ†æ”¯ã€‚è€Œå¼€é—­åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼šç±»åº”è¯¥å¯¹ä¿®æ”¹å°é—­ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€å¢åŠ æ–°çš„ç±»ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—¢æœ‰çš„ç±»ï¼Œæ‰€ä»¥è¿™å°±è¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚</p><h3 id="1-2-å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#1-2-å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="1.2.å·¥å‚æ–¹æ³•æ¨¡å¼"></a>1.2.å·¥å‚æ–¹æ³•æ¨¡å¼</h3><blockquote><p>ä¸ºäº†è§£å†³ç®€å•å·¥å‚æ¨¡å¼çš„è¿™ä¸¤ä¸ªå¼Šç«¯ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œå®ƒè§„å®šæ¯ä¸ªäº§å“éƒ½æœ‰ä¸€ä¸ªä¸“å±å·¥å‚ã€‚æ¯”å¦‚è‹¹æœæœ‰ä¸“å±çš„è‹¹æœå·¥å‚ï¼Œæ¢¨å­æœ‰ä¸“å±çš„æ¢¨å­å·¥å‚ï¼ŒJava ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><p>è‹¹æœå·¥å‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppleFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Apple();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¢¨å­å·¥å‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PearFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨è€…ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AppleFactory appleFactory = <span class="keyword">new</span> AppleFactory();</span><br><span class="line">        Fruit apple = appleFactory.create();</span><br><span class="line">        PearFactory pearFactory = <span class="keyword">new</span> PearFactory();</span><br><span class="line">        Fruit pear = pearFactory.create();</span><br><span class="line">        apple.eat();</span><br><span class="line">        pear.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰è¯»è€…å¯èƒ½ä¼šå¼€å–·äº†ï¼Œè¿™æ ·å’Œç›´æ¥ new å‡ºè‹¹æœå’Œæ¢¨å­æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸Šæ–‡è¯´å·¥å‚æ˜¯ä¸ºäº†å‡å°‘ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆï¼Œè®©è°ƒç”¨è€…å°½å¯èƒ½å°‘çš„å’Œå…¶ä»–ç±»æ‰“äº¤é“ã€‚ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ FruitFactoryï¼Œæ— éœ€çŸ¥é“ Apple ã€Pear ç±»ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºè€¦åˆåº¦é™ä½äº†ã€‚ä½†ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œè°ƒç”¨è€…è™½ç„¶ä¸éœ€è¦å’Œ Apple ã€Pear ç±»æ‰“äº¤é“äº†ï¼Œä½†å´éœ€è¦å’Œ AppleFactoryã€PearFactory ç±»æ‰“äº¤é“ã€‚æœ‰å‡ ç§æ°´æœå°±éœ€è¦çŸ¥é“å‡ ä¸ªå·¥å‚ç±»ï¼Œè€¦åˆåº¦å®Œå…¨æ²¡æœ‰ä¸‹é™å•Šï¼Œç”šè‡³è¿˜å¢åŠ äº†ä»£ç é‡ï¼</p><p>è¿™ä½è¯»è€…è¯·å…ˆæ”¾ä¸‹æ‰‹ä¸­çš„å¤§åˆ€ï¼Œä»”ç»†æƒ³ä¸€æƒ³ï¼Œå·¥å‚æ¨¡å¼çš„ç¬¬äºŒä¸ªä¼˜ç‚¹åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­è¿˜æ˜¯å­˜åœ¨çš„ã€‚å½“æ„å»ºè¿‡ç¨‹ç›¸å½“å¤æ‚æ—¶ï¼Œå·¥å‚å°†æ„å»ºè¿‡ç¨‹å°è£…èµ·æ¥ï¼Œè°ƒç”¨è€…å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥ä½¿ç”¨ï¼ŒåŒæ ·ä»¥è‹¹æœç”Ÿäº§ä¸ºä¾‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppleFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AppleSeed appleSeed = <span class="keyword">new</span> AppleSeed();</span><br><span class="line">        Sunlight sunlight = <span class="keyword">new</span> Sunlight();</span><br><span class="line">        Water water = <span class="keyword">new</span> Water();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Apple(appleSeed, sunlight, water);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨è€…æ— éœ€çŸ¥é“è‹¹æœçš„ç”Ÿäº§ç»†èŠ‚ï¼Œå½“ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ä¹Ÿæ— éœ€æ›´æ”¹è°ƒç”¨ç«¯ã€‚åŒæ—¶ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼è§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼çš„ä¸¤ä¸ªå¼Šç«¯ã€‚</p><p>å½“ç”Ÿäº§çš„äº§å“ç§ç±»è¶Šæ¥è¶Šå¤šæ—¶ï¼Œå·¥å‚ç±»ä¸ä¼šå˜æˆè¶…çº§ç±»ã€‚å·¥å‚ç±»ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¿æŒçµæ´»ã€‚ä¸ä¼šè¶Šæ¥è¶Šå¤§ã€å˜å¾—è‡ƒè‚¿ã€‚å¦‚æœè‹¹æœçš„ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œåªéœ€ä¿®æ”¹è‹¹æœå·¥å‚ã€‚æ¢¨å­çš„ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œåªéœ€ä¿®æ”¹æ¢¨å­å·¥å‚ã€‚ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚</p><p>å½“éœ€è¦ç”Ÿäº§æ–°çš„äº§å“æ—¶ï¼Œæ— éœ€æ›´æ”¹æ—¢æœ‰çš„å·¥å‚ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„å·¥å‚å³å¯ã€‚ä¿æŒäº†é¢å‘å¯¹è±¡çš„å¯æ‰©å±•æ€§ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p><h3 id="1-3-æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#1-3-æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="1.3.æŠ½è±¡å·¥å‚æ¨¡å¼"></a>1.3.æŠ½è±¡å·¥å‚æ¨¡å¼</h3><blockquote><p>Abstract Factory<br>    Provides one level of interface higher than the factory pattern. It is used to return one of several factories.</p></blockquote><blockquote><p>å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæå–å‡ºå·¥å‚æ¥å£ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">Fruit <span class="title">create</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè‹¹æœå·¥å‚å’Œæ¢¨å­å·¥å‚éƒ½å®ç°æ­¤æ¥å£ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppleFactory</span> <span class="keyword">implements</span> <span class="title">IFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Apple();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PearFactory</span> <span class="keyword">implements</span> <span class="title">IFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Fruit <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ï¼Œè°ƒç”¨è€…å¯ä»¥å°† AppleFactory å’Œ PearFactory ç»Ÿä¸€ä½œä¸º IFactory å¯¹è±¡ä½¿ç”¨ï¼Œè°ƒç”¨è€… Java ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        IFactory appleFactory = <span class="keyword">new</span> AppleFactory();</span><br><span class="line">        Fruit apple = appleFactory.create();</span><br><span class="line">        IFactory pearFactory = <span class="keyword">new</span> PearFactory();</span><br><span class="line">        Fruit pear = pearFactory.create();</span><br><span class="line">        apple.eat();</span><br><span class="line">        pear.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæ—¶æŒ‡å®šäº†å…·ä½“çš„å·¥å‚ç±»åï¼Œåœ¨ä½¿ç”¨æ—¶å°±æ— éœ€å†å…³å¿ƒæ˜¯å“ªä¸ªå·¥å‚ç±»ï¼Œåªéœ€è¦å°†æ­¤å·¥å‚å½“ä½œæŠ½è±¡çš„ IFactory æ¥å£ä½¿ç”¨å³å¯ã€‚è¿™ç§ç»è¿‡æŠ½è±¡çš„å·¥å‚æ–¹æ³•æ¨¡å¼è¢«ç§°ä½œæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p><p>ç”±äºå®¢æˆ·ç«¯åªå’Œ IFactory æ‰“äº¤é“äº†ï¼Œè°ƒç”¨çš„æ˜¯æ¥å£ä¸­çš„æ–¹æ³•ï¼Œä½¿ç”¨æ—¶æ ¹æœ¬ä¸éœ€è¦çŸ¥é“æ˜¯åœ¨å“ªä¸ªå…·ä½“å·¥å‚ä¸­å®ç°çš„è¿™äº›æ–¹æ³•ï¼Œè¿™å°±ä½¿å¾—æ›¿æ¢å·¥å‚å˜å¾—éå¸¸å®¹æ˜“ã€‚</p><p>ä¾‹å¦‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        IFactory factory = <span class="keyword">new</span> AppleFactory();</span><br><span class="line">        Fruit fruit = factory.create();</span><br><span class="line">        fruit.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœéœ€è¦æ›¿æ¢ä¸ºåƒæ¢¨å­ï¼Œåªéœ€è¦æ›´æ”¹ä¸€è¡Œä»£ç å³å¯ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        IFactory factory = <span class="keyword">new</span> PearFactory();</span><br><span class="line">        Fruit fruit = factory.create();</span><br><span class="line">        fruit.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>IFactory ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•æ—¶ï¼Œæˆ–è®¸è¿˜çœ‹ä¸å‡ºæŠ½è±¡å·¥å‚æ¨¡å¼çš„å¨åŠ›ã€‚å®é™…ä¸ŠæŠ½è±¡å·¥å‚æ¨¡å¼ä¸»è¦ç”¨äºæ›¿æ¢ä¸€ç³»åˆ—æ–¹æ³•ã€‚ä¾‹å¦‚å°†ç¨‹åºä¸­çš„ SQL Server æ•°æ®åº“æ•´ä¸ªæ›¿æ¢ä¸º Access æ•°æ®åº“ï¼Œä½¿ç”¨æŠ½è±¡æ–¹æ³•æ¨¡å¼çš„è¯ï¼Œåªéœ€åœ¨ IFactory æ¥å£ä¸­å®šä¹‰å¥½å¢åˆ æ”¹æŸ¥å››ä¸ªæ–¹æ³•ï¼Œè®© SQLFactory å’Œ AccessFactory å®ç°æ­¤æ¥å£ï¼Œè°ƒç”¨æ—¶ç›´æ¥ä½¿ç”¨ IFactory ä¸­çš„æŠ½è±¡æ–¹æ³•å³å¯ï¼Œè°ƒç”¨è€…æ— éœ€çŸ¥é“ä½¿ç”¨çš„ä»€ä¹ˆæ•°æ®åº“ï¼Œæˆ‘ä»¬å°±å¯ä»¥éå¸¸æ–¹ä¾¿çš„æ•´ä¸ªæ›¿æ¢ç¨‹åºçš„æ•°æ®åº“ï¼Œå¹¶ä¸”è®©å®¢æˆ·ç«¯æ¯«ä¸çŸ¥æƒ…ã€‚</p><blockquote><p>æŠ½è±¡å·¥å‚æ¨¡å¼å¾ˆå¥½çš„å‘æŒ¥äº†å¼€é—­åŸåˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™ï¼Œä½†ç¼ºç‚¹æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼å¤ªé‡äº†ï¼Œå¦‚æœ IFactory æ¥å£éœ€è¦æ–°å¢åŠŸèƒ½ï¼Œåˆ™ä¼šå½±å“åˆ°æ‰€æœ‰çš„å…·ä½“å·¥å‚ç±»ã€‚ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œæ›¿æ¢å…·ä½“å·¥å‚æ—¶åªéœ€æ›´æ”¹ä¸€è¡Œä»£ç ï¼Œä½†è¦æ–°å¢æŠ½è±¡æ–¹æ³•åˆ™éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å…·ä½“å·¥å‚ç±»ã€‚æ‰€ä»¥æŠ½è±¡å·¥å‚æ¨¡å¼é€‚ç”¨äºå¢åŠ åŒç±»å·¥å‚è¿™æ ·çš„æ¨ªå‘æ‰©å±•éœ€æ±‚ï¼Œä¸é€‚åˆæ–°å¢åŠŸèƒ½è¿™æ ·çš„çºµå‘æ‰©å±•ã€‚</p></blockquote><h2 id="äºŒã€å•ä¾‹æ¨¡å¼"><a href="#äºŒã€å•ä¾‹æ¨¡å¼" class="headerlink" title="äºŒã€å•ä¾‹æ¨¡å¼"></a>äºŒã€å•ä¾‹æ¨¡å¼</h2><blockquote><p>Singleton<br>    One instance of a class or one value accessible globally in an application.</p></blockquote><blockquote><p>å•ä¾‹æ¨¡å¼éå¸¸å¸¸è§ï¼ŒæŸä¸ªå¯¹è±¡å…¨å±€åªéœ€è¦ä¸€ä¸ªå®ä¾‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼š</p></blockquote><ul><li>å®ƒèƒ½å¤Ÿé¿å…å¯¹è±¡é‡å¤åˆ›å»ºï¼ŒèŠ‚çº¦ç©ºé—´å¹¶æå‡æ•ˆç‡</li><li>é¿å…ç”±äºæ“ä½œä¸åŒå®ä¾‹å¯¼è‡´çš„é€»è¾‘é”™è¯¯</li></ul><p>å•ä¾‹æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šé¥¿æ±‰å¼å’Œæ‡’æ±‰å¼ã€‚</p><h3 id="2-1-é¥¿æ±‰å¼"><a href="#2-1-é¥¿æ±‰å¼" class="headerlink" title="2.1.é¥¿æ±‰å¼"></a>2.1.é¥¿æ±‰å¼</h3><blockquote><p>é¥¿æ±‰å¼ï¼šå˜é‡åœ¨å£°æ˜æ—¶ä¾¿åˆå§‹åŒ–ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†æ„é€ æ–¹æ³•å®šä¹‰ä¸º privateï¼Œè¿™å°±ä¿è¯äº†å…¶ä»–ç±»æ— æ³•å®ä¾‹åŒ–æ­¤ç±»ï¼Œå¿…é¡»é€šè¿‡ getInstance æ–¹æ³•æ‰èƒ½è·å–åˆ°å”¯ä¸€çš„ instance å®ä¾‹ï¼Œéå¸¸ç›´è§‚ã€‚ä½†é¥¿æ±‰å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯å³ä½¿è¿™ä¸ªå•ä¾‹ä¸éœ€è¦ä½¿ç”¨ï¼Œå®ƒä¹Ÿä¼šåœ¨ç±»åŠ è½½ä¹‹åç«‹å³åˆ›å»ºå‡ºæ¥ï¼Œå ç”¨ä¸€å—å†…å­˜ï¼Œå¹¶å¢åŠ ç±»åˆå§‹åŒ–æ—¶é—´ã€‚å°±å¥½æ¯”ä¸€ä¸ªç”µå·¥åœ¨ä¿®ç†ç¯æ³¡æ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰å·¥å…·æ‹¿å‡ºæ¥ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æ‰€æœ‰çš„å·¥å…·éƒ½ç”¨å¾—ä¸Šã€‚å°±åƒä¸€ä¸ªé¥¥ä¸æ‹©é£Ÿçš„é¥¿æ±‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºé¥¿æ±‰å¼ã€‚</p><h3 id="2-2-æ‡’æ±‰å¼"><a href="#2-2-æ‡’æ±‰å¼" class="headerlink" title="2.2.æ‡’æ±‰å¼"></a>2.2.æ‡’æ±‰å¼</h3><blockquote><p>æ‡’æ±‰å¼ï¼šå…ˆå£°æ˜ä¸€ä¸ªç©ºå˜é‡ï¼Œéœ€è¦ç”¨æ—¶æ‰åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><p>æˆ‘ä»¬å…ˆå£°æ˜äº†ä¸€ä¸ªåˆå§‹å€¼ä¸º null çš„ instance å˜é‡ï¼Œå½“éœ€è¦ä½¿ç”¨æ—¶åˆ¤æ–­æ­¤å˜é‡æ˜¯å¦å·²è¢«åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–çš„è¯æ‰ new ä¸€ä¸ªå®ä¾‹å‡ºæ¥ã€‚å°±å¥½æ¯”ç”µå·¥åœ¨ä¿®ç†ç¯æ³¡æ—¶ï¼Œå¼€å§‹æ¯”è¾ƒå·æ‡’ï¼Œä»€ä¹ˆå·¥å…·éƒ½ä¸æ‹¿ï¼Œå½“å‘ç°éœ€è¦ä½¿ç”¨èºä¸åˆ€æ—¶ï¼Œæ‰æŠŠèºä¸åˆ€æ‹¿å‡ºæ¥ã€‚å½“éœ€è¦ç”¨é’³å­æ—¶ï¼Œå†æŠŠé’³å­æ‹¿å‡ºæ¥ã€‚å°±åƒä¸€ä¸ªä¸åˆ°ä¸‡ä¸å¾—å·²ä¸ä¼šè¡ŒåŠ¨çš„æ‡’æ±‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºæ‡’æ±‰å¼ã€‚</p><blockquote><p>æ‡’æ±‰å¼è§£å†³äº†é¥¿æ±‰å¼çš„å¼Šç«¯ï¼Œå¥½å¤„æ˜¯æŒ‰éœ€åŠ è½½ï¼Œé¿å…äº†å†…å­˜æµªè´¹ï¼Œå‡å°‘äº†ç±»åˆå§‹åŒ–æ—¶é—´ã€‚</p></blockquote><p>ä¸Šè¿°ä»£ç çš„æ‡’æ±‰å¼å•ä¾‹ä¹ä¸€çœ‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å…¶å®å®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒä¸€æ—¶é—´è°ƒç”¨ getInstance æ–¹æ³•ï¼Œinstance å˜é‡å¯èƒ½ä¼šè¢«å®ä¾‹åŒ–å¤šæ¬¡ã€‚ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™åˆ¤ç©ºè¿‡ç¨‹åŠ ä¸Šé”ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±èƒ½ä¿è¯å¤šä¸ªçº¿ç¨‹è°ƒç”¨ getInstance æ—¶ï¼Œä¸€æ¬¡æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡Œåˆ¤ç©ºå¹¶ new å‡ºå®ä¾‹çš„æ“ä½œï¼Œæ‰€ä»¥ instance åªä¼šå®ä¾‹åŒ–ä¸€æ¬¡ã€‚ä½†è¿™æ ·çš„å†™æ³•ä»ç„¶æœ‰é—®é¢˜ï¼Œå½“å¤šä¸ªçº¿ç¨‹è°ƒç”¨ getInstance æ—¶ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰§è¡Œ synchronized åŒæ­¥åŒ–æ–¹æ³•ï¼Œè¿™æ ·ä¼šä¸¥é‡å½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚æ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯åœ¨åŒæ­¥åŒ–ä¹‹å‰ï¼Œå†åŠ ä¸Šä¸€å±‚æ£€æŸ¥ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™æ ·å¢åŠ ä¸€ç§æ£€æŸ¥æ–¹å¼åï¼Œå¦‚æœ instance å·²ç»è¢«å®ä¾‹åŒ–ï¼Œåˆ™ä¸ä¼šæ‰§è¡ŒåŒæ­¥åŒ–æ“ä½œï¼Œå¤§å¤§æå‡äº†ç¨‹åºæ•ˆç‡ã€‚ä¸Šé¢è¿™ç§å†™æ³•ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¾ƒå¸¸ç”¨çš„åŒæ£€é”æ–¹å¼å®ç°çš„çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ã€‚</p></blockquote><blockquote><p>é™¤äº†åŒæ£€é”æ–¹å¼å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ¯”è¾ƒå¸¸è§çš„é™æ€å†…éƒ¨ç±»æ–¹å¼ä¿è¯æ‡’æ±‰å¼å•ä¾‹çš„çº¿ç¨‹å®‰å…¨ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><p>è™½ç„¶æˆ‘ä»¬ç»å¸¸ä½¿ç”¨è¿™ç§é™æ€å†…éƒ¨ç±»çš„æ‡’åŠ è½½æ–¹å¼ï¼Œä½†å…¶ä¸­çš„åŸç†ä¸ä¸€å®šæ¯ä¸ªäººéƒ½æ¸…æ¥šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿æ¥åˆ†æå…¶åŸç†ï¼Œææ¸…æ¥šä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>é™æ€å†…éƒ¨ç±»æ–¹å¼æ˜¯æ€ä¹ˆå®ç°æ‡’åŠ è½½çš„</li><li>é™æ€å†…éƒ¨ç±»æ–¹å¼æ˜¯æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨çš„</li></ul><p>Java ç±»çš„åŠ è½½è¿‡ç¨‹åŒ…æ‹¬ï¼šåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€‚åˆå§‹åŒ–é˜¶æ®µå³æ‰§è¡Œç±»çš„ clinit æ–¹æ³•ï¼ˆclinit = class + initializeï¼‰ï¼ŒåŒ…æ‹¬ä¸ºç±»çš„é™æ€å˜é‡èµ‹åˆå§‹å€¼å’Œæ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„å†…å®¹ã€‚ä½†ä¸ä¼šç«‹å³åŠ è½½å†…éƒ¨ç±»ï¼Œå†…éƒ¨ç±»ä¼šåœ¨ä½¿ç”¨æ—¶æ‰åŠ è½½ã€‚æ‰€ä»¥å½“æ­¤ Singleton ç±»åŠ è½½æ—¶ï¼ŒSingletonHolder å¹¶ä¸ä¼šè¢«ç«‹å³åŠ è½½ï¼Œæ‰€ä»¥ä¸ä¼šåƒé¥¿æ±‰å¼é‚£æ ·å ç”¨å†…å­˜ã€‚</p><p>å¦å¤–ï¼ŒJava è™šæ‹Ÿæœºè§„å®šï¼Œå½“è®¿é—®ä¸€ä¸ªç±»çš„é™æ€å­—æ®µæ—¶ï¼Œå¦‚æœè¯¥ç±»å°šæœªåˆå§‹åŒ–ï¼Œåˆ™ç«‹å³åˆå§‹åŒ–æ­¤ç±»ã€‚å½“è°ƒç”¨Singleton çš„ getInstance æ–¹æ³•æ—¶ï¼Œç”±äºå…¶ä½¿ç”¨äº† SingletonHolder çš„é™æ€å˜é‡ instanceï¼Œæ‰€ä»¥è¿™æ—¶æ‰ä¼šå»åˆå§‹åŒ– SingletonHolderï¼Œåœ¨ SingletonHolder ä¸­ new å‡º Singleton å¯¹è±¡ã€‚è¿™å°±å®ç°äº†æ‡’åŠ è½½ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ Java è™šæ‹Ÿæœºçš„è®¾è®¡æ˜¯éå¸¸ç¨³å®šçš„ï¼Œæ—©å·²ç»è€ƒè™‘åˆ°äº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æƒ…å†µã€‚è™šæ‹Ÿæœºåœ¨åŠ è½½ç±»çš„ clinit æ–¹æ³•æ—¶ï¼Œä¼šä¿è¯ clinit åœ¨å¤šçº¿ç¨‹ä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ã€‚å³ä½¿æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œä¸€æ¬¡ä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œ clinit æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œä»è€Œä¿è¯äº†çº¿ç¨‹å®‰å…¨ã€‚</p><p>æ‡’åŠ è½½æ–¹å¼åœ¨å¹³æ—¶éå¸¸å¸¸è§ï¼Œæ¯”å¦‚æ‰“å¼€æˆ‘ä»¬å¸¸ç”¨çš„ç¾å›¢ã€é¥¿äº†ä¹ˆã€æ”¯ä»˜å® appï¼Œåº”ç”¨é¦–é¡µä¼šç«‹åˆ»åˆ·æ–°å‡ºæ¥ï¼Œä½†å…¶ä»–æ ‡ç­¾é¡µåœ¨æˆ‘ä»¬ç‚¹å‡»åˆ°æ—¶æ‰ä¼šåˆ·æ–°ã€‚è¿™æ ·å°±å‡å°‘äº†æµé‡æ¶ˆè€—ï¼Œå¹¶ç¼©çŸ­äº†ç¨‹åºå¯åŠ¨æ—¶é—´ã€‚å†æ¯”å¦‚æ¸¸æˆä¸­çš„æŸäº›æ¨¡å—ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»åˆ°æ—¶æ‰ä¼šå»ä¸‹è½½èµ„æºï¼Œè€Œä¸æ˜¯äº‹å…ˆå°†æ‰€æœ‰èµ„æºéƒ½å…ˆä¸‹è½½ä¸‹æ¥ï¼Œè¿™ä¹Ÿå±äºæ‡’åŠ è½½æ–¹å¼ï¼Œé¿å…äº†å†…å­˜æµªè´¹ã€‚</p><p>ä½†æ‡’æ±‰å¼çš„ç¼ºç‚¹å°±æ˜¯å°†ç¨‹åºåŠ è½½æ—¶é—´ä»å¯åŠ¨æ—¶å»¶ååˆ°äº†è¿è¡Œæ—¶ï¼Œè™½ç„¶å¯åŠ¨æ—¶é—´ç¼©çŸ­äº†ï¼Œä½†æˆ‘ä»¬æµè§ˆé¡µé¢æ—¶å°±ä¼šçœ‹åˆ°æ•°æ®çš„ loading è¿‡ç¨‹ã€‚å¦‚æœç”¨é¥¿æ±‰å¼å°†é¡µé¢æå‰åŠ è½½å¥½ï¼Œæˆ‘ä»¬æµè§ˆæ—¶å°±ä¼šç‰¹åˆ«çš„é¡ºç•…ï¼Œä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ QQã€å¾®ä¿¡ appï¼Œä½œä¸ºå³æ—¶é€šè®¯çš„å·¥å…·è½¯ä»¶ï¼Œå®ƒä»¬ä¼šåœ¨å¯åŠ¨æ—¶ç«‹å³åˆ·æ–°æ‰€æœ‰çš„æ•°æ®ï¼Œä¿è¯ç”¨æˆ·çœ‹åˆ°æœ€æ–°æœ€å…¨çš„å†…å®¹ã€‚è‘—åçš„è½¯ä»¶å¤§å¸ˆ Martin åœ¨ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ä¸€ä¹¦ä¸­ä¹Ÿè¯´åˆ°ï¼šä¸æå€¡ä½¿ç”¨æ‡’åŠ è½½æ–¹å¼ï¼Œå› ä¸ºç¨‹åºåº”è¯¥å°†æ„å»ºä¸ä½¿ç”¨åˆ†ç¦»ï¼Œè¾¾åˆ°è§£è€¦ã€‚é¥¿æ±‰å¼åœ¨å£°æ˜æ—¶ç›´æ¥åˆå§‹åŒ–å˜é‡çš„æ–¹å¼ä¹Ÿæ›´ç›´è§‚æ˜“æ‡‚ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨é¥¿æ±‰å¼è¿˜æ˜¯æ‡’æ±‰å¼æ—¶ï¼Œéœ€è¦æƒè¡¡åˆ©å¼Šã€‚</p><p>ä¸€èˆ¬çš„å»ºè®®æ˜¯ï¼šå¯¹äºæ„å»ºä¸å¤æ‚ï¼ŒåŠ è½½å®Œæˆåä¼šç«‹å³ä½¿ç”¨çš„å•ä¾‹å¯¹è±¡ï¼Œæ¨èä½¿ç”¨é¥¿æ±‰å¼ã€‚å¯¹äºæ„å»ºè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ä½¿ç”¨æ­¤ç±»éƒ½ä¼šç”¨åˆ°çš„å•ä¾‹å¯¹è±¡ï¼Œæ¨èä½¿ç”¨æ‡’æ±‰å¼ã€‚</p><h2 id="ä¸‰ã€å»ºé€ å‹æ¨¡å¼"><a href="#ä¸‰ã€å»ºé€ å‹æ¨¡å¼" class="headerlink" title="ä¸‰ã€å»ºé€ å‹æ¨¡å¼"></a>ä¸‰ã€å»ºé€ å‹æ¨¡å¼</h2><blockquote><p>Builder<br>    Construct a complex object from simple objects step by step.</p></blockquote><blockquote><p>å»ºé€ å‹æ¨¡å¼ç”¨äºåˆ›å»ºè¿‡ç¨‹ç¨³å®šï¼Œä½†é…ç½®å¤šå˜çš„å¯¹è±¡ã€‚åœ¨ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­çš„å®šä¹‰æ˜¯ï¼šå°†ä¸€ä¸ªå¤æ‚çš„æ„å»ºä¸å…¶è¡¨ç¤ºç›¸åˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p></blockquote><p>ç»å…¸çš„ã€Œå»ºé€ è€…-æŒ‡æŒ¥è€…ã€æ¨¡å¼ç°åœ¨å·²ç»ä¸å¤ªå¸¸ç”¨äº†ï¼Œç°åœ¨å»ºé€ è€…æ¨¡å¼ä¸»è¦ç”¨æ¥é€šè¿‡é“¾å¼è°ƒç”¨ç”Ÿæˆä¸åŒçš„é…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åˆ¶ä½œä¸€æ¯çç å¥¶èŒ¶ã€‚å®ƒçš„åˆ¶ä½œè¿‡ç¨‹æ˜¯ç¨³å®šçš„ï¼Œé™¤äº†å¿…é¡»è¦çŸ¥é“å¥¶èŒ¶çš„ç§ç±»å’Œè§„æ ¼å¤–ï¼Œæ˜¯å¦åŠ çç å’Œæ˜¯å¦åŠ å†°æ˜¯å¯é€‰çš„ã€‚ä½¿ç”¨å»ºé€ è€…æ¨¡å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String size;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> pearl;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> ice;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MilkTea</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = builder.type;</span><br><span class="line">        <span class="keyword">this</span>.size = builder.size;</span><br><span class="line">        <span class="keyword">this</span>.pearl = builder.pearl;</span><br><span class="line">        <span class="keyword">this</span>.ice = builder.ice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPearl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pearl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isIce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">        <span class="keyword">private</span> String size = <span class="string">"ä¸­æ¯"</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> pearl = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> ice = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.type = type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">size</span><span class="params">(String size)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.size = size;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">pearl</span><span class="params">(<span class="keyword">boolean</span> pearl)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.pearl = pearl;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">ice</span><span class="params">(<span class="keyword">boolean</span> cold)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.ice = cold;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> MilkTea <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> MilkTea(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† MilkTea çš„æ„é€ æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰çš„ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸èƒ½é€šè¿‡ new æ„å»ºå‡º MilkTea å®ä¾‹ï¼Œåªèƒ½é€šè¿‡ Builder æ„å»ºã€‚å¯¹äºå¿…é¡»é…ç½®çš„å±æ€§ï¼Œé€šè¿‡ Builder çš„æ„é€ æ–¹æ³•ä¼ å…¥ï¼Œå¯é€‰çš„å±æ€§é€šè¿‡ Builder çš„é“¾å¼è°ƒç”¨æ–¹æ³•ä¼ å…¥ï¼Œå¦‚æœä¸é…ç½®ï¼Œå°†ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä¹Ÿå°±æ˜¯ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°ã€‚æ ¹æ®ä¸åŒçš„é…ç½®å¯ä»¥åˆ¶ä½œå‡ºä¸åŒçš„å¥¶èŒ¶ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buyMilkTea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MilkTea milkTea = <span class="keyword">new</span> MilkTea.Builder(<span class="string">"åŸå‘³"</span>).build();</span><br><span class="line">        show(milkTea);</span><br><span class="line"></span><br><span class="line">        MilkTea chocolate =<span class="keyword">new</span> MilkTea.Builder(<span class="string">"å·§å…‹åŠ›å‘³"</span>)</span><br><span class="line">                .ice(<span class="keyword">false</span>)</span><br><span class="line">                .build();</span><br><span class="line">        show(chocolate);</span><br><span class="line"></span><br><span class="line">        MilkTea strawberry = <span class="keyword">new</span> MilkTea.Builder(<span class="string">"è‰è“å‘³"</span>)</span><br><span class="line">                .size(<span class="string">"å¤§æ¯"</span>)</span><br><span class="line">                .pearl(<span class="keyword">false</span>)</span><br><span class="line">                .ice(<span class="keyword">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">        show(strawberry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(MilkTea milkTea)</span> </span>&#123;</span><br><span class="line">        String pearl;</span><br><span class="line">        <span class="keyword">if</span> (milkTea.isPearl())</span><br><span class="line">            pearl = <span class="string">"åŠ çç "</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            pearl = <span class="string">"ä¸åŠ çç "</span>;</span><br><span class="line">        String ice;</span><br><span class="line">        <span class="keyword">if</span> (milkTea.isIce()) &#123;</span><br><span class="line">            ice = <span class="string">"åŠ å†°"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ice = <span class="string">"ä¸åŠ å†°"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"ä¸€ä»½"</span> + milkTea.getSize() + <span class="string">"ã€"</span></span><br><span class="line">                + pearl + <span class="string">"ã€"</span></span><br><span class="line">                + ice + <span class="string">"çš„"</span></span><br><span class="line">                + milkTea.getType() + <span class="string">"å¥¶èŒ¶"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä»½ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°çš„åŸå‘³å¥¶èŒ¶</span><br><span class="line">ä¸€ä»½ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°çš„å·§å…‹åŠ›å‘³å¥¶èŒ¶</span><br><span class="line">ä¸€ä»½å¤§æ¯ã€ä¸åŠ çç ã€åŠ å†°çš„è‰è“å‘³å¥¶èŒ¶</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„å¥½å¤„æ˜¯ä¸ç”¨æ‹…å¿ƒå¿˜äº†æŒ‡å®šæŸä¸ªé…ç½®ï¼Œä¿è¯äº†æ„å»ºè¿‡ç¨‹æ˜¯ç¨³å®šçš„ã€‚åœ¨ OkHttpã€Retrofit ç­‰è‘—åæ¡†æ¶çš„æºç ä¸­éƒ½ä½¿ç”¨åˆ°äº†å»ºé€ è€…æ¨¡å¼ã€‚</p><h2 id="å››ã€åŸå‹æ¨¡å¼"><a href="#å››ã€åŸå‹æ¨¡å¼" class="headerlink" title="å››ã€åŸå‹æ¨¡å¼"></a>å››ã€åŸå‹æ¨¡å¼</h2><blockquote><p>Prototype<br>    Cloning an object by reducing the cost of creation.</p></blockquote><blockquote><p>åŸå‹æ¨¡å¼ï¼šç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p></blockquote><p>Java ä¸­ï¼ŒObject çš„ clone() æ–¹æ³•å°±å±äºåŸå‹æ¨¡å¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸€å¤©ï¼Œå‘¨æ°ä¼¦åˆ°å¥¶èŒ¶åº—ç‚¹äº†ä¸€ä»½ä¸åŠ å†°çš„åŸå‘³å¥¶èŒ¶ï¼Œä½ è¯´æˆ‘æ˜¯å‘¨æ°ä¼¦çš„å¿ å®ç²‰ï¼Œæˆ‘ä¹Ÿè¦ä¸€ä»½è·Ÿå‘¨æ°ä¼¦ä¸€æ ·çš„ã€‚ç”¨ç¨‹åºè¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p>å¥¶èŒ¶ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String type;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> ice;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸‹å•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">order</span><span class="params">()</span></span>&#123;</span><br><span class="line">    MilkTea milkTeaOfJay = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    milkTeaOfJay.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    milkTeaOfJay.ice = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    MilkTea yourMilkTea = milkTeaOfJay;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°†å‘¨æ°ä¼¦çš„å¥¶èŒ¶ç›´æ¥èµ‹å€¼åˆ°ä½ çš„å¥¶èŒ¶ä¸Šå°±è¡Œäº†ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬å¹¶ä¸éœ€è¦ clone æ–¹æ³•ã€‚ä½†æ˜¯è¿™æ ·çœŸçš„æ˜¯å¤åˆ¶äº†ä¸€ä»½å¥¶èŒ¶å—ï¼Ÿ</p><p>å½“ç„¶ä¸æ˜¯ï¼ŒJava çš„èµ‹å€¼åªæ˜¯ä¼ é€’åœ°å€ã€‚è¿™æ ·èµ‹å€¼ä¹‹åï¼ŒyourMilkTea ä»ç„¶æŒ‡å‘çš„å‘¨æ°ä¼¦çš„å¥¶èŒ¶ï¼Œå¹¶ä¸ä¼šå¤šä¸€ä»½ä¸€æ ·çš„å¥¶èŒ¶ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆåšæ‰èƒ½ç‚¹ä¸€ä»½ä¸€æ ·çš„å¥¶èŒ¶å‘¢ï¼Ÿå°†ç¨‹åºä¿®æ”¹å¦‚ä¸‹å°±å¯ä»¥äº†ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">order</span><span class="params">()</span></span>&#123;</span><br><span class="line">    MilkTea milkTeaOfJay = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    milkTeaOfJay.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    milkTeaOfJay.ice = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    MilkTea yourMilkTea = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    yourMilkTea.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    yourMilkTea.ice = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åªæœ‰è¿™æ ·ï¼ŒyourMilkTea æ‰æ˜¯ new å‡ºæ¥çš„ä¸€ä»½å…¨æ–°çš„å¥¶èŒ¶ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæœ‰ä¸€åƒä¸ªç²‰ä¸éƒ½éœ€è¦ç‚¹å’Œå‘¨æ°ä¼¦ä¸€æ ·çš„å¥¶èŒ¶çš„è¯ï¼ŒæŒ‰ç…§ç°åœ¨çš„å†™æ³•å°±éœ€è¦ new ä¸€åƒæ¬¡ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªæ–°çš„å¯¹è±¡èµ‹å€¼ä¸€åƒæ¬¡ï¼Œé€ æˆå¤§é‡çš„é‡å¤ã€‚</p><p>æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœå‘¨æ°ä¼¦ä¸´æ—¶å†³å®šåŠ ä¸ªå†°ï¼Œé‚£ä¹ˆç²‰ä¸ä»¬çš„å¥¶èŒ¶é…ç½®ä¹Ÿè¦è·Ÿç€ä¿®æ”¹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">order</span><span class="params">()</span></span>&#123;</span><br><span class="line">    MilkTea milkTeaOfJay = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    milkTeaOfJay.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    milkTeaOfJay.ice = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    MilkTea yourMilkTea = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    yourMilkTea.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    yourMilkTea.ice = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†ä¸€åƒä¸ªç²‰ä¸çš„ ice éƒ½ä¿®æ”¹ä¸º true</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¤§æ‰¹é‡çš„ä¿®æ”¹æ— ç–‘æ˜¯éå¸¸ä¸‘é™‹çš„åšæ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦ clone æ–¹æ³•çš„ç†ç”±ï¼</p><p>è¿ç”¨åŸå‹æ¨¡å¼ï¼Œåœ¨ MilkTea ä¸­æ–°å¢ clone æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String type;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> ice;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MilkTea <span class="title">clone</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MilkTea milkTea = <span class="keyword">new</span> MilkTea();</span><br><span class="line">        milkTea.type = <span class="keyword">this</span>.type;</span><br><span class="line">        milkTea.ice = <span class="keyword">this</span>.ice;</span><br><span class="line">        <span class="keyword">return</span> milkTea;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸‹å•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">order</span><span class="params">()</span></span>&#123;</span><br><span class="line">    MilkTea milkTeaOfJay = <span class="keyword">new</span> MilkTea();</span><br><span class="line">    milkTeaOfJay.type = <span class="string">"åŸå‘³"</span>;</span><br><span class="line">    milkTeaOfJay.ice = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    MilkTea yourMilkTea = milkTeaOfJay.clone();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€åƒä½ç²‰ä¸éƒ½è°ƒç”¨ milkTeaOfJay çš„ clone æ–¹æ³•å³å¯</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ˜¯åŸå‹æ¨¡å¼ï¼ŒJava ä¸­æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè®©æˆ‘ä»¬å¹¶ä¸éœ€è¦æ‰‹å†™ clone æ–¹æ³•ã€‚è¿™ä¸ªè¯­æ³•ç³–å°±æ˜¯ Cloneable æ¥å£ï¼Œæˆ‘ä»¬åªè¦è®©éœ€è¦æ‹·è´çš„ç±»å®ç°æ­¤æ¥å£å³å¯ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String type;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> ice;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> MilkTea <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (MilkTea) <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJava è‡ªå¸¦çš„ clone æ–¹æ³•æ˜¯æµ…æ‹·è´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´è°ƒç”¨æ­¤å¯¹è±¡çš„ clone æ–¹æ³•ï¼Œåªæœ‰åŸºæœ¬ç±»å‹çš„å‚æ•°ä¼šè¢«æ‹·è´ä¸€ä»½ï¼ŒéåŸºæœ¬ç±»å‹çš„å¯¹è±¡ä¸ä¼šè¢«æ‹·è´ä¸€ä»½ï¼Œè€Œæ˜¯ç»§ç»­ä½¿ç”¨ä¼ é€’å¼•ç”¨çš„æ–¹å¼ã€‚å¦‚æœéœ€è¦å®ç°æ·±æ‹·è´ï¼Œå¿…é¡»è¦è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹ clone æ–¹æ³•æ‰è¡Œã€‚</p><h2 id="Conclusion-of-Creational-pattern"><a href="#Conclusion-of-Creational-pattern" class="headerlink" title="Conclusion of Creational pattern"></a>Conclusion of Creational pattern</h2><p>åˆ›å»ºå‹æ¨¡å¼æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œå®ƒä»¬çš„ä½œç”¨å°±æ˜¯ä¸ºäº†äº§ç”Ÿå®ä¾‹å¯¹è±¡ï¼Œç®—æ˜¯å„ç§å·¥ä½œçš„ç¬¬ä¸€æ­¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬å†™çš„æ˜¯é¢å‘å¯¹è±¡çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡äº†ã€‚</p><p>ç®€å•å·¥å‚æ¨¡å¼æœ€ç®€å•ï¼›å·¥å‚æ¨¡å¼åœ¨ç®€å•å·¥å‚æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ äº†é€‰æ‹©å·¥å‚çš„ç»´åº¦ï¼Œéœ€è¦ç¬¬ä¸€æ­¥é€‰æ‹©åˆé€‚çš„å·¥å‚ï¼›æŠ½è±¡å·¥å‚æ¨¡å¼æœ‰äº§å“æ—çš„æ¦‚å¿µï¼Œå¦‚æœå„ä¸ªäº§å“æ˜¯å­˜åœ¨å…¼å®¹æ€§é—®é¢˜çš„ï¼Œå°±è¦ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼å°±ä¸è¯´äº†ï¼Œä¸ºäº†ä¿è¯å…¨å±€ä½¿ç”¨çš„æ˜¯åŒä¸€å¯¹è±¡ï¼Œä¸€æ–¹é¢æ˜¯å®‰å…¨æ€§è€ƒè™‘ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†èŠ‚çœèµ„æºï¼›å»ºé€ è€…æ¨¡å¼ä¸“é—¨å¯¹ä»˜å±æ€§å¾ˆå¤šçš„é‚£ç§ç±»ï¼Œä¸ºäº†è®©ä»£ç æ›´ä¼˜ç¾ï¼›åŸå‹æ¨¡å¼ç”¨å¾—æœ€å°‘ï¼Œäº†è§£å’Œ Object ç±»ä¸­çš„ clone() æ–¹æ³•ç›¸å…³çš„çŸ¥è¯†å³å¯ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†è®¾è®¡æ¨¡å¼çš„ 5 ç§æ„å»ºå‹æ¨¡å¼ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ 11 ç§è¡Œä¸ºå‹æ¨¡å¼å’Œ 7 ç§ç»“æ„å‹æ¨¡å¼ï¼Œæˆ‘ä»¬å°†åœ¨ä»¥åçš„æ–‡ç« ä¸­ç»§ç»­å­¦ä¹ ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/85624457" target="_blank" rel="noopener">å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿâ€“ åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><a href="http://glj8989332.blogspot.com/" target="_blank" rel="noopener">Taiwan</a></p>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Design Patterns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GGG</title>
      <link href="/2019/05/11/GRE/"/>
      <url>/2019/05/11/GRE/</url>
      
        <content type="html"><![CDATA[<h1 id="GRE-Study-Plans-and-Guides"><a href="#GRE-Study-Plans-and-Guides" class="headerlink" title="GRE Study Plans and Guides"></a>GRE Study Plans and Guides</h1><h2 id="Magoosh-GRE-Blog"><a href="#Magoosh-GRE-Blog" class="headerlink" title="Magoosh GRE Blog"></a>Magoosh GRE Blog</h2><ul><li><a href="https://magoosh.com/gre/gre-study-plans-and-guides/" target="_blank" rel="noopener">GRE Study Plans and Guides</a></li></ul><ul><li><p><a href="https://www.manhattanprep.com/gre/resources/" target="_blank" rel="noopener">Manhattan Prep </a></p></li><li><p><a href="https://www.ets.org/gre" target="_blank" rel="noopener">PP1&amp;PP2å®˜æ–¹é€çš„å…©æ¬¡æ¨¡è€ƒ</a></p></li><li><p><a href>Verbal: Googleæœå°‹: è€ƒæ»¡åˆ†å·å“¥å¡«ç©ºæ©Ÿç¶“1000é¡Œ</a></p></li><li><p><a href>Quant: çŒ´å“¥é›£é¡Œ</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Application </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Application </tag>
            
            <tag> GRE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java</title>
      <link href="/2019/04/28/Java/"/>
      <url>/2019/04/28/Java/</url>
      
        <content type="html"><![CDATA[<h2 id="JAVE-SE"><a href="#JAVE-SE" class="headerlink" title="JAVE SE"></a>JAVE SE</h2><p><a href="https://segmentfault.com/a/1190000016611415" target="_blank" rel="noopener">ä¹è§‚é”ã€æ‚²è§‚é”ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼</a></p><h2 id="JAVE-EE"><a href="#JAVE-EE" class="headerlink" title="JAVE EE"></a>JAVE EE</h2><p><a href="https://dunwu.github.io/javacore/#/README" target="_blank" rel="noopener">Java Tutorial</a><br><a href="https://dunwu.github.io/java-tutorial/#/" target="_blank" rel="noopener">Spring Boot Tutoiral</a></p><h2 id="resource"><a href="#resource" class="headerlink" title="resource"></a>resource</h2><p><a href="https://mp.weixin.qq.com/s/n_1LxAhC6eJYUzKEFQVLCg?fbclid=IwAR0AnEbur30uRGL3qmPDTsXhDF1lkK0J2pYR30AkJTbe3trd7JUTBoB1r5I" target="_blank" rel="noopener">é¢é•œ</a></p><ul><li><p>jvmè™›æ“¬æ©Ÿ</p></li><li><p>Thinking in java</p></li></ul><p><a href="https://www.zhihu.com/question/31437847/answer/689399219?utm_source=qq&amp;utm_medium=social&amp;utm_oi=973611927536181248" target="_blank" rel="noopener">åŸºç¡€é¢˜ç›®</a></p><p><a href="https://www.nowcoder.com/tutorial/94/4206176d637541fa92c784a4f547e979" target="_blank" rel="noopener">ç‰›å®¢ç½‘Javaé¢è¯•å®å…¸</a></p><p>[åŒ—èˆªå¤§ä½¬æ”¶é›†çš„èµ„æºï¼Œé‡Œé¢æœ‰jvmè™šæ‹Ÿæœºä»€ä¹ˆçš„]ï¼ˆ<a href="https://space.bilibili.com/73012391ï¼‰" target="_blank" rel="noopener">https://space.bilibili.com/73012391ï¼‰</a><br>åœ£åœ°</p><h2 id="ç›¸é—œå·¥ç¨‹å¯¦ä½œæŒ‡å°"><a href="#ç›¸é—œå·¥ç¨‹å¯¦ä½œæŒ‡å°" class="headerlink" title="ç›¸é—œå·¥ç¨‹å¯¦ä½œæŒ‡å°"></a>ç›¸é—œå·¥ç¨‹å¯¦ä½œæŒ‡å°</h2><p><a href="https://www.bilibili.com/video/av38318433/?p=1" target="_blank" rel="noopener">ç‰›äººè®¡åˆ’â€”â€”å¶ç¥JavaçŸ¥ä¹ç±»èµ„è®¯ç½‘ç«™å®æˆ˜ï¼ˆé«˜çº§ï¼‰</a></p><p>ç‰›äººè®¡åˆ’â€”â€”å¶ç¥JavaçŸ¥ä¹ç±»èµ„è®¯ç½‘ç«™å®æˆ˜ï¼ˆé«˜çº§ï¼‰</p><h2 id="å·¥ç¨‹è¦–é »è¬›è§£"><a href="#å·¥ç¨‹è¦–é »è¬›è§£" class="headerlink" title="å·¥ç¨‹è¦–é »è¬›è§£"></a>å·¥ç¨‹è¦–é »è¬›è§£</h2><p>[åŒ—èˆªå¤§ä½¬æ”¶é›†çš„èµ„æºï¼Œé‡Œé¢æœ‰jvmè™šæ‹Ÿæœºä»€ä¹ˆçš„]ï¼ˆ<a href="https://space.bilibili.com/73012391/channel/detail?cid=71336ï¼‰" target="_blank" rel="noopener">https://space.bilibili.com/73012391/channel/detail?cid=71336ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> Diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm</title>
      <link href="/2019/04/19/Algorithm/"/>
      <url>/2019/04/19/Algorithm/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆå£°æ˜ä¸€ç‚¹ï¼Œé¢è¯•æ˜¯é¢è¯•ï¼Œåšé¢˜æ˜¯åšé¢˜ï¼Œåšé¢˜æ˜¯é¢è¯•çš„å¿…è¦æ¡ä»¶ã€‚æ¥ä¸‹æ¥ ï¼Œå°±æˆ‘åšäº†è¿™äº›é¢˜çš„æ„Ÿæ‚Ÿï¼Œä¸»è¦æ˜¯ç»™è‡ªå·±åšä¸ªçºªå¿µï¼Œä¹Ÿåˆ†äº«ä¸‹æˆ‘çš„è§é—»ã€‚</p><h2 id="1-è¯´è¯´æˆ‘è®¤è¯†çš„åˆ·é¢˜å¥—è£…"><a href="#1-è¯´è¯´æˆ‘è®¤è¯†çš„åˆ·é¢˜å¥—è£…" class="headerlink" title="1 è¯´è¯´æˆ‘è®¤è¯†çš„åˆ·é¢˜å¥—è£…"></a>1 è¯´è¯´æˆ‘è®¤è¯†çš„åˆ·é¢˜å¥—è£…</h2><p>ç¼–è¾‘å™¨ ï¼š vscode sublime éƒ½è¡Œ, ä¸è¿‡æˆ‘åå¥½IDEAçš„åŸå› æ˜¯å› ä¸ºå¯ä»¥å†™å•å…ƒæµ‹è¯•,è¿™å¯¹æˆ‘å¤ä¹ ,è°ƒè¯•å¹¶éªŒè¯æˆ‘çš„ä»£ç æ­£ç¡®æ€§å¾ˆé‡è¦ã€‚<br>IDEA ä¹Ÿå¯ä»¥è°ƒæˆæ–‡æœ¬ç¼–è¾‘æ¨¡å¼ï¼Œ ç‚¹å‡»IDEAå³ä¸‹è§’çš„å¸½å­å›¾æ ‡ï¼Œå–æ¶ˆcode auto completeã€‚å–æ¶ˆsyntax æˆ–è€… highlightéƒ½è¡Œã€‚</p><p>250é“åŒ…å«å†…å®¹ï¼š2ä¸ªtopç³»åˆ—ä¸ºä¸»+å¤–åŠ ä¸€äº›é«˜é¢‘é¢˜ç›®å’Œè‡ªå·±è®¤ä¸ºè–„å¼±çš„é¢˜ç›®</p><h2 id="2-leetcodeå¤–æŒ‚æ’ä»¶-ï¼š-ç›®å‰-æœ‰äº†å·²ç»å¼€å‘äº†leetcodeåˆ·é¢˜æ’ä»¶ï¼Œä¸éœ€è¦å–ç½‘é¡µç«¯æµè§ˆï¼Œç›´æ¥ç¼–è¾‘å™¨é‡Œé¢æµè§ˆï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚"><a href="#2-leetcodeå¤–æŒ‚æ’ä»¶-ï¼š-ç›®å‰-æœ‰äº†å·²ç»å¼€å‘äº†leetcodeåˆ·é¢˜æ’ä»¶ï¼Œä¸éœ€è¦å–ç½‘é¡µç«¯æµè§ˆï¼Œç›´æ¥ç¼–è¾‘å™¨é‡Œé¢æµè§ˆï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚" class="headerlink" title="2 leetcodeå¤–æŒ‚æ’ä»¶ ï¼š ç›®å‰ æœ‰äº†å·²ç»å¼€å‘äº†leetcodeåˆ·é¢˜æ’ä»¶ï¼Œä¸éœ€è¦å–ç½‘é¡µç«¯æµè§ˆï¼Œç›´æ¥ç¼–è¾‘å™¨é‡Œé¢æµè§ˆï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚"></a>2 leetcodeå¤–æŒ‚æ’ä»¶ ï¼š ç›®å‰ æœ‰äº†å·²ç»å¼€å‘äº†leetcodeåˆ·é¢˜æ’ä»¶ï¼Œä¸éœ€è¦å–ç½‘é¡µç«¯æµè§ˆï¼Œç›´æ¥ç¼–è¾‘å™¨é‡Œé¢æµè§ˆï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚</h2><p><a href="https://github.com/shuzijun/leetcode-editor" target="_blank" rel="noopener">https://github.com/shuzijun/leetcode-editor</a></p><p>ç½‘é¡µç«¯çš„ä¸€ä¸ªæ²¹çŒ´æ’ä»¶ :  è‡ªåŠ¨åˆ‡æ¢å›½åŒºå’Œç¾åŒº ï¼Œ æœç´¢ç­”æ¡ˆ ï¼Œ   ä¸ªäººç”¨çš„è¿˜ç®—ä¸é”™ ã€‚  å…·ä½“åŠŸèƒ½è‡ªå·±è£…ä¸ªæ²¹çŒ´æ’ä»¶ ï¼Œè‡ªå·±ç©ç©å§<br><a href="https://greasyfork.org/zh-CN/scr" target="_blank" rel="noopener">https://greasyfork.org/zh-CN/scr</a> â€¦ 3%E5%8A%A9%E6%89%8B  </p><h2 id="3-æ¨èå‚è€ƒç­”æ¡ˆï¼š-grandyangçš„æ–‡å­—è§£ç­”-å’Œ-èŠ±èŠ±é…±çš„è§†é¢‘-ä¸ºä¸»ã€‚è¿˜æœ‰-æ°´ä¸­çš„é±¼-LEE215-ç­‰"><a href="#3-æ¨èå‚è€ƒç­”æ¡ˆï¼š-grandyangçš„æ–‡å­—è§£ç­”-å’Œ-èŠ±èŠ±é…±çš„è§†é¢‘-ä¸ºä¸»ã€‚è¿˜æœ‰-æ°´ä¸­çš„é±¼-LEE215-ç­‰" class="headerlink" title="3  æ¨èå‚è€ƒç­”æ¡ˆï¼š grandyangçš„æ–‡å­—è§£ç­” å’Œ èŠ±èŠ±é…±çš„è§†é¢‘ ä¸ºä¸»ã€‚è¿˜æœ‰ æ°´ä¸­çš„é±¼ ,  LEE215 ç­‰"></a>3  æ¨èå‚è€ƒç­”æ¡ˆï¼š grandyangçš„æ–‡å­—è§£ç­” å’Œ èŠ±èŠ±é…±çš„è§†é¢‘ ä¸ºä¸»ã€‚è¿˜æœ‰ æ°´ä¸­çš„é±¼ ,  LEE215 ç­‰</h2><p>ä¸ªäººä¸»è§‚è¯„ä»·ï¼šèŠ±èŠ±é…±åšçš„è§†é¢‘åŸºæœ¬å¾ˆç²¾å“ï¼Œè¦†ç›–çš„é¢˜ç›®éƒ½æ¯”è¾ƒå…¨äº†ï¼Œä¹Ÿåšäº†åˆ†ç±»ã€‚é€‚åˆå°ç™½å’Œä¸€å®šåˆ·é¢˜ç»éªŒçš„äººã€‚<br>æ¯ä¸ªè§†é¢‘æ—¶é•¿åŸºæœ¬æ§åˆ¶åœ¨20minä»¥å†…ï¼Œè®²çš„å¾ˆå¥½ï¼Œå¥½åœ¨é™¤äº† ç»™ä½ è§£é¢˜æ€è·¯å’Œå¤æ‚åº¦ç®€ç•¥åˆ†æï¼Œè¿˜ä¼šèä¼šè´¯é€šï¼Œè¿å¸¦åœ¨è§†é¢‘å†… æç¤ºå¹¶æ”¾å‡ºç›¸å…³ç±»ä¼¼çš„é¢˜ç›®çš„YouTubeè§†é¢‘é“¾æ¥ã€‚<br>èŠ±èŠ±é…±æœ¬äººçš„å±¥å† æˆ‘ä¹Ÿç®—æœè¿‡ï¼Œ çœ‹ä»–çš„è§£ç­” å¾ˆæ”¾å¿ƒï¼<br>ç­”æ¡ˆçš„åŸºæœ¬ç‰ˆæœ¬æ˜¯ C++ä¸€å®šæœ‰ã€‚ Pythonå’ŒJAVA ç°åœ¨ä¹Ÿå¸¦ä¸Šäº†ã€‚<br>å”¯ä¸€ç¼ºç‚¹å°±æ˜¯:æ²¡æœ‰è¯„è®ºåŒºï¼ŒYouTubeè§†é¢‘ä¸‹é¢è´´ä»£ç ä¹Ÿä¸å¤ªå¥½ã€‚</p><p>ç„¶åå†æ¥è¯´è¯´ï¼Œgrandyangçš„ï¼Œ æ–‡å­—æè¿°åŠŸåº• æˆ‘è®¤ä¸ºæ—©æœŸç‰ˆæœ¬å¯èƒ½ä¸å¤ªè¡Œï¼ŒåæœŸç‰ˆæœ¬éƒ½æ˜¯ä¸é”™çš„ã€‚<br>ä»–çš„æ–‡å­—æ€§é¢˜è§£æ€è·¯æè¿° å¯ä»¥ è®©ä½ åœ¨5minå†…äº†è§£è¿™é“é¢˜ç›®çš„å¤§è‡´è§£é¢˜æ€è·¯ï¼Œä¸ç”¨è´¹å¿ƒæ€çœ‹ä½ å¯èƒ½è®¤ä¸º20minå¾ˆé•¿ä¼šè®©ä½ ç¡è§‰çš„è§†é¢‘è§£ç­”ã€‚<br>grandyang å°½é‡éƒ½æä¾›ä¸€é¢˜å¤šè§£ï¼Œå¹¶åœ¨æ–‡ç« æœ«å°¾é™„ä¸ŠåŸé¢˜é“¾æ¥å’Œ JAVA Cç‰ˆæœ¬çš„voteæ•°è¾ƒé«˜çš„ç­”æ¡ˆã€‚<br>å½“ç„¶ï¼Œæˆ‘åè¯´grangdyangï¼Œæ˜¯å› ä¸ºæˆ‘ä¸ªäººè§‰å¾—ä»–çš„éƒ¨åˆ†ç­”æ¡ˆï¼Œæ²¡è®²åˆ°å…³é”®ç‚¹å­ä¸Šã€‚ã€‚ã€‚æ¯”å¦‚DPç±»å‹çš„  èƒŒåŒ…é—®é¢˜  ï¼Œä¸¾ä¸ªä¾‹å­ 312 burst ballon åŒºé—´DP<br>æ‰€ä»¥ï¼Œ grandyangçš„ç­”æ¡ˆçš„ç¼ºç‚¹æ˜¯åœ¨äºï¼Œ æœ‰äº›ç»å…¸é¢˜ç›® å¯èƒ½å¹¶æ²¡æœ‰ å¸®åŠ©ä½ äº†è§£è¿™ç±»å‹é—®é¢˜çš„æœ¬è´¨ã€‚<br>æœ€åï¼Œè¿™åªæ˜¯æˆ‘çš„ä¸ªäººçœ‹æ³•ï¼Œä»å¿ƒé‡Œé¢ä¸Šæ¥è¯´ï¼Œæˆ‘å¾ˆæ„Ÿè°¢ä¸¤ä½æä¾›è¿™ä¹ˆæ£’çš„ç­”æ¡ˆã€‚</p><p>LEE215  ä¸é”™äº† ï¼Œä¸è¿‡æ²¡æœ‰æ€è·¯è®²è§£ï¼Œå¸æ”¶çš„å…»åˆ†æ¯”è¾ƒå°‘ã€‚ä½†æ˜¯ä»£ç å†™çš„æ˜¯æ•´æ´ï¼<br>å…¶ä»–æ”¶è´¹çš„è§†é¢‘ï¼Œæˆ‘ç›´è¨€å¾ˆåƒåœ¾ ï¼Œç¼´çº³æ™ºå•†ç¨ã€‚ã€‚ã€‚ã€‚èµ°æ·å¾„ä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯é‚£äº›å¼¯è·¯ä½ æœ€åè¿˜æ˜¯è¦èµ°ï¼Œä¸ºä»€ä¹ˆç¡¬è¦æŠŠä»–ä»¬åˆ†ç¦»å¼€ï¼Œå…ˆèµ°æ·å¾„å‘¢ï¼Ÿ</p><h2 id="4-å…³äºå­¦ä¹ ææ–™ï¼šé™¤äº†leetcodeè¿˜æœ‰ä»€ä¹ˆå¯ä»¥çœ‹çœ‹çš„ï¼Ÿ"><a href="#4-å…³äºå­¦ä¹ ææ–™ï¼šé™¤äº†leetcodeè¿˜æœ‰ä»€ä¹ˆå¯ä»¥çœ‹çœ‹çš„ï¼Ÿ" class="headerlink" title="4 å…³äºå­¦ä¹ ææ–™ï¼šé™¤äº†leetcodeè¿˜æœ‰ä»€ä¹ˆå¯ä»¥çœ‹çœ‹çš„ï¼Ÿ"></a>4 å…³äºå­¦ä¹ ææ–™ï¼šé™¤äº†leetcodeè¿˜æœ‰ä»€ä¹ˆå¯ä»¥çœ‹çœ‹çš„ï¼Ÿ</h2><p>è¿™ä¸ªé—®é¢˜ï¼Œæ¯”è¾ƒéš¾å›ç­”ã€‚<br>æˆ‘ä¹‹å‰ä¹Ÿä¹°äº†åˆ˜æ±ä½³çš„ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ï¼ˆç¬¬2ç‰ˆï¼‰ è¿˜æœ‰é…å¥—ç­”æ¡ˆå’Œè®­ç»ƒé›†ã€‚<br><a href="https://book.douban.com/subject/25902102/" target="_blank" rel="noopener">https://book.douban.com/subject/25902102/</a><br>æœ€åä¹Ÿæ²¡ä»”ç»†å»å­¦ï¼Œä¸è¿‡å½“åšå‚è€ƒä¹¦ä¹Ÿè¿˜æ˜¯ä¸é”™çš„ã€‚<br>å‰æœŸæˆ‘è¿˜å»äº†è§£äº†USACO CODEFORCE HDOJ POJ ZOJ TopCoder ç­‰ç­‰æ˜¯å¹²å•¥çš„ã€‚<br>è‡³äºç¼–ç¨‹ä¹‹ç¾å’Œå¾®è½¯æŠ€æœ¯é¢è¯•å¿ƒå¾— å‰‘æŒ‡offeræˆ‘æ²¡å­¦è¿‡ å¥½åƒæœ‰äº›ç»å…¸é¢˜ç›®å°±æ˜¯ä»è¿™é‡Œå‡ºçš„ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘æƒ³æ¨èä¸‹ <a href="https://oi-wiki.org" target="_blank" rel="noopener">https://oi-wiki.org</a>  è¿™ä¸ªé¢å‘åˆé«˜ä¸­çš„OIERçš„ç½‘ç«™ï¼Œ ç½‘ç«™å‘èµ·äººç›®æµ‹æ˜¯THUçš„ã€‚ã€‚</p><p>è¿™ä¸ªç½‘ç«™ï¼Œæˆ‘è·å–äº†ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Ÿ<br>æˆ‘ä»OIçš„è§†è§’ï¼Œå°†leetcodeé¢˜ç›®ç½®äº OIé¢†åŸŸï¼Œçœ‹çœ‹ä¸»è¦è€ƒå¯Ÿä»€ä¹ˆã€‚<br>æ¯•ç«Ÿleetcodeä¸€å®šç¨‹åº¦ä¸Šå°±ä»£è¡¨é¢è¯•ç®—æ³•é¢˜éƒ¨åˆ†çš„è€ƒå¯Ÿé¡¹ç›®å˜›<br>dpåˆ†ç±» å­—ç¬¦ä¸²å¤„ç† æ•°è®º åŸºç¡€çš„æ•°æ®ç»“æ„ ä½è¿ç®—çš„åŸºæœ¬å’Œçµæ´»åº”ç”¨ï¼Œ<br>çº¿æ®µæ ‘ æ ‘çŠ¶æ•°ç»„ åŒºé—´DP æ ‘å½¢DP RMQ STè¡¨ç­‰äº†è§£æˆ–ç†è§£</p><p>å¦å¤–ï¼Œå°±æ˜¯å´”æ·»ç¿¼å¤§ä½¬çš„èƒŒåŒ…ä¹è®²V2ï¼Œæˆ‘ä¸ªäººçš„å­¦ä¹ èƒ½åŠ›åœç•™åœ¨ç¬¬å…­ç« ï¼Œç¬¬ä¸ƒç« åŠä»¥åçš„ å¬ä¸å¤ªæ‡‚ã€‚ã€‚ã€‚<br>å‰é¢å‡ ç« ç›¸å½“ç»å…¸ï¼Œæ˜¯åŸ¹å…»æˆ‘DPå¯è’™çš„ä¸€ä¸ªå°å†Œå­ã€‚æ„Ÿè°¢è¿™ä½å¤§ä½¬   æ’’èŠ±ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸<br>æš‚æ—¶æƒ³åˆ°çš„å°±è¿™äº›ã€‚</p><h2 id="5-ç®—æ³•å’Œæ•°æ®ç»“æ„å­¦ä¹ åº”è¯¥æœ‰æ€ä¹ˆæ ·çš„é¡ºåºï¼š-æˆ‘ä¸ªäººçŠ¯çš„é”™è¯¯å°±æ˜¯å‰æœŸåˆ·é¢˜è´¨é‡å’Œæ•ˆç‡å¤ªä½ï¼ŒåŸ‹äº†å¾ˆå¤šé›·ã€‚"><a href="#5-ç®—æ³•å’Œæ•°æ®ç»“æ„å­¦ä¹ åº”è¯¥æœ‰æ€ä¹ˆæ ·çš„é¡ºåºï¼š-æˆ‘ä¸ªäººçŠ¯çš„é”™è¯¯å°±æ˜¯å‰æœŸåˆ·é¢˜è´¨é‡å’Œæ•ˆç‡å¤ªä½ï¼ŒåŸ‹äº†å¾ˆå¤šé›·ã€‚" class="headerlink" title="5   ç®—æ³•å’Œæ•°æ®ç»“æ„å­¦ä¹ åº”è¯¥æœ‰æ€ä¹ˆæ ·çš„é¡ºåºï¼š æˆ‘ä¸ªäººçŠ¯çš„é”™è¯¯å°±æ˜¯å‰æœŸåˆ·é¢˜è´¨é‡å’Œæ•ˆç‡å¤ªä½ï¼ŒåŸ‹äº†å¾ˆå¤šé›·ã€‚"></a>5   ç®—æ³•å’Œæ•°æ®ç»“æ„å­¦ä¹ åº”è¯¥æœ‰æ€ä¹ˆæ ·çš„é¡ºåºï¼š æˆ‘ä¸ªäººçŠ¯çš„é”™è¯¯å°±æ˜¯å‰æœŸåˆ·é¢˜è´¨é‡å’Œæ•ˆç‡å¤ªä½ï¼ŒåŸ‹äº†å¾ˆå¤šé›·ã€‚</h2><p>é¦–å…ˆ äºŒåˆ†æŸ¥æ‰¾ å·¦é—­å³å¼€çš„lower_boundå†™æ³•ä¸€å®šè¦ç†è§£ ã€‚è¿™æ˜¯ä¸€ç§æ€æƒ³ã€‚è€Œä¸æ˜¯ç®€å•çš„æŸ¥æ‰¾æ•°å€¼ï¼ï¼<br>æ’åºçš„è¯ï¼Œå¿«æ’ å’Œå¿«æ’çš„åˆ‡åˆ† é»˜å†™ç¨‹åº¦å§ï¼Œ3å‘å¿«æ’å’Œå½’å¹¶æ’åº ä¹Ÿè¦èƒ½é»˜å†™å’¯ ï¼Œå…¶ä»–è‡ªå·±çœ‹ç€åŠå§</p><p>æ¥ä¸‹æ¥è°ˆè°ˆ æ ˆå’Œé˜Ÿåˆ—çš„è¿ç”¨çš„<br>åŸºäºæ ˆLIFOçš„æ•°æ®ç»“æ„ç‰¹ç‚¹ï¼ŒDFSçš„éé€’å½’è‚¯å®šç”¨æ ˆå•¦ï¼Œå•è°ƒæ€§æ ˆ çš„è¿ç”¨ è¿™ä¸ªè‡ªå·±å»ä½“ä¼šå§ã€‚<br>é˜Ÿåˆ—çš„è¯ FIFOç‰¹ç‚¹ï¼Œ BFS è‚¯å®šç”¨å¾—ä¸Šäº† ã€‚ BFSé—®é¢˜  æ¯”å¦‚è¯¾ç¨‹è¡¨ï¼Œæ¥é›¨æ°´â…¡</p><p>ä¼˜å…ˆé˜Ÿåˆ— ç”¨åœ¨å“ªé‡Œ ï¼Ÿ top kç³»åˆ—é—®é¢˜  ä»¥åŠ ä¾èµ–äºä¼˜å…ˆé˜Ÿåˆ—çš„BFSéå†<br>äºŒå‰å †å’ŒäºŒå‰æ ‘  ï¼Œé«˜åº¦ï¼Œ æ·±åº¦ ï¼Œå¶å­ç»“ç‚¹ ï¼Œéå¶å­èŠ‚ç‚¹ ï¼Œè¿™ä¸ªéœ€è¦ç†æ¸…æ¥š ã€‚<br>äºŒå‰æ ‘ åŸºæœ¬ä¸Šç”¨é€’å½’ä¸ºä¸»äº† ã€‚éå†æ–¹å¼ï¼šé€’å½’ï¼Œéé€’å½’ï¼Œmorriséå† ï¼Œ é«˜åº¦å’Œæ·±åº¦è®¡ç®— ã€‚<br>é“¾è¡¨çš„è¯  è€ƒå¯Ÿçš„æ¯”è¾ƒå°‘ ç¯æ£€æµ‹ ç¿»è½¬é“¾è¡¨ å¿…é¡»ä¼šå§ ï¼Œå“‘èŠ‚ç‚¹dummynodeçš„è¿ç”¨ã€‚<br>æ ‘çŠ¶æ•°ç»„ STè¡¨ å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€å¢æ€æƒ³çš„è¿ç”¨å§ï¼Œè¿™ä¸ªåœ¨å´”æ·»ç¿¼å¤§ä½¬çš„èƒŒåŒ…ä¹è®²é‡Œé¢æœ‰æåŠï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä¸ç”¨å­¦ï¼Œå°è¯•ä¸‹è¿˜è¡Œã€‚UFçš„è¯ ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œè¿™ä¸ªè¿˜å¥½äº†ï¼Œç¢°åˆ°çš„æ¯”è¾ƒç®€å•ï¼Œè¦ä¹ˆè¿é€šæ€§åˆ¤æ–­ï¼Œè¦ä¹ˆè¿é€šå›¾ä¸ªæ•°è®¡ç®—ã€‚</p><h2 id="6-åˆ·é¢˜ç”¨ä»€ä¹ˆè¯­è¨€ï¼š-ä»åŠŸåˆ©æ€§è§’åº¦æ¥çœ‹-JAVA-C-æ¯”è¾ƒç¨³äº†ï¼Œæ¯•ç«Ÿleetcodeç­”æ¡ˆ-è¯­è¨€ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™2ç§æœ€ä¸ºå¸¸è§ã€‚"><a href="#6-åˆ·é¢˜ç”¨ä»€ä¹ˆè¯­è¨€ï¼š-ä»åŠŸåˆ©æ€§è§’åº¦æ¥çœ‹-JAVA-C-æ¯”è¾ƒç¨³äº†ï¼Œæ¯•ç«Ÿleetcodeç­”æ¡ˆ-è¯­è¨€ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™2ç§æœ€ä¸ºå¸¸è§ã€‚" class="headerlink" title="6  åˆ·é¢˜ç”¨ä»€ä¹ˆè¯­è¨€ï¼š ä»åŠŸåˆ©æ€§è§’åº¦æ¥çœ‹ JAVA C++æ¯”è¾ƒç¨³äº†ï¼Œæ¯•ç«Ÿleetcodeç­”æ¡ˆ è¯­è¨€ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™2ç§æœ€ä¸ºå¸¸è§ã€‚"></a>6  åˆ·é¢˜ç”¨ä»€ä¹ˆè¯­è¨€ï¼š ä»åŠŸåˆ©æ€§è§’åº¦æ¥çœ‹ JAVA C++æ¯”è¾ƒç¨³äº†ï¼Œæ¯•ç«Ÿleetcodeç­”æ¡ˆ è¯­è¨€ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™2ç§æœ€ä¸ºå¸¸è§ã€‚</h2><p>Python ç­”æ¡ˆ  ä»£ç æ˜¯å°‘ï¼Œ  ä»£ç å°‘å¹¶ä¸ä»£è¡¨ ä½ å°±èƒ½å®¹æ˜“ç†è§£è¿™ä¸ªç­”æ¡ˆã€‚<br>æ‰€ä»¥ç»å¸¸leetcodeè®¨è®ºåŒºä¼šæœ‰show å‡ è¡ŒPythonä»£ç  solution æˆ‘è§‰å¾—è¿™å¹¶æ²¡æœ‰æä¾›æœ‰æ•ˆçš„ä¿¡æ¯ã€‚</p><h2 id="7-è¯´è¯´leetcodeçš„tagåˆ†ç±»ï¼š-æˆ‘è®¤ä¸ºå”¯ä¸€ä¸€ç‚¹åšçš„ä¸å¥½çš„æ˜¯DPåˆ†ç±»"><a href="#7-è¯´è¯´leetcodeçš„tagåˆ†ç±»ï¼š-æˆ‘è®¤ä¸ºå”¯ä¸€ä¸€ç‚¹åšçš„ä¸å¥½çš„æ˜¯DPåˆ†ç±»" class="headerlink" title="7 è¯´è¯´leetcodeçš„tagåˆ†ç±»ï¼š æˆ‘è®¤ä¸ºå”¯ä¸€ä¸€ç‚¹åšçš„ä¸å¥½çš„æ˜¯DPåˆ†ç±»"></a>7 è¯´è¯´leetcodeçš„tagåˆ†ç±»ï¼š æˆ‘è®¤ä¸ºå”¯ä¸€ä¸€ç‚¹åšçš„ä¸å¥½çš„æ˜¯DPåˆ†ç±»</h2><p>dpæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®å¤§çš„æ¦‚å¿µï¼Œç»†åˆ†ä¸‹æ¥æœ‰å¾ˆå¤šç§ç»å…¸çš„DPï¼Œè®©äººå°è±¡æ·±åˆ»çš„è‚¡ç¥¨ç³»åˆ— çƒ§æ°”çƒ æ•°ç»„åˆ‡å‰²æ±‚æœ€å€¼é—®é¢˜<br>å…¶ä»–tagå½’ç±»æˆ‘è®¤ä¸ºéƒ½okay<br>ä»¥ä¸‹å†…å®¹éœ€è¦ç§¯åˆ†é«˜äº 50 æ‚¨å·²ç»å¯ä»¥æµè§ˆ</p><h2 id="8-leetcodeç”¨å›½åŒºè¿˜æ˜¯ç¾åŒºï¼Ÿæˆ‘ç°åœ¨ç”¨å›½åŒºã€‚ä¸è¿‡æˆ‘å€¾å‘äºè¿˜æ˜¯ç”¨ç¾åŒºå§ã€‚æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾å“ˆå“ˆç¾åŒºæ¯•ç«Ÿæœ‰é«˜è´¨é‡çš„è®¨è®ºï¼Œå›½åŒºæ¯”è¾ƒå°‘ï¼Œè€Œä¸”å¯ä»¥è®­ç»ƒ-è‹±æ–‡ç®—æ³•é¢˜çš„-é˜…è¯»ç†è§£å˜›2333"><a href="#8-leetcodeç”¨å›½åŒºè¿˜æ˜¯ç¾åŒºï¼Ÿæˆ‘ç°åœ¨ç”¨å›½åŒºã€‚ä¸è¿‡æˆ‘å€¾å‘äºè¿˜æ˜¯ç”¨ç¾åŒºå§ã€‚æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾å“ˆå“ˆç¾åŒºæ¯•ç«Ÿæœ‰é«˜è´¨é‡çš„è®¨è®ºï¼Œå›½åŒºæ¯”è¾ƒå°‘ï¼Œè€Œä¸”å¯ä»¥è®­ç»ƒ-è‹±æ–‡ç®—æ³•é¢˜çš„-é˜…è¯»ç†è§£å˜›2333" class="headerlink" title="8 leetcodeç”¨å›½åŒºè¿˜æ˜¯ç¾åŒºï¼Ÿæˆ‘ç°åœ¨ç”¨å›½åŒºã€‚ä¸è¿‡æˆ‘å€¾å‘äºè¿˜æ˜¯ç”¨ç¾åŒºå§ã€‚æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾å“ˆå“ˆç¾åŒºæ¯•ç«Ÿæœ‰é«˜è´¨é‡çš„è®¨è®ºï¼Œå›½åŒºæ¯”è¾ƒå°‘ï¼Œè€Œä¸”å¯ä»¥è®­ç»ƒ è‹±æ–‡ç®—æ³•é¢˜çš„ é˜…è¯»ç†è§£å˜›2333"></a>8 leetcodeç”¨å›½åŒºè¿˜æ˜¯ç¾åŒºï¼Ÿæˆ‘ç°åœ¨ç”¨å›½åŒºã€‚ä¸è¿‡æˆ‘å€¾å‘äºè¿˜æ˜¯ç”¨ç¾åŒºå§ã€‚æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾å“ˆå“ˆç¾åŒºæ¯•ç«Ÿæœ‰é«˜è´¨é‡çš„è®¨è®ºï¼Œå›½åŒºæ¯”è¾ƒå°‘ï¼Œè€Œä¸”å¯ä»¥è®­ç»ƒ è‹±æ–‡ç®—æ³•é¢˜çš„ é˜…è¯»ç†è§£å˜›2333</h2><p>æœ€è¿‘ï¼Œå›½åŒºå‡ºäº†ä¸€ä¸ªå¾ˆå¼±åŒ–çš„ appã€‚</p><h2 id="9-æˆ‘çš„åšé¢˜ç­–ç•¥ï¼š"><a href="#9-æˆ‘çš„åšé¢˜ç­–ç•¥ï¼š" class="headerlink" title="9 æˆ‘çš„åšé¢˜ç­–ç•¥ï¼š"></a>9 æˆ‘çš„åšé¢˜ç­–ç•¥ï¼š</h2><p>5-10minä¸ä¼šï¼Œç›´æ¥çœ‹ç­”æ¡ˆï¼Œçœ‹grandyangæˆ–è€…èŠ±èŠ±é…±çš„ã€‚<br>èµ·åˆï¼Œæˆ‘è¿˜ä¸å¥½æ„æ€ã€‚<br>åæ¥ï¼Œæˆ‘å‘ç°ä½ çœ‹äº†è¿™é“é¢˜ç›®ç¡®å®å°±ä¼šåšäº†ï¼Œä»¥åç¢°åˆ°ï¼Œå¤§æ¦‚ç‡è¿˜æ˜¯ä¼šåšçš„ï¼Œèµ·ç æœ‰æ€è·¯ï¼Œæ¯•ç«Ÿè‡ªå·±æ‰‹æŠ„æˆ–è€…ç†è§£è¿‡<br>æ„Ÿæ‚Ÿï¼šè¿˜æ˜¯è‡ªå·±åšçš„é¢˜ç›®å°‘ï¼Œå¯¹é¢˜ç›®çš„å—…è§‰ä¸å¤ªè¡Œã€‚<br>åŠ›æ±‚æŸä¸ªYouTubeåŸ¹è®­æœºæ„è®²çš„ äº‰å–åšåˆ°ä¸€é¢˜å¤šè§£å’Œå¤šé¢˜ä¸€è§£æˆ–è€…è¯´é€šç”¨è§£ï¼Œé€šç”¨æ¨¡ç‰ˆ</p><p>ç½®äºç»†åŒ–çš„åšé¢˜ç­–ç•¥ï¼š ä¸ªäººç»éªŒæ¯”è¾ƒå°‘ã€‚<br>åŸºæœ¬è·¯å­ å°±æ˜¯å…ˆæƒ³æƒ³çœ‹è§£é¢˜ æ€è·¯ ï¼Œ<br>å£°æ˜ æ•°æ®ç»“æ„å˜é‡ï¼Œåˆå§‹åŒ–èµ‹å€¼ ï¼ˆ0ï¼Œ-1ï¼Œ+âˆï¼Œ-âˆï¼‰ã€‚<br>æ‹›åˆ°å¾ªç¯è°ƒèŠ‚æˆ–è€…é€’å½’æ›´æ–°æ¡ä»¶<br>æœ€åè¿­ä»£ä¸‹ã€‚ã€‚ã€‚</p><p>è‡³äº æ‹…å¿§15minå°±æ”¾å¼ƒæ€è€ƒï¼Œä»¥åå‡ºæ–°é¢˜ï¼Œä½ è¿˜æ˜¯å¯èƒ½ä¾æ—§åšä¸å‡ºæ¥ï¼Ÿ<br>è¿™ä¸ªå˜›ï¼Œæˆ‘è®¤ä¸ºä¸€åŠå¯¹ä¸€åŠï¼Œ15minä»¥å†…æƒ³ä¸å‡ºï¼Œå°±ç›´æ¥çœ‹ç­”æ¡ˆï¼Œç¡®å®æ²¡æœ‰åŸ¹å…»å‡ºè§£é¢˜ä¸æŠ•é™çš„æ„å¿—åŠ›ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¥½å¤„ï¼Œåœ¨äºè§å¤šè¯†å¹¿ğŸ˜„ã€‚</p><h2 id="10-é‚£äº›ä¾æ—§ææƒ§çš„é¢˜ç›®ç±»å‹ï¼š-å­—ç¬¦ä¸²çš„-æ¨¡å¼åŒ¹é…ï¼Œ-æ ˆåœ¨è®¡ç®—å™¨çš„å¤æ‚åº”ç”¨ï¼Œæ•°è®ºé¢˜ç›®ï¼ˆæ•°è®ºçš„é¢˜ç›®ï¼ŒåŸºæœ¬ä¸Šå±äºä¼šå°±æ˜¯ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šï¼Œæ­»ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼‰ã€‚"><a href="#10-é‚£äº›ä¾æ—§ææƒ§çš„é¢˜ç›®ç±»å‹ï¼š-å­—ç¬¦ä¸²çš„-æ¨¡å¼åŒ¹é…ï¼Œ-æ ˆåœ¨è®¡ç®—å™¨çš„å¤æ‚åº”ç”¨ï¼Œæ•°è®ºé¢˜ç›®ï¼ˆæ•°è®ºçš„é¢˜ç›®ï¼ŒåŸºæœ¬ä¸Šå±äºä¼šå°±æ˜¯ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šï¼Œæ­»ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼‰ã€‚" class="headerlink" title="10 é‚£äº›ä¾æ—§ææƒ§çš„é¢˜ç›®ç±»å‹ï¼š å­—ç¬¦ä¸²çš„ æ¨¡å¼åŒ¹é…ï¼Œ æ ˆåœ¨è®¡ç®—å™¨çš„å¤æ‚åº”ç”¨ï¼Œæ•°è®ºé¢˜ç›®ï¼ˆæ•°è®ºçš„é¢˜ç›®ï¼ŒåŸºæœ¬ä¸Šå±äºä¼šå°±æ˜¯ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šï¼Œæ­»ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼‰ã€‚"></a>10 é‚£äº›ä¾æ—§ææƒ§çš„é¢˜ç›®ç±»å‹ï¼š å­—ç¬¦ä¸²çš„ æ¨¡å¼åŒ¹é…ï¼Œ æ ˆåœ¨è®¡ç®—å™¨çš„å¤æ‚åº”ç”¨ï¼Œæ•°è®ºé¢˜ç›®ï¼ˆæ•°è®ºçš„é¢˜ç›®ï¼ŒåŸºæœ¬ä¸Šå±äºä¼šå°±æ˜¯ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šï¼Œæ­»ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼‰ã€‚</h2><p>DPå¥—DPæˆ–è€… 2ä¸ªDPçš„é¢˜ç›® ï¼Œ éš¾å‘</p><h2 id="11-å…³äºè¾¹ç•Œï¼Œ-cornercase-çš„æ•æ„Ÿåº¦ï¼Œ-æˆ‘ç›®å‰ä¸å¤ªä¼šæƒ³åˆ°ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚"><a href="#11-å…³äºè¾¹ç•Œï¼Œ-cornercase-çš„æ•æ„Ÿåº¦ï¼Œ-æˆ‘ç›®å‰ä¸å¤ªä¼šæƒ³åˆ°ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚" class="headerlink" title="11  å…³äºè¾¹ç•Œï¼Œ cornercase çš„æ•æ„Ÿåº¦ï¼Œ æˆ‘ç›®å‰ä¸å¤ªä¼šæƒ³åˆ°ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚"></a>11  å…³äºè¾¹ç•Œï¼Œ cornercase çš„æ•æ„Ÿåº¦ï¼Œ æˆ‘ç›®å‰ä¸å¤ªä¼šæƒ³åˆ°ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚</h2><p>æ•°ç»„æˆ‘åº”è¯¥ base 0 è¿˜æ˜¯ base 1 è¿˜æœ‰off by one errorï¼Œè¿™ä¸ªæ²¡å¤šå°‘ç»éªŒã€‚</p><p>å¾ªç¯æ¡ä»¶ åˆ°åº•  å°äº è¿˜æ˜¯ å°äºç­‰äº ? æˆ‘å°±æ˜¯ç”¨ä¾‹è¯æ³•ï¼Œä¸¾ä¸ªæ™®é€šçš„ä¾‹å­ï¼Œé—®é¢˜è§„æ¨¡1åˆ°5ä¸ªå†…ä¸ºå®œï¼Œå»åˆ¤å®šæ¡ä»¶å°äºè¿˜æ˜¯å°äºç­‰äºã€‚</p><h2 id="12-å¦‚ä½•äºŒåˆ·ï¼Œå¤ä¹ å’Œå›é¡¾ï¼Œ"><a href="#12-å¦‚ä½•äºŒåˆ·ï¼Œå¤ä¹ å’Œå›é¡¾ï¼Œ" class="headerlink" title="12  å¦‚ä½•äºŒåˆ·ï¼Œå¤ä¹ å’Œå›é¡¾ï¼Œ"></a>12  å¦‚ä½•äºŒåˆ·ï¼Œå¤ä¹ å’Œå›é¡¾ï¼Œ</h2><p>è¿™ä¸ªåšleetcodeé¢˜ç›®ä¹‹å‰ï¼Œå°±æƒ³è¦å†™å•å…ƒæµ‹è¯•ã€‚<br>assert è‡ªå·±ç­”æ¡ˆçš„è¾“å…¥å’Œè¾“å‡º ï¼Œ<br>æ–¹ä¾¿æˆ‘ä»¥åå¿«é€Ÿå›å¿†å®šä½æŸç±»è¡Œé¢˜ç›®çš„ç­”æ¡ˆã€‚<br>å› ä¸ºleetcodeç½‘é¡µç‰ˆ æäº¤è®°å½•é‡Œé¢æ‰¾è‡ªå·±çš„ç­”æ¡ˆ ä¸æ–¹ä¾¿ã€‚<br>ä¹Ÿæœ‰äººåšExcle, è®°å½•è‡ªå·±çš„è§£é¢˜å…³é”®ç‚¹ã€‚</p><h2 id="13-ç†è§£å’Œè®°å¿†ï¼šæˆ‘ç›®å‰è„‘å­ä¸­è®°å¿†çš„å°±æ˜¯-äºŒåˆ†-å¿«æ’åˆ‡åˆ†-ï¼Œä¸€äº›BFSï¼ŒDFS-DPæ¨¡ç‰ˆï¼ŒJAVAå¸¸ç”¨æ•°æ®ç»“æ„çš„APIï¼Œå°½é‡ç†è§£å…¸å‹ç±»å‹çš„æ€è·¯ï¼Œåšåˆ°ä¸‡å˜ä¸ç¦»å…¶å®—å§-2333ï¼Œ"><a href="#13-ç†è§£å’Œè®°å¿†ï¼šæˆ‘ç›®å‰è„‘å­ä¸­è®°å¿†çš„å°±æ˜¯-äºŒåˆ†-å¿«æ’åˆ‡åˆ†-ï¼Œä¸€äº›BFSï¼ŒDFS-DPæ¨¡ç‰ˆï¼ŒJAVAå¸¸ç”¨æ•°æ®ç»“æ„çš„APIï¼Œå°½é‡ç†è§£å…¸å‹ç±»å‹çš„æ€è·¯ï¼Œåšåˆ°ä¸‡å˜ä¸ç¦»å…¶å®—å§-2333ï¼Œ" class="headerlink" title="13  ç†è§£å’Œè®°å¿†ï¼šæˆ‘ç›®å‰è„‘å­ä¸­è®°å¿†çš„å°±æ˜¯ äºŒåˆ† å¿«æ’åˆ‡åˆ† ï¼Œä¸€äº›BFSï¼ŒDFS,DPæ¨¡ç‰ˆï¼ŒJAVAå¸¸ç”¨æ•°æ®ç»“æ„çš„APIï¼Œå°½é‡ç†è§£å…¸å‹ç±»å‹çš„æ€è·¯ï¼Œåšåˆ°ä¸‡å˜ä¸ç¦»å…¶å®—å§  2333ï¼Œ"></a>13  ç†è§£å’Œè®°å¿†ï¼šæˆ‘ç›®å‰è„‘å­ä¸­è®°å¿†çš„å°±æ˜¯ äºŒåˆ† å¿«æ’åˆ‡åˆ† ï¼Œä¸€äº›BFSï¼ŒDFS,DPæ¨¡ç‰ˆï¼ŒJAVAå¸¸ç”¨æ•°æ®ç»“æ„çš„APIï¼Œå°½é‡ç†è§£å…¸å‹ç±»å‹çš„æ€è·¯ï¼Œåšåˆ°ä¸‡å˜ä¸ç¦»å…¶å®—å§  2333ï¼Œ</h2><h2 id="14-ç®—æ³•é¢˜ä¸æ˜¯æ•°å­¦é¢˜ï¼Œæ¨å¯¼å¯ä»¥ï¼Œè¯æ˜æˆ‘è¿˜æ˜¯æ”¾å¼ƒäº†-GGã€‚ã€‚ã€‚ã€‚"><a href="#14-ç®—æ³•é¢˜ä¸æ˜¯æ•°å­¦é¢˜ï¼Œæ¨å¯¼å¯ä»¥ï¼Œè¯æ˜æˆ‘è¿˜æ˜¯æ”¾å¼ƒäº†-GGã€‚ã€‚ã€‚ã€‚" class="headerlink" title="14 ç®—æ³•é¢˜ä¸æ˜¯æ•°å­¦é¢˜ï¼Œæ¨å¯¼å¯ä»¥ï¼Œè¯æ˜æˆ‘è¿˜æ˜¯æ”¾å¼ƒäº† GGã€‚ã€‚ã€‚ã€‚"></a>14 ç®—æ³•é¢˜ä¸æ˜¯æ•°å­¦é¢˜ï¼Œæ¨å¯¼å¯ä»¥ï¼Œè¯æ˜æˆ‘è¿˜æ˜¯æ”¾å¼ƒäº† GGã€‚ã€‚ã€‚ã€‚</h2><h2 id="15-æ¥ä¸‹å»-æˆ‘è¦å·©å›ºç§¯ç´¯ï¼ŒäºŒåˆ·ä¸‰åˆ·ï¼Œ-å­¦ä¼šç®€è¦åˆ†ææ—¶ç©ºå¤æ‚åº¦ï¼Œå†™å†™è‡ªå·±æƒ³å‡ºæ¥çš„test-caseã€‚"><a href="#15-æ¥ä¸‹å»-æˆ‘è¦å·©å›ºç§¯ç´¯ï¼ŒäºŒåˆ·ä¸‰åˆ·ï¼Œ-å­¦ä¼šç®€è¦åˆ†ææ—¶ç©ºå¤æ‚åº¦ï¼Œå†™å†™è‡ªå·±æƒ³å‡ºæ¥çš„test-caseã€‚" class="headerlink" title="15 æ¥ä¸‹å» æˆ‘è¦å·©å›ºç§¯ç´¯ï¼ŒäºŒåˆ·ä¸‰åˆ·ï¼Œ å­¦ä¼šç®€è¦åˆ†ææ—¶ç©ºå¤æ‚åº¦ï¼Œå†™å†™è‡ªå·±æƒ³å‡ºæ¥çš„test caseã€‚"></a>15 æ¥ä¸‹å» æˆ‘è¦å·©å›ºç§¯ç´¯ï¼ŒäºŒåˆ·ä¸‰åˆ·ï¼Œ å­¦ä¼šç®€è¦åˆ†ææ—¶ç©ºå¤æ‚åº¦ï¼Œå†™å†™è‡ªå·±æƒ³å‡ºæ¥çš„test caseã€‚</h2><p>å†™çš„æ¯”è¾ƒä¹±ï¼Œæƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œï¼Œå°½é‡å†™è‡ªå·±ä¹‹å‰æ¯”è¾ƒå›°æƒ‘æˆ–è€…çº ç»“çš„ç‚¹ ï¼Œè®°å½•è‡ªå·±çš„æ€è€ƒå’Œå®è·µã€‚</p><p>æœ€åå¼ºè°ƒä¸€ç‚¹å°±æ˜¯ é¢è¯•è¿˜æ˜¯é¢è¯•ï¼Œåšé¢˜è¿˜æ˜¯åšé¢˜ã€‚ã€‚ã€‚</p><p>æ¨èèŠ±èŠ±é…±çš„ï¼Œå…è´¹çš„åšçš„è¿˜è¿™ä¹ˆå¥½ã€‚æœ‰æœºä¼šï¼Œä¸€å®šè¦æ”¯æŒä¸‹ï¼Œè¿˜æœ‰grandyangçš„ã€‚<del>~~æ’’èŠ± ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸</del>~~</p><p>æœ€åï¼Œå¸Œæœ›æœ‰äººæ‰¹åˆ¤ä¸‹æˆ‘çš„æ€è·¯æ„Ÿæ‚Ÿ</p><p>ç¥æ„¿å¤§å®¶åˆ·é¢˜æ‰“BOSS é€šå…³ã€‚èµ°å‘äººç”Ÿå·…å³°å“ˆå“ˆ</p><p><img src="https://imgur.com/kndWYlJ.png" alt><br><img src="https://imgur.com/0nCYfsH.png" alt><br><img src="https://imgur.com/6VQfPZL.png" alt></p><h1 id="å¿…çŸ¥å¿…ä¼šï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#å¿…çŸ¥å¿…ä¼šï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="å¿…çŸ¥å¿…ä¼šï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•"></a>å¿…çŸ¥å¿…ä¼šï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•</h1><p><a href="https://github.com/doocs/data-structure-and-algorithm/blob/master/LICENSE" target="_blank" rel="noopener"><img src="https://badgen.net/github/license/doocs/data-structure-and-algorithm?color=green" alt="license"></a><br><a href="http://makeapullrequest.com" target="_blank" rel="noopener"><img src="https://badgen.net/badge/PRs/welcome/green" alt="PRs Welcome"></a><br><a href="https://github.com/doocs/data-structure-and-algorithm/stargazers" target="_blank" rel="noopener"><img src="https://badgen.net/github/stars/doocs/data-structure-and-algorithm" alt="stars"></a><br><a href="https://github.com/doocs/data-structure-and-algorithm/labels/help%20wanted" target="_blank" rel="noopener"><img src="https://badgen.net/github/label-issues/doocs/data-structure-and-algorithm/help%20wanted/open" alt="help-wanted"></a><br><a href="https://github.com/doocs/data-structure-and-algorithm/graphs/contributors" target="_blank" rel="noopener"><img src="https://badgen.net/github/contributors/doocs/data-structure-and-algorithm" alt="contributors"></a><br><a href="https://github.com/doocs/data-structure-and-algorithm/issues" target="_blank" rel="noopener"><img src="https://badgen.net/github/open-issues/doocs/data-structure-and-algorithm" alt="issues"></a><br><a href="http://makeapullrequest.com" target="_blank" rel="noopener"><img src="https://badgen.net/badge/PRs/welcome/green" alt="PRs Welcome"></a></p><blockquote><p><code>Algorithms</code> + <code>Data Structures</code> = <code>Programs</code>,  â€” Niklaus Wirth</p></blockquote><p>ç›®å‰æ¥è¯´ï¼Œç¨‹åºå‘˜çš„é¢è¯•é—¨æ§›è¶Šæ¥è¶Šé«˜ï¼Œå¾ˆå¤šä¸€çº¿äº’è”ç½‘å…¬å¸çš„æŠ€æœ¯é¢è¯•ï¼Œéƒ½æˆ–å¤šæˆ–å°‘ä¼šè€ƒå¯Ÿæ•°æ®ç»“æ„ä¸ç®—æ³•ç›¸å…³çš„é¢˜ç›®ï¼ŒæŒæ¡æ•°æ®ç»“æ„ä¸ç®—æ³•å°¤ä¸ºé‡è¦ã€‚å¦‚æœä½ ä¸æƒ³æ°¸è¿œåšä¸€åâ€œä»£ç æ¬è¿å·¥â€ï¼Œé‚£å°±èŠ±ç‚¹æ—¶é—´ä¸€èµ·æ¥å­¦ä¹ å§ã€‚æœ¬é¡¹ç›®æ¶µç›–æ•°æ®ç»“æ„ä¸ç®—æ³•æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼Œå†…å®¹å°†åœ¨åç»­ä¸æ–­æ›´æ–°ï¼Œæ¬¢è¿æŒç»­å…³æ³¨é¡¹ç›®æœ€æ–°åŠ¨æ€ã€‚</p><h2 id="æ•°æ®ç»“æ„ä¸ç®—æ³•æ¦‚è¿°"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•æ¦‚è¿°" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•æ¦‚è¿°"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•æ¦‚è¿°</h2><h3 id="çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„"><a href="#çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„" class="headerlink" title="çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„"></a><a href="/docs/linear-vs-nonlinear-data-structure.md">çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„</a></h3><ul><li>çº¿æ€§ç»“æ„</li><li>éçº¿æ€§ç»“æ„</li></ul><h2 id="ç¨€ç–æ•°æ®å’Œé˜Ÿåˆ—"><a href="#ç¨€ç–æ•°æ®å’Œé˜Ÿåˆ—" class="headerlink" title="ç¨€ç–æ•°æ®å’Œé˜Ÿåˆ—"></a>ç¨€ç–æ•°æ®å’Œé˜Ÿåˆ—</h2><h3 id="ç¨€ç–æ•°ç»„"><a href="#ç¨€ç–æ•°ç»„" class="headerlink" title="ç¨€ç–æ•°ç»„"></a>ç¨€ç–æ•°ç»„</h3><ul><li>çœ‹ä¸€ä¸ªå®é™…çš„éœ€æ±‚</li><li>åŸºæœ¬ä»‹ç»</li><li>åº”ç”¨å®ä¾‹</li></ul><h3 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h3><ul><li>é˜Ÿåˆ—çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯</li><li>é˜Ÿåˆ—ä»‹ç»</li><li>æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—çš„æ€è·¯</li><li>æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—</li></ul><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><h3 id="é“¾è¡¨ä»‹ç»"><a href="#é“¾è¡¨ä»‹ç»" class="headerlink" title="é“¾è¡¨ä»‹ç»"></a>é“¾è¡¨ä»‹ç»</h3><h3 id="å•é“¾è¡¨åº”ç”¨å®ä¾‹"><a href="#å•é“¾è¡¨åº”ç”¨å®ä¾‹" class="headerlink" title="å•é“¾è¡¨åº”ç”¨å®ä¾‹"></a>å•é“¾è¡¨åº”ç”¨å®ä¾‹</h3><h3 id="å•é“¾è¡¨å¤§å‚é¢è¯•é¢˜"><a href="#å•é“¾è¡¨å¤§å‚é¢è¯•é¢˜" class="headerlink" title="å•é“¾è¡¨å¤§å‚é¢è¯•é¢˜"></a>å•é“¾è¡¨å¤§å‚é¢è¯•é¢˜</h3><h3 id="åŒå‘é“¾è¡¨åº”ç”¨å®ä¾‹"><a href="#åŒå‘é“¾è¡¨åº”ç”¨å®ä¾‹" class="headerlink" title="åŒå‘é“¾è¡¨åº”ç”¨å®ä¾‹"></a>åŒå‘é“¾è¡¨åº”ç”¨å®ä¾‹</h3><h3 id="å•å‘ç¯å½¢é“¾è¡¨åº”ç”¨åœºæ™¯"><a href="#å•å‘ç¯å½¢é“¾è¡¨åº”ç”¨åœºæ™¯" class="headerlink" title="å•å‘ç¯å½¢é“¾è¡¨åº”ç”¨åœºæ™¯"></a>å•å‘ç¯å½¢é“¾è¡¨åº”ç”¨åœºæ™¯</h3><h3 id="å•å‘ç¯å½¢é“¾è¡¨ä»‹ç»"><a href="#å•å‘ç¯å½¢é“¾è¡¨ä»‹ç»" class="headerlink" title="å•å‘ç¯å½¢é“¾è¡¨ä»‹ç»"></a>å•å‘ç¯å½¢é“¾è¡¨ä»‹ç»</h3><h3 id="çº¦ç‘Ÿå¤«é—®é¢˜"><a href="#çº¦ç‘Ÿå¤«é—®é¢˜" class="headerlink" title="çº¦ç‘Ÿå¤«é—®é¢˜"></a>çº¦ç‘Ÿå¤«é—®é¢˜</h3><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><h3 id="æ ˆçš„ä¸€ä¸ªå®é™…éœ€æ±‚"><a href="#æ ˆçš„ä¸€ä¸ªå®é™…éœ€æ±‚" class="headerlink" title="æ ˆçš„ä¸€ä¸ªå®é™…éœ€æ±‚"></a>æ ˆçš„ä¸€ä¸ªå®é™…éœ€æ±‚</h3><h3 id="æ ˆçš„ä»‹ç»"><a href="#æ ˆçš„ä»‹ç»" class="headerlink" title="æ ˆçš„ä»‹ç»"></a>æ ˆçš„ä»‹ç»</h3><h3 id="æ ˆçš„åº”ç”¨åœºæ™¯"><a href="#æ ˆçš„åº”ç”¨åœºæ™¯" class="headerlink" title="æ ˆçš„åº”ç”¨åœºæ™¯"></a>æ ˆçš„åº”ç”¨åœºæ™¯</h3><h3 id="æ ˆçš„å¿«é€Ÿå…¥é—¨"><a href="#æ ˆçš„å¿«é€Ÿå…¥é—¨" class="headerlink" title="æ ˆçš„å¿«é€Ÿå…¥é—¨"></a>æ ˆçš„å¿«é€Ÿå…¥é—¨</h3><h3 id="æ ˆå®ç°ç»¼åˆè®¡ç®—å™¨"><a href="#æ ˆå®ç°ç»¼åˆè®¡ç®—å™¨" class="headerlink" title="æ ˆå®ç°ç»¼åˆè®¡ç®—å™¨"></a>æ ˆå®ç°ç»¼åˆè®¡ç®—å™¨</h3><h3 id="é€†æ³¢å…°è®¡ç®—å™¨"><a href="#é€†æ³¢å…°è®¡ç®—å™¨" class="headerlink" title="é€†æ³¢å…°è®¡ç®—å™¨"></a>é€†æ³¢å…°è®¡ç®—å™¨</h3><h3 id="ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼"><a href="#ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼" class="headerlink" title="ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼"></a>ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</h3><h2 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><h3 id="é€’å½’ä¸é€’å½’è°ƒç”¨æœºåˆ¶"><a href="#é€’å½’ä¸é€’å½’è°ƒç”¨æœºåˆ¶" class="headerlink" title="é€’å½’ä¸é€’å½’è°ƒç”¨æœºåˆ¶"></a>é€’å½’ä¸é€’å½’è°ƒç”¨æœºåˆ¶</h3><h3 id="é€’å½’-è¿·å®«é—®é¢˜"><a href="#é€’å½’-è¿·å®«é—®é¢˜" class="headerlink" title="é€’å½’-è¿·å®«é—®é¢˜"></a>é€’å½’-è¿·å®«é—®é¢˜</h3><h3 id="é€’å½’-å…«çš‡åé—®é¢˜ï¼ˆå›æº¯ç®—æ³•ï¼‰"><a href="#é€’å½’-å…«çš‡åé—®é¢˜ï¼ˆå›æº¯ç®—æ³•ï¼‰" class="headerlink" title="é€’å½’-å…«çš‡åé—®é¢˜ï¼ˆå›æº¯ç®—æ³•ï¼‰"></a>é€’å½’-å…«çš‡åé—®é¢˜ï¼ˆå›æº¯ç®—æ³•ï¼‰</h3><h2 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h2><h3 id="æ’åºç®—æ³•ä»‹ç»"><a href="#æ’åºç®—æ³•ä»‹ç»" class="headerlink" title="æ’åºç®—æ³•ä»‹ç»"></a>æ’åºç®—æ³•ä»‹ç»</h3><h3 id="ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦"><a href="#ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦" class="headerlink" title="ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦"></a>ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦</h3><h3 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h3><h3 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h3><h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h3><h3 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h3><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><h3 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h3><h3 id="å¸¸ç”¨æ’åºç®—æ³•å¯¹æ¯”æ€»ç»“"><a href="#å¸¸ç”¨æ’åºç®—æ³•å¯¹æ¯”æ€»ç»“" class="headerlink" title="å¸¸ç”¨æ’åºç®—æ³•å¯¹æ¯”æ€»ç»“"></a>å¸¸ç”¨æ’åºç®—æ³•å¯¹æ¯”æ€»ç»“</h3><h2 id="æŸ¥æ‰¾ç®—æ³•"><a href="#æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="æŸ¥æ‰¾ç®—æ³•"></a>æŸ¥æ‰¾ç®—æ³•</h2><h3 id="çº¿æ€§æŸ¥æ‰¾ç®—æ³•"><a href="#çº¿æ€§æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="çº¿æ€§æŸ¥æ‰¾ç®—æ³•"></a>çº¿æ€§æŸ¥æ‰¾ç®—æ³•</h3><h3 id="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•"><a href="#äºŒåˆ†æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•"></a>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</h3><h3 id="æ’å€¼æŸ¥æ‰¾ç®—æ³•"><a href="#æ’å€¼æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="æ’å€¼æŸ¥æ‰¾ç®—æ³•"></a>æ’å€¼æŸ¥æ‰¾ç®—æ³•</h3><h3 id="æ–æ³¢é‚£å¥‘ï¼ˆé»„é‡‘åˆ†å‰²æ³•ï¼‰æŸ¥æ‰¾ç®—æ³•"><a href="#æ–æ³¢é‚£å¥‘ï¼ˆé»„é‡‘åˆ†å‰²æ³•ï¼‰æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="æ–æ³¢é‚£å¥‘ï¼ˆé»„é‡‘åˆ†å‰²æ³•ï¼‰æŸ¥æ‰¾ç®—æ³•"></a>æ–æ³¢é‚£å¥‘ï¼ˆé»„é‡‘åˆ†å‰²æ³•ï¼‰æŸ¥æ‰¾ç®—æ³•</h3><h2 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h2><h3 id="å“ˆå¸Œè¡¨çš„åŸºæœ¬ä»‹ç»"><a href="#å“ˆå¸Œè¡¨çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="å“ˆå¸Œè¡¨çš„åŸºæœ¬ä»‹ç»"></a>å“ˆå¸Œè¡¨çš„åŸºæœ¬ä»‹ç»</h3><h3 id="Google-å…¬å¸çš„ä¸€ä¸ªä¸Šæœºé¢˜"><a href="#Google-å…¬å¸çš„ä¸€ä¸ªä¸Šæœºé¢˜" class="headerlink" title="Google å…¬å¸çš„ä¸€ä¸ªä¸Šæœºé¢˜"></a>Google å…¬å¸çš„ä¸€ä¸ªä¸Šæœºé¢˜</h3><h2 id="æ ‘ç»“æ„"><a href="#æ ‘ç»“æ„" class="headerlink" title="æ ‘ç»“æ„"></a>æ ‘ç»“æ„</h2><h3 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h3><ul><li>ä¸ºä»€ä¹ˆéœ€æ±‚æ ‘è¿™ç§æ•°æ®ç»“æ„</li><li>äºŒå‰æ ‘éå†ï¼šå‰åºã€ä¸­åºã€åç»­</li><li>äºŒå‰æ ‘æŸ¥æ‰¾ä¸åˆ é™¤</li></ul><h3 id="é¡ºåºå­˜å‚¨äºŒå‰æ ‘"><a href="#é¡ºåºå­˜å‚¨äºŒå‰æ ‘" class="headerlink" title="é¡ºåºå­˜å‚¨äºŒå‰æ ‘"></a>é¡ºåºå­˜å‚¨äºŒå‰æ ‘</h3><ul><li>é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„æ¦‚å¿µ</li><li>é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„éå†</li><li>é¡ºåºå­˜å‚¨äºŒå‰æ ‘åº”ç”¨å®ä¾‹</li></ul><h3 id="çº¿ç´¢åŒ–äºŒå‰æ ‘"><a href="#çº¿ç´¢åŒ–äºŒå‰æ ‘" class="headerlink" title="çº¿ç´¢åŒ–äºŒå‰æ ‘"></a>çº¿ç´¢åŒ–äºŒå‰æ ‘</h3><ul><li>å…ˆçœ‹ä¸€ä¸ªé—®é¢˜</li><li>çº¿ç´¢äºŒå‰æ ‘åŸºæœ¬ä»‹ç»</li><li>çº¿ç´¢äºŒå‰æ ‘åº”ç”¨æ¡ˆä¾‹</li><li>éå†çº¿ç´¢åŒ–äºŒå‰æ ‘</li></ul><h2 id="æ ‘ç»“æ„åº”ç”¨"><a href="#æ ‘ç»“æ„åº”ç”¨" class="headerlink" title="æ ‘ç»“æ„åº”ç”¨"></a>æ ‘ç»“æ„åº”ç”¨</h2><h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><h3 id="èµ«å¤«æ›¼æ ‘"><a href="#èµ«å¤«æ›¼æ ‘" class="headerlink" title="èµ«å¤«æ›¼æ ‘"></a>èµ«å¤«æ›¼æ ‘</h3><h3 id="èµ«å¤«æ›¼ç¼–ç "><a href="#èµ«å¤«æ›¼ç¼–ç " class="headerlink" title="èµ«å¤«æ›¼ç¼–ç "></a>èµ«å¤«æ›¼ç¼–ç </h3><ul><li>æ•°æ®å‹ç¼©ä¸è§£å‹</li><li>æ–‡ä»¶å‹ç¼©ä¸è§£å‹</li></ul><h3 id="äºŒå‰æ’åºæ ‘"><a href="#äºŒå‰æ’åºæ ‘" class="headerlink" title="äºŒå‰æ’åºæ ‘"></a>äºŒå‰æ’åºæ ‘</h3><h3 id="å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL-æ ‘ï¼‰"><a href="#å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL-æ ‘ï¼‰" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL æ ‘ï¼‰"></a>å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL æ ‘ï¼‰</h3><ul><li>å·¦æ—‹</li><li>å³æ—‹</li><li>åŒæ—‹è½¬</li></ul><h2 id="å¤šè·¯æŸ¥æ‰¾æ ‘"><a href="#å¤šè·¯æŸ¥æ‰¾æ ‘" class="headerlink" title="å¤šè·¯æŸ¥æ‰¾æ ‘"></a>å¤šè·¯æŸ¥æ‰¾æ ‘</h2><h3 id="äºŒå‰æ ‘ä¸-B-æ ‘"><a href="#äºŒå‰æ ‘ä¸-B-æ ‘" class="headerlink" title="äºŒå‰æ ‘ä¸ B æ ‘"></a>äºŒå‰æ ‘ä¸ B æ ‘</h3><h3 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h3><h3 id="B-æ ‘ã€B-æ ‘å’Œ-B-æ ‘"><a href="#B-æ ‘ã€B-æ ‘å’Œ-B-æ ‘" class="headerlink" title="B æ ‘ã€B+ æ ‘å’Œ B* æ ‘"></a>B æ ‘ã€B+ æ ‘å’Œ B* æ ‘</h3><h2 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h2><h3 id="å›¾åŸºæœ¬ä»‹ç»"><a href="#å›¾åŸºæœ¬ä»‹ç»" class="headerlink" title="å›¾åŸºæœ¬ä»‹ç»"></a>å›¾åŸºæœ¬ä»‹ç»</h3><h3 id="å›¾çš„è¡¨ç¤ºæ–¹å¼"><a href="#å›¾çš„è¡¨ç¤ºæ–¹å¼" class="headerlink" title="å›¾çš„è¡¨ç¤ºæ–¹å¼"></a>å›¾çš„è¡¨ç¤ºæ–¹å¼</h3><h3 id="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"></a>å›¾çš„æ·±åº¦ä¼˜å…ˆéå†</h3><h3 id="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"></a>å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†</h3><h3 id="å›¾çš„æ·±åº¦ä¼˜å…ˆ-VS-å¹¿åº¦ä¼˜å…ˆ"><a href="#å›¾çš„æ·±åº¦ä¼˜å…ˆ-VS-å¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="å›¾çš„æ·±åº¦ä¼˜å…ˆ VS å¹¿åº¦ä¼˜å…ˆ"></a>å›¾çš„æ·±åº¦ä¼˜å…ˆ VS å¹¿åº¦ä¼˜å…ˆ</h3><h2 id="10-å¤§å¸¸ç”¨ç®—æ³•"><a href="#10-å¤§å¸¸ç”¨ç®—æ³•" class="headerlink" title="10 å¤§å¸¸ç”¨ç®—æ³•"></a>10 å¤§å¸¸ç”¨ç®—æ³•</h2><h3 id="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆéé€’å½’ï¼‰"><a href="#äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆéé€’å½’ï¼‰" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆéé€’å½’ï¼‰"></a>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆéé€’å½’ï¼‰</h3><h3 id="åˆ†æ²»ç®—æ³•"><a href="#åˆ†æ²»ç®—æ³•" class="headerlink" title="åˆ†æ²»ç®—æ³•"></a>åˆ†æ²»ç®—æ³•</h3><h3 id="åŠ¨æ€è§„åˆ’ç®—æ³•"><a href="#åŠ¨æ€è§„åˆ’ç®—æ³•" class="headerlink" title="åŠ¨æ€è§„åˆ’ç®—æ³•"></a>åŠ¨æ€è§„åˆ’ç®—æ³•</h3><h3 id="KMP-ç®—æ³•"><a href="#KMP-ç®—æ³•" class="headerlink" title="KMP ç®—æ³•"></a>KMP ç®—æ³•</h3><h3 id="è´ªå¿ƒç®—æ³•"><a href="#è´ªå¿ƒç®—æ³•" class="headerlink" title="è´ªå¿ƒç®—æ³•"></a>è´ªå¿ƒç®—æ³•</h3><h3 id="æ™®é‡Œå§†ç®—æ³•"><a href="#æ™®é‡Œå§†ç®—æ³•" class="headerlink" title="æ™®é‡Œå§†ç®—æ³•"></a>æ™®é‡Œå§†ç®—æ³•</h3><h3 id="å…‹é²æ–¯å¡å°”ç®—æ³•"><a href="#å…‹é²æ–¯å¡å°”ç®—æ³•" class="headerlink" title="å…‹é²æ–¯å¡å°”ç®—æ³•"></a>å…‹é²æ–¯å¡å°”ç®—æ³•</h3><h3 id="è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•"><a href="#è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•" class="headerlink" title="è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•"></a>è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•</h3><h3 id="å¼—æ´›ä¼Šå¾·ç®—æ³•"><a href="#å¼—æ´›ä¼Šå¾·ç®—æ³•" class="headerlink" title="å¼—æ´›ä¼Šå¾·ç®—æ³•"></a>å¼—æ´›ä¼Šå¾·ç®—æ³•</h3><h3 id="é©¬è¸æ£‹ç›˜ç®—æ³•"><a href="#é©¬è¸æ£‹ç›˜ç®—æ³•" class="headerlink" title="é©¬è¸æ£‹ç›˜ç®—æ³•"></a>é©¬è¸æ£‹ç›˜ç®—æ³•</h3><h2 id="å…¥é–€è³‡æ–™"><a href="#å…¥é–€è³‡æ–™" class="headerlink" title="å…¥é–€è³‡æ–™"></a>å…¥é–€è³‡æ–™</h2><ul><li><p>UCBçš„ç¥è¯¾ CS61Bï¼ŒCS61Bè¿™ä¸ªè¯¾å±äºè¿›é˜¶ç‰ˆçš„javaåŸºç¡€ç­ï¼ˆå’ŒCS61Aæ˜¯ä¸€ä¸ªç³»åˆ—çš„ï¼Œ61Aä¼šè®²ä¸€äº›åŸºæœ¬JAVAçš„è¯­æ³•ï¼‰ï¼Œä¸»è¦è®²æ•°æ®ç»“æ„ï¼Œä¸è¿‡è¿™è¯¾loadè¿˜æ˜¯å¾ˆé‡çš„ï¼Œä½œä¸šå’ŒPjéƒ½æ˜¯ç²¾æŒ‘ç»†é€‰ï¼Œç»è¿‡å²æœˆæ‰“ç£¨å‡ºæ¥çš„ç²¾å“ã€‚</p></li><li><p><a href="https://github.com/rw97/cs61b" target="_blank" rel="noopener">Solutions CS61B</a></p></li><li><p><a href="https://sp19.datastructur.es/" target="_blank" rel="noopener">2019 CS61B </a></p></li><li><p><a href="https://www.1point3acres.com/bbs/forum.php?mod=viewthread&amp;tid=97510&amp;extra=&amp;page=1" target="_blank" rel="noopener">CS 61Bä¸€ç•ä¸‰åˆ†åœ°è¨è«–äº¤æµ</a></p></li></ul><p><a href="http://alrightchiu.github.io/SecondRound/mu-lu-yan-suan-fa-yu-zi-liao-jie-gou.html" target="_blank" rel="noopener">å°ç£ç›®éŒ„ï¼šæ¼”ç®—æ³•èˆ‡è³‡æ–™çµæ§‹</a></p><p><a href="https://vod.video.cornell.edu/media/CS2110-FA17-02+Session+02/1_i5gj5xzf" target="_blank" rel="noopener">Cornell CS2110</a></p><p><a href="https://uqer.io/mom/home/" target="_blank" rel="noopener">UQERé‡åŒ–äº¤æ˜“</a></p><p><a href="https://kopu.chat/2017/04/16/%E7%B0%A1%E5%96%AE%E7%9A%84%E6%BC%94%E7%AE%97%E6%B3%95%E7%AD%86%E8%A8%98-%E7%AC%AC%E4%B8%80%E9%9B%86/" target="_blank" rel="noopener">ç°¡å–®çš„æ¼”ç®—æ³•ç­†è¨˜ â€“ ç¬¬ä¸€é›†</a></p><h2 id="å¤§ä½¬å€‘çš„åˆ·é¡Œæ—¥è¨˜å’Œè¬›è§£"><a href="#å¤§ä½¬å€‘çš„åˆ·é¡Œæ—¥è¨˜å’Œè¬›è§£" class="headerlink" title="å¤§ä½¬å€‘çš„åˆ·é¡Œæ—¥è¨˜å’Œè¬›è§£"></a>å¤§ä½¬å€‘çš„åˆ·é¡Œæ—¥è¨˜å’Œè¬›è§£</h2><p><a href="http://www.zhuanzhi.ai/topic/2001901869867117" target="_blank" rel="noopener">å…³å…³åˆ·é¢˜æ—¥è®°</a></p><p><a href="https://blog.csdn.net/scarlett_guan/article/list/1?t=1&amp;" target="_blank" rel="noopener">https://blog.csdn.net/scarlett_guan/article/list/1?t=1&amp;</a></p><p><a href="http://luckycat.kshs.kh.edu.tw/" target="_blank" rel="noopener">Luckyè²“çš„ UVAï¼ˆACMï¼‰åœ’åœ°</a></p><p><a href="https://zxi.mytechroad.com/blog/sp/leetcode-1000-problems-era/" target="_blank" rel="noopener">èŠ±èŠ±é…± leetcodeåˆ·é¢˜æ—¥è®° æœ‰youtubeè§†é¢‘</a></p><iframe width="560" height="315" src="https://www.youtube.com/embed/7J5rs56JBs8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p><a href="https://iii.run/archives/64.html" target="_blank" rel="noopener">ç®—æ³•å¯¼è®º ç¬¬15ç«  åŠ¨æ€è§„åˆ’</a></p><p><a href="https://www.youtube.com/watch?v=gEHBSWdHgGg&amp;t=6s" target="_blank" rel="noopener">å°æ—­è®²è§£ LeetCode 53. Maximum Subarray åˆ†æ²»ç­–ç•¥</a></p><h2 id="åƒè€ƒè³‡æ–™å’Œæ›¸ç±ğŸ“š"><a href="#åƒè€ƒè³‡æ–™å’Œæ›¸ç±ğŸ“š" class="headerlink" title="åƒè€ƒè³‡æ–™å’Œæ›¸ç±ğŸ“š"></a>åƒè€ƒè³‡æ–™å’Œæ›¸ç±ğŸ“š</h2><p><a href="https://github.com/ranjiewwen/Algorithm-of-Beauty" target="_blank" rel="noopener">ã€Šç®—æ³•ä¹‹ç¾â€”â€”éšåŒ¿åœ¨æ•°æ®ç»“æ„èƒŒåçš„è¯­è¨€ã€‹ï¼Œå…¨æ–‡ç›®å½•ã€â€œ45ä¸ªç®—æ³•â€ç›®å½•ã€â€œ22ä¸ªç»å…¸é—®é¢˜ç›®å½•â€ã€‚è®°å½•å­¦ä¹ ä»£ç å®ç°ï¼Œå‚è€ƒï¼šhttp://www.cnblogs.com/ranjiewen/p/6082573.html</a></p><h2 id="é€™è£¡æ˜¯åˆ·é¡Œå€‰åº«å’Œç›¸é—œè³‡æ–™"><a href="#é€™è£¡æ˜¯åˆ·é¡Œå€‰åº«å’Œç›¸é—œè³‡æ–™" class="headerlink" title="é€™è£¡æ˜¯åˆ·é¡Œå€‰åº«å’Œç›¸é—œè³‡æ–™"></a>é€™è£¡æ˜¯åˆ·é¡Œå€‰åº«å’Œç›¸é—œè³‡æ–™</h2><p><a href="https://www.1point3acres.com/bbs/thread-521127-1-1.html" target="_blank" rel="noopener">[å·¥ä½œä¿¡æ¯] åˆ·é¢˜ç»éªŒè´´</a></p><p><a href="https://cpe.cse.nsysu.edu.tw/newest.php" target="_blank" rel="noopener">CPE TAIWAN Certificate</a></p><p><a href="https://uva.onlinejudge.org/" target="_blank" rel="noopener">UVA OJ</a></p><p><a href="https://uhunt.onlinejudge.org/" target="_blank" rel="noopener">UVa submit codeçš„å®å†µ</a></p><h2 id="ç›¸é—œæ´»å‹•"><a href="#ç›¸é—œæ´»å‹•" class="headerlink" title="ç›¸é—œæ´»å‹•"></a>ç›¸é—œæ´»å‹•</h2><p><a href="https://sites.google.com/g2.nctu.edu.tw/pcca-winter-2018/èª²ç¨‹è³‡è¨Š" target="_blank" rel="noopener">äº¤å¤§ç®—æ³•å†¬ä»¤è¥</a></p><p><a href="http://glj8989332.blogspot.com/2014/06/bloggooglebloggerplugintemplate.html" target="_blank" rel="noopener">blog</a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">çœŸçš„ç•¢æ¥­äº†! æ‰¾åˆ°é©ç•¶çš„BLOGå¯ä»¥å¯«æ±è¥¿å•¦~~~å°±æ˜¯GOOGLEçš„BLOGGER!æœ‰å¥½å¤šPluginå¯ä»¥ç”¨ã€<span class="keyword">template</span>å¯ä»¥è‡ªå·±è¨­å®š, åœ¨æ²’æœ‰ç¶²é ç©ºé–“ä¸‹, è¦ºå¾—é€™è »ä¸éŒ¯çš„.</span><br><span class="line"></span><br><span class="line">æ­¤ç¯‡æ˜¯åƒè€ƒNPSCè£œå®Œè¨ˆç•«ï¼Œçµåˆå…¶å…§å®¹èˆ‡æˆ‘çš„ç¨®ç¨®è§£é¡Œçš„å­¸ç¿’éç¨‹èˆ‡æ–¹æ³•ï½</span><br><span class="line"></span><br><span class="line">èº«é‚Šçš„åŒå­¸æˆ–å­¸å¼Ÿå¦¹å¸¸æœƒå•å¦‚ä½•å­¸ç¨‹å¼ã€æé«˜ç¨‹å¼è¨­è¨ˆèƒ½åŠ›æˆ–è€…å¦‚ä½•è§£é¡Œã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€æˆ‘ä¸æ˜¯åƒä¸­å¤®MORRISã€æ¸…å¤§æ¥Šæ˜“éœ–ã€å°å¤§ä»¥åŠå…¶ä»–å„ç¨®æ€ªç‰©ç­‰åœ‹æ‰‹ï¼Œ</span><br><span class="line">ä½†æ˜¯åœ¨é€™å¤šå¹´ä¾†è§£é¡Œçš„éç¨‹æœ‰è¨±å¤šèªªä¸å®Œçš„å¿ƒå¾—èˆ‡æƒ³æ³•ï¼Œ</span><br><span class="line">åœ¨æ­¤åˆ†äº«çµ¦æƒ³æŒ‘æˆ°ç¨‹å¼è¨­è¨ˆæ¯”è³½çš„äººï¼Œ</span><br><span class="line">ç•¶ä½œä¸€å€‹å­¸ç¿’é€”å¾‘çš„åƒè€ƒã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä»¥ä¸‹å…§å®¹æ˜¯ä»¥ç¨‹å¼è§£é¡Œæ–¹å‘ç‚ºä¸»çš„å­¸ç¿’éç¨‹èˆ‡æ–¹æ³•ï¼Œç„¡æ³•æ¶µè“‹æ‰€æœ‰ç¨‹å¼è¨­è¨ˆçš„å­¸ç¿’æ–¹æ³•ï¼Œä½†æˆ‘æƒ³å…±é€šé»æ˜¯ä¸€æ¨£çš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>ã€€å…ˆç†Ÿç·´C/C++æˆ–JAVAåŸºæœ¬èªæ³•ï¼š</span><br><span class="line"></span><br><span class="line">ã€€ã€€æ‰¾ä¸€æœ¬ä½ è¦ºå¾—çœ‹èµ·ä¾†æœ€èˆ’æœçš„æ›¸ï¼Œ</span><br><span class="line">ä¸è¦èªªå»æ‰¾ä»€éº¼å¾ˆæœ‰åçš„è–ç¶“æœ¬ä¹‹é¡çš„ï¼Œ</span><br><span class="line">é™¤éåº•å­å·²ç¶“å¾ˆå¥½ï¼Œå¯ä»¥å†ä¾†ç ”è®€æœ‰æ·±åº¦çš„æ›¸ã€‚</span><br><span class="line"></span><br><span class="line">æœ€æœ€æœ€æœ€æœ€åŸºæœ¬çš„æ˜¯éœ€è¦ä»¥ä¸‹ï¼ˆå¾ˆé‡è¦æ‰€ä»¥å¼·èª¿ï¼‰ï¼š</span><br><span class="line">æ‡‚æ¨™æº–è¼¸å…¥è¼¸å‡ºã€è®Šæ•¸å®£å‘Šã€</span><br><span class="line"><span class="keyword">if</span>-<span class="keyword">else</span>ã€<span class="keyword">switch</span>ã€<span class="keyword">while</span>(<span class="keyword">do</span>-<span class="keyword">while</span>)ã€<span class="keyword">for</span>ç­‰æµç¨‹æ§åˆ¶èªæ³•ã€</span><br><span class="line">é™£åˆ—ã€å­—ä¸²ã€structçš„ä½¿ç”¨ï¼ˆC/C++ï¼‰ã€classçš„ä½¿ç”¨(JAVAã€c++ï¼‰</span><br><span class="line">ä»¥åŠç°¡å–®çš„æ’åºæ³•ã€‚</span><br><span class="line">é€²éšä¸€é»å°±å†å­¸è‡ªå®šå‡½æ•¸ã€éè¿´å‡½æ•¸ç­‰ï¼Œ</span><br><span class="line">é€™éšæ®µä¸»è¦æ˜¯å­¸ç¿’ç¨‹å¼çš„èªæ³•ï¼Œ</span><br><span class="line">è®“ä½ çš„æƒ³æ³•å¯ä»¥å¾ˆå¿«åœ°åŒ–æˆç¨‹å¼ç¢¼ï¼Œ</span><br><span class="line">ä¸ç”¨é¦¬ä¸Šèªªæƒ³å¯«å¾ˆå›°é›£çš„ç¨‹å¼ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>é€²å…¥ç·šä¸Šç¨‹å¼è§£é¡Œç³»çµ±ç·´ç¿’</span><br><span class="line"></span><br><span class="line">å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨<span class="string">"çœ‹"</span>çš„å°±èƒ½å­¸æœƒï¼Œ</span><br><span class="line">å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨<span class="string">"çœ‹"</span>çš„å°±èƒ½å­¸æœƒï¼Œ</span><br><span class="line">å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨<span class="string">"çœ‹"</span>çš„å°±èƒ½å­¸æœƒï¼Œ</span><br><span class="line">å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨<span class="string">"çœ‹"</span>çš„å°±èƒ½å­¸æœƒï¼Œ</span><br><span class="line">å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨<span class="string">"çœ‹"</span>çš„å°±èƒ½å­¸æœƒï¼Œ</span><br><span class="line">ï¼ˆå¾ˆé‡è¦æ‰€ä»¥æˆ‘å¯«äº”è¡Œï¼‰</span><br><span class="line">ã€€ã€€æœ‰äº›é‡è¦èª²ç¨‹åªæœ‰è¬›ç†è«–è€Œæ²’å¯¦éš›æ“åˆ€å¯«ç¨‹å¼ï¼Œå¯¦åœ¨æ˜¯ç„¡æ³•æ·±åˆ»äº†è§£å…¶ä¸­çš„å¥§å¦™è€Œç„¡æ³•æˆé•·ï¼Œç‰¹åˆ¥æ˜¯é‡åˆ°éœ€è¦ debug çš„æŠ€å·§æ˜¯æ›¸ä¸Šä¸æœƒæ•™çš„ï¼</span><br><span class="line">å› ç‚ºæ²’æœ‰äººæœƒæœ‰é‚£å€‹è€å¿ƒå¹«ä½ æª¢æŸ¥æ‰€æœ‰çš„ç¨‹å¼æ˜¯ä¸æ˜¯æœ‰ bugï¼Œ</span><br><span class="line">æ‰€ä»¥æ‰¾ä¸€å€‹å¯ä»¥è‡ªå‹• Judge çš„ç³»çµ±æ˜¯å¾ˆé‡è¦çš„ï½</span><br><span class="line"></span><br><span class="line">æ–°æ‰‹çš„è©±ï¼Œæ¨è–¦å…©å€‹å¹³å°</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€å€‹ï¼šã€Œé«˜ä¸­ç”Ÿç¨‹å¼è§£é¡Œç³»çµ±ã€</span><br><span class="line">http:<span class="comment">//zerojudge.tw/</span></span><br><span class="line">ã€€ã€€æ­·å²éå¸¸æ‚ ä¹…çš„å°ç£ä¸­æ–‡è§£é¡Œç³»çµ±ï¼Œæ˜¯ç”±é«˜é›„å¸«ç¯„å¤§å­¸ç¶“ç‡Ÿï¼Œè£¡é¢çš„é¡Œåº«å¤§éƒ½æ˜¯ä¸­æ–‡ï¼Œä¹Ÿæ˜¯é«˜ä¸­è·å­¸ç”Ÿå¸¸ç”¨çš„è§£é¡Œè¨“ç·´å¹³å°ï¼Œè¨±å¤šTOIã€IOIåœ‹æ‰‹å¤§éƒ½åœ¨é€™èµ·æ­¥ã€‚å¯æƒœé¡Œç›®ä¸¦æ²’æœ‰åšé›£æ˜“åº¦åˆ†é¡ï¼Œå³ä½¿åœ¨åŸºç¤é¡Œåº«çš„é¡Œç›®ä¹Ÿæœ‰å¾ˆé›£çš„ï¼Œéœ€è¦æœ‰äººæŒ‡å°æœƒæ¯”è¼ƒæ¸…æ¥šã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒå€‹ï¼šã€ŒITSAçš„E-TUTORã€</span><br><span class="line">http:<span class="comment">//e-tutor.itsa.org.tw/e-Tutor/</span></span><br><span class="line">ã€€ã€€è¿‘å¹´ä¾†æ–°çš„ä¸­æ–‡è§£é¡Œç³»çµ±ï¼Œç¶²ç«™ä¸Šæœ‰ä¸­è‹±æ–‡çš„é¡Œç›®ï¼Œæ¯ç¨®é¡Œç›®åˆæœ‰åˆ†å„é¡å‹çš„é¡Œç›®ï¼Œ</span><br><span class="line">æ›´æ˜¯æœ‰åšé›£æ˜“åº¦çš„å€éš”ï¼Œè®“å­¸è§£é¡Œçš„ä½¿ç”¨è€…æœ‰å€‹æ¸…æ¥šçš„æ–¹å‘ã€‚</span><br><span class="line">å¯æƒœé€™å¹³å°ç¼ºé»æ˜¯å¸¸æœ‰é¡Œç›®çš„æ•˜è¿°ä¸å®Œæ•´ï¼Œæ¯”å¦‚è¼¸å…¥æ¸¬è³‡çš„ç¯„åœæ²’èªªæ˜ç­‰ï¼Œ</span><br><span class="line">æœƒçµ¦ä½¿ç”¨è€…é¡å¤–çš„å›°æ“¾ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>é–‹å§‹å­¸ç¿’è³‡æ–™çµæ§‹ã€æ¼”ç®—æ³•</span><br><span class="line"></span><br><span class="line">ã€€ã€€åŸºæœ¬é¡Œè§£åˆ°ä¸€å€‹ç¨‹åº¦ï¼Œæœƒç™¼ç¾å­¸çš„æ±è¥¿ä¸å¤ ç”¨ï¼Œ</span><br><span class="line">é€™æ™‚å€™å°±è¦é€²å…¥ä¸‹ä¸€å€‹éšæ®µ,</span><br><span class="line">é–‹å§‹å­¸ç¿’è³‡æ–™çµæ§‹å’Œæ¼”ç®—æ³•äº†ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€é€™éƒ¨åˆ†ä¸€æ¨£æ˜¯å»æ›¸åº—æ‰¾ä¸€æœ¬ä½ çœ‹å¾—é †çœ¼çš„æ›¸,</span><br><span class="line">ä»¥æˆ‘å€‹äººè€Œè¨€ï¼Œåœ¨è³‡æ–™çµæ§‹çš„éƒ¨åˆ†ï¼Œé™¤äº†æœ‰åŸæ–‡è–ç¶“æœ¬</span><br><span class="line">Ellis Horowitzå¯«çš„Fundamentals of Data Structures in C(æˆ–C++)</span><br><span class="line">æˆ‘æœ‰å¦å¤–è²·è”¡æ˜å¿—çš„ã€Œè³‡æ–™çµæ§‹--ä½¿ç”¨C++(ä¹Ÿæœ‰C++ã€JAVAç‰ˆ)ã€</span><br><span class="line">å¦å¤–æœ‰ç¶²å‹æ¨è–¦èƒ¡æ˜­æ°‘çš„ã€Œåœ–è§£è³‡æ–™çµæ§‹ã€</span><br><span class="line">é¸ä¸€æœ¬å³å¯ï¼Œä¸»è¦æ˜¯çœ‹æ‡‚è³‡æ–™çµæ§‹çš„è§€å¿µ,</span><br><span class="line">æ›¸è£¡ç¨‹å¼ç¢¼å¸Œæœ›æ˜¯èƒ½ç ”è®€ï¼Œæœ€å¥½æ˜¯å¯¦ä½œã€‚</span><br><span class="line">è€Œæœ‰äº›æ¨¹çš„ç« ç¯€è£¡é¢, åªè¦çœ‹åˆ°äºŒå…ƒæ¨¹(åŒ…æ‹¬äºŒå…ƒæœå°‹æ¨¹ã€Heap)å°±å¤ äº†,</span><br><span class="line">å¾Œé¢AVL-Treeã€<span class="number">2</span><span class="number">-3</span><span class="number">-4</span> Treeã€B-Treeç­‰å¯ä»¥ä¸ç”¨çœ‹ï¼ŒåŸºæœ¬ä¸Šè§£é¡Œä¸æœƒç”¨åˆ°ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€æ¼”ç®—æ³•çš„æ›¸, ä¹‹å‰æˆ‘ä¸Šèª²åŸæ–‡æ›¸æ˜¯ç”¨ã€€Anany V. Levitinå¯«çš„Introduction to the Design &amp; Analysis of Algorithmsï¼Œè€Œä¸­æ–‡æ›¸æ¨è–¦è”¡å®—ç¿°çš„ã€Œæ¼”ç®—æ³•ï¼šä½¿ç”¨C++è™›æ“¬ç¢¼ã€ï¼Œé€™æœ¬çš„å…§å®¹è®“æˆ‘å­¸åˆ°å¾ˆå¤šã€‚è§£é¡Œçš„ç¨‹å¼æœ€å¸¸æœƒç”¨çš„æ¼”ç®—æ³•åŒ…å«å„å€‹æ“Šç ´æ³• ï¼ˆDivide-<span class="keyword">and</span>-Conquerï¼‰ã€å‹•æ…‹è¦åŠƒ(Dynamic Programming)ã€è²ªå©ªæ¼”ç®—æ³•(Greedy)ã€</span><br><span class="line">å›æº¯(Backtracking)ã€åˆ†æ”¯ç•Œé™æ³•(Branch-<span class="keyword">and</span>-Bound)ç­‰ï¼Œæœ‰æ™‚è§£é¡Œé‡åˆ°çš„å•é¡Œå¯ä»¥ç”¨å¾ˆå¤šç¨®æ¼”ç®—æ³•è§£ã€‚</span><br><span class="line">è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„æ›¸è®€å®Œå¾Œï¼Œé‚„ä¸è¶³çš„å¯ä»¥åˆ°ã€Œæ¼”ç®—æ³•ç­†è¨˜ã€æŒ–è³‡æ–™http:<span class="comment">//www.csie.ntnu.edu.tw/~u91029/</span></span><br><span class="line">é€™ç¶²ç«™é™ªæˆ‘å¥½å¹¾å¹´ï¼Œä¹Ÿæœ‰æˆ‘å¹«ç«™é•·debugæ–‡ç« çš„ç—•è·¡ï¼Œå¯æƒœç¾åœ¨çµ‚æ­¢ç‡Ÿé‹ï¼Œæœ‰é»å¯æƒœï½</span><br><span class="line">æ¼”ç®—æ³•è–ç¶“æœ¬æ˜¯MITæ•™æˆCormenå¯«çš„Introduction to Algorithmsï¼Œä»¥å°æ¸…äº¤æˆè³‡è¨Šå·¥ç¨‹å­¸ç”Ÿä»¥åŠåœ‹æ‰‹ï¼Œå¹¾ä¹éƒ½çœ‹é€™æœ¬å­¸èµ·ï¼Œæ›¸çš„å…§å®¹è¬›çš„å¾ˆå®Œæ•´ï¼Œèªªæ˜¯è–ç¶“æœ¬ä¸ç‚ºéï¼ŒçœŸçš„è¦è®€å¯ä»¥å•ƒé€™æœ¬ï¼Œä½†ä¸å»ºè­°è®€ä¸­æ–‡ç¿»è­¯æœ¬ï¼Œç¿»è­¯çš„å¾ˆçˆ›ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>ä½¿ç”¨é€²éšçš„ç·šä¸Šç¨‹å¼è§£é¡Œç³»çµ±</span><br><span class="line"></span><br><span class="line">ã€€ã€€ç¬¬äºŒæ®µæåˆ°é«˜ä¸­ç”Ÿç¨‹å¼è§£é¡Œç³»çµ±(ZeroJudge)ã€E-TUTOR</span><br><span class="line">é›–ç„¶è£¡é¢éƒ¨åˆ†é¡Œç›®æ¯”è¼ƒç°¡å–®ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å»ºç«‹è‡ªä¿¡å¿ƒã€å­¸ç¿’åŸºæœ¬è§£é¡Œæ–¹æ³•ã€‚</span><br><span class="line">ä½†åˆ°é”æŸä¸€ç¨‹åº¦å¾Œï¼Œæœ‰äº›é¡Œç›®æœƒå¾ˆé›£ã€ç”šè‡³å­¸ç¿’æˆé•·çš„å¹«åŠ©ä¸å¤§ï¼Œæ­¤æ™‚å¯ä»¥æ”¹åˆ°å…¶ä»–ç¶²ç«™ç·´ç¿’ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€é¦–å…ˆæœ€æ¨è–¦çš„å°±æ˜¯æœ€å¤šäººç”¨éï¼Œ ä¿—ç¨± ACM çš„ UVa Online Judge,</span><br><span class="line">http:<span class="comment">//uva.onlinejudge.org/</span></span><br><span class="line">è€Œã€ŒLuckyè²“çš„ACMåœ’åœ°ã€æœ‰æä¾›ä¸€äº›é¡Œç›®çš„ä¸­è­¯é‚„æœ‰é›£æ˜“åº¦åˆ†ç´š,</span><br><span class="line">http:<span class="comment">//luckycat.kshs.kh.edu.tw/</span></span><br><span class="line">å¯ä»¥æ­é…ä½¿ç”¨ã€‚ç•¶ç„¶æ˜¯å¸Œæœ›èƒ½çœ‹åŸæ–‡ç›´æ¥è§£é¡Œæ˜¯æœ€å¥½ï¼Œç•¢ç«Ÿåœ‹éš›è§£é¡Œå…¨éƒ½æ˜¯ç”¨è‹±æ–‡å‡ºé¡Œã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€ç¬¬ äºŒå€‹æ˜¯Uhuntï¼Œé€™ä¸æ˜¯æ–°çš„è§£é¡Œç³»çµ±ï¼Œè€Œæ˜¯UVaçš„å¯¦æ³ç³»çµ±ï¼Œæ˜¯ç”±æ–°åŠ å¡å¤§å­¸çš„è§£é¡Œåœ˜éšŠæ‰€å»ºç«‹çš„ç¶²ç«™ï¼Œæä¾›ç¾åœ¨å…¨ä¸–ç•Œæœ‰å“ªäº›äººåœ¨è§£é¡Œã€è§£é¡Œç‹€æ³å¦‚ä½•ã€æ’ åå¦‚ä½•ã€ç¨‹å¼åŸ·è¡Œæ™‚é–“å¤šé•·ï¼Œå°æˆ‘è€Œè¨€æ˜¯å€‹å¾ˆåˆºæ¿€çš„ç¶²ç«™ï¼Œä¸”é•·ä¹…ä¸‹ä¾†æœƒçœ‹è¦‹ä¸€äº›å¾ˆå¥‡æ€ªçš„ç†ŸIDã€‚è€Œuhuntä¸Šä¸­é–“æœ‰ä¸€å€‹Competitive Programming Exercisesï¼Œæ˜¯æ–°åŠ å¡è§£é¡Œåœ˜éšŠæ‰€åˆ†é¡çš„é¡Œç›®ï¼Œæœ‰åˆ†å¥½é¡Œç›®é¡å‹èˆ‡é›£æ˜“åº¦ï¼Œä¹Ÿæ˜¯æä¾›ä½¿ç”¨è€…å¾ˆå®Œæ•´çš„è§£é¡Œæ–¹å‘ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> é€²éšè§£é¡Œæ›¸ç±</span><br><span class="line">ã€€ã€€å‰é¢æçš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•æ›¸ç±ï¼Œåªæ˜¯ï¼‚åŸºç¤çŸ¥è­˜ï¼‚è€Œå·²ï¼Œæœ‰æ™‚å­¸å®Œå¾Œé‚„æ˜¯ç„¡æ³•å°æŸäº›é¡Œç›®æƒ³å‡ºæ–¹æ³•ï¼Œæ­¤æ™‚æ¨è–¦å¹¾æœ¬æ›¸ç±ã€‚</span><br><span class="line">ç¬¬ä¸€æ˜¯åŠ‰æ±ä½³æ’°å¯«çš„ã€Œç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€è·Ÿã€Œç®—æ³•ç«èµ›å…¥é—¨ç»å…¸â€”â€”è®­ç»ƒæŒ‡å—ã€</span><br><span class="line">ï¼Œ åœ¨å°ç£å»å¹´æœ‰ä»£ç†å‡ºç¹é«”ç‰ˆï¼Œåç¨±åˆ†åˆ¥ç‚ºã€Šæå‡ç¨‹å¼è¨­è¨ˆçš„é‚è¼¯æ€è€ƒåŠ›â”€åœ‹éš›ç¨‹å¼è¨­è¨ˆç«¶è³½ä¹‹æ¼”ç®—æ³•åŸç†ã€é¡Œå‹ã€è§£é¡ŒæŠ€å·§èˆ‡é‡é»è§£æã€‹èˆ‡ã€Šæå‡ç¨‹å¼è¨­è¨ˆçš„è§£é¡Œæ€ è€ƒåŠ›â”€åœ‹éš›æ¼”ç®—æ³•ç¨‹å¼è¨­è¨ˆç«¶è³½è¨“ç·´æŒ‡å—ã€‹ã€‚é€™å…©æœ¬æ›¸è€Œè¨€ï¼Œåˆå­¸è€…å…ˆè®€ã€Œç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€ï¼Œè®€å®Œå¾Œå†ä¾†è®€ã€Œç®—æ³•ç«èµ›å…¥é—¨ç»å…¸â€”â€”è®­ç»ƒæŒ‡å—ã€ã€‚æ›¸çš„å…§å®¹å°±æ˜¯ å°ˆé–€è¬›è§£å¦‚ä½•å°‡åŸºæœ¬çš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çŸ¥è­˜ä¾†è§£æ±ºç¨‹å¼è§£é¡Œçš„é¡Œç›®ã€‚ä»¥Uvaè€Œè¨€ï¼Œé¡Œç›®æ˜¯è®ŠåŒ–å¤šç«¯ï¼Œæœ‰äº›é¡Œç›®è‹¥æ²’æœ‰äººæŒ‡å°ç¢ºå¯¦å¾ˆé›£è‡ªå·±æƒ³å‡ºä¾†ï¼Œè€Œé€™äº›æ›¸æä¾› å¾ˆå¤šæ•´åˆè³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„æ¦‚å¿µï¼Œæå‡è§£é¡Œè€…çš„æ€è·¯ã€‚</span><br><span class="line">å¦å¤–ä¸€é¡Œï¼ŒåŠ‰æ±ä½³èµ·åˆæ˜¯ä¸­åœ‹çš„è§£é¡Œåœ‹æ‰‹ï¼Œç¾ä»»ä¸­åœ‹å°ˆæ¥­è§£é¡Œæ•™ç·´èˆ‡ACM-ICPCå‘½é¡Œå§”å“¡ï¼Œä¸­åœ‹è³‡è¨Šå­¸ç”Ÿå¹¾ä¹éƒ½è½éä»–åå­—ã€‚ä»–å¯«äº†é€™äº›æ›¸æ›´æ˜¯å¸¶å‹•ä¸­åœ‹çš„è§£é¡Œæ°£æ°›ï¼Œæ¯å¹´ä¸Šæµ·äº¤é€šå¤§å­¸å¹¾ä¹éƒ½æœƒé€²åˆ°ACM-ICPCæ±ºè³½çš„å‰å¹¾åï¼ŒçœŸçš„æ˜¯å¾ˆææ€–ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæœ¬æ˜¯æ—¥æœ¬åœ‹æ‰‹å¯«çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ–ãƒƒã‚¯ï¼Œå°ç£ä¹Ÿæœ‰ä»£ç†æˆç¿»è­¯æ›¸ï¼Œå«åšã€ŠåŸ¹é¤Šèˆ‡é›éŠç¨‹å¼è¨­è¨ˆçš„é‚è¼¯è…¦ï¼šä¸–ç•Œç´šç¨‹å¼è¨­è¨ˆå¤§è³½çš„çŸ¥è­˜ã€å¿ƒå¾—èˆ‡è§£é¡Œåˆ†äº«ã€‹ï¼Œä¹Ÿæ˜¯è·ŸåŠ‰æ±ä½³å¯«å¾—å·®ä¸å¤šï¼Œåªæ˜¯é€™æœ¬æ›¸æ˜¯æ‹¿POJè·ŸGCJçš„é¡Œç›®ä¾†è¬›è§£ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> å­¸æµ·ç„¡æ¶¯</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä»¥è§£é¡Œè€Œè¨€ï¼Œåˆå­¸è€…æœ€å®¹æ˜“çŠ¯çš„éŒ¯ï¼Œä»¥ç‚ºåªçœ‹æ›¸å°±æ‡‚ä»€éº¼å«åšè³‡æ–™çµæ§‹æˆ–æ¼”ç®—æ³•ï¼Œç”šè‡³åªæŒ‘ç°¡å–®é¡Œä¾†åšï¼Œé€™æ¨£æ˜¯æ°¸é ä¸æœƒæˆé•·ã€‚ä»¥æˆ‘å€‹äººè€Œè¨€ï¼Œå¤§å­¸çš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®— æ³•éƒ½æ˜¯æœ‰å¯«ç¨‹å¼ä½œæ¥­ï¼Œä¸”ä½”ç¸½æˆç¸¾å¾ˆé‡ï¼Œä¸å¯«å¥½å°±æ˜¯ç­‰è‘—è¢«ç•¶æ‰ï¼Œå› æ­¤æœ‰å¾ˆå¤šæ™‚é–“èŠ±åœ¨å­¸å¥½è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„ç†è«–èˆ‡ç¨‹å¼è¨­è¨ˆã€‚å¾å¤§äºŒé–‹å§‹å°±è·Ÿè‘—å­¸é•·å§é€²å…¥è§£é¡Œ æ¯”è³½é€™ä¸€æ¢ä¸æ­¸è·¯ï¼ˆï¼Ÿï¼‰ï¼Œèµ·åˆçœŸçš„å¦‚åŒå‰é¢æåˆ°ï¼Œå³ä½¿èª²ç¨‹å­¸éè³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„åŸºç¤çŸ¥è­˜ï¼Œå»é‚„æ˜¯ä¸æœƒè½‰æ›æˆè§£é¡Œçš„æ–¹æ³•ï¼Œæ„æ€å°±æ˜¯è§£é¡Œå¯«å¤ªå°‘ï¼Œä¸”åˆç¢°å¾—å¤ª ç°¡å–®ï¼Œæ‰æ²’æœ‰é€²æ­¥ã€‚ä¹‹å¾Œåˆ°äº†å¤§ä¸‰ï¼Œå¤§æ¦‚ä¹Ÿæ‰è§£äº†ä¸€ç™¾å¤šé¡ŒUvaé¡Œç›®ï¼Œä½†è¦ºå¾—å­¸çš„é‚„æ˜¯å°‘ã€‚ç›´åˆ°è½‰å­¸è‡³é•·æ¦®ï¼Œçªç„¶æœ‰å€‹ç™¼ç¥ç¶“çš„å‹•åŠ›ï¼Œé–‹å§‹ç˜‹ç‹‚è§£é¡Œï¼ŒçœŸæ­£é«”æœƒåˆ° è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„å¯¦ä½œèƒ½åŠ›èˆ‡å¥§å¦™ä¹‹è™•ï¼ŒçŸ­çŸ­ä¸€å¹´å¤šè§£äº†ï¼”ç™¾é¡Œï¼Œé€™è¶Ÿéç¨‹é›–ç„¶è¾›è‹¦ï¼Œä½†æ˜¯å»éå¸¸å€¼å¾—ï¼</span><br><span class="line">ã€€ã€€å¾ä»¥å‰å»ä¸­å±±ã€æˆå¤§çš„å…¨åœ‹å¤§å°ˆç¨‹å¼ç«¶ è³½ã€å—å€ç¨‹å¼ç«¶è³½ç­‰æ¯”è³½ï¼Œå¸¸å¸¸çœ‹è¦‹å¾ˆç†Ÿæ‚‰çš„æˆå¤§é¸æ‰‹è‡‰å­”ï¼Œç›´åˆ°ç¾åœ¨é‡åˆ°çš„åŒä¸€è¼©èˆ‡æ–°ä¸€ä»£çš„å¼·é¸æ‰‹ï¼Œé€™è¶Ÿæ¯”è³½éç¨‹å€¼å¾—å›æ†¶ã€‚æœ€å¾Œä»Šå¹´çš„ITSAæ¡‚å† è³½ä»æ²’ç² çï¼Œä½†ä¹Ÿé‚„æ˜¯å€¼å¾—äº†ï¼Œè‡³å°‘è·Ÿæˆå¤§åŒè§£æ•¸é‚„è »é«˜èˆˆ(?)ã€‚è€ŒCPE(å¤§å­¸ç¨‹å¼èƒ½åŠ›æª¢å®š)åœ¨ä¸Šç¦®æ‹œäºŒæ‹¿ä¸‹A+çš„æˆç¸¾ï¼Œä¹Ÿæ˜¯äº†ç„¡éºæ†¾ï¼</span><br><span class="line">ã€€ã€€å¸Œæœ›é€™ç¯‡æ–‡ç« æœ‰èƒ½å¹«åŠ©åˆ°æœ‰å…±åŒå¿—è¶£åœ¨è§£é¡Œä¸Šçš„äººï¼Œæ›´å¸Œæœ›èƒ½å¸¶å‹•ç¨‹å¼è§£é¡Œæ°£æ°›ï¼Œè§£é¡Œåªæœ‰å¥½è™•æ²’å£è™•ï¼Œä¹Ÿå¦‚æ¼”ç®—æ³•ç­†è¨˜æ‰€è¿°ï¼Œè§£é¡Œèƒ½å­¸åˆ°ä»¥ä¸‹é€™äº”ç¨®èƒ½åŠ›ï¼š</span><br><span class="line">ã€€ã€€ä¸€ã€æ™ºåŠ›æ€è€ƒï¼šè—‰ç”±æ™ºåŠ›æ¸¬é©—å•é¡Œã€ç›Šæ™ºéŠæˆ²ï¼ˆå¦‚æ•¸ç¨ã€å­”æ˜æ£‹ã€å€‰åº«ç•ªï¼‰ã€æ•¸å­¸ç§‘æ™®æ›¸ç­‰ç­‰ï¼Œå¯ä»¥æ´»çµ¡å¤§è…¦æ€è·¯ï¼ŒåŸ¹é¤Šè§€å¯Ÿå•é¡Œèˆ‡åˆ†æå•é¡Œçš„èƒ½åŠ›ã€‚</span><br><span class="line">ã€€ã€€äºŒã€æ•¸å­¸ï¼šå¾å­¸æ ¡æ•™ç§‘æ›¸å¯ä»¥å­¸åˆ°å¾ˆå¤šæ•¸å­¸æ¦‚å¿µã€æ•¸å­¸æ–¹æ³•ã€ç”šè‡³æ˜¯æ•¸å­¸å…¬å¼ï¼Œå¥—ç”¨åœ¨å•é¡Œä¸Šé¢ä¾†è§£æ±ºå•é¡Œã€‚</span><br><span class="line">ã€€ã€€ä¸‰ã€è¨ˆç®—å­¸ï¼šå¾å­¸æ ¡æ•™ç§‘æ›¸å’Œç¶²è·¯ä¸Šçš„è³‡æºï¼Œå¯ä»¥å­¸åˆ°å¾ˆå¤šè¨ˆç®—æ–¹æ³•ï¼Œå¥—ç”¨åœ¨å•é¡Œä¸Šé¢ä¾†è§£æ±ºå•é¡Œã€‚</span><br><span class="line">ã€€ã€€å››ã€ç¨‹å¼èªè¨€ï¼šå¾ç¨‹å¼èªè¨€çš„æ›¸ç±ï¼ˆ C++ Primer ã€ Effective C++ ã€ç¨‹å¼è¨­è¨ˆå¸«çš„è‡ªæˆ‘ä¿®é¤Šï¼‰ã€è¨ˆç®—æ©Ÿæ¦‚è«–ç­‰æ›¸ä¸­å­¸ç¿’ã€‚</span><br><span class="line">ã€€ã€€äº”ã€ç¨‹å¼è¨­è¨ˆï¼šå¾ open source èˆ‡å…¶ä»–äººå¯«çš„ç¨‹å¼ç¢¼ä¸­å­¸ç¿’ä¸€äº›å¯«ç¨‹å¼çš„åŸå‰‡ä»¥åŠæ¼‚äº®çš„å¯«æ³•ã€‚</span><br><span class="line">æ‰€ä»¥ï¼Œè§£é¡ŒZ&gt;Bæ˜¯ç™¾åˆ†ç™¾æ­£ç¢ºçš„!</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> ç–‘å•</span><br><span class="line">ã€€ã€€ä¹Ÿæœ‰äººæœƒå•ï¼Œåšè§£é¡Œé‚£éº¼å¤šå°å¯¦éš›æ’°å¯«å°ˆé¡Œï¼ˆç³»çµ±ï¼‰æœ‰ç”¨å—ï¼Ÿé€™è¦å›ç­”ã€Œéƒ¨åˆ†æœ‰ç”¨ã€ï¼Œç•¢ç«Ÿä¸€å€‹ç³»çµ±å°±æ˜¯è¦è§£æ±ºä¸€å¤§å †å•é¡Œé›†åˆçš„å·¥ç¨‹æ–¹æ³•ï¼Œè€Œè§£é¡Œåªæœ‰è§£ä¸€éƒ¨åˆ†å°å• é¡Œã€‚ä½†æ˜¯å­¸éæ¼”ç®—æ³•æœƒçŸ¥é“ï¼Œè¦æƒ³è¾¦æ³•æŠŠå•é¡Œåˆ‡æˆå­å•é¡Œä¾†è§£æ±ºï¼Œåšç³»çµ±ä¹Ÿä¸€æ¨£ï¼Œæ¯ä¸€å€‹ç³»çµ±å¯ä»¥åˆ‡æˆå„ç¨®åŠŸèƒ½çš„å­ç³»çµ±ï¼Œæ¯ä¸€å­ç³»çµ±æ˜¯é‡å°ç‰¹å®šå•é¡Œä½œè§£æ±ºçš„æ–¹ æ¡ˆã€‚å› æ­¤ä¸€å€‹å­ç³»çµ±çš„åŠŸèƒ½å®Œæ•´ï¼Œæ­£æ˜¯ä¸€å€‹ï¼ˆæ•¸å€‹ï¼‰ç¨‹å¼çš„åŸ·è¡Œèƒ½åŠ›ï¼Œè€Œç¨‹å¼åˆå¦‚ä¸€ä½Niklaus Wirthå¤§å¸«æ‰€èªªï¼šã€Œç¨‹å¼ã€€ï¼ã€€æ¼”ç®—æ³•ï¼‹è³‡æ–™çµæ§‹ã€ã€‚å¥½å¾—ç¨‹å¼å¯ä»¥æ•´åˆå‡ºä¸€å€‹å¥½çš„ç³»çµ±ï¼Œé€™æ˜¯æˆ‘å€‹äººå°ç³»çµ±å¯¦ä½œçš„è§€å¿µï¼Œæ‰€ä»¥è§£é¡Œå­¸çš„å¥½ï¼Œä»ç„¶å°åšç³»çµ±æœ‰å¹« åŠ©ã€‚åªæ˜¯æœ‰äº›æ˜¯è§£é¡Œå­¸ä¸åˆ°çš„ï¼Œæ¯”å¦‚å¦‚ä½•ä½¿ç”¨APIä¾†åšå®Œæˆä¸€å€‹å­ç³»çµ±çš„åŠŸèƒ½ï¼Œå¿…é ˆè¦æœ‰é–±è®€æ–‡ä»¶çš„èƒ½åŠ›ï¼Œè§£é¡Œä¸Šæ²’æœ‰é–±è®€æ–‡ä»¶çš„å­¸ç¿’æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">-------- <span class="number">2014</span>/<span class="number">6</span>/<span class="number">16</span>è£œå……---------</span><br><span class="line">ã€€ã€€é€™é™£å­æ¥è§¸åˆ°<span class="number">2048</span> botå¤§è³½ï¼Œåœ¨é€™éç¨‹å­¸åˆ°ä½•è¬‚å°æŠ—æœå°‹çš„branch-<span class="keyword">and</span>-boundæ¼”ç®—æ³•ï¼ŒåŒ…å«minimaxã€alpha-beta pruneã€expectimaxã€negascoutç­‰æ–¹æ³•ã€‚ç›®å‰ACMé¡Œç›®çš„è§£é¡Œæˆ‘é‚„æ²’é‡åˆ°å‰ªæçš„é¡Œç›®ï¼Œè—‰ç”±é€™<span class="number">2048</span>æ¯”è³½çš„æ©Ÿæœƒï¼Œå­¸åˆ°äº†å‰ªæçš„ç²¾ç¥ï¼åªæ˜¯åœ‹å…§ç ”ç©¶å–®ä½å¤ªå¼·äº†ï¼Œäº¤å¤§çš„å±…ç„¶èƒ½åå¹¾%çš„<span class="number">16384</span> Tile....è¶…å¥½å¥‡ä»–å€‘æ¼”ç®—æ³•èƒ½å¿«ç‹ æº–åˆ°æ­¤æˆç¸¾ã€‚</span><br></pre></td></tr></table></figure></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> æ¾„æ¸…é—®é¢˜(clarification)</span><br><span class="line"></span><br><span class="line">   é‡å¤é—®é¢˜ï¼ŒæŠŠç™½æ¿åˆ†æˆä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†åˆ—å‡ºæ‰€æœ‰çš„æ¡ä»¶ï¼šè¾“å…¥è¾“å‡ºæ˜¯ä»€ä¹ˆ(ç±»å‹ï¼Œpattern)ï¼Œæ•°æ®å¤§å°ç­‰ï¼›ç¬¬äºŒéƒ¨åˆ†ç”¨æ¥åšæ¼”ç®—ï¼Œç¬¬ä¸‰éƒ¨åˆ†ç”¨æ¥å†™ä»£ç ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> å¼€å§‹åœ¨ç™½æ¿ç¬¬äºŒéƒ¨åˆ†ç ”ç©¶é¢è¯•å®˜ç»™ä½ çš„ä¾‹å­ï¼Œä¸ºé¢è¯•å®˜åˆ†æé—®é¢˜ï¼Œæ¯”å¦‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³å“ªäº›å­é—®é¢˜ï¼Œç„¶åçœ‹èƒ½å¦å¾—åˆ°ä¸€ä¸ªbrute forceçš„è§£ï¼Œè¿™é‡Œå°±æ˜¯æ£€æŸ¥æ‰€æœ‰çš„pairï¼ŒO(n^<span class="number">2</span>)çš„å¤æ‚åº¦ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> é¢è¯•å®˜è‚¯å®šä¼šå«ä½ ä¼˜åŒ–ï¼Œè¿™æ—¶ä½ å°±è¦ç§¯ææ€è€ƒï¼ŒåŒæ—¶è¯´å‡ºä½ åœ¨æƒ³ä»€ä¹ˆï¼Œæ¯”å¦‚å¯ä¸å¯ä»¥ä¸ç”¨æ£€æŸ¥pairï¼Œæ‰¾æ¯ä¸ªæ•°å’Œtarget numberçš„å·®å€¼æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œè¿™æ ·åªéœ€è¦éå†ä¸€éå°±è¡Œäº†å‘€ï¼Œä¸ºäº†æ›´å¿«æ£€æŸ¥å‡ºæ¥å·®å€¼æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ç”¨å“ˆå¸Œè¡¨å®ç°æœ€å¥½æƒ…å†µO(<span class="number">1</span>)çš„æŸ¥è¯¢é€Ÿåº¦ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> é¢è¯•å®˜è¡¨ç¤ºä»–è®¤å¯ä½ ï¼Œè¿™ä¸ªæ—¶å€™ä½ è¦æ€»ç»“ä¸€ä¸‹ä½ çš„è§£é¢˜æ­¥éª¤<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªæ­¥éª¤ä¸‹ï¼Œä¹¦å†™å¯¹åº”çš„ä»£ç ï¼Œä¸­é—´ä¸éœ€è¦è¯´å¤ªå¤šè¯ï¼Œæ¯ä¸€ä¸ªblockå†™ä¹‹å‰äº¤ä»£ä¸€ä¸‹ï¼Œå†™å®Œåæ€»ç»“ä¸€ä¸‹å°±è¡Œï¼Œæ¯å®Œæˆä¸€ä¸ªè¦æ±‚ï¼Œåœ¨ç™½æ¿ç¬¬ä¸€éƒ¨åˆ†å¯¹åº”çš„åœ°æ–¹æ‰“é’©ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> å¯ä»¥ä½¿ç”¨ä¸åŒé¢œè‰²çš„ç¬”ï¼Œæ ‡æ³¨ä¸åŒçš„éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> å†™å®Œä»¥åï¼Œè·‘å‡ ä¸ªæœ‰ä»£è¡¨æ€§çš„test <span class="keyword">case</span>ï¼Œæ—¶ç©ºå¤æ‚åº¦åˆ†æã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ³¨æ„å¥½å˜é‡å’Œå‡½æ•°çš„å‘½åï¼Œå°‘ç”¨å…¨å±€å˜é‡ï¼Œå¤§çš„å‡½æ•°ä¸€å®šè¦æ‹†åˆ†æˆè‹¥å¹²å­å‡½æ•°ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒçš„ä»»åŠ¡ï¼Œè¿™æ ·ä»£ç å¯è¯»æ€§é«˜ï¼Œä¿®æ”¹èµ·æ¥ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œæ¯”å¦‚è¯´é¢è¯•å®˜è¯´ä½ Aå‡½æ•°é‡Œæœ‰ä¸ªbugï¼Œä½ å¯ä»¥è¿…é€Ÿå®šä½åˆ°Aå‡½æ•°çš„ä½ç½®ã€‚å¤§å®¶å¯ä»¥æœç´¢ä¸€äº›å…³äºgood coding practiceçš„æ–‡ç« ã€‚</span><br><span class="line"></span><br><span class="line">å®é™…ç¢°åˆ°çš„é¢˜ç›®å¯èƒ½ä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œä½ çš„æ€è·¯å¯èƒ½ä¼šå¡ä½ï¼Œä¸è¦æ…Œã€‚é¢è¯•å®˜æƒ³è¦çœ‹åˆ°çš„å°±æ˜¯ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯å‘Šè¯‰é¢è¯•å®˜ä½ çš„æ–¹å‘ï¼Œä½ å¡ä½çš„åœ°æ–¹åœ¨å“ªé‡Œï¼Œè€Œä¸æ˜¯è‡ªå·±é—·å¤´æƒ³ã€‚ä½ è¿™ä¹ˆåšé‡Šæ”¾äº†ä¸€ä¸ªç§¯æçš„æ²Ÿé€šä¿¡å·ï¼Œé‚£ä¹ˆé¢è¯•å®˜è‡ªç„¶ä¹Ÿä¼šç»™ä½ ç§¯æçš„å›åº”ã€‚</span><br><span class="line"></span><br><span class="line">æ­¤å¤–ï¼Œå¦‚æœé¢è¯•å®˜æ‰“æ–­äº†ä½ ï¼Œé—®ä½ what about doing something in <span class="keyword">this</span> way....è¿™å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªæç¤ºå‘Šè¯‰ä½ çš„æ–¹æ³•ä¸å¯¹ã€‚è¯·ä½ ä¸€å®šï¼Œä¸€å®šï¼Œä¸€å®šæŒ‰ç…§é¢è¯•å®˜è¯´çš„åšï¼å³ä¾¿ä½ è§‰å¾—ä½ çš„æ–¹æ³•é©¬ä¸Šå°±è¦åšå‡ºæ¥äº†ã€‚è¦çŸ¥é“ç®—æ³•é¢˜å°±å¥½æ¯”èµ°è¿·å®«ï¼Œä½ ç”¨ä½ çš„æ–¹æ³•å‘ç°å‡ºå£å¥½åƒå°±åœ¨çœ¼å‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé¢è¯•å®˜æé†’ä½ å°è¯•å¦ä¸€ç§æ–¹æ¡ˆï¼Œè€Œä½ éœ€è¦å¾€å›èµ°å¾ˆå¤šæ­¥ã€‚å¾ˆå¤šäººè¿™ä¸ªæ—¶å€™æ ¹æœ¬å°±å¬ä¸è¿›é¢è¯•å®˜çš„è¯ï¼Œè§‰å¾—è‡ªå·±çš„æ–¹æ³•è‚¯å®šè¡Œï¼Œæ®Šä¸çŸ¥é¢è¯•å®˜çŸ¥é“æ•´ä¸ªè¿·å®«æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œè€Œä½ çœ‹ä¼¼æ­£ç¡®çš„é‚£æ¡è·¯ï¼Œå¾ˆå¯èƒ½æœ€ç»ˆæ˜¯ä¸€æ¡æ­»è·¯ã€‚å¦‚æœä½ ä¸€æ„å­¤è¡Œï¼Œä½ çš„feedbackç»å¯¹æ˜¯ä¸å¥½çš„ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Foundation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithms </tag>
            
            <tag> Foundation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Application</title>
      <link href="/2019/04/19/Application/"/>
      <url>/2019/04/19/Application/</url>
      
        <content type="html"><![CDATA[<p><a href="https://medium.com/@spongie97/2019-fall-ms-cs-%E4%B8%AD%E4%BD%8Egpa%E9%81%B8%E6%A0%A1-82f232ac9f75" target="_blank" rel="noopener">2019 Fall MS CS ä¸­ä½GPAé¸æ ¡<br></a><br><a href="https://gradschool.utexas.edu/sites/default/files/Average%20GPA%202017-2018.pdf" target="_blank" rel="noopener">ADMISSION UT AUSTIN</a><br><a href="https://www.1point3acres.com/bbs/thread-566249-1-1.html" target="_blank" rel="noopener">https://www.1point3acres.com/bbs/thread-566249-1-1.html</a><br>å¦‚ä½•å†™å¥½ä¸€ç¯‡æ¨èä¿¡çš„åˆç¨¿</p><h2 id="Rooling"><a href="#Rooling" class="headerlink" title="Rooling"></a>Rooling</h2><p>MS in CS@university of Chicago<br>MS in CS@Brown<br>MS in CS@University of Rochester<br>CS@Brandeis</p><h2 id="CONVERT-GradE"><a href="#CONVERT-GradE" class="headerlink" title="CONVERT GradE"></a>CONVERT GradE</h2><ul><li><a href="http://gpa.eng.uci.edu/node/299" target="_blank" rel="noopener"> UCI CONVERT </a></li></ul><p><img src="https://res.cloudinary.com/dr1eptem7/image/upload/v1569920814/UCI_Convert.png" alt="UCI_Convert"></p><h2 id="GUIDE-LINE"><a href="#GUIDE-LINE" class="headerlink" title="GUIDE LINE"></a>GUIDE LINE</h2><ul><li><a href="http://www.pgbovine.net/" target="_blank" rel="noopener">ASIAN Prof Guide</a></li><li><a href="https://www.1point3acres.com/bbs/forum.php?mod=viewthread&amp;tid=91900" target="_blank" rel="noopener">After abroad</a></li><li><a href="https://www.1point3acres.com/bbs/thread-80717-1-1.html" target="_blank" rel="noopener">THE MISTAKE WHEN U APPLY FOR U</a></li></ul><h2 id="é¸æ ¡å®šä½ç¶“é©—å¸–"><a href="#é¸æ ¡å®šä½ç¶“é©—å¸–" class="headerlink" title="é¸æ ¡å®šä½ç¶“é©—å¸–"></a>é¸æ ¡å®šä½ç¶“é©—å¸–</h2><p><a href="https://zhuanlan.zhihu.com/p/83669147" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/83669147</a><br>ç¾å›½å­¦æ ¡æ’å</p><ul><li><p><a href="https://yocket.in/" target="_blank" rel="noopener">YOCKET Indian Application</a> Recommend</p></li><li><p><a href="https://www.1point3acres.com/bbs/thread-506008-1-1.html" target="_blank" rel="noopener">[ç”³è¯·æ€»ç»“] 19fall cs phd é€€å­¦é‡ç”³/èƒŒæ™¯æå‡/é€‰æ ¡ç­–ç•¥/ç§‘ç ”ç›¸å…³</a></p></li><li><p><a href="https://www.1point3acres.com/bbs/forum.php?mod=viewthread&amp;tid=513403&amp;extra=&amp;page=1" target="_blank" rel="noopener">å®šä½ åäº”| SE | ä¸­** | å¤§å‚åšSpark 3å¹´ | å…¨èšå¾· æ±‚å»ºè®®</a></p></li></ul><h2 id="School-INFO"><a href="#School-INFO" class="headerlink" title="School INFO"></a>School INFO</h2><ul><li><a href="https://www.1point3acres.com/bbs/thread-342983-1-1.html" target="_blank" rel="noopener">Northwestern University CE/CSæ•´ä½“ä»‹ç»&amp;ä¸å®Œå…¨è¯¾ç¨‹ä»‹ç»ï¼ˆNWU, NU, è¥¿åŒ—ï¼‰</a></li></ul><h2 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h2><p>California &gt; Big Seattle &gt;  Texas &gt; Boston</p><p>11: Dartmouth  UCI NEU Tandon PennState Tufts UCD UMT UVA UCR NWU</p><p>5 NCSU UTD ASU UCSC UCR</p><p>å½©ç¥¨: CMU SV-SE, UCSD CS, Rice MCS (Stanford UCLA UCB cornell )3+4<br>å†²åˆº: UCSD ECE, Columbia CS, UMich CS, Tandon CS, Dartmouth Gatech CSE 6<br>ä¸»ç”³: USC CS28,  NEU CS PennState ucdavis UvA umass sbu uci mcs UMT utah9<br>ä¿åº•: NEU CS-align syrauce ASU NCSU UCSC(utd osu)6+2  nwu</p><p>å†²åˆºï¼šMSE @CMUï¼›MCS @UCSDï¼›MCS @Riceï¼›MSE @University of Michiganï¼ŒAnn Arborï¼›MCS @USC<br>ä¸»ç”³ï¼šMCS @UCIï¼›MCS @UCRï¼›MCS @UWï¼›MCS @NYUï¼›MCS @NEU<br>ä¿åº•ï¼šMCS @Boston Universityï¼›MCS @Syracuseï¼›MCS @GWU</p><p><a href="https://www.mccormick.northwestern.edu/artificial-intelligence/admissions/" target="_blank" rel="noopener">https://www.mccormick.northwestern.edu/artificial-intelligence/admissions/</a> nwu msai</p><h2 id="POOL"><a href="#POOL" class="headerlink" title="POOL"></a>POOL</h2><h3 id="å½©ç¥¨-3-ï¼š"><a href="#å½©ç¥¨-3-ï¼š" class="headerlink" title="å½©ç¥¨(3)ï¼š"></a>å½©ç¥¨(3)ï¼š</h3><ul><li><p><a href="https://sv.cmu.edu/programs/msse.html" target="_blank" rel="noopener">CMU SV-SE</a></p></li><li><p><a href="https://eecs.berkeley.edu/academics/graduate/industry-programs/meng/apply" target="_blank" rel="noopener">EECS Meng UCB </a></p></li><li><p><a href="https://cs.stanford.edu/academics/prospective-masters" target="_blank" rel="noopener">Stanford</a></p></li></ul><h3 id="å†²åˆº-3"><a href="#å†²åˆº-3" class="headerlink" title="å†²åˆº(3)"></a>å†²åˆº(3)</h3><ul><li><p><a href="https://apply.grad.ucsd.edu/areas-of-study/jacobs-school-of-engineering#computer-science-cs75" target="_blank" rel="noopener">UCSD MSCS</a></p></li><li><p><a href="https://www.cs.usc.edu/academic-programs/masters/" target="_blank" rel="noopener">USC 28</a></p></li><li><p><a href="https://www.cs.cornell.edu/masters" target="_blank" rel="noopener">Cornell CS Meng</a></p></li></ul><h3 id="ä¸»ç”³-8-ï¼š"><a href="#ä¸»ç”³-8-ï¼š" class="headerlink" title="ä¸»ç”³(8)ï¼š"></a>ä¸»ç”³(8)ï¼š</h3><ul><li><p><a href="https://csweb.rice.edu/professional-master-mcs" target="_blank" rel="noopener">Rice MCS</a><br>ä¸­åœ‹äººå¤šï¼Œè½‰æ¥­å‹å–„ï¼Œç”³è«‹é›£åº¦è¼ƒä½ï¼ˆçŒœæ˜¯top 20æœ€å¥½ä¸Šçš„ï¼‰ã€‚æ”¶å¤§æ¦‚80â€“100å€‹ï¼Œå¥³ç”Ÿæ“šèªªFBå…¨çµ¦å¯¦ç¿’é¢è©¦ã€‚æˆ‘ä¸ŸMCSæœ‰ä¸Šï¼ŒMSæ˜¯çµ¦å¿µPhDçš„ä¸­é€”ç™¼çš„å­¸ä½</p></li><li><p><a href="https://mcs.ics.uci.edu/" target="_blank" rel="noopener">UCI MCS/SE</a></p></li><li><p><a href="https://cs.nyu.edu/home/master/current_mscsreq.html" target="_blank" rel="noopener">NYU MSCS</a>æˆ‘æ˜¯è¯´Tandon/NYU Computing, Entrepreneurship and Innovation</p></li><li><p><a href="https://www.northeastern.edu/graduate/program/master-of-science-in-computer-science-boston-5238/" target="_blank" rel="noopener">NEU MSCS</a><br>Does have the Campus of SV</p></li><li><p><a href="https://web.cs.dartmouth.edu/graduate/ms-programs" target="_blank" rel="noopener">Dartmouth MSCS</a></p></li><li><p><a href="https://www.eecs.psu.edu/students/graduate/EECS-Graduate-Prospective.aspx" target="_blank" rel="noopener">Penn state</a></p></li><li><p><a href="https://www.cs.ucdavis.edu/graduate/" target="_blank" rel="noopener">UCD MCS</a></p></li></ul><h3 id="ä¿åº•-7-ï¼š"><a href="#ä¿åº•-7-ï¼š" class="headerlink" title="ä¿åº•(7)ï¼š"></a>ä¿åº•(7)ï¼š</h3><ul><li><p><a href="https://engineering.virginia.edu/departments/computer-science/academics/computer-science-graduate-program" target="_blank" rel="noopener">UvA</a></p></li><li><p><a href="https://www.soe.ucsc.edu/graduate" target="_blank" rel="noopener">UCSC MSCS</a></p></li><li><p><a href="https://cidse.engineering.asu.edu/graduate-computer-science/" target="_blank" rel="noopener">ASU MSCS</a></p></li><li><p><a href="https://www.csc.ncsu.edu/academics/graduate/degrees/ms.php" target="_blank" rel="noopener">NCSU MCS</a></p></li><li><p><a href="https://www.utdallas.edu/academics/fact-sheets/ecs/ms-computer-science/" target="_blank" rel="noopener">UT Dellas</a></p></li><li><p><a href="https://www1.cs.ucr.edu/graduate/programs/computer-science-masters" target="_blank" rel="noopener">UCR MCS/SE</a></p></li><li><p><a href="https://www.cs.rochester.edu/graduate/masters-program.html" target="_blank" rel="noopener">Rochester MSCS</a></p></li></ul><h2 id="Career"><a href="#Career" class="headerlink" title="Career"></a>Career</h2><p><a href="https://www.1point3acres.com/bbs/forum.php?mod=viewthread&amp;tid=499352&amp;extra=&amp;authorid=103241&amp;page=1" target="_blank" rel="noopener">[æ‰¾å·¥å°±ä¸š] [å·¥ä½œä¿¡æ¯] 30+å…¬å¸ MLE é¢è¯•å‡†å¤‡ç»éªŒåˆ†äº«ï¼Œå·²æœ‰Uber, DiDi, èš‚èšOffer</a></p>]]></content>
      
      
      <categories>
          
          <category> Application </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Application </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TOEFL</title>
      <link href="/2019/04/19/TOEFL/"/>
      <url>/2019/04/19/TOEFL/</url>
      
        <content type="html"><![CDATA[<p>ä¸è¦åŠ å…¥è‡ªå·±çš„è§‚ç‚¹ï¼ï¼ï¼æ‰˜ç¦æ˜¯ä¸ºäº†æµ‹è¯•ä½ çš„è¯­è¨€æ°´å¹³ï¼Œè€ŒéGREæµ‹è¯•ä½ çš„é€»è¾‘èƒ½åŠ›ã€‚</p><p>æ‰˜ç¦çš„éš¾åº¦å¤§æ¦‚ç›¸å½“äºå°å­¦äº”å¹´çº§å­¦ç”Ÿçš„ç§‘æ™®éš¾åº¦</p><p>æ‰˜ç¦å¤§å¤šæ•°é¢˜æä¸çºªå¾‹ç‰‡ç›¸è¿‘ï¼Œæ¨èç§‘å­¦ç¾å›½äººï¼Œä»¥åŠThe Story of US ç­‰å„ç§çºªå¾‹ç‰‡ï¼ˆè™½ç„¶ç”Ÿç‰©ç±»çœ‹èµ·æ¥æœ‰ä¸€ç‚¹æ— èŠï¼‰</p><p><a href="https://drive.google.com/drive/folders/1kfMgH0DiTwPNG3sCor_wzkHUXdb-vO6Z?usp=sharing" target="_blank" rel="noopener">2019å¹´æš‘å‡æ–°ä¸œæ–¹èµ„æ–™</a></p><p><a href="https://www.facebook.com/notes/%E6%89%98%E7%A6%8Ftoefl%E5%AD%B8%E7%BF%92%E5%9C%98/toefl%E8%80%83%E8%A9%A6%E8%B3%87%E6%96%99%E5%BA%AB-%E6%96%B0%E9%80%B2%E5%90%8C%E5%AD%B8%E8%AB%8B%E5%84%AA%E5%85%88%E7%9C%8B/713691815429188/" target="_blank" rel="noopener">TOEFLè€ƒè©¦è³‡æ–™åº« (æ–°é€²åŒå­¸è«‹å„ªå…ˆçœ‹)</a></p><h2 id="Listening"><a href="#Listening" class="headerlink" title="Listening"></a>Listening</h2><ul><li><p><a href="https://www.esl-lab.com/arches/arches-rd1.htm" target="_blank" rel="noopener">ESL_Labæ‰˜ç¦å¬åŠ›åœ¨çº¿ç»ƒä¹ </a></p></li><li><p><a href="https://ed.ted.com/lessonscontent_type=animations&amp;direction=desc&amp;sort=publish-date&amp;user_by_click=student" target="_blank" rel="noopener">Ted-ED</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">çŸ¥é“å®šä½ï¼Œè®°å¿†é‡ç‚¹å•è¯ï¼Œç²¾å¬TPO.</span><br><span class="line">Step 1: ç›´æ¥æŠŠä¸€ç¯‡å¬åŠ›é¢˜ç›®åšå®Œï¼Œä½†æ˜¯åšå®Œä¸è¦å¯¹ç­”æ¡ˆã€‚</span><br><span class="line"></span><br><span class="line">Step 2ï¼šé˜…è¯»å¬åŠ›åŸæ–‡ï¼Œåˆ’å‡ºå…¶ä¸­çš„é€»è¾‘è¯ã€‚</span><br><span class="line"></span><br><span class="line">Step 3ï¼šå¯¹ç…§é¢˜ç›®ï¼Œåœ¨åŸæ–‡ä¸­æ‰¾åˆ°å‡ºé¢˜ç‚¹çš„ä½ç½®ã€‚ï¼ˆè¿™ä¸€æ­¥ä½ ä¼šå‘ç°å¤§å¤šæ•°å‡ºé¢˜ç‚¹éƒ½åœ¨é€»è¾‘è¯åé¢ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">Step 4ï¼šé¢˜ç›®é€‰é¡¹åˆ†æï¼Œå³æ‰¾åˆ°äº†å‡ºé¢˜ç‚¹ä¹‹åå†å»ä»”ç»†åˆ†ææ¯ä¸€ä¸ªé€‰é¡¹ï¼Œé‡æ–°åšæ¯é“é¢˜ç›®(è®°å¾—è¿™æ—¶ä½ è¿˜æ²¡æœ‰å¯¹ç­”æ¡ˆï¼‰äº‹å®ä¸Šè¿™ä¸€æ­¥ç›¸å½“äºåœ¨åšé˜…è¯»ç†è§£ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå¦‚æœä½ å‘ç°å“ªé“é¢˜çš„ç­”æ¡ˆå’Œä¹‹å‰çº¯å¬çš„æ—¶å€™ä¸ä¸€æ ·ï¼Œå¯ä»¥åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼ˆå¤šåŠæ˜¯æœ‰åœ°æ–¹æ²¡å¬æ˜ç™½ï¼Œæˆ–è€…ä¿¡æ¯ç†è§£é”™ä½äº†ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">Step 5ï¼šå¯¹ç­”æ¡ˆï¼Œçœ‹çœ‹çº¯å¬çš„æ—¶å€™å’Œåšé˜…è¯»ç†è§£æ—¶å„è‡ªé”™äº†å¤šå°‘ï¼Œä»”ç»†åˆ†æé”™é¢˜çš„åŸå› ã€‚</span><br><span class="line"></span><br><span class="line">Step 6 : ä»”ç»†é˜…è¯»å¬åŠ›åŸæ–‡ï¼Œä¿è¯å°†å…¶ç†è§£é€å½»ï¼ˆæ²¡æœ‰ç”Ÿè¯ï¼Œæ²¡æœ‰è¯»ä¸æ‡‚çš„å¥å­ï¼‰</span><br><span class="line"></span><br><span class="line">Step 7ï¼šè·Ÿè¯»ï¼Œé€å¥æ¨¡ä»¿å‘éŸ³ï¼Œç„¶åæ•´æ®µè·Ÿè¯»ï¼Œç›´åˆ°è„±ç¨¿ã€‚</span><br><span class="line"></span><br><span class="line">Step 8ï¼šç²¾å¬åŸæ–‡ï¼Œé‡ç‚¹å…³æ³¨é€»è¾‘èŠ‚ç‚¹ä»¥åŠè€ƒç‚¹å¤„çš„å†…å®¹ï¼Œåå¤å¬ï¼Œç›´åˆ°å®Œå…¨åƒé€ä¸ºæ­¢ã€‚æ‰˜ç¦æ¯ç¯‡å¬åŠ›é•¿3~6åˆ†é’Ÿï¼Œè¿™æ ·ä¸€å¥—æµç¨‹ä¸‹æ¥ï¼Œæ¯ç¯‡å¤§æ¦‚è€—æ—¶45~60åˆ†é’Ÿã€‚æ¯å¤©æŒ‘å‡ºæ•´å—çš„ä¸‰ä¸ªå°æ—¶ï¼Œç»ƒä¸Šé‚£ä¹ˆ3~4ç¯‡ï¼ŒåŠä¸ªæœˆèƒ½ç»ƒæ¥è¿‘50ç¯‡ï¼Œè¿™æ ·çŸ­æœŸå¤§å¯†åº¦çš„è®­ç»ƒï¼Œæ‰ä¼šæœ‰ç«‹æ†è§å½±çš„æ•ˆæœã€‚æœ‰çš„ç­’å­å•Šï¼Œéš”å¤©ç»ƒé‚£ä¹ˆä¸€ä¸¤ç¯‡ï¼Œè¿™æ˜¯ä¼‘é—²..ä¸æ˜¯è®­ç»ƒã€‚</span><br></pre></td></tr></table></figure></li></ul><h2 id="è¯´"><a href="#è¯´" class="headerlink" title="è¯´"></a>è¯´</h2><p>æ€»ç»“è‡ªå·±çš„æ¨¡ç‰ˆ</p><p>é»„é‡‘å£è¯­80é¢˜</p><ul><li><p><a href="https://www.bilibili.com/video/av5243511?from=search&amp;seid=6800091248809064532" target="_blank" rel="noopener">7ä¸ªä½ ä¸èƒ½ä¸çŸ¥é“çš„â€œè‹±è¯­è¿è¯»â€è§„åˆ™</a></p></li><li><p><a href="https://www.notefull.com/" target="_blank" rel="noopener">å£è¯­ç½‘ç«™</a></p></li></ul><h2 id="Reading"><a href="#Reading" class="headerlink" title="Reading"></a>Reading</h2><p>å®šä½</p><p>è¯æ±‡ï¼šé€‰æ„æ€ç›¸è¿‘çš„ï¼Œä¸ä¼šå†å»å¥—è¯­å¢ƒï¼Œåˆ©ç”¨è¯æ€§æ¥æ’é™¤<br>å¥å­ç®€åŒ–ï¼š ç®€åŒ–å¥å­<br>æ€»ç»“ï¼ˆå…­é€‰ä¸‰ï¼‰ ï¼š è¯´çš„å¤šæ˜¯é€‰é¡¹ï¼Œå¤ªç»†èŠ‚çš„ä¸€èˆ¬ä¸é€‰<br>æ¨æ–­é¢˜ï¼šä»ä»–çš„åé¢å’Œæ­£é¢æ¥æ¨æ–­<br>æ’å…¥é¢˜ï¼šçœ‹è¯­å¢ƒï¼Œçœ‹è¿æ¥å¤„ ç±»ä¼¼As example, But, For some reason.</p><ul><li><a href="https://www.sciencedaily.com/news/fossils_ruins/anthropology/" target="_blank" rel="noopener">ScienceDaily</a></li></ul><h2 id="å†™"><a href="#å†™" class="headerlink" title="å†™"></a>å†™</h2><p>æ€»ç»“è‡ªå·±çš„æ¨¡ç‰ˆ<br><a href="http://toefl.zhan.com/tfziliao63579.html" target="_blank" rel="noopener">ä½ åŒæ„å¤§å­¦åº”è¯¥å¼€ä»€ä¹ˆè¯¾å—</a></p><p>ç‹¬ç«‹å†™ä½œ</p><p>Do you agree or disagree with the following statement: Universities should require every graduation students to take public speaking courses. Give specific examples and details to support your answer.</p><p>Sample Answer:</p><p>As we all know, course settings of universities have always been a focal point of the public attention. Recently, it has become a hotly-debated question that whether or not college students should take compulsory public speaking classes. (èƒŒæ™¯å¼•å…¥)Some people argue that delivering speech in public can help a student develop an open personality filled with courage. So it is necessary for university students to take this course. (ä»–äººè§‚ç‚¹) However, in my opinion, turning public speaking course into a compulsory one can be a terrible decision. (æˆ‘çš„è§‚ç‚¹)My view point is based on the following reasons and examples. (è¿‡æ¸¡å¥)</p><p>To begin with, public speaking, as a kind of skill, is actually needed only in certain occupations. (åˆ†è®ºç‚¹ä¸€)A politician or an entertainer may sometimes need to present himself facing a crowd of people, while other people such as engineers and programmers would have no opportunity to use this skill during his career life. (å±•å¼€å¥)For example, one of my schoolmates who is now working in a mobile game company once shared his life with us during our meeting. He needs to spend almost all his working time facing his computer, coding and thinking. With such a heavy workload, only little time was left for him to social with his colleagues and friends. It is obvious that learning how to give an excellent speech in public is useless for him. Therefore, we can see that public speaking isnâ€™t an essential skill needed by people who are responsible for certain kinds of jobs. (å…·ä½“ç»†èŠ‚ä¾‹è¯)</p><p>Moreover, requiring students to take public speaking courses doesnâ€™t mean they can successfully get this skill when the class is over. (åˆ†è®ºç‚¹äºŒ)It is universally acknowledged that different individual owns different personality. Some people are naturally open and willing to give their opinion in public. In contrast, others may be shy and inclined to share their thoughts only to a small group of people. (å±•å¼€å¥)When I was still a college student, I took part in a club which gathered a group of young people interested in psychology. Some club members were outgoing and good at social. Due to their nature, jobs related with broadcasting and external connection were usually assigned to them. In the club, there were also some students with introvertive personality. They were responsible for some rigorous tasks such as accounting and some strict paperwork. Both groups performed well. If we hand accounting jobs to the outgoing group or force the quiet group social, the operation of our club might turn into a mess. Similarly, if those people who are not open enough are forced to take public speaking course, it might just be a waste of time. (å…·ä½“ç»†èŠ‚ä¾‹è¯)</p><p>Admittedly, public speaking course can help develop a personality which is required to be a leader. (æ‰¿è®¤åé¢è§‚ç‚¹æœ‰ç†)It is necessary for a leader to deliver a speech full of emotion and appeal to his team members. (å±•å¼€)Take Jack Ma, the boss of Alibaba, as an example. We all know that Jack Ma established Alibaba, an e-commerce company when he was in obscure. At that time, he was a college English teacher and usually gave lectures in a class in front of hundreds of adult students. Adequate public teaching experience equipped him with a charming and attractive personality, which might contribute a lot as he recruiting people to set up his e-business. Most people didnâ€™t held an optimistic attitude towards e-commerce, so I regarded the leadership of Jack Ma himself as a significant factor resulting in the success of their initial team building. (å…·ä½“ç»†èŠ‚ä¾‹è¯)</p><p>To conclude, public speaking course is not a necessary one during studentsâ€™ college years. (é‡è¿°æ€»è®ºç‚¹)Not every students actually need this skill. In addition, not all the pupils can become a successful public speaker after such kind of training. (é‡è¿°ç¬¬ä¸€äºŒä¸ªåˆ†è®ºç‚¹)Nevertheless, for students who have the ambition to be a leader in his future, taking public speaking course can effectively help him to get an attractive figure.(é‡è¿°è®©æ­¥æ®µè®ºç‚¹)<br>æç¬‘æ¥çš„èŒƒæ–‡</p><ul><li><p><a href="http://xination.pixnet.net/blog/post/24191445-toefl-writing-%E5%BF%83%E5%BE%97-%281%29----integrated-writing-" target="_blank" rel="noopener">æ‰˜ç¦å¯«ä½œå¿ƒå¾—</a></p></li><li><p><a href="https://play.typeracer.com/" target="_blank" rel="noopener">TypeRacer (Writting ç·´æ‰“å­—é€Ÿåº¦ç”¨)</a></p></li></ul><table><thead><tr><th>XX</th><th>XX</th></tr></thead><tbody><tr><td>é¦–æ®µ</td><td>è¡¨æ˜ä½ çš„è§‚ç‚¹(oï¾Ÿvï¾Ÿ)ãƒ</td></tr><tr><td>ç¬¬äºŒæ®µ</td><td>è®©æ­¥ï¼Œè¯´æ­¤è§‚ç‚¹è¿˜æ˜¯æœ‰ä¸€å®šçš„åˆç†æ€§</td></tr><tr><td>ç¬¬ä¸‰æ®µ</td><td>å•åä¾‹1ï¼ˆåŒæ ·å¥½æˆ–è€…æ›´å¥½ï¼‰</td></tr><tr><td>ç¬¬å››æ®µ</td><td>å•åä¾‹2ï¼ˆåŒæ ·å¥½æˆ–è€…æ›´å¥½ï¼‰</td></tr><tr><td>å°¾ç«¯</td><td>æ€»ç»“</td></tr></tbody></table><h2 id="Vocabulary"><a href="#Vocabulary" class="headerlink" title="Vocabulary"></a>Vocabulary</h2><ul><li><a href="https://www.academia.edu/9738161/Barrons_800_High-Frequency_GRE_Word_List" target="_blank" rel="noopener">Barronâ€™s 800 High-Frequency GRE Word List</a></li></ul><h2 id="Course"><a href="#Course" class="headerlink" title="Course"></a>Course</h2><ul><li><p><a href="https://toefl.kmf.com/home" target="_blank" rel="noopener">è€ƒæ»¡åˆ†</a></p></li><li><p><a href="https://www.usalearns.org/" target="_blank" rel="noopener">Learn English FREE with USA Learns</a></p></li><li><p><a href="https://www.engvid.com/" target="_blank" rel="noopener">https://www.engvid.com/</a></p></li></ul><h2 id="æ‰˜ç¦ç»å¸¸è€ƒåˆ°çš„å‡ ä¸ªç‚¹ï¼š"><a href="#æ‰˜ç¦ç»å¸¸è€ƒåˆ°çš„å‡ ä¸ªç‚¹ï¼š" class="headerlink" title="æ‰˜ç¦ç»å¸¸è€ƒåˆ°çš„å‡ ä¸ªç‚¹ï¼š"></a>æ‰˜ç¦ç»å¸¸è€ƒåˆ°çš„å‡ ä¸ªç‚¹ï¼š</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿç‰©ï¼š çŒ›çŠ¸è±¡ å†°å·ï¼Œè¿å¾™MIGRATION è¿˜æœ‰ALLURE PREY USING BAIT BY PREDATORã€‚</span><br><span class="line"></span><br><span class="line">å¤©æ–‡ï¼šå°¤å…¶æ˜¯æœ¨æ˜Ÿå’Œå®ƒæœ€å¸¸è¢«æåˆ°çš„ä¸‰é¢—å«æ˜Ÿï¼ŒIO,</span><br><span class="line"></span><br><span class="line">å†å²ï¼šä¸€èˆ¬ä¸ºç¾è‹±å’Œç½—é©¬å†å²ã€‚beaverå’Œbisonåœ¨ç¾å›½å†å²ä¸Šä¸¾è¶³è½»é‡çš„å½±å“ã€‚</span><br><span class="line"></span><br><span class="line">anthropologyè€ƒå¤ï¼šä¸€èˆ¬ä¼šè¯´ä»€ä¹ˆä»€ä¹ˆè¯æ˜ä»€ä¹ˆä»€ä¹ˆï¼Œç„¶åæ•™æˆåˆç»™å‡ºç›¸åè§‚ç‚¹ã€‚</span><br><span class="line">å¸¸è§å£è¯­å’Œå†™ä½œï¼Œè¿˜æœ‰è‹ç¾å°”äººå‘æ˜æ–‡å­—ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Application </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Application </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mind Map In Java Environmentals</title>
      <link href="/2019/03/31/Mind-Map-In-Java-Environmentals/"/>
      <url>/2019/03/31/Mind-Map-In-Java-Environmentals/</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.loli.net/2020/02/21/EOMjpL5dNngP3co.png" alt="MindMapInJava.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>107_FALL</title>
      <link href="/2019/03/22/107_FALL/"/>
      <url>/2019/03/22/107_FALL/</url>
      
        <content type="html"><![CDATA[<h2 id="TAIWAN-TECH-107-FALL"><a href="#TAIWAN-TECH-107-FALL" class="headerlink" title="TAIWAN TECH 107 FALL"></a>TAIWAN TECH 107 FALL</h2><blockquote class="blockquote-center"><p>107 Transcripts</p></blockquote><div class="pdf" target="https://www.docdroid.net/lbzTViY/107-fall-gpa.pdf" height></div><p><a href="https://www.calculator.net/gpa-calculator.html?d1=Math&amp;c1=2&amp;s1=A&amp;d2=English&amp;c2=3&amp;s2=A-&amp;d3=History&amp;c3=3&amp;s3=A-&amp;d4=&amp;c4=3&amp;s4=A-&amp;d5=&amp;c5=3&amp;s5=A-&amp;d6=&amp;c6=3&amp;s6=A-&amp;d7=&amp;c7=2&amp;s7=A&amp;d8=&amp;c8=1&amp;s8=A-&amp;d9=&amp;c9=2&amp;s9=A&amp;d10=&amp;c10=2&amp;s10=A&amp;d11=&amp;c11=&amp;s11=&amp;d12=&amp;c12=&amp;s12=&amp;d13=&amp;c13=&amp;s13=&amp;d14=&amp;c14=&amp;s14=&amp;d15=&amp;c15=&amp;s15=&amp;d16=&amp;c16=&amp;s16=&amp;d17=&amp;c17=&amp;s17=&amp;d18=&amp;c18=&amp;s18=&amp;d19=&amp;c19=&amp;s19=&amp;d20=&amp;c20=&amp;s20=&amp;d21=&amp;c21=&amp;s21=&amp;d22=&amp;c22=&amp;s22=&amp;d23=&amp;c23=&amp;s23=&amp;d24=&amp;c24=&amp;s24=&amp;d25=&amp;c25=&amp;s25=&amp;d26=&amp;c26=&amp;s26=&amp;d27=&amp;c27=&amp;s27=&amp;d28=&amp;c28=&amp;s28=&amp;d29=&amp;c29=&amp;s29=&amp;d30=&amp;c30=&amp;s30=&amp;d31=&amp;c31=&amp;s31=&amp;d32=&amp;c32=&amp;s32=&amp;d33=&amp;c33=&amp;s33=&amp;d34=&amp;c34=&amp;s34=&amp;d35=&amp;c35=&amp;s35=&amp;d36=&amp;c36=&amp;s36=&amp;d37=&amp;c37=&amp;s37=&amp;d38=&amp;c38=&amp;s38=&amp;d39=&amp;c39=&amp;s39=&amp;d40=&amp;c40=&amp;s40=&amp;d41=&amp;c41=&amp;s41=&amp;d42=&amp;c42=&amp;s42=&amp;d43=&amp;c43=&amp;s43=&amp;d44=&amp;c44=&amp;s44=&amp;d45=&amp;c45=&amp;s45=&amp;d46=&amp;c46=&amp;s46=&amp;d47=&amp;c47=&amp;s47=&amp;d48=&amp;c48=&amp;s48=&amp;d49=&amp;c49=&amp;s49=&amp;d50=&amp;c50=&amp;s50=&amp;d51=&amp;c51=&amp;s51=&amp;d52=&amp;c52=&amp;s52=&amp;d53=&amp;c53=&amp;s53=&amp;d54=&amp;c54=&amp;s54=&amp;d55=&amp;c55=&amp;s55=&amp;d56=&amp;c56=&amp;s56=&amp;d57=&amp;c57=&amp;s57=&amp;d58=&amp;c58=&amp;s58=&amp;d59=&amp;c59=&amp;s59=&amp;d60=&amp;c60=&amp;s60=&amp;printit=0&amp;ftype=1&amp;x=65&amp;y=37" target="_blank" rel="noopener">GPA Calculator</a></p><p><a href="http://www.cs.yale.edu/homes/radev/films.html" target="_blank" rel="noopener">MOVIE LIST</a></p><p><a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">é—œæ–¼HEXOè¶…å…¨çš„å»ºç«™å…§å®¹</a></p><p><a href="https://learngitbranching.js.org" target="_blank" rel="noopener">Learn Git Branching Online</a></p><h2 id="ã€å½•å–æ•°æ®-CSã€‘å¡è€åŸºæ¢…éš†å¤§å­¦-CMU-Computer-Sciences-Masterè®¡ç®—æœºç§‘å­¦ç¡•å£«ï¼ˆ2018Fall-https-www-douban-com-note-670723222"><a href="#ã€å½•å–æ•°æ®-CSã€‘å¡è€åŸºæ¢…éš†å¤§å­¦-CMU-Computer-Sciences-Masterè®¡ç®—æœºç§‘å­¦ç¡•å£«ï¼ˆ2018Fall-https-www-douban-com-note-670723222" class="headerlink" title="ã€å½•å–æ•°æ®-CSã€‘å¡è€åŸºæ¢…éš†å¤§å­¦ CMU Computer Sciences Masterè®¡ç®—æœºç§‘å­¦ç¡•å£«ï¼ˆ2018Fall)](https://www.douban.com/note/670723222/)"></a>ã€å½•å–æ•°æ®-CSã€‘å¡è€åŸºæ¢…éš†å¤§å­¦ CMU Computer Sciences Masterè®¡ç®—æœºç§‘å­¦ç¡•å£«ï¼ˆ2018Fall)](<a href="https://www.douban.com/note/670723222/" target="_blank" rel="noopener">https://www.douban.com/note/670723222/</a>)</h2><p><a href="https://lvraikkonen.github.io/2016/05/31/%E5%88%A9%E7%94%A8Github%E5%88%86%E6%94%AF%E5%A4%87%E4%BB%BDHexo%E6%BA%90%E6%96%87%E4%BB%B6/" target="_blank" rel="noopener">åˆ©ç”¨Githubåˆ†æ”¯å¤‡ä»½Hexoæºæ–‡ä»¶</a></p><ul><li>Thinking In Java</li></ul><p><a href="https://hackmd.io/s/ByOm-sFue" target="_blank" rel="noopener">NCTU_CSIE_HANDBOOK</a></p><p><a href="https://chi_gitbook.gitbooks.io/personal-note/content/register_operands.html" target="_blank" rel="noopener">Taiwan Tech HANDBOOK</a></p><p><a href="http://alrightchiu.github.io/SecondRound/stack-yi-arrayyu-linked-listshi-zuo.html" target="_blank" rel="noopener">DATA STRUCTURE AND Algorithms</a></p><p><a href="https://regapp.nctu.edu.tw/Views/User/UserLogin" target="_blank" rel="noopener">https://regapp.nctu.edu.tw/Views/User/UserLogin</a><br><a href="https://regapp.nctu.edu.tw/Views/User/UserLogin" target="_blank" rel="noopener">äº¤é€šå¤§å­¸ç·šä¸Šæäº¤ç”³è«‹æ–‡ä»¶</a></p><p><a href="https://blog.csdn.net/zhu_9527/article/details/19818657" target="_blank" rel="noopener">115å®¶ç”µå­ç§‘æŠ€ä¼ä¸šå¾…é‡</a></p><h2 id="BurnDown-chart"><a href="#BurnDown-chart" class="headerlink" title="BurnDown chart"></a>BurnDown chart</h2><ul><li><p>CS2006301 è¨ˆç®—æ©Ÿçµ„ç¹” Computer Organization<br><del>Midterm 4.16</del><br><del>Homework2 4.9</del><br><a href="http://dns2.asia.edu.tw/~rikki/coa107/cod5-ch01-03_sol.pdf" target="_blank" rel="noopener">PRACTICE</a><br><a href="http://egloos.zum.com/itfs/v/9714850" target="_blank" rel="noopener">KOREAN SOLUTION</a><br><a href="https://hackmd.io/s/ryv1NT3S" target="_blank" rel="noopener">HANDBOOK</a><br><a href="https://chi_gitbook.gitbooks.io/personal-note/content/register_operands.html" target="_blank" rel="noopener">TAIWAN_TECH HANDBOOK</a><br><a href="https://sites.google.com/site/nutncsie10412/ge-ren-jian-jie/fu-dian-shu-biao-shi-fa" target="_blank" rel="noopener">CONVERT THE FLOAT NUMBER</a></p></li><li><p>CS3001301 Algorithms<br><del>Midterm 4.16</del><br><del>Project2 4.10</del><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lyZQPjUT5B4?start=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br><a href="http://itfs.egloos.com/9663918" target="_blank" rel="noopener">KOREAN ALGORITHMS HANDBOOK</a><br><a href="https://segmentfault.com/a/1190000008730320" target="_blank" rel="noopener">ç®—æ³•å¯¼è®ºç¬”è®°åŠ¨æ€è§„åˆ’DPè¯¦è§£-é’¢æ¡åˆ‡å‰²çš„åˆ†æä¸å®ç°</a></p></li><li><p>CS3007701 å¤šåª’é«”è³‡è¨Šç³»çµ±å°è«– Introduction to Multimedia<br>Information Systems<br><del>Midterm 4.11</del><br><a href="https://docs.google.com/document/d/1P7x9Fs-jjLusngNyAClWDMr38WEgOYvO8Nt8peZQWpM/edit#" target="_blank" rel="noopener">HANDBOOK</a><br><a href="http://wycwang.blogspot.com/2012/12/cumulative-histogram-equalization.html" target="_blank" rel="noopener">Histogram Equalization Histogram CDF PDF</a></p></li><li><p>CS3010301 è³‡æ–™åº«ç³»çµ± Database Systems<br><a href="http://faculty.csie.ntust.edu.tw/~ywu/cs3010301/index.html" target="_blank" rel="noopener">Course website</a><br>5/28 Final will be held on 6/11 in class.<br><del>5/14 Homework 4 posted</del><br><del>4/30 Prof. Ming-Chih Hung of Northwest Missouri State University will give a talk titled â€œGIS, Graphs, and Relational Databaseâ€ on 5/21 in class.</del><br><del>4/26 Homework 3 posted.</del><br><del>3/28 Mid-term will be held on 4/23 in class.</del><br><del>3/28 Homework 2 posted.</del><br><del>3/21 Homework 1 posted.</del><br><del>2/19 First class</del></p></li><li><p>CS3020301 Compiler Design<br><a href="http://faculty.csie.ntust.edu.tw/~shin/compilers.html" target="_blank" rel="noopener">Course website</a><br><a href="https://stackoverflow.com/questions/2309752/why-is-anbn-n-0-not-regular" target="_blank" rel="noopener">Regular OR NOT </a><br><a href="https://www.bilibili.com/video/av17253679/?p=1" target="_blank" rel="noopener">PKU</a><br>å°åº¦ğŸ‡®ğŸ‡³ Neso Academy</p><iframe width="560" height="315" src="https://www.youtube.com/embed/0XaGAkY09Wc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></li><li><p>CS499A001 å¯¦å‹™å°ˆé¡Œ(ä¸Š) Special Projects (I)</p></li><li><p>CS5144701 æ·±åº¦å­¸ç¿’å¯¦å‹™ Practices of Deep Learning</p></li><li><p>BA2911701 è«‡åˆ¤å­¸ Negotiation</p></li><li><p>CC1309301 ç¶“å…¸èˆ‡å‰µæ„ Classics and Creativity</p></li><li><p>PE139B053 é«”è‚²(é‡é‡è¨“ç·´)(ä¸‹) Physical Education(Weight Training) (II)</p></li><li><p>TCG029301 è‡¨çµ‚é—œæ‡·ç¤¾å€å¯¦ç¿’ Practical Training in Community for Hospice and Palliative Care<br><del>Midterm report 5/1</del></p></li></ul><p><a href="https://vimeo.com/340445036?utm_source=email&amp;utm_medium=vimeo-cliptranscode-201504&amp;utm_campaign=29220" target="_blank" rel="noopener">æœ¬äººå°æ–¼å°ç£åœ°å€ç¤¾å€é•·ç…§2.0è¨ˆåŠƒçš„çœ‹æ³•å’Œè¿·æ€</a></p><ul><li><p>TCG047301 é¤Šç”Ÿé†«å­¸ Fitness and Health for Good Life</p></li><li><p>TCG068301 é ˜å°èˆ‡ç”Ÿæ´» Leadership and Life<br>Final 6/17<br><del>Assignment2 5/20</del><br><del>Group meeting 4/22</del><br><del>Assignment1 4/1</del></p></li></ul><p><img src="https://res.cloudinary.com/dr1eptem7/image/upload/v1553343549/d3970231.jpg" alt="å°ç£è²“é»¨"></p>]]></content>
      
      
      <categories>
          
          <category> Diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Taiwan </tag>
            
            <tag> Taiwan Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Core Java Volume I(10th Edition) </title>
      <link href="/2019/02/10/Core-Java-Volume-I-10th-Edition/"/>
      <url>/2019/02/10/Core-Java-Volume-I-10th-Edition/</url>
      
        <content type="html"><![CDATA[<h1 id="JAVAæ ¸å¿ƒæŠ€æœ¯å·ä¸€-ç¬¬åç‰ˆ"><a href="#JAVAæ ¸å¿ƒæŠ€æœ¯å·ä¸€-ç¬¬åç‰ˆ" class="headerlink" title="JAVAæ ¸å¿ƒæŠ€æœ¯å·ä¸€ (ç¬¬åç‰ˆ)"></a>JAVAæ ¸å¿ƒæŠ€æœ¯å·ä¸€ (ç¬¬åç‰ˆ)</h1><p>ä¸‹é¢æ˜¯éœ€è¦æ³¨æ„çš„ï¼š</p><ul><li>åªæœ‰æ–¹æ³•åå’Œå‚æ•°ç±»å‹å«åšæ–¹æ³•çš„ç­¾åï¼Œ ä¸åŒçš„è¿”å›ç±»å‹å€¼ä¸èƒ½ä½œä¸ºæ–¹æ³•çš„ç­¾åã€‚(4.6.1)</li><li>è¿™æ˜¯åŸŸä¸å±€éƒ¨å˜é‡çš„ä¸»è¦ä¸åŒç‚¹ã€‚ å¿…é¡»æ˜ç¡®åœ°åˆå§‹åŒ–æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–ç±»ä¸­çš„åŸŸï¼Œ å°†ä¼šè¢«è‡ªåŠ¨åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆ0ã€ false æˆ– null )ã€‚(4.6.2)</li><li>åˆå§‹åŒ–å—æˆ–é™æ€çš„åˆå§‹åŒ–å—åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰§è¡Œé‡Œé¢çš„ä»£ç ã€‚(4.6.7)</li><li>ä»ç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œ åµŒå¥—çš„åŒ…ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚(4.7)<br>ä¾‹å¦‚ï¼šjava.util åŒ…ä¸java.util.jar åŒ…æ¯«æ— å…³ç³»ã€‚æ¯ä¸€ä¸ªéƒ½æ‹¥æœ‰ç‹¬ç«‹çš„ç±»é›†åˆã€‚<br>import java.util.* è¯­å¥ä¸èƒ½å¯¼å…¥java.util.jaråŒ…ä¸­çš„ç±».</li><li>æ ‡è®°ä¸º public çš„éƒ¨åˆ†å¯ä»¥è¢«ä»»æ„çš„ç±»ä½¿ç”¨ï¼›<br>æ ‡è®°ä¸º private çš„éƒ¨åˆ†åªèƒ½è¢«å®šä¹‰å®ƒä»¬çš„ç±»ä½¿ç”¨ã€‚<br>å¦‚æœæ²¡æœ‰æŒ‡å®š public æˆ– private, è¿™ ä¸ª éƒ¨åˆ†ï¼ˆç±»ã€æ–¹æ³•æˆ–å˜é‡ï¼‰å¯ä»¥è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•è®¿é—®ã€‚</li><li>ä½¿ç”¨super è°ƒç”¨æ„é€ å™¨çš„è¯­å¥å¿…é¡»æ˜¯å­ç±»æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚(5.1.3)</li><li>åœ¨è¦†ç›–ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå­ç±»æ–¹æ³•ä¸èƒ½ä½äºè¶…ç±»æ–¹æ³•çš„å¯è§æ€§ã€‚ï¼ˆ5.1.6ï¼‰</li><li>å¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸º finalï¼Œ åªæœ‰å…¶ä¸­çš„æ–¹æ³•è‡ªåŠ¨åœ°æˆä¸º final, è€Œä¸åŒ…æ‹¬åŸŸã€‚(5.1.7)</li><li>å¦‚æœæ–¹æ³•å¾ˆç®€çŸ­ã€ è¢«é¢‘ç¹è°ƒç”¨ä¸”æ²¡æœ‰çœŸ()æ­£åœ°è¢«è¦†ç›–ï¼Œ é‚£ä¹ˆå³æ—¶ç¼–è¯‘å™¨å°±ä¼šå°†è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†…è”å¤„ç†ã€‚(5.1.7)</li><li>å°†ä¸€ä¸ªå­ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªè¶…ç±»å˜é‡ï¼Œ ç¼–è¯‘å™¨æ˜¯å…è®¸çš„ã€‚ä½†å°†ä¸€ä¸ªè¶…ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªå­ç±»å˜é‡ï¼Œ å¿…é¡»è¿›è¡Œç±»å‹è½¬æ¢ ã€‚(5.1.8)</li><li>å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§ â€”- protectedã€‚(5.1.10)</li><li>instanceofé€šè¿‡è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥æŒ‡å‡ºï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯è¿™ä¸ªç‰¹å®šç±»æˆ–è€…æ˜¯å®ƒçš„å­ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</li><li>Objectç±»ä¸­çš„equalsæ–¹æ³•å°†åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰ç›¸åŒçš„å¼•ç”¨ã€‚ä½†æ˜¯å¯¹äºå¤§å¤šæ•°ç±»æ¥è¯´å¹¶æ²¡æœ‰æ„ä¹‰ã€‚(5.2.1)</li><li>æ•°ç»„ç»§æ‰¿äº† object ç±»çš„ toString æ–¹æ³•ï¼Œæ•°ç»„ç±»å‹å°†æŒ‰ç…§æ—§çš„æ ¼å¼æ‰“å°ï¼Œç”Ÿæˆå­—ç¬¦ä¸²â€œ [I@la46e30â€ ï¼Œä¿®æ­£çš„æ–¹å¼æ˜¯è°ƒç”¨é™æ€æ–¹æ³• Arrays.toString</li><li>ArrayList å¦‚æœå·²ç»æ¸…æ¥šæˆ–èƒ½å¤Ÿä¼°è®¡å‡ºæ•°ç»„å¯èƒ½å­˜å‚¨çš„å…ƒç´ æ•°é‡ï¼Œ å°±å¯ä»¥åœ¨å¡«å……æ•°ç»„ä¹‹å‰è°ƒensureCapacityæ–¹æ³•ï¼š</li><li>å¯¹è±¡åŒ…è£…å™¨ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå¯¹è±¡åŒ…è£…å™¨ç±»è¿˜æ˜¯ final ,è£…ç®±å’Œæ‹†ç®±æ˜¯ç¼–è¯‘å™¨è®¤å¯çš„ã€‚</li><li>å…è®¸å°†ä¸€ä¸ªæ•°ç»„ä¼ é€’ç»™å¯å˜å‚æ•°æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚mainæ–¹æ³•</li><li>javapæ˜¯ Java classæ–‡ä»¶åˆ†è§£å™¨ï¼Œå¯ä»¥åç¼–è¯‘ï¼ˆå³å¯¹javacç¼–è¯‘çš„æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼‰ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹javaç¼–è¯‘å™¨ç”Ÿæˆçš„å­—èŠ‚ç ã€‚ç”¨äºåˆ†è§£classæ–‡ä»¶ã€‚ javap -p &lt;ç±»æ–‡ä»¶&gt;</li><li>Classç±»ä¸­çš„newlnstance( )è°ƒç”¨é»˜è®¤çš„æ„é€ å™¨ï¼Œå¦‚æœè¿™ä¸ªç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ å™¨ï¼Œ å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚æœæƒ³è¦æä¾›å‚æ•°ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨Constructorä¸­åå­—ç›¸åŒçš„çš„æ–¹æ³•ã€‚</li><li>ä¸€ä¸ª Class å¯¹è±¡å®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç±»å‹ï¼Œ è€Œè¿™ä¸ªç±»å‹æœªå¿…ä¸€å®šæ˜¯ä¸€ç§ç±»ã€‚</li><li>lambda è¡¨è¾¾å¼ä¸­æ•è·çš„å˜é‡å¿…é¡»å®é™…ä¸Šæ˜¯æœ€ç»ˆå˜é‡</li><li>lambda è¡¨è¾¾å¼çš„ä½“ä¸åµŒå¥—å—æœ‰ç›¸åŒçš„ä½œç”¨åŸŸã€‚</li><li>å¼ºçƒˆå»ºè®®è§£è€¦åˆ try/catch å’Œ try/finally è¯­å¥å—</li><li>Java è¯­ è¨€ è§„ èŒƒ å°† æ´¾ ç”Ÿ äº Error ç±» æˆ– RuntimeException ç±»çš„æ‰€æœ‰å¼‚å¸¸ç§°ä¸ºéå—æŸ¥( unchecked ) å¼‚å¸¸ï¼Œ æ‰€æœ‰å…¶ä»–çš„å¼‚å¸¸ç§°ä¸ºå—æŸ¥ï¼ˆchecked) å¼‚å¸¸ã€‚</li><li>for each å¾ªç¯å¯ä»¥ä¸ä»»ä½•å®ç°äº† Iterable æ¥å£çš„å¯¹è±¡ä¸€èµ·å·¥ä½œ, ä½†æ˜¯Collection æ¥å£æ‰©å±•äº† Iterable æ¥å£ã€‚</li><li><p>å››ç§å¾ªç¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. arrayList.iterator().forEachRemaining(System.out::println);</span><br><span class="line">      <span class="number">2</span>. arrayList.forEach(System.out::println);</span><br><span class="line">      <span class="number">3</span>. <span class="keyword">for</span> (String str : arrayList)</span><br><span class="line">         System.out.println(str);</span><br><span class="line">      <span class="number">4</span>. Iterator it = arrayList.iterator();</span><br><span class="line">      <span class="keyword">while</span>(it.hasNext())</span><br><span class="line">          System.out.println(it.next());</span><br></pre></td></tr></table></figure></li><li><p>æ ‡è®°æ¥å£ RandomAccess ç”¨å®ƒæ¥æµ‹è¯•ä¸€ä¸ªç‰¹å®šçš„é›†åˆæ˜¯å¦æ”¯æŒé«˜æ•ˆçš„éšæœºè®¿é—®</p></li><li>åœ¨ArrayListçš„æ— å‚æ„é€ å‡½æ•°ä¸Šçš„æ³¨é‡Š Constructs an empty list with an initial capacity of ten. åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£çš„åˆ›å»º10ä¸ªç©ºé—´ï¼Œè¿™æ˜¯æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ï¼Œåœ¨è¿™ç¯‡.å’Œè¿™ç¯‡æ–‡ç« ä¸­å¯ä»¥ä¸€æ¢ç©¶ç«Ÿã€‚</li><li>å†…éƒ¨ç±»çš„å¯¹è±¡æœ‰ä¸€ä¸ªéšå¼å¼•ç”¨ï¼Œ å®ƒå¼•ç”¨äº†å®ä¾‹åŒ–è¯¥å†…éƒ¨å¯¹è±¡çš„å¤–å›´ç±»å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªæŒ‡é’ˆï¼Œ å¯ä»¥è®¿é—®å¤–å›´ç±»å¯¹è±¡çš„å…¨éƒ¨çŠ¶æ€ï¼Œä½†æ˜¯staticå†…éƒ¨ç±»å¹¶æ²¡æœ‰ã€‚</li><li>å±€éƒ¨ç±»è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ã€‚å®ƒä»¬ä¸ä»…èƒ½å¤Ÿè®¿é—®åŒ…å«å®ƒä»¬çš„å¤–éƒ¨ç±»ï¼Œ è¿˜å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡ã€‚ä¸è¿‡ï¼Œ é‚£äº›å±€éƒ¨å˜é‡å¿…é¡»äº‹å®ä¸Šä¸º final</li><li>åŒæ‹¬å·åˆå§‹åŒ–</li><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°</li><li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€</li><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡</li><li>add æ–¹æ³•åªä¾èµ–äºè¿­ä»£å™¨çš„ä½ç½®ï¼Œ è€Œ remove æ–¹æ³•ä¾èµ–äºè¿­ä»£å™¨çš„çŠ¶æ€ã€‚</li><li>Vector ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œsynchronized</li><li>å¦‚æœ a_equals(b) ä¸º true, a ä¸ b å¿…é¡»å…·æœ‰ç›¸åŒçš„æ•£åˆ—ç ã€‚</li></ul><p>ä½œè€…ï¼š NeverTh<br>å‡ºå¤„ï¼š<a href="https://www.cnblogs.com/neverth/p/11760936.html" target="_blank" rel="noopener">https://www.cnblogs.com/neverth/p/11760936.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
