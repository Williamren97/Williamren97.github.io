<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Array And String LEETCODE-100-DAY6]]></title>
    <url>%2F2020%2F06%2F27%2FArray-And-String-LEETCODE-100-DAY6%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Stack And String LEETCODE-100-DAY5]]></title>
    <url>%2F2020%2F06%2F26%2FStack-And-String-LEETCODE-100-DAY5%2F</url>
    <content type="text"><![CDATA[155. Min StackDesign a stack that supports push, pop, top, and retrieving the minimum element in constant time. push(x) â€“ Push element x onto stack. pop() â€“ Removes the element on top of the stack. top() â€“ Get the top element. getMin() â€“ Retrieve the minimum element in the stack. Example 1: 12345678910111213141516Input[&quot;MinStack&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;getMin&quot;,&quot;pop&quot;,&quot;top&quot;,&quot;getMin&quot;][[],[-2],[0],[-3],[],[],[],[]]Output[null,null,null,null,-3,null,0,-2]ExplanationMinStack minStack = new MinStack();minStack.push(-2);minStack.push(0);minStack.push(-3);minStack.getMin(); // return -3minStack.pop();minStack.top(); // return 0minStack.getMin(); // return -2 Constraints: Methods pop, top and getMin operations will always be called on non-empty stacks. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687/* * @lc app=leetcode.cn id=155 lang=java * * [155] æœ€å°æ ˆ */// @lc code=startclass MinStack &#123; Stack&lt;Integer&gt; stack; int min;//Integeræ¯”è¾ƒçš„æ˜¯èŒƒå›´ï¼Œæ˜¯åœ°å€ï¼ŒIntergerç±»åž‹ä¹‹é—´çš„æ¯”è¾ƒåº”è¯¥ç”¨equals() /** initialize your data structure here. */ public MinStack() &#123; stack = new Stack&lt;&gt;(); min = Integer.MAX_VALUE;//åˆå§‹åŒ–Min &#125; public void push(int x) &#123; if (x &lt;= min) &#123; stack.push(min); min = x; &#125; stack.push(x); &#125; public void pop() &#123; if (stack.pop() == min) &#123; min = stack.pop(); &#125; &#125; public int top() &#123; return stack.peek(); &#125; public int getMin() &#123; return min; &#125;&#125;/** * Your MinStack object will be instantiated and called as such: * MinStack obj = new MinStack(); * obj.push(x); * obj.pop(); * int param_3 = obj.top(); * int param_4 = obj.getMin(); */// @lc code=end// class MinStack &#123;// private Stack&lt;Integer&gt; stack;// private Stack&lt;Integer&gt; minStack;// /** initialize your data structure here. */// public MinStack() &#123;// stack = new Stack&lt;&gt;();// minStack = new Stack&lt;&gt;();// &#125; // public void push(int x) &#123;// stack.push(x);// if(!minStack.isEmpty()) &#123;// int min = minStack.peek();// if(x &lt;= min) &#123;// minStack.push(x); // &#125;// &#125; else &#123;// minStack.push(x);// &#125;// &#125; // public void pop() &#123;// int x = stack.pop();// if(!minStack.isEmpty()) &#123;// if(x == minStack.peek()) &#123;// minStack.pop();// &#125;// &#125;// &#125; // public int top() &#123;// return stack.peek();// &#125; // public int getMin() &#123;// return minStack.peek();// &#125;// &#125; 232.Implement Queue using StacksImplement the following operations of a queue using stacks. push(x) â€“ Push element x to the back of queue. pop() â€“ Removes the element from in front of queue. peek() â€“ Get the front element. empty() â€“ Return whether the queue is empty. Example: 1234567MyQueue queue = new MyQueue();queue.push(1);queue.push(2); queue.peek(); // returns 1queue.pop(); // returns 1queue.empty(); // returns false Notes: You must use only standard operations of a stack â€“ which means only push to top, peek/pop from top, size, and is empty operations are valid. Depending on your language, stack may not be supported natively. You may simulate a stack by using a list or deque (double-ended queue), as long as you use only standard operations of a stack. You may assume that all operations are valid (for example, no pop or peek operations will be called on an empty queue). 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394æ²¡æœ‰çš„æ³¨é‡Šçš„ä¸ºO(1)/** * Your MyQueue object will be instantiated and called as such: * MyQueue obj = new MyQueue(); * obj.push(x); * int param_2 = obj.pop(); * int param_3 = obj.peek(); * boolean param_4 = obj.empty(); */class MyQueue1 &#123; Stack&lt;Integer&gt; s1; Stack&lt;Integer&gt; s2; /** Initialize your data structure here. */ public MyQueue() &#123; s1 = new Stack(); s2 = new Stack(); &#125; /** Push element x to the back of queue. */ public void push(int x) &#123; s1.push(x); &#125; //O(n) /** Removes the element from in front of queue and returns that element. */ public int pop() &#123; //s1ä»£è¡¨æ²¡è¿›è¡Œè¿‡å¤„ç†çš„,queueçš„åæ–¹å‘ï¼Œåˆ™S2ä»£è¡¨å¤„ç†è¿‡çš„ã€‚ if(!s2.isEmpty()) return s2.pop(); else &#123; while (!s1.isEmpty()) s2.push(s1.pop()); return s2.pop(); &#125; &#125; //O(n) /** Get the front element. */ public int peek() &#123; if(!s2.isEmpty()) return s2.peek(); else &#123; while(!s1.isEmpty()) s2.push(s1.pop()); return s2.peek(); &#125; &#125; /** Returns whether the queue is empty. */ public boolean empty() &#123; return s1.isEmpty() &amp;&amp; s2.isEmpty(); &#125;&#125;//Methods 2class MyQueue2 &#123; Stack&lt;Integer&gt; s1; Stack&lt;Integer&gt; s2; private int front; /** Initialize your data structure here. */ public MyQueue() &#123; s1 = new Stack(); s2 = new Stack(); &#125; /** Push element x to the back of queue. */ //O(n) public void push(int x) &#123; if (s1.isEmpty()) &#123; front = x; &#125; while (!s1.isEmpty()) &#123; s2.push(s1.pop()); &#125; s2.push(x); while (!s2.isEmpty()) &#123; s1.push(s2.pop()); &#125; &#125; /** Removes the element from in front of queue and returns that element. */ public int pop() &#123; //s1ä»£è¡¨æ²¡è¿›è¡Œè¿‡å¤„ç†çš„,queueçš„åæ–¹å‘ï¼Œåˆ™S2ä»£è¡¨å¤„ç†è¿‡çš„ã€‚ int res = s1.pop(); if(!s1.isEmpty()) &#123; front = s1.peek(); &#125; return res; &#125; /** Get the front element. */ public int peek() &#123; return front; &#125; /** Returns whether the queue is empty. */ public boolean empty() &#123; return s1.isEmpty(); &#125;&#125; 225. Implement Stack using QueuesImplement the following operations of a stack using queues. push(x) â€“ Push element x onto stack. pop() â€“ Removes the element on top of the stack. top() â€“ Get the top element. empty() â€“ Return whether the stack is empty. Example: 1234567MyStack stack = new MyStack();stack.push(1);stack.push(2); stack.top(); // returns 2stack.pop(); // returns 2stack.empty(); // returns false Notes: You must use only standard operations of a queue â€“ which means only push to back, peek/pop from front, size, and is empty operations are valid. Depending on your language, queue may not be supported natively. You may simulate a queue by using a list or deque (double-ended queue), as long as you use only standard operations of a queue. You may assume that all operations are valid (for example, no pop or top operations will be called on an empty stack). 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/* * @lc app=leetcode.cn id=225 lang=java * * [225] ç”¨é˜Ÿåˆ—å®žçŽ°æ ˆ */// @lc code=startimport java.util.Queue;import java.util.LinkedList;class MyStack &#123; //queue 4321 //stack 1234 /** Initialize your data structure here. */ Queue&lt;Integer&gt; queue; public MyStack() &#123; //å‰åŽå¼€å£ï¼Œæ‰€ä»¥ä¸€ä¸ªqueueå°±å¯ä»¥å®žçŽ° queue = new LinkedList&lt;&gt;(); &#125; /** Push element x onto stack. */ public void push(int x) &#123; queue.add(x); for (int i = 0; i &lt; queue.size() - 1; i++) &#123; queue.add(queue.poll()); &#125; &#125; /** Removes the element on top of the stack and returns that element. */ public int pop() &#123; return queue.poll(); &#125; /** Get the top element. */ public int top() &#123; return queue.peek(); &#125; /** Returns whether the stack is empty. */ public boolean empty() &#123; return queue.isEmpty(); &#125;&#125;/** * Your MyStack object will be instantiated and called as such: * MyStack obj = new MyStack(); * obj.push(x); * int param_2 = obj.pop(); * int param_3 = obj.top(); * boolean param_4 = obj.empty(); */// @lc code=end 20. Valid ParenthesesGiven a string containing just the characters &#39;(&#39;, &#39;)&#39;, &#39;{&#39;, &#39;}&#39;, &#39;[&#39; and &#39;]&#39;, determine if the input string is valid. An input string is valid if: Open brackets must be closed by the same type of brackets. Open brackets must be closed in the correct order. Note that an empty string is also considered valid. Example 1: 12Input: &quot;()&quot;Output: true Example 2: 12Input: &quot;()[]&#123;&#125;&quot;Output: true Example 3: 12Input: &quot;(]&quot;Output: false Example 4: 12Input: &quot;([)]&quot;Output: false Example 5: 12Input: &quot;&#123;[]&#125;&quot;Output: true 1234567891011121314151617181920212223242526272829303132/* * @lc app=leetcode.cn id=20 lang=java * * [20] æœ‰æ•ˆçš„æ‹¬å· */// @lc code=start//case1 ()[]&#123;&#125;//stack: pop value is )class Solution &#123; public boolean isValid(String s) &#123; if (s.isEmpty()) return true; Stack&lt;Character&gt; stack = new Stack&lt;Character&gt;(); for (char c:s.toCharArray()) &#123; if (c == '(') stack.push(')'); else if (c == '&#123;') stack.push('&#125;'); else if (c== '[') stack.push(']'); else if(stack.isEmpty() || c != stack.pop())//å½“ä¸ä¸ºå·¦æ‹¬å·æ—¶å€™ï¼Œè¯´æ˜Žcæ˜¯å³æ‹¬å·ï¼Œ //stack.popå¼¹å‡ºæ ˆå…ƒç´ ä¸­å­˜å‚¨çš„å³æ‹¬å·å…ƒç´ ï¼Œæ¯”è¾ƒè¿™ä¸¤ä¸ªå³æ‹¬å·æ˜¯å¦ç›¸ç­‰ã€‚ return false; &#125; if (stack.isEmpty())//åˆ¤æ–­ç›¸å¯¹æƒ…å†µä¸‹çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºâ€™ï¼‰ï¼Œï½ï¼Œã€‘â€˜è¿™ç§ç±»åž‹çš„ã€‚ //å½“stackä¸ºç©ºæ—¶è¾“å…¥ä¸€ä¸ªc=ï¼‰æ—¶ï¼Œstackå†…æ²¡æœ‰ï¼ˆä¸Žä¹‹å¯¹åº”ï¼Œåˆ™è®¤ä¸ºfalse return true; return false; &#125;&#125; 150. Evaluate Reverse Polish NotationEvaluate the value of an arithmetic expression in Reverse Polish Notation. Valid operators are +, -, *, /. Each operand may be an integer or another expression. Note: Division between two integers should truncate toward zero. The given RPN expression is always valid. That means the expression would always evaluate to a result and there wonâ€™t be any divide by zero operation. Example 1: 123Input: [&quot;2&quot;, &quot;1&quot;, &quot;+&quot;, &quot;3&quot;, &quot;*&quot;]Output: 9Explanation: ((2 + 1) * 3) = 9 Example 2: 123Input: [&quot;4&quot;, &quot;13&quot;, &quot;5&quot;, &quot;/&quot;, &quot;+&quot;]Output: 6Explanation: (4 + (13 / 5)) = 6 Example 3: 12345678910Input: [&quot;10&quot;, &quot;6&quot;, &quot;9&quot;, &quot;3&quot;, &quot;+&quot;, &quot;-11&quot;, &quot;*&quot;, &quot;/&quot;, &quot;*&quot;, &quot;17&quot;, &quot;+&quot;, &quot;5&quot;, &quot;+&quot;]Output: 22Explanation: ((10 * (6 / ((9 + 3) * -11))) + 17) + 5= ((10 * (6 / (12 * -11))) + 17) + 5= ((10 * (6 / -132)) + 17) + 5= ((10 * 0) + 17) + 5= (0 + 17) + 5= 17 + 5= 22 é€†æ³¢å…°è¡¨è¾¾å¼ï¼š é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åŽç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åŽç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åŽé¢ã€‚ å¹³å¸¸ä½¿ç”¨çš„ç®—å¼åˆ™æ˜¯ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ã€‚ è¯¥ç®—å¼çš„é€†æ³¢å…°è¡¨è¾¾å¼å†™æ³•ä¸º ( ( 1 2 + ) ( 3 4 + ) * ) ã€‚ é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š åŽ»æŽ‰æ‹¬å·åŽè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œä¸Šå¼å³ä¾¿å†™æˆ 1 2 + 3 4 + *ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æžœã€‚ é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—ï¼šé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼›é‡åˆ°ç®—ç¬¦åˆ™å–å‡ºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æžœåŽ‹å…¥æ ˆä¸­ã€‚ 12345678910111213141516171819202122232425262728293031/* * @lc app=leetcode.cn id=150 lang=java * * [150] é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ */// @lc code=startclass Solution &#123; public int evalRPN(String[] tokens) &#123; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); for (String s : tokens) &#123; if(s.equals("+")) &#123; stack.push(stack.pop() + stack.pop()); &#125; else if (s.equals("-")) &#123; int a = stack.pop();//å…ˆpopå‡ºæ¥çš„æ•°æ˜¯å‡æ•° int b = stack.pop(); stack.push(b - a); &#125; else if (s.equals("*")) &#123; stack.push(stack.pop() * stack.pop()); &#125; else if (s.equals("/")) &#123; int a = stack.pop(); int b = stack.pop(); stack.push(b / a); &#125; else &#123; stack.push(Integer.parseInt(s));//ä»ŽStringè½¬ä¸ºInt &#125; &#125; return stack.pop(); &#125;&#125;// @lc code=end 224. Basic CalculatorShare Implement a basic calculator to evaluate a simple expression string. The expression string may contain open ( and closing parentheses ), the plus + or minus sign -, non-negative integers and empty spaces . Example 1: 12Input: &quot;1 + 1&quot;Output: 2 Example 2: 12Input: &quot; 2-1 + 2 &quot;Output: 3 Example 3: 12Input: &quot;(1+(4+5+2)-3)+(6+8)&quot;Output: 23 Note: You may assume that the given expression is always valid. Do not use the eval built-in library function. 1234567891011121314151617181920212223242526272829303132333435363738394041/* * @lc app=leetcode.cn id=224 lang=java * * [224] åŸºæœ¬è®¡ç®—å™¨ */// @lc code=startclass Solution &#123; public int calculate(String s) &#123; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); int sign = 1; int res = 0; for (int i = 0; i &lt; s.length(); i++) &#123; //åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºæ•°å­— if (Character.isDigit(s.charAt(i))) &#123; int num = s.charAt(i) - '0'; //åˆ¤æ–­ä¸‹ä¸€ä½æ˜¯ä¸æ˜¯è¿˜æ˜¯æ•°å­—ï¼Œcase:123 while (i + 1 &lt; s.length() &amp;&amp; Character.isDigit(s.charAt(i + 1))) &#123; num = num * 10 + s.charAt(i + 1) - '0'; i++; &#125; res += num * sign; &#125; else if (s.charAt(i) == '+') &#123; sign = 1; &#125; else if (s.charAt(i) == '-') &#123; sign = -1; &#125; else if (s.charAt(i) == '(') &#123; //1 - 2å¯ä»¥çœ‹æˆ 1 + (-2) stack.push(res); stack.push(sign);//signä¼šå…ˆPopå‡ºæ¥ //æ¢å¤åˆ°åˆå§‹åŒ–çŠ¶æ€ res = 0; sign = 1; &#125; else if (s.charAt(i) == ')') &#123; res = res * stack.pop() + stack.pop(); &#125; &#125; return res; &#125;&#125;// @lc code=end 161. One Edit Distanceå­—ç¬¦ä¸²Så’ŒTåªå·®ä¸€ä¸ªè·ç¦»,è¿”å›žTrue, å¦åˆ™è¿”å›žFalse 12345678910111213141516171819202122232425case1:abcre Aberecase2:abdc abccase:3 abc abdc//TIME O(n) Math.min(s,length(), t.length());//Space:O(1) å› ä¸ºsubstringè™½ç„¶æ˜¯O(n)ï¼Œä½†æ˜¯åªåœ¨returnæ—¶å€™è°ƒç”¨ä¸€æ¬¡ã€‚public static boolean isOneEditDistance(String s, String t) &#123; //case 1:æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åŒï¼Œè®©è¶Šè¿‡åŽ»ï¼Œåˆ¤æ–­åŽé¢æ˜¯å¦ç›¸åŒ //å¦‚æžœä¸¤ä¸ªé•¿åº¦ä¸ç­‰ï¼Œå–é•¿çš„ä¼šè¶Šç•Œï¼Œæ‰€ä»¥ç”¨Math.min() for (int i = 0; i &lt; Math.min(s,length(), t.length()); i++) &#123; if (s.charAt(i) != t.charAt(i)) &#123; if (s.length() == t.length()) &#123; return s.substring(i + 1).equals(t.substring(i + 1)); &#125; else if (s.length() &gt; t.length()) &#123; return s.substring(i + 1).equals(t.substring(i)); &#125; else &#123; return t.substring(i + 1).equals(s.substring(i)); &#125; &#125; // abcå’Œabcdef,åœ¨è¿™é‡Œåˆ¤æ–­æ˜¯ä¸æ˜¯åªå¤š1ä¸ªï¼Œè¿˜æ˜¯å¤šäº†å‡ ä¸ª return Math.abs(s.length() - t.length()) == 1; &#125;&#125; 168. Excel Sheet Column TitleGiven a positive integer, return its corresponding column title as appear in an Excel sheet. For example: 123456781 -&gt; A2 -&gt; B3 -&gt; C...26 -&gt; Z27 -&gt; AA28 -&gt; AB ... Example 1: 12Input: 1Output: &quot;A&quot; Example 2: 12Input: 28Output: &quot;AB&quot; Example 3: 12Input: 701Output: &quot;ZY&quot; 1234567891011121314151617181920212223/* * @lc app=leetcode.cn id=168 lang=java * * [168] Excelè¡¨åˆ—åç§° */// @lc code=start// 26Z 27AA 28AB,è¿™é‡Œæ˜¯å¯¹26çš„ä¸€ä¸ªå¾ªçŽ¯ï¼Œ ç”¨%26+ 'A'ç®—, åœ¨26ä¹‹åŽç”¨/çš„æ–¹æ³•//time O(n) logNå› ä¸ºæ˜¯/26// Space O(n) å¯¹åº”nï¼Œæ¯æ¬¡åŠ ä¸€ä¸ªå­—æ¯class Solution &#123; public String convertToTitle(int n) &#123; StringBuilder sb = new StringBuilder(); while (n &gt; 0) &#123; n--;//28 % 26 = 2 + 'A' = 2 + 1 = 3 = 'C',æ‰€ä»¥Indexè¦ä»Ž0å¼€å§‹ï¼Œä½†æ˜¯è¿™é‡Œå¯¹åº”çš„æ˜¯A=1 sb.append((char)('A' + n % 26)); n /= 26; &#125; return sb.reverse().toString();//å¾—åˆ°çš„ç»“æžœæ˜¯åè¿‡æ¥çš„ &#125;&#125;// @lc code=end 171. Excel Sheet Column NumberGiven a column title as appear in an Excel sheet, return its corresponding column number. For example: 12345678A -&gt; 1B -&gt; 2C -&gt; 3...Z -&gt; 26AA -&gt; 27AB -&gt; 28 ... Example 1: 12Input: &quot;A&quot;Output: 1 Example 2: 12Input: &quot;AB&quot;Output: 28 Example 3: 12Input: &quot;ZY&quot;Output: 701 1234567891011121314151617/* * @lc app=leetcode.cn id=171 lang=java * * [171] Excelè¡¨åˆ—åºå· */// @lc code=startclass Solution &#123; public int titleToNumber(String s) &#123; int res = 0; for (int i = 0; i &lt; s.length(); i++) &#123; res = res * 26 + (s.charAt(i) - 'A' + 1);//Aå¯¹åº”çš„æ˜¯1 &#125; return res; &#125;&#125;// @lc code=end 38. Count and SayThe count-and-say sequence is the sequence of integers with the first five terms as following: 123451. 12. 113. 214. 12115. 111221 1 is read off as &quot;one 1&quot; or 11.11 is read off as &quot;two 1s&quot; or 21.21 is read off as &quot;one 2, then one 1&quot; or 1211. Given an integer n where 1 â‰¤ n â‰¤ 30, generate the nth term of the count-and-say sequence. You can do so recursively, in other words from the previous member read off the digits, counting the number of digits in groups of the same digit. Note: Each term of the sequence of integers will be represented as a string. Example 1: 123Input: 1Output: &quot;1&quot;Explanation: This is the base case. Example 2: 123Input: 4Output: &quot;1211&quot;Explanation: For n = 3 the term was &quot;21&quot; in which we have two groups &quot;2&quot; and &quot;1&quot;, &quot;2&quot; can be read as &quot;12&quot; which means frequency = 1 and value = 2, the same way &quot;1&quot; is read as &quot;11&quot;, so the answer is the concatenation of &quot;12&quot; and &quot;11&quot; which is &quot;1211&quot;. 1234567891011121314151617181920212223242526272829303132333435363738394041/* * @lc app=leetcode.cn id=38 lang=java * * [38] å¤–è§‚æ•°åˆ— */// @lc code=startclass Solution &#123; /** * è§£é¢˜æ€è·¯ï¼š * æœ¬é¢˜çš„éš¾ç‚¹åœ¨äºŽï¼šæŠ¥æ•°çš„æ¦‚å¿µç†è§£ï¼Œè‡³å°‘æˆ‘ä»Žé¢˜æ„ä¸­æ²¡æœ‰å¾ˆæ¸…æ™°çš„ç†è§£ï¼Œä½†æ˜¯æ„Ÿè§‰åƒæ˜¯ä¸ªé€’æŽ¨å¼ * ä»Ž4-&gt;5åˆ†æžï¼Œå°†4ä¸ªæ¯ä¸€ä½æ‹†å¼€çœ‹ï¼ˆä¸ªæ•°+æ•°å­—ï¼‰ï¼Œ4=1211 =&gt; 1=11ï¼Œ2=12ï¼Œ11=21ï¼Œæ‰€ä»¥5=111221 * æ‰€ä»¥è§£é¢˜ç”¨å¾ªçŽ¯ï¼Œä»Ž1-&gt;nå¯æ±‚è§£å‡ºæ¥ * * @param n * @return */ public String countAndSay(int n) &#123; String str = "1"; for (int i = 2; i &lt;= n; i++) &#123; StringBuilder builder = new StringBuilder(); char pre = str.charAt(0); int count = 1; for (int j = 1; j &lt; str.length(); j++) &#123; char c = str.charAt(j); if (c == pre) &#123; count++; &#125; else &#123; builder.append(count).append(pre); pre = c; count = 1; &#125; &#125; builder.append(count).append(pre); str = builder.toString(); &#125; return str; &#125;&#125;// @lc code=end]]></content>
      <tags>
        <tag>Algorithms</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Sorting And Array LEETCODE-100-DAY4]]></title>
    <url>%2F2020%2F06%2F25%2FSorting-And-Array-LEETCODE-100-DAY4%2F</url>
    <content type="text"><![CDATA[75. Sort ColorsGiven an array with n objects colored red, white or blue, sort them in-place so that objects of the same color are adjacent, with the colors in the order red, white and blue. Here, we will use the integers 0, 1, and 2 to represent the color red, white, and blue respectively. Note: You are not suppose to use the libraryâ€™s sort function for this problem. Example: 12Input: [2,0,2,1,1,0]Output: [0,0,1,1,2,2] Follow up: A rather straight forward solution is a two-pass algorithm using counting sort.First, iterate the array counting number of 0â€™s, 1â€™s, and 2â€™s, then overwrite array with total number of 0â€™s, then 1â€™s and followed by 2â€™s. Could you come up with a one-pass algorithm using only constant space? 123456789101112131415161718192021222324class Solution &#123; public void sortColors(int[] nums) &#123; if (nums == null || nums.length == 0) return; //leftæŽ§åˆ¶0æœ€åŽå‡ºçŽ°çš„ä½ç½®ï¼ŒrightæŽ§åˆ¶1æœ€å¼€å§‹å‡ºçŽ°çš„ä½ç½®ï¼ˆå€’åºï¼‰ int left = 0; int right = nums.length - 1; int index = 0; while (index &lt;= right) &#123; if(nums[index] == 0) &#123; swap(nums, index++, left++);//åŽŸåœ°äº¤æ¢ &#125; else if(nums[index] == 1) &#123; index++;//ä¸åŠ¨ &#125; else &#123; swap(nums, index, right--);// &#125; &#125; &#125; public void swap(int[] nums, int i, int j) &#123; int temp = nums[i]; nums[i] = nums[j]; nums[j] = temp; &#125;&#125; 88. Merge Sorted ArrayGiven two sorted integer arrays nums1 and nums2, merge nums2 into nums1 as one sorted array. Note: The number of elements initialized in nums1 and nums2 are m and n respectively. You may assume that nums1 has enough space (size that is greater or equal to m + n) to hold additional elements from nums2. Example: 12345Input:nums1 = [1,2,3,0,0,0], m = 3nums2 = [2,5,6], n = 3Output: [1,2,2,3,5,6] 123456789101112131415class Solution &#123; public void merge(int[] nums1, int m, int[] nums2, int n) &#123; int i = m - 1; int j = n - 1; int k = m + n - 1; while (i &gt;= 0 &amp;&amp; j &gt;= 0) &#123; //nums1å’Œ2éƒ½æ˜¯æŽ’è¿‡åºçš„ï¼Œä»ŽåŽå‘å‰æ”¾ï¼Œæœ€å¤§çš„æ”¾åœ¨æœ€åŽ nums1[k--] = nums1[i] &gt;= nums2[j] ? nums1[i--] : nums2[j--]; &#125; while (j &gt;= 0) &#123; nums1[k--] = nums2[j--]; //iåˆ°æžé™ï¼Œä½†æ˜¯jè¿˜æœ‰å‰©ä½™ &#125; &#125;&#125; 189. Rotate ArrayGiven an array, rotate the array to the right by k steps, where k is non-negative. Follow up: Try to come up as many solutions as you can, there are at least 3 different ways to solve this problem. Could you do it in-place with O(1) extra space? Example 1: 123456Input: nums = [1,2,3,4,5,6,7], k = 3Output: [5,6,7,1,2,3,4]Explanation:rotate 1 steps to the right: [7,1,2,3,4,5,6]rotate 2 steps to the right: [6,7,1,2,3,4,5]rotate 3 steps to the right: [5,6,7,1,2,3,4] Example 2: 12345Input: nums = [-1,-100,3,99], k = 2Output: [3,99,-1,-100]Explanation: rotate 1 steps to the right: [99,-1,-100,3]rotate 2 steps to the right: [3,99,-1,-100] Constraints: 1 &lt;= nums.length &lt;= 2 * 10^4 Itâ€™s guaranteed that nums[i] fits in a 32 bit-signed integer. k &gt;= 0 1234567891011121314151617181920212223242526272829303132333435// time O(n)ï¼Œè™½ç„¶ä¸‰æ¬¡ç¿»è½¬ï¼Œä½†æ˜¯æ²¡æœ‰ç´¯ä¹˜çš„æ“ä½œclass Solution &#123; public void rotate(int[] nums, int k) &#123; //ä¸‰æ¬¡ç¿»è½¬ k %= nums.length; reverse(nums, 0, nums.length - 1);//æ•´ä½“ç¿»è½¬ reverse(nums, 0, k - 1);//ç¿»è½¬å‰k reverse(nums, k, nums.length - 1);//ç¿»è½¬å‰©ä¸‹çš„n - k &#125; public void reverse(int[] nums, int start, int end) &#123; while (start &lt; end) &#123; int temp = nums[start]; nums[start++] = nums[end]; nums[end--] = temp; &#125; &#125;&#125;// @lc code=end// class Solution &#123;// public void rotate(int[] nums, int k) &#123;// int[] temp = new int[nums.length];// for (int i = 0; i &lt; nums.length; i++) &#123;// //å¦‚æžœK = 10ï¼Œè½®äº†ä¸€åœˆå†å¾€å‰è½®ä¸‰ä¸ªï¼Œå¤§äºŽnums.length, ä¸€å¼€å§‹i = 0, k = 3,æŠŠiå½“å‰çš„æ•°ç»™ä¸‰è¿™ä¸ªä½ç½®// //[1 ,2, 3, 4, 5, 6, 7]ï¼Œå› ä¸º0 + 3 % 7 = 3// // 1// temp[(i + k) % nums.length] = nums[i];// &#125;// //è¿”å›žçš„æ˜¯ç©ºï¼Œæ‰€ä»¥åœ¨åŽŸæœ‰çš„åŸºç¡€ä¸Šæ“ä½œï¼Œé‡æ–°èµ‹å€¼// //ä¸Šé¢å¾—åˆ°çš„ç»“æžœå­˜åœ¨tempé‡Œï¼Œè¦é‡æ–°èµ‹å€¼// for (int i = 0; i &lt; nums.length; i++) &#123;// nums[i] = temp[i];// &#125;// &#125;// &#125; 41. First Missing PositiveGiven an unsorted integer array, find the smallest missing positive integer. Example 1: 12Input: [1,2,0]Output: 3 Example 2: 12Input: [3,4,-1,1]Output: 2 Example 3: 12Input: [7,8,9,11,12]Output: 1 Note: Your algorithm should run in O(n) time and uses constant extra space. 12345678910111213141516171819202122232425//Bucket Sort// [1 ,2, 0] index + 1// [3, 4, -1, 1] åˆ¤æ–­æ•°æ˜¯å¦å¤§äºŽ0// [1, 99, 3, 4]å¤ªå¤§ // nums[nums[i] - 1] != nums[i] [3, 4, 1, 3] i = 0 nums[0] = 3,// nums[nums[i] - 1]å°±æ˜¯å½“å‰çš„æ•°åº”è¯¥æ”¾åœ¨çš„ä½ç½®ä¸Š nums[0] = 3 - 1 = 2 -&gt; nums[2]= -1 != nums[i]=3class Solution &#123; public int firstMissingPositive(int[] nums) &#123; if (nums == null || nums.length == 0) return 1;//è¾“å‡ºçš„æ˜¯æœ€å°çš„æ­£æ•´æ•° for (int i = 0; i &lt; nums.length; i++) &#123; //è¿™é‡Œæ˜¯while,ä¸æ˜¯if [3, 1, 4, -1],ifæ˜¯å•æ¬¡ while (nums[i] &gt; 0 &amp;&amp; nums[i] &lt;= nums.length &amp;&amp; nums[nums[i] - 1] != nums[i]) &#123; int temp = nums[nums[i] - 1]; nums[nums[i] - 1] = nums[i]; nums[i] = temp; &#125; &#125; for (int i = 0; i &lt; nums.length; i++) &#123; if(nums[i] != i + 1) &#123; return i + 1; &#125; &#125; return nums.length + 1; &#125;&#125;]]></content>
      <tags>
        <tag>Algorithms</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Bitwise And Array LEETCODE-100-DAY3]]></title>
    <url>%2F2020%2F06%2F24%2FBitwise-And-Array-LEETCODE-100-DAY3%2F</url>
    <content type="text"><![CDATA[66. Plus OneGiven a non-empty array of digits representing a non-negative integer, plus one to the integer. The digits are stored such that the most significant digit is at the head of the list, and each element in the array contain a single digit. You may assume the integer does not contain any leading zero, except the number 0 itself. Example 1: 123Input: [1,2,3]Output: [1,2,4]Explanation: The array represents the integer 123. Example 2: 123Input: [4,3,2,1]Output: [4,3,2,2]Explanation: The array represents the integer 4321. 12345678910111213141516171819202122232425//case1 1011 1012//case2 1099 1100//case3 9999 10000//time : O(n)//space : O(n)åœ¨æœ€åŽå¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„æ•°ç»„class Solution &#123; public int[] plusOne(int[] digits) &#123; if (digits == null || digits.length == 0) return digits; for (int i = digits.length - 1; i &gt;= 0; i--) &#123; //case 1 if(digits[i] &lt; 9) &#123; digits[i]++; return digits; &#125; else &#123; //case2 digits[i] = 0; &#125; &#125; //case 3 int[] res = new int[digits.length + 1]; res[0] = 1; return res; &#125;&#125; 136. Single NumberGiven a non-empty array of integers, every element appears twice except for one. Find that single one. Note: Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory? Example 1: 12Input: [2,2,1]Output: 1 Example 2: 12Input: [4,1,2,1,2]Output: 4 123456789class Solution &#123; public int singleNumber(int[] nums) &#123; int res = 0; for (int i = 0; i &lt; nums.length; i++) &#123; res ^= nums[i]; &#125; return res; &#125;&#125; ðŸ˜å¼‚æˆ–:ç›¸åŒä¸º0,ä¸åŒä¸º1389. Find The DifferenceGiven two strings s\ and t\ which consist of only lowercase letters. String t\ is generated by random shuffling string s\ and then add one more letter at a random position. Find the letter that was added in t\. Example: 123456789Input:s = &quot;abcd&quot;t = &quot;abcde&quot;Output:eExplanation:&apos;e&apos; is the letter that was added. 123456789101112//æ€§è´¨ï¼š4ä¸Ž6è¿›è¡Œå¼‚æˆ–çš„ç»“æžœ,å†ä¸Ž4è¿›è¡Œå¼‚æˆ–,å¾—åˆ°äº†6.class Solution &#123; public char findTheDifference(String s, String t) &#123; //tçš„é•¿åº¦æ¯”sé•¿ï¼Œæ‰€ä»¥ç›´æŽ¥å–tçš„æœ€åŽä¸€ä½ char c = t.charAt(t.length() - 1); for (int i = 0; i &lt; s.length(); i++) &#123; c ^= s.charAt(i); c ^= t.charAt(i); &#125; return c; &#125;&#125; æ€§è´¨ï¼ˆ1ï¼‰ï¼š4ä¸Ž6è¿›è¡Œå¼‚æˆ–çš„ç»“æžœ,å†ä¸Ž4è¿›è¡Œå¼‚æˆ–,å¾—åˆ°äº†6.191. Number of 1 BitsWrite a function that takes an unsigned integer and return the number of â€˜1â€™ bits it has (also known as the Hamming weight). Example 1: 123Input: 00000000000000000000000000001011Output: 3Explanation: The input binary string 00000000000000000000000000001011 has a total of three &apos;1&apos; bits. Example 2: 123Input: 00000000000000000000000010000000Output: 1Explanation: The input binary string 00000000000000000000000010000000 has a total of one &apos;1&apos; bit. Example 3: 123Input: 11111111111111111111111111111101Output: 31Explanation: The input binary string 11111111111111111111111111111101 has a total of thirty one &apos;1&apos; bits. Note: Note that in some languages such as Java, there is no unsigned integer type. In this case, the input will be given as signed integer type and should not affect your implementation, as the internal binary representation of the integer is the same whether it is signed or unsigned. In Java, the compiler represents the signed integers using 2â€™s complement notation. Therefore, in Example 3 above the input represents the signed integer -3. Follow up: If this function is called many times, how would you optimize it? 12345678910111213141516171819202122232425262728class Solution &#123; //dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼ public int maxSubArray(int[] nums) &#123; int[] dp = new int[nums.length]; dp[0] = nums[0]; int res = nums[0]; for(int i = 1; i &lt; nums.length; i++) &#123; dp[i] = nums[i] + (dp[i - 1] &lt; 0 ? 0 : dp[i - 1]); res = Math.max(res, dp[i]); &#125; return res; &#125;&#125;// @lc code=end// class Solution &#123;// //dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼// public int maxSubArray(int[] nums) &#123;// int[] dp = new int[nums.length];// dp[0] = nums[0];// int res = nums[0];// for(int i = 1; i &lt; nums.length; i++) &#123;// dp[i] = nums[i] + (dp[i - 1] &lt; 0 ? 0 : dp[i - 1]);// res = Math.max(res, dp[i]);// &#125;// return res;// &#125;// &#125; æ€§è´¨ï¼ˆ2ï¼‰n&amp;(n-1):å°†nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½Žä½ä¸º1çš„æ”¹æˆ0ï¼ˆåœ¨è¿™é‡Œæ³¨æ„é‡å¤æ“ä½œï¼‰231. Power of TwoGiven an integer, write a function to determine if it is a power of two. Example 1: 123Input: 1Output: true Explanation: 20 = 1 Example 2: 123Input: 16Output: trueExplanation: 24 = 16 Example 3: 12Input: 218Output: false 12345678910111213// 2 : 10// 4 : 100// 8 : 1000// 16: 10000// n : 16 10000// n - 1 : 01111//å¦‚æžœä¸Žçš„ç»“æžœéƒ½ä¸º0,é‚£ä¹ˆå°±æ˜¯2çš„æ¬¡æ–¹å€class Solution &#123; public boolean isPowerOfTwo(int n) &#123; return n &gt; 0 &amp;&amp; ((n &amp; (n - 1)) == 0); &#125;&#125; 190. Reverse BitsReverse bits of a given 32 bits unsigned integer. Example 1: 123Input: 00000010100101000001111010011100Output: 00111001011110000010100101000000Explanation: The input binary string 00000010100101000001111010011100 represents the unsigned integer 43261596, so return 964176192 which its binary representation is 00111001011110000010100101000000. Example 2: 123Input: 11111111111111111111111111111101Output: 10111111111111111111111111111111Explanation: The input binary string 11111111111111111111111111111101 represents the unsigned integer 4294967293, so return 3221225471 which its binary representation is 10111111111111111111111111111111. Note: Note that in some languages such as Java, there is no unsigned integer type. In this case, both input and output will be given as signed integer type and should not affect your implementation, as the internal binary representation of the integer is the same whether it is signed or unsigned. In Java, the compiler represents the signed integers using 2â€™s complement notation. Therefore, in Example 2 above the input represents the signed integer -3 and the output represents the signed integer -1073741825. Follow up: If this function is called many times, how would you optimize it? 1234567891011121314151617181920// 1011 å³ç§»å˜æˆ0101// 0001// 1// res = 1public class Solution &#123; // you need treat n as an unsigned value public int reverseBits(int n) &#123; if (n == 0) return 0; int res = 0; for (int i = 0; i &lt; 32; i++) &#123; res &lt;&lt;= 1; //å¦‚æžœæ˜¯å¶æ•°ï¼Œä¸º0ï¼Œå¹¶ä¸”åˆ¤æ–­æœ€ä½Žä½æ˜¯ä¸æ˜¯1 if ((n &amp; 1) == 1) res++; // 1011 å³ç§»å˜æˆ0101 n &gt;&gt;= 1; &#125; return res; &#125;&#125; 27. Remove ElementGiven an array nums and a value val, remove all instances of that value in-place and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. The order of elements can be changed. It doesnâ€™t matter what you leave beyond the new length. Example 1: 12345Given nums = [3,2,2,3], val = 3,Your function should return length = 2, with the first two elements of nums being 2.It doesn&apos;t matter what you leave beyond the returned length. Example 2: 1234567Given nums = [0,1,2,2,3,0,4,2], val = 2,Your function should return length = 5, with the first five elements of nums containing 0, 1, 3, 0, and 4.Note that the order of those five elements can be arbitrary.It doesn&apos;t matter what values are set beyond the returned length. Clarification: Confused why the returned value is an integer but your answer is an array? Note that the input array is passed in by reference, which means modification to the input array will be known to the caller as well. Internally you can think of this: 12345678// nums is passed in by reference. (i.e., without making a copy)int len = removeElement(nums, val);// any modification to nums in your function would be known by the caller.// using the length returned by your function, it prints the first len elements.for (int i = 0; i &lt; len; i++) &#123; print(nums[i]);&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243//åœ¨Listä¸­æ˜¯ç›¸ç­‰ï¼Œåœ¨Arrayä¸­æ˜¯ä¸ç­‰//åŒæŒ‡é’ˆæ³•ï¼šä¸€ä¸ªä»Žå‰å‘åŽæ‰«ï¼Œä¸€ä¸ªè®°å½•ç»“æžœï¼Œclass Solution &#123; public int removeElement(int[] nums, int val) &#123; if (nums == null || nums.length == 0) return 0; int res = 0; for (int i = 0; i &lt; nums.length; i++) &#123; //å¦‚æžœå’Œvalç›¸ç­‰ï¼Œiå‘å‰èµ°ï¼Œrä¸å˜ if(nums[i] != val) &#123; nums[res++] = nums[i]; &#125; &#125; return res; &#125;&#125;// @lc code=end// class Solution &#123;// public int removeElement(int[] nums, int val) &#123;// int ans = 0;// for(int num: nums) &#123;// if(num != val) &#123;// nums[ans] = num;// ans++;// &#125;// &#125;// return ans;// &#125;// &#125;// class Solution &#123;// public int removeElement(int[] nums, int val) &#123;// int i = 0;// for (int j = 0; j &lt; nums.length; ++j) &#123;// if (nums[j] != val) &#123;// nums[i] = nums[j];// i++;// &#125;// &#125;// return i;// &#125;// &#125; 26. Remove Duplicates from Sorted ArrayGiven a sorted array nums, remove the duplicates in-place such that each element appear only once and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. Example 1: 12345Given nums = [1,1,2],Your function should return length = 2, with the first two elements of nums being 1 and 2 respectively.It doesn&apos;t matter what you leave beyond the returned length. Example 2: 12345Given nums = [0,0,1,1,1,2,2,3,3,4],Your function should return length = 5, with the first five elements of nums being modified to 0, 1, 2, 3, and 4 respectively.It doesn&apos;t matter what values are set beyond the returned length. Clarification: Confused why the returned value is an integer but your answer is an array? Note that the input array is passed in by reference, which means modification to the input array will be known to the caller as well. Internally you can think of this: 12345678// nums is passed in by reference. (i.e., without making a copy)int len = removeDuplicates(nums);// any modification to nums in your function would be known by the caller.// using the length returned by your function, it prints the first len elements.for (int i = 0; i &lt; len; i++) &#123; print(nums[i]);&#125; 123456789101112131415161718192021222324252627282930class Solution &#123; public int removeDuplicates(int[] nums) &#123; if (nums == null || nums.length == 0) return 0; //ç¬¬ä¸€ä¸ªæ•°ä¸€å®šè¢«ä¿æŒï¼Œ int count = 1; for (int i = 1; i &lt; nums.length; i++) &#123; if(nums[i - 1] != nums[i]) &#123; //å¦‚æžœç›¸åŒ,é‚£ä¹ˆcountä¸å˜,i++ nums[count++] = nums[i]; &#125; &#125; return count; &#125;&#125;// class Solution &#123;// public int removeDuplicates(int[] nums) &#123;// if (nums == null || nums.length == 0) return 0;// int i = 0;// for (int j = 1; j &lt; nums.length; ++j) &#123;// if (nums[j] != nums[i]) &#123;// i++;// nums[i] = nums[j];// &#125;// &#125;// return i + 1;// &#125;// &#125; 12345678910111213141516 * [80] åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II */// @lc code=startclass Solution &#123; public int removeDuplicates(int[] nums) &#123; if (nums.length &lt;= 2) return nums.length; int count = 2; for(int i = 2; i &lt; nums.length; i++) &#123; if(nums[i] != nums[count - 2])&#123; nums[count++] = nums[i]; &#125; &#125; return count; &#125;&#125; 1234567891011121314151617181920212223242526 * [83] åˆ é™¤æŽ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  */// @lc code=start/** * Definition for singly-linked list. * public class ListNode &#123; * int val; * ListNode next; * ListNode(int x) &#123; val = x; &#125; * &#125; */class Solution &#123; public ListNode deleteDuplicates(ListNode head) &#123; if (head == null || head.next == null) return head; ListNode cur = head; while (cur.next != null) &#123; if(cur.next.val == cur.val) &#123; cur.next = cur.next.next; &#125; else &#123; cur = cur.next;// movre forward when do not have replcaited item; &#125; &#125; return head; &#125;&#125; 53. Maximum SubarrayGiven an integer array nums, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum. Example: 123Input: [-2,1,-3,4,-1,2,1,-5,4],Output: 6Explanation: [4,-1,2,1] has the largest sum = 6. Follow up: If you have figured out the O(n) solution, try coding another solution using the divide and conquer approach, which is more subtle. 12345678910111213class Solution &#123; //dp,å‰Nä¸ªæ•°çš„å’Œå°±æ˜¯å®ƒçš„DPå€¼ public int maxSubArray(int[] nums) &#123; int[] dp = new int[nums.length]; dp[0] = nums[0]; int res = nums[0]; for(int i = 1; i &lt; nums.length; i++) &#123; dp[i] = nums[i] + (dp[i - 1] &lt; 0 ? 0 : dp[i - 1]); res = Math.max(res, dp[i]); &#125; return res; &#125;&#125;]]></content>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[String-LEETCODE-100-DAY2]]></title>
    <url>%2F2020%2F06%2F23%2FString-LEETCODE-100-DAY2%2F</url>
    <content type="text"><![CDATA[186.reverse-words-in-a-string-ii)ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€ä¸ªç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå•è¯ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥: &quot;the sky is blue&quot;è¾“å‡º: &quot;blue is sky the&quot; æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå› ä¸ºæ•´ä½“éåŽ†å’Œå•ä¸ªå•è¯éåŽ†çš„çš„å¤æ‚åº¦éƒ½ä¸ºnï¼Œrä»Ž0èµ°åˆ°æœ€å³çš„å¤æ‚åº¦ä¹Ÿæ˜¯nï¼Œè¿™æ ·å°±æ˜¯3nçš„å¤æ‚åº¦ï¼Œå¿½ç•¥æŒ‡æ•°ï¼Œå³å¯å¾—åˆ°O(n) ç©ºé—´å¤æ‚åº¦ä¸ºO(1) 123456789101112131415161718192021222324//å…ˆæ•´ä½“ç¿»è½¬ï¼Œç„¶åŽä½¿ç”¨åŒæŒ‡é’ˆæ³•ï¼Œå°†ræŒ‡å‘å•è¯åŽçš„ç©ºæ ¼éƒ¨åˆ†ï¼Œå†é€ä¸€ç¿»è½¬å•è¯class Solution &#123; public String reverseWords(char[] s) &#123; reverse(s, 0, s.length - 1); int r = 0; while (r &lt; s.length) &#123; int l = r; while (r &lt; s.length &amp;&amp; s[r] != ' ') &#123; r++; &#125; //å› ä¸ºråœ¨ç©ºæ ¼ä¸Šï¼Œæ‰€ä»¥è¦åˆ é™¤å•è¯çš„è¯ï¼Œå°±è¦å‰è¿›ä¸€æ ¼ã€‚ reverse(s, l, r - 1); r++; &#125; &#125; public void reverse(char[] s, int i, int j) &#123; while (i &lt; j) &#123; char temp = s[i]; s[i++] = s[j]; s[j--] = temp; &#125; &#125;&#125; 151. Reverse Words in a StringtrimåŽ»æŽ‰å‰åŽç©ºæ ¼,split ä¸­çš„\\sæŒ‡æ‰€æœ‰çš„ç©ºæ ¼å›žè½¦,+æŒ‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªGiven an input string, reverse the string word by word. Example 1: 12Input: &quot;the sky is blue&quot;Output: &quot;blue is sky the&quot; Example 2: 123Input: &quot; hello world! &quot;Output: &quot;world! hello&quot;Explanation: Your reversed string should not contain leading or trailing spaces. Example 3: 123Input: &quot;a good example&quot;Output: &quot;example good a&quot;Explanation: You need to reduce multiple spaces between two words to a single space in the reversed string. Note: A word is defined as a sequence of non-space characters. Input string may contain leading or trailing spaces. However, your reversed string should not contain leading or trailing spaces. You need to reduce multiple spaces between two words to a single space in the reversed string. Follow up: For C programmers, try to solve it in-place in O(1) extra space. 123456789101112131415161718192021222324252627282930313233343536373839// @lc code=startclass Solution &#123; public String reverseWords(String s) &#123; if (s == null || s.length() == 0) &#123; return s; &#125; String[] words = s.trim().split("\\s+"); StringBuilder sb = new StringBuilder(); for (int i = words.length - 1; i &gt;= 0; i--) &#123; sb.append(words[i] + ' '); &#125; return sb.toString().trim(); &#125;&#125;// @lc code=end// //å…ˆæ•´ä½“ç¿»è½¬ï¼Œç„¶åŽä½¿ç”¨åŒæŒ‡é’ˆæ³•ï¼Œå°†ræŒ‡å‘å•è¯åŽçš„ç©ºæ ¼éƒ¨åˆ†ï¼Œå†é€ä¸€ç¿»è½¬å•è¯// class Solution &#123;// public String reverseWords(char[] s) &#123;// reverse(s, 0, s.length - 1);// int r = 0;// while (r &lt; s.length) &#123;// int l = r;// while (r &lt; s.length &amp;&amp; s[r] != ' ') &#123;// r++;// &#125;// //å› ä¸ºråœ¨ç©ºæ ¼ä¸Šï¼Œæ‰€ä»¥è¦åˆ é™¤å•è¯çš„è¯ï¼Œå°±è¦å‰è¿›ä¸€æ ¼ã€‚// reverse(s, l, r - 1);// r++;// &#125;// &#125;// public void reverse(char[] s, int i, int j) &#123;// while (i &lt; j) &#123;// char temp = s[i];// s[i++] = s[j];// s[j--] = temp;// &#125;// &#125;// &#125; 345. Reverse Vowels of a StringWrite a function that takes a string as input and reverse only the vowels of a string. Example 1: 12Input: &quot;hello&quot;Output: &quot;holle&quot; Example 2: 12Input: &quot;leetcode&quot;Output: &quot;leotcede&quot; Note:The vowels does not include the letter â€œyâ€. 12345678910111213141516171819202122class Solution &#123; public String reverseVowels(String s) &#123; if (s == null || s.length() == 0) return s; String vowel = "aeiouAEIOU"; char[] str = s.toCharArray(); int left = 0; int right = s.length() - 1; while (left &lt; right) &#123; //å¦‚æžœæ‰¾ä¸åˆ°ï¼Œå°±å‰è¿› while (left &lt; right &amp;&amp; vowel.indexOf(str[left]) == -1) &#123; left++; &#125; while (left &lt; right &amp;&amp; vowel.indexOf(str[right]) == -1) &#123; right--; &#125; char temp = str[left]; str[left++] = str[right]; str[right--] = temp; &#125; return new String(str); &#125;&#125; 13.Roman to Integer1234567891011121314151617181920212223242526272829303132// é¦–å…ˆå°†æ‰€æœ‰çš„ç»„åˆå¯èƒ½æ€§åˆ—å‡ºå¹¶æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­// ç„¶åŽå¯¹å­—ç¬¦ä¸²è¿›è¡ŒéåŽ†ï¼Œç”±äºŽç»„åˆåªæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ 1 ä¸ªå­—ç¬¦ï¼Œä¸€ç§æ˜¯ 2 ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ 2 ä¸ªå­—ç¬¦ä¼˜å…ˆäºŽ 1 ä¸ªå­—ç¬¦// å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦çš„ç»„åˆåœ¨å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å°†å€¼å–å‡ºåŠ åˆ°ç»“æžœ ans ä¸­ï¼Œå¹¶å‘åŽç§»2ä¸ªå­—ç¬¦ã€‚ä¸å­˜åœ¨åˆ™å°†åˆ¤æ–­å½“å‰ 1 ä¸ªå­—ç¬¦æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å°†å€¼å–å‡ºåŠ åˆ°ç»“æžœ ans ä¸­ï¼Œå¹¶å‘åŽç§» 1 ä¸ªå­—ç¬¦// éåŽ†ç»“æŸè¿”å›žç»“æžœ ansclass Solution &#123; public int romanToInt(String s) &#123; Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put("I", 1); map.put("IV", 4); map.put("V", 5); map.put("IX", 9); map.put("X", 10); map.put("XL", 40); map.put("L", 50); map.put("XC", 90); map.put("C", 100); map.put("CD", 400); map.put("D", 500); map.put("CM", 900); map.put("M", 1000); int ans = 0; for(int i = 0;i &lt; s.length();) &#123; if (i + 1 &lt; s.length() &amp;&amp; map.containsKey(s.substring(i, i+2))) &#123; ans += map.get(s.substring(i, i+2)); i += 2; &#125; else &#123; ans += map.get(s.substring(i, i+1)); i++; &#125; &#125; return ans; &#125; 12. Integer to Roman1234567891011121314class Solution &#123; public String intToRoman(int num) &#123; int[] values = &#123;1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1&#125;; String[] strs = &#123;"M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"&#125;; StringBuilder sb = new StringBuilder(); for(int i = 0; i &lt; values.length; i++) &#123; while (num &gt;= values[i]) &#123; num -= values[i]; sb.append(strs[i]); &#125; &#125; return sb.toString(); &#125;&#125; 273. Integer to English Words12345678910111213141516171819202122232425262728class Solution &#123; String[] less20 = &#123;"", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"&#125;; String[] tens = &#123;"", "Ten", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"&#125;; String[] thousands = &#123;"", "Thousand", "Million", "Billion"&#125;; public String numberToWords(int num) &#123; if (num == 0) return "Zero"; String res = ""; int i = 0; while (num &gt; 0) &#123; if (num % 1000 != 0) &#123; res = helper(num % 1000)+ thousands[i] + " " + res; &#125; num /= 1000; i++; &#125; return res.trim(); &#125; public String helper(int num) &#123; if (num == 0) return ""; if (num &lt; 20) &#123; return less20[num % 20] + " "; &#125; else if (num &lt; 100) &#123; return tens[num / 10] + " " + helper(num % 10); &#125; else &#123; return less20[num / 100] + " Hundred " + helper(num % 100); &#125; &#125;&#125; 1.Two SumGiven an array of integers, return indices of the two numbers such that they add up to a specific target. You may assume that each input would have exactly\ one solution, and you may not use the same element twice. Example: 1234Given nums = [2, 7, 11, 15], target = 9,Because nums[0] + nums[1] = 2 + 7 = 9,return [0, 1]. 123456789101112131415161718192021class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; int complement = target - nums[i]; if(map.containsKey(complement)) &#123; return new int[] &#123;map.get(complement), i&#125;; &#125; map.put(nums[i], i); &#125; throw new IllegalArgumentException("No two sum solution"); &#125;&#125; // for (int i = 0; i &lt; nums.length; ++i) &#123; // for (int j = i + 1; j &lt; nums.length; ++j) &#123; // if (nums[j] == target - nums[i]) &#123; // return new int[] &#123;i, j&#125;; // &#125; // &#125; // &#125; // throw new IllegalArgumentException("No solution"); 15.Three SumGiven an array nums of n integers, are there elements a, b, c in nums such that a + b + c = 0? Find all unique triplets in the array which gives the sum of zero. Note: The solution set must not contain duplicate triplets. Example: 1234567Given array nums = [-1, 0, 1, 2, -1, -4],A solution set is:[ [-1, 0, 1], [-1, -1, 2]] 123456789101112131415161718192021222324252627class Solution &#123; public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) &#123; List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList(); int len = nums.length; if (nums == null || len &lt; 3) return ans; Arrays.sort(nums);// æŽ’åº for (int i = 0; i &lt; len; i++) &#123; if(nums[i] &gt; 0) break;// å¦‚æžœå½“å‰æ•°å­—å¤§äºŽ0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äºŽ0ï¼Œæ‰€ä»¥ç»“æŸå¾ªçŽ¯ if (i &gt; 0 &amp;&amp; nums[i] == nums[i-1]) continue;// åŽ»é‡ int L = i + 1; int R = len - 1; while (L &lt; R) &#123; int sum = nums[i] + nums[L] + nums[R]; if(sum == 0) &#123; ans.add(Arrays.asList(nums[i], nums[L], nums[R])); while (L &lt; R &amp;&amp; nums[L] == nums[L+1]) L++;// åŽ»é‡ while (L &lt; R &amp;&amp; nums[R] == nums[R-1]) R--;// åŽ»é‡ L++; R--; &#125; else if (sum &lt; 0) L++; else if (sum &gt; 0) R--; &#125; &#125; return ans; &#125;&#125; 16. 3Sum ClosestGiven an array nums of n integers and an integer target, find three integers in nums such that the sum is closest to target. Return the sum of the three integers. You may assume that each input would have exactly one solution. Example 1: 123Input: nums = [-1,2,1,-4], target = 1Output: 2Explanation: The sum that is closest to the target is 2. (-1 + 2 + 1 = 2). Constraints: 3 &lt;= nums.length &lt;= 10^3 -10^3 &lt;= nums[i] &lt;= 10^3 -10^4 &lt;= target &lt;= 10^4 123456789101112131415161718192021222324// @lc code=start//åªæœ‰åœ¨ä»Žå°åˆ°å¤§æŽ’åºåŽï¼Œæ‰èƒ½ç§»åŠ¨leftå’Œrightï¼ˆå› ä¸ºæŽ’åºæ˜¯ä¸ºäº†åŽ»é‡ï¼‰class Solution &#123; public int threeSumClosest(int[] nums, int target) &#123; int res = nums[0] + nums[1] + nums[nums.length - 1]; Arrays.sort(nums); for(int i = 0; i &lt; nums.length - 2; i++) &#123; int start = i + 1, end = nums.length - 1; while (start &lt; end) &#123; int sum = nums[i] + nums[start] + nums[end]; if (sum &gt; target) &#123; end--; &#125; else &#123; start++; &#125; if(Math.abs(sum - target) &lt; Math.abs(res - target)) &#123; //ç»å¯¹å€¼åå°,è¯´æ˜Žæ›´æŽ¥è¿‘ res = sum; &#125; &#125; &#125; return res; &#125;&#125; 18. 4 SumGiven an array nums of n integers and an integer target, are there elements a, b, c, and d in nums such that a + b + c + d = target? Find all unique quadruplets in the array which gives the sum of target. Note: The solution set must not contain duplicate quadruplets. Example: 12345678Given array nums = [1, 0, -1, 0, -2, 2], and target = 0.A solution set is:[ [-1, 0, 0, 1], [-2, -1, 1, 2], [-2, 0, 0, 2]] 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172class Solution &#123; public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums,int target)&#123; /*å®šä¹‰ä¸€ä¸ªè¿”å›žå€¼*/ List&lt;List&lt;Integer&gt;&gt; result=new ArrayList&lt;&gt;(); /*å½“æ•°ç»„ä¸ºnullæˆ–å…ƒç´ å°äºŽ4ä¸ªæ—¶ï¼Œç›´æŽ¥è¿”å›ž*/ if(nums==null||nums.length&lt;4)&#123; return result; &#125; /*å¯¹æ•°ç»„è¿›è¡Œä»Žå°åˆ°å¤§æŽ’åº*/ Arrays.sort(nums); /*æ•°ç»„é•¿åº¦*/ int length=nums.length; /*å®šä¹‰4ä¸ªæŒ‡é’ˆkï¼Œiï¼Œjï¼Œh kä»Ž0å¼€å§‹éåŽ†ï¼Œiä»Žk+1å¼€å§‹éåŽ†ï¼Œç•™ä¸‹jå’Œhï¼ŒjæŒ‡å‘i+1ï¼ŒhæŒ‡å‘æ•°ç»„æœ€å¤§å€¼*/ for(int k=0;k&lt;length-3;k++)&#123; /*å½“kçš„å€¼ä¸Žå‰é¢çš„å€¼ç›¸ç­‰æ—¶å¿½ç•¥*/ if(k&gt;0&amp;&amp;nums[k]==nums[k-1])&#123; continue; &#125; /*èŽ·å–å½“å‰æœ€å°å€¼ï¼Œå¦‚æžœæœ€å°å€¼æ¯”ç›®æ ‡å€¼å¤§ï¼Œè¯´æ˜ŽåŽé¢è¶Šæ¥è¶Šå¤§çš„å€¼æ ¹æœ¬æ²¡æˆ*/ int min1=nums[k]+nums[k+1]+nums[k+2]+nums[k+3]; if(min1&gt;target)&#123; break; &#125; /*èŽ·å–å½“å‰æœ€å¤§å€¼ï¼Œå¦‚æžœæœ€å¤§å€¼æ¯”ç›®æ ‡å€¼å°ï¼Œè¯´æ˜ŽåŽé¢è¶Šæ¥è¶Šå°çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/ int max1=nums[k]+nums[length-1]+nums[length-2]+nums[length-3]; if(max1&lt;target)&#123; continue; &#125; /*ç¬¬äºŒå±‚å¾ªçŽ¯iï¼Œåˆå§‹å€¼æŒ‡å‘k+1*/ for(int i=k+1;i&lt;length-2;i++)&#123; /*å½“içš„å€¼ä¸Žå‰é¢çš„å€¼ç›¸ç­‰æ—¶å¿½ç•¥*/ if(i&gt;k+1&amp;&amp;nums[i]==nums[i-1])&#123; continue; &#125; /*å®šä¹‰æŒ‡é’ˆjæŒ‡å‘i+1*/ int j=i+1; /*å®šä¹‰æŒ‡é’ˆhæŒ‡å‘æ•°ç»„æœ«å°¾*/ int h=length-1; /*èŽ·å–å½“å‰æœ€å°å€¼ï¼Œå¦‚æžœæœ€å°å€¼æ¯”ç›®æ ‡å€¼å¤§ï¼Œè¯´æ˜ŽåŽé¢è¶Šæ¥è¶Šå¤§çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/ int min=nums[k]+nums[i]+nums[j]+nums[j+1]; if(min&gt;target)&#123; continue; &#125; /*èŽ·å–å½“å‰æœ€å¤§å€¼ï¼Œå¦‚æžœæœ€å¤§å€¼æ¯”ç›®æ ‡å€¼å°ï¼Œè¯´æ˜ŽåŽé¢è¶Šæ¥è¶Šå°çš„å€¼æ ¹æœ¬æ²¡æˆï¼Œå¿½ç•¥*/ int max=nums[k]+nums[i]+nums[h]+nums[h-1]; if(max&lt;target)&#123; continue; &#125; /*å¼€å§‹jæŒ‡é’ˆå’ŒhæŒ‡é’ˆçš„è¡¨æ¼”ï¼Œè®¡ç®—å½“å‰å’Œï¼Œå¦‚æžœç­‰äºŽç›®æ ‡å€¼ï¼Œj++å¹¶åŽ»é‡ï¼Œh--å¹¶åŽ»é‡ï¼Œå½“å½“å‰å’Œå¤§äºŽç›®æ ‡å€¼æ—¶h--ï¼Œå½“å½“å‰å’Œå°äºŽç›®æ ‡å€¼æ—¶j++*/ while (j&lt;h)&#123; int curr=nums[k]+nums[i]+nums[j]+nums[h]; if(curr==target)&#123; result.add(Arrays.asList(nums[k],nums[i],nums[j],nums[h])); j++; while(j&lt;h&amp;&amp;nums[j]==nums[j-1])&#123; j++; &#125; h--; while(j&lt;h&amp;&amp;i&lt;h&amp;&amp;nums[h]==nums[h+1])&#123; h--; &#125; &#125;else if(curr&gt;target)&#123; h--; &#125;else &#123; j++; &#125; &#125; &#125; &#125; return result; &#125;&#125; 242. Valid AnagramGiven two strings s and t , write a function to determine if t is an anagram of s. Example 1: 12Input: s = &quot;anagram&quot;, t = &quot;nagaram&quot;Output: true Example 2: 12Input: s = &quot;rat&quot;, t = &quot;car&quot;Output: false Note:You may assume the string contains only lowercase alphabets. Follow up:What if the inputs contain unicode characters? How would you adapt your solution to such case? 12345678910111213141516class Solution &#123; public boolean isAnagram(String s, String t) &#123; if (s.length() != t.length()) &#123; return false; &#125; int[] count = new int[26]; for(int i = 0; i &lt; s.length(); i++) &#123; count[s.charAt(i) - 'a']++; count[t.charAt(i) - 'a']--; &#125; for (int num : count) &#123; if (num != 0) return false; &#125; return true; &#125;&#125; 49. Group AnagramsGiven an array of strings, group anagrams together. Example: 1234567Input: [&quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;],Output:[ [&quot;ate&quot;,&quot;eat&quot;,&quot;tea&quot;], [&quot;nat&quot;,&quot;tan&quot;], [&quot;bat&quot;]] Note: All inputs will be in lowercase. The order of your output does not matter. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import java.util.HashMap;import java.util.List;import java.util.*;/* * @lc app=leetcode.cn id=49 lang=java * * [49] å­—æ¯å¼‚ä½è¯åˆ†ç»„ */// @lc code=start//time:Oï¼ˆm + nï¼‰ m:strsé•¿åº¦ n:strsä¸­æœ€å¤§Stringçš„é•¿åº¦//space: Oï¼ˆnï¼‰çº§åˆ«class Solution &#123; public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) &#123; //countingä¸ºkey, å­—ç¬¦ä¸²ä¸ºvalue //è®²aabbcå’Œababcå­˜å…¥a2b2c1 HashMap&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;(); for(String str : strs) &#123; //å¯¹å½“å‰çš„å•ä¸ªå•è¯è¿›è¡Œcounting sort int[] count = new int[26]; for(Character ch : str.toCharArray()) &#123; count[ch - 'a']++; &#125; //è®¾ç½®åŸºå‡† String s = ""; for(int i = 0; i &lt; count.length; i++) &#123; //ç­‰äºŽ0ï¼Œè¯´æ˜Žå­—æ¯æ²¡æœ‰å‡ºçŽ°ï¼Œåœ¨è¿™é‡Œåªæ•°å‡ºçŽ°è¿‡çš„å­—æ¯ if(count[i] != 0) &#123; //valueOfå°†å­—æ¯å‡ºçŽ°çš„æ¬¡æ•°ä»ŽIntåž‹è½¬æ¢æˆStringç±»åž‹ s += String.valueOf(count[i]) + String.valueOf((char)(i + 'a')); //ä¹‹å‰å‡åŽ»a,çŽ°åœ¨åŠ ä¸Šaï¼Œå°±æ¢å¤åˆ°äº†a &#125; &#125; if (map.containsKey(s)) &#123; //å¦‚æžœå·²ç»åŒ…å«äº†ï¼Œå°±å–å‡ºæ¥ï¼Œç„¶åŽåŠ è¿›åŽ» List&lt;String&gt; list = map.get(s); list.add(str); &#125; else &#123; //å¦‚æžœç¬¬ä¸€æ¬¡å‡ºçŽ° List&lt;String&gt; list = new ArrayList&lt;&gt;();//åˆå§‹åŒ–List list.add(str);//å°†2a2b1cå’ŒaabbcåŠ å…¥åˆ°listä¸­ map.put(s, list); &#125; &#125; return new ArrayList&lt;&gt;(map.values()); &#125;&#125;// @lc code=end 14. Longest Common PrefixWrite a function to find the longest common prefix string amongst an array of strings. If there is no common prefix, return an empty string &quot;&quot;. Example 1: 12Input: [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]Output: &quot;fl&quot; Example 2: 123Input: [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]Output: &quot;&quot;Explanation: There is no common prefix among the input strings. Note: All given inputs are in lowercase letters a-z. 123456789101112131415161718192021222324252627/* * @lc app=leetcode.cn id=14 lang=java * * [14] æœ€é•¿å…¬å…±å‰ç¼€ */// @lc code=startclass Solution &#123; public String longestCommonPrefix(String[] strs) &#123; if(strs.length == 0) &#123; return ""; &#125; String ans = strs[0]; for(int i = 1; i &lt; strs.length; i++) &#123; int j = 0; for(;j &lt; ans.length() &amp;&amp; j &lt; strs[i].length();j++) &#123; if(ans.charAt(j) != strs[i].charAt(j)) break; &#125; ans = ans.substring(0, j); if(ans.equals("")) return ans; &#125; return ans; &#125;&#125;]]></content>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Binary Search and LinkedList LEETCODE 100 DAY1]]></title>
    <url>%2F2020%2F06%2F22%2FBinary-Search-and-LinkedList-LEETCODE-100-DAY1%2F</url>
    <content type="text"><![CDATA[74. Search a 2D MatrixWrite an efficient algorithm that searches for a value in an m x n matrix. This matrix has the following properties: Integers in each row are sorted from left to right. The first integer of each row is greater than the last integer of the previous row. Example 1: 12345678Input:matrix = [ [1, 3, 5, 7], [10, 11, 16, 20], [23, 30, 34, 50]]target = 3Output: true Example 2: 12345678Input:matrix = [ [1, 3, 5, 7], [10, 11, 16, 20], [23, 30, 34, 50]]target = 13Output: false 12345678910111213141516171819202122class Solution &#123; public boolean searchMatrix(int[][] matrix, int target) &#123; if (matrix.length == 0 || matrix[0].length == 0) return false; int row = matrix.length; int col = matrix[0].length; int start = 0; int end = row * col - 1; while (start &lt;= end) &#123; int mid = start + (end - start) / 2; int value = matrix[mid / col][mid % col]; if (value == target) &#123; return true; &#125; else if (value &lt; target) &#123; start = mid + 1; &#125; else &#123; end = mid - 1; &#125; &#125; return false; &#125;&#125; 240.Search a 2D Matrix IIWrite an efficient algorithm that searches for a value in an m x n matrix. This matrix has the following properties: Integers in each row are sorted in ascending from left to right. Integers in each column are sorted in ascending from top to bottom. Example: Consider the following matrix: 1234567[ [1, 4, 7, 11, 15], [2, 5, 8, 12, 19], [3, 6, 9, 16, 22], [10, 13, 14, 17, 24], [18, 21, 23, 26, 30]] Given target = 5, return true. Given target = 20, return false. 1234567891011121314151617class Solution &#123; public boolean searchMatrix(int[][] matrix, int target) &#123; if (matrix.length == 0 || matrix[0].length == 0) return false; int row = 0; int col = matrix[0].length - 1; while (col &gt;= 0 &amp;&amp; row &lt;= matrix.length - 1) &#123; if (target == matrix[row][col]) &#123; return true; &#125; else if (target &lt; matrix[row][col]) &#123; col--; &#125; else &#123; row++; &#125; &#125; return false; &#125;&#125; 35. Search Insert PositionGiven a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order. You may assume no duplicates in the array. Example 1: 12Input: [1,3,5,6], 5Output: 2 Example 2: 12Input: [1,3,5,6], 2Output: 1 Example 3: 12Input: [1,3,5,6], 7Output: 4 Example 4: 12Input: [1,3,5,6], 0Output: 0 12345678910111213141516171819202122232425262728// é¦–å…ˆï¼Œæ’å…¥ä½ç½®æœ‰å¯èƒ½åœ¨æ•°ç»„çš„æœ«å°¾ï¼ˆé¢˜ç›®ä¸­çš„ç¤ºä¾‹ 3ï¼‰ï¼Œéœ€è¦å•ç‹¬åˆ¤æ–­ï¼›// å…¶æ¬¡ï¼Œå¦‚æžœå¾…æ’å…¥å…ƒç´ æ¯”æœ€åŽä¸€ä¸ªå…ƒç´ ä¸¥æ ¼å°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæ•°ç»„ä¸­æœ‰å’Œæ’å…¥å…ƒç´ ä¸€æ ·çš„å…ƒç´ ï¼Œè¿”å›žä»»æ„ä¸€ä¸ªä½ç½®å³å¯ï¼›// å¦åˆ™ï¼Œæ’å…¥çš„ä½ç½®åº”è¯¥æ˜¯ä¸¥æ ¼å¤§äºŽ target çš„ç¬¬ 1 ä¸ªå…ƒç´ çš„ä½ç½®ã€‚//å› æ­¤ï¼Œä¸¥æ ¼å°äºŽ target çš„å…ƒç´ ä¸€å®šä¸æ˜¯è§£ï¼Œæ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ã€‚class Solution &#123; public int searchInsert(int[] nums, int target) &#123; int len = nums.length; if (len == 0) &#123; return 0; &#125; if (nums[len - 1] &lt; target) &#123; return len; &#125; int left = 0; int right = len - 1; while (left &lt; right) &#123; int mid = (left + right) &gt;&gt;&gt; 1; // ä¸¥æ ¼å°äºŽ target çš„å…ƒç´ ä¸€å®šä¸æ˜¯è§£ if (nums[mid] &lt; target) &#123; left = mid + 1; &#125; else &#123; right = mid; &#125; &#125; return left; &#125;&#125; [374. Guess Number Higher or Lower]https://leetcode.com/problems/guess-number-higher-or-lower/We are playing the Guess Game. The game is as follows: I pick a number from 1 to n\. You have to guess which number I picked. Every time you guess wrong, Iâ€™ll tell you whether the number is higher or lower. You call a pre-defined API guess(int num) which returns 3 possible results (-1, 1, or 0): 123-1 : My number is lower 1 : My number is higher 0 : Congrats! You got it! Example : 12Input: n = 10, pick = 6Output: 6 12345678910111213141516public class Solution extends GuessGame &#123; public int guessNumber(int n) &#123; int left = 1; int right = n; while (left &lt; right) &#123; int mid = (left + right + 1) &gt;&gt;&gt; 1; int guessNum = guess(mid); if (guessNum == -1) &#123; right = mid - 1;// ä¸­ä½æ•°æ¯”çŒœçš„æ•°å¤§ï¼Œå› æ­¤æ¯”ä¸­ä½æ•°å¤§çš„æ•°åŒ…æ‹¬ä¸­ä½æ•°éƒ½ä¸æ˜¯ç›®æ ‡å…ƒç´  &#125; else &#123; left = mid; &#125; &#125; return left; &#125;&#125; 278. First Bad VersionYou are a product manager and currently leading a team to develop a new product. Unfortunately, the latest version of your product fails the quality check. Since each version is developed based on the previous version, all the versions after a bad version are also bad. Suppose you have n versions [1, 2, ..., n] and you want to find out the first bad one, which causes all the following ones to be bad. You are given an API bool isBadVersion(version) which will return whether version is bad. Implement a function to find the first bad version. You should minimize the number of calls to the API. Example: 1234567Given n = 5, and version = 4 is the first bad version.call isBadVersion(3) -&gt; falsecall isBadVersion(5) -&gt; truecall isBadVersion(4) -&gt; trueThen 4 is the first bad version. 123456789101112131415161718/* The isBadVersion API is defined in the parent class VersionControl. boolean isBadVersion(int version); */public class Solution extends VersionControl &#123; public int firstBadVersion(int n) &#123; int left = 1; int right = n; while (left &lt; right) &#123; int mid = left + (right - left) / 2; if(isBadVersion(mid)) &#123; right = mid; &#125; else &#123; left = mid + 1; &#125; &#125; return left; &#125;&#125; 34. Find First and Last Position of Element in Sorted ArrayGiven an array of integers nums sorted in ascending order, find the starting and ending position of a given target value. Your algorithmâ€™s runtime complexity must be in the order of O(log n). If the target is not found in the array, return [-1, -1]. Example 1: 12Input: nums = [5,7,7,8,8,10], target = 8Output: [3,4] Example 2: 12Input: nums = [5,7,7,8,8,10], target = 6Output: [-1,-1] 123456789101112131415161718192021222324252627282930313233343536373839class Solution &#123; public int[] searchRange(int[] nums, int target) &#123; if (nums == null || nums.length ==0) return new int[]&#123;-1, -1&#125;; int start = findFirst(nums, target); if(start == -1) return new int[]&#123;-1, -1&#125;; int end = findLast(nums, target); return new int[]&#123;start, end&#125;; &#125; public int findFirst(int[] nums, int target) &#123; int start = 0; int end = nums.length - 1; while (start + 1 &lt; end) &#123; int mid = start + (end - start) / 2; if(nums[mid] &lt; target) &#123; start = mid; &#125; else &#123; end = mid; &#125; &#125; if(nums[start] == target) return start; if(nums[end] == target) return end; return -1; &#125; public int findLast(int[] nums, int target) &#123; int start = 0; int end = nums.length - 1; while (start + 1 &lt; end) &#123; int mid = start + (end - start) / 2; if(nums[mid] &gt; target) &#123; end = mid; &#125; else &#123; start = mid; &#125; &#125; if(nums[end] == target) return end; if(nums[start] == target) return start; return -1; &#125;&#125; 162.Find Peak ElementA peak element is an element that is greater than its neighbors. Given an input array nums, where nums[i] â‰  nums[i+1], find a peak element and return its index. The array may contain multiple peaks, in that case return the index to any one of the peaks is fine. You may imagine that nums[-1] = nums[n] = -âˆž. Example 1: 123Input: nums = [1,2,3,1]Output: 2Explanation: 3 is a peak element and your function should return the index number 2. Example 2: 1234Input: nums = [1,2,1,3,5,6,4]Output: 1 or 5 Explanation: Your function can return either index number 1 where the peak element is 2, or index number 5 where the peak element is 6. 12345678910111213141516class Solution &#123; public int findPeakElement(int[] nums) &#123; int start = 0; int end = nums.length - 1; while (start &lt;= end) &#123; if (start == end) return start; int mid = start + (end - start) / 2; if(nums[mid] &gt;= nums[mid + 1]) &#123; end = mid; &#125; else &#123; start = mid + 1; &#125; &#125; return start; &#125;&#125; 141. Linked List CycleGiven a linked list, determine if it has a cycle in it. To represent a cycle in the given linked list, we use an integer pos which represents the position (0-indexed) in the linked list where tail connects to. If pos is -1, then there is no cycle in the linked list. Example 1: 123Input: head = [3,2,0,-4], pos = 1Output: trueExplanation: There is a cycle in the linked list, where tail connects to the second node. Example 2: 123Input: head = [1,2], pos = 0Output: trueExplanation: There is a cycle in the linked list, where tail connects to the first node. Example 3: 123Input: head = [1], pos = -1Output: falseExplanation: There is no cycle in the linked list. Follow up: Can you solve it using O(1) (i.e. constant) memory? 123456789101112131415public class Solution &#123; public boolean hasCycle(ListNode head) &#123; if(head == null || head.next == null) return false; ListNode fast = head; ListNode slow = head; while (fast != null &amp;&amp; fast.next != null) &#123; slow = slow.next; fast = fast.next.next; if (slow == fast) &#123; return true; &#125; &#125; return false; &#125;&#125; 142. Linked List Cycle IIGiven a linked list, return the node where the cycle begins. If there is no cycle, return null. To represent a cycle in the given linked list, we use an integer pos which represents the position (0-indexed) in the linked list where tail connects to. If pos is -1, then there is no cycle in the linked list. Note: Do not modify the linked list. Example 1: 123Input: head = [3,2,0,-4], pos = 1Output: tail connects to node index 1Explanation: There is a cycle in the linked list, where tail connects to the second node. Example 2: 123Input: head = [1,2], pos = 0Output: tail connects to node index 0Explanation: There is a cycle in the linked list, where tail connects to the first node. Example 3: 123Input: head = [1], pos = -1Output: no cycleExplanation: There is no cycle in the linked list. Follow-up:Can you solve it without using extra space? 1234567891011121314151617181920public class Solution &#123; public ListNode detectCycle(ListNode head) &#123; if (head == null || head.next == null) return null; ListNode slow = head; ListNode fast = head; while (fast != null &amp;&amp; fast.next != null) &#123; slow = slow.next; fast = fast.next.next; if (fast == slow) &#123; ListNode slow2 = head; while(slow != slow2) &#123; slow = slow.next; slow2 = slow2.next; &#125; return slow; &#125; &#125; return null; &#125;&#125; 83. Remove Duplicates from Sorted ListGiven a sorted linked list, delete all duplicates such that each element appear only once. Example 1: 12Input: 1-&gt;1-&gt;2Output: 1-&gt;2 Example 2: 12Input: 1-&gt;1-&gt;2-&gt;3-&gt;3Output: 1-&gt;2-&gt;3 1234567891011121314class Solution &#123; public ListNode deleteDuplicates(ListNode head) &#123; if (head == null || head.next == null) return head; ListNode cur = head; while (cur.next != null) &#123; if(cur.next.val == cur.val) &#123; cur.next = cur.next.next; &#125; else &#123; cur = cur.next;// movre forward when do not have replcaited item; &#125; &#125; return head; &#125;&#125; 82. Remove Duplicates from Sorted List IIGiven a sorted linked list, delete all nodes that have duplicate numbers, leaving only distinct numbers from the original list. Return the linked list sorted as well. Example 1: 12Input: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5Output: 1-&gt;2-&gt;5 Example 2: 12Input: 1-&gt;1-&gt;1-&gt;2-&gt;3Output: 2-&gt;3 123456789101112131415161718192021class Solution &#123; public ListNode deleteDuplicates(ListNode head) &#123; if(head == null || head.next == null) return head; ListNode dummy = new ListNode(0); //åˆ é™¤å½“å‰èŠ‚ç‚¹çš„æ–¹æ³•æ˜¯åœ¨å°†è¦åˆ é™¤çš„èŠ‚ç‚¹å‰é¢å†åŠ ä¸€ä¸ªdummyèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½æŒ‡å‘dummy.next.next,ä¹Ÿå°±æ˜¯åˆ é™¤dummy.nextã€‚ dummy.next = head;//è¿™æ ·æ‰èƒ½åˆ é™¤å¤´æŒ‡é’ˆèŠ‚ç‚¹ ListNode p = dummy; while (p.next != null &amp;&amp; p.next.next != null) &#123; if(p.next.val == p.next.next.val) &#123; //ç”¨æ¥åˆ é™¤å…¨éƒ¨çš„é‡å¤èŠ‚ç‚¹ï¼Œä¿å­˜ä¸€ä¸‹é‡å¤å€¼ int sameNum = p.next.val; while (p.next != null &amp;&amp; p.next.val == sameNum) &#123; p.next = p.next.next; &#125; &#125; else &#123; p = p.next; &#125; &#125; return dummy.next; &#125;&#125;]]></content>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BFS AND DFS]]></title>
    <url>%2F2020%2F06%2F05%2FBFS-AND-DFS%2F</url>
    <content type="text"><![CDATA[BFSå›¾çš„BFS1162. åœ°å›¾åˆ†æžå¯¹äºŽå›¾çš„BFSä¹Ÿæ˜¯ä¸€æ ·æ»´ï½ž ä¸ŽTreeçš„BFSåŒºåˆ«å¦‚ä¸‹ï¼š1ã€treeåªæœ‰1ä¸ªrootï¼Œè€Œå›¾å¯ä»¥æœ‰å¤šä¸ªæºç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æŠŠå¤šä¸ªæºç‚¹éƒ½å…¥é˜Ÿã€‚2ã€treeæ˜¯æœ‰å‘çš„å› æ­¤ä¸éœ€è¦æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼Œè€Œå¯¹äºŽæ— å‘å›¾æ¥è¯´ï¼Œå¿…é¡»å¾—æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼å¹¶ä¸”ä¸ºäº†é˜²æ­¢æŸä¸ªèŠ‚ç‚¹å¤šæ¬¡å…¥é˜Ÿï¼Œéœ€è¦åœ¨å…¥é˜Ÿä¹‹å‰å°±å°†å…¶è®¾ç½®æˆå·²è®¿é—®ï¼ ä½œè€…ï¼šsweetieeé“¾æŽ¥ï¼šhttps://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Solution &#123; public int maxDistance(int[][] grid) &#123; int[] dx = &#123;0, 0, 1, -1&#125;; int[] dy = &#123;1, -1, 0, 0&#125;; Queue&lt;int[]&gt; queue = new ArrayDeque&lt;&gt;(); int m = grid.length, n = grid[0].length; // å…ˆæŠŠæ‰€æœ‰çš„é™†åœ°éƒ½å…¥é˜Ÿã€‚ for (int i = 0; i &lt; m; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; if (grid[i][j] == 1) &#123; queue.offer(new int[] &#123;i, j&#125;); &#125; &#125; &#125; // ä»Žå„ä¸ªé™†åœ°å¼€å§‹ï¼Œä¸€åœˆä¸€åœˆçš„éåŽ†æµ·æ´‹ï¼Œæœ€åŽéåŽ†åˆ°çš„æµ·æ´‹å°±æ˜¯ç¦»é™†åœ°æœ€è¿œçš„æµ·æ´‹ã€‚ boolean hasOcean = false; int[] point = null; while (!queue.isEmpty()) &#123; point = queue.poll(); int x = point[0], y = point[1]; // å–å‡ºé˜Ÿåˆ—çš„å…ƒç´ ï¼Œå°†å…¶å››å‘¨çš„æµ·æ´‹å…¥é˜Ÿã€‚ for (int i = 0; i &lt; 4; i++) &#123; int newX = x + dx[i]; int newY = y + dy[i]; if (newX &lt; 0 || newX &gt;= m || newY &lt; 0 || newY &gt;= n || grid[newX][newY] != 0) &#123; continue; &#125; grid[newX][newY] = grid[x][y] + 1; // è¿™é‡Œæˆ‘ç›´æŽ¥ä¿®æ”¹äº†åŽŸæ•°ç»„ï¼Œå› æ­¤å°±ä¸éœ€è¦é¢å¤–çš„æ•°ç»„æ¥æ ‡å¿—æ˜¯å¦è®¿é—® hasOcean = true; queue.offer(new int[] &#123;newX, newY&#125;); &#125; &#125; // æ²¡æœ‰é™†åœ°æˆ–è€…æ²¡æœ‰æµ·æ´‹ï¼Œè¿”å›ž-1ã€‚ if (point == null || !hasOcean) &#123; return -1; &#125; // è¿”å›žæœ€åŽä¸€æ¬¡éåŽ†åˆ°çš„æµ·æ´‹çš„è·ç¦»ã€‚ return grid[point[0]][point[1]] - 1; &#125;&#125; BFSéåŽ†çŸ©é˜µ12345678910111213141516171819202122232425class Solution &#123; public int[] spiralOrder(int[][] matrix) &#123; if (matrix == null || matrix.length == 0 || matrix[0].length == 0) &#123; return new int[0]; &#125; int rows = matrix.length, columns = matrix[0].length; boolean[][] visited = new boolean[rows][columns]; int total = rows * columns; int[] order = new int[total]; int row = 0, column = 0; int[][] directions = &#123;&#123;0, 1&#125;, &#123;1, 0&#125;, &#123;0, -1&#125;, &#123;-1, 0&#125;&#125;; int directionIndex = 0; for (int i = 0; i &lt; total; i++) &#123; order[i] = matrix[row][column]; visited[row][column] = true; int nextRow = row + directions[directionIndex][0], nextColumn = column + directions[directionIndex][1]; if (nextRow &lt; 0 || nextRow &gt;= rows || nextColumn &lt; 0 || nextColumn &gt;= columns || visited[nextRow][nextColumn]) &#123; directionIndex = (directionIndex + 1) % 4; &#125; row += directions[directionIndex][0]; column += directions[directionIndex][1]; &#125; return order; &#125;&#125; å‚è€ƒç›®å½• ç”œå§¨ å°å·ç®—æ³•ç›®å½• å¤§è±¡ðŸ˜]]></content>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Binary Search.]]></title>
    <url>%2F2020%2F06%2F04%2FBinary-Search%2F</url>
    <content type="text"><![CDATA[1234567891011121314public int binarySearch(int[] array, int des) &#123; int low = 0, high = array.length - 1; while (low &lt;= high) &#123; int mid = low + (high - low) / 2;//int mid = (left + right) &gt;&gt; 1; if (des == array[mid]) &#123; return mid; &#125; else if (des &lt; array[mid]) &#123; high = mid - 1; &#125; else &#123; low = mid + 1; &#125; &#125; return -1;&#125; 1234567891011121314151617181920212223242526public class Solution &#123; public int mySqrt(int x) &#123; if (x == 0) &#123; return 0; &#125; // æ³¨æ„ï¼šé’ˆå¯¹ç‰¹æ®Šæµ‹è¯•ç”¨ä¾‹ï¼Œä¾‹å¦‚ 2147395599 // è¦æŠŠæœç´¢çš„èŒƒå›´è®¾ç½®æˆé•¿æ•´åž‹ long left = 1; long right = x / 2; while (left &lt; right) &#123; // æ³¨æ„ï¼šè¿™é‡Œä¸€å®šå–å³ä¸­ä½æ•°ï¼Œå¦‚æžœå–å·¦ä¸­ä½æ•°ï¼Œä»£ç ä¼šè¿›å…¥æ­»å¾ªçŽ¯ // long mid = left + (right - left + 1) / 2; long mid = (left + right + 1) &gt;&gt;&gt; 1; long square = mid * mid; if (square &gt; x) &#123; right = mid - 1; &#125; else &#123; left = mid; &#125; &#125; // å› ä¸ºä¸€å®šå­˜åœ¨ï¼Œå› æ­¤æ— éœ€åŽå¤„ç† return (int) left; &#125;&#125; äºŒåˆ†æŸ¥æ‰¾ Binary Search Solution in Leetcode äºŒåˆ†æŸ¥æ‰¾ç»†èŠ‚è¯¦è§£_labuladong]]></content>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Everything About TreeMap]]></title>
    <url>%2F2020%2F03%2F21%2FEverything-About-TreeMap%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°æ–‡ç« çš„å†…å®¹åŸºäºŽJDK1.7è¿›è¡Œåˆ†æžï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢žåŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äºŽ1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜Žã€‚ TreeMapå®žçŽ°äº†SotredMapæŽ¥å£ï¼Œå®ƒæ˜¯æœ‰åºçš„é›†åˆã€‚è€Œä¸”æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ç»“æž„ï¼Œæ¯ä¸ªkey-valueéƒ½ä½œä¸ºä¸€ä¸ªçº¢é»‘æ ‘çš„èŠ‚ç‚¹ã€‚å¦‚æžœåœ¨è°ƒç”¨TreeMapçš„æž„é€ å‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œåˆ™æ ¹æ®keyæ‰§è¡Œè‡ªç„¶æŽ’åºã€‚è¿™ç‚¹ä¼šåœ¨æŽ¥ä¸‹æ¥çš„ä»£ç ä¸­åšè¯´æ˜Žï¼Œå¦‚æžœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™æŒ‰ç…§æ¯”è¾ƒå™¨æ¥è¿›è¡ŒæŽ’åºã€‚ æ•°æ®ç»“æž„ç»§æ‰¿å…³ç³»123public class TreeMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable &#123;&#125; å®žçŽ°æŽ¥å£1Serializable, Cloneable, Map&lt;K,V&gt;, NavigableMap&lt;K,V&gt;, SortedMap&lt;K,V&gt; åŸºæœ¬å±žæ€§1234private final Comparator&lt;? super K&gt; comparator; //æ¯”è¾ƒå™¨ï¼Œæ˜¯è‡ªç„¶æŽ’åºï¼Œè¿˜æ˜¯å®šåˆ¶æŽ’åº ï¼Œä½¿ç”¨finalä¿®é¥°ï¼Œè¡¨æ˜Žä¸€æ—¦èµ‹å€¼ä¾¿ä¸å…è®¸æ”¹å˜private transient Entry&lt;K,V&gt; root = null; //çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹private transient int size = 0; //TreeMapä¸­å­˜æ”¾çš„é”®å€¼å¯¹çš„æ•°é‡private transient int modCount = 0; //ä¿®æ”¹çš„æ¬¡æ•° æºç è§£æžç”±äºŽTreeMapä¸­æºç è¾ƒé•¿ï¼ŒæŽ¥ä¸‹æ¥å°†åˆ†æ®µè§£æžéƒ¨åˆ†æºç ã€‚æ—¢ç„¶æ˜¯çº¢é»‘æ ‘å­˜å‚¨ï¼Œè‚¯å®šè¦æœ‰æ•°æ®ç»“æž„ï¼ˆNodeï¼‰èŠ‚ç‚¹çš„ã€‚çœ‹ä¸€ä¸‹TreeMapä¸­å…³äºŽèŠ‚ç‚¹çš„å®šä¹‰éƒ¨åˆ†ã€‚ æ•°æ®ç»“æž„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; K key; //é”® V value; //å€¼ Entry&lt;K,V&gt; left = null; //å·¦å­©å­èŠ‚ç‚¹ Entry&lt;K,V&gt; right = null; //å³å­©å­èŠ‚ç‚¹ Entry&lt;K,V&gt; parent; //çˆ¶èŠ‚ç‚¹ boolean color = BLACK; //èŠ‚ç‚¹çš„é¢œè‰²ï¼Œåœ¨çº¢é»‘æ ‘ç§ï¼Œåªæœ‰ä¸¤ç§é¢œè‰²ï¼Œçº¢è‰²å’Œé»‘è‰² //æž„é€ æ–¹æ³•ï¼Œç”¨æŒ‡å®šçš„key,value ,parentåˆå§‹åŒ–ï¼Œcoloré»˜è®¤ä¸ºé»‘è‰² Entry(K key, V value, Entry&lt;K,V&gt; parent) &#123; this.key = key; this.value = value; this.parent = parent; &#125; //è¿”å›žkey public K getKey() &#123; return key; &#125; //è¿”å›žè¯¥èŠ‚ç‚¹å¯¹åº”çš„value public V getValue() &#123; return value; &#125; //æ›¿æ¢èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶è¿”å›žæ—§å€¼ public V setValue(V value) &#123; V oldValue = this.value; this.value = value; return oldValue; &#125; //é‡å†™equals()æ–¹æ³• public boolean equals(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; //ä¸¤ä¸ªèŠ‚ç‚¹çš„keyç›¸ç­‰ï¼Œvalueç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹æ‰ç›¸ç­‰ return valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue()); &#125; //é‡å†™hashCode()æ–¹æ³• public int hashCode() &#123; int keyHash = (key==null ? 0 : key.hashCode()); int valueHash = (value==null ? 0 : value.hashCode()); //keyå’Œvale hashå€¼å¾—å¼‚æˆ–è¿ç®—ï¼Œç›¸åŒåˆ™ä¸ºé›¶ï¼Œä¸åŒåˆ™ä¸º1 return keyHash ^ valueHash; &#125; //é‡å†™toString()æ–¹æ³• public String toString() &#123; return key + "=" + value; &#125;&#125; æž„é€ æ–¹æ³•1234567891011121314151617181920212223242526//æž„é€ æ–¹æ³•ï¼Œcomparatorç”¨é”®çš„é¡ºåºåšæ¯”è¾ƒpublic TreeMap() &#123; comparator = null;&#125;//æž„é€ æ–¹æ³•ï¼Œæä¾›æ¯”è¾ƒå™¨ï¼Œç”¨æŒ‡å®šæ¯”è¾ƒå™¨æŽ’åºpublic TreeMap(Comparator&lt;? super K&gt; comparator) &#123; his.comparator = comparator;&#125;//å°†mä¸­çš„å…ƒç´ è½¬åŒ–daoTreeMapä¸­ï¼ŒæŒ‰ç…§é”®çš„é¡ºåºåšæ¯”è¾ƒæŽ’åºpublic TreeMap(Map&lt;? extends K, ? extends V&gt; m) &#123; comparator = null; putAll(m);&#125;//æž„é€ æ–¹æ³•ï¼ŒæŒ‡å®šçš„å‚æ•°ä¸ºSortedMap//é‡‡ç”¨mçš„æ¯”è¾ƒå™¨æŽ’åºpublic TreeMap(SortedMap&lt;K, ? extends V&gt; m) &#123; comparator = m.comparator(); try &#123; buildFromSorted(m.size(), m.entrySet().iterator(), null, null); &#125; catch (java.io.IOException cannotHappen) &#123; &#125; catch (ClassNotFoundException cannotHappen) &#123; &#125;&#125; TreeMapæä¾›äº†å››ä¸ªæž„é€ æ–¹æ³•ï¼Œå®žçŽ°äº†æ–¹æ³•çš„é‡è½½ã€‚æ— å‚æž„é€ æ–¹æ³•ä¸­æ¯”è¾ƒå™¨çš„å€¼ä¸ºnull,é‡‡ç”¨è‡ªç„¶æŽ’åºçš„æ–¹æ³•ï¼Œå¦‚æžœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™ç§°ä¹‹ä¸ºå®šåˆ¶æŽ’åº. è‡ªç„¶æŽ’åºï¼šTreeMapçš„æ‰€æœ‰keyå¿…é¡»å®žçŽ°ComparableæŽ¥å£ï¼Œæ‰€æœ‰çš„keyéƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ å®šåˆ¶æŽ’åºï¼šåˆ›å»ºTreeMapå¯¹è±¡ä¼ å…¥äº†ä¸€ä¸ªComparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMapä¸­æ‰€æœ‰çš„keyè¿›è¡ŒæŽ’åºï¼Œé‡‡ç”¨å®šåˆ¶æŽ’åºä¸è¦æ±‚Mapçš„keyå®žçŽ°ComparableæŽ¥å£ã€‚ç­‰ä¸‹é¢åˆ†æžåˆ°æ¯”è¾ƒæ–¹æ³•çš„æ—¶å€™åœ¨åˆ†æžè¿™ä¸¤ç§æ¯”è¾ƒæœ‰ä½•ä¸åŒã€‚ å¯¹äºŽMapæ¥è¯´ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯put()/get()/remove()ç­‰æ–¹æ³•ï¼Œä¸‹é¢ä¾æ¬¡è¿›è¡Œåˆ†æž put()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108public V put(K key, V value) &#123; Entry&lt;K,V&gt; t = root; //çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ if (t == null) &#123; //çº¢é»‘æ ‘æ˜¯å¦ä¸ºç©º compare(key, key); // type (and possibly null) check //æž„é€ æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œä¼ å…¥nullå€¼ã€‚ root = new Entry&lt;&gt;(key, value, null); size = 1; //sizeå€¼åŠ 1 modCount++; //æ”¹å˜ä¿®æ”¹çš„æ¬¡æ•° return null; //è¿”å›žnull &#125; int cmp; Entry&lt;K,V&gt; parent; //å®šä¹‰èŠ‚ç‚¹ // split comparator and comparable paths Comparator&lt;? super K&gt; cpr = comparator; //èŽ·å–æ¯”è¾ƒå™¨ if (cpr != null) &#123; //å¦‚æžœå®šä¹‰äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒ do &#123; parent = t; //å°†çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹èµ‹å€¼ç»™parent cmp = cpr.compare(key, t.key); //æ¯”è¾ƒkey, ä¸Žæ ¹èŠ‚ç‚¹çš„å¤§å° if (cmp &lt; 0) //å¦‚æžœkey &lt; t.key , æŒ‡å‘å·¦å­æ ‘ t = t.left; //t = t.left , t == å®ƒçš„åšå­©å­èŠ‚ç‚¹ else if (cmp &gt; 0) t = t.right; //å¦‚æžœkey &gt; t.key , æŒ‡å‘å®ƒçš„å³å­©å­èŠ‚ç‚¹ else return t.setValue(value); //å¦‚æžœå®ƒä»¬ç›¸ç­‰ï¼Œæ›¿æ¢keyçš„å€¼ &#125; while (t != null); //å¾ªçŽ¯éåŽ† &#125; else &#123; //è‡ªç„¶æŽ’åºæ–¹å¼ï¼Œæ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ if (key == null) throw new NullPointerException(); //æŠ›å‡ºå¼‚å¸¸ Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; //ç±»åž‹è½¬æ¢ do &#123; parent = t; cmp = k.compareTo(t.key); if (cmp &lt; 0) // key &lt; t.key t = t.left; //å·¦å­©å­ else if (cmp &gt; 0) // key &gt; t.key t = t.right; //å³å­©å­ else return t.setValue(value); //t == t.key , æ›¿æ¢valueå€¼ &#125; while (t != null); &#125; Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent); //åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå¹¶åˆ¶å®šçˆ¶èŠ‚ç‚¹ //æ ¹æ®æ¯”è¾ƒç»“æžœï¼Œå†³å®šæ–°èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æˆ–è€…å³å­©å­ if (cmp &lt; 0) parent.left = e; else parent.right = e; fixAfterInsertion(e); //æ–°æ’å…¥èŠ‚ç‚¹åŽé‡æ–°è°ƒæ•´çº¢é»‘æ ‘ size++; modCount++; return null;&#125;//æ¯”è¾ƒæ–¹æ³•ï¼Œå¦‚æžœcomparator==null ,é‡‡ç”¨comparable.compartToè¿›è¡Œæ¯”è¾ƒï¼Œå¦åˆ™é‡‡ç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ¯”è¾ƒå¤§å°final int compare(Object k1, Object k2) &#123; return comparator==null ? ((Comparable&lt;? super K&gt;)k1).compareTo((K)k2) : comparator.compare((K)k1, (K)k2);&#125;private void fixAfterInsertion(Entry&lt;K,V&gt; x) &#123; //æ’å…¥çš„èŠ‚ç‚¹é»˜è®¤çš„é¢œè‰²ä¸ºçº¢è‰² x.color = RED; // //æƒ…å½¢1ï¼š æ–°èŠ‚ç‚¹x æ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ä¸éœ€è¦ä»»ä½•æ“ä½œ //æƒ…å½¢2ï¼š æ–°èŠ‚ç‚¹x çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•æ“ä½œ while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123; //æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹xçš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯çº¢è‰²çš„ //åˆ¤æ–­xçš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä½ç½®ï¼Œæ˜¯å¦å±žäºŽå·¦å­©å­ if (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123; //èŽ·å–xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä¸Šé¢è¯­å¥å·²ç»åˆ¤æ–­å‡ºxèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºå·¦å­©å­ï¼Œæ‰€ä»¥ç›´æŽ¥å–å³å­©å­ Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x))); //åˆ¤æ–­æ˜¯å¦xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚ if (colorOf(y) == RED) &#123; setColor(parentOf(x), BLACK); // xèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰² setColor(y, BLACK); // yèŠ‚ç‚¹çš„é¢œè‰²è®¾ç½®ä¸ºé»‘è‰² setColor(parentOf(parentOf(x)), RED); // x.parent.parentè®¾ç½®ä¸ºçº¢è‰² x = parentOf(parentOf(x)); // x == x.parent.parent ,è¿›è¡ŒéåŽ†ã€‚ &#125; else &#123; //xçš„çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–è€…ç¼ºå°‘çš„ if (x == rightOf(parentOf(x))) &#123; //åˆ¤æ–­xèŠ‚ç‚¹æ˜¯å¦ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­ x = parentOf(x); //x == çˆ¶èŠ‚ç‚¹ rotateLeft(x); //å·¦æ—‹è½¬æ“ä½œ &#125; //xèŠ‚ç‚¹æ˜¯å…¶çˆ¶çš„å·¦å­©å­ setColor(parentOf(x), BLACK); setColor(parentOf(parentOf(x)), RED); //ä¸Šé¢ä¸¤å¥å°†x.parent å’Œx.parent.parentçš„é¢œè‰²åšè°ƒæ¢ rotateRight(parentOf(parentOf(x))); //è¿›è¡Œå³æ—‹è½¬ &#125; &#125; else &#123; Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x))); //y æ˜¯x èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ if (colorOf(y) == RED) &#123; //åˆ¤æ–­é¢œè‰² setColor(parentOf(x), BLACK); //çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰² setColor(y, BLACK); //çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰² setColor(parentOf(parentOf(x)), RED); //ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰² x = parentOf(parentOf(x)); //å°†ç¥–çˆ¶èŠ‚ç‚¹ä½œä¸ºæ–°æ’å…¥çš„èŠ‚ç‚¹ï¼ŒéåŽ†è°ƒæ•´ &#125; else &#123; if (x == leftOf(parentOf(x))) &#123; //x æ˜¯å…¶çˆ¶äº²çš„å·¦å­©å­ x = parentOf(x); rotateRight(x); //ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå³æ—‹æ“ä½œ &#125; setColor(parentOf(x), BLACK); //çˆ¶èŠ‚ç‚¹ä¸ºè®¾ç½®ä¸ºé»‘è‰² setColor(parentOf(parentOf(x)), RED); //ç¥–çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰² rotateLeft(parentOf(parentOf(x))); //ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œè¿›è¡Œå·¦æ—‹æ“ä½œ &#125; &#125; &#125; root.color = BLACK; //é€šè¿‡èŠ‚ç‚¹ä½ç½®çš„è°ƒæ•´ï¼Œæœ€ç»ˆå°†çº¢è‰²çš„èŠ‚ç‚¹æ¡è°ƒæ¢åˆ°äº†æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ ¹èŠ‚ç‚¹é‡æ–°è®¾ç½®ä¸ºé»‘è‰²&#125; çº¢é»‘æ ‘æ˜¯ä¸€ä¸ªæ›´é«˜æ•ˆçš„æ£€ç´¢äºŒå‰æ ‘ï¼Œæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²æˆ–è€…é»‘è‰² æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯é»‘è‰²çš„ æ‰€æœ‰çš„å¶å­çš„å­èŠ‚ç‚¹éƒ½æ˜¯ç©ºèŠ‚ç‚¹ï¼Œå¹¶ä¸”éƒ½æ˜¯é»‘è‰²çš„ æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼ˆä¸ä¼šæœ‰ä¸¤ä¸ªè¿žç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰ ä»Žä»»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶å­æ ‘ä¸­æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆå¶å­èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„é»‘è‰²èŠ‚ç‚¹æ•°é‡æ¯æ¡è·¯å¾„éƒ½ç›¸åŒï¼‰ ä¸Šé¢çš„ä»£ç ï¼Œè¯¦ç»†çš„æ ‡æ³¨äº†æ¯æ¡è¯­å¥çš„ä½œç”¨ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡ï¼Œå¦‚æžœä½ æ²¡æœ‰ä¸€å®šçš„åŠŸåŠ›ï¼Œå³ä½¿æ³¨é‡Šå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œä½ ä¹Ÿä¼šæ˜¯ä¸€è„¸æ‡µé€¼ ï¼ŒäºŒè„¸æ‡µé€¼ï¼Œå…¨è„‘æ‡µé€¼ä¸­ï¼Œä¸‹é¢é…åˆå›¾ç‰‡æ¥æ¢³ç†ä¸€ä¸‹ä»£ç æ‰€è¡¨ç¤ºçš„å«ä¹‰ï¼šå½“ä¸€ä¸ªé»˜è®¤ä¸ºçº¢è‰²çš„èŠ‚ç‚¹æ’å…¥æ ‘ä¸­ï¼Œå…¶å®žå¯¹åº”çš„æ˜¯7ä¸­å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼Œåˆ†åˆ«è¿›è¡Œå™è¿°ï¼š æƒ…å½¢1ï¼šæ–°æ’å…¥çš„èŠ‚ç‚¹æ—¶çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ— éœ€ä»»ä½•çš„æ“ä½œï¼Œç›´æŽ¥å°†é¢œè‰²è®¾ç½®ä¸ºé»‘è‰²å°±å¯ä»¥äº† æƒ…å½¢2ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²çš„ï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ã€‚ä¹Ÿæ— éœ€ä»»ä½•çš„æ“ä½œã€‚å› ä¸ºæ–°èŠ‚ç‚¹çš„æ’å…¥å¹¶æ²¡æœ‰å½±å“åˆ°çº¢é»‘ä¹¦çš„ç‰¹ç‚¹ æƒ…å½¢3ï¼šæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰é¢œè‰²æ˜¯çº¢è‰²çš„ï¼Œè€Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¹Ÿæ˜¯çº¢è‰²çš„ã€‚é‚£ä¹ˆæƒ…å†µå°±å‡ºçŽ°äº†ï¼Œæ­¤æ—¶æ’å…¥çš„èŠ‚ç‚¹å°±è¿åäº†çº¢é»‘æ ‘çš„ç‰¹ç‚¹4 ï¼Œéœ€è¦å¯¹çº¢é»‘æ ‘è¿›è¡Œè°ƒæ•´ã€‚ æ“ä½œçœ‹ä¸‹å›¾ï¼šè°ƒæ•´æ“ä½œå¦‚ä¸Šå›¾ï¼Œå°†çˆ¶èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œéƒ½ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œç„¶åŽå°†ç¥–çˆ¶èŠ‚ç‚¹ä¿®æ”¹ä¸ºçº¢è‰²ï¼Œå› ä¸ºä¿®æ”¹äº†ç¥–çˆ¶èŠ‚ç‚¹çš„é¢œè‰²ï¼Œç¥–çˆ¶èŠ‚ç‚¹å¯èƒ½ä¼šå‘ç”Ÿé¢œè‰²çš„å†²çªï¼Œæ‰€ä»¥å°†æ–°æ’å…¥çš„èŠ‚ç‚¹ä¿®æ”¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œè°ƒæ•´ã€‚ æƒ…å½¢4ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…ä¸ºnullï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼šæ­¤æ—¶ä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ—‹è½¬ç‚¹ï¼Œå°±æ–°æ’å…¥çš„èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œã€‚ä¾¿å˜æˆäº†æƒ…å½¢5å¯¹åº”çš„æƒ…å†µï¼Œå°†æ‰§è¡Œæƒ…å½¢5çš„æ“ä½œ æƒ…å½¢5ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆå·¦å­©å­èŠ‚ç‚¹ï¼‰çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹é¢œè‰²ä¸ºé»‘è‰²æˆ–è€…null,æ–°æ’å…¥èŠ‚ç‚¹ä¸ºçˆ¶äº²çš„å·¦å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š æƒ…å½¢6 å’Œæƒ…å½¢7çš„æ“ä½œä¸Žæƒ…å½¢4å’Œæƒ…å½¢5çš„æ“ä½œç›¸åŒï¼Œå®ƒä»¬ä¹‹å‰çš„åŒºåˆ«æ˜¯çˆ¶èŠ‚ç‚¹ä¸ºæœ‰å­©å­èŠ‚ç‚¹ï¼Œå†æ¬¡ä¸å†èµ˜è¿°ã€‚ remove()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149public V remove(Object key) &#123; Entry&lt;K,V&gt; p = getEntry(key); //æ ¹æ®keyæŸ¥æ‰¾èŠ‚ç‚¹ï¼Œå¹¶è¿”å›žè¯¥èŠ‚ç‚¹ if (p == null) return null; V oldValue = p.value; //èŽ·å–keyå¯¹åº”çš„å€¼ deleteEntry(p); //åˆ é™¤èŠ‚ç‚¹ return oldValue; //è¿”å›žkeyå¯¹åº”çš„å€¼&#125;final Entry&lt;K,V&gt; getEntry(Object key) &#123; //æ ¹æ®é”®å¯»æ‰¾èŠ‚ç‚¹ï¼Œæœ‰éžä¸ºä¸¤ç§æ–¹å¼ï¼Œå¦‚æžœå®šåˆ¶äº†æ¯”è¾ƒå™¨ï¼Œé‡‡ç”¨å®šåˆ¶æŽ’åºæ–¹å¼ï¼Œå¦åˆ™ä½¿ç”¨è‡ªç„¶æŽ’åº if (comparator != null) return getEntryUsingComparator(key); //å¾ªçŽ¯éåŽ†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹ if (key == null) throw new NullPointerException(); Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; Entry&lt;K,V&gt; p = root; while (p != null) &#123; //å¾ªçŽ¯éåŽ†æ ‘ï¼Œå¯»æ‰¾å’Œkeyç›¸ç­‰çš„èŠ‚ç‚¹ int cmp = k.compareTo(p.key); if (cmp &lt; 0) p = p.left; else if (cmp &gt; 0) p = p.right; else return p; &#125; return null;&#125;//åˆ é™¤èŠ‚ç‚¹private void deleteEntry(Entry&lt;K,V&gt; p) &#123; modCount++; //è®°å½•ä¿®æ”¹çš„æ¬¡æ•° size--; //æ•°é‡å‡1 //å½“å‰èŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½ä¸ä¸ºç©º if (p.left != null &amp;&amp; p.right != null) &#123; //å¯»æ‰¾ç»§æ‰¿è€…ï¼Œç»§æ‰¿è€…ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­©å­èŠ‚ç‚¹æˆ–è€…å³å­©å­èŠ‚ç‚¹çš„æœ€å°å·¦å­©å­ Entry&lt;K,V&gt; s = successor(p); p.key = s.key; //key - value çš„æ›¿æ¢ ï¼Œå¹¶æ²¡æœ‰æ›¿æ¢é¢œè‰² p.value = s.value; p = s; //æŒ‡å‘ç»§æ‰¿è€… &#125; // p has 2 children // Start fixup at replacement node, if it exists. //å¼€å§‹ä¿®å¤æ ‘ç»“æž„ï¼Œç»§æ‰¿è€…çš„å·¦å­©å­ä¸ä¸ºç©ºï¼Œè¿”å›žå·¦å­©å­ï¼Œå¦åˆ™è¿”å›žå³å­©å­ //ä¸å¯èƒ½å­˜åœ¨å·¦å³ä¸¤ä¸ªå­©å­éƒ½å­˜åœ¨çš„æƒ…å†µï¼Œsuccessorå¯»æ‰¾çš„å°±æ˜¯æœ€å°èŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­©å­èŠ‚ç‚¹ä¸ºnull Entry&lt;K,V&gt; replacement = (p.left != null ? p.left : p.right); if (replacement != null) &#123; // Link replacement to parent //å·²ç»è¢«é€‰ä¸ºç»§æ‰¿è€…ï¼Œå½“å‰æ‹¥æœ‰çš„ä¸€åˆ‡æ”¾å¼ƒï¼Œæ‰€ä»¥å°†å­©å­äº¤ç»™çˆ·çˆ·æŠšå…» replacement.parent = p.parent; //pèŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œåˆ™æŒ‡å‘æ ¹èŠ‚ç‚¹ if (p.parent == null) root = replacement; //å¦‚æžœpä¸ºå·¦å­©å­ï¼Œå¦‚æžœpä¸ºå·¦å­©å­ï¼Œåˆ™å°†p.parent.left = p.left else if (p == p.parent.left) p.parent.left = replacement; else p.parent.right = replacement; //åˆ é™¤pèŠ‚ç‚¹åˆ°å·¦å³åˆ†æ”¯ï¼Œå’Œçˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ p.left = p.right = p.parent = null; // Fix replacement if (p.color == BLACK) //æ¢å¤é¢œè‰²åˆ†é… fixAfterDeletion(replacement); &#125; else if (p.parent == null) &#123; // return if we are the only node. //çº¢é»‘ä¹¦ä¸­çˆ¶èŠ‚ç‚¹ä¸ºç©ºçš„åªèƒ½æ˜¯æ ¹èŠ‚ç‚¹ã€‚ root = null; &#125; else &#123; // No children. Use self as phantom replacement and unlink. if (p.color == BLACK) fixAfterDeletion(p); if (p.parent != null) &#123; if (p == p.parent.left) p.parent.left = null; else if (p == p.parent.right) p.parent.right = null; p.parent = null; &#125; &#125;&#125;private void fixAfterDeletion(Entry&lt;K,V&gt; x) &#123; //ä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œé¢œè‰²ä¸ºé»‘è‰²ï¼Œè°ƒæ•´ç»“æž„ while (x != root &amp;&amp; colorOf(x) == BLACK) &#123; //åˆ¤æ–­xæ˜¯å¦ä¸ºå·¦å­©å­ if (x == leftOf(parentOf(x))) &#123; //xçš„å…„å¼ŸèŠ‚ç‚¹ Entry&lt;K,V&gt; sib = rightOf(parentOf(x)); //è‹¥å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰² if (colorOf(sib) == RED) &#123; setColor(sib, BLACK); //è®¾ç½®å…„å¼ŸèŠ‚ç‚¹å˜ä¸ºé»‘è‰² setColor(parentOf(x), RED); //çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰² rotateLeft(parentOf(x)); //å·¦æ—‹çˆ¶èŠ‚ç‚¹ sib = rightOf(parentOf(x)); //é‡æ–°è®¾ç½®xçš„å…„å¼ŸèŠ‚ç‚¹ &#125; if (colorOf(leftOf(sib)) == BLACK &amp;&amp; colorOf(rightOf(sib)) == BLACK) &#123; setColor(sib, RED); //å…„å¼ŸèŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½æ˜¯é»‘è‰²çš„é‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹çš„é¢œè‰²ï¼Œä¿®æ”¹ä¸ºçº¢è‰² x = parentOf(x); //å°†xå®šä½åˆ°çˆ¶èŠ‚ç‚¹ &#125; else &#123; if (colorOf(rightOf(sib)) == BLACK) &#123; //å…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­æ˜¯é»‘è‰²çš„ï¼Œå·¦å­©å­æ˜¯çº¢è‰²çš„ setColor(leftOf(sib), BLACK); //è®¾ç½®å·¦å­©å­èŠ‚ç‚¹ä¸ºé»‘è‰² setColor(sib, RED); //å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰² rotateRight(sib); //å³æ—‹ sib = rightOf(parentOf(x)); //å³æ—‹åŽé‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹ &#125; setColor(sib, colorOf(parentOf(x))); //å…„å¼ŸèŠ‚ç‚¹é¢œè‰²è®¾ç½®å’Œçˆ¶èŠ‚ç‚¹çš„é¢œè‰²ç›¸åŒ setColor(parentOf(x), BLACK); //çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰² setColor(rightOf(sib), BLACK); //å°†å…„å¼ŸèŠ‚ç‚¹çš„æœ‰å­©å­è®¾ç½®ä¸ºé»‘è‰² rotateLeft(parentOf(x)); //å·¦æ—‹ x = root; //è®¾ç½®xä¸ºæ ¹èŠ‚ç‚¹ &#125; &#125; else &#123; // symmetric //xä¸ºçˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹ï¼Œå‚è€ƒä¸Šé¢çš„æ“ä½œ Entry&lt;K,V&gt; sib = leftOf(parentOf(x)); if (colorOf(sib) == RED) &#123; setColor(sib, BLACK); setColor(parentOf(x), RED); rotateRight(parentOf(x)); sib = leftOf(parentOf(x)); &#125; if (colorOf(rightOf(sib)) == BLACK &amp;&amp;colorOf(leftOf(sib)) == BLACK) &#123; setColor(sib, RED); x = parentOf(x); &#125; else &#123; if (colorOf(leftOf(sib)) == BLACK) &#123; setColor(rightOf(sib), BLACK); setColor(sib, RED); rotateLeft(sib); sib = leftOf(parentOf(x)); &#125; setColor(sib, colorOf(parentOf(x))); setColor(parentOf(x), BLACK); setColor(leftOf(sib), BLACK); rotateRight(parentOf(x)); x = root; &#125; &#125; &#125; setColor(x, BLACK);&#125; åˆ é™¤çº¢é»‘æ ‘çš„æ“ä½œæ¯”æ’å…¥æ“ä½œè¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š ä»¥æŽ’åºäºŒå‰æ ‘çš„æ–¹æ³•åˆ é™¤æŒ‡å®šèŠ‚ç‚¹ã€‚åˆ é™¤çš„èŠ‚ç‚¹å­˜åœ¨ä¸‰ç§æƒ…å†µï¼š è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæ²¡æœ‰å·¦å³å­©å­èŠ‚ç‚¹ï¼Œç›´æŽ¥åˆ é™¤å³å¯ è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæœ‰ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè®©å®ƒçš„å­©å­èŠ‚ç‚¹æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹å³å¯ æœ¬åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæœ‰ä¸¤ä¸ªéžç©ºçš„å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±æˆ–è€…åŽç»§èŠ‚ç‚¹ï¼Œæ›´æ¢å…ƒç´ å€¼ï¼Œåœ¨å°†å‰é©±æˆ–è€…åŽç»§èŠ‚ç‚¹åˆ é™¤ï¼ˆä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æˆ–è€…åŽç»§éƒ½å¿…å®šè‡³å¤šæœ‰ä¸€ä¸ªéžç©ºçš„å­èŠ‚ç‚¹ï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„ä¸¤ç§æƒ…å½¢è¿›è¡Œæ“ä½œï¼‰ è¿›è¡Œé¢œè‰²çš„è°ƒæ¢å’Œæ ‘çš„æ—‹è½¬ï¼Œæ»¡è¶³çº¢é»‘æ ‘çš„ç‰¹å¾ ä¸‹é¢æ¥åˆ†æƒ…å½¢è®¨è®ºä¸€ä¸‹å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼š æƒ…å½¢1ï¼šè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹æˆ–è€…é¢œè‰²ä¸ºç©ºè‰²ï¼Œæ­¤æ—¶åˆ é™¤è¯¥èŠ‚ç‚¹ä¸å½±å“çº¢é»‘æ ‘çš„ç‰¹ç‚¹ã€‚æ— éœ€æ“ä½œ æƒ…å½¢2ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¦‚ä¸‹å›¾ï¼šè‹¥åˆ é™¤ä¸Šå›¾ä¸­çš„xèŠ‚ç‚¹ï¼Œå°†ç¼ºå°‘ä¸€ä¸ªé»‘èŠ‚ç‚¹ï¼Œä¸Žçº¢é»‘æ ‘çš„æ€§è´¨å†²çªï¼Œæ‰€ä»¥ä¿®æ”¹sibé¢œè‰²ä¸ºé»‘è‰²ï¼Œè®¾ç½®pèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå¹¶è¿›è¡Œå·¦æ—‹æ“ä½œã€‚åœ¨è¿›è¡ŒåŽç»­çš„å¤„ç†ã€‚ æƒ…å½¢3ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼ŒxèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œå¦‚ä¸‹å›¾ï¼šxèŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œå…„å¼ŸèŠ‚ç‚¹ï¼ˆé»‘è‰²çš„ï¼‰çš„å­èŠ‚ç‚¹ä¹Ÿæ˜¯é»‘è‰²çš„ï¼ŒpèŠ‚ç‚¹çš„é¢œè‰²æ— æ³•ç¡®å®šï¼Œæœ‰å¯èƒ½æ˜¯çº¢è‰²çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é»‘è‰²çš„ã€‚å¦‚æžœæ˜¯çº¢è‰²çš„ç›´æŽ¥è®¾ç½®ä¸ºé»‘è‰²å³å¯ï¼Œå¦‚æžœä¸ºé»‘è‰²çš„ï¼Œåˆ™éœ€è¦å°†xå®šä½çš„pèŠ‚ç‚¹ï¼Œåœ¨è¿›è¡Œå¤„ç†ã€‚ æƒ…å½¢4ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹çš„å³è‡ªå­èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚å¦‚ä¸‹å›¾ï¼šæƒ…å½¢4çš„è°ƒæ•´ä¸ºäº†è½¬å˜æˆæƒ…å½¢5çš„æƒ…å†µï¼Œæ¥è¿›è¡Œå¤„ç†ã€‚ æƒ…å½¢5ï¼šè¢«åˆ é™¤èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹å³å­èŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚å¦‚ä¸‹å›¾ï¼šsibçš„å·¦å­èŠ‚ç‚¹çš„é¢œè‰²ä¸ç¡®å®šï¼Œå¯èƒ½æ˜¯çº¢è‰²ä¹Ÿå¯èƒ½æ˜¯é»‘è‰²ï¼Œä½†æ˜¯å¯¹å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå› ä¸ºå˜æ¢å‰åŽå®ƒçš„ä¸Šå±‚åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹æ•°å¹¶æ²¡æœ‰æ”¹å˜ã€‚ ä¸Šé¢çš„æƒ…å½¢åªæ˜¯é’ˆå¯¹åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å·¦å­©å­çš„æƒ…å†µï¼Œè¿›è¡Œçš„åˆ†æžï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¹Ÿå¯èƒ½æ˜¯å³åˆ†æ”¯ã€‚æƒ…å†µå®Œå…¨ç›¸åŒåªä¸è¿‡å·¦å³é¡ºåºå‘ç”Ÿäº†é¢ å€’ï¼Œä¸å†è¿›è¡Œå¤è¿°ã€‚ è‡³æ­¤TreeMapä¸­å®žçŽ°çš„æœ€é‡è¦å·²ç»è¯´å®Œäº†ã€‚ ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹ä¸€äº›æ–¹æ³•çš„ä½œç”¨ firstEntry() è¿”å›žMapä¸­æœ€å°çš„key higherEntry(Object key ) è¿”å›žè¯¥Mapä¸­ä½äºŽkeyåŽä¸€ä½çš„key-value lowerEntry(Object key ) è¿”å›žè¯¥Mapä¸­å”¯ä¸€keyå‰ä¸€ä½çš„key-value tailMap(Object key , boolean inclusive) è¿”å›žè¯¥Mapçš„å­Map æ€»ç»“ å…³äºŽçº¢é»‘æ ‘çš„èŠ‚ç‚¹æ’å…¥æ“ä½œï¼Œé¦–å…ˆæ˜¯æ”¹å˜æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œç¥–çˆ¶èŠ‚ç‚¹ï¼Œå’Œæ–°èŠ‚ç‚¹çš„é¢œè‰²ï¼Œèƒ½åœ¨å½“å‰åˆ†æ”¯é€šè¿‡èŠ‚ç‚¹çš„æ—‹è½¬æ”¹å˜çš„ï¼Œåˆ™é€šè¿‡æ­¤ç§æ“ä½œï¼Œæ¥æ»¡è¶³çº¢é»‘ä¹¦çš„ç‰¹ç‚¹ã€‚ å¦‚æžœå½“å‰ç›¸å…³èŠ‚ç‚¹çš„æ—‹è½¬è§£å†³ä¸äº†çº¢é»‘æ ‘çš„å†²çªï¼Œåˆ™é€šè¿‡å°†çº¢è‰²çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°æ ¹èŠ‚ç‚¹è§£å†³ï¼Œæœ€åŽåœ¨å°†æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²]]></content>
      <tags>
        <tag>Analyst of SourceCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Everything About ConcurrentHashMap]]></title>
    <url>%2F2020%2F03%2F21%2FEverything-About-ConcurrentHashMap%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°ConcurrentHashMapå¸¸ç”¨äºŽå¹¶å‘ç¼–ç¨‹ï¼Œè¿™é‡Œå°±ä»Žæºç ä¸Šæ¥åˆ†æžä¸€ä¸‹ConcurrentHashMapæ•°æ®ç»“æž„å’Œåº•å±‚åŽŸç†ã€‚ åœ¨å¼€å§‹ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸ªç®—æ³•ï¼Œ è¿™ä¸ªç®—æ³•å’ŒConcurrentçš„å®žçŽ°æ˜¯åˆ†ä¸å¼€çš„ã€‚CASç®—æ³•ï¼š CASæ˜¯è‹±æ–‡å•è¯Compare And Swapçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚ CASæœºåˆ¶å½“ä¸­ä½¿ç”¨äº†3ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚ æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œåªæœ‰å½“å˜é‡çš„é¢„æœŸå€¼Aå’Œå†…å­˜åœ°å€Vå½“ä¸­çš„å®žé™…å€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šå°†å†…å­˜åœ°å€Vå¯¹åº”çš„å€¼ä¿®æ”¹ä¸ºB ä»Žæ€æƒ³ä¸Šæ¥è¯´ï¼ŒSynchronizedå±žäºŽæ‚²è§‚é”ï¼Œæ‚²è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸¥é‡ï¼Œæ‰€ä»¥ä¸¥é˜²æ­»å®ˆã€‚CASå±žäºŽä¹è§‚é”ï¼Œä¹è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸é‚£ä¹ˆä¸¥é‡ï¼Œæ‰€ä»¥è®©çº¿ç¨‹ä¸æ–­åŽ»å°è¯•æ›´æ–°ã€‚ ConcurrentHashMapæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapé›†åˆï¼Œå¯ä»¥åº”å¯¹é«˜å¹¶å‘çš„åœºæ™¯ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ç›¸æ¯”è¾ƒHashTableï¼Œå®ƒçš„é”ç²’åº¦æ›´åŠ çš„ç»†åŒ–ï¼Œå› ä¸ºHashTableçš„æ–¹æ³•éƒ½æ˜¯ç”¨Synchronizedä¿®é¥°çš„ï¼Œæ•ˆçŽ‡ç°å¸¸çš„åº•ä¸‹ã€‚ 1.8ä¹‹å‰ConcurrentHashMapä½¿ç”¨é”åˆ†æ®µæŠ€æœ¯ï¼Œå°†æ•°æ®åˆ†æˆä¸€æ®µæ®µçš„å­˜å‚¨ï¼Œæ¯ä¸€ä¸ªæ•°æ®æ®µé…ç½®ä¸€æŠŠé”ï¼Œç›¸äº’ä¹‹é—´ä¸å½±å“ï¼Œè€Œ1.8ä¹‹åŽæ‘’å¼ƒäº†Segmentï¼ˆé”æ®µï¼‰çš„æ¦‚å¿µï¼Œå¯ç”¨äº†å…¨æ–°çš„å®žçŽ°ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨CAS+Synchronizedæ¥ä¿è¯å¹¶å‘æ›´æ–°çš„å®‰å…¨ï¼Œåº•å±‚é‡‡ç”¨çš„ä¾ç„¶æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚ æœ¬ç¯‡æ–‡ç« æ˜¯åŸºäºŽJDK1.8 ã€‚ æ•°æ®ç»“æž„ç»§æ‰¿å…³ç³»123public class ConcurrentHashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements ConcurrentMap&lt;K,V&gt;, Serializable ConcurrentHashMap ç»§æ‰¿äº†AbstractMap ,å¹¶ä¸”å®žçŽ°äº†ConcurrentMapæŽ¥å£ã€‚ ä¸ŽHashMapæ¯”å¯¹ï¼š ç›¸åŒç‚¹ï¼šéƒ½é›†æˆäº†AbstractMapæŽ¥å£ ä¸åŒç‚¹ï¼šHashMapå®žçŽ°äº†MapæŽ¥å£ï¼ŒConcurrentHashMapå®žçŽ°äº†ConcurrentMapæŽ¥å£ï¼Œè€ŒConcurrentMapç»§æ‰¿äº†MapæŽ¥å£ï¼Œä½¿ç”¨defaultå…³é”®å­—å®šä¹‰äº†ä¸€äº›æ–¹æ³• ã€‚ ä»Žç»§æ‰¿å…³ç³»ä¸Šçœ‹ConcurrentHashMapä¸ŽHashMapå¹¶æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚ åŸºæœ¬å±žæ€§12345678910111213141516private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; //æœ€å¤§å®¹é‡2çš„30æ¬¡æ–¹private static final int DEFAULT_CAPACITY = 16; //é»˜è®¤å®¹é‡ 1&lt;&lt;4private static final float LOAD_FACTOR = 0.75f; //è´Ÿè½½å› å­static final int TREEIFY_THRESHOLD = 8; //é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘static final int UNTREEIFY_THRESHOLD = 6; //æ ‘è½¬åˆ—è¡¨static final int MIN_TREEIFY_CAPACITY = 64; //private static final int MIN_TRANSFER_STRIDE = 16;private static int RESIZE_STAMP_BITS = 16;private static final int MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;private static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS;static final int MOVED = -1; // forwarding nodes çš„hashå€¼static final int TREEBIN = -2; // roots of trees çš„hashå€¼static final int RESERVED = -3; // transient reservations çš„hashå€¼static final int HASH_BITS = 0x7fffffff; // usable bits of normal node hashstatic final int NCPU = Runtime.getRuntime().availableProcessors(); //å¯ç”¨å¤„ç†å™¨æ•°é‡ é‡ç‚¹è¯´ä¸€ä¸‹ sizeCtrl å±žæ€§ï¼Œè¿™ä¸ªå±žæ€§åœ¨ ConcurrentHashMap ä¸­æ‰®æ¼”è€…é‡è¦çš„è§’è‰²ã€‚ 12345678//è¡¨åˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„ä¸€ä¸ªæŽ§åˆ¶æ ‡è¯†ä½//è´Ÿæ•°ä»£è¡¨æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æˆ–è€…æ‰©å®¹çš„æ“ä½œ// -1 ä»£è¡¨åˆå§‹åŒ–// -N ä»£è¡¨æœ‰n-1ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ//æ­£æ•°æˆ–è€…0è¡¨ç¤ºæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè¿™ä¸ªæ•°å€¼è¡¨ç¤ºåˆå§‹åŒ–æˆ–è€…ä¸‹ä¸€æ¬¡è¦æ‰©å®¹çš„å¤§å°ã€‚//transient ä¿®é¥°çš„å±žæ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œvolatileä¿è¯å¯è§æ€§private transient volatile int sizeCtl; æž„é€ æ–¹æ³•123456789101112//æ— å‚æž„é€ æ–¹æ³•ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œpublic ConcurrentHashMap() &#123;&#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°æž„é€ æ–¹æ³•ï¼Œåˆ¤æ–­å‚æ•°çš„åˆæ³•æ€§ï¼Œå¹¶åˆ›å»ºäº†è®¡ç®—åˆå§‹åŒ–çš„å¤§å°public ConcurrentHashMap(int initialCapacity) &#123;&#125;//å°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºConcurrentHashMappublic ConcurrentHashMap(Map&lt;? extends K, ? extends V&gt; m) &#123;&#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­çš„æž„é€ æ–¹æ³•public ConcurrentHashMap(int initialCapacity, float loadFactor) &#123; this(initialCapacity, loadFactor, 1); &#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œè´Ÿè½½å› å­å’ŒconcurrentLevelå¹¶å‘æ›´æ–°çº¿ç¨‹çš„æ•°é‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsegmentçš„ä¸ªæ•°public ConcurrentHashMap(int initialCapacity,float loadFactor, int concurrencyLevel) &#123;&#125; ConcurrentHashMapçš„æž„é€ æ–¹æ³•å¹¶æ²¡åšå¤ªå¤šçš„å·¥ä½œï¼Œä¸»è¦æ˜¯è¿›è¡Œäº†å‚æ•°çš„åˆæ³•æ€§æ ¡éªŒï¼Œå’Œåˆå§‹å€¼å¤§å°çš„è½¬æ¢ã€‚è¿™ä¸ªæ–¹æ³• tableSizeFor()è¯´æ˜Žä¸€ä¸‹ï¼Œ ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å°†æŒ‡å®šçš„åˆå§‹åŒ–å‚æ•°è½¬æ¢ä¸º2çš„å¹‚æ¬¡æ–¹å½¢å¼ï¼Œ å¦‚æžœåˆå§‹åŒ–å‚æ•°ä¸º9 ï¼Œè½¬æ¢åŽåˆå§‹å¤§å°ä¸º16 ã€‚ å†…éƒ¨æ•°æ®ç»“æž„Nodeé¦–å½“å…¶å†²ï¼Œå› ä¸ºå®ƒæ˜¯ConcurrentHashMapçš„æ ¸å¿ƒï¼Œå®ƒåŒ…è£…äº†key-valueçš„é”®å€¼å¯¹ï¼Œæ‰€æœ‰æ’å…¥çš„æ•°æ®éƒ½åŒ…è£…åœ¨è¿™é‡Œé¢ï¼Œä¸ŽHashMapå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€äº›å·®åˆ«ï¼š 12345678910111213static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; volatile V val; volatile Node&lt;K,V&gt; next; Node(int hash, K key, V val, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.val = val; this.next = next; &#125;&#125; value å’Œ nextä½¿ç”¨äº†volatileä¿®é¥°ï¼Œä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ã€‚ä¹Ÿä¸å…è®¸è°ƒç”¨setValue()æ–¹æ³•ç›´æŽ¥æ”¹å˜Nodeçš„å€¼ã€‚å¹¶å¢žåŠ äº†find()æ–¹æ³•è¾…åŠ©map.get()æ–¹æ³•ã€‚ TreeNodeæ ‘èŠ‚ç‚¹ç±»ï¼Œå¦å¤–ä¸€ä¸ªæ ¸å¿ƒçš„æ•°æ®ç»“æž„ã€‚å½“é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æ—¶å€™ï¼Œä¼šè½¬æ¢ä¸ºTreeNodeã€‚ä½†æ˜¯ä¸ŽHashMapä¸ç›¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯ç›´æŽ¥è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè€Œæ˜¯æŠŠè¿™äº›ç»“ç‚¹åŒ…è£…æˆTreeNodeæ”¾åœ¨TreeBinå¯¹è±¡ä¸­ï¼Œç”±TreeBinå®Œæˆå¯¹çº¢é»‘æ ‘çš„åŒ…è£…ã€‚è€Œä¸”TreeNodeåœ¨ConcurrentHashMapé›†æˆè‡ªNodeç±»ï¼Œè€Œå¹¶éžHashMapä¸­çš„é›†æˆè‡ªLinkedHashMap.Entryç±»ï¼Œä¹Ÿå°±æ˜¯è¯´TreeNodeå¸¦æœ‰nextæŒ‡é’ˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿åŸºäºŽTreeBinçš„è®¿é—®ã€‚ TreeBinè¿™ä¸ªç±»å¹¶ä¸è´Ÿè´£åŒ…è£…ç”¨æˆ·çš„keyã€valueä¿¡æ¯ï¼Œè€Œæ˜¯åŒ…è£…çš„å¾ˆå¤šTreeNodeèŠ‚ç‚¹ã€‚å®ƒä»£æ›¿äº†TreeNodeçš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®žé™…çš„ConcurrentHashMapâ€œæ•°ç»„â€ä¸­ï¼Œå­˜æ”¾çš„æ˜¯TreeBinå¯¹è±¡ï¼Œè€Œä¸æ˜¯TreeNodeå¯¹è±¡ï¼Œè¿™æ˜¯ä¸ŽHashMapçš„åŒºåˆ«ã€‚å¦å¤–è¿™ä¸ªç±»è¿˜å¸¦æœ‰äº†è¯»å†™é”ã€‚ ForwardingNodeä¸€ä¸ªç”¨äºŽè¿žæŽ¥ä¸¤ä¸ªtableçš„èŠ‚ç‚¹ç±»ã€‚å®ƒåŒ…å«ä¸€ä¸ªnextTableæŒ‡é’ˆï¼Œç”¨äºŽæŒ‡å‘ä¸‹ä¸€å¼ è¡¨ã€‚è€Œä¸”è¿™ä¸ªèŠ‚ç‚¹çš„key value nextæŒ‡é’ˆå…¨éƒ¨ä¸ºnullï¼Œå®ƒçš„hashå€¼ä¸º-1. è¿™é‡Œé¢å®šä¹‰çš„findçš„æ–¹æ³•æ˜¯ä»ŽnextTableé‡Œè¿›è¡ŒæŸ¥è¯¢èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ä»¥è‡ªèº«ä¸ºå¤´èŠ‚ç‚¹è¿›è¡ŒæŸ¥æ‰¾ ConcurrentHashMapå¸¸ç”¨æ–¹æ³•initTable åˆå§‹åŒ–æ–¹æ³•åˆå§‹åŒ–æ–¹æ³•æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåœ¨ConcurrentHashMapçš„æž„é€ æ–¹æ³•ä¸­åªæ˜¯ç®€å•çš„è¿›è¡Œäº†ä¸€äº›å‚æ•°æ ¡éªŒå’Œå‚æ•°è½¬æ¢çš„æ“ä½œã€‚æ•´ä¸ªMapçš„åˆå§‹åŒ–æ˜¯åœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™è§¦å‘çš„ã€‚è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„putæ–¹æ³•ä¸­ä¼šè¿›è¡Œè¯´æ˜Žã€‚ 12345678910111213141516171819202122232425262728293031323334//æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå•çº¿ç¨‹æ“ä½œprivate final Node&lt;K,V&gt;[] initTable() &#123; Node&lt;K,V&gt;[] tab; int sc; while ((tab = table) == null || tab.length == 0) &#123; if ((sc = sizeCtl) &lt; 0) //sizeCtl &lt; 0 è¡¨ç¤ºæœ‰çº¿ç¨‹æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä»Žè¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚ Thread.yield(); // lost initialization race; just spin //è®¾ç½®SIZECTLçš„å€¼ä¸º-1ï¼Œé˜»å¡žå…¶ä»–çº¿ç¨‹çš„æ“ä½œ //è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•° //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦æ”¹å˜çš„å¯¹è±¡ //ç¬¬äºŒä¸ªå‚æ•°ï¼šåç§»é‡ //ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæœŸå¾…çš„å€¼ //ç¬¬å››ä¸ªå‚æ•°ï¼šæ›´æ–°åŽçš„å€¼ else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; //å†æ¬¡æ£€æŸ¥æ˜¯å¦æœ‰çº¿ç¨‹è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œ if ((tab = table) == null || tab.length == 0) &#123; int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY; @SuppressWarnings("unchecked") //åˆå§‹åŒ–Nodeå¯¹è±¡æ•°ç»„ Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n]; table = tab = nt; //scçš„å€¼è®¾ç½®ä¸ºnçš„0.75å€ sc = n - (n &gt;&gt;&gt; 2); //ç›¸å½“äºŽn*0.75 &#125; &#125; finally &#123; sizeCtl = sc; //æ›´æ”¹sizeCtlçš„å€¼ &#125; break; //ä¸­æ–­å¾ªåè¿”å›ž &#125; &#125; return tab; //è¿”å›žåˆå§‹åŒ–çš„å€¼&#125; æ‰©å®¹æ–¹æ³•å½“ConcurrentHashMap å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œéœ€è¦å¯¹tableè¿›è¡Œæ‰©å®¹ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ”¯æŒå¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰©å®¹çš„ï¼Œæˆ‘ä»¬æ‰€è¯´çš„æ‰©å®¹ï¼Œä»Žæœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ— éžæ˜¯ä»Žä¸€ä¸ªæ•°ç»„åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„çš„æ‹·è´ã€‚ æ‰©å®¹æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š åˆ›å»ºæ‰©å®¹åŽçš„æ–°æ•°ç»„ï¼Œå®¹é‡å˜ä¸ºåŽŸæ¥çš„ä¸¤å€ ï¼Œæ–°æ•°ç»„çš„åˆ›å»ºæ—¶å•çº¿ç¨‹å®Œæˆ å°†åŽŸæ¥çš„æ•°ç»„å…ƒç´ å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ˜¯å¤šçº¿ç¨‹æ“ä½œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182//å¸®åŠ©æ‰©å®¹final Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123; Node&lt;K,V&gt;[] nextTab; int sc; if (tab != null &amp;&amp; (f instanceof ForwardingNode) &amp;&amp;(nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != null) &#123; int rs = resizeStamp(tab.length); while (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;(sc = sizeCtl) &lt; 0) &#123; if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || transferIndex &lt;= 0) break; if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) &#123; transfer(tab, nextTab); break; &#125; &#125; return nextTab; &#125; return table; &#125; //tab = table ,nextTab ä¸€ä¸ªNode&lt;Key,Value&gt;[]ç±»åž‹çš„å˜é‡ private final void transfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab) &#123; //n æ˜¯tabçš„é•¿åº¦ ï¼Œ stride åˆå§‹å€¼ä¸º0 int n = tab.length, stride; //åˆ¤æ–­cpuå¤„ç†å¤šçº¿ç¨‹çš„èƒ½åŠ›ï¼Œå¦‚æžœå°äºŽ16å°±ç›´æŽ¥èµ‹å€¼ä¸º16 if ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE) stride = MIN_TRANSFER_STRIDE; // subdivide range if (nextTab == null) &#123; // initiating try &#123; @SuppressWarnings("unchecked") //æž„é€ ä¸€ä¸ªå®¹é‡æ˜¯åŽŸæ¥ä¸¤å€çš„Node&lt;K ,V&gt; ç±»åž‹æ•°ç»„ Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n &lt;&lt; 1]; nextTab = nt; //èµ‹å€¼ &#125; catch (Throwable ex) &#123; // try to cope with OOME sizeCtl = Integer.MAX_VALUE; return; &#125; nextTable = nextTab; //èµ‹å€¼ transferIndex = n; //å°†æ•°ç»„é•¿åº¦èµ‹å€¼ç»™transferIndex &#125; int nextn = nextTab.length; //èŽ·å–æ–°æ•°ç»„çš„é•¿åº¦ ForwardingNode&lt;K,V&gt; fwd = new ForwardingNode&lt;K,V&gt;(nextTab); //åˆ›å»ºfwdèŠ‚ç‚¹ boolean advance = true; boolean finishing = false; // to ensure sweep before committing nextTab //ä½¿ç”¨forå¾ªçŽ¯æ¥å¤„ç†æ¯ä¸ªæ§½ä½ä¸­çš„é“¾è¡¨å…ƒç´ ï¼ŒCASè®¾ç½®transferIndexå±žæ€§å€¼ï¼Œå¹¶åˆå§‹åŒ–iå’Œboundå€¼ // i æŒ‡å½“å‰çš„æ§½ä½åºå·ï¼Œboundå€¼éœ€è¦å¤„ç†çš„è¾¹ç•Œï¼Œå…ˆå¤„ç†æ§½ä½ä¸º15çš„èŠ‚ç‚¹ for (int i = 0, bound = 0;;) &#123; //åˆ›å»ºä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªä¸ºNode&lt;K,V&gt; ç±»åž‹ï¼Œä¸€ä¸ªä¸ºintç±»åž‹ Node&lt;K,V&gt; f; int fh; while (advance) &#123; int nextIndex, nextBound; if (--i &gt;= bound || finishing) advance = false; //å°†transferIndexçš„å€¼èµ‹å€¼ç»™ nextIndex ,å¹¶åˆ¤æ–­nextIndexçš„å€¼æ˜¯å¦å°äºŽç­‰äºŽ0 else if ((nextIndex = transferIndex) &lt;= 0) &#123; i = -1; advance = false; &#125; //æ›´æ–°nextIndexçš„å€¼ else if (U.compareAndSwapInt (this, TRANSFERINDEX, nextIndex, nextBound = (nextIndex &gt; stride ? nextIndex - stride : 0))) &#123; bound = nextBound; i = nextIndex - 1; advance = false; &#125; &#125; // if (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) &#123; int sc; //å¦‚æžœtableå·²ç»å¤åˆ¶ç»“æŸ if (finishing) &#123; nextTable = null; //æ¸…ç©ºnextTable table = nextTab; //æŠŠnextTab èµ‹å€¼ç»™ table sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1); //é˜ˆå€¼è®¾ç½®ä¸ºå®¹é‡çš„1.5å€ return; &#125; if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) &#123; if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT) return; finishing = advance = true; i = n; // recheck before commit &#125; &#125; //CASç®—æ³•èŽ·å–æŸä¸ªæ•°ç»„èŠ‚ç‚¹ï¼Œä¸ºç©ºå°±è®¾ç½®ä¸ºfwd else if ((f = tabAt(tab, i)) == null) advance = casTabAt(tab, i, null, fwd); //å¦‚æžœæŸä¸ªèŠ‚ç‚¹çš„hashä¸º-1ï¼Œè·³è¿‡ else if ((fh = f.hash) == MOVED) advance = true; // already processed else &#123; //å¯¹å¤´èŠ‚ç‚¹åŠ é”ï¼Œç¦æ­¢å…¶ä»–çº¿ç¨‹è¿›å…¥ synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; //æž„é€ ä¸¤ä¸ªé“¾è¡¨ ï¼Œå°†è¯¥èŠ‚ç‚¹çš„åˆ—è¡¨æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯åŽŸé“¾è¡¨çš„æŽ’åˆ—é¡ºåºï¼Œä¸€ä¸ªæ˜¯ååº Node&lt;K,V&gt; ln, hn; if (fh &gt;= 0) &#123; // fh å½“å‰èŠ‚ç‚¹çš„hashå€¼ è‹¥ &gt;= 0 int runBit = fh &amp; n; Node&lt;K,V&gt; lastRun = f; //å°†å½“å‰èŠ‚ç‚¹èµ‹å€¼ç»™ lastRun èŠ‚ç‚¹ for (Node&lt;K,V&gt; p = f.next; p != null; p = p.next) &#123; int b = p.hash &amp; n; if (b != runBit) &#123; runBit = b; lastRun = p; &#125; &#125; if (runBit == 0) &#123; ln = lastRun; hn = null; &#125; else &#123; hn = lastRun; ln = null; &#125; //å·®åˆ†åˆ—è¡¨æ“ä½œ for (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123; int ph = p.hash; K pk = p.key; V pv = p.val; if ((ph &amp; n) == 0) ln = new Node&lt;K,V&gt;(ph, pk, pv, ln); else hn = new Node&lt;K,V&gt;(ph, pk, pv, hn); &#125; //åœ¨nextTab çš„i ä½ç½®ä¸Šæ”¾ç½®lnèŠ‚ç‚¹ setTabAt(nextTab, i, ln); //åœ¨nextTab çš„ i+n ä½ç½®ä¸Šæ”¾ç½® hnèŠ‚ç‚¹ setTabAt(nextTab, i + n, hn); //åœ¨tabèŠ‚ç‚¹iä½ç½®ä¸Šæ’å…¥æ’å…¥forwardNodeèŠ‚ç‚¹ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»å¤„ç† setTabAt(tab, i, fwd); advance = true; &#125; //å¯¹TreeBinå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè¿‡ç¨‹ä¸Žä¸Šé¢æœ‰äº›ç±»ä¼¼ //ä¹ŸæŠŠèŠ‚ç‚¹åˆ†ç±»ï¼Œåˆ†åˆ«æ’å…¥åˆ°loå’Œhiä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¸­ // else if (f instanceof TreeBin) &#123; TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f; TreeNode&lt;K,V&gt; lo = null, loTail = null; TreeNode&lt;K,V&gt; hi = null, hiTail = null; int lc = 0, hc = 0; for (Node&lt;K,V&gt; e = t.first; e != null; e = e.next) &#123; int h = e.hash; TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt; (h, e.key, e.val, null, null); if ((h &amp; n) == 0) &#123; if ((p.prev = loTail) == null) lo = p; else loTail.next = p; loTail = p; ++lc; &#125; else &#123; if ((p.prev = hiTail) == null) hi = p; else hiTail.next = p; hiTail = p; ++hc; &#125; &#125; //å¦‚æžœæ‰©å®¹åŽ ä¸åœ¨éœ€è¦treeç»“æž„ï¼Œåå‘è½¬æ¢æˆé“¾è¡¨ç»“æž„ ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) : (hc != 0) ? new TreeBin&lt;K,V&gt;(lo) : t; hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) : (lc != 0) ? new TreeBin&lt;K,V&gt;(hi) : t; setTabAt(nextTab, i, ln); setTabAt(nextTab, i + n, hn); setTabAt(tab, i, fwd); advance = true; &#125; &#125; &#125; &#125; &#125;&#125; putæ–¹æ³•putæ“ä½œæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼ŒæŽ¥ä¸‹æ¥çœ‹ä¸€ä¸‹put()æ–¹æ³•çš„å…·ä½“å®žçŽ°ï¼š put()è¦æ±‚é”®å€¼éƒ½ä¸èƒ½ä¸ºç©º éœ€è¦ç»è¿‡ä¸¤æ¬¡æ•£åˆ—ï¼Œ æ˜¯æ•°æ®å‡åŒ€åˆ†æ•£ï¼Œå‡å°‘ç¢°æ’žçš„æ¬¡æ•° åˆ¤æ–­tabæ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆ™è°ƒç”¨initTableè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼ˆå•çº¿ç¨‹ï¼‰ æ•°ç»„içš„ä½ç½®æ²¡æœ‰å…ƒç´ å­˜åœ¨ï¼Œç›´æŽ¥æ”¾å…¥ å¦‚æžœiçš„ä½ç½®åœ¨è¿›è¡ŒMOVEæ“ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåˆ™å¤šçº¿ç¨‹å¸®åŠ©æ‰©å®¹ å¦‚æžœiçš„ä½ç½®æœ‰å…ƒç´ å­˜åœ¨ï¼Œåˆ™åœ¨è¯¥èŠ‚ç‚¹åŠ é”Synchronizedï¼Œåˆ¤æ–­æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘ï¼ŒæŒ‰ç…§ç›¸åº”çš„æ’å…¥è§„åˆ™æ’å…¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879final V putVal(K key, V value, boolean onlyIfAbsent) &#123; //key|value == null æŠ›å‡ºå¼‚å¸¸ //ConcurrentHashMapä¸å…è®¸é”®æˆ–è€…å€¼ä¸ºnullçš„è¿™ç§æƒ…å†µå‘ç”Ÿ //è¿™ä¸€ç‚¹å’ŒHashMapæœ‰åŒºåˆ« if (key == null || value == null) throw new NullPointerException(); //æ•£åˆ—åœ¨æ•£åˆ—ï¼Œ è®©æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘ç¢°æ’žæ¬¡æ•° int hash = spread(key.hashCode()); --&gt;static final int spread(int h) &#123;return (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS;&#125; int binCount = 0; //æ­»å¾ªçŽ¯ ç›¸å½“äºŽwhile(true) ,å°†tableèµ‹å€¼ç»™ tab for (Node&lt;K,V&gt;[] tab = table;;) &#123; //åˆ›å»ºä¸€ä¸ªNodeç±»åž‹çš„å˜é‡f , int ç±»åž‹çš„å˜é‡ n i fh Node&lt;K,V&gt; f; int n, i, fh; //åˆ¤æ–­tabæ˜¯å¦ä¸ºnull ,æ˜¯å¦è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œï¼Œå¦‚æžœæ²¡æœ‰æ‰§è¡Œåˆå§‹åŒ–ï¼Œæ‰§è¡Œåˆå§‹åŒ–æ“ä½œ if (tab == null || (n = tab.length) == 0) tab = initTable(); //tabAt èŽ·å–å€¼ else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123; //æ·»åŠ åˆ°tableä¸­ if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value, null))) break; //é€€å‡ºå¾ªçŽ¯ // no lock when adding to empty bin &#125; //nodeçš„hashå€¼ä¸º -1 else if ((fh = f.hash) == MOVED) tab = helpTransfer(tab, f); else &#123; V oldVal = null; synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; if (fh &gt;= 0) &#123; binCount = 1; for (Node&lt;K,V&gt; e = f;; ++binCount) &#123; K ek; //key ç›¸ç­‰ï¼Œä½¿ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼ if (e.hash == hash &amp;&amp;((ek = e.key) == key ||(ek != null &amp;&amp; key.equals(ek)))) &#123; oldVal = e.val; if (!onlyIfAbsent) e.val = value; break; &#125; Node&lt;K,V&gt; pred = e; //æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ if ((e = e.next) == null) &#123; pred.next = new Node&lt;K,V&gt;(hash, key,value, null); break; &#125; &#125; &#125; //çº¢é»‘æ ‘æ›¿æ¢ else if (f instanceof TreeBin) &#123; Node&lt;K,V&gt; p; binCount = 2; if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,value)) != null) &#123; oldVal = p.val; if (!onlyIfAbsent) p.val = value; &#125; &#125; &#125; &#125; if (binCount != 0) &#123; if (binCount &gt;= TREEIFY_THRESHOLD) treeifyBin(tab, i); if (oldVal != null) return oldVal; break; &#125; &#125; &#125; addCount(1L, binCount); return null;&#125; Getæ–¹æ³•Getæ–¹æ³•ä¹Ÿæ˜¯æœ€é•¿ç”¨çš„æ–¹æ³•ï¼Œå…ƒç´ æ”¾å…¥äº†ï¼Œæ€»è¦å–å‡ºæ¥ æ ¹æ®ä¼ å…¥çš„key,èŽ·å–ç›¸åº”çš„hashå€¼ ç„¶åŽåˆ¤æ–­å½“å‰çš„tableæ•°ç»„æ˜¯å¦ä¸ºç©º è®¡ç®—æŒ‡å®šçš„keyåœ¨tableä¸­å­˜å‚¨çš„ä½ç½® é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘è½¬æ¢ç›¸ä¾çš„æ–¹æ³•å¤„ç† ä¸å­˜åœ¨åˆ™è¿”å›žnull 123456789101112131415161718192021public V get(Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek; int h = spread(key.hashCode()); if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (e = tabAt(tab, (n - 1) &amp; h)) != null) &#123; if ((eh = e.hash) == h) &#123; if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))) return e.val; &#125; //eh&lt; 0 è¡¨ç¤ºçº¢é»‘æ ‘èŠ‚ç‚¹ else if (eh &lt; 0) return (p = e.find(h, key)) != null ? p.val : null; //é“¾è¡¨éåŽ† while ((e = e.next) != null) &#123; if (e.hash == h &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) return e.val; &#125; &#125; return null;&#125; æ€»ç»“JDK6ï¼Œ7ä¸­çš„ConcurrentHashmapä¸»è¦ä½¿ç”¨Segmentæ¥å®žçŽ°å‡å°é”ç²’åº¦ï¼ŒæŠŠHashMapåˆ†å‰²æˆè‹¥å¹²ä¸ªSegmentï¼Œåœ¨putçš„æ—¶å€™éœ€è¦é”ä½Segmentï¼Œgetæ—¶å€™ä¸åŠ é”ï¼Œä½¿ç”¨volatileæ¥ä¿è¯å¯è§æ€§ï¼Œå½“è¦ç»Ÿè®¡å…¨å±€æ—¶ï¼ˆæ¯”å¦‚sizeï¼‰ï¼Œé¦–å…ˆä¼šå°è¯•å¤šæ¬¡è®¡ç®—modcountæ¥ç¡®å®šï¼Œè¿™å‡ æ¬¡å°è¯•ä¸­ï¼Œæ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ç›´æŽ¥è¿”å›žsizeã€‚å¦‚æžœæœ‰ï¼Œåˆ™éœ€è¦ä¾æ¬¡é”ä½æ‰€æœ‰çš„Segmentæ¥è®¡ç®—ã€‚ jdk7ä¸­ConcurrentHashmapä¸­ï¼Œå½“é•¿åº¦è¿‡é•¿ï¼Œç¢°æ’žä¼šå¾ˆé¢‘ç¹ï¼Œé“¾è¡¨çš„å¢žæ”¹åˆ æŸ¥æ“ä½œéƒ½ä¼šæ¶ˆè€—å¾ˆé•¿çš„æ—¶é—´ï¼Œå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥jdk8 ä¸­å®Œå…¨é‡å†™äº†concurrentHashmap,ä»£ç é‡ä»ŽåŽŸæ¥çš„1000å¤šè¡Œå˜æˆäº† 6000å¤š è¡Œï¼Œå®žçŽ°ä¸Šä¹Ÿå’ŒåŽŸæ¥çš„åˆ†æ®µå¼å­˜å‚¨æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚ ä¸»è¦è®¾è®¡ä¸Šçš„å˜åŒ–æœ‰ä»¥ä¸‹å‡ ç‚¹: ä¸é‡‡ç”¨segmentè€Œé‡‡ç”¨nodeï¼Œé”ä½nodeæ¥å®žçŽ°å‡å°é”ç²’åº¦ã€‚ è®¾è®¡äº†MOVEDçŠ¶æ€ å½“resizeçš„ä¸­è¿‡ç¨‹ä¸­ çº¿ç¨‹2è¿˜åœ¨putæ•°æ®ï¼Œçº¿ç¨‹2ä¼šå¸®åŠ©resizeã€‚ ä½¿ç”¨3ä¸ªCASæ“ä½œæ¥ç¡®ä¿nodeçš„ä¸€äº›æ“ä½œçš„åŽŸå­æ€§ï¼Œè¿™ç§æ–¹å¼ä»£æ›¿äº†é”ã€‚ sizeCtlçš„ä¸åŒå€¼æ¥ä»£è¡¨ä¸åŒå«ä¹‰ï¼Œèµ·åˆ°äº†æŽ§åˆ¶çš„ä½œç”¨ã€‚ å‚è€ƒï¼š http://blog.csdn.net/u010723709/article/details/48007881]]></content>
      <tags>
        <tag>Analyst of SourceCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Everything About HashSet]]></title>
    <url>%2F2020%2F03%2F21%2FEverything-About-HashSet%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°æ–‡ç« çš„å†…å®¹åŸºäºŽJDK1.7è¿›è¡Œåˆ†æžï¼Œä¹‹æ‰€ä»¥é€‰ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸º1.8çš„æœ‰äº›ç±»åšäº†æ”¹åŠ¨ï¼Œå¢žåŠ äº†é˜…è¯»çš„éš¾åº¦ï¼Œè™½ç„¶æ˜¯1.7ï¼Œä½†æ˜¯å¯¹äºŽ1.8åšäº†é‡å¤§æ”¹åŠ¨çš„å†…å®¹ï¼Œæ–‡ç« ä¹Ÿä¼šè¿›è¡Œè¯´æ˜Žã€‚ HashSetæ˜¯SetæŽ¥å£çš„å…¸åž‹å®žçŽ°ï¼ŒHashSetæŒ‰ç…§Hashç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ã€‚å­˜åœ¨ä»¥ä¸‹ç‰¹ç‚¹ï¼š ä¸èƒ½ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œå…ƒç´ æ˜¯æ— åºçš„ HashSetä¸æ˜¯åŒæ­¥çš„ï¼Œéœ€è¦å¤–éƒ¨ä¿æŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜ é›†åˆå…ƒç´ å€¼å…è®¸ä¸ºnull æ•°æ®ç»“æž„ç»§æ‰¿å…³ç³»1234java.lang.Object java.util.AbstractCollection&lt;E&gt; java.util.AbstractSet&lt;E&gt; java.util.HashSet&lt;E&gt; å®žçŽ°æŽ¥å£1Serializable, Cloneable, Iterable&lt;E&gt;, Collection&lt;E&gt;, Set&lt;E&gt; åŸºæœ¬å±žæ€§12private transient HashMap&lt;E,Object&gt; map; //mapé›†åˆï¼ŒHashSetå­˜æ”¾å…ƒç´ çš„å®¹å™¨private static final Object PRESENT = new Object(); //mapï¼Œä¸­é”®å¯¹åº”çš„valueå€¼ é‡è¦æ–¹æ³•æ·±åº¦è§£æžæž„é€ æ–¹æ³•123456789101112131415161718192021//æ— å‚æž„é€ æ–¹æ³•ï¼Œå®Œæˆmapçš„åˆ›å»ºpublic HashSet() &#123; map = new HashMap&lt;&gt;();&#125;//æŒ‡å®šé›†åˆè½¬åŒ–ä¸ºHashSet, å®Œæˆmapçš„åˆ›å»ºpublic HashSet(Collection&lt;? extends E&gt; c) &#123; map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16)); addAll(c);&#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œå’Œè´Ÿè½½å› å­public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor);&#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°public HashSet(int initialCapacity) &#123; map = new HashMap&lt;&gt;(initialCapacity);&#125;//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­ï¼Œdummy æ— å®žé™…æ„ä¹‰HashSet(int initialCapacity, float loadFactor, boolean dummy) &#123; map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);&#125; é€šè¿‡æž„é€ å‡½æ•°ï¼Œä¸éš¾å‘çŽ°ï¼ŒHashSetçš„åº•å±‚æ˜¯é‡‡ç”¨HashMapå®žçŽ°çš„ã€‚ Add()æ–¹æ³•123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; PRESENTä¸ºHashSetç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªä½¿ç”¨static final ä¿®é¥°çš„å¸¸é‡ï¼Œå¹¶æ— å®žé™…çš„æ„ä¹‰ï¼ŒHashSetçš„addæ–¹æ³•è°ƒç”¨HashMapçš„put()æ–¹æ³•å®žçŽ°ï¼Œå¦‚æžœé”®å·²ç»å­˜åœ¨ï¼Œmap.put()æ”¾å›žçš„æ˜¯æ—§å€¼ï¼Œæ·»åŠ å¤±è´¥ï¼Œå¦‚æžœæ·»åŠ æˆåŠŸmap.put()æ–¹æ³•è¿”å›žçš„æ˜¯null ,HashSet.add()æ–¹æ³•è¿”å›žtrue,è¦æ·»åŠ çš„å…ƒç´ å¯ä½œä¸ºmapä¸­çš„key ã€‚ remove()123public boolean remove(Object o) &#123; return map.remove(o)==PRESENT;&#125; åˆ é™¤æ–¹æ³•ï¼Œè°ƒç”¨map.remove()æ–¹æ³•å®žçŽ°ï¼Œmap.remove()èƒ½æ‰¾åˆ°æŒ‡å®šçš„key,åˆ™è¿”å›žkeyå¯¹åº”çš„value,å¯¹äºŽHashsetè€Œè¨€ï¼Œå®ƒæ‰€æœ‰çš„keyå¯¹åº”çš„å€¼éƒ½æ˜¯PRESENTã€‚ æºç è§£æž123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123public class HashSet&lt;E&gt; extends AbstractSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable &#123; static final long serialVersionUID = -5024744406713321676L; //åºåˆ—åŒ–ç‰ˆæœ¬å· private transient HashMap&lt;E,Object&gt; map; //HashMapå˜é‡ï¼Œç”¨äºŽå­˜æ”¾HashSetçš„å€¼ private static final Object PRESENT = new Object(); //mapä¸­çš„å€¼ //æž„é€ æ–¹æ³• public HashSet() &#123; map = new HashMap&lt;&gt;(); &#125; //æž„é€ æ–¹æ³•ï¼Œå°†æŒ‡å®šçš„é›†åˆè½¬åŒ–ä¸ºHashSet public HashSet(Collection&lt;? extends E&gt; c) &#123; map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16)); addAll(c); &#125; //æž„é€ æ–¹æ³•ï¼ŒæŒ‡å®šåˆå§‹åŒ–çš„å¤§å°å’Œè´Ÿè½½å› å­ public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor); &#125; //æŒ‡å®šåˆå§‹åŒ–å¤§å° public HashSet(int initialCapacity) &#123; map = new HashMap&lt;&gt;(initialCapacity); &#125; //æž„é€ æ–¹æ³•ï¼Œé‡‡ç”¨defaultä¿®é¥°ï¼Œåªèƒ½æ˜¯åŒä¸€ä¸ªåŒ…ä¸‹çš„æˆå‘˜è®¿é—®ã€‚åŒ…ä¸ç›¸åŒæ— æ³•è®¿é—® HashSet(int initialCapacity, float loadFactor, boolean dummy) &#123; map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor); &#125; //HashSetçš„éåŽ†æ“ä½œ //é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥å‘çŽ°ï¼ŒHashSetè°ƒç”¨äº†HashMapå­˜æ”¾ï¼Œå› ä¸ºHashSetå¹¶ä¸æ˜¯é”®å€¼å¯¹å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒåªæ˜¯æŠŠå®ƒçš„å€¼åšäº†Mapä¸­çš„é”®ï¼Œåœ¨éåŽ†HashSetçš„é›†åˆå…ƒç´ æ—¶ï¼Œå®žé™…ä¸Šæ˜¯éåŽ†çš„Mapä¸­Keyçš„é›†åˆã€‚ public Iterator&lt;E&gt; iterator() &#123; return map.keySet().iterator(); &#125; //è¿”å›žé›†åˆä¸­å…ƒç´ çš„å®¹é‡ public int size() &#123; return map.size(); &#125; //åˆ¤æ–­æ˜¯å¦ä¸ºç©º public boolean isEmpty() &#123; return map.isEmpty(); &#125; //æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´  public boolean contains(Object o) &#123; return map.containsKey(o); &#125; //æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ çš„å…ƒç´ ä½œä¸ºäº†Mapä¸­çš„key,valueä½¿ç”¨äº†ä¸€ä¸ªå¸¸é‡è¡¨ç¤º public boolean add(E e) &#123; return map.put(e, PRESENT)==null; &#125; //åˆ é™¤å…ƒç´  public boolean remove(Object o) &#123; return map.remove(o)==PRESENT; &#125; //æ¸…ç©ºé›†åˆ public void clear() &#123; map.clear(); &#125; //å…‹éš†æ–¹æ³• public Object clone() &#123; try &#123; HashSet&lt;E&gt; newSet = (HashSet&lt;E&gt;) super.clone(); newSet.map = (HashMap&lt;E, Object&gt;) map.clone(); return newSet; &#125; catch (CloneNotSupportedException e) &#123; throw new InternalError(); &#125; &#125; //å†™å…¥è¾“å‡ºæµæ“ä½œã€‚ private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException &#123; // Write out any hidden serialization magic s.defaultWriteObject(); // Write out HashMap capacity and load factor s.writeInt(map.capacity()); s.writeFloat(map.loadFactor()); // Write out size s.writeInt(map.size()); // Write out all elements in the proper order. for (E e : map.keySet()) s.writeObject(e); &#125; //ä»Žè¾“å…¥æµä¸­è¯»å–å¯¹è±¡ private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException &#123; // Read in any hidden serialization magic s.defaultReadObject(); // Read in HashMap capacity and load factor and create backing HashMap int capacity = s.readInt(); float loadFactor = s.readFloat(); map = (((HashSet)this) instanceof LinkedHashSet ? new LinkedHashMap&lt;E,Object&gt;(capacity, loadFactor) : new HashMap&lt;E,Object&gt;(capacity, loadFactor)); // Read in size int size = s.readInt(); // Read in all elements in the proper order. for (int i=0; i&lt;size; i++) &#123; E e = (E) s.readObject(); map.put(e, PRESENT); &#125; &#125;&#125; æ€»ç»“ HashSetçš„åº•å±‚é€šè¿‡HashMapå®žçŽ°çš„ã€‚è€ŒHashMapåœ¨1.7ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨å®žçŽ°ï¼Œåœ¨1.8+ä½¿ç”¨çš„æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®žçŽ°ã€‚å…¶å®žä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼ŒHashSetçš„åº•å±‚å®žçŽ°å’ŒHashMapä½¿ç”¨çš„æ˜¯ç›¸åŒçš„æ–¹å¼ï¼Œå› ä¸ºMapæ˜¯æ— åºçš„ï¼Œå› æ­¤HashSetä¹Ÿæ— æ³•ä¿è¯é¡ºåºã€‚ HashSetçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å€ŸåŠ©HashMapçš„æ–¹æ³•æ¥å®žçŽ°çš„ã€‚]]></content>
      <tags>
        <tag>Analyst of SourceCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-2In TaiwanTech]]></title>
    <url>%2F2020%2F02%2F17%2F2019-2In-TaiwanTech%2F</url>
    <content type="text"><![CDATA[å¤§å››ä¸Šå­¸æœŸçš„æˆç¸¾å–® å¾Œé¢å†è£œå…§å®¹ï¼Œå·²ç¶“éŒ¯éŽå¯¦ç¿’å’Œç§‹æ‹›äº†ã€‚ç¾åœ¨æŠ“ç·Šæžæžæ˜¥æ‹›ã€‚ å­¸æ ¡çš„èª²å¯¦åœ¨å¤ªå¤šï¼Œ30å­¸åˆ†å¿™8éŽä¾† å›žå®¶ä»¥åŽå‘çŽ°é’™hubä¹Ÿæ‰“ä¸å¼€äº†â€¦..é™¤äº†ç§‘å­¦ä¸Šç½‘çš„è§£å†³æ–¹æ³•ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯è®¾ç½®é™æ€IPåœ°å€ å›¾åºŠä¹ŸåŠ è½½ä¸å‡ºæ¥äº†ï¼Œè¿™é‡ŒæŽ¨èSM SMçš„å›¾åºŠæœåŠ¡ æ–°å¹´æ–°FLAGä¸“ä¸šæŠ€æœ¯ æŒ‰ç…§zuochengyunå¤§å“¥çš„å»ºè®®è¯»JDKé‡è¦åŒ…çš„æºä»£ç ,java.lang,java.util.java.io Springæºç , å­¦ä¹ åˆ†å¸ƒå¼ç¼“å­˜æŠ€æœ¯. PASS THE FRM Certification RANK1 è¯­è¨€æ°´å¹³ æ—¥è¯­è¾¾åˆ°N3æ°´å¹³ å¦‚ä½•è‡ªå­¦å¤‡è€ƒæ—¥è¯­N3ï¼Ÿ TOEFLç ´ç™¾ ðŸ“šä¹¦å• Thinking In Java Bruce Eckel çš„ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ï¼ˆThinking in Javaï¼‰ï¼Œéžå¸¸æœ‰åçš„ç»å…¸ä¹¦ç±ã€‚è¿™æœ¬ä¹¦çš„ç‰¹ç‚¹æ˜¯ï¼Œä¸ä»…ä»…ä»‹ç» Java ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œä¹Ÿä¼šæ€è€ƒç¼–ç¨‹ä¸­çš„å„ç§é€‰æ‹©ä¸Žåˆ¤æ–­ï¼ŒåŒ…æ‹¬ç©¿æ’è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ï¼Œä½œè€…ä»Žç†è®ºåˆ°å®žè·µæ„ä¹‰ä»Žä¸åŒçš„è§’åº¦è¿›è¡ŒæŽ¢è®¨ï¼Œæž„å»ºç¨³å›ºçš„ Java ç¼–ç¨‹çŸ¥è¯†ä½“ç³»ã€‚ Effective Java è¿™æœ¬ä¹¦çš„è‹±æ–‡ç¬¬ä¸‰ç‰ˆå·²ç»åœ¨å›½å†…ä¸Šå¸‚ï¼Œæ¶µç›–äº† Java 7 åˆ° Java 9 çš„å„ç§æ–°ç‰¹æ€§ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æœ¬ä¹¦ä¸ç®—æ˜¯ä¸€æœ¬åŸºç¡€ä¹¦ç±ï¼Œä½†å½“ä½ æœ‰ä¸€å®šåŸºç¡€åŽï¼Œè¿˜æ˜¯éžå¸¸å»ºè®®é€šè¯»ä¸€ä¸‹çš„ã€‚å…³äºŽè¿™æœ¬ä¹¦çš„é˜…è¯»ï¼Œæˆ‘çš„å»ºè®®æ˜¯è¾¹å­¦ä¹ è¾¹å›žé¡¾ï¼Œåœ¨å¸æ”¶ä¹¦ä¸­çš„ç»éªŒæ—¶ï¼Œå¤šåŽ»æƒ³æƒ³è‡ªå·±åœ¨å®žé™…åº”ç”¨ä¸­æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚è™½ç„¶ã€ŠEffective Javaã€‹çš„å…·ä½“ç« èŠ‚å¯èƒ½æ˜¯ä»ŽæŸä¸ªç‚¹å‡ºå‘ï¼Œä½†å¯ä»¥è¯´éƒ½æ˜¯å¯¹ Javaã€JVMã€é¢å‘å¯¹è±¡ç­‰å„ç§çŸ¥è¯†çš„ç»¼åˆè¿ç”¨ï¼Œå¯¹äºŽè®¾è®¡å’Œå®žçŽ°é«˜è´¨é‡çš„ä»£ç å¾ˆæœ‰å¸®åŠ©ã€‚ Java å¹¶å‘ç¼–ç¨‹å®žæˆ˜ ä½œè€…å…¨æ˜¯å“å½“å½“çš„äººç‰©ï¼Œæ¯”å¦‚ Brian Goetzï¼Œæˆ‘å¤šæ¬¡åœ¨ä¸“æ é‡Œå¼•ç”¨ä»–çš„è§‚ç‚¹ï¼Œä¼—å¤šå¼ºåŠ›ä½œè€…ä¹Ÿä¿è¯äº†ä¹¦çš„è´¨é‡ã€‚æŠ›å¼€ä½œè€…å…‰çŽ¯ï¼Œè¿™æœ¬ä¹¦çš„å†…å®¹å…¨éƒ¨å»ºç«‹åœ¨ç†è®ºä¹‹ä¸Šï¼Œå…ˆè®²æ¸…é“ç†å†è°ˆå®žè·µï¼Œå¯ä»¥çœŸæ­£è®©ä½ çŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚è¿™æœ¬ä¹¦æ›´åŠ ä¾§é‡å¹¶å‘ç¼–ç¨‹ä¸­æœ‰å“ªäº›é—®é¢˜ï¼Œå¦‚ä½•æ¥æ·±åˆ»åœ°ç†è§£å’Œå®šä¹‰é—®é¢˜ï¼Œå¦‚ä½•åˆ©ç”¨å¯é çš„æ‰‹æ®µæŒ‡å¯¼å·¥ç¨‹å®žè·µï¼Œå¹¶æ²¡æœ‰è¿‡åˆ†çº ç»“äºŽå¹¶å‘ç±»åº“çš„æºç å±‚é¢ã€‚ æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº æ€§èƒ½ä¼˜åŒ– æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘æŽ¨è Charlie Hunt å’Œ Binu John æ‰€è‘—çš„ã€ŠJava æ€§èƒ½ä¼˜åŒ–æƒå¨æŒ‡å—ã€‹ï¼ˆJava Performanceï¼‰ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šæ¬¡åœ¨ç›´æ’­æ—¶å‘å¤§å®¶æŽ¨èçš„ã€‚Java ä¹‹çˆ¶ James Goslingã€‚ Springå®žæˆ˜ å¯ä»¥è¯´ Spring ç­‰ç›¸å…³æ¡†æž¶å·²ç»æˆä¸ºä¸šåŠ¡å¼€å‘çš„äº‹å®žæ ‡å‡†ï¼Œç³»ç»Ÿæ€§åœ°æŽŒæ¡ Spring æ¡†æž¶çš„è®¾è®¡å’Œå®žè·µï¼Œæ˜¯å¿…éœ€çš„æŠ€èƒ½ä¹‹ä¸€ã€‚ Nettyå®žæˆ˜ Netty åœ¨æ€§èƒ½ã€å¯æ‰©å±•æ€§ç­‰æ–¹é¢çš„çªå‡ºè¡¨çŽ°ï¼Œå·²ç»å¾—åˆ°å……åˆ†éªŒè¯ï¼Œä½œä¸ºåŸºç¡€çš„é€šä¿¡æ¡†æž¶ï¼Œå·²ç»å¹¿æ³›åº”ç”¨åœ¨å„ç§äº’è”ç½‘æž¶æž„ã€æ¸¸æˆç­‰é¢†åŸŸï¼Œç”šè‡³å¯ä»¥è¯´ï¼Œå¦‚æžœæ²¡æœ‰ä»”ç»†åˆ†æžè¿‡ Nettyï¼Œå¯¹ NIO ç­‰æ–¹é¢çš„ç†è§£å¾ˆå¯èƒ½è¿˜åœ¨å¾ˆè‚¤æµ…çš„é˜¶æ®µã€‚ Cloud Native Java Java åº”ç”¨ç¨‹åºæž¶æž„å¤„äºŽé£žå¿«çš„æ¼”è¿›ä¹‹ä¸­ï¼Œå¾®æœåŠ¡ç­‰æ–°çš„æž¶æž„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œå³ä½¿æœªå¿…æ˜¯ä½¿ç”¨ Spring Bootã€Spring Cloud ç­‰æ¡†æž¶ï¼Œä½†æ˜¯ç³»ç»Ÿçš„å­¦ä¹ å…¶è®¾è®¡æ€æƒ³å’Œå®žè·µæŠ€æœ¯ï¼Œç»å¯¹æ˜¯æœ‰å¿…è¦çš„ã€‚å½“ç„¶å¦‚æžœä½ åœ¨å®žè·µä¸­ä½¿ç”¨ Dubbo ç­‰æ¡†æž¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç›¸å…³ä¹¦ç±ã€‚å‰æ²¿é¢†åŸŸçš„å˜åŒ–éžå¸¸å¿«ï¼Œå¾ˆå¤šé£Žé¡ä¸€æ—¶çš„å¼€æºè½¯ä»¶ï¼Œåœ¨å®žè·µä¸­é€æ¸è¢«è¯æ˜Žå­˜åœ¨å„ç§å¼Šç«¯ï¼Œæˆ–è€…åŽ‚å•†åœæ­¢ç»´æŠ¤ã€‚æ‰€ä»¥è¿™éƒ¨åˆ†çš„å­¦ä¹ ï¼Œæˆ‘å»ºè®®ä¸è¦ç›²ç›®è¿½æ–°ï¼Œæœ€å¥½æ˜¯å…³æ³¨äºŽåˆ†å¸ƒå¼è®¾è®¡ä¸­çš„é—®é¢˜å’Œè§£å†³çš„æ€è·¯ï¼Œåšåˆ°è§¦ç±»æ—é€šï¼Œå¹¶ä¸”æ³¨é‡ä¹¦ç±ä¹‹å¤–çš„å­¦ä¹ æ¸ é“ã€‚ä¸‹é¢ä¸¤æœ¬å¹¶ä¸ç®—æ˜¯ Java ä¹¦ç±ï¼Œä½† Java ç¨‹åºå‘˜è¿›é˜¶å°‘ä¸äº†å¯¹äº’è”ç½‘ä¸»æµæž¶æž„çš„å­¦ä¹ ï¼Œäº†è§£åˆ†å¸ƒå¼æž¶æž„ã€ç¼“å­˜ã€æ¶ˆæ¯ä¸­é—´ä»¶ç­‰ä»¤äººçœ¼èŠ±ç¼­ä¹±çš„æŠ€æœ¯ï¼Œå¯¹äºŽæœ‰å¿—äºŽæˆä¸ºæž¶æž„å¸ˆçš„ Java å·¥ç¨‹å¸ˆæ¥è¯´éžå¸¸æœ‰å¸®åŠ©ã€‚ å¤§åž‹åˆ†å¸ƒå¼ç½‘ç«™æž¶æž„è®¾è®¡ä¸Žå®žè·µ è¿™æœ¬ä¹¦æ€»ç»“äº†ä½œè€…åœ¨æž„å»ºå®‰å…¨ã€å¯ç¨³å®šæ€§ã€é«˜æ‰©å±•æ€§ã€é«˜å¹¶å‘çš„åˆ†å¸ƒå¼ç½‘ç«™æ–¹é¢çš„å¿ƒå¾—ã€‚ æ·±å…¥åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»ŽåŽŸç†åˆ°å®žæˆ˜ è¿™æœ¬ä¹¦èžåˆäº†åŽŸç†ã€æž¶æž„å’Œä¸€çº¿äº’è”ç½‘å…¬å¸çš„æ¡ˆä¾‹å®žè·µï¼Œå€¼å¾—å‚è€ƒã€‚]]></content>
      <tags>
        <tag>TaiwanTech</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Garbage Collection In JVM]]></title>
    <url>%2F2020%2F02%2F15%2FGarbage-Collection-In-JVM%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£JVM ç§æœ‰çº¿ç¨‹åŒºåŸŸï¼š æ ˆï¼šå‡½æ•°å½“å‰è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›å‡½æ•°å˜é‡ã€‚å­˜å¯¹è±¡çš„å¼•ç”¨ç±»åž‹å’Œåœ°å€ æœ¬åœ°æ–¹æ³•æ ˆï¼šå­˜æ”¾C++è¿è¡Œæ—¶çš„nativeæ ˆã€‚ ç¨‹åºè®¡æ•°å™¨ï¼šæŒ‡å‘å½“å‰ç¨‹åºè¿è¡Œçš„ä½ç½®ã€‚çº¿ç¨‹å…±äº«åŒºåŸŸï¼š å †ï¼šå­˜å¯¹è±¡(æœ€ç»ˆ)ï¼Œè€å¹´ä»£ã€‚ æ–¹æ³•åŒºï¼šå­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ï¼Œåœ¨JDK1.7å‰ä½œæ°¸ä¹…ä»£ï¼Œ1.8ä»¥åŽæ”¹ä¸ºå…ƒæ•°æ®ç©ºé—´ï¼Œå­˜å‚¨é™æ€å˜é‡å’Œå¸¸é‡ã€ç±»åŠ è½½å™¨ã€‚ Javaçš„åŸºç¡€æ•°æ®å’ŒæŒ‡é’ˆéƒ½æ˜¯å€¼ç±»åž‹ï¼Œæ‰€ä»¥ç›´æŽ¥å­˜åˆ°å†…å­˜é‡Œé¢åŽ»ï¼Œä¸æ˜¯åŽ»å­˜åœ°å€å¯»å€ã€‚ GC GC Rootæœ¬åœ°æ–¹æ³•æ ˆ,æ–¹æ³•åŒº,æ ˆä¸èƒ½è¢«åˆ é™¤ åˆ é™¤æ–¹æ³• æ ‡è®°æ¸…ç†ï¼Œ==ä¼šäº§ç”Ÿå†…å­˜ç¢Žç‰‡==ã€‚ æ ‡è®°æ•´ç†(åˆ äº†åŽé¢çš„é¡¶ä¸Šæ¥ï¼Œå‡å°‘å†…å­˜ç¢Žç‰‡)ï¼Œ==å‰ç§»ç©ºé—´ç§»åŠ¨ä»£ä»·å¤ªå¤§==ã€‚ å¤åˆ¶ç®—æ³•(åˆ†ä¸ºä¸¤ä¸ªåŒº)ï¼Œä¸ç›´æŽ¥åˆ é™¤ï¼Œä¸è¢«åˆ é™¤çš„å¤åˆ¶åˆ°æ–°åŒºï¼Œ==éœ€è¦2å€çš„å†…å­˜==ã€‚ å®žé™…ï¼šMinor GCå½“åœ¨ Eden åŒºåˆ†é…å†…å­˜ä¸è¶³æ—¶ï¼Œåˆ™ä¼šå‘ç”Ÿ minorGC ï¼Œç”±äºŽ Java å¯¹è±¡å¤šæ•°æ˜¯æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ minorGCé€šå¸¸ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œæ•ˆçŽ‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚ å¹´è½»ä»£ï¼šEåŒº(ä¼Šç”¸å›­ï¼Œæ»¡äº†è§¦å‘YoungGC,ç”¨å¤åˆ¶ç®—æ³•)ï¼Œï¼Œä¸¤ä¸ªSurviveåŒº(S0.S1) 8ï¼š1ï¼š1ï¼Œä¸¤ä¸ªSåŒºäº¤æ›¿å·¥ä½œï¼ˆE+S1åˆ°S0,E+S0åˆ°S1ï¼‰ã€‚æ¯æ¬¡Young GCå®Œå¹´é¾„ä¼šåŠ ä¸€ï¼Œæ»¡15å²å°±ç›´æŽ¥éƒ½åŽ»è€å¹´ä»£åŒºäº†ã€‚ParNewåžƒåœ¾æ”¶é›†å™¨(å¤åˆ¶)ã€‚Full GC è€å¹´ä»£ï¼šåªæœ‰ä¸€å—ï¼Œå­˜æ»¡15å²åˆ°åŽ»è€å¹´ä»£åŒºçš„å¯¹è±¡ã€‚å’Œå¤§å¯¹è±¡ï¼ŒOldæ»¡äº†å°±å’Œå¹´è½»çš„ä¸€èµ·Full GC,å‘ç”ŸSTOPPED WORLD,æ•´ä¸ªJavaç¨‹åºç›´æŽ¥æš‚åœï¼Œå°±ç”¨æ ‡è®°æ¸…ç†æˆ–è€…æ ‡è®°æ•´ç†ã€‚CMSåžƒåœ¾æ”¶é›†å™¨(æ ‡è®°æ¸…ç†)ã€‚ å’ŒGC Rootæ— å…³çš„æ‰èƒ½è¢«åˆ é™¤]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Principle of JVM]]></title>
    <url>%2F2020%2F02%2F08%2FPrinciple-of-JVM%2F</url>
    <content type="text"><![CDATA[JVMåŽŸç†é€Ÿè®°å¤ä¹ Javaè™šæ‹Ÿæœºæ€»ç»“æ€ç»´å¯¼å›¾é¢è¯•å¿…å¤‡ Javaè™šæ‹Ÿæœºä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸçº¿ç¨‹ç§æœ‰ç¨‹åºè®¡æ•°å™¨è®°å½•æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼ˆå¦‚æžœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•åˆ™ä¸ºç©ºï¼‰ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šOOMï¼ˆOutOfMemoryErrorï¼‰çš„åŒºåŸŸã€‚Javaè™šæ‹Ÿæœºæ ˆæ¯ä¸ªJavaæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ ˆæ¡¢ç”¨äºŽå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æŽ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚ä»Žæ–¹æ³•è°ƒç”¨ç›´åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå¯¹åº”ç€ä¸€ä¸ªæ ˆæ¡¢åœ¨Javaè™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ï¼ˆå±€éƒ¨å˜é‡åŒ…å«åŸºæœ¬æ•°æ®ç±»åž‹ã€å¯¹è±¡å¼•ç”¨referenceå’ŒreturnAddressç±»åž‹ï¼‰æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ ˆä¸ŽJavaè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åªä¸è¿‡æ˜¯æœ¬åœ°æ–¹æ³•æ ˆä¸ºNativeæ–¹æ³•æœåŠ¡ã€‚çº¿ç¨‹å…¬æœ‰Javaå †ï¼ˆGCåŒºï¼‰ï¼ˆJava Headï¼‰å‡ ä¹Žæ‰€æœ‰çš„å¯¹è±¡å®žä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ï¼Œæ˜¯åžƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚å¯¹äºŽæ–°ç”Ÿä»£åˆåˆ†ä¸ºEdenç©ºé—´ã€From Survivorç©ºé—´ã€To Survivorç©ºé—´ã€‚JDK1.7 æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ç”¨äºŽå­˜æ”¾å·²è¢«åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åŽçš„ä»£ç ç­‰æ•°æ®ã€‚å¯¹è¿™å—åŒºåŸŸè¿›è¡Œåžƒåœ¾å›žæ”¶çš„ä¸»è¦ç›®çš„æ˜¯å¯¹å¸¸é‡æ± çš„å›žæ”¶å’Œå¯¹ç±»çš„å¸è½½ï¼Œä½†æ˜¯ä¸€èˆ¬éš¾ä»¥å®žçŽ°ã€‚HotSpotè™šæ‹ŸæœºæŠŠå®ƒå½“åšæ°¸ä¹…ä»£æ¥è¿›è¡Œåžƒåœ¾å›žæ”¶ã€‚ä½†å¾ˆéš¾ç¡®å®šæ°¸ä¹…ä»£çš„å¤§å°ï¼Œå› ä¸ºå®ƒå—åˆ°å¾ˆå¤šå› ç´ çš„å½±å“ï¼Œå¹¶ä¸”æ¯æ¬¡Full GCä¹‹åŽæ°¸ä¹…ä»£çš„å¤§å°éƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ç»å¸¸æŠ›å‡ºOOMå¼‚å¸¸ã€‚ä»ŽJDK1.8å¼€å§‹ï¼Œç§»é™¤æ°¸ä¹…ä»£ï¼Œå¹¶æŠŠæ–¹æ³•åŒºç§»è‡³å…ƒç©ºé—´ã€‚è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†Classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± ï¼ˆç¼–è¯‘å™¨ç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ä¼šåœ¨ç±»åŠ è½½åŽè¢«æ”¾å…¥è¿™ä¸ªåŒºåŸŸã€‚å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚Stringç±»çš„intern()JDK1.8 å…ƒç©ºé—´åŽŸæœ¬å­˜åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰çš„æ•°æ®ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†Javaå †é‡Œé¢ï¼Œä¸€éƒ¨åˆ†ç§»åˆ°äº†æœ¬åœ°å†…å­˜é‡Œé¢ï¼ˆå³å…ƒç©ºé—´ï¼‰ã€‚å…ƒç©ºé—´å­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼Œé™æ€å˜é‡å’Œå¸¸é‡æ± ç­‰æ”¾å…¥å †ä¸­ã€‚ç›´æŽ¥å†…å­˜åœ¨NIOä¸­ï¼Œä¼šä½¿ç”¨Nativeå‡½æ•°åº“ç›´æŽ¥åˆ†é…å †å¤–å†…å­˜ã€‚äºŒã€HotSpotè™šæ‹Ÿæœºå¯¹è±¡çš„åˆ›å»ºå½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶æ£€æŸ¥å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­æ‰¾åˆ°ç¬¦å·å¼•ç”¨ï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æžå’Œåˆå§‹è¿‡ï¼Œæ²¡æœ‰çš„è¯å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡ä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å†…å­˜åˆ†é…å®Œæˆä¹‹åŽï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚å¯¹å¯¹è±¡å¤´è¿›è¡Œå¿…è¦çš„è®¾ç½®ã€‚æ‰§è¡Œæž„é€ æ–¹æ³•æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ã€‚å¯¹è±¡çš„å†…å­˜å¸ƒå±€å¯¹è±¡å¤´ç¬¬ä¸€éƒ¨åˆ†ç”¨äºŽå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡è¯†ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘å®žçŽ°æˆ³ç­‰ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»åž‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ˆå¦‚æžœä½¿ç”¨ç›´æŽ¥å¯¹è±¡æŒ‡é’ˆè®¿é—®ï¼‰ï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®žä¾‹ã€‚å¦‚æžœå¯¹è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„çš„è¯ï¼Œè¿˜éœ€è¦ç¬¬ä¸‰éƒ¨åˆ†è®°å½•æ•°æ®é•¿åº¦çš„æ•°æ®ã€‚å®žä¾‹æ•°æ®æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç ä¸­å®šä¹‰çš„å„ç§ç±»åž‹çš„å­—æ®µå†…å®¹ã€‚å¯¹é½å¡«å……ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚HotSpotéœ€è¦å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚å¯¹è±¡çš„è®¿é—®å®šä½å¥æŸ„è®¿é—®åœ¨Javaå †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜ä½œä¸ºå¥æŸ„æ± ã€‚Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†åˆ°å¯¹è±¡å®žä¾‹æ•°æ®çš„æŒ‡é’ˆå’Œåˆ°å¯¹è±¡ç±»åž‹æ•°æ®çš„æŒ‡é’ˆã€‚å¯¹è±¡å®žä¾‹æ•°æ®åœ¨Javaå †ä¸­ï¼Œå¯¹è±¡ç±»åž‹æ•°æ®åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ä¸­ã€‚ä¼˜ç‚¹ï¼šåœ¨å¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®žä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œå¯¹è±¡å¼•ç”¨æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚ç›´æŽ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotä½¿ç”¨ï¼‰Javaæ ˆä¸Šçš„å¯¹è±¡å¼•ç”¨referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„ç›´æŽ¥åœ°å€ã€‚åœ¨å †ä¸­çš„å¯¹è±¡å®žä¾‹æ•°æ®å°±éœ€è¦åŒ…å«åˆ°å¯¹è±¡ç±»åž‹æ•°æ®çš„æŒ‡é’ˆã€‚ä¼˜ç‚¹ï¼šèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œé€Ÿåº¦æ›´å¿«ã€‚ä¸‰ã€åžƒåœ¾æ”¶é›†æ¦‚è¿°åžƒåœ¾æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹Javaå †å’Œæ–¹æ³•åŒºã€‚ç¨‹åºè®¡æ•°å™¨ã€Javaè™šæ‹Ÿæœºæ ˆä¸ªæœ¬åœ°æ–¹æ³•æ ˆä¸‰ä¸ªåŒºåŸŸå±žäºŽçº¿ç¨‹ç§æœ‰ï¼Œçº¿ç¨‹æˆ–æ–¹æ³•ç»“æŸä¹‹åŽå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä¸éœ€è¦å¯¹è¿™ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œåžƒåœ¾å›žæ”¶ã€‚åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›žæ”¶ç¬¬ä¸€æ¬¡æ ‡è®°ï¼ˆç¼“åˆ‘ï¼‰å¼•ç”¨è®¡æ•°ç®—æ³•ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“å¯¹è±¡å¢žåŠ ä¸€ä¸ªå¼•ç”¨æ—¶å¼•ç”¨è®¡æ•°å€¼++ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å¼•ç”¨è®¡æ•°å€¼â€“ï¼Œå¼•ç”¨è®¡æ•°å€¼ä¸º0æ—¶å¯¹è±¡å¯ä»¥è¢«å›žæ”¶ã€‚ä½†æ˜¯å®ƒéš¾ä»¥è§£å†³å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¾ªçŽ¯å¼•ç”¨çš„æƒ…å†µï¼Œæ­¤æ—¶è¿™ä¸ªä¸¤ä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°å€¼ä¸º1ï¼Œä½†æ˜¯æ°¸è¿œæ— æ³•ç”¨åˆ°è¿™ä¸¤ä¸ªå¯¹è±¡ã€‚ å¯è¾¾æ€§åˆ†æžç®—æ³•ï¼ˆJavaä½¿ç”¨ï¼‰ ä»¥ä¸€ç³»åˆ—GC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»Žè¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿žæ˜¯ï¼Œåˆ™è¯æ˜Žæ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œå¯ä»¥è¢«å›žæ”¶ã€‚GC Rootså¯¹è±¡åŒ…æ‹¬è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆæ¡¢ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚æ–¹æ³•åŒºä¸­å…±ç±»é™æ€å±žæ€§å¼•ç”¨çš„å¯¹è±¡ã€‚æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚ç¬¬äºŒæ¬¡æ ‡è®°å½“å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•ï¼Œæˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ã€‚å¦‚æžœå¯¹è±¡åœ¨finalizeæ–¹æ³•ä¸­é‡æ–°ä¸Žå¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”åˆ™å°†ä¸ä¼šè¢«å›žæ”¶ã€‚finalize()ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•éƒ½åªä¼šè¢«ç³»ç»Ÿè°ƒç”¨ä¸€æ¬¡ã€‚å®ƒçš„å‡ºçŽ°æ˜¯ä¸€ä¸ªå¦¥åï¼Œè¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œæ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºã€‚finalize()èƒ½åšçš„æ‰€æœ‰å·¥ä½œä½¿ç”¨try-finallyæˆ–è€…å…¶ä»–æ–¹å¼éƒ½å¯ä»¥åšçš„æ›´å¥½ï¼Œå®Œå…¨å¯ä»¥å¿˜è®°åœ¨è¿™ä¸ªå‡½æ•°çš„å­˜åœ¨ã€‚æ–¹æ³•åŒºçš„å›žæ”¶åœ¨æ–¹æ³•åŒºè¿›è¡Œåžƒåœ¾å›žæ”¶çš„æ€§ä»·æ¯”ä¸€èˆ¬æ¯”è¾ƒä½Žã€‚ä¸»è¦å›žæ”¶ä¸¤éƒ¨åˆ†ï¼ŒåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚æ»¡è¶³æ— ç”¨çš„ç±»ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶æ‰ä»…ä»…ä»£è¡¨å¯ä»¥è¿›è¡Œå›žæ”¶ï¼Œä¸æ˜¯å¿…ç„¶å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨-Xnoclassgcå‚æ•°æŽ§åˆ¶ã€‚è¯¥ç±»çš„æ‰€æœ‰å®žä¾‹éƒ½å·²ç»è¢«å›žæ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®žä¾‹ã€‚åŠ è½½è¯¥ç±»çš„ClassLoaderå·²ç»è¢«å›žæ”¶ã€‚è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®åˆ°è¯¥ç±»çš„æ–¹æ³•ã€‚å¼•ç”¨ç±»åž‹å¼ºå¼•ç”¨ä½¿ç”¨newä¸€ä¸ªæ–°å¯¹è±¡çš„æ–¹å¼æ¥åˆ›å»ºå¼ºå¼•ç”¨ã€‚åªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åˆ™æ°¸è¿œä¸ä¼šè¢«å›žæ”¶ã€‚è½¯å¼•ç”¨ä½¿ç”¨SoftReferenceç±»æ¥å®žçŽ°è½¯å¼•ç”¨ã€‚ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†æ˜¯å¹¶éžå¿…é¡»çš„å¯¹è±¡ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨å°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ä¼šè¢«å›žæ”¶ã€‚å¼±å¼•ç”¨ä½¿ç”¨WeakReferenceç±»æ¥å®žçŽ°å¼±å¼•ç”¨ã€‚å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡åžƒåœ¾æ”¶é›†æ—¶ä¼šè¢«å›žæ”¶ã€‚è™šå¼•ç”¨ä½¿ç”¨PhantomReferenceç±»æ¥å®žçŽ°è™šå¼•ç”¨ã€‚æœ€å¼±çš„å¼•ç”¨å…³ç³»ï¼Œä¸ä¼šå¯¹è¢«å¼•ç”¨çš„å¯¹è±¡ç”Ÿå­˜æ—¶é—´æž„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®žä¾‹ã€‚å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›žæ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚åžƒåœ¾æ”¶é›†ç®—æ³•æ ‡è®° - æ¸…é™¤é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›žæ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®ŒæˆåŽç»Ÿä¸€å›žæ”¶è¢«æ ‡è®°çš„å¯¹è±¡å¹¶å–æ¶ˆæ ‡è®°ã€‚ä¸è¶³ï¼šæ•ˆçŽ‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ•ˆçŽ‡éƒ½ä¸é«˜ã€‚ç©ºé—´é—®é¢˜ï¼Œæ ‡è®°æ¸…é™¤ä¹‹åŽä¼šäº§ç”Ÿå¤§é‡ä¸è¿žç»­çš„å†…å­˜ç¢Žç‰‡ï¼Œæ²¡æœ‰è¿žç»­å†…å­˜å®¹çº³è¾ƒå¤§å¯¹è±¡è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åžƒåœ¾æ”¶é›†ã€‚æ ‡è®° - æ•´ç†å’Œæ ‡è®° - æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä½†æ ‡è®°ä¹‹åŽè®©æ‰€æœ‰å­˜æ´»å¯¹è±¡éƒ½å‘ä¸€æ®µç§»åŠ¨ï¼Œç„¶åŽç›´æŽ¥æ¸…ç†æŽ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚è§£å†³äº†æ ‡è®° - æ¸…é™¤ç®—æ³•çš„ç©ºé—´é—®é¢˜ï¼Œä½†éœ€è¦ç§»åŠ¨å¤§é‡å¯¹è±¡ï¼Œè¿˜æ˜¯å­˜åœ¨æ•ˆçŽ‡é—®é¢˜ã€‚å¤åˆ¶å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åŽå†æŠŠå·²ä½¿ç”¨å¤šçš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æŽ‰ã€‚ä»£ä»·æ˜¯å°†å†…å­˜ç¼©å°ä¸ºåŽŸæ¥çš„ä¸€èˆ¬ï¼Œå¤ªé«˜äº†ã€‚çŽ°åœ¨å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨è¿™ç§ç®—æ³•ç”¨äºŽæ–°ç”Ÿä»£ã€‚å› ä¸ºæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡98%éƒ½æ˜¯æœç”Ÿæš®æ­»ï¼Œæ‰€ä»¥å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨Edenå’Œå…¶ä¸­ä¸€å—Survivorç©ºé—´ã€‚å½“å›žæ”¶æ—¶ï¼Œå¦‚æžœå¦å¤–ä¸€å—Survivorç©ºé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡æ—¶ï¼Œè¿™äº›å¯¹è±¡å°†ç›´æŽ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£ã€‚åˆ†ä»£æ”¶é›†ä¸€èˆ¬æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚åœ¨æ–°ç”Ÿä»£ä¸­ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œåœ¨è€å¹´ä»£ä¸­ä½¿ç”¨æ ‡è®° -æ¸…é™¤ æˆ–è€… æ ‡è®° - æ•´ç† ç®—æ³•æ¥è¿›è¡Œå›žæ”¶ã€‚HotSpotçš„ç®—æ³•å®žçŽ°æžšä¸¾æ ¹èŠ‚ç‚¹ï¼ˆGC Rootsï¼‰ç›®å‰ä¸»æµJavaè™šæ‹Ÿæœºä½¿ç”¨çš„éƒ½æ˜¯å‡†ç¡®å¼GCã€‚GCåœé¡¿çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡OopMapæ•°æ®ç»“æž„ï¼ˆæ˜ å°„è¡¨ï¼‰çŸ¥é“ï¼Œåœ¨å¯¹è±¡å†…çš„ä»€ä¹ˆåç§»é‡ä¸Šæ˜¯ä»€ä¹ˆç±»åž‹çš„æ•°æ®ï¼Œè€Œä¸”ç‰¹å®šçš„ä½ç½®è®°å½•ç€æ ˆå’Œå¯„å­˜å™¨ä¸­å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ã€‚å› æ­¤å¯ä»¥å¿«é€Ÿä¸”å‡†ç¡®çš„å®ŒæˆGC Rootsæžšä¸¾ã€‚å®‰å…¨ç‚¹ä¸ºäº†èŠ‚çœGCçš„ç©ºé—´æˆæœ¬ï¼Œå¹¶ä¸ä¼šä¸ºæ¯æ¡æŒ‡ä»¤éƒ½ç”ŸæˆOopMapï¼Œåªæ˜¯åœ¨â€œç‰¹å®šçš„ä½ç½®â€è®°å½•OopMapï¼Œè¿™äº›ä½ç½®ç§°ä¸ºå®‰å…¨ç‚¹ã€‚ç¨‹åºæ‰§è¡Œåªæœ‰åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰èƒ½æš‚åœï¼Œåˆ°è¾¾å®‰å…¨ç‚¹æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚æŠ¢æ–­å¼ä¸­æ–­ï¼ˆå‡ ä¹Žä¸ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰çº¿ç¨‹ä¸­æ–­ï¼Œå¦‚æžœæœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤è¯¥çº¿ç¨‹ï¼Œè®©ä»–è·‘åˆ°å®‰å…¨ç‚¹ã€‚ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆä¸»è¦ä½¿ç”¨ï¼‰ã€‚GCæ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°å®‰å…¨ç‚¹æ—¶è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘çŽ°æ ‡å¿—ä¸ºç›´åˆ™æŒ‚èµ·çº¿ç¨‹ã€‚ä½†æ˜¯å½“çº¿ç¨‹sleepæˆ–blockedæ—¶æ— æ³•å“åº”JVMçš„ä¸­æ–­è¯·æ±‚èµ°åˆ°å®‰å…¨ç‚¹ä¸­æ–­æŒ‚èµ·ï¼Œæ‰€ä»¥å¼•å‡ºå®‰å…¨åŒºåŸŸã€‚å®‰å…¨åŒºåŸŸå®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯æ‰©å±•çš„å®‰å…¨ç‚¹ã€‚çº¿ç¨‹è¿›å…¥å®‰å…¨åŒºåŸŸæ—¶è¡¨ç¤ºè‡ªå·±è¿›å…¥äº†å®‰å…¨åŒºåŸŸï¼Œè¿™ä¸ªå‘ç”ŸGCæ—¶ï¼ŒJVMå°±ä¸éœ€è¦ç®¡è¿™ä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹ç¦»å¼€å®‰å…¨åŒºåŸŸæ—¶ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®ŒæˆGCè¿‡ç¨‹ï¼Œæ²¡æœ‰å°±ç­‰å¾…å¯ä»¥ç¦»å¼€å®‰å…¨åŒºåŸŸçš„ä¿¡å·ä¸ºæ­¢ï¼Œå¦è€…ç»§ç»­æ‰§è¡Œã€‚åžƒåœ¾æ”¶é›†å™¨æ–°ç”Ÿä»£serialæ”¶é›†å™¨å®ƒæ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œåªä¼šä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œåžƒåœ¾æ”¶é›†å·¥ä½œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒåœ¨è¿›è¡Œåžƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚ä¼˜ç‚¹ï¼šå¯¹æ¯”å…¶ä»–å•çº¿ç¨‹æ”¶é›†å™¨ç®€å•é«˜æ•ˆï¼Œå¯¹äºŽå•ä¸ªCPUçŽ¯å¢ƒæ¥è¯´ï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå› æ­¤æ‹¥æœ‰æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆçŽ‡ã€‚å®ƒæ˜¯Clientåœºæ™¯ä¸‹é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå› ä¸ºåœ¨è¯¥åœºæ™¯ä¸‹å†…å­˜ä¸€èˆ¬æ¥è¯´ä¸ä¼šå¾ˆå¤§ã€‚ parnewæ”¶é›†å™¨ å®ƒæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå…¬ç”¨äº†ç›¸å½“å¤šçš„ä»£ç ã€‚ åœ¨å•CPUçŽ¯å¢ƒä¸­ç»å¯¹ä¸ä¼šæœ‰æ¯”Serialæ”¶é›†å™¨æ›´å¥½çš„æ•ˆæžœï¼Œç”šè‡³åœ¨2ä¸ªCPUçŽ¯å¢ƒä¸­ä¹Ÿä¸èƒ½ç™¾åˆ†ä¹‹ç™¾è¶…è¶Šã€‚å®ƒæ˜¯Serveråœºæ™¯ä¸‹é»˜è®¤çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œä¸»è¦å› ä¸ºé™¤äº†Serialæ”¶é›†å™¨ï¼Œåªç”¨å®ƒèƒ½ä¸ŽCMSæ”¶é›†å™¨é…åˆä½¿ç”¨ã€‚ parallel scavengeæ”¶é›†å™¨ â€œåžåä¼˜å…ˆâ€æ”¶é›†å™¨ï¼Œä¸ŽParNewæ”¶é›†å™¨å·®ä¸å¤šã€‚ ä½†æ˜¯å…¶ä»–æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯å°½å¯èƒ½ç¼©çŸ­åžƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹åœé¡¿çš„æ—¶é—´ï¼Œè€Œå®ƒçš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æŽ§åˆ¶çš„åžåé‡ã€‚è¿™é‡Œçš„åžåé‡æŒ‡CPUç”¨äºŽè¿è¡Œç”¨æˆ·ç¨‹åºçš„æ—¶é—´å æ€»æ—¶é—´çš„æ¯”å€¼ã€‚è€å¹´ä»£serial oldæ”¶é›†å™¨æ˜¯Serialæ”¶é›†å™¨è€å¹´ä»£ç‰ˆæœ¬ã€‚ä¹Ÿæ˜¯ç»™Clientåœºæ™¯ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨çš„ã€‚ parallel oldæ”¶é›†å™¨ æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚ åœ¨æ³¨é‡åžåé‡å·²ç»CPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘Parallel Scavengeå’ŒParallel Oldæ”¶é›†å™¨ã€‚ cmsæ”¶é›†å™¨ Concurrent Mark Sweepæ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥èŽ·å–æœ€çŸ­å›žæ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚ è¿ä½œè¿‡ç¨‹ åˆå§‹æ ‡è®°ï¼ˆæœ€çŸ­ï¼‰ã€‚ä»éœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æŽ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«å¹¶å‘æ ‡è®°ï¼ˆè€—æ—¶æœ€é•¿ï¼‰ã€‚è¿›è¡ŒGC Roots Tracingï¼ˆæ ¹æœç´¢ç®—æ³•ï¼‰çš„è¿‡ç¨‹ã€‚é‡æ–°æ ‡è®°ã€‚ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚æ¯”åˆå§‹æ ‡è®°é•¿ä½†è¿œå°äºŽå¹¶å‘æ ‡è®°æ—¶é—´ã€‚å¹¶å‘æ¸…é™¤1 å’Œ4 ä¸¤ä¸ªæ­¥éª¤å¹¶æ²¡æœ‰å¸¦ä¸Šå¹¶å‘ä¸¤ä¸ªå­—ï¼Œå³è¿™ä¸¤ä¸ªæ­¥éª¤ä»è¦æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚ ä¼˜ç¼ºç‚¹ å¹¶å‘æ”¶é›†ã€ä½Žåœé¡¿ã€‚CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéžå¸¸æ•æ„Ÿã€‚è™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œä½†æ˜¯å ç”¨CPUèµ„æºä¼šä½¿åº”ç”¨ç¨‹åºå˜æ…¢ã€‚æ— æ³•å¤„ç†æµ®åŠ¨åžƒåœ¾ã€‚åœ¨å¹¶å‘æ¸…é™¤é˜¶æ®µæ–°åžƒåœ¾è¿˜ä¼šä¸æ–­çš„äº§ç”Ÿï¼Œæ‰€ä»¥GCæ—¶è¦æŽ§åˆ¶â€œ-XX:CMSinitiatingOccupancyFractionå‚æ•°â€é¢„ç•™è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™è¿™äº›åžƒåœ¾ï¼Œå½“é¢„ç•™å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦æ—¶å°±ä¼šå‡ºçŽ°â€Concurrent Mode Failureâ€œå¤±è´¥ï¼Œä¸´æ—¶å¯åŠ¨Serial Oldæ”¶é›†ã€‚ç”±äºŽä½¿ç”¨æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼Œæ”¶é›†ä¹‹åŽä¼šäº§ç”Ÿå¤§é‡ç©ºé—´ç¢Žç‰‡ã€‚g1æ”¶é›†å™¨Garbage Firstæ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åžƒåœ¾æ”¶é›†å™¨è¿ä½œè¿‡ç¨‹åˆå§‹æ ‡è®°å¹¶å‘æ ‡è®°æœ€ç»ˆæ ‡è®°åˆ é€‰æ ‡è®°äº”ã€ç±»åŠ è½½æœºåˆ¶æ¦‚è¿°è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»ŽClassé—®ä»·åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æžå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æŽ¥ä½¿ç”¨çš„Javaç±»åž‹ã€‚Javaåº”ç”¨ç¨‹åºçš„é«˜åº¦çµæ´»æ€§å°±æ˜¯ä¾èµ–è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿žæŽ¥å®žçŽ°çš„ã€‚ç±»çš„ç”Ÿå‘½å‘¨æœŸåŠ è½½ -&gt; è¿žæŽ¥ï¼ˆéªŒè¯ -&gt; å‡†å¤‡ -&gt; è§£æžï¼‰ -&gt; åˆå§‹åŒ– -&gt; ä½¿ç”¨ - &gt;å¸è½½ç±»åˆå§‹åŒ–æ—¶æœºä¸»åŠ¨å¼•ç”¨è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰å¼ºåˆ¶çº¦æŸä½•æ—¶è¿›è¡ŒåŠ è½½ï¼Œä½†æ˜¯è§„å®šäº†æœ‰ä¸”åªæœ‰äº”ç§æƒ…å†µå¿…é¡»å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ˆåŠ è½½ã€éªŒè¯ã€å‡†å¤‡éƒ½ä¼šéšä¹‹å‘ç”Ÿï¼‰é‡åˆ°newã€getstaticã€putstaticã€invokestaticè¿™å››æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚åå°„è°ƒç”¨æ—¶æ²¡æœ‰åˆå§‹åŒ–ã€‚å‘çŽ°å…¶çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–åˆ™å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚åŒ…å«psvmï¼ˆmianï¼ˆï¼‰æ–¹æ³•ï¼‰çš„é‚£ä¸ªç±»ã€‚åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼ŒREF_getStaticã€REF_putStaticã€REF_invokeStaticçš„æ–¹æ³•å¥æŸ„ã€‚è¢«åŠ¨å¼•ç”¨é™¤ä¸Šé¢äº”ç§æƒ…å†µä¹‹å¤–ï¼Œæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»çš„åˆå§‹åŒ–ã€‚é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ã€‚è¯¥è¿‡ç¨‹ä¼šå¯¹æ•°ç»„ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œæ•°ç»„ç±»æ˜¯ä¸€ä¸ªç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿæˆçš„ã€ç›´æŽ¥ç»§æ‰¿Objectçš„å­ç±»ï¼Œå…¶ä¸­åŒ…å«æ•°ç»„çš„å±žæ€§å’Œæ–¹æ³•ï¼Œç”¨æˆ·åªèƒ½ä½¿ç”¨publicçš„lengthå’Œclone()ã€‚å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æŽ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–ã€‚ç±»åŠ è½½è¿‡ç¨‹åŠ è½½é€šè¿‡ç±»çš„å…¨é™å®šåæ¥èŽ·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æž„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æž„ã€‚åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼ˆHotSpotå°†å…¶å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼‰ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚éªŒè¯ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚ç±»ä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚å¯ä»¥é€šè¿‡-Xverify:noneå…³é—­å¤§éƒ¨åˆ†ç±»éªŒè¯ã€‚æ–‡ä»¶æ ¼å¼éªŒè¯ã€‚ç¡®ä¿è¾“å…¥å­—èŠ‚æµèƒ½æ­£ç¡®çš„è§£æžå¹¶å­˜å‚¨äºŽæ–¹æ³•åŒºï¼ŒåŽé¢çš„3ä¸ªéªŒè¯å…¨éƒ¨åŸºäºŽæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æž„è¿›è¡Œï¼Œä¸ä¼šå†æ“ä½œå­—èŠ‚æµã€‚å…ƒæ•°æ®éªŒè¯ã€‚å¯¹å­—èŠ‚ç æè¿°ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æžï¼Œç¡®ä¿å…¶ç¬¦åˆJavaè¯­æ³•è§„èŒƒã€‚ï¼ˆJavaè¯­æ³•éªŒè¯ï¼‰å­—èŠ‚ç éªŒè¯ã€‚æœ€å¤æ‚ï¼Œé€šè¿‡æ•°æ®æµå’ŒæŽ§åˆ¶æµåˆ†æžï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ—¶åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚å¯ä»¥é€šè¿‡å‚æ•°å…³é—­ã€‚ï¼ˆéªŒè¯æŒ‡ä»¤è·³è½¬èŒƒå›´ï¼Œç±»åž‹è½¬æ¢æœ‰æ•ˆç­‰ï¼‰ç¬¦å·å¼•ç”¨éªŒè¯ã€‚å°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æŽ¥å¼•ç”¨ï¼Œå‘ç”Ÿåœ¨ç¬¬ä¸‰ä¸ªé˜¶æ®µâ€”â€”è§£æžé˜¶æ®µä¸­å‘ç”Ÿã€‚å‡†å¤‡ç±»å˜é‡æ˜¯è¢«staticä¿®é¥°çš„å˜é‡ï¼Œå‡†å¤‡é˜¶æ®µä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®é›¶å€¼ï¼ˆfinalç›´æŽ¥è®¾ç½®åˆå§‹å€¼ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯æ–¹æ³•åŒºçš„å†…å­˜ã€‚è§£æžå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚å…¶ä¸­è§£æžè¿‡ç¨‹åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åŽå†å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒJavaçš„åŠ¨æ€ç»‘å®šã€‚è§£æžåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æŽ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æŽ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»åž‹ã€æ–¹æ³•å¥æŸ„ã€å’Œè°ƒç”¨ç‚¹é™å®šç¬¦ã€‚åˆå§‹åŒ–åˆå§‹åŒ–é˜¶æ®µæ‰çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ï¼Œæ˜¯æ‰§è¡Œç±»æž„é€ å™¨()æ–¹æ³•çš„è¿‡ç¨‹ã€‚åœ¨å‡†å¤‡é˜¶æ®µï¼Œç±»å˜é‡å·²ç»ç»™è¿‡é›¶å€¼ï¼Œè€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œæ ¹æ®ç¨‹åºå‘˜é€šè¿‡ç¨‹åºåˆ¶å®šçš„ä¸»è§‚è®¡åˆ’åŽ»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºã€‚()ç±»æž„é€ å™¨æ–¹æ³•ã€‚æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ä¸­çš„çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚ä¸éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»æž„é€ å™¨ï¼ŒJVMä¼šä¿è¯åœ¨å­ç±»clinitæ‰§è¡Œä¹‹å‰ï¼Œçˆ¶ç±»çš„clinitå·²ç»æ‰§è¡Œå®Œæˆã€‚æŽ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æŽ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æŽ¥å£çš„c æŽ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ä½†ä»å¯ä»¥æœ‰ç±»å˜é‡çš„èµ‹å€¼æ“ä½œã€‚å½“æ²¡æœ‰ä½¿ç”¨çˆ¶æŽ¥å£ä¸­å®šä¹‰çš„å˜é‡æ—¶å­æŽ¥å£çš„clinitä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æŽ¥å£çš„clinitæ–¹æ³•ã€‚æŽ¥å£çš„å®žçŽ°ç±»ä¹Ÿä¸ä¼šæ‰§è¡ŒæŽ¥å£çš„clinitæ–¹æ³•ã€‚ è™šæ‹Ÿæœºä¼šä¿è¯clinitåœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ã€‚å…¶ä»–çº¿æ€§å”¤é†’ä¹‹åŽä¸ä¼šå†è¿›å…¥clinitæ–¹æ³•ï¼ŒåŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»åž‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚ &lt;init&gt;() å¯¹è±¡æž„é€ å™¨æ–¹æ³•ã€‚Javaå¯¹è±¡è¢«åˆ›å»ºæ—¶æ‰ä¼šè¿›è¡Œå®žä¾‹åŒ–æ“ä½œï¼Œå¯¹éžé™æ€å˜é‡è§£æžåˆå§‹åŒ–ã€‚ä¼šæ˜¾å¼çš„è°ƒç”¨çˆ¶ç±»çš„initæ–¹æ³•ï¼Œå¯¹è±¡å®žä¾‹åŒ–è¿‡ç¨‹ä¸­å¯¹å®žä¾‹åŸŸçš„åˆå§‹åŒ–æ“ä½œå…¨éƒ¨åœ¨initæ–¹æ³•ä¸­è¿›è¡Œã€‚ç±»ï¼ˆåŠ è½½ï¼‰ å™¨ç±»ä¸Žç±»åŠ è½½å™¨ç±»åŠ è½½å™¨å®žçŽ°ç±»çš„åŠ è½½åŠ¨ä½œã€‚ç±»åŠ è½½å™¨å’Œè¿™ä¸ªç±»æœ¬èº«ä¸€åŒç¡®ç«‹è¿™ä¸ªç±»çš„å”¯ä¸€æ€§ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰ç‹¬ç«‹çš„ç±»å‘½åç©ºé—´ã€‚åœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ä¸¤ä¸ªç±»ç›¸ç­‰ã€‚ç›¸ç­‰åŒ…æ‹¬ç±»çš„Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()ã€instanceofå…³é”®å­—ã€‚ç±»åŠ è½½å™¨åˆ†ç±»å¯åŠ¨ç±»åŠ è½½å™¨ç”±C++è¯­è¨€å®žçŽ°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ã€‚è´Ÿè´£å°†JAVA_HOME/libç›®å½•ä¸­ï¼Œæˆ–è€…è¢«-Xbootclasspathå‚æ•°æŒ‡å®šçš„è·¯å¾„ï¼Œä½†æ˜¯æ–‡ä»¶åè¦èƒ½è¢«è™šæ‹Ÿæœºè¯†åˆ«ï¼Œåå­—ä¸ç¬¦åˆæ— æ³•è¢«å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ã€‚å¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢«Javaç¨‹åºç›´æŽ¥å¼•ç”¨ã€‚æ‰©å±•ç±»åŠ è½½å™¨ç”±Javaè¯­è¨€å®žçŽ°ï¼Œè´Ÿè´£åŠ è½½JAVA_HOME/lib/extç›®å½•ï¼Œæˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ‰€æœ‰ç±»åº“ï¼Œå¼€å‘è€…å¯ä»¥ç›´æŽ¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ã€‚åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ç”±äºŽè¿™ä¸ªç±»åŠ è½½å™¨æ˜¯ClassLoaderä¸­çš„getSystemClassLoader()æ–¹æ³•çš„è¿”å›žå€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿç§°ä»–ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ï¼ˆClassPathï¼‰ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç”±ç”¨æˆ·è‡ªå·±å®žçŽ°ã€‚å¦‚æžœä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡åž‹ï¼Œé‚£ä¹ˆåªéœ€è¦é‡å†™findClassæ–¹æ³•å³å¯ã€‚å¦åˆ™å°±é‡å†™æ•´ä¸ªloadClassæ–¹æ³•ã€‚åŒäº²å§”æ´¾æ¨¡åž‹åŒäº²å§”æ´¾æ¨¡åž‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”è¯¥æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚çˆ¶å­ä¸ä¼šä»¥ç»§æ‰¿çš„å…³ç³»ç±»å®žçŽ°ï¼Œè€Œæ˜¯éƒ½æ˜¯ä½¿ç”¨ç»„åˆå…³ç³»æ¥æœç”¨çˆ¶åŠ è½½å™¨çš„ä»£ç ã€‚åœ¨java.lang.ClassLoaderçš„loadClass()æ–¹æ³•ä¸­å®žçŽ°ã€‚å·¥ä½œè¿‡ç¨‹ä¸€ä¸ªç±»åŠ è½½å™¨é¦–å…ˆå°†ç±»åŠ è½½è¯·æ±‚è½¬å‘åˆ°çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦çš„ç±»ï¼‰æ—¶æ‰å°è¯•è‡ªå·±åŠ è½½å¥½å¤„Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œä»Žè€Œä½¿å¾—åŸºç¡€ç±»åº“å¾—åˆ°åŒæ„ã€‚å››ã€å†…å­˜åˆ†é…ä¸Žå›žæ”¶ç­–ç•¥Minor GC å’Œ Full GCMinor GCå‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åžƒåœ¾æ”¶é›†åŠ¨ä½œï¼Œå› ä¸ºæ–°ç”Ÿä»£å¯¹è±¡å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œå› æ­¤Minor GCä¼šé¢‘ç¹æ‰§è¡Œï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ã€‚æ—¶æœºEdenä¸è¶³Full GCå‘ç”Ÿåœ¨è€å¹´åŒºçš„GCï¼Œå‡ºçŽ°Full GCæ—¶å¾€å¾€ä¼´éšç€Minor GCï¼Œæ¯”Minor GCæ…¢10å€ä»¥ä¸Šã€‚æ—¶æœºè°ƒç”¨System.gc()åªæ˜¯å»ºè®®è™šæ‹Ÿæœºæ‰§è¡ŒFull GCï¼Œä½†æ˜¯è™šæ‹Ÿæœºä¸ä¸€å®šçœŸæ­£åŽ»æ‰§è¡Œã€‚ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯è®©è™šæ‹Ÿæœºç®¡ç†å†…å­˜ã€‚è€å¹´ä»£ç©ºé—´ä¸è¶³å¸¸è§åœºæ™¯å°±æ˜¯å¤§å¯¹è±¡å’Œé•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£ã€‚å°½é‡é¿å…åˆ›å»ºè¿‡å¤§çš„å¯¹è±¡ä»¥åŠæ•°ç»„ï¼Œè°ƒå¤§æ–°ç”Ÿä»£å¤§å°ï¼Œè®©å¯¹è±¡å°½é‡å’‹æ–°ç”Ÿä»£ä¸­è¢«å›žæ”¶ï¼Œä¸è¿›å…¥è€å¹´ä»£ã€‚JDK1.7 ä¹‹å‰æ–¹æ³•åŒºç©ºé—´ä¸è¶³å½“ç³»ç»Ÿä¸­è¦åŠ è½½çš„ç±»ã€åå°„çš„ç±»å’Œå¸¸é‡è¾ƒå¤šæ—¶ï¼Œæ°¸ä¹…ä»£å¯èƒ½ä¼šè¢«å æ»¡ï¼Œåœ¨æœªé…ç½®CMS GCçš„æƒ…å†µä¸‹ä¹Ÿä¼šæ‰§è¡ŒFull GCï¼Œå¦‚æžœç©ºé—´ä»ç„¶ä¸å¤Ÿåˆ™ä¼šæŠ›å‡ºOOMå¼‚å¸¸ã€‚å¯é‡‡ç”¨å¢žå¤§æ–¹æ³•åŒºç©ºé—´æˆ–è½¬ä¸ºä½¿ç”¨CMS GCã€‚ç©ºé—´åˆ†é…æ‹…ä¿å¤±è´¥å‘ç”ŸMinor GCæ—¶åˆ†é…æ‹…ä¿çš„ä¸¤ä¸ªåˆ¤æ–­å¤±è´¥Concurrent Mode FailureCMS GC å¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œä¸æ–­æœ‰æ–°çš„æµ®åŠ¨åžƒåœ¾äº§ç”Ÿï¼Œå½“é¢„ç•™ç©ºé—´ä¸è¶³æ—¶æŠ¥Concurrent Mode Failureé”™è¯¯å¹¶è§¦å‘Full GCã€‚å†…å­˜åˆ†é…ç­–ç•¥å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£Edenä¸Šåˆ†é…ï¼Œå½“Edenç©ºé—´ä¸å¤Ÿæ—¶ï¼Œå‘èµ·Minor GCï¼Œå½“å¦å¤–ä¸€ä¸ªSurvivorç©ºé—´ä¸è¶³æ—¶åˆ™å°†å­˜æ´»å¯¹è±¡é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£ã€‚å¤§å¯¹è±¡ç›´æŽ¥è¿›å…¥è€å¹´ä»£é…ç½®å‚æ•°-XX:PretenureSizeThresholdï¼Œå¤§äºŽæ­¤å€¼å¾—å¯¹è±¡ç›´æŽ¥åœ¨è€å¹´ä»£åˆ†é…ï¼Œé¿å…åœ¨Edenå’ŒSurvivorä¹‹é—´çš„å¤§é‡å†…å­˜å¤åˆ¶ã€‚é•¿æœŸå­˜æ´»å¯¹è±¡è¿›å…¥è€å¹´ä»£è™šæ‹Ÿæœºä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªAgeè®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨Edenå‡ºç”Ÿå¹¶ç»è¿‡Minor GCå­˜æ´»è½¬ç§»åˆ°å¦ä¸€ä¸ªSurvivorç©ºé—´ä¸­æ—¶Age++ï¼Œå¢žåŠ åˆ°é»˜è®¤16åˆ™è½¬ç§»åˆ°è€å¹´ä»£ã€‚åŠ¨æ€å¯¹è±¡å¹´é¾„ç»‘å®šè™šæ‹Ÿæœºå¹¶ä¸æ˜¯æ°¸è¿œè¦æ±‚å¯¹è±¡çš„å¹´é¾„å¿…é¡»åˆ°è¾¾MaxTenuringThresholdæ‰èƒ½æ™‹å‡è€å¹´ä»£ï¼Œå¦‚æžœåœ¨Survivorä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°æ€»å’Œå¤§äºŽSurvivorç©ºé—´çš„ä¸€åŠï¼Œåˆ™å¹´é¾„å¤§äºŽæˆ–ç­‰äºŽè¯¥å¹´é¾„çš„å¯¹è±¡ç›´æŽ¥è¿›å…¥è€å¹´ä»£ã€‚ç©ºé—´åˆ†é…æ‹…ä¿åœ¨å‘ç”ŸMinor GCä¹‹å‰ï¼Œè™šæ‹Ÿæœºå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿žç»­ç©ºé—´æ˜¯å¦å¤§äºŽæ–°ç”Ÿä»£çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æžœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆMinor GCå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚å¯ä»¥é€šè¿‡HandlePromotionFailureå‚æ•°è®¾ç½®å…è®¸å†’é™©ï¼Œæ­¤æ—¶è™šæ‹Ÿæœºå°†ä¸ŽåŽ†ä»£æ™‹å‡åˆ°è€å¹´åŒºå¯¹è±¡çš„å¹³å‡å¤§å°æ¯”è¾ƒï¼Œä»å°äºŽåˆ™è¦è¿›è¡Œä¸€æ¬¡Full GCã€‚åœ¨JDK1.6.24ä¹‹åŽHandlePromotionFailureå·²æ— ä½œç”¨ï¼Œå³è™šæ‹Ÿæœºé»˜è®¤ä¸ºtrueã€‚]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Everything about ArrayList]]></title>
    <url>%2F2020%2F02%2F08%2FEverything-about-ArrayList%2F</url>
    <content type="text"><![CDATA[Java ArrayListåº•å±‚å®žçŽ°åŽŸç†æºç è¯¦ç»†åˆ†æžJdk8ArrayListæ˜¯åŸºäºŽæ•°ç»„å®žçŽ°çš„ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå…¶å®¹é‡èƒ½è‡ªåŠ¨å¢žé•¿ï¼Œç±»ä¼¼äºŽCè¯­è¨€ä¸­çš„åŠ¨æ€ç”³è¯·å†…å­˜ï¼ŒåŠ¨æ€å¢žé•¿å†…å­˜ã€‚ ArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåªèƒ½ç”¨åœ¨å•çº¿ç¨‹çŽ¯å¢ƒä¸‹ï¼Œå¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹å¯ä»¥è€ƒè™‘ç”¨Collections.synchronizedList(List l)å‡½æ•°è¿”å›žä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayListç±»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨concurrentå¹¶å‘åŒ…ä¸‹çš„CopyOnWriteArrayListç±»ã€‚ ArrayListå®žçŽ°äº†SerializableæŽ¥å£ï¼Œå› æ­¤å®ƒæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½å¤Ÿé€šè¿‡åºåˆ—åŒ–ä¼ è¾“ï¼Œå®žçŽ°äº†RandomAccessæŽ¥å£ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œå®žé™…ä¸Šå°±æ˜¯é€šè¿‡ä¸‹æ ‡åºå·è¿›è¡Œå¿«é€Ÿè®¿é—®ï¼Œå®žçŽ°äº†CloneableæŽ¥å£ï¼Œèƒ½è¢«å…‹éš†ã€‚ å­˜å‚¨ç»“æž„// å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸Žåºåˆ—åŒ–// è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ–transient Object[] elementData;Objectç±»åž‹æ•°ç»„ã€‚æ•°æ®åŸŸ1234567891011121314151617181920212223// åºåˆ—åŒ–ID private static final long serialVersionUID = 8683452581122892189L; // é»˜è®¤åˆå§‹å®¹é‡ private static final int DEFAULT_CAPACITY = 10; // ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºŽå¸¦å‚æž„é€ å‡½æ•°åˆå§‹åŒ–å’Œè¯»å–åºåˆ—åŒ–å¯¹è±¡ç­‰ã€‚ private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;; /** * å’Œå®˜æ–¹æ–‡æ¡£å†™çš„ä¸€æ ·ï¼ŒDEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ« * ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æž„é€ å’Œé»˜è®¤æž„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚ * å½“ç”¨æˆ·å¸¦å‚ä¸º0çš„æž„é€ ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œæ•°ç»„å®¹é‡growåˆ°1ã€‚ * å½“ç”¨æˆ·ä½¿ç”¨é»˜è®¤æž„é€ æ—¶ï¼Œç¬¬ä¸€æ¬¡addæ—¶ï¼Œå®¹é‡ç›´æŽ¥growåˆ°DEFAULT_CAPACITYï¼ˆ10ï¼‰ã€‚ */ private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;; // å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸Žåºåˆ—åŒ– // è¿™ä¸ªå…³é”®å­—æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯å½“åºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å†…å®¹å°†ä¸ä¼šè¢«åºåˆ—åŒ– transient Object[] elementData; // non-private to simplify nested class access // å½“å‰æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; // æ•°ç»„æœ€å¤§å¯åˆ†é…å®¹é‡ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; // é›†åˆæ•°ç»„ä¿®æ”¹æ¬¡æ•°çš„æ ‡è¯†ï¼ˆç”±AbstractListç»§æ‰¿ä¸‹æ¥ï¼‰ï¼ˆfail-fastæœºåˆ¶ï¼‰ protected transient int modCount = 0;ArrayListçš„æ— å‚æž„é€ å‡½æ•°ã€‚åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£çš„åˆ›å»º10ä¸ªç©ºé—´ï¼Œè¿™æ˜¯æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æž„é€ å’Œé»˜è®¤æž„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚modCountç”¨æ¥è®°å½•ArrayListç»“æž„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ã€‚ç”¨äºŽFail-Fastæœºåˆ¶æž„é€ å‡½æ•° 1234567891011121314151617181920212223242526272829303132public ArrayList() &#123; // åªæœ‰è¿™ä¸ªåœ°æ–¹ä¼šå¼•ç”¨DEFAULTCAPACITY_EMPTY_ELEMENTDATA this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; &#125; public ArrayList(int initialCapacity) &#123; if (initialCapacity &amp;gt; 0) &#123; this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; // ä½¿ç”¨ EMPTY_ELEMENTDATAï¼Œåœ¨å…¶ä»–çš„å¤šä¸ªåœ°æ–¹å¯èƒ½ä¼šå¼•ç”¨EMPTY_ELEMENTDATA this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException(&amp;quot;Illegal Capacity: &amp;quot;+ initialCapacity); &#125; &#125; public ArrayList(Collection&amp;lt;? extends E&amp;gt; c) &#123; // æŠŠä¼ å…¥é›†åˆä¼ åŒ–æˆ[]æ•°ç»„å¹¶æµ…æ‹·è´ç»™elementData elementData = c.toArray(); // è½¬åŒ–åŽçš„æ•°ç»„é•¿åº¦èµ‹ç»™å½“å‰ArrayListçš„size,å¹¶åˆ¤æ–­æ˜¯å¦ä¸º0 if ((size = elementData.length) != 0) &#123; //c.toArrayå¯èƒ½ä¸ä¼šè¿”å›ž Object[]ï¼Œå¯ä»¥æŸ¥çœ‹ java å®˜æ–¹ç¼–å·ä¸º 6260652 çš„ bug if (elementData.getClass() != Object[].class) // è‹¥ c.toArray() è¿”å›žçš„æ•°ç»„ç±»åž‹ä¸æ˜¯ Object[]ï¼Œåˆ™åˆ©ç”¨ Arrays.copyOf(); æ¥æž„é€ ä¸€ä¸ªå¤§å°ä¸º size çš„ Object[] æ•°ç»„ // æ­¤æ—¶elementDataæ˜¯æŒ‡å‘ä¼ å…¥é›†åˆçš„å†…å­˜ï¼Œè¿˜éœ€è¦åˆ›å»ºæ–°çš„å†…å­˜åŒºåŸŸæ·±æ‹·è´ç»™elementData elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // ä¼ å…¥æ•°ç»„sizeä¸ºé›¶æ›¿æ¢ç©ºæ•°ç»„ this.elementData = EMPTY_ELEMENTDATA; &#125; &#125; DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’ŒEMPTY_ELEMENTDATA çš„åŒºåˆ«ä»…ä»…æ˜¯ä¸ºäº†åŒºåˆ«ç”¨æˆ·å¸¦å‚ä¸º0çš„æž„é€ å’Œé»˜è®¤æž„é€ çš„æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ã€‚æ³¨æ„æ·±æ‹·è´å’Œæµ…æ‹·è´ã€‚å¸¦å‚ä¸º0çš„æž„é€ ä¼šæƒ°æ€§åˆå§‹åŒ–ï¼Œä¸ä¸º0çš„æž„é€ åˆ™ä¸ä¼šæƒ°æ€§åˆå§‹åŒ–ã€‚add()æºç è§£æž1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public boolean add(E e) &#123; // ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åŽè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ® ensureCapacityInternal(size + 1); // Increments modCount!! // æ•°ç»„çš„ä¸‹ä¸€ä¸ªindexå­˜æ”¾ä¼ å…¥å…ƒç´ ã€‚ elementData[size++] = e; // å§‹ç»ˆè¿”å›žtrueã€‚ return true;&#125;private void ensureCapacityInternal(int minCapacity) &#123; ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));&#125;private static int calculateCapacity(Object[] elementData, int minCapacity) &#123; // è¿™é‡Œå°±æ˜¯DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’Œ // EMPTY_ELEMENTDATA æœ€ä¸»è¦çš„åŒºåˆ«ã€‚ if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; // é»˜è®¤æž„é€ ç¬¬ä¸€æ¬¡addè¿”å›ž10ã€‚ return Math.max(DEFAULT_CAPACITY, minCapacity); &#125; // å¸¦å‚ä¸º0æž„é€ ç¬¬ä¸€æ¬¡addè¿”å›ž 1 ï¼ˆ0 + 1ï¼‰ã€‚ return minCapacity;&#125;private void ensureExplicitCapacity(int minCapacity) &#123; // è‡ªå¢žä¿®æ”¹è®¡æ•° modCount++; // overflow-conscious code // å½“å‰æ•°ç»„å®¹é‡å°äºŽéœ€è¦çš„æœ€å°å®¹é‡ if (minCapacity - elementData.length &amp;gt; 0) // å‡†å¤‡æ‰©å®¹æ•°ç»„ grow(minCapacity);&#125;private void grow(int minCapacity) &#123; // overflow-conscious code // èŽ·å¾—å½“å‰æ•°ç»„å®¹é‡ int oldCapacity = elementData.length; // æ–°æ•°ç»„å®¹é‡ä¸º1.5å€çš„æ—§æ•°ç»„å®¹é‡ int newCapacity = oldCapacity + (oldCapacity &amp;gt;&amp;gt; 1); if (newCapacity - minCapacity &amp;lt; 0) // è‹¥ newCapacity ä¾æ—§å°äºŽ minCapacity newCapacity = minCapacity; // åˆ¤æ–­æ˜¯éœ€è¦çš„å®¹é‡æ˜¯å¦è¶…è¿‡æœ€å¤§çš„æ•°ç»„å®¹é‡ã€‚ if (newCapacity - MAX_ARRAY_SIZE &amp;gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: // åœ¨Arrays.copyOf()ä¸­ä¼šå°†åŽŸæ•°ç»„æ•´ä¸ªèµ‹å€¼åˆ°æ‰©å®¹çš„æ•°ç»„ä¸­ã€‚ elementData = Arrays.copyOf(elementData, newCapacity);&#125;æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨Arrays.copyOf()æŠŠåŽŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»ºArrayListå¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚add(int index, E element)æºç åˆ†æž123456789101112131415161718192021222324// è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œç”±Cè¯­è¨€å®žçŽ°ã€‚public static native void arraycopy(Object src, // æºæ•°ç»„ int srcPos, // æºæ•°ç»„è¦å¤åˆ¶çš„èµ·å§‹ä½ç½® Object dest, // ç›®æ ‡æ•°ç»„ï¼ˆå°†åŽŸæ•°ç»„å¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„ï¼‰ int destPos, // ç›®æ ‡æ•°ç»„èµ·å§‹ä½ç½®ï¼ˆä»Žç›®æ ‡æ•°ç»„çš„å“ªä¸ªä¸‹æ ‡å¼€å§‹å¤åˆ¶æ“ä½œï¼‰ int length // å¤åˆ¶æºæ•°ç»„çš„é•¿åº¦ );public void add(int index, E element) &#123; // åˆ¤æ–­ç´¢å¼•æ˜¯å¦è¶Šç•Œ rangeCheckForAdd(index); // ç¡®ä¿æ•°ç»„å·²ä½¿ç”¨é•¿åº¦ï¼ˆsizeï¼‰åŠ 1ä¹‹åŽè¶³å¤Ÿå­˜ä¸‹ ä¸‹ä¸€ä¸ªæ•°æ® ensureCapacityInternal(size + 1); // Increments modCount!! // è¿è¡Œåˆ°è¿™é‡Œä»£è¡¨æ•°ç»„å®¹é‡æ»¡è¶³ã€‚ // æ•°ç»„ä»Žä¼ å…¥å½¢å‚indexå¤„å¼€å§‹å¤åˆ¶ï¼Œå¤åˆ¶size-indexä¸ªå…ƒç´ ï¼ˆå³åŒ…æ‹¬indexåœ¨å†…åŽé¢çš„å…ƒç´ å…¨éƒ¨å¤åˆ¶ï¼‰ï¼Œ // ä»Žæ•°ç»„çš„index + 1å¤„å¼€å§‹ç²˜è´´ã€‚ // è¿™æ—¶ï¼Œindex å’Œ index + 1å¤„å…ƒç´ æ•°å€¼ç›¸åŒã€‚ System.arraycopy(elementData, index, elementData, index + 1, size - index); // æŠŠindexå¤„çš„å…ƒç´ æ›¿æ¢æˆæ–°çš„å…ƒç´ ã€‚ elementData[index] = element; // æ•°ç»„å†…å…ƒç´ é•¿åº¦åŠ ä¸€ã€‚ size++;&#125;éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬indexåœ¨å†…åŽé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°index + 1ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢žåŠ å…ƒç´ çš„ä»£ä»·æ˜¯éžå¸¸é«˜çš„ã€‚remove(int index)æºç åˆ†æž1234567891011121314151617public E remove(int index) &#123; // æ£€æŸ¥index rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &amp;gt; 0) // å’Œ add(int index, E element)åŽŸç†æƒ³é€šã€‚ System.arraycopy(elementData, index+1, elementData, index, numMoved); // å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œåžƒåœ¾å›žæ”¶ã€‚ elementData[--size] = null; // clear to let GC do its work // è¿”å›žæ—§å…ƒç´  return oldValue; &#125;éœ€è¦è°ƒç”¨System.arraycopy()å°†åŒ…æ‹¬index + 1åœ¨å†…åŽé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°indexä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListæ•°ç»„å¤´å¢žåŠ å…ƒç´ çš„ä»£ä»·æ˜¯éžå¸¸é«˜çš„ã€‚Fail-Fastæœºåˆ¶fail-fast æœºåˆ¶ï¼Œå³å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼Œæ˜¯javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“åœ¨è¿­ä»£é›†åˆçš„è¿‡ç¨‹ä¸­è¯¥é›†åˆåœ¨ç»“æž„ä¸Šå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½ä¼šå‘ç”Ÿfail-fastï¼Œå³æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚fail-fastæœºåˆ¶å¹¶ä¸ä¿è¯åœ¨ä¸åŒæ­¥çš„ä¿®æ”¹ä¸‹ä¸€å®šä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒåªæ˜¯å°½æœ€å¤§åŠªåŠ›åŽ»æŠ›å‡ºï¼Œæ‰€ä»¥è¿™ç§æœºåˆ¶ä¸€èˆ¬ä»…ç”¨äºŽæ£€æµ‹bugã€‚ç»“æž„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æž„å‘ç”Ÿå˜åŒ–ã€‚åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰åŽmodCountæ˜¯å¦æ”¹å˜ï¼Œå¦‚æžœæ”¹å˜äº†éœ€è¦è·‘å‡ºConcurrentModificationException1234567891011121314151617181920212223242526272829private class Itr implements Iterator&amp;lt;E&amp;gt; &#123; int cursor; int lastRet = -1; // æœŸå¾…çš„ä¿®æ”¹å€¼ç­‰äºŽå½“å‰ä¿®æ”¹æ¬¡æ•°ï¼ˆmodCountï¼‰ int expectedModCount = modCount; public boolean hasNext() &#123; return cursor != size; &#125; public E next() &#123; // æ£€æŸ¥ expectedModCountæ˜¯å¦ç­‰äºŽmodCountï¼Œä¸ç›¸åŒåˆ™æŠ›å‡ºConcurrentModificationException checkForComodification(); /** çœç•¥æ­¤å¤„ä»£ç  */ &#125; public void remove() &#123; if (this.lastRet &amp;lt; 0) throw new IllegalStateException(); checkForComodification(); /** çœç•¥æ­¤å¤„ä»£ç  */ &#125; final void checkForComodification() &#123; if (ArrayList.this.modCount == this.expectedModCount) return; throw new ConcurrentModificationException(); &#125; &#125;ä¸€ä¸ªå•çº¿ç¨‹çŽ¯å¢ƒä¸‹çš„fail-fastçš„ä¾‹å­123456789101112131415public static void main(String[] args) &#123; List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(); for (int i = 0 ; i &amp;lt; 10 ; i++ ) &#123; list.add(i + &amp;quot;&amp;quot;); &#125; Iterator&amp;lt;String&amp;gt; iterator = list.iterator(); int i = 0 ; while(iterator.hasNext()) &#123; if (i == 3) &#123; list.remove(3); &#125; System.out.println(iterator.next()); i ++; &#125; &#125;åºåˆ—åŒ–ArrayList å®žçŽ°äº† java.io.Serializable æŽ¥å£ï¼Œä½†æ˜¯è‡ªå·±å®šä¹‰äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å› ä¸ºArrayListåŸºäºŽæ•°ç»„å®žçŽ°ï¼Œå¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–ã€‚å› æ­¤ elementData æ•°ç»„ä½¿ç”¨ transient ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢è¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException&#123; // Write out element count, and any hidden stuff int expectedModCount = modCount; // å°†å½“å‰ç±»çš„éžé™æ€(non-static)å’Œéžçž¬æ€(non-transient)å­—æ®µå†™å…¥æµ // åœ¨è¿™é‡Œä¹Ÿä¼šå°†sizeå­—æ®µå†™å…¥ã€‚ s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() // åºåˆ—åŒ–æ•°ç»„åŒ…å«å…ƒç´ æ•°é‡ï¼Œä¸ºäº†å‘åŽå…¼å®¹ // ä¸¤æ¬¡å°†sizeå†™å…¥æµ s.writeInt(size); // Write out all elements in the proper order. // æŒ‰ç…§é¡ºåºå†™å…¥ï¼Œåªå†™å…¥åˆ°æ•°ç»„åŒ…å«å…ƒç´ çš„ç»“å°¾ï¼Œå¹¶ä¸ä¼šæŠŠæ•°ç»„çš„æ‰€æœ‰å®¹é‡åŒºåŸŸå…¨éƒ¨å†™å…¥ for (int i=0; i&amp;lt;size; i++) &#123; s.writeObject(elementData[i]); &#125; // åˆ¤æ–­æ˜¯å¦è§¦å‘Fast-Fail if (modCount != expectedModCount) &#123; throw new ConcurrentModificationException(); &#125; &#125; private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException &#123; // è®¾ç½®æ•°ç»„å¼•ç”¨ç©ºæ•°ç»„ã€‚ elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff // å°†æµä¸­çš„çš„éžé™æ€(non-static)å’Œéžçž¬æ€(non-transient)å­—æ®µè¯»å–åˆ°å½“å‰ç±» // åŒ…å« size s.defaultReadObject(); // Read in capacity // è¯»å…¥å…ƒç´ ä¸ªæ•°ï¼Œæ²¡ä»€ä¹ˆç”¨ï¼Œåªæ˜¯å› ä¸ºå†™å‡ºçš„æ—¶å€™å†™äº†sizeå±žæ€§ï¼Œè¯»çš„æ—¶å€™ä¹Ÿè¦æŒ‰é¡ºåºæ¥è¯» s.readInt(); // ignored if (size &amp;gt; 0) &#123; // be like clone(), allocate array based upon size not capacity // æ ¹æ®sizeè®¡ç®—å®¹é‡ã€‚ int capacity = calculateCapacity(elementData, size); // SharedSecrets ä¸€ä¸ªâ€œå…±äº«æœºå¯†â€å­˜å‚¨åº“ï¼Œå®ƒæ˜¯ä¸€ç§æœºåˆ¶ï¼Œ // ç”¨äºŽè°ƒç”¨å¦ä¸€ä¸ªåŒ…ä¸­çš„å®žçŽ°ä¸“ç”¨æ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨åå°„ã€‚TODO SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity); // æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹ ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. // ä¾æ¬¡è¯»å–å…ƒç´ åˆ°æ•°ç»„ä¸­ for (int i=0; i&amp;lt;size; i++) &#123; a[i] = s.readObject(); &#125; &#125; &#125;ArrayListä¸­ä¸ºä»€ä¹ˆsizeè¦åºåˆ—åŒ–ä¸¤æ¬¡ï¼Ÿåœ¨ä»£ç ä¸­s.defaultWriteObject();ä¸­sizeåº”è¯¥ä¹Ÿè¢«åºåˆ—åŒ–äº†ï¼Œä¸ºä»€ä¹ˆä¸‹è¾¹è¿˜è¦å†å•ç‹¬åºåˆ—åŒ–ä¸€æ¬¡å‘¢ï¼Ÿè¿™æ ·å†™æ˜¯å‡ºäºŽå…¼å®¹æ€§è€ƒè™‘ã€‚æ—§ç‰ˆæœ¬çš„JDKä¸­ï¼ŒArrayListçš„å®žçŽ°æœ‰æ‰€ä¸åŒï¼Œä¼šå¯¹lengthå­—æ®µè¿›è¡Œåºåˆ—åŒ–ã€‚è€Œæ–°ç‰ˆçš„JDKä¸­ï¼Œå¯¹ä¼˜åŒ–äº†ArrayListçš„å®žçŽ°ï¼Œä¸å†åºåˆ—åŒ–lengthå­—æ®µã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æžœåŽ»æŽ‰s.writeInt(size)ï¼Œé‚£ä¹ˆæ–°ç‰ˆæœ¬JDKåºåˆ—åŒ–çš„å¯¹è±¡ï¼Œåœ¨æ—§ç‰ˆæœ¬ä¸­å°±æ— æ³•æ­£ç¡®è¯»å–ï¼Œå› ä¸ºç¼ºå°‘äº†lengthå­—æ®µã€‚å› æ­¤è¿™ç§å†™æ³•çœ‹èµ·æ¥å¤šæ­¤ä¸€ä¸¾ï¼Œå®žé™…ä¸Šå´ä¿è¯äº†å…¼å®¹æ€§ã€‚### å°ç»“ArrayListåŸºäºŽæ•°ç»„æ–¹å¼å®žçŽ°ï¼Œæ— å®¹é‡çš„é™åˆ¶ï¼ˆä¼šæ‰©å®¹ï¼‰æ·»åŠ å…ƒç´ æ—¶å¯èƒ½è¦æ‰©å®¹ï¼ˆæ‰€ä»¥æœ€å¥½é¢„åˆ¤ä¸€ä¸‹ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ä¸ä¼šå‡å°‘å®¹é‡ï¼ˆè‹¥å¸Œæœ›å‡å°‘å®¹é‡å¯ä»¥ä½¿ç”¨trimToSize()ï¼‰ï¼Œåˆ é™¤å…ƒç´ æ—¶ï¼Œå°†åˆ é™¤æŽ‰çš„ä½ç½®å…ƒç´ ç½®ä¸ºnullï¼Œä¸‹æ¬¡gcå°±ä¼šå›žæ”¶è¿™äº›å…ƒç´ æ‰€å çš„å†…å­˜ç©ºé—´ã€‚çº¿ç¨‹ä¸å®‰å…¨add(int index, E element)ï¼šæ·»åŠ å…ƒç´ åˆ°æ•°ç»„ä¸­æŒ‡å®šä½ç½®çš„æ—¶å€™ï¼Œéœ€è¦å°†è¯¥ä½ç½®åŠå…¶åŽè¾¹æ‰€æœ‰çš„å…ƒç´ éƒ½æ•´å—å‘åŽå¤åˆ¶ä¸€ä½get(int index)ï¼šèŽ·å–æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ç›´æŽ¥èŽ·å–ï¼ˆO(1)ï¼‰remove(Object o)éœ€è¦éåŽ†æ•°ç»„remove(int index)ä¸éœ€è¦éåŽ†æ•°ç»„ï¼Œåªéœ€åˆ¤æ–­indexæ˜¯å¦ç¬¦åˆæ¡ä»¶å³å¯ï¼Œæ•ˆçŽ‡æ¯”remove(Object o)é«˜contains(E)éœ€è¦éåŽ†æ•°ç»„ é¢è¯•å¿…ä¼šä¹‹ArrayListæºç åˆ†æž&amp;æ‰‹å†™ArrayList]]></content>
      <tags>
        <tag>Analyst of SourceCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[The data structure and algorithm behind the MySQL index]]></title>
    <url>%2F2020%2F02%2F05%2FThe-data-structure-and-algorithm-behind-the-MySQL-index%2F</url>
    <content type="text"><![CDATA[æ–‡ç« ä¸»è¦å†…å®¹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚ ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦ä»Žæ•°æ®ç»“æž„åŠç®—æ³•ç†è®ºå±‚é¢è®¨è®ºMySQLæ•°æ®åº“ç´¢å¼•çš„æ•°ç†åŸºç¡€ã€‚ ç¬¬äºŒéƒ¨åˆ†ç»“åˆMySQLæ•°æ®åº“ä¸­MyISAMå’ŒInnoDBæ•°æ®å­˜å‚¨å¼•æ“Žä¸­ç´¢å¼•çš„æž¶æž„å®žçŽ°è®¨è®ºèšé›†ç´¢å¼•ã€éžèšé›†ç´¢å¼•åŠè¦†ç›–ç´¢å¼•ç­‰è¯é¢˜ã€‚ ç¬¬ä¸‰éƒ¨åˆ†æ ¹æ®ä¸Šé¢çš„ç†è®ºåŸºç¡€ï¼Œè®¨è®ºMySQLä¸­é«˜æ€§èƒ½ä½¿ç”¨ç´¢å¼•çš„ç­–ç•¥ã€‚ æ•°æ®ç»“æž„åŠç®—æ³•åŸºç¡€ ç´¢å¼•çš„æœ¬è´¨ MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼šç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆèŽ·å–æ•°æ®çš„æ•°æ®ç»“æž„ã€‚æå–å¥å­ä¸»å¹²ï¼Œå°±å¯ä»¥å¾—åˆ°ç´¢å¼•çš„æœ¬è´¨ï¼šç´¢å¼•æ˜¯æ•°æ®ç»“æž„ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œæ•°æ®åº“æŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æœ€ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ã€‚æˆ‘ä»¬éƒ½å¸Œæœ›æŸ¥è¯¢æ•°æ®çš„é€Ÿåº¦èƒ½å°½å¯èƒ½çš„å¿«ï¼Œå› æ­¤æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…ä¼šä»ŽæŸ¥è¯¢ç®—æ³•çš„è§’åº¦è¿›è¡Œä¼˜åŒ–ã€‚æœ€åŸºæœ¬çš„æŸ¥è¯¢ç®—æ³•å½“ç„¶æ˜¯é¡ºåºæŸ¥æ‰¾ï¼ˆlinear searchï¼‰ï¼Œè¿™ç§å¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶æ˜¾ç„¶æ˜¯ç³Ÿç³•çš„ï¼Œå¥½åœ¨è®¡ç®—æœºç§‘å­¦çš„å‘å±•æä¾›äº†å¾ˆå¤šæ›´ä¼˜ç§€çš„æŸ¥æ‰¾ç®—æ³•ï¼Œä¾‹å¦‚äºŒåˆ†æŸ¥æ‰¾ï¼ˆbinary searchï¼‰ã€äºŒå‰æ ‘æŸ¥æ‰¾ï¼ˆbinary tree searchï¼‰ç­‰ã€‚å¦‚æžœç¨å¾®åˆ†æžä¸€ä¸‹ä¼šå‘çŽ°ï¼Œæ¯ç§æŸ¥æ‰¾ç®—æ³•éƒ½åªèƒ½åº”ç”¨äºŽç‰¹å®šçš„æ•°æ®ç»“æž„ä¹‹ä¸Šï¼Œä¾‹å¦‚äºŒåˆ†æŸ¥æ‰¾è¦æ±‚è¢«æ£€ç´¢æ•°æ®æœ‰åºï¼Œè€ŒäºŒå‰æ ‘æŸ¥æ‰¾åªèƒ½åº”ç”¨äºŽäºŒå‰æŸ¥æ‰¾æ ‘ä¸Šï¼Œä½†æ˜¯æ•°æ®æœ¬èº«çš„ç»„ç»‡ç»“æž„ä¸å¯èƒ½å®Œå…¨æ»¡è¶³å„ç§æ•°æ®ç»“æž„ï¼ˆä¾‹å¦‚ï¼Œç†è®ºä¸Šä¸å¯èƒ½åŒæ—¶å°†ä¸¤åˆ—éƒ½æŒ‰é¡ºåºè¿›è¡Œç»„ç»‡ï¼‰ï¼Œæ‰€ä»¥ï¼Œåœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æž„ï¼Œè¿™äº›æ•°æ®ç»“æž„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æž„ä¸Šå®žçŽ°é«˜çº§æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ç§æ•°æ®ç»“æž„ï¼Œå°±æ˜¯ç´¢å¼•ã€‚ çœ‹ä¸€ä¸ªä¾‹å­ï¼š å›¾1 å›¾1å±•ç¤ºäº†ä¸€ç§å¯èƒ½çš„ç´¢å¼•æ–¹å¼ã€‚å·¦è¾¹æ˜¯æ•°æ®è¡¨ï¼Œä¸€å…±æœ‰ä¸¤åˆ—ä¸ƒæ¡è®°å½•ï¼Œæœ€å·¦è¾¹çš„æ˜¯æ•°æ®è®°å½•çš„ç‰©ç†åœ°å€ï¼ˆæ³¨æ„é€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•åœ¨ç£ç›˜ä¸Šä¹Ÿå¹¶ä¸æ˜¯ä¸€å®šç‰©ç†ç›¸é‚»çš„ï¼‰ã€‚ä¸ºäº†åŠ å¿«Col2çš„æŸ¥æ‰¾ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå³è¾¹æ‰€ç¤ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘å¯¹åº”æ•°æ®è®°å½•ç‰©ç†åœ°å€çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨äºŒå‰æŸ¥æ‰¾åœ¨(O(log_2n))çš„å¤æ‚åº¦å†…èŽ·å–åˆ°ç›¸åº”æ•°æ®ã€‚ è™½ç„¶è¿™æ˜¯ä¸€ä¸ªè´§çœŸä»·å®žçš„ç´¢å¼•ï¼Œä½†æ˜¯å®žé™…çš„æ•°æ®åº“ç³»ç»Ÿå‡ ä¹Žæ²¡æœ‰ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ–å…¶è¿›åŒ–å“ç§çº¢é»‘æ ‘ï¼ˆred-black treeï¼‰å®žçŽ°çš„ï¼ŒåŽŸå› ä¼šåœ¨ä¸‹æ–‡ä»‹ç»ã€‚ B-Treeå’ŒB+Tree ç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»ŸåŠæ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨B-Treeæˆ–å…¶å˜ç§B+Treeä½œä¸ºç´¢å¼•ç»“æž„ï¼Œåœ¨æœ¬æ–‡çš„ä¸‹ä¸€èŠ‚ä¼šç»“åˆå­˜å‚¨å™¨åŽŸç†åŠè®¡ç®—æœºå­˜å–åŽŸç†è®¨è®ºä¸ºä»€ä¹ˆB-Treeå’ŒB+Treeåœ¨è¢«å¦‚æ­¤å¹¿æ³›ç”¨äºŽç´¢å¼•ï¼Œè¿™ä¸€èŠ‚å…ˆå•çº¯ä»Žæ•°æ®ç»“æž„è§’åº¦æè¿°å®ƒä»¬ã€‚ B-Tree ä¸ºäº†æè¿°B-Treeï¼Œé¦–å…ˆå®šä¹‰ä¸€æ¡æ•°æ®è®°å½•ä¸ºä¸€ä¸ªäºŒå…ƒç»„[key, data]ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹äºŽä¸åŒæ•°æ®è®°å½•ï¼Œkeyæ˜¯äº’ä¸ç›¸åŒçš„ï¼›dataä¸ºæ•°æ®è®°å½•é™¤keyå¤–çš„æ•°æ®ã€‚é‚£ä¹ˆB-Treeæ˜¯æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„æ•°æ®ç»“æž„ï¼š dä¸ºå¤§äºŽ1çš„ä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„åº¦ã€‚ hä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„é«˜åº¦ã€‚ æ¯ä¸ªéžå¶å­èŠ‚ç‚¹ç”±n-1ä¸ªkeyå’Œnä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­d&lt;=n&lt;=2dã€‚ æ¯ä¸ªå¶å­èŠ‚ç‚¹æœ€å°‘åŒ…å«ä¸€ä¸ªkeyå’Œä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€å¤šåŒ…å«2d-1ä¸ªkeyå’Œ2dä¸ªæŒ‡é’ˆï¼Œå¶èŠ‚ç‚¹çš„æŒ‡é’ˆå‡ä¸ºnull ã€‚ æ‰€æœ‰å¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ·±åº¦ï¼Œç­‰äºŽæ ‘é«˜hã€‚ keyå’ŒæŒ‡é’ˆäº’ç›¸é—´éš”ï¼ŒèŠ‚ç‚¹ä¸¤ç«¯æ˜¯æŒ‡é’ˆã€‚ ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„keyä»Žå·¦åˆ°å³éžé€’å‡æŽ’åˆ—ã€‚ æ‰€æœ‰èŠ‚ç‚¹ç»„æˆæ ‘ç»“æž„ã€‚ æ¯ä¸ªæŒ‡é’ˆè¦ä¹ˆä¸ºnullï¼Œè¦ä¹ˆæŒ‡å‘å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æžœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å·¦è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äºŽ(v(key_1))ï¼Œå…¶ä¸­(v(key_1))ä¸ºnodeçš„ç¬¬ä¸€ä¸ªkeyçš„å€¼ã€‚ å¦‚æžœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å³è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå¤§äºŽ(v(key_m))ï¼Œå…¶ä¸­(v(key_m))ä¸ºnodeçš„æœ€åŽä¸€ä¸ªkeyçš„å€¼ã€‚ å¦‚æžœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeçš„å·¦å³ç›¸é‚»keyåˆ†åˆ«æ˜¯(key_i)å’Œ(key_{i+1})ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äºŽ(v(key_{i+1}))ä¸”å¤§äºŽ(v(key_i))ã€‚ å›¾2æ˜¯ä¸€ä¸ªd=2çš„B-Treeç¤ºæ„å›¾ã€‚ å›¾2 ç”±äºŽB-Treeçš„ç‰¹æ€§ï¼Œåœ¨B-Treeä¸­æŒ‰keyæ£€ç´¢æ•°æ®çš„ç®—æ³•éžå¸¸ç›´è§‚ï¼šé¦–å…ˆä»Žæ ¹èŠ‚ç‚¹è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦‚æžœæ‰¾åˆ°åˆ™è¿”å›žå¯¹åº”èŠ‚ç‚¹çš„dataï¼Œå¦åˆ™å¯¹ç›¸åº”åŒºé—´çš„æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹é€’å½’è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°èŠ‚ç‚¹æˆ–æ‰¾åˆ°nullæŒ‡é’ˆï¼Œå‰è€…æŸ¥æ‰¾æˆåŠŸï¼ŒåŽè€…æŸ¥æ‰¾å¤±è´¥ã€‚B-Treeä¸ŠæŸ¥æ‰¾ç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š12345678910&lt;pre class="prettyprint linenums"&gt;BTree_Search(node, key) &#123; if(node == null) return null; foreach(node.key) &#123; if(node.key[i] == key) return node.data[i]; if(node.key[i] &amp;gt; key) return BTree_Search(point[i]-&amp;gt;node); &#125; return BTree_Search(point[i+1]-&amp;gt;node);&#125;data = BTree_Search(root, my_key);&lt;/pre&gt; å…³äºŽB-Treeæœ‰ä¸€ç³»åˆ—æœ‰è¶£çš„æ€§è´¨ï¼Œä¾‹å¦‚ä¸€ä¸ªåº¦ä¸ºdçš„B-Treeï¼Œè®¾å…¶ç´¢å¼•Nä¸ªkeyï¼Œåˆ™å…¶æ ‘é«˜hçš„ä¸Šé™ä¸º(log_d((N+1)/2))ï¼Œæ£€ç´¢ä¸€ä¸ªkeyï¼Œå…¶æŸ¥æ‰¾èŠ‚ç‚¹ä¸ªæ•°çš„æ¸è¿›å¤æ‚åº¦ä¸º(O(log_dN))ã€‚ä»Žè¿™ç‚¹å¯ä»¥çœ‹å‡ºï¼ŒB-Treeæ˜¯ä¸€ä¸ªéžå¸¸æœ‰æ•ˆçŽ‡çš„ç´¢å¼•æ•°æ®ç»“æž„ã€‚ å¦å¤–ï¼Œç”±äºŽæ’å…¥åˆ é™¤æ–°çš„æ•°æ®è®°å½•ä¼šç ´åB-Treeçš„æ€§è´¨ï¼Œå› æ­¤åœ¨æ’å…¥åˆ é™¤æ—¶ï¼Œéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€ä¸ªåˆ†è£‚ã€åˆå¹¶ã€è½¬ç§»ç­‰æ“ä½œä»¥ä¿æŒB-Treeæ€§è´¨ï¼Œæœ¬æ–‡ä¸æ‰“ç®—å®Œæ•´è®¨è®ºB-Treeè¿™äº›å†…å®¹ï¼Œå› ä¸ºå·²ç»æœ‰è®¸å¤šèµ„æ–™è¯¦ç»†è¯´æ˜Žäº†B-Treeçš„æ•°å­¦æ€§è´¨åŠæ’å…¥åˆ é™¤ç®—æ³•ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨æœ¬æ–‡æœ«çš„å‚è€ƒæ–‡çŒ®ä¸€æ æ‰¾åˆ°ç›¸åº”çš„èµ„æ–™è¿›è¡Œé˜…è¯»ã€‚ B+Tree B-Treeæœ‰è®¸å¤šå˜ç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ˜¯B+Treeï¼Œä¾‹å¦‚MySQLå°±æ™®éä½¿ç”¨B+Treeå®žçŽ°å…¶ç´¢å¼•ç»“æž„ã€‚ ä¸ŽB-Treeç›¸æ¯”ï¼ŒB+Treeæœ‰ä»¥ä¸‹ä¸åŒç‚¹ï¼š æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆä¸Šé™ä¸º2dè€Œä¸æ˜¯2d+1ã€‚ å†…èŠ‚ç‚¹ä¸å­˜å‚¨dataï¼Œåªå­˜å‚¨keyï¼›å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æŒ‡é’ˆã€‚ å›¾3æ˜¯ä¸€ä¸ªç®€å•çš„B+Treeç¤ºæ„ã€‚ å›¾3 ç”±äºŽå¹¶ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„åŸŸï¼Œå› æ­¤B+Treeä¸­å¶èŠ‚ç‚¹å’Œå†…èŠ‚ç‚¹ä¸€èˆ¬å¤§å°ä¸åŒã€‚è¿™ç‚¹ä¸ŽB-Treeä¸åŒï¼Œè™½ç„¶B-Treeä¸­ä¸åŒèŠ‚ç‚¹å­˜æ”¾çš„keyå’ŒæŒ‡é’ˆå¯èƒ½æ•°é‡ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„åŸŸå’Œä¸Šé™æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åœ¨å®žçŽ°ä¸­B-Treeå¾€å¾€å¯¹æ¯ä¸ªèŠ‚ç‚¹ç”³è¯·åŒç­‰å¤§å°çš„ç©ºé—´ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒB+Treeæ¯”B-Treeæ›´é€‚åˆå®žçŽ°å¤–å­˜å‚¨ç´¢å¼•ç»“æž„ï¼Œå…·ä½“åŽŸå› ä¸Žå¤–å­˜å‚¨å™¨åŽŸç†åŠè®¡ç®—æœºå­˜å–åŽŸç†æœ‰å…³ï¼Œå°†åœ¨ä¸‹é¢è®¨è®ºã€‚ å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree ä¸€èˆ¬åœ¨æ•°æ®åº“ç³»ç»Ÿæˆ–æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨çš„B+Treeç»“æž„éƒ½åœ¨ç»å…¸B+Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¢žåŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆã€‚ å›¾4 å¦‚å›¾4æ‰€ç¤ºï¼Œåœ¨B+Treeçš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å¢žåŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeã€‚åšè¿™ä¸ªä¼˜åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼Œä¾‹å¦‚å›¾4ä¸­å¦‚æžœè¦æŸ¥è¯¢keyä¸ºä»Ž18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åŽï¼Œåªéœ€é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéåŽ†å°±å¯ä»¥ä¸€æ¬¡æ€§è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæžå¤§æåˆ°äº†åŒºé—´æŸ¥è¯¢æ•ˆçŽ‡ã€‚ è¿™ä¸€èŠ‚å¯¹B-Treeå’ŒB+Treeè¿›è¡Œäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œä¸‹ä¸€èŠ‚ç»“åˆå­˜å‚¨å™¨å­˜å–åŽŸç†ä»‹ç»ä¸ºä»€ä¹ˆç›®å‰B+Treeæ˜¯æ•°æ®åº“ç³»ç»Ÿå®žçŽ°ç´¢å¼•çš„é¦–é€‰æ•°æ®ç»“æž„ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨B-Treeï¼ˆB+Treeï¼‰ ä¸Šæ–‡è¯´è¿‡ï¼Œçº¢é»‘æ ‘ç­‰æ•°æ®ç»“æž„ä¹Ÿå¯ä»¥ç”¨æ¥å®žçŽ°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨B-/+Treeä½œä¸ºç´¢å¼•ç»“æž„ï¼Œè¿™ä¸€èŠ‚å°†ç»“åˆè®¡ç®—æœºç»„æˆåŽŸç†ç›¸å…³çŸ¥è¯†è®¨è®ºB-/+Treeä½œä¸ºç´¢å¼•çš„ç†è®ºåŸºç¡€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿç£ç›˜I/Oæ¶ˆè€—ï¼Œç›¸å¯¹äºŽå†…å­˜å­˜å–ï¼ŒI/Oå­˜å–çš„æ¶ˆè€—è¦é«˜å‡ ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥è¯„ä»·ä¸€ä¸ªæ•°æ®ç»“æž„ä½œä¸ºç´¢å¼•çš„ä¼˜åŠ£æœ€é‡è¦çš„æŒ‡æ ‡å°±æ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oæ“ä½œæ¬¡æ•°çš„æ¸è¿›å¤æ‚åº¦ã€‚æ¢å¥è¯è¯´ï¼Œç´¢å¼•çš„ç»“æž„ç»„ç»‡è¦å°½é‡å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜I/Oçš„å­˜å–æ¬¡æ•°ã€‚ä¸‹é¢å…ˆä»‹ç»å†…å­˜å’Œç£ç›˜å­˜å–åŽŸç†ï¼Œç„¶åŽå†ç»“åˆè¿™äº›åŽŸç†åˆ†æžB-/+Treeä½œä¸ºç´¢å¼•çš„æ•ˆçŽ‡ã€‚ ä¸»å­˜å­˜å–åŽŸç† ç›®å‰è®¡ç®—æœºä½¿ç”¨çš„ä¸»å­˜åŸºæœ¬éƒ½æ˜¯éšæœºè¯»å†™å­˜å‚¨å™¨ï¼ˆRAMï¼‰ï¼ŒçŽ°ä»£RAMçš„ç»“æž„å’Œå­˜å–åŽŸç†æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæœ¬æ–‡æŠ›å´å…·ä½“å·®åˆ«ï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªååˆ†ç®€å•çš„å­˜å–æ¨¡åž‹æ¥è¯´æ˜ŽRAMçš„å·¥ä½œåŽŸç†ã€‚ å›¾5 ä»ŽæŠ½è±¡è§’åº¦çœ‹ï¼Œä¸»å­˜æ˜¯ä¸€ç³»åˆ—çš„å­˜å‚¨å•å…ƒç»„æˆçš„çŸ©é˜µï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒå­˜å‚¨å›ºå®šå¤§å°çš„æ•°æ®ã€‚æ¯ä¸ªå­˜å‚¨å•å…ƒæœ‰å”¯ä¸€çš„åœ°å€ï¼ŒçŽ°ä»£ä¸»å­˜çš„ç¼–å€è§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°†å…¶ç®€åŒ–æˆä¸€ä¸ªäºŒç»´åœ°å€ï¼šé€šè¿‡ä¸€ä¸ªè¡Œåœ°å€å’Œä¸€ä¸ªåˆ—åœ°å€å¯ä»¥å”¯ä¸€å®šä½åˆ°ä¸€ä¸ªå­˜å‚¨å•å…ƒã€‚å›¾5å±•ç¤ºäº†ä¸€ä¸ª4 x 4çš„ä¸»å­˜æ¨¡åž‹ã€‚ ä¸»å­˜çš„å­˜å–è¿‡ç¨‹å¦‚ä¸‹ï¼š å½“ç³»ç»Ÿéœ€è¦è¯»å–ä¸»å­˜æ—¶ï¼Œåˆ™å°†åœ°å€ä¿¡å·æ”¾åˆ°åœ°å€æ€»çº¿ä¸Šä¼ ç»™ä¸»å­˜ï¼Œä¸»å­˜è¯»åˆ°åœ°å€ä¿¡å·åŽï¼Œè§£æžä¿¡å·å¹¶å®šä½åˆ°æŒ‡å®šå­˜å‚¨å•å…ƒï¼Œç„¶åŽå°†æ­¤å­˜å‚¨å•å…ƒæ•°æ®æ”¾åˆ°æ•°æ®æ€»çº¿ä¸Šï¼Œä¾›å…¶å®ƒéƒ¨ä»¶è¯»å–ã€‚ å†™ä¸»å­˜çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œç³»ç»Ÿå°†è¦å†™å…¥å•å…ƒåœ°å€å’Œæ•°æ®åˆ†åˆ«æ”¾åœ¨åœ°å€æ€»çº¿å’Œæ•°æ®æ€»çº¿ä¸Šï¼Œä¸»å­˜è¯»å–ä¸¤ä¸ªæ€»çº¿çš„å†…å®¹ï¼Œåšç›¸åº”çš„å†™æ“ä½œã€‚ è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œä¸»å­˜å­˜å–çš„æ—¶é—´ä»…ä¸Žå­˜å–æ¬¡æ•°å‘ˆçº¿æ€§å…³ç³»ï¼Œå› ä¸ºä¸å­˜åœ¨æœºæ¢°æ“ä½œï¼Œä¸¤æ¬¡å­˜å–çš„æ•°æ®çš„â€œè·ç¦»â€ä¸ä¼šå¯¹æ—¶é—´æœ‰ä»»ä½•å½±å“ï¼Œä¾‹å¦‚ï¼Œå…ˆå–A0å†å–A1å’Œå…ˆå–A0å†å–D3çš„æ—¶é—´æ¶ˆè€—æ˜¯ä¸€æ ·çš„ã€‚ ç£ç›˜å­˜å–åŽŸç† ä¸Šæ–‡è¯´è¿‡ï¼Œç´¢å¼•ä¸€èˆ¬ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç´¢å¼•æ£€ç´¢éœ€è¦ç£ç›˜I/Oæ“ä½œã€‚ä¸Žä¸»å­˜ä¸åŒï¼Œç£ç›˜I/Oå­˜åœ¨æœºæ¢°è¿åŠ¨è€—è´¹ï¼Œå› æ­¤ç£ç›˜I/Oçš„æ—¶é—´æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚ å›¾6æ˜¯ç£ç›˜çš„æ•´ä½“ç»“æž„ç¤ºæ„å›¾ã€‚ å›¾6 ä¸€ä¸ªç£ç›˜ç”±å¤§å°ç›¸åŒä¸”åŒè½´çš„åœ†å½¢ç›˜ç‰‡ç»„æˆï¼Œç£ç›˜å¯ä»¥è½¬åŠ¨ï¼ˆå„ä¸ªç£ç›˜å¿…é¡»åŒæ­¥è½¬åŠ¨ï¼‰ã€‚åœ¨ç£ç›˜çš„ä¸€ä¾§æœ‰ç£å¤´æ”¯æž¶ï¼Œç£å¤´æ”¯æž¶å›ºå®šäº†ä¸€ç»„ç£å¤´ï¼Œæ¯ä¸ªç£å¤´è´Ÿè´£å­˜å–ä¸€ä¸ªç£ç›˜çš„å†…å®¹ã€‚ç£å¤´ä¸èƒ½è½¬åŠ¨ï¼Œä½†æ˜¯å¯ä»¥æ²¿ç£ç›˜åŠå¾„æ–¹å‘è¿åŠ¨ï¼ˆå®žé™…æ˜¯æ–œåˆ‡å‘è¿åŠ¨ï¼‰ï¼Œæ¯ä¸ªç£å¤´åŒä¸€æ—¶åˆ»ä¹Ÿå¿…é¡»æ˜¯åŒè½´çš„ï¼Œå³ä»Žæ­£ä¸Šæ–¹å‘ä¸‹çœ‹ï¼Œæ‰€æœ‰ç£å¤´ä»»ä½•æ—¶å€™éƒ½æ˜¯é‡å çš„ï¼ˆä¸è¿‡ç›®å‰å·²ç»æœ‰å¤šç£å¤´ç‹¬ç«‹æŠ€æœ¯ï¼Œå¯ä¸å—æ­¤é™åˆ¶ï¼‰ã€‚ å›¾7æ˜¯ç£ç›˜ç»“æž„çš„ç¤ºæ„å›¾ã€‚ å›¾7 ç›˜ç‰‡è¢«åˆ’åˆ†æˆä¸€ç³»åˆ—åŒå¿ƒçŽ¯ï¼Œåœ†å¿ƒæ˜¯ç›˜ç‰‡ä¸­å¿ƒï¼Œæ¯ä¸ªåŒå¿ƒçŽ¯å«åšä¸€ä¸ªç£é“ï¼Œæ‰€æœ‰åŠå¾„ç›¸åŒçš„ç£é“ç»„æˆä¸€ä¸ªæŸ±é¢ã€‚ç£é“è¢«æ²¿åŠå¾„çº¿åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ®µï¼Œæ¯ä¸ªæ®µå«åšä¸€ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªæ‰‡åŒºæ˜¯ç£ç›˜çš„æœ€å°å­˜å‚¨å•å…ƒã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¸‹é¢å‡è®¾ç£ç›˜åªæœ‰ä¸€ä¸ªç›˜ç‰‡å’Œä¸€ä¸ªç£å¤´ã€‚ å½“éœ€è¦ä»Žç£ç›˜è¯»å–æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šå°†æ•°æ®é€»è¾‘åœ°å€ä¼ ç»™ç£ç›˜ï¼Œç£ç›˜çš„æŽ§åˆ¶ç”µè·¯æŒ‰ç…§å¯»å€é€»è¾‘å°†é€»è¾‘åœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œå³ç¡®å®šè¦è¯»çš„æ•°æ®åœ¨å“ªä¸ªç£é“ï¼Œå“ªä¸ªæ‰‡åŒºã€‚ä¸ºäº†è¯»å–è¿™ä¸ªæ‰‡åŒºçš„æ•°æ®ï¼Œéœ€è¦å°†ç£å¤´æ”¾åˆ°è¿™ä¸ªæ‰‡åŒºä¸Šæ–¹ï¼Œä¸ºäº†å®žçŽ°è¿™ä¸€ç‚¹ï¼Œç£å¤´éœ€è¦ç§»åŠ¨å¯¹å‡†ç›¸åº”ç£é“ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå¯»é“ï¼Œæ‰€è€—è´¹æ—¶é—´å«åšå¯»é“æ—¶é—´ï¼Œç„¶åŽç£ç›˜æ—‹è½¬å°†ç›®æ ‡æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—è´¹çš„æ—¶é—´å«åšæ—‹è½¬æ—¶é—´ã€‚ å±€éƒ¨æ€§åŽŸç†ä¸Žç£ç›˜é¢„è¯» ç”±äºŽå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆçŽ‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»Žè¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åŽè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„å±€éƒ¨æ€§åŽŸç†ï¼š å½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚ ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­ã€‚ ç”±äºŽç£ç›˜é¡ºåºè¯»å–çš„æ•ˆçŽ‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºŽå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆçŽ‡ã€‚ é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿žç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åŽè¿žç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åŽå¼‚å¸¸è¿”å›žï¼Œç¨‹åºç»§ç»­è¿è¡Œã€‚ B-/+Treeç´¢å¼•çš„æ€§èƒ½åˆ†æž åˆ°è¿™é‡Œç»ˆäºŽå¯ä»¥åˆ†æžB-/+Treeç´¢å¼•çš„æ€§èƒ½äº†ã€‚ ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æž„çš„ä¼˜åŠ£ã€‚å…ˆä»ŽB-Treeåˆ†æžï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŽŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºŽä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®žé™…å®žçŽ°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æŽ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®žçŽ°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚ B-Treeä¸­ä¸€æ¬¡æ£€ç´¢æœ€å¤šéœ€è¦h-1æ¬¡I/Oï¼ˆæ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ï¼‰ï¼Œæ¸è¿›å¤æ‚åº¦ä¸º(O(h)=O(log_dN))ã€‚ä¸€èˆ¬å®žé™…åº”ç”¨ä¸­ï¼Œå‡ºåº¦dæ˜¯éžå¸¸å¤§çš„æ•°å­—ï¼Œé€šå¸¸è¶…è¿‡100ï¼Œå› æ­¤héžå¸¸å°ï¼ˆé€šå¸¸ä¸è¶…è¿‡3ï¼‰ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œç”¨B-Treeä½œä¸ºç´¢å¼•ç»“æž„æ•ˆçŽ‡æ˜¯éžå¸¸é«˜çš„ã€‚ è€Œçº¢é»‘æ ‘è¿™ç§ç»“æž„ï¼Œhæ˜Žæ˜¾è¦æ·±çš„å¤šã€‚ç”±äºŽé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆçŽ‡æ˜Žæ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ ä¸Šæ–‡è¿˜è¯´è¿‡ï¼ŒB+Treeæ›´é€‚åˆå¤–å­˜ç´¢å¼•ï¼ŒåŽŸå› å’Œå†…èŠ‚ç‚¹å‡ºåº¦dæœ‰å…³ã€‚ä»Žä¸Šé¢åˆ†æžå¯ä»¥çœ‹åˆ°ï¼Œdè¶Šå¤§ç´¢å¼•çš„æ€§èƒ½è¶Šå¥½ï¼Œè€Œå‡ºåº¦çš„ä¸Šé™å–å†³äºŽèŠ‚ç‚¹å†…keyå’Œdataçš„å¤§å°ï¼š (d_{max}=floor(pagesize / (keysize + datasize + pointsize))) floorè¡¨ç¤ºå‘ä¸‹å–æ•´ã€‚ç”±äºŽB+Treeå†…èŠ‚ç‚¹åŽ»æŽ‰äº†dataåŸŸï¼Œå› æ­¤å¯ä»¥æ‹¥æœ‰æ›´å¤§çš„å‡ºåº¦ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ è¿™ä¸€ç« ä»Žç†è®ºè§’åº¦è®¨è®ºäº†ä¸Žç´¢å¼•ç›¸å…³çš„æ•°æ®ç»“æž„ä¸Žç®—æ³•é—®é¢˜ï¼Œä¸‹ä¸€ç« å°†è®¨è®ºB+Treeæ˜¯å¦‚ä½•å…·ä½“å®žçŽ°ä¸ºMySQLä¸­ç´¢å¼•ï¼ŒåŒæ—¶å°†ç»“åˆMyISAMå’ŒInnDBå­˜å‚¨å¼•æ“Žä»‹ç»éžèšé›†ç´¢å¼•å’Œèšé›†ç´¢å¼•ä¸¤ç§ä¸åŒçš„ç´¢å¼•å®žçŽ°å½¢å¼ã€‚ MySQLç´¢å¼•å®žçŽ° åœ¨MySQLä¸­ï¼Œç´¢å¼•å±žäºŽå­˜å‚¨å¼•æ“Žçº§åˆ«çš„æ¦‚å¿µï¼Œä¸åŒå­˜å‚¨å¼•æ“Žå¯¹ç´¢å¼•çš„å®žçŽ°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œæœ¬æ–‡ä¸»è¦è®¨è®ºMyISAMå’ŒInnoDBä¸¤ä¸ªå­˜å‚¨å¼•æ“Žçš„ç´¢å¼•å®žçŽ°æ–¹å¼ã€‚ MyISAMç´¢å¼•å®žçŽ° MyISAMå¼•æ“Žä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æž„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚ä¸‹å›¾æ˜¯MyISAMç´¢å¼•çš„åŽŸç†å›¾ï¼š å›¾8 è¿™é‡Œè®¾è¡¨ä¸€å…±æœ‰ä¸‰åˆ—ï¼Œå‡è®¾æˆ‘ä»¬ä»¥Col1ä¸ºä¸»é”®ï¼Œåˆ™å›¾8æ˜¯ä¸€ä¸ªMyISAMè¡¨çš„ä¸»ç´¢å¼•ï¼ˆPrimary keyï¼‰ç¤ºæ„ã€‚å¯ä»¥çœ‹å‡ºMyISAMçš„ç´¢å¼•æ–‡ä»¶ä»…ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚åœ¨MyISAMä¸­ï¼Œä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ï¼ˆSecondary keyï¼‰åœ¨ç»“æž„ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œåªæ˜¯ä¸»ç´¢å¼•è¦æ±‚keyæ˜¯å”¯ä¸€çš„ï¼Œè€Œè¾…åŠ©ç´¢å¼•çš„keyå¯ä»¥é‡å¤ã€‚å¦‚æžœæˆ‘ä»¬åœ¨Col2ä¸Šå»ºç«‹ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™æ­¤ç´¢å¼•çš„ç»“æž„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å›¾9 åŒæ ·ä¹Ÿæ˜¯ä¸€é¢—B+Treeï¼ŒdataåŸŸä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚å› æ­¤ï¼ŒMyISAMä¸­ç´¢å¼•æ£€ç´¢çš„ç®—æ³•ä¸ºé¦–å…ˆæŒ‰ç…§B+Treeæœç´¢ç®—æ³•æœç´¢ç´¢å¼•ï¼Œå¦‚æžœæŒ‡å®šçš„Keyå­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶dataåŸŸçš„å€¼ï¼Œç„¶åŽä»¥dataåŸŸçš„å€¼ä¸ºåœ°å€ï¼Œè¯»å–ç›¸åº”æ•°æ®è®°å½•ã€‚ MyISAMçš„ç´¢å¼•æ–¹å¼ä¹Ÿå«åšâ€œéžèšé›†â€çš„ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆç§°å‘¼æ˜¯ä¸ºäº†ä¸ŽInnoDBçš„èšé›†ç´¢å¼•åŒºåˆ†ã€‚ InnoDBç´¢å¼•å®žçŽ° è™½ç„¶InnoDBä¹Ÿä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æž„ï¼Œä½†å…·ä½“å®žçŽ°æ–¹å¼å´ä¸ŽMyISAMæˆªç„¶ä¸åŒã€‚ ç¬¬ä¸€ä¸ªé‡å¤§åŒºåˆ«æ˜¯InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ã€‚ä»Žä¸Šæ–‡çŸ¥é“ï¼ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚è€Œåœ¨InnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æž„ï¼Œè¿™æ£µæ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤InnoDBè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚ å›¾10 å›¾10æ˜¯InnoDBä¸»ç´¢å¼•ï¼ˆåŒæ—¶ä¹Ÿæ˜¯æ•°æ®æ–‡ä»¶ï¼‰çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°å¶èŠ‚ç‚¹åŒ…å«äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ç§ç´¢å¼•å«åšèšé›†ç´¢å¼•ã€‚å› ä¸ºInnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«è¦æŒ‰ä¸»é”®èšé›†ï¼Œæ‰€ä»¥InnoDBè¦æ±‚è¡¨å¿…é¡»æœ‰ä¸»é”®ï¼ˆMyISAMå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œå¦‚æžœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œå¦‚æžœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»åž‹ä¸ºé•¿æ•´å½¢ã€‚ ç¬¬äºŒä¸ªä¸ŽMyISAMç´¢å¼•çš„ä¸åŒæ˜¯InnoDBçš„è¾…åŠ©ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯åœ°å€ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDBçš„æ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚ä¾‹å¦‚ï¼Œå›¾11ä¸ºå®šä¹‰åœ¨Col3ä¸Šçš„ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼š å›¾11 è¿™é‡Œä»¥è‹±æ–‡å­—ç¬¦çš„ASCIIç ä½œä¸ºæ¯”è¾ƒå‡†åˆ™ã€‚èšé›†ç´¢å¼•è¿™ç§å®žçŽ°æ–¹å¼ä½¿å¾—æŒ‰ä¸»é”®çš„æœç´¢ååˆ†é«˜æ•ˆï¼Œä½†æ˜¯è¾…åŠ©ç´¢å¼•æœç´¢éœ€è¦æ£€ç´¢ä¸¤éç´¢å¼•ï¼šé¦–å…ˆæ£€ç´¢è¾…åŠ©ç´¢å¼•èŽ·å¾—ä¸»é”®ï¼Œç„¶åŽç”¨ä¸»é”®åˆ°ä¸»ç´¢å¼•ä¸­æ£€ç´¢èŽ·å¾—è®°å½•ã€‚ äº†è§£ä¸åŒå­˜å‚¨å¼•æ“Žçš„ç´¢å¼•å®žçŽ°æ–¹å¼å¯¹äºŽæ­£ç¡®ä½¿ç”¨å’Œä¼˜åŒ–ç´¢å¼•éƒ½éžå¸¸æœ‰å¸®åŠ©ï¼Œä¾‹å¦‚çŸ¥é“äº†InnoDBçš„ç´¢å¼•å®žçŽ°åŽï¼Œå°±å¾ˆå®¹æ˜“æ˜Žç™½ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»ç´¢å¼•ï¼Œè¿‡é•¿çš„ä¸»ç´¢å¼•ä¼šä»¤è¾…åŠ©ç´¢å¼•å˜å¾—è¿‡å¤§ã€‚å†ä¾‹å¦‚ï¼Œç”¨éžå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®åœ¨InnoDBä¸­ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºInnoDBæ•°æ®æ–‡ä»¶æœ¬èº«æ˜¯ä¸€é¢—B+Treeï¼Œéžå•è°ƒçš„ä¸»é”®ä¼šé€ æˆåœ¨æ’å…¥æ–°è®°å½•æ—¶æ•°æ®æ–‡ä»¶ä¸ºäº†ç»´æŒB+Treeçš„ç‰¹æ€§è€Œé¢‘ç¹çš„åˆ†è£‚è°ƒæ•´ï¼Œååˆ†ä½Žæ•ˆï¼Œè€Œä½¿ç”¨è‡ªå¢žå­—æ®µä½œä¸ºä¸»é”®åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ ä¸‹ä¸€ç« å°†å…·ä½“è®¨è®ºè¿™äº›ä¸Žç´¢å¼•æœ‰å…³çš„ä¼˜åŒ–ç­–ç•¥ã€‚ ç´¢å¼•ä½¿ç”¨ç­–ç•¥åŠä¼˜åŒ– MySQLçš„ä¼˜åŒ–ä¸»è¦åˆ†ä¸ºç»“æž„ä¼˜åŒ–ï¼ˆScheme optimizationï¼‰å’ŒæŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery optimizationï¼‰ã€‚æœ¬ç« è®¨è®ºçš„é«˜æ€§èƒ½ç´¢å¼•ç­–ç•¥ä¸»è¦å±žäºŽç»“æž„ä¼˜åŒ–èŒƒç•´ã€‚æœ¬ç« çš„å†…å®¹å®Œå…¨åŸºäºŽä¸Šæ–‡çš„ç†è®ºåŸºç¡€ï¼Œå®žé™…ä¸Šä¸€æ—¦ç†è§£äº†ç´¢å¼•èƒŒåŽçš„æœºåˆ¶ï¼Œé‚£ä¹ˆé€‰æ‹©é«˜æ€§èƒ½çš„ç­–ç•¥å°±å˜æˆäº†çº¯ç²¹çš„æŽ¨ç†ï¼Œå¹¶ä¸”å¯ä»¥ç†è§£è¿™äº›ç­–ç•¥èƒŒåŽçš„é€»è¾‘ã€‚ ç¤ºä¾‹æ•°æ®åº“ ä¸ºäº†è®¨è®ºç´¢å¼•ç­–ç•¥ï¼Œéœ€è¦ä¸€ä¸ªæ•°æ®é‡ä¸ç®—å°çš„æ•°æ®åº“ä½œä¸ºç¤ºä¾‹ã€‚æœ¬æ–‡é€‰ç”¨MySQLå®˜æ–¹æ–‡æ¡£ä¸­æä¾›çš„ç¤ºä¾‹æ•°æ®åº“ä¹‹ä¸€ï¼šemployeesã€‚è¿™ä¸ªæ•°æ®åº“å…³ç³»å¤æ‚åº¦é€‚ä¸­ï¼Œä¸”æ•°æ®é‡è¾ƒå¤§ã€‚ä¸‹å›¾æ˜¯è¿™ä¸ªæ•°æ®åº“çš„E-Rå…³ç³»å›¾ï¼ˆå¼•ç”¨è‡ªMySQLå®˜æ–¹æ‰‹å†Œï¼‰ï¼š å›¾12 MySQLå®˜æ–¹æ–‡æ¡£ä¸­å…³äºŽæ­¤æ•°æ®åº“çš„é¡µé¢ä¸ºhttp://dev.mysql.com/doc/employee/en/employee.htmlã€‚é‡Œé¢è¯¦ç»†ä»‹ç»äº†æ­¤æ•°æ®åº“ï¼Œå¹¶æä¾›äº†ä¸‹è½½åœ°å€å’Œå¯¼å…¥æ–¹æ³•ï¼Œå¦‚æžœæœ‰å…´è¶£å¯¼å…¥æ­¤æ•°æ®åº“åˆ°è‡ªå·±çš„MySQLå¯ä»¥å‚è€ƒæ–‡ä¸­å†…å®¹ã€‚ æœ€å·¦å‰ç¼€åŽŸç†ä¸Žç›¸å…³ä¼˜åŒ– é«˜æ•ˆä½¿ç”¨ç´¢å¼•çš„é¦–è¦æ¡ä»¶æ˜¯çŸ¥é“ä»€ä¹ˆæ ·çš„æŸ¥è¯¢ä¼šä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¸ªé—®é¢˜å’ŒB+Treeä¸­çš„â€œæœ€å·¦å‰ç¼€åŽŸç†â€æœ‰å…³ï¼Œä¸‹é¢é€šè¿‡ä¾‹å­è¯´æ˜Žæœ€å·¦å‰ç¼€åŽŸç†ã€‚ è¿™é‡Œå…ˆè¯´ä¸€ä¸‹è”åˆç´¢å¼•çš„æ¦‚å¿µã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾ç´¢å¼•åªå¼•ç”¨äº†å•ä¸ªçš„åˆ—ï¼Œå®žé™…ä¸Šï¼ŒMySQLä¸­çš„ç´¢å¼•å¯ä»¥ä»¥ä¸€å®šé¡ºåºå¼•ç”¨å¤šä¸ªåˆ—ï¼Œè¿™ç§ç´¢å¼•å«åšè”åˆç´¢å¼•ï¼Œä¸€èˆ¬çš„ï¼Œä¸€ä¸ªè”åˆç´¢å¼•æ˜¯ä¸€ä¸ªæœ‰åºå…ƒç»„&lt;a1, a2, â€¦, an&gt;ï¼Œå…¶ä¸­å„ä¸ªå…ƒç´ å‡ä¸ºæ•°æ®è¡¨çš„ä¸€åˆ—ï¼Œå®žé™…ä¸Šè¦ä¸¥æ ¼å®šä¹‰ç´¢å¼•éœ€è¦ç”¨åˆ°å…³ç³»ä»£æ•°ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä¸æƒ³è®¨è®ºå¤ªå¤šå…³ç³»ä»£æ•°çš„è¯é¢˜ï¼Œå› ä¸ºé‚£æ ·ä¼šæ˜¾å¾—å¾ˆæž¯ç‡¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†åšä¸¥æ ¼å®šä¹‰ã€‚å¦å¤–ï¼Œå•åˆ—ç´¢å¼•å¯ä»¥çœ‹æˆè”åˆç´¢å¼•å…ƒç´ æ•°ä¸º1çš„ç‰¹ä¾‹ã€‚ ä»¥employees.titlesè¡¨ä¸ºä¾‹ï¼Œä¸‹é¢å…ˆæŸ¥çœ‹å…¶ä¸Šéƒ½æœ‰å“ªäº›ç´¢å¼•ï¼š SHOW INDEX FROM employees.titles;+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Null | Index_type |+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+| titles | 0 | PRIMARY | 1 | emp_no | A | NULL | | BTREE || titles | 0 | PRIMARY | 2 | title | A | NULL | | BTREE || titles | 0 | PRIMARY | 3 | from_date | A | 443308 | | BTREE || titles | 1 | emp_no | 1 | emp_no | A | 443308 | | BTREE |+â€”â€”â€“+â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”â€”â€”-+â€”â€”+â€”â€”â€”â€”+ ä»Žç»“æžœä¸­å¯ä»¥åˆ°titlesè¡¨çš„ä¸»ç´¢å¼•ä¸º&lt;emp_no, title, from_date&gt;ï¼Œè¿˜æœ‰ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no&gt;ã€‚ä¸ºäº†é¿å…å¤šä¸ªç´¢å¼•ä½¿äº‹æƒ…å˜å¤æ‚ï¼ˆMySQLçš„SQLä¼˜åŒ–å™¨åœ¨å¤šç´¢å¼•æ—¶è¡Œä¸ºæ¯”è¾ƒå¤æ‚ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¾…åŠ©ç´¢å¼•dropæŽ‰ï¼š ALTER TABLE employees.titles DROP INDEX emp_no; è¿™æ ·å°±å¯ä»¥ä¸“å¿ƒåˆ†æžç´¢å¼•PRIMARYçš„è¡Œä¸ºäº†ã€‚ æƒ…å†µä¸€ï¼šå…¨åˆ—åŒ¹é…ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™ AND from_date=â€™1986-06-26â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+| 1 | SIMPLE | titles | const | PRIMARY | PRIMARY | 59 | const,const,const | 1 | |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+ å¾ˆæ˜Žæ˜¾ï¼Œå½“æŒ‰ç…§ç´¢å¼•ä¸­æ‰€æœ‰åˆ—è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ˆè¿™é‡Œç²¾ç¡®åŒ¹é…æŒ‡â€œ=â€æˆ–â€œINâ€åŒ¹é…ï¼‰æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç†è®ºä¸Šç´¢å¼•å¯¹é¡ºåºæ˜¯æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äºŽMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´whereå­å¥çš„æ¡ä»¶é¡ºåºä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ï¼Œä¾‹å¦‚æˆ‘ä»¬å°†whereä¸­çš„æ¡ä»¶é¡ºåºé¢ å€’ï¼š EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™ AND emp_no=â€™10001â€™ AND title=â€™Senior Engineerâ€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+| 1 | SIMPLE | titles | const | PRIMARY | PRIMARY | 59 | const,const,const | 1 | |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”â€”â€”â€”â€”-+â€”â€”+â€”â€”-+ æ•ˆæžœæ˜¯ä¸€æ ·çš„ã€‚ æƒ…å†µäºŒï¼šæœ€å·¦å‰ç¼€åŒ¹é…ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+| 1 | SIMPLE | titles | ref | PRIMARY | PRIMARY | 4 | const | 1 | |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”-+ å½“æŸ¥è¯¢æ¡ä»¶ç²¾ç¡®åŒ¹é…ç´¢å¼•çš„å·¦è¾¹è¿žç»­ä¸€ä¸ªæˆ–å‡ ä¸ªåˆ—æ—¶ï¼Œå¦‚&lt;emp_no&gt;æˆ–&lt;emp_no, title&gt;ï¼Œæ‰€ä»¥å¯ä»¥è¢«ç”¨åˆ°ï¼Œä½†æ˜¯åªèƒ½ç”¨åˆ°ä¸€éƒ¨åˆ†ï¼Œå³æ¡ä»¶æ‰€ç»„æˆçš„æœ€å·¦å‰ç¼€ã€‚ä¸Šé¢çš„æŸ¥è¯¢ä»Žåˆ†æžç»“æžœçœ‹ç”¨åˆ°äº†PRIMARYç´¢å¼•ï¼Œä½†æ˜¯key_lenä¸º4ï¼Œè¯´æ˜Žåªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—å‰ç¼€ã€‚ æƒ…å†µä¸‰ï¼šæŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†ç´¢å¼•ä¸­åˆ—çš„ç²¾ç¡®åŒ¹é…ï¼Œä½†æ˜¯ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | ref | PRIMARY | PRIMARY | 4 | const | 1 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+ æ­¤æ—¶ç´¢å¼•ä½¿ç”¨æƒ…å†µå’Œæƒ…å†µäºŒç›¸åŒï¼Œå› ä¸ºtitleæœªæä¾›ï¼Œæ‰€ä»¥æŸ¥è¯¢åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œè€ŒåŽé¢çš„from_dateè™½ç„¶ä¹Ÿåœ¨ç´¢å¼•ä¸­ï¼Œä½†æ˜¯ç”±äºŽtitleä¸å­˜åœ¨è€Œæ— æ³•å’Œå·¦å‰ç¼€è¿žæŽ¥ï¼Œå› æ­¤éœ€è¦å¯¹ç»“æžœè¿›è¡Œæ‰«æè¿‡æ»¤from_dateï¼ˆè¿™é‡Œç”±äºŽemp_noå”¯ä¸€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ‰«æï¼‰ã€‚å¦‚æžœæƒ³è®©from_dateä¹Ÿä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯whereè¿‡æ»¤ï¼Œå¯ä»¥å¢žåŠ ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no, from_date&gt;ï¼Œæ­¤æ—¶ä¸Šé¢çš„æŸ¥è¯¢ä¼šä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸ºâ€œéš”ç¦»åˆ—â€çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå°†emp_noä¸Žfrom_dateä¹‹é—´çš„â€œå‘â€å¡«ä¸Šã€‚ é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹titleä¸€å…±æœ‰å‡ ç§ä¸åŒçš„å€¼ï¼š SELECT DISTINCT(title) FROM employees.titles;+â€”â€”â€”â€”â€”â€”â€“+| title |+â€”â€”â€”â€”â€”â€”â€“+| Senior Engineer || Staff || Engineer || Senior Staff || Assistant Engineer || Technique Leader || Manager |+â€”â€”â€”â€”â€”â€”â€“+ åªæœ‰7ç§ã€‚åœ¨è¿™ç§æˆä¸ºâ€œå‘â€çš„åˆ—å€¼æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ç”¨â€œINâ€æ¥å¡«è¡¥è¿™ä¸ªâ€œå‘â€ä»Žè€Œå½¢æˆæœ€å·¦å‰ç¼€ï¼š EXPLAIN SELECT * FROM employees.titlesWHERE emp_no=â€™10001â€™AND title IN (â€˜Senior Engineerâ€™, â€˜Staffâ€™, â€˜Engineerâ€™, â€˜Senior Staffâ€™, â€˜Assistant Engineerâ€™, â€˜Technique Leaderâ€™, â€˜Managerâ€™)AND from_date=â€™1986-06-26â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | range | PRIMARY | PRIMARY | 59 | NULL | 7 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+ è¿™æ¬¡key_lenä¸º59ï¼Œè¯´æ˜Žç´¢å¼•è¢«ç”¨å…¨äº†ï¼Œä½†æ˜¯ä»Žtypeå’Œrowsçœ‹å‡ºINå®žé™…ä¸Šæ‰§è¡Œäº†ä¸€ä¸ªrangeæŸ¥è¯¢ï¼Œè¿™é‡Œæ£€æŸ¥äº†7ä¸ªkeyã€‚çœ‹ä¸‹ä¸¤ç§æŸ¥è¯¢çš„æ€§èƒ½æ¯”è¾ƒï¼š SHOW PROFILES;+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+| Query_ID | Duration | Query |+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+| 10 | 0.00058000 | SELECT FROM employees.titles WHERE emp_no=â€™10001â€™ AND from_date=â€™1986-06-26â€™|| 11 | 0.00052500 | SELECT FROM employees.titles WHERE emp_no=â€™10001â€™ AND title IN â€¦ |+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+ â€œå¡«å‘â€åŽæ€§èƒ½æå‡äº†ä¸€ç‚¹ã€‚å¦‚æžœç»è¿‡emp_noç­›é€‰åŽä½™ä¸‹å¾ˆå¤šæ•°æ®ï¼Œåˆ™åŽè€…æ€§èƒ½ä¼˜åŠ¿ä¼šæ›´åŠ æ˜Žæ˜¾ã€‚å½“ç„¶ï¼Œå¦‚æžœtitleçš„å€¼å¾ˆå¤šï¼Œç”¨å¡«å‘å°±ä¸åˆé€‚äº†ï¼Œå¿…é¡»å»ºç«‹è¾…åŠ©ç´¢å¼•ã€‚ æƒ…å†µå››ï¼šæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‡å®šç´¢å¼•ç¬¬ä¸€åˆ—ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE from_date=â€™1986-06-26â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | ALL | NULL | NULL | NULL | NULL | 443308 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+ ç”±äºŽä¸æ˜¯æœ€å·¦å‰ç¼€ï¼Œç´¢å¼•è¿™æ ·çš„æŸ¥è¯¢æ˜¾ç„¶ç”¨ä¸åˆ°ç´¢å¼•ã€‚ æƒ…å†µäº”ï¼šåŒ¹é…æŸåˆ—çš„å‰ç¼€å­—ç¬¦ä¸²ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND title LIKE â€˜Senior%â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | range | PRIMARY | PRIMARY | 56 | NULL | 1 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+ æ­¤æ—¶å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ˜¯å¦‚æžœé€šé…ç¬¦ä¸æ˜¯åªå‡ºçŽ°åœ¨æœ«å°¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚ï¼ˆåŽŸæ–‡è¡¨è¿°æœ‰è¯¯ï¼Œå¦‚æžœé€šé…ç¬¦%ä¸å‡ºçŽ°åœ¨å¼€å¤´ï¼Œåˆ™å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ ¹æ®å…·ä½“æƒ…å†µä¸åŒå¯èƒ½åªä¼šç”¨å…¶ä¸­ä¸€ä¸ªå‰ç¼€ï¼‰ æƒ…å†µå…­ï¼šèŒƒå›´æŸ¥è¯¢ã€‚ EXPLAIN SELECT * FROM employees.titles WHERE emp_no &lt; â€˜10010â€™ and title=â€™Senior Engineerâ€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | range | PRIMARY | PRIMARY | 4 | NULL | 16 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+ èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆå¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯èŒƒå›´åˆ—åŽé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚åŒæ—¶ï¼Œç´¢å¼•æœ€å¤šç”¨äºŽä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå› æ­¤å¦‚æžœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•ã€‚ EXPLAIN SELECT * FROM employees.titlesWHERE emp_no &lt; â€˜10010â€™AND title=â€™Senior Engineerâ€™AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | range | PRIMARY | PRIMARY | 4 | NULL | 16 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+ å¯ä»¥çœ‹åˆ°ç´¢å¼•å¯¹ç¬¬äºŒä¸ªèŒƒå›´ç´¢å¼•æ— èƒ½ä¸ºåŠ›ã€‚è¿™é‡Œç‰¹åˆ«è¦è¯´æ˜ŽMySQLä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä»…ç”¨explainå¯èƒ½æ— æ³•åŒºåˆ†èŒƒå›´ç´¢å¼•å’Œå¤šå€¼åŒ¹é…ï¼Œå› ä¸ºåœ¨typeä¸­è¿™ä¸¤è€…éƒ½æ˜¾ç¤ºä¸ºrangeã€‚åŒæ—¶ï¼Œç”¨äº†â€œbetweenâ€å¹¶ä¸æ„å‘³ç€å°±æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ï¼š EXPLAIN SELECT * FROM employees.titlesWHERE emp_no BETWEEN â€˜10001â€™ AND â€˜10010â€™AND title=â€™Senior Engineerâ€™AND from_date BETWEEN â€˜1986-01-01â€™ AND â€˜1986-12-31â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | range | PRIMARY | PRIMARY | 59 | NULL | 16 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”+â€”â€”â€”â€”-+ çœ‹èµ·æ¥æ˜¯ç”¨äº†ä¸¤ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œä½†ä½œç”¨äºŽemp_noä¸Šçš„â€œBETWEENâ€å®žé™…ä¸Šç›¸å½“äºŽâ€œINâ€ï¼Œä¹Ÿå°±æ˜¯è¯´emp_noå®žé™…æ˜¯å¤šå€¼ç²¾ç¡®åŒ¹é…ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŸ¥è¯¢ç”¨åˆ°äº†ç´¢å¼•å…¨éƒ¨ä¸‰ä¸ªåˆ—ã€‚å› æ­¤åœ¨MySQLä¸­è¦è°¨æ…Žåœ°åŒºåˆ†å¤šå€¼åŒ¹é…å’ŒèŒƒå›´åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¹MySQLçš„è¡Œä¸ºäº§ç”Ÿå›°æƒ‘ã€‚ æƒ…å†µä¸ƒï¼šæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ã€‚ å¾ˆä¸å¹¸ï¼Œå¦‚æžœæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œåˆ™MySQLä¸ä¼šä¸ºè¿™åˆ—ä½¿ç”¨ç´¢å¼•ï¼ˆè™½ç„¶æŸäº›åœ¨æ•°å­¦æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨ï¼‰ã€‚ä¾‹å¦‚ï¼š EXPLAIN SELECT * FROM employees.titles WHERE emp_no=â€™10001â€™ AND left(title, 6)=â€™Seniorâ€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | ref | PRIMARY | PRIMARY | 4 | const | 1 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”+â€”â€”â€”+â€”â€”-+â€”â€”+â€”â€”â€”â€”-+ è™½ç„¶è¿™ä¸ªæŸ¥è¯¢å’Œæƒ…å†µäº”ä¸­åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ç”±äºŽä½¿ç”¨äº†å‡½æ•°leftï¼Œåˆ™æ— æ³•ä¸ºtitleåˆ—åº”ç”¨ç´¢å¼•ï¼Œè€Œæƒ…å†µäº”ä¸­ç”¨LIKEåˆ™å¯ä»¥ã€‚å†å¦‚ï¼š EXPLAIN SELECT * FROM employees.titles WHERE emp_no - 1=â€™10000â€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| 1 | SIMPLE | titles | ALL | NULL | NULL | NULL | NULL | 443308 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+ æ˜¾ç„¶è¿™ä¸ªæŸ¥è¯¢ç­‰ä»·äºŽæŸ¥è¯¢emp_noä¸º10001çš„å‡½æ•°ï¼Œä½†æ˜¯ç”±äºŽæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒMySQLæ— æ³•ä¸ºå…¶ä½¿ç”¨ç´¢å¼•ã€‚çœ‹æ¥MySQLè¿˜æ²¡æœ‰æ™ºèƒ½åˆ°è‡ªåŠ¨ä¼˜åŒ–å¸¸é‡è¡¨è¾¾å¼çš„ç¨‹åº¦ï¼Œå› æ­¤åœ¨å†™æŸ¥è¯¢è¯­å¥æ—¶å°½é‡é¿å…è¡¨è¾¾å¼å‡ºçŽ°åœ¨æŸ¥è¯¢ä¸­ï¼Œè€Œæ˜¯å…ˆæ‰‹å·¥ç§ä¸‹ä»£æ•°è¿ç®—ï¼Œè½¬æ¢ä¸ºæ— è¡¨è¾¾å¼çš„æŸ¥è¯¢è¯­å¥ã€‚ ç´¢å¼•é€‰æ‹©æ€§ä¸Žå‰ç¼€ç´¢å¼• æ—¢ç„¶ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯åªè¦æ˜¯æŸ¥è¯¢è¯­å¥éœ€è¦ï¼Œå°±å»ºä¸Šç´¢å¼•ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å› ä¸ºç´¢å¼•è™½ç„¶åŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ç´¢å¼•ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼šç´¢å¼•æ–‡ä»¶æœ¬èº«è¦æ¶ˆè€—å­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶ç´¢å¼•ä¼šåŠ é‡æ’å…¥ã€åˆ é™¤å’Œä¿®æ”¹è®°å½•æ—¶çš„è´Ÿæ‹…ï¼Œå¦å¤–ï¼ŒMySQLåœ¨è¿è¡Œæ—¶ä¹Ÿè¦æ¶ˆè€—èµ„æºç»´æŠ¤ç´¢å¼•ï¼Œå› æ­¤ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä¸€èˆ¬ä¸¤ç§æƒ…å†µä¸‹ä¸å»ºè®®å»ºç´¢å¼•ã€‚ ç¬¬ä¸€ç§æƒ…å†µæ˜¯è¡¨è®°å½•æ¯”è¾ƒå°‘ï¼Œä¾‹å¦‚ä¸€ä¸¤åƒæ¡ç”šè‡³åªæœ‰å‡ ç™¾æ¡è®°å½•çš„è¡¨ï¼Œæ²¡å¿…è¦å»ºç´¢å¼•ï¼Œè®©æŸ¥è¯¢åšå…¨è¡¨æ‰«æå°±å¥½äº†ã€‚è‡³äºŽå¤šå°‘æ¡è®°å½•æ‰ç®—å¤šï¼Œè¿™ä¸ªä¸ªäººæœ‰ä¸ªäººçš„çœ‹æ³•ï¼Œæˆ‘ä¸ªäººçš„ç»éªŒæ˜¯ä»¥2000ä½œä¸ºåˆ†ç•Œçº¿ï¼Œè®°å½•æ•°ä¸è¶…è¿‡ 2000å¯ä»¥è€ƒè™‘ä¸å»ºç´¢å¼•ï¼Œè¶…è¿‡2000æ¡å¯ä»¥é…Œæƒ…è€ƒè™‘ç´¢å¼•ã€‚ å¦ä¸€ç§ä¸å»ºè®®å»ºç´¢å¼•çš„æƒ…å†µæ˜¯ç´¢å¼•çš„é€‰æ‹©æ€§è¾ƒä½Žã€‚æ‰€è°“ç´¢å¼•çš„é€‰æ‹©æ€§ï¼ˆSelectivityï¼‰ï¼Œæ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆä¹Ÿå«åŸºæ•°ï¼ŒCardinalityï¼‰ä¸Žè¡¨è®°å½•æ•°ï¼ˆ#Tï¼‰çš„æ¯”å€¼ï¼š Index Selectivity = Cardinality / #T æ˜¾ç„¶é€‰æ‹©æ€§çš„å–å€¼èŒƒå›´ä¸º(0, 1]ï¼Œé€‰æ‹©æ€§è¶Šé«˜çš„ç´¢å¼•ä»·å€¼è¶Šå¤§ï¼Œè¿™æ˜¯ç”±B+Treeçš„æ€§è´¨å†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œä¸Šæ–‡ç”¨åˆ°çš„employees.titlesè¡¨ï¼Œå¦‚æžœtitleå­—æ®µç»å¸¸è¢«å•ç‹¬æŸ¥è¯¢ï¼Œæ˜¯å¦éœ€è¦å»ºç´¢å¼•ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„é€‰æ‹©æ€§ï¼š SELECT count(DISTINCT(title))/count(*) AS Selectivity FROM employees.titles;+â€”â€”â€”â€”-+| Selectivity |+â€”â€”â€”â€”-+| 0.0000 |+â€”â€”â€”â€”-+ titleçš„é€‰æ‹©æ€§ä¸è¶³0.0001ï¼ˆç²¾ç¡®å€¼ä¸º0.00001579ï¼‰ï¼Œæ‰€ä»¥å®žåœ¨æ²¡æœ‰ä»€ä¹ˆå¿…è¦ä¸ºå…¶å•ç‹¬å»ºç´¢å¼•ã€‚ æœ‰ä¸€ç§ä¸Žç´¢å¼•é€‰æ‹©æ€§æœ‰å…³çš„ç´¢å¼•ä¼˜åŒ–ç­–ç•¥å«åšå‰ç¼€ç´¢å¼•ï¼Œå°±æ˜¯ç”¨åˆ—çš„å‰ç¼€ä»£æ›¿æ•´ä¸ªåˆ—ä½œä¸ºç´¢å¼•keyï¼Œå½“å‰ç¼€é•¿åº¦åˆé€‚æ—¶ï¼Œå¯ä»¥åšåˆ°æ—¢ä½¿å¾—å‰ç¼€ç´¢å¼•çš„é€‰æ‹©æ€§æŽ¥è¿‘å…¨åˆ—ç´¢å¼•ï¼ŒåŒæ—¶å› ä¸ºç´¢å¼•keyå˜çŸ­è€Œå‡å°‘äº†ç´¢å¼•æ–‡ä»¶çš„å¤§å°å’Œç»´æŠ¤å¼€é”€ã€‚ä¸‹é¢ä»¥employees.employeesè¡¨ä¸ºä¾‹ä»‹ç»å‰ç¼€ç´¢å¼•çš„é€‰æ‹©å’Œä½¿ç”¨ã€‚ ä»Žå›¾12å¯ä»¥çœ‹åˆ°employeesè¡¨åªæœ‰ä¸€ä¸ªç´¢å¼•&lt;emp_no&gt;ï¼Œé‚£ä¹ˆå¦‚æžœæˆ‘ä»¬æƒ³æŒ‰åå­—æœç´¢ä¸€ä¸ªäººï¼Œå°±åªèƒ½å…¨è¡¨æ‰«æäº†ï¼š EXPLAIN SELECT * FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™;+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+| 1 | SIMPLE | employees | ALL | NULL | NULL | NULL | NULL | 300024 | Using where |+â€”-+â€”â€”â€”â€”-+â€”â€”â€”â€“+â€”â€”+â€”â€”â€”â€”â€”+â€”â€”+â€”â€”â€”+â€”â€”+â€”â€”â€“+â€”â€”â€”â€”-+ å¦‚æžœé¢‘ç¹æŒ‰åå­—æœç´¢å‘˜å·¥ï¼Œè¿™æ ·æ˜¾ç„¶æ•ˆçŽ‡å¾ˆä½Žï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘å»ºç´¢å¼•ã€‚æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå»º&lt;first_name&gt;æˆ–&lt;first_name, last_name&gt;ï¼Œçœ‹ä¸‹ä¸¤ä¸ªç´¢å¼•çš„é€‰æ‹©æ€§ï¼š SELECT count(DISTINCT(first_name))/count() AS Selectivity FROM employees.employees;+â€”â€”â€”â€”-+| Selectivity |+â€”â€”â€”â€”-+| 0.0042 |+â€”â€”â€”â€”-+SELECT count(DISTINCT(concat(first_name, last_name)))/count() AS Selectivity FROM employees.employees;+â€”â€”â€”â€”-+| Selectivity |+â€”â€”â€”â€”-+| 0.9313 |+â€”â€”â€”â€”-+ &lt;first_name&gt;æ˜¾ç„¶é€‰æ‹©æ€§å¤ªä½Žï¼Œ&lt;first_name, last_name&gt;é€‰æ‹©æ€§å¾ˆå¥½ï¼Œä½†æ˜¯first_nameå’Œlast_nameåŠ èµ·æ¥é•¿åº¦ä¸º30ï¼Œæœ‰æ²¡æœ‰å…¼é¡¾é•¿åº¦å’Œé€‰æ‹©æ€§çš„åŠžæ³•ï¼Ÿå¯ä»¥è€ƒè™‘ç”¨first_nameå’Œlast_nameçš„å‰å‡ ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œä¾‹å¦‚&lt;first_name, left(last_name, 3)&gt;ï¼Œçœ‹çœ‹å…¶é€‰æ‹©æ€§ï¼š SELECT count(DISTINCT(concat(first_name, left(last_name, 3))))/count(*) AS Selectivity FROM employees.employees;+â€”â€”â€”â€”-+| Selectivity |+â€”â€”â€”â€”-+| 0.7879 |+â€”â€”â€”â€”-+ é€‰æ‹©æ€§è¿˜ä¸é”™ï¼Œä½†ç¦»0.9313è¿˜æ˜¯æœ‰ç‚¹è·ç¦»ï¼Œé‚£ä¹ˆæŠŠlast_nameå‰ç¼€åŠ åˆ°4ï¼š SELECT count(DISTINCT(concat(first_name, left(last_name, 4))))/count(*) AS Selectivity FROM employees.employees;+â€”â€”â€”â€”-+| Selectivity |+â€”â€”â€”â€”-+| 0.9007 |+â€”â€”â€”â€”-+ è¿™æ—¶é€‰æ‹©æ€§å·²ç»å¾ˆç†æƒ³äº†ï¼Œè€Œè¿™ä¸ªç´¢å¼•çš„é•¿åº¦åªæœ‰18ï¼Œæ¯”&lt;first_name, last_name&gt;çŸ­äº†æŽ¥è¿‘ä¸€åŠï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‰ç¼€ç´¢å¼• å»ºä¸Šï¼š ALTER TABLE employees.employeesADD INDEX first_name_last_name4 (first_name, last_name(4)); æ­¤æ—¶å†æ‰§è¡Œä¸€éæŒ‰åå­—æŸ¥è¯¢ï¼Œæ¯”è¾ƒåˆ†æžä¸€ä¸‹ä¸Žå»ºç´¢å¼•å‰çš„ç»“æžœï¼š SHOW PROFILES;+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+| Query_ID | Duration | Query |+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+| 87 | 0.11941700 | SELECT FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ || 90 | 0.00092400 | SELECT FROM employees.employees WHERE first_name=â€™Ericâ€™ AND last_name=â€™Anidoâ€™ |+â€”â€”â€”-+â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+ æ€§èƒ½çš„æå‡æ˜¯æ˜¾è‘—çš„ï¼ŒæŸ¥è¯¢é€Ÿåº¦æé«˜äº†120å¤šå€ã€‚ å‰ç¼€ç´¢å¼•å…¼é¡¾ç´¢å¼•å¤§å°å’ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹æ˜¯ä¸èƒ½ç”¨äºŽORDER BYå’ŒGROUP BYæ“ä½œï¼Œä¹Ÿä¸èƒ½ç”¨äºŽCovering indexï¼ˆå³å½“ç´¢å¼•æœ¬èº«åŒ…å«æŸ¥è¯¢æ‰€éœ€å…¨éƒ¨æ•°æ®æ—¶ï¼Œä¸å†è®¿é—®æ•°æ®æ–‡ä»¶æœ¬èº«ï¼‰ã€‚ InnoDBçš„ä¸»é”®é€‰æ‹©ä¸Žæ’å…¥ä¼˜åŒ– åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“Žæ—¶ï¼Œå¦‚æžœæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œè¯·æ°¸è¿œä½¿ç”¨ä¸€ä¸ªä¸Žä¸šåŠ¡æ— å…³çš„è‡ªå¢žå­—æ®µä½œä¸ºä¸»é”®ã€‚ ç»å¸¸çœ‹åˆ°æœ‰å¸–å­æˆ–åšå®¢è®¨è®ºä¸»é”®é€‰æ‹©é—®é¢˜ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸šåŠ¡æ— å…³çš„è‡ªå¢žä¸»é”®ï¼Œæœ‰äººè§‰å¾—æ²¡æœ‰å¿…è¦ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨å¦‚å­¦å·æˆ–èº«ä»½è¯å·è¿™ç§å”¯ä¸€å­—æ®µä½œä¸ºä¸»é”®ã€‚ä¸è®ºæ”¯æŒå“ªç§è®ºç‚¹ï¼Œå¤§å¤šæ•°è®ºæ®éƒ½æ˜¯ä¸šåŠ¡å±‚é¢çš„ã€‚å¦‚æžœä»Žæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–è§’åº¦çœ‹ï¼Œä½¿ç”¨InnoDBå¼•æ“Žè€Œä¸ä½¿ç”¨è‡ªå¢žä¸»é”®ç»å¯¹æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä¸»æ„ã€‚ ä¸Šæ–‡è®¨è®ºè¿‡InnoDBçš„ç´¢å¼•å®žçŽ°ï¼ŒInnoDBä½¿ç”¨èšé›†ç´¢å¼•ï¼Œæ•°æ®è®°å½•æœ¬èº«è¢«å­˜äºŽä¸»ç´¢å¼•ï¼ˆä¸€é¢—B+Treeï¼‰çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚è¿™å°±è¦æ±‚åŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…ï¼ˆå¤§å°ä¸ºä¸€ä¸ªå†…å­˜é¡µæˆ–ç£ç›˜é¡µï¼‰çš„å„æ¡æ•°æ®è®°å½•æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œå› æ­¤æ¯å½“æœ‰ä¸€æ¡æ–°çš„è®°å½•æ’å…¥æ—¶ï¼ŒMySQLä¼šæ ¹æ®å…¶ä¸»é”®å°†å…¶æ’å…¥é€‚å½“çš„èŠ‚ç‚¹å’Œä½ç½®ï¼Œå¦‚æžœé¡µé¢è¾¾åˆ°è£…è½½å› å­ï¼ˆInnoDBé»˜è®¤ä¸º15/16ï¼‰ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µï¼ˆèŠ‚ç‚¹ï¼‰ã€‚ å¦‚æžœè¡¨ä½¿ç”¨è‡ªå¢žä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åŽç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å›¾13 è¿™æ ·å°±ä¼šå½¢æˆä¸€ä¸ªç´§å‡‘çš„ç´¢å¼•ç»“æž„ï¼Œè¿‘ä¼¼é¡ºåºå¡«æ»¡ã€‚ç”±äºŽæ¯æ¬¡æ’å…¥æ—¶ä¹Ÿä¸éœ€è¦ç§»åŠ¨å·²æœ‰æ•°æ®ï¼Œå› æ­¤æ•ˆçŽ‡å¾ˆé«˜ï¼Œä¹Ÿä¸ä¼šå¢žåŠ å¾ˆå¤šå¼€é”€åœ¨ç»´æŠ¤ç´¢å¼•ä¸Šã€‚ å¦‚æžœä½¿ç”¨éžè‡ªå¢žä¸»é”®ï¼ˆå¦‚æžœèº«ä»½è¯å·æˆ–å­¦å·ç­‰ï¼‰ï¼Œç”±äºŽæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºŽéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°çºªå½•éƒ½è¦è¢«æ’åˆ°çŽ°æœ‰ç´¢å¼•é¡µå¾—ä¸­é—´æŸä¸ªä½ç½®ï¼š å›¾14 æ­¤æ—¶MySQLä¸å¾—ä¸ä¸ºäº†å°†æ–°è®°å½•æ’åˆ°åˆé€‚ä½ç½®è€Œç§»åŠ¨æ•°æ®ï¼Œç”šè‡³ç›®æ ‡é¡µé¢å¯èƒ½å·²ç»è¢«å›žå†™åˆ°ç£ç›˜ä¸Šè€Œä»Žç¼“å­˜ä¸­æ¸…æŽ‰ï¼Œæ­¤æ—¶åˆè¦ä»Žç£ç›˜ä¸Šè¯»å›žæ¥ï¼Œè¿™å¢žåŠ äº†å¾ˆå¤šå¼€é”€ï¼ŒåŒæ—¶é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢Žç‰‡ï¼Œå¾—åˆ°äº†ä¸å¤Ÿç´§å‡‘çš„ç´¢å¼•ç»“æž„ï¼ŒåŽç»­ä¸å¾—ä¸é€šè¿‡OPTIMIZE TABLEæ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–å¡«å……é¡µé¢ã€‚ å› æ­¤ï¼Œåªè¦å¯ä»¥ï¼Œè¯·å°½é‡åœ¨InnoDBä¸Šé‡‡ç”¨è‡ªå¢žå­—æ®µåšä¸»é”®ã€‚ åŽè®° è¿™ç¯‡æ–‡ç« æ–­æ–­ç»­ç»­å†™äº†åŠä¸ªæœˆï¼Œä¸»è¦å†…å®¹å°±æ˜¯ä¸Šé¢è¿™äº›äº†ã€‚ä¸å¯å¦è®¤ï¼Œè¿™ç¯‡æ–‡ç« åœ¨ä¸€å®šç¨‹åº¦ä¸Šæœ‰çº¸ä¸Šè°ˆå…µä¹‹å«Œï¼Œå› ä¸ºæˆ‘æœ¬äººå¯¹MySQLçš„ä½¿ç”¨å±žäºŽèœé¸Ÿçº§åˆ«ï¼Œæ›´æ²¡æœ‰å¤ªå¤šæ•°æ®åº“è°ƒä¼˜çš„ç»éªŒï¼Œåœ¨è¿™é‡Œå¤§è°ˆæ•°æ®åº“ç´¢å¼•è°ƒä¼˜æœ‰ç‚¹å¤§è¨€ä¸æƒ­ã€‚å°±å½“æ˜¯æˆ‘ä¸ªäººçš„ä¸€ç¯‡å­¦ä¹ ç¬”è®°äº†ã€‚ å…¶å®žæ•°æ®åº“ç´¢å¼•è°ƒä¼˜æ˜¯ä¸€é¡¹æŠ€æœ¯æ´»ï¼Œä¸èƒ½ä»…ä»…é ç†è®ºï¼Œå› ä¸ºå®žé™…æƒ…å†µåƒå˜ä¸‡åŒ–ï¼Œè€Œä¸”MySQLæœ¬èº«å­˜åœ¨å¾ˆå¤æ‚çš„æœºåˆ¶ï¼Œå¦‚æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥å’Œå„ç§å¼•æ“Žçš„å®žçŽ°å·®å¼‚ç­‰éƒ½ä¼šä½¿æƒ…å†µå˜å¾—æ›´åŠ å¤æ‚ã€‚ä½†åŒæ—¶è¿™äº›ç†è®ºæ˜¯ç´¢å¼•è°ƒä¼˜çš„åŸºç¡€ï¼Œåªæœ‰åœ¨æ˜Žç™½ç†è®ºçš„åŸºç¡€ä¸Šï¼Œæ‰èƒ½å¯¹è°ƒä¼˜ç­–ç•¥è¿›è¡Œåˆç†æŽ¨æ–­å¹¶äº†è§£å…¶èƒŒåŽçš„æœºåˆ¶ï¼Œç„¶åŽç»“åˆå®žè·µä¸­ä¸æ–­çš„å®žéªŒå’Œæ‘¸ç´¢ï¼Œä»Žè€ŒçœŸæ­£è¾¾åˆ°é«˜æ•ˆä½¿ç”¨MySQLç´¢å¼•çš„ç›®çš„ã€‚ å¦å¤–ï¼ŒMySQLç´¢å¼•åŠå…¶ä¼˜åŒ–æ¶µç›–èŒƒå›´éžå¸¸å¹¿ï¼Œæœ¬æ–‡åªæ˜¯æ¶‰åŠåˆ°å…¶ä¸­ä¸€éƒ¨åˆ†ã€‚å¦‚ä¸ŽæŽ’åºï¼ˆORDER BYï¼‰ç›¸å…³çš„ç´¢å¼•ä¼˜åŒ–åŠè¦†ç›–ç´¢å¼•ï¼ˆCovering indexï¼‰çš„è¯é¢˜æœ¬æ–‡å¹¶æœªæ¶‰åŠï¼ŒåŒæ—¶é™¤B-Treeç´¢å¼•å¤–MySQLè¿˜æ ¹æ®ä¸åŒå¼•æ“Žæ”¯æŒçš„å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰ç­‰æœ¬æ–‡ä¹Ÿå¹¶æœªæ¶‰åŠã€‚å¦‚æžœæœ‰æœºä¼šï¼Œå¸Œæœ›å†å¯¹æœ¬æ–‡æœªæ¶‰åŠçš„éƒ¨åˆ†è¿›è¡Œè¡¥å……å§ã€‚ MySQLç´¢å¼•èƒŒåŽçš„æ•°æ®ç»“æž„åŠç®—æ³•åŽŸç† ä½œè€… å¼ æ´‹ | å‘å¸ƒäºŽ 2011-10-18]]></content>
      <tags>
        <tag>MySQL, Index, Database</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[The Difference between Process and Thread]]></title>
    <url>%2F2020%2F02%2F05%2FThe-Difference-between-Process-and-Thread%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œè¿›ç¨‹æ˜¯æ•´ä¸ªçŽ°ä»£æ“ä½œç³»ç»Ÿçš„æ ¹æœ¬ï¼Œæ“ä½œç³»çµ±æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½æ‰§è¡Œä»»åŠ¡ã€‚éšç€æŠ€æœ¯å‘å±•ï¼Œåœ¨æ‰§è¡Œä¸€äº›ç»†å°ä»»åŠ¡ï¼Œä¸”æœ¬èº«æ— éœ€åˆ†é…å•ç‹¬èµ„æºæ—¶ï¼Œè¿›ç¨‹çš„å®žçŽ°æœºåˆ¶ä¾ç„¶ä¼šç¹ççš„å°†èµ„æºåˆ†å‰²ï¼Œè¿™æ ·é€ æˆæµªè´¹ï¼Œè€Œä¸”è¿˜æ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸“é—¨çš„å¤šä»»åŠ¡æŠ€æœ¯è¢«åˆ›é€ å‡ºæ¥â€”â€”çº¿ç¨‹ã€‚ çº¿ç¨‹çš„ç‰¹ç‚¹å°±æ˜¯åœ¨ä¸éœ€è¦ç‹¬ç«‹èµ„æºçš„æƒ…å†µä¸‹å°±å¯ä»¥è¿è¡Œã€‚å¦‚æ­¤ä¸€æ¥ä¼šæžå¤§èŠ‚çœèµ„æºå¼€é”€ï¼Œä»¥åŠå¤„ç†æ—¶é—´ã€‚ è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸»è¦å·®åˆ«åœ¨äºŽå®ƒä»¬æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†æ–¹å¼ã€‚è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåŽï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶å®ƒè¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆçŽ‡è¦å·®ä¸€äº›ã€‚ä½†å¯¹äºŽä¸€äº›è¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”åˆè¦å…±äº«æŸäº›å˜é‡çš„å¹¶å‘æ“ä½œï¼Œåªèƒ½ç”¨çº¿ç¨‹ï¼Œä¸èƒ½ç”¨è¿›ç¨‹ã€‚ æˆ‘ä»¬æœ‰å¦‚ä¸‹å¯¹æ¯”å›¾ç‰‡ï¼š Tables Process è¿›ç¨‹ Threadçº¿ç¨‹ å¼•å…¥ç›®çš„ å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œæé«˜èµ„æºçš„åˆ©ç”¨çŽ‡å’Œç³»ç»Ÿåžåé‡ è°ƒé«˜å¹¶å‘æ‰§è¡Œçš„é€Ÿåº¦ï¼Œè¿›ä¸€æ­¥æé«˜èµ„æºçš„åˆ©ç”¨çŽ‡å’Œç³»ç»Ÿåžåé‡ å¹¶å‘æ€§ è¾ƒä½Ž è¾ƒé«˜ åŸºæœ¬å±žæ€§ï¼ˆè°ƒåº¦ï¼‰ èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½æ˜¯è¿›ç¨‹ï¼Œç‹¬ç«‹è°ƒåº¦/åˆ†é…çš„åŸºæœ¬å•ä½æ˜¯çº¿ç¨‹ åŸºæœ¬çŠ¶æ€ å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾… å°±ç»ªï¼›æ‰§è¡Œï¼›ç­‰å¾… ç³»ç»Ÿå¼€é”€ åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå¤§ åˆ›å»º/æ’¤é”€/åˆ‡æ¢æ—¶å¼€é”€è¾ƒå° ç³»ç»Ÿæ“ä½œ åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢ åˆ›å»ºï¼›æ’¤é”€ï¼›åˆ‡æ¢ å­˜åœ¨çŠ¶æ€ è¿›ç¨‹æŽ§åˆ¶å—PCB è¿›ç¨‹æŽ§åˆ¶å—PCBï¼Œè¿›ç¨‹æŽ§åˆ¶å—TCB ä½†æ˜¯å¯¹äºŽ Linux æ¥è¯´ï¼Œå®ƒåªæ”¯æŒè½»é‡çº§è¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ï¼Œå¯¹äºŽ Linux è€Œè¨€ï¼š ç³»ç»Ÿå¯åŠ¨åŽçš„ ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯ initï¼Œå®ƒçš„ PID æ˜¯ 1ã€‚init æ˜¯å”¯ä¸€ä¸€ä¸ªç”±ç³»ç»Ÿå†…æ ¸ç›´æŽ¥è¿è¡Œçš„è¿›ç¨‹ã€‚ é™¤äº† init ä¹‹å¤–ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ çˆ¶è¿›ç¨‹ï¼ˆPPID æ ‡è¯†ï¼‰ æ¯ä¸ªè¿›ç¨‹è¿˜æœ‰å››ä¸ª ä¸Žç”¨æˆ·å’Œç»„ç›¸å…³çš„è¯†åˆ«å·1.å®žé™…ç”¨æˆ·è¯†åˆ«å· ï¼ˆreal user IDï¼ŒRUIDï¼‰2.å®žé™…ç»„è¯†åˆ«å· ï¼ˆreal group IDï¼ŒRGIDï¼‰3.æœ‰æ•ˆç”¨æˆ·è¯†åˆ«å· ï¼ˆeffect user IDï¼ŒEUIDï¼‰4.æœ‰æ•ˆç»„è¯†åˆ«å· ï¼ˆeffect group IDï¼ŒEGID ######åœ¨ Linux å†…æ ¸ 2.4 ç‰ˆä»¥å‰ï¼Œçº¿ç¨‹çš„å®žçŽ°å’Œç®¡ç†æ–¹å¼å°±æ˜¯å®Œå…¨æŒ‰ç…§è¿›ç¨‹æ–¹å¼å®žçŽ°çš„ã€‚åœ¨ 2.6 ç‰ˆå†…æ ¸ä»¥åŽæ‰æœ‰äº†å•ç‹¬çš„çº¿ç¨‹å®žçŽ°,ä¸ºäº†å¼¥è¡¥ä¸æ”¯æŒçº¿ç¨‹çš„ç¼ºé™·ï¼ŒLinux å¼•å…¥çº¿ç¨‹ç»„çš„æ¦‚å¿µï¼Œå³è¯¥ç»„ä¸­ç¬¬ä¸€ä¸ªè½»é‡çº§è¿›ç¨‹çš„ PIDï¼Œå®ƒè¢«å­˜å…¥è¿›ç¨‹æè¿°ç¬¦çš„ tgid å­—æ®µä¸­ã€‚getpid()ç³»ç»Ÿè°ƒç”¨è¿”å›žå½“å‰è¿›ç¨‹çš„ tgid å€¼è€Œä¸æ˜¯ pid å€¼ï¼Œå› æ­¤ï¼Œä¸€ä¸ªå¤šçº¿ç¨‹åº”ç”¨çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„ PIDã€‚ fork()ç³»ç»Ÿè°ƒç”¨æ˜¯Unixä¸‹ä»¥è‡ªèº«è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä¸€æ¬¡è°ƒç”¨ï¼Œä¸¤æ¬¡è¿”å›žï¼Œå¦‚æžœè¿”å›žæ˜¯0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹ï¼Œå¦‚æžœè¿”å›žå€¼&gt;0ï¼Œåˆ™æ˜¯çˆ¶è¿›ç¨‹ï¼ˆè¿”å›žå€¼æ˜¯å­è¿›ç¨‹çš„pidï¼‰,å¦‚æžœforkå‡ºé”™ï¼Œè¿”å›žä¸€ä¸ªè´Ÿå€¼. åœ¨fork()çš„è°ƒç”¨å¤„ï¼Œæ•´ä¸ªçˆ¶è¿›ç¨‹ç©ºé—´ä¼šåŽŸæ¨¡åŽŸæ ·åœ°å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ï¼ŒåŒ…æ‹¬æŒ‡ä»¤ï¼Œå˜é‡å€¼ï¼Œç¨‹åºè°ƒç”¨æ ˆï¼ŒçŽ¯å¢ƒå˜é‡ï¼Œç¼“å†²åŒºï¼Œç­‰ç­‰ã€‚ fork()å‡½æ•°ä¼šæŠŠå®ƒæ‰€åœ¨è¯­å¥ä»¥åŽçš„è¯­å¥å¤åˆ¶åˆ°ä¸€ä¸ªå­è¿›ç¨‹é‡Œï¼Œå•ç‹¬æ‰§è¡Œã€‚ å¦‚æžœprintfå‡½æ•°æœ€åŽæ²¡æœ‰&quot;\n&quot;ï¼Œåˆ™è¾“å‡ºç¼“å†²åŒºä¸ä¼šè¢«ç«‹å³æ¸…ç©ºï¼Œè€Œforkå‡½æ•°ä¼šæŠŠè¾“å‡ºç¼“å†²åŒºé‡Œçš„å†…å®¹ä¹Ÿéƒ½å¤åˆ¶åˆ°å­è¿›ç¨‹é‡Œ è¿›ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯çº¿çŠ¶çš„ï¼Œå°½ç®¡ä¸­é—´ä¼šå‘ç”Ÿä¸­æ–­æˆ–æš‚åœï¼Œä½†è¯¥è¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºåªä¸ºè¯¥çº¿çŠ¶æ‰§è¡Œè¿‡ç¨‹æœåŠ¡ã€‚ä¸€æ—¦å‘ç”Ÿè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™äº›èµ„æºéƒ½æ˜¯è¦è¢«ä¿æŠ¤èµ·æ¥çš„ã€‚ çº¿ç¨‹çš„æ”¹å˜åªä»£è¡¨äº† CPU æ‰§è¡Œè¿‡ç¨‹çš„æ”¹å˜ï¼Œè€Œæ²¡æœ‰å‘ç”Ÿè¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºå˜åŒ–ã€‚ è®¡ç®—æœºå†…çš„è½¯ç¡¬ä»¶èµ„æºçš„åˆ†é…ä¸Žçº¿ç¨‹æ— å…³ï¼Œçº¿ç¨‹åªèƒ½å…±äº«å®ƒæ‰€å±žè¿›ç¨‹çš„èµ„æºã€‚ è¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸ä¾èµ–äºŽçº¿ç¨‹è€Œç‹¬ç«‹å­˜åœ¨ï¼›åä¹‹ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ²¡æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä¸Žè¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«åˆ†é…ç»™è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚ çº¿ç¨‹ä¸­æ‰§è¡Œæ—¶ä¸€èˆ¬éƒ½è¦è¿›è¡ŒåŒæ­¥å’Œäº’æ–¥ï¼Œå› ä¸ºä»–ä»¬å…±äº«åŒä¸€è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚ æ–‡ç« æ¥æº:è¿›ç¨‹å’Œçº¿ç¨‹æœ‰å“ªäº›åŒºåˆ«ä¸Žè”ç³»ï¼ŸåŠ›æ‰£ï¼ˆLeetCodeï¼‰]]></content>
      <tags>
        <tag>Operation System</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Everything About HashMap]]></title>
    <url>%2F2020%2F02%2F04%2FEverything-About-HashMap%2F</url>
    <content type="text"><![CDATA[1.ä¸ºä»€ä¹ˆç”¨HashMapï¼Ÿ HashMapæ˜¯ä¸€ä¸ªæ•£åˆ—æ¡¶ï¼ˆæ•°ç»„å’Œé“¾è¡¨ï¼‰ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹(key-value)æ˜ å°„ã€‚ HashMapé‡‡ç”¨äº†æ•°ç»„å’Œé“¾è¡¨çš„æ•°æ®ç»“æž„ï¼Œèƒ½åœ¨æŸ¥è¯¢å’Œä¿®æ”¹æ–¹ä¾¿ç»§æ‰¿äº†æ•°ç»„çš„çº¿æ€§æŸ¥æ‰¾å’Œé“¾è¡¨çš„å¯»å€ä¿®æ”¹ã€‚æ•°ç»„æ˜¯ç”¨æ¥ç¡®å®šæ¡¶çš„ä½ç½®ï¼Œåˆ©ç”¨å…ƒç´ çš„keyçš„hashå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°. é“¾è¡¨æ˜¯ç”¨æ¥è§£å†³hashå†²çªé—®é¢˜ï¼Œå½“å‡ºçŽ°hashå€¼ä¸€æ ·çš„æƒ…å½¢ï¼Œå°±åœ¨æ•°ç»„ä¸Šçš„å¯¹åº”ä½ç½®å½¢æˆä¸€æ¡é“¾è¡¨ã€‚ ç”¨LinkedListä»£æ›¿æ•°ç»„ç»“æž„å¯ä»¥ä¹ˆ? å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œç¨å¾®è¯´æ˜Žä¸€ä¸‹ï¼Œæ­¤é¢˜çš„æ„æ€æ˜¯ï¼Œæºç ä¸­æ˜¯è¿™æ ·çš„ 12345Entry[] table = new Entry[capacity];Entryå°±æ˜¯ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ã€‚ é‚£ä¸‹é¢è¿™æ ·è¡¨ç¤ºï¼Œæ˜¯å¦å¯è¡Œ?List&lt;Entry&gt; table = new LinkedList&lt;Entry&gt;(); ç­”æ¡ˆå¾ˆæ˜Žæ˜¾ï¼Œæ˜¯å¯ä»¥çš„ã€‚ æ—¢ç„¶æ˜¯å¯ä»¥çš„,ä¸ºä»€ä¹ˆHashMapä¸ç”¨LinkedList,è€Œé€‰ç”¨æ•°ç»„?å› ä¸ºç”¨æ•°ç»„æ•ˆçŽ‡æœ€é«˜ï¼åœ¨HashMapä¸­ï¼Œå®šä½æ¡¶çš„ä½ç½®æ˜¯åˆ©ç”¨å…ƒç´ çš„keyçš„å“ˆå¸Œå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å¾—åˆ°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²å¾—åˆ°æ¡¶çš„ä½ç½®ã€‚æ˜¾ç„¶æ•°ç»„çš„æŸ¥æ‰¾æ•ˆçŽ‡æ¯”LinkedListå¤§ã€‚ é‚£ArrayListï¼Œåº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼ŒæŸ¥æ‰¾ä¹Ÿå¿«å•Šï¼Œä¸ºå•¥ä¸ç”¨ArrayList?å› ä¸ºé‡‡ç”¨åŸºæœ¬æ•°ç»„ç»“æž„ï¼Œæ‰©å®¹æœºåˆ¶å¯ä»¥è‡ªå·±å®šä¹‰ï¼ŒHashMapä¸­æ•°ç»„æ‰©å®¹åˆšå¥½æ˜¯2çš„æ¬¡å¹‚ï¼Œåœ¨åšå–æ¨¡è¿ç®—çš„æ•ˆçŽ‡é«˜ã€‚ è€ŒArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯1.5å€æ‰©å®¹ï¼Œé‚£ArrayListä¸ºä»€ä¹ˆæ˜¯1.5å€æ‰©å®¹è¿™å°±ä¸åœ¨æœ¬æ–‡è¯´æ˜Žäº†ã€‚ HashMapæ˜¯éžsynchronizedï¼Œæ‰€ä»¥HashMapå¾ˆå¿«ã€‚ HashMapå¯ä»¥æŽ¥å—nullé”®å’Œå€¼ï¼Œè€ŒHashtableåˆ™ä¸èƒ½ï¼ˆåŽŸå› å°±æ˜¯equlas()æ–¹æ³•éœ€è¦å¯¹è±¡ï¼Œå› ä¸ºHashMapæ˜¯åŽå‡ºçš„APIç»è¿‡å¤„ç†æ‰å¯ä»¥ï¼‰ å½“é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘åŽï¼Œä»€ä¹ˆæ—¶å€™é€€åŒ–ä¸ºé“¾è¡¨?ä¸º6çš„æ—¶å€™é€€è½¬ä¸ºé“¾è¡¨ã€‚ä¸­é—´æœ‰ä¸ªå·®å€¼7å¯ä»¥é˜²æ­¢é“¾è¡¨å’Œæ ‘ä¹‹é—´é¢‘ç¹çš„è½¬æ¢ã€‚å‡è®¾ä¸€ä¸‹ï¼Œå¦‚æžœè®¾è®¡æˆé“¾è¡¨ä¸ªæ•°è¶…è¿‡8åˆ™é“¾è¡¨è½¬æ¢æˆæ ‘ç»“æž„ï¼Œé“¾è¡¨ä¸ªæ•°å°äºŽ8åˆ™æ ‘ç»“æž„è½¬æ¢æˆé“¾è¡¨ï¼Œå¦‚æžœä¸€ä¸ªHashMapä¸åœçš„æ’å…¥ã€åˆ é™¤å…ƒç´ ï¼Œé“¾è¡¨ä¸ªæ•°åœ¨8å·¦å³å¾˜å¾Šï¼Œå°±ä¼šé¢‘ç¹çš„å‘ç”Ÿæ ‘è½¬é“¾è¡¨ã€é“¾è¡¨è½¬æ ‘ï¼Œæ•ˆçŽ‡ä¼šå¾ˆä½Žã€‚ 2.HashMapçš„å·¥ä½œåŽŸç†æ˜¯ä»€ä¹ˆï¼ŸHashMapæ˜¯åŸºäºŽhashingçš„åŽŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­ï¼Œä½¿ç”¨get(key)ä»ŽHashMapä¸­èŽ·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•ï¼Œè®¡ç®—å¹¶è¿”å›žçš„hashCodeæ˜¯ç”¨äºŽæ‰¾åˆ°Mapæ•°ç»„çš„bucketä½ç½®æ¥å‚¨å­˜Node å¯¹è±¡ã€‚è¿™é‡Œå…³é”®ç‚¹åœ¨äºŽæŒ‡å‡ºï¼ŒHashMapæ˜¯åœ¨bucketä¸­å‚¨å­˜é”®å¯¹è±¡å’Œå€¼å¯¹è±¡ï¼Œä½œä¸ºMap.Nodeã€‚ ä»¥ä¸‹æ˜¯HashMapåˆå§‹åŒ– ï¼Œç®€å•æ¨¡æ‹Ÿæ•°æ®ç»“æž„12345678910111213Node[] table=new Node[16] æ•£åˆ—æ¡¶åˆå§‹åŒ–ï¼Œtable class Node &#123; hash;//hashå€¼ key;//é”® value;//å€¼ node next;//ç”¨äºŽæŒ‡å‘é“¾è¡¨çš„ä¸‹ä¸€å±‚ï¼ˆäº§ç”Ÿå†²çªï¼Œç”¨æ‹‰é“¾æ³•ï¼‰ &#125; putè¿‡ç¨‹ï¼ˆJDK1.8ç‰ˆï¼‰ å¯¹Keyç”¨HashCode()æ±‚Hashå€¼ï¼Œç„¶åŽå†è®¡ç®—ä¸‹æ ‡ å¦‚æžœæ²¡æœ‰ç¢°æ’žï¼Œç›´æŽ¥æ”¾å…¥æ¡¶ä¸­ï¼ˆç¢°æ’žçš„æ„æ€æ˜¯è®¡ç®—å¾—åˆ°çš„Hashå€¼ç›¸åŒï¼Œéœ€è¦æ”¾åˆ°åŒä¸€ä¸ªbucketä¸­ï¼‰ å¦‚æžœç¢°æ’žäº†ï¼Œä»¥é“¾è¡¨çš„æ–¹å¼é“¾æŽ¥åˆ°åŽé¢ å¦‚æžœé“¾è¡¨é•¿åº¦è¶…è¿‡é˜€å€¼( TREEIFY THRESHOLD==8)ï¼Œå°±æŠŠé“¾è¡¨è½¬æˆçº¢é»‘æ ‘ï¼Œé“¾è¡¨é•¿åº¦ä½ŽäºŽ6ï¼Œå°±æŠŠçº¢é»‘æ ‘è½¬å›žé“¾è¡¨ å¦‚æžœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢æ—§å€¼ å¦‚æžœæ¡¶æ»¡äº†(å®¹é‡16*åŠ è½½å› å­0.75)ï¼Œå°±éœ€è¦ resizeï¼ˆæ‰©å®¹2å€åŽé‡æŽ’ï¼‰ æ‰©å®¹åŽï¼Œå…ƒç´ è¦ä¹ˆæ˜¯åœ¨åŽŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŽŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®ï¼Œä¸”é“¾è¡¨é¡ºåºä¸å˜ã€‚ Getè¿‡ç¨‹(è€ƒè™‘ç‰¹æ®Šæƒ…å†µå¦‚æžœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•èŽ·å–å€¼å¯¹è±¡ï¼Ÿ)å½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•ï¼ŒHashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®ï¼Œæ‰¾åˆ°bucketä½ç½®ä¹‹åŽï¼Œä¼šè°ƒç”¨keys.equals()æ–¹æ³•åŽ»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡ã€‚ 3.æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡å°‘ç¢°æ’žï¼Ÿ æ‰°åŠ¨å‡½æ•°å¯ä»¥å‡å°‘ç¢°æ’žï¼ŒåŽŸç†æ˜¯å¦‚æžœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›žä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆç¢°æ’žçš„å‡ çŽ‡å°±ä¼šå°äº›ï¼Œè¿™å°±æ„å‘³ç€å­˜é“¾è¡¨ç»“æž„å‡å°ï¼Œè¿™æ ·å–å€¼çš„è¯å°±ä¸ä¼šé¢‘ç¹è°ƒç”¨equalæ–¹æ³•ï¼Œè¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½ã€‚ï¼ˆæ‰°åŠ¨å³Hashæ–¹æ³•å†…éƒ¨çš„ç®—æ³•å®žçŽ°ï¼Œç›®çš„æ˜¯è®©ä¸åŒå¯¹è±¡è¿”å›žä¸åŒhashcodeã€‚ï¼‰ ä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜Žä½œfinalçš„å¯¹è±¡ï¼Œå¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯ï¼Œå°†ä¼šå‡å°‘ç¢°æ’žçš„å‘ç”Ÿã€‚ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcodeï¼Œè¿™å°†æé«˜æ•´ä¸ªèŽ·å–å¯¹è±¡çš„é€Ÿåº¦ï¼Œä½¿ç”¨Stringï¼ŒIntergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éžå¸¸å¥½çš„é€‰æ‹©ã€‚ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿå› ä¸ºStringæ˜¯finalçš„ï¼Œè€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†ã€‚ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode()ï¼Œå°±è¦é˜²æ­¢é”®å€¼æ”¹å˜ï¼Œå¦‚æžœé”®å€¼åœ¨æ”¾å…¥æ—¶å’ŒèŽ·å–æ—¶è¿”å›žä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»ŽHashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚ 4.HashMapä¸­hashå‡½æ•°æ€Žä¹ˆæ˜¯æ˜¯å®žçŽ°çš„? æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨hashmapä¸­è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ ï¼Œéœ€è¦æ ¹æ®keyçš„hashå€¼æ¥æ±‚å¾—å¯¹åº”æ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚ä½•è®¡ç®—è¿™ä¸ªä½ç½®å°±æ˜¯hashç®—æ³•ã€‚å‰é¢è¯´è¿‡hashmapçš„æ•°æ®ç»“æž„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›è¿™ä¸ªhashmapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡çš„åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç”¨hashç®—æ³•æ±‚å¾—è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±å¯ä»¥çŸ¥é“å¯¹åº”ä½ç½®çš„å…ƒç´ å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œè€Œä¸ç”¨å†åŽ»éåŽ†é“¾è¡¨ã€‚ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠhashcodeå¯¹æ•°ç»„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå…ƒç´ çš„åˆ†å¸ƒç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚ä½†æ˜¯ï¼Œâ€œæ¨¡â€è¿ç®—çš„æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œèƒ½ä¸èƒ½æ‰¾ä¸€ç§æ›´å¿«é€Ÿï¼Œæ¶ˆè€—æ›´å°çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹JDK1.8çš„æºç æ˜¯æ€Žä¹ˆåšçš„.1234567891011static final int hash(Object key) &#123; if (key == null)&#123; return 0; &#125; int h; h=key.hashCode()ï¼›è¿”å›žæ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode // ^ ï¼šæŒ‰ä½å¼‚æˆ– // &gt;&gt;&gt;:æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ //å…¶ä¸­næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå³Mapçš„æ•°ç»„éƒ¨åˆ†åˆå§‹åŒ–é•¿åº¦ return (n-1)&amp;(h ^ (h &gt;&gt;&gt; 16));&#125; é«˜16ä½å¼‚æˆ–ä½Ž16ä½ä»¥åŽï¼Œè¿›è¡Œå–æ¨¡è¿ç®—1.é«˜16bitä¸å˜ï¼Œä½Ž16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–(å¾—åˆ°çš„HashCodeè½¬åŒ–ä¸º32ä½çš„äºŒè¿›åˆ¶ï¼Œå‰16ä½å’ŒåŽ16ä½ä½Ž16bitå’Œé«˜16bitåšäº†ä¸€ä¸ªå¼‚æˆ–)2.(nÂ·1)&amp;hash=-&gt;å¾—åˆ°ä¸‹æ ‡ ä¸ºä»€ä¹ˆæ‰©å®¹æ˜¯2çš„æ¬¡å¹‚? HashMapä¸ºäº†å­˜å–é«˜æ•ˆï¼Œè¦å°½é‡è¾ƒå°‘ç¢°æ’žï¼Œå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨é•¿åº¦å¤§è‡´ç›¸åŒï¼Œè¿™ä¸ªå®žçŽ°å°±åœ¨æŠŠæ•°æ®å­˜åˆ°å“ªä¸ªé“¾è¡¨ä¸­çš„ç®—æ³•è¿™ä¸ªç®—æ³•å®žé™…å°±æ˜¯å–æ¨¡ï¼Œhash%lengthã€‚ ä½†æ˜¯ï¼Œå¤§å®¶éƒ½çŸ¥é“è¿™ç§è¿ç®—ä¸å¦‚ä½ç§»è¿ç®—å¿«ã€‚å› æ­¤ï¼Œæºç ä¸­åšäº†ä¼˜åŒ–hash&amp;(length-1)ã€‚ ä¹Ÿå°±æ˜¯è¯´hash%length==hash&amp;(length-1) 5.æ‹‰é“¾æ³•å¯¼è‡´çš„é“¾è¡¨è¿‡æ·±é—®é¢˜ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œè€Œé€‰æ‹©çº¢é»‘æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€ç›´ä½¿ç”¨çº¢é»‘æ ‘ï¼Ÿä¹‹æ‰€ä»¥é€‰æ‹©çº¢é»‘æ ‘æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šå˜æˆä¸€æ¡çº¿æ€§ç»“æž„ï¼ˆè¿™å°±è·ŸåŽŸæ¥ä½¿ç”¨é“¾è¡¨ç»“æž„ä¸€æ ·äº†ï¼Œé€ æˆå¾ˆæ·±çš„é—®é¢˜ï¼‰ï¼ŒéåŽ†æŸ¥æ‰¾ä¼šéžå¸¸æ…¢ã€‚è€Œçº¢é»‘æ ‘åœ¨æ’å…¥æ–°æ•°æ®åŽå¯èƒ½éœ€è¦é€šè¿‡å·¦æ—‹ï¼Œå³æ—‹ã€å˜è‰²è¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡ï¼Œå¼•å…¥çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†æŸ¥æ‰¾æ•°æ®å¿«ï¼Œè§£å†³é“¾è¡¨æŸ¥è¯¢æ·±åº¦çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“çº¢é»‘æ ‘å±žäºŽå¹³è¡¡äºŒå‰æ ‘ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒâ€œå¹³è¡¡â€æ˜¯éœ€è¦ä»˜å‡ºä»£ä»·çš„ï¼Œä½†æ˜¯è¯¥ä»£ä»·æ‰€æŸè€—çš„èµ„æºè¦æ¯”éåŽ†çº¿æ€§é“¾è¡¨è¦å°‘ï¼Œæ‰€ä»¥å½“é•¿åº¦å¤§äºŽ8çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨çº¢é»‘æ ‘ï¼Œå¦‚æžœé“¾è¡¨é•¿åº¦å¾ˆçŸ­çš„è¯ï¼Œæ ¹æœ¬ä¸éœ€è¦å¼•å…¥çº¢é»‘æ ‘ï¼Œå¼•å…¥åè€Œä¼šæ…¢ã€‚ 6.å¯¹çº¢é»‘æ ‘çš„è§è§£ï¼Ÿ èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚ æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚ æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚(ä»Žæ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿žç»­çš„çº¢è‰²èŠ‚ç‚¹) ä»Žä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚ 7.è§£å†³hash ç¢°æ’žè¿˜æœ‰é‚£äº›åŠžæ³•ï¼Ÿæ¯”è¾ƒå‡ºåçš„æœ‰å››ç§ (1)å¼€æ”¾å®šå€æ³• (2)é“¾åœ°å€æ³• (3)å†å“ˆå¸Œæ³• (4)å…¬å…±æº¢å‡ºåŒºåŸŸæ³• å¼€æ”¾å®šå€æ³•å¼€æ”¾å®šå€æ³•å°±æ˜¯ä¸€æ—¦å‘ç”Ÿäº†å†²çªï¼Œå°±åŽ»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€ï¼Œåªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°ï¼Œå¹¶å°†è®°å½•å­˜å…¥ã€‚ é“¾åœ°å€æ³•å°†å“ˆå¸Œè¡¨çš„æ¯ä¸ªå•å…ƒä½œä¸ºé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œæ‰€æœ‰å“ˆå¸Œåœ°å€ä¸ºiçš„å…ƒç´ æž„æˆä¸€ä¸ªåŒä¹‰è¯é“¾è¡¨ã€‚å³å‘ç”Ÿå†²çªæ—¶å°±æŠŠè¯¥å…³é”®å­—é“¾åœ¨ä»¥è¯¥å•å…ƒä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨çš„å°¾éƒ¨ã€‚ å†å“ˆå¸Œæ³•å½“å“ˆå¸Œåœ°å€å‘ç”Ÿå†²çªç”¨å…¶ä»–çš„å‡½æ•°è®¡ç®—å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°åœ°å€ï¼Œç›´åˆ°å†²çªä¸å†äº§ç”Ÿä¸ºæ­¢ã€‚ å»ºç«‹å…¬å…±æº¢å‡ºåŒºå°†å“ˆå¸Œè¡¨åˆ†ä¸ºåŸºæœ¬è¡¨å’Œæº¢å‡ºè¡¨ä¸¤éƒ¨åˆ†ï¼Œå‘ç”Ÿå†²çªçš„å…ƒç´ éƒ½æ”¾å…¥æº¢å‡ºè¡¨ä¸­ã€‚ ä¸‹é¢ç»™ä¸€ä¸ªçº¿æ€§æŽ¢æŸ¥æ³•çš„ä¾‹å­ é—®é¢˜ï¼šå·²çŸ¥ä¸€ç»„å…³é”®å­—ä¸º(26ï¼Œ36ï¼Œ41ï¼Œ38ï¼Œ44ï¼Œ15ï¼Œ68ï¼Œ12ï¼Œ06ï¼Œ51)ï¼Œç”¨é™¤ä½™æ³•æž„é€ æ•£åˆ—å‡½æ•°ï¼Œç”¨çº¿æ€§æŽ¢æŸ¥æ³•è§£å†³å†²çªæž„é€ è¿™ç»„å…³é”®å­—çš„æ•£åˆ—è¡¨ è§£ç­”ï¼šä¸ºäº†å‡å°‘å†²çªï¼Œé€šå¸¸ä»¤è£…å¡«å› å­Î±ç”±é™¤ä½™æ³•å› å­æ˜¯13çš„æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºçš„ä¸Šè¿°å…³é”®å­—åºåˆ—çš„æ•£åˆ—åœ°å€ä¸º(0ï¼Œ10ï¼Œ2ï¼Œ12ï¼Œ5ï¼Œ2ï¼Œ3ï¼Œ12ï¼Œ6ï¼Œ12)ã€‚ å‰5ä¸ªå…³é”®å­—æ’å…¥æ—¶ï¼Œå…¶ç›¸åº”çš„åœ°å€å‡ä¸ºå¼€æ”¾åœ°å€ï¼Œæ•…å°†å®ƒä»¬ç›´æŽ¥æ’å…¥T[0]ï¼ŒT[10)ï¼ŒT[2]ï¼ŒT[12]å’ŒT[5]ä¸­ã€‚ å½“æ’å…¥ç¬¬6ä¸ªå…³é”®å­—15æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€2(å³h(15)=15ï¼…13=2)å·²è¢«å…³é”®å­—41(15å’Œ41äº’ä¸ºåŒä¹‰è¯)å ç”¨ã€‚æ•…æŽ¢æŸ¥h1=(2+1)ï¼…13=3ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œæ‰€ä»¥å°†15æ”¾å…¥T[3]ä¸­ã€‚ å½“æ’å…¥ç¬¬7ä¸ªå…³é”®å­—68æ—¶ï¼Œå…¶æ•£åˆ—åœ°å€3å·²è¢«éžåŒä¹‰è¯15å…ˆå ç”¨ï¼Œæ•…å°†å…¶æ’å…¥åˆ°T[4]ä¸­ã€‚ å½“æ’å…¥ç¬¬8ä¸ªå…³é”®å­—12æ—¶ï¼Œæ•£åˆ—åœ°å€12å·²è¢«åŒä¹‰è¯38å ç”¨ï¼Œæ•…æŽ¢æŸ¥hl=(12+1)ï¼…13=0ï¼Œè€ŒT[0]äº¦è¢«26å ç”¨ï¼Œå†æŽ¢æŸ¥h2=(12+2)ï¼…13=1ï¼Œæ­¤åœ°å€å¼€æ”¾ï¼Œå¯å°†12æ’å…¥å…¶ä¸­ã€‚ ç±»ä¼¼åœ°ï¼Œç¬¬9ä¸ªå…³é”®å­—06ç›´æŽ¥æ’å…¥T[6]ä¸­ï¼›è€Œæœ€åŽä¸€ä¸ªå…³é”®å­—51æ’äººæ—¶ï¼Œå› æŽ¢æŸ¥çš„åœ°å€12ï¼Œ0ï¼Œ1ï¼Œâ€¦ï¼Œ6å‡éžç©ºï¼Œæ•…51æ’å…¥T[7]ä¸­ã€‚ 8.å¦‚æžœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€Žä¹ˆåŠžï¼Ÿ é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™ï¼Œå’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·ï¼Œå°†ä¼šåˆ›å»ºåŽŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„ï¼Œæ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°ï¼Œå¹¶å°†åŽŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashingï¼Œå› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®ã€‚è¿™ä¸ªå€¼åªå¯èƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯åŽŸä¸‹æ ‡çš„ä½ç½®ï¼Œå¦ä¸€ç§æ˜¯åœ¨ä¸‹æ ‡ä¸º &lt;åŽŸä¸‹æ ‡+åŽŸå®¹é‡&gt; çš„ä½ç½® 9.é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ å½“æ‰©å®¹é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™ï¼Œç¡®å®žå­˜åœ¨æ¡ä»¶ç«žäº‰ï¼Œå› ä¸ºå¦‚æžœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘çŽ°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†ï¼Œå®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°ã€‚åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥ï¼Œå› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™ï¼ŒHashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éåŽ†(tail traversing)ã€‚å› ä¸ºç›´æŽ¥æ’å…¥çš„æ•ˆçŽ‡æ›´é«˜ã€‚å¦‚æžœæ¡ä»¶ç«žäº‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå°±æ­»å¾ªçŽ¯äº†ã€‚(å¤šçº¿ç¨‹çš„çŽ¯å¢ƒä¸‹ä¸ä½¿ç”¨HashMapï¼‰ã€‚ ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¯¼è‡´æ­»å¾ªçŽ¯ï¼Œå®ƒæ˜¯æ€Žä¹ˆå‘ç”Ÿçš„ï¼ŸHashMapçš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚å½“ç»è¿‡å¤šæ¬¡å…ƒç´ æ’å…¥ï¼Œä½¿å¾—HashMapè¾¾åˆ°ä¸€å®šé¥±å’Œåº¦æ—¶ï¼ŒKeyæ˜ å°„ä½ç½®å‘ç”Ÿå†²çªçš„å‡ çŽ‡ä¼šé€æ¸æé«˜ã€‚è¿™æ—¶å€™ï¼ŒHashMapéœ€è¦æ‰©å±•å®ƒçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¿›è¡ŒResizeã€‚1.æ‰©å®¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Entryç©ºæ•°ç»„ï¼Œé•¿åº¦æ˜¯åŽŸæ•°ç»„çš„2å€ã€‚2.ReHashï¼šéåŽ†åŽŸEntryæ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„Entryé‡æ–°Hashåˆ°æ–°æ•°ç»„ã€‚ HashMap æ‰©å®¹çš„æ—¶å€™ä¼šè°ƒç”¨ resize() æ–¹æ³•ï¼Œå°±æ˜¯è¿™é‡Œçš„å¹¶å‘æ“ä½œå®¹æ˜“åœ¨ä¸€ä¸ªæ¡¶ä¸Šå½¢æˆçŽ¯å½¢é“¾è¡¨ï¼›è¿™æ ·å½“èŽ·å–ä¸€ä¸ªä¸å­˜åœ¨çš„ key æ—¶ï¼Œè®¡ç®—å‡ºçš„ index æ­£å¥½æ˜¯çŽ¯å½¢é“¾è¡¨çš„ä¸‹æ ‡å°±ä¼šå‡ºçŽ°æ­»å¾ªçŽ¯ã€‚ åœ¨HashMap1.7ä¹‹å‰æ˜¯å¤´æ’æ³•ï¼Œåœ¨æ‰©å®¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆä¸€ä¸ªresize()çš„æ–¹æ³•ï¼Œç„¶åŽè°ƒç”¨transfer()æ–¹æ³•ï¼ŒæŠŠé‡Œé¢çš„Entryè¿›è¡Œäº†Rehashï¼Œåœ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆé“¾è¡¨çš„å¾ªçŽ¯ï¼Œåœ¨ä¸€ä¸‹æ¬¡Get()ä¸­å‡ºçŽ°æ­»å¾ªçŽ¯ï¼Œæˆ–è€…å‡ºçŽ°æ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥æ•°æ®ä¸å®‰å…¨ 10.HashTableæ•°ç»„ + é“¾è¡¨æ–¹å¼å­˜å‚¨é»˜è®¤å®¹é‡ï¼š 11(è´¨æ•°ä¸ºå®œ) Put: å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æžœæ²¡ç¢°æ’žç›´æŽ¥æ”¾åˆ°bucketé‡Œï¼› å¦‚æžœç¢°æ’žäº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåŽï¼› å¦‚æžœç¢°æ’žå¯¼è‡´é“¾è¡¨è¿‡é•¿(å¤§äºŽç­‰äºŽTREEIFY_THRESHOLD)ï¼Œå°±æŠŠé“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘(JDK1.8ä¸­çš„æ”¹åŠ¨)ï¼› å¦‚æžœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯ä¸€æ€§) å¦‚æžœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resizeã€‚ ç´¢å¼•è®¡ç®— : ï¼ˆkey.hashCode() &amp; 0x7FFFFFFFï¼‰% table.length è‹¥åœ¨é“¾è¡¨ä¸­æ‰¾åˆ°äº†ï¼Œåˆ™æ›¿æ¢æ—§å€¼ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™ç»§ç»­ å½“æ€»å…ƒç´ ä¸ªæ•°è¶…è¿‡å®¹é‡*åŠ è½½å› å­æ—¶ï¼Œæ‰©å®¹ä¸ºåŽŸæ¥ 2 å€å¹¶é‡æ–°æ•£åˆ—ã€‚ å°†æ–°å…ƒç´ åŠ åˆ°é“¾è¡¨å¤´éƒ¨,å¯¹ä¿®æ”¹ Hashtable å†…éƒ¨å…±äº«æ•°æ®çš„æ–¹æ³•æ·»åŠ äº† synchronizedï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚Get:å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æžœåœ¨bucketé‡Œçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹é‡Œç›´æŽ¥å‘½ä¸­ï¼Œåˆ™ç›´æŽ¥è¿”å›žï¼› å¦‚æžœæœ‰å†²çªï¼Œåˆ™é€šè¿‡key.equals(k)åŽ»æŸ¥æ‰¾å¯¹åº”çš„Entry;â€¢ è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(logn)ï¼›â€¢ è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(n)ã€‚ 11.HashMap ï¼ŒHashTable åŒºåˆ« é»˜è®¤å®¹é‡ä¸åŒã€‚æ‰©å®¹ä¸åŒ çº¿ç¨‹å®‰å…¨æ€§ï¼ŒHashTable å®‰å…¨ æ•ˆçŽ‡ä¸åŒ HashTable è¦æ…¢å› ä¸ºåŠ é” 12.å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿæˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„ï¼Œä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚ConcurrentHashMapå½“ç„¶å¯ä»¥ä»£æ›¿HashTableï¼Œä½†æ˜¯HashTableæä¾›æ›´å¼ºçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚å®ƒä»¬éƒ½å¯ä»¥ç”¨äºŽå¤šçº¿ç¨‹çš„çŽ¯å¢ƒï¼Œä½†æ˜¯å½“Hashtableçš„å¤§å°å¢žåŠ åˆ°ä¸€å®šçš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œå› ä¸ºè¿­ä»£æ—¶éœ€è¦è¢«é”å®šå¾ˆé•¿çš„æ—¶é—´ã€‚å› ä¸ºConcurrentHashMapå¼•å…¥äº†åˆ†å‰²(segmentation)ï¼Œä¸è®ºå®ƒå˜å¾—å¤šä¹ˆå¤§ï¼Œä»…ä»…éœ€è¦é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€Œå…¶å®ƒçš„çº¿ç¨‹ä¸éœ€è¦ç­‰åˆ°è¿­ä»£å®Œæˆæ‰èƒ½è®¿é—®mapã€‚ç®€è€Œè¨€ä¹‹ï¼Œåœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒConcurrentHashMapä»…ä»…é”å®šmapçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€ŒHashtableåˆ™ä¼šé”å®šæ•´ä¸ªmapã€‚ 13.CocurrentHashMapï¼ˆ1.8ï¼‰ å…¶ä¸­æŠ›å¼ƒäº†åŽŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº†CAS + synchronizedæ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚ å…¶ä¸­çš„ val next éƒ½ç”¨äº† volatileä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§ æœ€å¤§ç‰¹ç‚¹æ˜¯å¼•å…¥äº† CASï¼ˆå€ŸåŠ© Unsafe æ¥å®žçŽ°ã€native codeã€‘ï¼‰CASæœ‰3ä¸ªæ“ä½œæ•°ï¼Œå†…å­˜å€¼Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚ CAS ä¼šå‡ºçŽ°çš„é—®é¢˜ï¼šABAè§£å†³ï¼šå¯¹å˜é‡å¢žåŠ ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œç‰ˆæœ¬å·åŠ  1ï¼Œæ¯”è¾ƒçš„æ—¶å€™æ¯”è¾ƒç‰ˆæœ¬å·ã€‚####Putè¿‡ç¨‹ æ ¹æ® key è®¡ç®—å‡º hashcode ã€‚åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚ é€šè¿‡ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æžœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ CAS å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚ å¦‚æžœå½“å‰ä½ç½®çš„ hashcode == MOVED == -1,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚ å¦‚æžœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚ å¦‚æžœæ•°é‡å¤§äºŽ TREEIFY_THRESHOLD åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚ Getè¿‡ç¨‹ æ ¹æ®è®¡ç®—å‡ºæ¥çš„ hashcode å¯»å€ï¼Œå¦‚æžœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆç›´æŽ¥è¿”å›žå€¼ã€‚ å¦‚æžœæ˜¯çº¢é»‘æ ‘é‚£å°±æŒ‰ç…§æ ‘çš„æ–¹å¼èŽ·å–å€¼ã€‚ éƒ½ä¸æ»¡è¶³é‚£å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éåŽ†èŽ·å–å€¼ã€‚ 14.TreeMapTreeMap åˆ™æ˜¯åŸºäºŽçº¢é»‘æ ‘çš„ä¸€ç§æä¾›é¡ºåºè®¿é—®çš„ Mapï¼Œå’ŒHashMapä¸åŒï¼Œå®ƒçš„getã€putã€removeä¹‹ç±»æ“ä½œéƒ½æ˜¯O(logn)çš„å¤æ‚åº¦ï¼Œå…·ä½“é¡ºåºå¯ä»¥ç”±æŒ‡å®šçš„Comparatoræ¥å†³å®šï¼Œæˆ–è€…æ ¹æ®é”®çš„è‡ªç„¶é¡ºåºæ¥åˆ¤æ–­ 15.hashç®—æ³•æ˜¯å¹²å˜›çš„ï¼Ÿè¿˜çŸ¥é“å“ªäº›hashç®—æ³•ï¼ŸHashå‡½æ•°æ˜¯æŒ‡æŠŠä¸€ä¸ªå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´ã€‚æŠŠå¤§èŒƒå›´æ˜ å°„åˆ°ä¸€ä¸ªå°èŒƒå›´çš„ç›®çš„å¾€å¾€æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œä½¿å¾—æ•°æ®å®¹æ˜“ä¿å­˜ã€‚æ¯”è¾ƒå‡ºåçš„ç®—æ³•æœ‰SHA,MD4ã€MD5ç­‰ è¯´è¯´Stringä¸­hashcodeçš„å®žçŽ°?123456789101112public int hashCode() &#123; int h = hash; if (h == 0 &amp;&amp; value.length &gt; 0) &#123; char val[] = value; for (int i = 0; i &lt; value.length; i++) &#123; h = 31 * h + val[i]; &#125; hash = h; &#125; return h;&#125; Stringç±»ä¸­çš„hashCodeè®¡ç®—æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°±æ˜¯ä»¥31ä¸ºæƒï¼Œæ¯ä¸€ä½ä¸ºå­—ç¬¦çš„ASCIIå€¼è¿›è¡Œè¿ç®—ï¼Œç”¨è‡ªç„¶æº¢å‡ºæ¥ç­‰æ•ˆå–æ¨¡ã€‚ å“ˆå¸Œè®¡ç®—å…¬å¼å¯ä»¥è®¡ä¸º+ s[1]*31^(n-2) + ... + s[n-1]```1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859* é‚£ä¸ºä»€ä¹ˆä»¥31ä¸ºè´¨æ•°å‘¢?ä¸»è¦æ˜¯å› ä¸º31æ˜¯ä¸€ä¸ªå¥‡è´¨æ•°ï¼Œæ‰€ä»¥```31*i=32*i-i=(i&lt;&lt;5)-i```ï¼Œè¿™ç§ä½ç§»ä¸Žå‡æ³•ç»“åˆçš„è®¡ç®—ç›¸æ¯”ä¸€èˆ¬çš„è¿ç®—å¿«å¾ˆå¤šã€‚## 16.å¥å¯ä»¥ä¸ºNullå€¼ä¹ˆ?å¯ä»¥ï¼Œkeyä¸ºnullçš„æ—¶å€™ï¼Œhashç®—æ³•æœ€åŽçš„å€¼ä»¥0æ¥è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æ”¾åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚## 17.ä¸€èˆ¬ç”¨ä»€ä¹ˆä½œä¸ºHashMapçš„key?ä¸€èˆ¬ç”¨Integerã€Stringè¿™ç§ä¸å¯å˜ç±»å½“HashMapå½“keyï¼Œè€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨ã€‚â€¢ (1) å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨å®ƒåˆ›å»ºçš„æ—¶å€™hashcodeå°±è¢«ç¼“å­˜äº†ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚è¿™å°±ä½¿å¾—å­—ç¬¦ä¸²å¾ˆé€‚åˆä½œä¸ºMapä¸­çš„é”®ï¼Œå­—ç¬¦ä¸²çš„å¤„ç†é€Ÿåº¦è¦å¿«è¿‡å…¶å®ƒçš„é”®å¯¹è±¡ã€‚è¿™å°±æ˜¯HashMapä¸­çš„é”®å¾€å¾€éƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€‚â€¢ (2) å› ä¸ºèŽ·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•ï¼Œé‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éžå¸¸é‡è¦çš„,è¿™äº›ç±»å·²ç»å¾ˆè§„èŒƒçš„è¦†å†™äº†hashCode()ä»¥åŠequals()æ–¹æ³•ã€‚## Hashcode* ä¸€ã€hashCodeç®€ä»‹public int hashCode()ï¼š``hashCode``æ˜¯æ ¹ç±»Obejectä¸­çš„æ–¹æ³•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒObjectä¸­çš„``hashCode() ``è¿”å›žå¯¹è±¡çš„32ä½jvmå†…å­˜åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æžœå¯¹è±¡ä¸é‡å†™è¯¥æ–¹æ³•ï¼Œåˆ™è¿”å›žç›¸åº”å¯¹è±¡çš„32ä¸ºJVMå†…å­˜åœ°å€ã€‚* äºŒã€hashCodeæ³¨æ„ç‚¹å…³äºŽhashCodeæ–¹æ³•ï¼Œä¸€è‡´çš„çº¦å®šæ˜¯ï¼š1ã€é‡å†™äº†``euqls``æ–¹æ³•çš„å¯¹è±¡å¿…é¡»åŒæ—¶é‡å†™``hashCode()``æ–¹æ³•ã€‚2ã€å¦‚æžœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ3ã€å¦‚æžœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜Žè¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æž„ä¸­ï¼Œå­˜æ”¾äºŽåŒä¸€ä¸ªä½ç½®* ä¸‰ã€hashCodeä½œç”¨ä»ŽObjectè§’åº¦çœ‹ï¼ŒJVMæ¯newä¸€ä¸ªObjectï¼Œå®ƒéƒ½ä¼šå°†è¿™ä¸ªObjectä¸¢åˆ°ä¸€ä¸ªHashè¡¨ä¸­åŽ»ï¼Œè¿™æ ·çš„è¯ï¼Œä¸‹æ¬¡åšObjectçš„æ¯”è¾ƒæˆ–è€…å–è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ˆè¯»å–è¿‡ç¨‹ï¼‰ï¼Œå®ƒä¼šæ ¹æ®å¯¹è±¡çš„HashCodeå†ä»ŽHashè¡¨ä¸­å–è¿™ä¸ªå¯¹è±¡ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜å–å¯¹è±¡çš„æ•ˆçŽ‡ã€‚è‹¥HashCodeç›¸åŒå†åŽ»è°ƒç”¨equalã€‚HashCodeæ˜¯ç”¨äºŽæŸ¥æ‰¾ä½¿ç”¨çš„ï¼Œè€Œequalsæ˜¯ç”¨äºŽæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ˜¯å¦ç›¸ç­‰çš„ã€‚* å››ã€ä¸ºä»€ä¹ˆé‡å†™å®žé™…å¼€å‘çš„è¿‡ç¨‹ä¸­åœ¨hashmapæˆ–è€…hashseté‡Œå¦‚æžœä¸é‡å†™çš„hashcodeå’Œequalsæ–¹æ³•çš„è¯ä¼šå¯¼è‡´æˆ‘ä»¬å­˜å¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠå¯¹è±¡å­˜è¿›åŽ»äº†ï¼Œå–çš„æ—¶å€™å´å–ä¸åˆ°æƒ³è¦çš„å¯¹è±¡ã€‚é‡å†™äº†hashcodeå’Œequalsæ–¹æ³•å¯ä»¥è¿…é€Ÿçš„åœ¨hashmapä¸­æ‰¾åˆ°é”®çš„ä½ç½®ï¼›#### **é‡å†™hashcodeæ˜¯ä¸ºäº†ä¿è¯ç›¸åŒçš„å¯¹è±¡ä¼šæœ‰ç›¸åŒçš„hashcodeï¼›**#### **é‡å†™equalsæ˜¯ä¸ºäº†ä¿è¯åœ¨å‘ç”Ÿå†²çªçš„æƒ…å†µä¸‹å–å¾—åˆ°Entryå¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£æ˜¯keyæˆ–æ˜¯å…ƒç´ ï¼‰**ï¼›å­˜åœ¨ä¸€ä¸ªtableæ•°ç»„ï¼Œé‡Œé¢æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªnodeé“¾è¡¨ï¼Œå½“æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆkey-valueï¼‰æ—¶ï¼Œå°±é¦–å…ˆè®¡ç®—å…ƒç´ keyçš„hashå€¼ï¼Œé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashå€¼è¿›è¡Œä¸Žè¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œä»¥æ­¤ç¡®å®šæ’å…¥æ•°ç»„ä¸­çš„ä½ç½®ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨åŒä¸€hashå€¼çš„å…ƒç´ å·²ç»è¢«æ”¾åœ¨æ•°ç»„åŒä¸€ä½ç½®äº†ï¼Œè¿™æ—¶å°±æŠŠè¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°åŒä¸€hashå€¼çš„nodeé“¾è¡¨çš„é“¾å°¾ï¼Œä»–ä»¬åœ¨æ•°ç»„çš„åŒä¸€ä½ç½®ï¼Œä½†æ˜¯å½¢æˆäº†é“¾è¡¨ï¼ŒåŒä¸€å„é“¾è¡¨ä¸Šçš„Hashå€¼æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¯´æ•°ç»„å­˜æ”¾çš„æ˜¯é“¾è¡¨ã€‚è€Œå½“é“¾è¡¨é•¿åº¦å¤§äºŽç­‰äºŽ8æ—¶ï¼Œé“¾è¡¨å°±å¯èƒ½è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æŸ¥æ‰¾çš„æ•ˆçŽ‡ã€‚&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191102133424361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM1ODMzMTE=,size_16,color_FFFFFF,t_70&quot; alt=&quot;å­˜å‚¨ç»“æž„&quot; /&gt;&lt;/p&gt;```Javastatic class Node&amp;lt;K,V&amp;gt; implements Map.Entry&amp;lt;K,V&amp;gt; &#123; final int hash; final K key; V value; Node&amp;lt;K,V&amp;gt; next; //å¯ä»¥çœ‹å¾—å‡ºè¿™æ˜¯ä¸€ä¸ªé“¾è¡¨ Node(int hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; * * * &#125;transient Node&lt;K,V&gt;[] table; HashMapå†…éƒ¨åŒ…å«ä¸€ä¸ªNodeç±»åž‹çš„æ•°ç»„tableï¼ŒNodeç”±Map.Entryç»§æ‰¿è€Œæ¥ã€‚Nodeå­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«å››ä¸ªå­—æ®µï¼Œä»Žnextå­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡ºnodeæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚tableæ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®éƒ½å¯ä»¥å½“åšä¸€ä¸ªæ¡¶ï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚HashMapä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªå­˜æ”¾æ•£åˆ—å€¼ç›¸åŒçš„Nodeã€‚æ•°æ®åŸŸ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748private static final long serialVersionUID = 362498820763181265L; // åˆå§‹åŒ–å®¹é‡ï¼Œåˆå§‹åŒ–æœ‰16ä¸ªæ¡¶static final int DEFAULT_INITIAL_CAPACITY = 1 &amp;lt;&amp;lt; 4; // aka 16 // æœ€å¤§å®¹é‡ 1 073 741 824, 10äº¿å¤šstatic final int MAXIMUM_CAPACITY = 1 &amp;lt;&amp;lt; 30;// é»˜è®¤çš„è´Ÿè½½å› å­ã€‚å› æ­¤åˆå§‹æƒ…å†µä¸‹ï¼Œå½“é”®å€¼å¯¹çš„æ•°é‡å¤§äºŽ 16 * 0.75 = 12 æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹ã€‚static final float DEFAULT_LOAD_FACTOR = 0.75f;// å½“put()ä¸€ä¸ªå…ƒç´ åˆ°æŸä¸ªæ¡¶ï¼Œå…¶é“¾è¡¨é•¿åº¦è¾¾åˆ°8æ—¶æœ‰å¯èƒ½å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ static final int TREEIFY_THRESHOLD = 8; // åœ¨hashMapæ‰©å®¹æ—¶ï¼Œå¦‚æžœå‘çŽ°é“¾è¡¨é•¿åº¦å°äºŽç­‰äºŽ6ï¼Œåˆ™ä¼šç”±çº¢é»‘æ ‘é‡æ–°é€€åŒ–ä¸ºé“¾è¡¨ã€‚static final int UNTREEIFY_THRESHOLD = 6; // åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äºŽ 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æŽ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚static final int MIN_TREEIFY_CAPACITY = 64; // å­˜å‚¨å…ƒç´ çš„æ•°ç»„ transient Node&amp;lt;k,v&amp;gt;[] table;// å­˜æ”¾å…ƒç´ çš„ä¸ªæ•°transient int size;// è¢«ä¿®æ”¹çš„æ¬¡æ•°fast-failæœºåˆ¶ transient int modCount;// ä¸´ç•Œå€¼ å½“å®žé™…å¤§å°(å®¹é‡*å¡«å……æ¯”)è¶…è¿‡ä¸´ç•Œå€¼æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹ int threshold;// å¡«å……æ¯”final float loadFactor;&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æž„é€ å‡½æ•°"&gt;æž„é€ å‡½æ•°&lt;/h4&gt;&lt;pre class="java"&gt;&lt;code&gt;public HashMap() &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted&#125;public HashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR);&#125;public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &amp;lt; 0) throw new IllegalArgumentException(&amp;quot;Illegal initial capacity: &amp;quot; + initialCapacity); if (initialCapacity &amp;gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &amp;lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&amp;quot;Illegal load factor: &amp;quot; + loadFactor); this.loadFactor = loadFactor; // tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæŽ¥è¿‘initialCapacity // å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚ this.threshold = tableSizeFor(initialCapacity);&#125;public HashMap(Map&amp;lt;? extends K, ? extends V&amp;gt; m) &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; putMapEntries(m, false);&#125;HashMapæž„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥å®¹é‡ä¸æ˜¯2çš„næ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º2çš„næ¬¡æ–¹ã€‚### Put()æºç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;static final int hash(Object key) &#123; int h; // â€œæ‰°åŠ¨å‡½æ•°â€ã€‚å‚è€ƒ https://www.cnblogs.com/zhengwang/p/8136164.html return (key == null) ? 0 : (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; 16);&#125; final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; p; int n, i; // æœªåˆå§‹åŒ–åˆ™åˆå§‹åŒ–table if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; // é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸Žè¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œ // ç„¶åŽåˆ¤æ–­tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„æ˜¯å¦å·²ç»å­˜åœ¨nodeã€‚ if ((p = tab[i = (n - 1) &amp;amp; hash]) == null) // å¦‚æžœtableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„ä¸ºç©ºåˆ™æ–°åˆ›å»ºä¸€ä¸ªnodeæ”¾åœ¨è¯¥å¤„ tab[i] = newNode(hash, key, value, null); else &#123; // è¿è¡Œåˆ°è¿™ä»£è¡¨tableæ•°ç»„ä¸‹æ ‡ä¸ºindexå¤„å·²ç»å­˜åœ¨nodeï¼Œå³å‘ç”Ÿäº†ç¢°æ’ž HashMap.Node&amp;lt;K,V&amp;gt; e; K k; // æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚ if (p.hash == hash &amp;amp;&amp;amp; ((k = p.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)))) e = p; // æ£€æŸ¥è¿™ä¸ªnodeæ˜¯å¦å·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ else if (p instanceof TreeNode) // å¦‚æžœè¿™ä¸ªnodeå·²ç»æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘åˆ™ç»§ç»­å¾€æ ‘ç§æ·»åŠ èŠ‚ç‚¹ e = ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; for (int binCount = 0; ; ++binCount) &#123; // åœ¨è¿™é‡Œå¾ªçŽ¯éåŽ†nodeé“¾è¡¨ // åˆ¤æ–­æ˜¯å¦åˆ°è¾¾é“¾è¡¨å°¾ if ((e = p.next) == null) &#123; // åˆ°è¾¾é“¾è¡¨å°¾ï¼Œç›´æŽ¥æŠŠæ–°nodeæ’å…¥é“¾è¡¨ï¼Œæ’å…¥é“¾è¡¨å°¾éƒ¨ï¼Œåœ¨jdk8ä¹‹å‰æ˜¯å¤´æ’æ³• p.next = newNode(hash, key, value, null); if (binCount &amp;gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st // å¦‚æžœnodeé“¾è¡¨çš„é•¿åº¦å¤§äºŽç­‰äºŽ8åˆ™å¯èƒ½æŠŠè¿™ä¸ªnodeè½¬æ¢ä¸ºçº¢é»‘æ ‘ treeifyBin(tab, hash); break; &#125; // æ£€æŸ¥è¿™ä¸ªnodeçš„keyæ˜¯å¦è·Ÿæ’å…¥çš„keyæ˜¯å¦ç›¸åŒã€‚ if (e.hash == hash &amp;amp;&amp;amp; ((k = e.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)))) break; p = e; &#125; &#125; // å½“æ’å…¥keyå­˜åœ¨ï¼Œåˆ™æ›´æ–°valueå€¼å¹¶è¿”å›žæ—§value if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; // ä¿®æ”¹æ¬¡æ•°++ ++modCount; // å¦‚æžœå½“å‰å¤§å°å¤§äºŽé—¨é™ï¼Œé—¨é™åŽŸæœ¬æ˜¯åˆå§‹å®¹é‡*0.75 if (++size &amp;gt; threshold) resize(); afterNodeInsertion(evict); return null; &#125;ä¸‹é¢ç®€å•è¯´ä¸‹put()æµç¨‹ï¼šåˆ¤æ–­é”®å€¼å¯¹æ•°ç»„table[]æ˜¯å¦ä¸ºç©ºæˆ–ä¸ºnullï¼Œå¦åˆ™ä»¥é»˜è®¤å¤§å°resize()ï¼›æ ¹æ®é”®keyè®¡ç®—hashå€¼ä¸Žtableçš„é•¿åº¦è¿›è¡Œä¸Žè¿ç®—å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼• indexï¼Œå¦‚æžœtab[index] == nullï¼Œç›´æŽ¥æ ¹æ®key-valueæ–°å»ºnodeæ·»åŠ ï¼Œå¦åˆ™è½¬å…¥3åˆ¤æ–­å½“å‰æ•°ç»„ä¸­å¤„ç†hashå†²çªçš„æ–¹å¼ä¸ºé“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘(checkç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç±»åž‹å³å¯),åˆ†åˆ«å¤„ç† ä¸ºå•¥å¤´æ’æ³•ä¸ºä»€ä¹ˆè¦æ¢æˆå°¾æ’ï¼šjdk1.7æ—¶å€™ç”¨å¤´æ’æ³•å¯èƒ½æ˜¯è€ƒè™‘åˆ°äº†ä¸€ä¸ªæ‰€è°“çš„çƒ­ç‚¹æ•°æ®çš„ç‚¹(æ–°æ’å…¥çš„æ•°æ®å¯èƒ½ä¼šæ›´æ—©ç”¨åˆ°)ï¼›æ‰¾åˆ°é“¾è¡¨å°¾éƒ¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæˆ–è€…éœ€è¦ä½¿ç”¨é¢å¤–çš„å†…å­˜åœ°å€æ¥ä¿å­˜é“¾è¡¨å°¾éƒ¨çš„ä½ç½®ï¼Œå¤´æ’æ³•å¯ä»¥èŠ‚çœæ’å…¥è€—æ—¶ã€‚ä½†æ˜¯åœ¨æ‰©å®¹æ—¶ä¼šæ”¹å˜é“¾è¡¨ä¸­å…ƒç´ åŽŸæœ¬çš„é¡ºåºï¼Œä»¥è‡³äºŽåœ¨å¹¶å‘åœºæ™¯ä¸‹å¯¼è‡´é“¾è¡¨æˆçŽ¯çš„é—®é¢˜ã€‚ ä»ŽputVal()æºç å¯ä»¥çœ‹å‡ºï¼ŒHashMapå¹¶æ²¡æœ‰å¯¹nullçš„é”®å€¼å¯¹åšé™åˆ¶ï¼ˆhashå€¼è®¾ä¸º0ï¼‰ï¼Œå³HashMapå…è®¸æ’å…¥é”®å°¾nullçš„é”®å€¼å¯¹ã€‚ä½†åœ¨JDK1.8ä¹‹å‰HashMapä½¿ç”¨ç¬¬0ä¸ªnodeå­˜æ”¾é”®ä¸ºnullçš„é”®å€¼å¯¹ã€‚ ç¡®å®šnodeä¸‹æ ‡ï¼šé€šè¿‡tableçš„é•¿åº¦å’Œkeyçš„hashè¿›è¡Œä¸Žè¿ç®—å¾—åˆ°ä¸€ä¸ªindexã€‚ åœ¨è½¬å˜æˆçº¢é»‘æ ‘æ ‘ä¹‹å‰ï¼Œè¿˜ä¼šæœ‰ä¸€æ¬¡åˆ¤æ–­ï¼Œåªæœ‰é”®å€¼å¯¹æ•°é‡å¤§äºŽ 64 æ‰ä¼šå‘ç”Ÿè½¬æ¢ï¼Œå¦è€…ç›´æŽ¥æ‰©å®¹ã€‚è¿™æ˜¯ä¸ºäº†é¿å…åœ¨HashMapå»ºç«‹åˆæœŸï¼Œå¤šä¸ªé”®å€¼å¯¹æ°å¥½è¢«æ”¾å…¥äº†åŒä¸€ä¸ªé“¾è¡¨ä¸­è€Œå¯¼è‡´ä¸å¿…è¦çš„è½¬åŒ–ã€‚ å¤§å¤šæ•°äººä¸çŸ¥é“çš„ï¼šHashMapé“¾è¡¨æˆçŽ¯çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆget()æ“ä½œæºç è§£æž1234567891011121314151617181920212223242526272829303132333435public V get(Object key) &#123; HashMap.Node&amp;lt;K,V&amp;gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value; &#125; final HashMap.Node&amp;lt;K,V&amp;gt; getNode(int hash, Object key) &#123; HashMap.Node&amp;lt;K,V&amp;gt;[] tab; HashMap.Node&amp;lt;K,V&amp;gt; first, e; int n; K k; // tableä¸ä¸ºç©º if ((tab = table) != null &amp;amp;&amp;amp; (n = tab.length) &amp;gt; 0 &amp;amp;&amp;amp; // é€šè¿‡tableçš„é•¿åº¦å’Œhashä¸Žè¿ç®—å¾—åˆ°ä¸€ä¸ªindexï¼Œtable // ä¸‹æ ‡ä½indexå¤„çš„å…ƒç´ ä¸ä¸ºç©ºï¼Œå³å…ƒç´ ä¸ºnodeé“¾è¡¨ (first = tab[(n - 1) &amp;amp; hash]) != null) &#123; // é¦–å…ˆåˆ¤æ–­nodeé“¾è¡¨ä¸­ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ if (first.hash == hash &amp;amp;&amp;amp; // always check first node // åˆ†åˆ«åˆ¤æ–­keyä¸ºnullå’Œkeyä¸ä¸ºnullçš„æƒ…å†µ ((k = first.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)))) // keyç›¸ç­‰åˆ™è¿”å›žç¬¬ä¸€ä¸ª return first; // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹keyä¸åŒä¸”nodeé“¾è¡¨ä¸æ­¢åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹ if ((e = first.next) != null) &#123; // åˆ¤æ–­nodeé“¾è¡¨æ˜¯å¦è½¬ä¸ºçº¢é»‘æ ‘ã€‚ if (first instanceof HashMap.TreeNode) // åˆ™åœ¨çº¢é»‘æ ‘ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚ return ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)first).getTreeNode(hash, key); do &#123; // å¾ªçŽ¯éåŽ†nodeé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œåˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰ if (e.hash == hash &amp;amp;&amp;amp; ((k = e.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; // keyåœ¨tableä¸­ä¸å­˜åœ¨åˆ™è¿”å›žnullã€‚ return null; &#125; get(key)æ–¹æ³•é¦–å…ˆèŽ·å–keyçš„hashå€¼ï¼Œ è®¡ç®—hash &amp; (table.len - 1)å¾—åˆ°åœ¨é“¾è¡¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œ å…ˆåˆ¤æ–­nodeé“¾è¡¨ï¼ˆæ¡¶ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„keyæ˜¯å¦ä¸Žå‚æ•°keyç›¸ç­‰ï¼Œ ä¸ç­‰åˆ™åˆ¤æ–­æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘ï¼Œè‹¥è½¬ä¸ºçº¢é»‘æ ‘åˆ™åœ¨çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾ï¼Œ å¦‚æ²¡æœ‰è½¬ä¸ºçº¢é»‘æ ‘å°±éåŽ†åŽé¢çš„é“¾è¡¨æ‰¾åˆ°ç›¸åŒçš„keyå€¼è¿”å›žå¯¹åº”çš„Valueå€¼å³å¯ã€‚ resize()æ“ä½œæºç è§£æž123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112// åˆå§‹åŒ–æˆ–è€…æ‰©å®¹ä¹‹åŽçš„å…ƒç´ è°ƒæ•´ final HashMap.Node&amp;lt;K,V&amp;gt;[] resize() &#123; // èŽ·å–æ—§table HashMap.Node&amp;lt;K,V&amp;gt;[] oldTab = table; // æ—§tableå®¹é‡ int oldCap = (oldTab == null) ? 0 : oldTab.length; // æ—§tableæ‰©å®¹ä¸´ç•Œå€¼ int oldThr = threshold; // å®šä¹‰æ–°tableå®¹é‡å’Œä¸´ç•Œå€¼ int newCap, newThr = 0; // å¦‚æžœåŽŸtableä¸ä¸ºç©º if (oldCap &amp;gt; 0) &#123; // å¦‚æžœtableå®¹é‡è¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™ä¿®æ”¹ä¸´ç•Œå€¼ä¸ºInteger.MAX_VALUE // MAXIMUM_CAPACITY = 1 &amp;lt;&amp;lt; 30; // Integer.MAX_VALUE = 1 &amp;lt;&amp;lt; 31 - 1; if (oldCap &amp;gt;= MAXIMUM_CAPACITY) &#123; // Mapè¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œè¿™æ—¶è¿˜è¦å‘mapä¸­æ”¾æ•°æ®ï¼Œåˆ™ç›´æŽ¥è®¾ç½®ä¸´ç•Œå€¼ä¸ºæ•´æ•°çš„æœ€å¤§å€¼ // åœ¨å®¹é‡æ²¡æœ‰è¾¾åˆ°æœ€å¤§å€¼ä¹‹å‰ä¸ä¼šå†resizeã€‚ threshold = Integer.MAX_VALUE; // ç»“æŸæ“ä½œ return oldTab; &#125; // ä¸‹é¢å°±æ˜¯æ‰©å®¹æ“ä½œï¼ˆ2å€ï¼‰ else if ((newCap = oldCap &amp;lt;&amp;lt; 1) &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; oldCap &amp;gt;= DEFAULT_INITIAL_CAPACITY) // ä¸´ç•Œå€¼ä¹Ÿå˜ä¸ºä¸¤å€ newThr = oldThr &amp;lt;&amp;lt; 1; // double threshold &#125; else if (oldThr &amp;gt; 0) // initial capacity was placed in threshold /* * è¿›å…¥æ­¤ifè¯æ˜Žåˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æž„é€ ï¼špublic HashMap(int initialCapacity) * æˆ– public HashMap(int initialCapacity, float loadFactor) * æ³¨ï¼šå¸¦å‚çš„æž„é€ ä¸­initialCapacityï¼ˆåˆå§‹å®¹é‡å€¼ï¼‰ä¸ç®¡æ˜¯è¾“å…¥å‡ éƒ½ä¼šé€šè¿‡ * tableSizeFor(initialCapacity)æ–¹æ³•è®¡ç®—å‡ºæŽ¥è¿‘initialCapacity * å‚æ•°çš„2^næ¥ä½œä¸ºåˆå§‹åŒ–å®¹é‡ã€‚ * æ‰€ä»¥å®žé™…åˆ›å»ºçš„å®¹é‡å¹¶ä¸ç­‰äºŽè®¾ç½®çš„åˆå§‹å®¹é‡ã€‚ */ newCap = oldThr; else &#123; // zero initial threshold signifies using defaults // è¿›å…¥æ­¤ifè¯æ˜Žåˆ›å»ºmapæ—¶ç”¨çš„æ— å‚æž„é€ ï¼š // ç„¶åŽå°†å‚æ•°newCapï¼ˆæ–°çš„å®¹é‡ï¼‰ã€newThr(æ–°çš„æ‰©å®¹é˜€ç•Œå€¼)è¿›è¡Œåˆå§‹åŒ– newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; if (newThr == 0) &#123; // è¿›å…¥è¿™ä»£è¡¨æœ‰ä¸¤ç§å¯èƒ½ã€‚ // 1. è¯´æ˜Žold tableå®¹é‡å¤§äºŽ0ä½†æ˜¯å°äºŽ16. // 2. åˆ›å»ºHashMapæ—¶ç”¨çš„å¸¦å‚æž„é€ ï¼Œæ ¹æ®loadFactorè®¡ç®—ä¸´ç•Œå€¼ã€‚ float ft = (float)newCap * loadFactor; newThr = (newCap &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; ft &amp;lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; // ä¿®æ”¹ä¸´ç•Œå€¼ threshold = newThr; @SuppressWarnings(&#123;&amp;quot;rawtypes&amp;quot;,&amp;quot;unchecked&amp;quot;&#125;) // æ ¹æ®æ–°çš„å®¹é‡ç”Ÿæˆæ–°çš„ table HashMap.Node&amp;lt;K,V&amp;gt;[] newTab = (HashMap.Node&amp;lt;K,V&amp;gt;[])new HashMap.Node[newCap]; // æ›¿æ¢æˆæ–°çš„table table = newTab; // å¦‚æžœoldTabä¸ä¸ºnullè¯´æ˜Žæ˜¯æ‰©å®¹ï¼Œå¦åˆ™ç›´æŽ¥è¿”å›žnewTab if (oldTab != null) &#123; /* éåŽ†åŽŸæ¥çš„table */ for (int j = 0; j &amp;lt; oldCap; ++j) &#123; HashMap.Node&amp;lt;K,V&amp;gt; e; if ((e = oldTab[j]) != null) &#123; oldTab[j] = null; // åˆ¤æ–­è¿™ä¸ªæ¡¶ï¼ˆé“¾è¡¨ï¼‰ä¸­å°±åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ if (e.next == null) // æ ¹æ®æ–°çš„å®¹é‡é‡æ–°è®¡ç®—åœ¨tableä¸­çš„ä½ç½®indexï¼Œå¹¶æŠŠå½“å‰å…ƒç´ èµ‹å€¼ç»™ä»–ã€‚ newTab[e.hash &amp;amp; (newCap - 1)] = e; // åˆ¤æ–­è¿™ä¸ªé“¾è¡¨æ˜¯å¦å·²ç»è½¬ä¸ºçº¢é»‘æ ‘ else if (e instanceof HashMap.TreeNode) // åœ¨splitå‡½æ•°ä¸­å¯èƒ½ç”±äºŽçº¢é»‘æ ‘çš„é•¿åº¦å°äºŽç­‰äºŽUNTREEIFY_THRESHOLDï¼ˆ6ï¼‰ // åˆ™æŠŠçº¢é»‘æ ‘é‡æ–°è½¬ä¸ºé“¾è¡¨ ((HashMap.TreeNode&amp;lt;K,V&amp;gt;)e).split(this, newTab, j, oldCap); else &#123; // preserve order // è¿è¡Œåˆ°è¿™é‡Œè¯æ˜Žæ¡¶ä¸­æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚ HashMap.Node&amp;lt;K,V&amp;gt; loHead = null, loTail = null; HashMap.Node&amp;lt;K,V&amp;gt; hiHead = null, hiTail = null; HashMap.Node&amp;lt;K,V&amp;gt; next; do &#123; // å¯¹æ¡¶è¿›è¡ŒéåŽ† next = e.next; if ((e.hash &amp;amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab; &#125; HashMap çš„å·¥ä½œåŽŸç†æ˜¯ä»€ä¹ˆ?HashMapåŸºäºŽhashingåŽŸç†ï¼Œæˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å­˜å‚¨å’ŒèŽ·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶ï¼Œå®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcodeï¼Œç„¶åŽæ‰¾åˆ°bucketä½ç½®æ¥å­˜å‚¨å€¼å¯¹è±¡ã€‚å½“èŽ·å–å¯¹è±¡æ—¶ï¼Œé€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹ï¼Œç„¶åŽè¿”å›žå€¼å¯¹è±¡ã€‚HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’žé—®é¢˜ï¼Œå½“å‘ç”Ÿç¢°æ’žäº†ï¼Œå¯¹è±¡å°†ä¼šå­˜å‚¨åœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé“¾æŽ¥åŽŸå…ˆçš„å¯¹è±¡èŠ‚ç‚¹ï¼ŒHashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å­˜å‚¨é”®å€¼å¯¹å¯¹è±¡ã€‚ å¿«é€Ÿå¤±è´¥ (fail-fast) å’Œå®‰å…¨å¤±è´¥ (fail-safe) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 1ã€å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰åœ¨ç”¨è¿­ä»£å™¨éåŽ†ä¸€ä¸ªé›†åˆå¯¹è±¡æ—¶ï¼Œå¦‚æžœéåŽ†è¿‡ç¨‹ä¸­å¯¹é›†åˆå¯¹è±¡çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼ˆå¢žåŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºConcurrent Modification Exception.åŽŸç†ï¼šè¿­ä»£å™¨åœ¨éåŽ†æ—¶ç›´æŽ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éåŽ†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ªmodCountå˜é‡ã€‚é›†åˆåœ¨è¢«éåŽ†æœŸé—´å¦‚æžœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()/next()éåŽ†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›žéåŽ†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éåŽ†ã€‚æ³¨æ„ï¼šè¿™é‡Œå¼‚å¸¸çš„æŠ›å‡ºæ¡ä»¶æ˜¯æ£€æµ‹åˆ°modCount!=expectedmodCountè¿™ä¸ªæ¡ä»¶ã€‚å¦‚æžœé›†åˆå‘ç”Ÿå˜åŒ–æ—¶ä¿®æ”¹modCountå€¼åˆšå¥½åˆè®¾ç½®ä¸ºäº†expectedmodCountå€¼ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šæŠ›å‡ºã€‚å› æ­¤ï¼Œä¸èƒ½ä¾èµ–äºŽè¿™ä¸ªå¼‚å¸¸æ˜¯å¦æŠ›å‡ºè€Œè¿›è¡Œå¹¶å‘æ“ä½œçš„ç¼–ç¨‹ï¼Œè¿™ä¸ªå¼‚å¸¸åªå»ºè®®ç”¨äºŽæ£€æµ‹å¹¶å‘ä¿®æ”¹çš„bugã€‚åœºæ™¯ï¼šjava.utilåŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ã€‚ 2ã€å®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éåŽ†æ—¶ä¸æ˜¯ç›´æŽ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŽŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡ŒéåŽ†ã€‚åŽŸç†ï¼šç”±äºŽè¿­ä»£æ—¶æ˜¯å¯¹åŽŸé›†åˆçš„æ‹·è´è¿›è¡ŒéåŽ†ï¼Œæ‰€ä»¥åœ¨éåŽ†è¿‡ç¨‹ä¸­å¯¹åŽŸé›†åˆæ‰€ä½œçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘Concurrent Modification Exceptionã€‚ç¼ºç‚¹ï¼šåŸºäºŽæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº†Concurrent Modification Exception,ä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åŽçš„å†…å®¹ï¼Œå³ï¼šè¿­ä»£å™¨éåŽ†çš„æ˜¯å¼€å§‹éåŽ†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éåŽ†æœŸé—´åŽŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„åœºæ™¯ï¼šjava.util.concurrentåŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚ HashMapï¼ŸConcurrentHashMapï¼Ÿç›¸ä¿¡çœ‹å®Œè¿™ç¯‡æ²¡äººèƒ½éš¾ä½ä½ ]]></content>
      <tags>
        <tag>Analyst of SourceCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Algorithms, Part I | Princeton Online]]></title>
    <url>%2F2020%2F01%2F16%2FAlgorithms-Part-I-Princeton-Online%2F</url>
    <content type="text"><![CDATA[Princeton Online courseYou can find all the code and comments details in this RepositoryWhat algorithms and data structures will be covered in this course?The first part will focus on the basic data structure, sorting, and searching. Topics include: parallel search algorithm, binary search, stack, queue, backpack, insert sort, select sort, hill sort, fast sort, three-way fast sort, merge sort, heap sort, binary heap, binary search tree, red-black tree , Split link and linear probe hash tables, Graham scans, kd trees. The second part will focus on graph and string processing algorithms. Topics include: depth-first search, width-first search, topology sorting, Kosaraju-Sharir algorithm, Kruskal algorithm, Prim algorithm, Dijkistra algorithm, Bellman-Ford algorithm, Ford-Fulkerson algorithm, LSD cardinality ranking algorithm, MSD cardinality ranking algorithm, three-way Cardinality fast sorting algorithm, multi-path trie algorithm, ternary search trie algorithm, Knuth-Morris-Pratt algorithm, Boyer-Moore algorithm, Rabin-Karp algorithm, regular matching, run-length encoding, Huffman encoding, LZW compression, Burrows-Wheeler transform . The Imp of Algorithm in Princeton University.]]></content>
      <tags>
        <tag>Algorithms,</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EveryThing About MySQL]]></title>
    <url>%2F2020%2F01%2F14%2FEveryThing-About-MySQL%2F</url>
    <content type="text"><![CDATA[MYSQLå½»åº•æžæ‡‚ç³»åˆ—B-æ ‘ã€B+æ ‘ã€B-æ ‘ã€B*æ ‘ Bæ ‘å’ŒB+æ ‘çš„æ’å…¥ã€åˆ é™¤å›¾æ–‡è¯¦è§£ å…³ç³»åž‹æ•°æ®åº“å’Œéžå…³ç³»åž‹æ•°æ®åº“ä¸ºä»€ä¹ˆç”¨Bæ ‘æˆ–B+æ ‘ ==B+æ ‘çš„æ•°æ®åªå‡ºçŽ°åœ¨å¶å­èŠ‚ç‚¹ä¸Š==ï¼Œå› æ­¤åœ¨æŸ¥è¯¢å•æ¡æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢é€Ÿåº¦éžå¸¸ç¨³å®šã€‚å› æ­¤ï¼Œ==åœ¨åšå•ä¸€æ•°æ®çš„æŸ¥è¯¢ä¸Šï¼Œå…¶å¹³å‡æ€§èƒ½å¹¶ä¸å¦‚Bæ ‘==ã€‚ä½†æ˜¯ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šæœ‰æŒ‡é’ˆè¿›è¡Œç›¸è¿žï¼Œå› æ­¤åœ¨åšæ•°æ®éåŽ†çš„æ—¶å€™ï¼Œ==åªéœ€è¦å¯¹å¶å­èŠ‚ç‚¹è¿›è¡ŒéåŽ†å³å¯ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—B+æ ‘éžå¸¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢==ã€‚ æ²¡å‡†æ˜¯==Mysqlä¸­æ•°æ®éåŽ†æ“ä½œæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ç»“æž„==ã€‚å‡¡åšè¿™ç§å…³è”æŸ¥è¯¢ï¼Œä½ èº²ä¸å¼€joinæ“ä½œçš„ï¼æ—¢ç„¶æ¶‰åŠåˆ°äº†Joinæ“ä½œï¼Œæ— å¤–ä¹Žä»Žä¸€ä¸ªè¡¨ä¸­å–ä¸€ä¸ªæ•°æ®ï¼ŒåŽ»å¦ä¸€ä¸ªè¡¨ä¸­é€è¡ŒåŒ¹é…ï¼Œå¦‚æžœç´¢å¼•ç»“æž„æ˜¯B+æ ‘ï¼Œå¶å­èŠ‚ç‚¹ä¸Šæ˜¯æœ‰æŒ‡é’ˆçš„ï¼Œèƒ½å¤Ÿæžå¤§çš„æé«˜è¿™ç§ä¸€è¡Œä¸€è¡Œçš„åŒ¹é…é€Ÿåº¦ ==è€ŒMongodbæ˜¯åšå•ä¸€æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œæ•°æ®éåŽ†æ“ä½œæ¯”è¾ƒå°‘==ï¼Œæ‰€ä»¥ç”¨Bæ ‘ä½œä¸ºç´¢å¼•ç»“æž„ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆMysqlåšæ•°æ®éåŽ†æ“ä½œå¤šï¼Ÿè€ŒMongodbåšæ•°æ®éåŽ†æ“ä½œå°‘å‘¢ï¼Ÿå› ä¸ºMysqlæ˜¯å…³ç³»åž‹æ•°æ®åº“ï¼Œè€ŒMongodbæ˜¯éžå…³ç³»åž‹æ•°æ®ã€‚ å¹³è¡¡äºŒå‰æ ‘åˆ™æ˜¯å­æ ‘é«˜è¯»ä¸èƒ½è¶…è¿‡2ï¼ŒBæ ‘éžå¶å­èŠ‚ç‚¹ä¹Ÿå¯ä»¥å­˜å‚¨æ•°æ®ï¼ŒB+æ ‘åˆ™æ˜¯å¶å­èŠ‚ç‚¹æ‰å¯ä»¥å­˜å‚¨æ•°æ®ã€‚ æˆ‘ä»¬è¯´çš„==å¹³è¡¡äºŒå‰æ ‘ç»“æž„ï¼ŒæŒ‡çš„æ˜¯é€»è¾‘ç»“æž„ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘ï¼Œå…¶ç‰©ç†å®žçŽ°æ˜¯æ•°ç»„==ã€‚ç„¶åŽç”±äºŽåœ¨é€»è¾‘ç»“æž„ä¸Šç›¸è¿‘çš„èŠ‚ç‚¹åœ¨ç‰©ç†ç»“æž„ä¸Šå¯èƒ½ä¼šå·®å¾ˆè¿œã€‚å› æ­¤ï¼Œæ¯æ¬¡è¯»å–çš„ç£ç›˜é¡µçš„æ•°æ®ä¸­æœ‰è®¸å¤šæ˜¯ç”¨ä¸ä¸Šçš„ã€‚å› æ­¤ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä¸­è¦è¿›è¡Œè®¸å¤šæ¬¡çš„ç£ç›˜è¯»å–æ“ä½œã€‚è€Œé€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æž„åº”è¯¥æ˜¯å°½å¯èƒ½å°‘çš„æ‰§è¡Œç£ç›˜IOæ“ä½œï¼Œå› ä¸ºæ‰§è¡Œç£ç›˜IOæ“ä½œéžå¸¸çš„è€—æ—¶ã€‚å› æ­¤ï¼Œå¹³è¡¡äºŒå‰æ ‘å¹¶ä¸é€‚åˆä½œä¸ºç´¢å¼•ç»“æž„ çº¢é»‘æ ‘è¿™ç§ç»“æž„==hæ˜Žæ˜¾è¦æ·±çš„å¤šã€‚ç”±äºŽé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§==ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆçŽ‡æ˜Žæ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨çº¢é»‘æ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰ç»“æž„çš„è¯ï¼Œæ¯æ¬¡ç£ç›˜é¢„è¯»ä¸­çš„å¾ˆå¤šæ•°æ®æ˜¯ç”¨ä¸ä¸Šçš„æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒæ²¡èƒ½åˆ©ç”¨å¥½ç£ç›˜é¢„è¯»çš„æä¾›çš„æ•°æ®ã€‚ç„¶åŽåˆç”±äºŽæ·±åº¦å¤§ï¼ˆè¾ƒBæ ‘è€Œè¨€ï¼‰ï¼Œæ‰€ä»¥è¿›è¡Œçš„ç£ç›˜IOæ“ä½œæ›´å¤šã€‚ ==Bæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…³é”®å­—ï¼Œå®ƒå°†èŠ‚ç‚¹å¤§å°è®¾ç½®ä¸ºç£ç›˜é¡µçš„å¤§å°ï¼Œå……åˆ†åˆ©ç”¨äº†ç£ç›˜é¢„è¯»çš„åŠŸèƒ½==ã€‚æ¯æ¬¡è¯»å–ç£ç›˜é¡µæ—¶å°±ä¼šè¯»å–ä¸€æ•´ä¸ªèŠ‚ç‚¹ã€‚==ä¹Ÿæ­£å› æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ç€éžå¸¸å¤šä¸ªå…³é”®å­—ï¼Œæ ‘çš„æ·±åº¦å°±ä¼šéžå¸¸çš„å°==ã€‚è¿›è€Œè¦æ‰§è¡Œçš„ç£ç›˜è¯»å–æ“ä½œæ¬¡æ•°å°±ä¼šéžå¸¸å°‘ï¼Œæ›´å¤šçš„æ˜¯åœ¨å†…å­˜ä¸­å¯¹è¯»å–è¿›æ¥çš„æ•°æ®è¿›è¡ŒæŸ¥æ‰¾ã€‚ ==Bæ ‘çš„æŸ¥è¯¢ï¼Œä¸»è¦å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œè€Œå¹³è¡¡äºŒå‰æ ‘çš„æŸ¥è¯¢ï¼Œåˆ™æ˜¯å‘ç”Ÿåœ¨ç£ç›˜è¯»å–ä¸­==ã€‚å› æ­¤ï¼Œè™½ç„¶Bæ ‘æŸ¥è¯¢æŸ¥è¯¢çš„æ¬¡æ•°ä¸æ¯”å¹³è¡¡äºŒå‰æ ‘çš„æ¬¡æ•°å°‘ï¼Œä½†æ˜¯ç›¸æ¯”èµ·ç£ç›˜IOé€Ÿåº¦ï¼Œå†…å­˜ä¸­æ¯”è¾ƒçš„è€—æ—¶å°±å¯ä»¥å¿½ç•¥ä¸è®¡äº†ã€‚å› æ­¤ï¼ŒBæ ‘æ›´é€‚åˆä½œä¸ºç´¢å¼•ã€‚ ä¸€æ­¥æ­¥åˆ†æžä¸ºä»€ä¹ˆB+æ ‘é€‚åˆä½œä¸ºç´¢å¼•çš„ç»“æž„ ä»¥åŠç´¢å¼•åŽŸç†(é˜¿é‡Œé¢è¯•ï¼Œå†™çš„å¾ˆå¥½B+Treeæ˜¯mysqlä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€ä¸ªç´¢å¼•æ•°æ®ç»“æž„ï¼Œæ˜¯Inodbå’ŒMyisamå­˜å‚¨å¼•æ“Žæ¨¡å¼çš„ç´¢å¼•ç±»åž‹ã€‚ç›¸å¯¹Hashç´¢å¼•ï¼ŒB+Treeåœ¨æŸ¥æ‰¾å•æ¡è®°å½•çš„é€Ÿåº¦æ¯”ä¸ä¸ŠHashç´¢å¼•(Memoryè¡¨åªå­˜åœ¨å†…å­˜ä¸­)ï¼Œä½†æ˜¯å› ä¸ºæ›´é€‚åˆæŽ’åºç­‰æ“ä½œï¼Œæ‰€ä»¥å®ƒæ›´å—æ¬¢è¿Žã€‚æ¯•ç«Ÿä¸å¯èƒ½åªå¯¹æ•°æ®åº“è¿›è¡Œå•æ¡è®°å½•çš„æ“ä½œã€‚ å¸¦é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Tree B+Treeæ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”å¢žåŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æœ‰æŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚è¿™æ ·åšæ˜¯ä¸ºäº†æé«˜åŒºé—´æ•ˆçŽ‡ï¼Œä¾‹å¦‚æŸ¥è¯¢keyä¸ºä»Ž18åˆ°49çš„æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åŽï¼Œåªè¦é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéåŽ†å°±å¯ä»¥ä»¥æ­¤å‘è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæžå¤§æé«˜äº†åŒºé—´æŸ¥è¯¢æ•ˆçŽ‡ã€‚ å¤§å¤§å‡å°‘ç£ç›˜I/Oè¯»å– æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŽŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºŽä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥ å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXTï¼‰=mysqlçš„myISAMæœç´¢å¼•æ“Žé»˜è®¤çš„ç´¢å¼•ç±»åž‹==ä¸è¿‡åˆ‡è®°å¯¹äºŽå¤§å®¹é‡çš„æ•°æ®è¡¨ï¼Œç”Ÿæˆå…¨æ–‡ç´¢å¼•æ˜¯ä¸€ä¸ªéžå¸¸æ¶ˆè€—æ—¶é—´éžå¸¸æ¶ˆè€—ç¡¬ç›˜ç©ºé—´çš„åšæ³•==ã€‚ æ–‡æœ¬å­—æ®µä¸Šçš„æ™®é€šç´¢å¼•åªèƒ½åŠ å¿«å¯¹å‡ºçŽ°åœ¨å­—æ®µå†…å®¹æœ€å‰é¢çš„å­—ç¬¦ä¸²(ä¹Ÿå°±æ˜¯å­—æ®µå†…å®¹å¼€å¤´çš„å­—ç¬¦)è¿›è¡Œæ£€ç´¢æ“ä½œã€‚å¦‚æžœå­—æ®µé‡Œå­˜æ”¾çš„æ˜¯ç”±å‡ ä¸ªã€ç”šè‡³æ˜¯å¤šä¸ªå•è¯æž„æˆçš„è¾ƒå¤§æ®µæ–‡å­—ï¼Œæ™®é€šç´¢å¼•å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚è¿™ç§æ£€ç´¢å¾€å¾€ä»¥LIKE%word%çš„å½¢å¼å‡ºçŽ°ï¼Œè¿™å¯¹MySQLæ¥è¯´å¾ˆå¤æ‚ï¼Œå¦‚æžœéœ€è¦å¤„ç†çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå“åº”æ—¶é—´å°±ä¼šå¾ˆé•¿ã€‚ è¿™ç±»åœºåˆæ­£æ˜¯å…¨æ–‡ç´¢å¼•(full-textindex)å¯ä»¥å¤§æ˜¾èº«æ‰‹çš„åœ°æ–¹ã€‚åœ¨ç”Ÿæˆè¿™ç§ç±»åž‹çš„ç´¢å¼•æ—¶ï¼ŒMySQLå°†æŠŠåœ¨æ–‡æœ¬ä¸­å‡ºçŽ°çš„æ‰€æœ‰å•è¯åˆ›å»ºä¸ºä¸€ä»½æ¸…å•ï¼ŒæŸ¥è¯¢æ“ä½œå°†æ ¹æ®è¿™ä»½æ¸…å•åŽ»æ£€ç´¢æœ‰å…³çš„æ•°æ®è®°å½•ã€‚å…¨æ–‡ç´¢å¼•å³å¯ä»¥éšæ•°æ®è¡¨ä¸€åŒåˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç­‰æ—¥åŽæœ‰å¿…è¦æ—¶å†ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤æ·»åŠ ï¼šALTER TABLE table_name ADD FULLTEXT(column1, column2) æœ‰äº†å…¨æ–‡ç´¢å¼•ï¼Œå°±å¯ä»¥ç”¨SELECTæŸ¥è¯¢å‘½ä»¤åŽ»æ£€ç´¢é‚£äº›åŒ…å«ç€ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šå•è¯çš„æ•°æ®è®°å½•äº†ã€‚ä¸‹é¢æ˜¯è¿™ç±»æŸ¥è¯¢å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ï¼š SELECT * FROM table_name WHERE MATCH(column1, column2) AGAINST(&#39;word1&#39;, &#39;word2&#39;, &#39;word3&#39;) ä¸Šé¢è¿™æ¡å‘½ä»¤å°†æŠŠcolumn1å’Œcolumn2å­—æ®µé‡Œæœ‰word1ã€word2å’Œword3çš„æ•°æ®è®°å½•å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ã€‚ InnoDBå¦‚ä½•è§£å†³å¹»è¯» ä½¿ç”¨MVCC ä¸€æ¡SQLè¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ ç”±serverå±‚å’Œå­˜å‚¨å¼•æ“Žç»„æˆ server å±‚åŒ…æ‹¬è¿žæŽ¥å™¨ã€åˆ†æžå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ï¼Œæ¶µç›– MySQLçš„æ ¸å¿ƒæœåŠ¡ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­¦ã€åŠ å¯†å‡½æ•°ç­‰ï¼‰ï¼Œè¿˜æœ‰æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“Žçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚ ä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ é‡Œé¢åŒ…å«binlogå’Œredolog,ä¸¤é˜¶æ®µæäº¤ ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢žï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè§†å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬èŽ·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚ æ¸¸æ ‡æ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æžœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚æ¸¸æ ‡å¯ä»¥å®šåœ¨è¯¥å•å…ƒä¸­çš„ç‰¹å®šè¡Œï¼Œä»Žç»“æžœé›†çš„å½“å‰è¡Œæ£€ç´¢ä¸€è¡Œæˆ–å¤šè¡Œã€‚å¯ä»¥å¯¹ç»“æžœé›†å½“å‰è¡Œåšä¿®æ”¹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚ è¯·ç®€æ´æè¿°Mysqlä¸­InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿåœ¨Mysqlä¸­ENUMçš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ åŒä¸€ä¸ªå±žæ€§é‡Œé¢åŒ…å«å¤šä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ç´¢å¼•.enum åœ¨æ•°æ®åº“åº•å±‚ä»¥æ•´åž‹æ–¹å¼å‚¨å­˜ï¼Œä»Ž 1 å¼€å§‹ï¼Œ0 ç”¨äºŽæŒ‡ä»£ç©ºæˆ–é”™è¯¯çš„å­—ç¬¦ä¸²ã€‚ CHARå’ŒVARCHARçš„åŒºåˆ«ï¼Ÿchar å›ºå®šé•¿åº¦255ï¼Œä¸è¶³çš„éƒ¨åˆ†è¡¥ç©ºæ ¼ï¼Œå–å‡ºæ—¶å†åŽ»æŽ‰ç©ºæ ¼ã€‚varchar ä¸å®šé•¿åº¦ drop,deleteä¸Žtruncateçš„åŒºåˆ«dropåˆ é™¤è¡¨ï¼Œtruncateæ¸…ç©ºè¡¨ï¼Œdeleteåˆ é™¤è¡¨ã€dropå’Œtruncateä¸èƒ½å›žæ»šã€‚ å­˜å‚¨è¿‡ç¨‹ä¸Žè§¦å‘å™¨çš„åŒºåˆ« è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å®ƒå¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»Žè€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚ï¼ŒæŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚ å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œä»¥åŽåœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æžœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯SQLè¯­å¥æ‰§è¡Œè¦å¿«ã€‚å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚ å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘è¿‡çš„ï¼Œæ‰§è¡Œæ•ˆçŽ‡é«˜ã€‚å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ç›´æŽ¥å­˜æ”¾äºŽæ•°æ®åº“ä¸­ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹åç›´æŽ¥è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œé€šè®¯ã€‚å®‰å…¨æ€§é«˜ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æœ‰ä¸€å®šæƒé™çš„ç”¨æˆ·ã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯å‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚==ç¼ºç‚¹ï¼šç§»æ¤æ€§å·®==ã€‚ 2ï¼‰å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šjavaç¨‹åºã€‚ å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬å“ªäº›ï¼Ÿæ•°æ®å®Œæ•´æ€§(Data Integrity)æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®(Accuracy)å’Œå¯é æ€§(Reliability)ã€‚ å®žä½“å®Œæ•´æ€§ï¼šè§„å®šè¡¨çš„æ¯ä¸€è¡Œåœ¨è¡¨ä¸­æ˜¯æƒŸä¸€çš„å®žä½“ã€‚ åŸŸå®Œæ•´æ€§ï¼šæ˜¯æŒ‡è¡¨ä¸­çš„åˆ—å¿…é¡»æ»¡è¶³æŸç§ç‰¹å®šçš„æ•°æ®ç±»åž‹çº¦æŸï¼Œå…¶ä¸­çº¦æŸåˆåŒ…æ‹¬å–å€¼èŒƒå›´ã€ç²¾åº¦ç­‰è§„å®šã€‚ å‚ç…§å®Œæ•´æ€§ï¼šæ˜¯æŒ‡ä¸¤ä¸ªè¡¨çš„ä¸»å…³é”®å­—å’Œå¤–å…³é”®å­—çš„æ•°æ®åº”ä¸€è‡´ï¼Œä¿è¯äº†è¡¨ä¹‹é—´çš„æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé˜²æ­¢äº†æ•°æ®ä¸¢å¤±æˆ–æ— æ„ä¹‰çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­æ‰©æ•£ã€‚ ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼šä¸åŒçš„å…³ç³»æ•°æ®åº“ç³»ç»Ÿæ ¹æ®å…¶åº”ç”¨çŽ¯å¢ƒçš„ä¸åŒï¼Œå¾€å¾€è¿˜éœ€è¦ä¸€äº›ç‰¹æ®Šçš„çº¦æŸæ¡ä»¶ã€‚ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§å³æ˜¯é’ˆå¯¹æŸä¸ªç‰¹å®šå…³ç³»æ•°æ®åº“çš„çº¦æŸæ¡ä»¶ï¼Œå®ƒåæ˜ æŸä¸€å…·ä½“åº”ç”¨å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ã€‚ ä¸Žè¡¨æœ‰å…³çš„çº¦æŸï¼šåŒ…æ‹¬åˆ—çº¦æŸ(NOT NULLï¼ˆéžç©ºçº¦æŸï¼‰)å’Œè¡¨çº¦æŸ(PRIMARY KEYã€foreign keyã€checkã€UNIQUE) MySqlä¸æ”¯æŒcheck Mysql çš„å­˜å‚¨å¼•æ“Ž,myisamå’Œinnodbçš„åŒºåˆ«ã€‚NULL | myisam | innodb â€”|â€”|â€”äº‹åŠ¡æ”¯æŒ|ä¸æ”¯æŒ| æ”¯æŒ| row 2 col 2å­˜å‚¨ç»“æž„ |ä¸‰ç§æ–‡ä»¶ | ä¸€ç§æ–‡ä»¶å­˜å‚¨ç©ºé—´ |ä½“ç§¯å° | ä½“ç§¯å¤§å¯ç§»æ¤æ€§ |æ–¹ä¾¿ | å›°éš¾é”åŠ›åº¦ |è¡¨çº§é”| è¡¨çº§é”ï¼Œè¡Œçº§é”å…¨æ–‡ç´¢å¼• |æ”¯æŒ | ä¸æ”¯æŒè¡¨ä¸»é”® |å¯ä»¥æ²¡æœ‰|å¿…é¡»æœ‰ï¼Œæ²¡æœ‰å°±è‡ªåŠ¨ç”Ÿæˆå¤–é”® |ä¸æ”¯æŒ | æ”¯æŒ 1.é” MyISAM æ˜¯éžäº‹åŠ¡çš„å­˜å‚¨å¼•æ“Žï¼Œé€‚åˆç”¨äºŽé¢‘ç¹æŸ¥è¯¢çš„åº”ç”¨ã€‚è¡¨é”ï¼Œä¸ä¼šå‡ºçŽ°æ­»é”ï¼Œé€‚åˆå°æ•°æ®ï¼Œå°å¹¶å‘ã€‚ Innodbæ˜¯æ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“Žï¼ŒåˆäºŽæ’å…¥å’Œæ›´æ–°æ“ä½œæ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œè®¾è®¡åˆç†çš„è¯æ˜¯è¡Œé”ï¼ˆæœ€å¤§åŒºåˆ«å°±åœ¨é”çš„çº§åˆ«ä¸Šï¼‰ï¼Œé€‚åˆå¤§æ•°æ®ï¼Œå¤§å¹¶å‘è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«è¡¨é” ç‰¹ç‚¹ï¼šå¼€é”€å°ã€åŠ é”å¿«ã€æ— æ­»é”ï¼›é”ç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚çŽ‡é«˜ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½ä½Ž åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚æŸ¥è¯¢æ“ä½œï¼ˆSELECTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERTï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚è¡Œé” ç‰¹ç‚¹ï¼šé”çš„ç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚çŽ‡ä½Žã€å¤„ç†å¹¶å‘çš„èƒ½åŠ›å¼ºï¼›å¼€é”€å¤§ã€åŠ é”æ…¢ã€ä¼šå‡ºçŽ°æ­»é” åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚å¯¹äºŽUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æŽ’ä»–é”ï¼›å¯¹äºŽæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ã€‚ ä¹è§‚é”ï¼šä¸åŠ é”ï¼Œåªæœ‰åœ¨æ›´æ–°æ—¶éªŒè¯æ•°æ®æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æ›´æ–°ï¼Œåžåé‡è¾ƒé«˜ï¼Œé€‚ç”¨äºŽå¤šè¯»åœºæ™¯ã€‚å®ƒ==å‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åŽï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æžœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆå½“å‰æ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›žæ»š==ã€‚ ä¹è§‚é”å®žçŽ°æ–¹å¼æ˜¯ï¼šç‰ˆæœ¬å·versionå’ŒCAS(compare and swap) æ‚²è§‚é”ï¼šè¯»å–æ—¶åŠ é”ï¼Œæ›´æ–°å®Œé‡Šæ”¾é”ï¼Œå†æ­¤è¿‡ç¨‹ä¸­ä¼šé€ æˆå…¶ä»–çº¿ç¨‹é˜»å¡žï¼Œå¯¼è‡´åžåé‡ä½Žï¼Œé€‚ç”¨äºŽå¤šå†™åœºæ™¯ã€‚å½“äº‹åŠ¡Aå¯¹æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œ==å¹¶ä¸”å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾åŽï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸Žè¯¥é”å†²çªçš„æ“ä½œ==ï¼Œè¿™é‡Œäº‹åŠ¡Aæ‰€æ–½åŠ çš„é”å°±å«æ‚²è§‚é”ã€‚ è¡Œé”(å…±äº«é”å’ŒæŽ’ä»–é”),é—´éš™é”(next-keylockï¼‰éƒ½å±žäºŽæ‚²è§‚é”ã€‚InnoDBå®žçŽ°äº†ä»¥ä¸‹ä¸¤ç§ç±»åž‹çš„è¡Œé”ï¼š å…±äº«é”ï¼ˆSï¼‰ï¼š==å…è®¸ä¸€ä¸ªäº‹åŠ¡åŽ»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡èŽ·å¾—ç›¸åŒæ•°æ®é›†çš„æŽ’ä»–é”==ã€‚ æŽ’ä»–é”ï¼ˆX)ï¼š==å…è®¸èŽ·å¾—æŽ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’ŒæŽ’ä»–å†™é”ã€‚==å¦å¤–ï¼Œä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®žçŽ°å¤šç²’åº¦é”æœºåˆ¶ï¼ŒInnoDBè¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯è¡¨é”ã€‚ æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ISé”ã€‚ æ„å‘æŽ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡ŒæŽ’ä»–é”* ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æŽ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„IXé”ã€‚é—´éš™é”ï¼ˆNext-Keyé”ï¼‰: å½“æˆ‘ä»¬ç”¨èŒƒå›´æ¡ä»¶è€Œä¸æ˜¯ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æŽ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•é¡¹åŠ é”ï¼› å¯¹äºŽé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAP)â€ï¼ŒInnoDBä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é—´éš™é”ï¼ˆNext-Key)é”ã€‚ 1:è¡¨çº§é”ä¸ä¼šæ­»é”,è¡Œçº§é”å’Œé¡µçº§é”å¯èƒ½æ­»é” 2:åœ¨æ•°æ®åº“å®žçŽ°èµ„æºé”å®šçš„è¿‡ç¨‹ä¸­ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œé”å®šç›¸åŒæ•°æ®é‡çš„æ•°æ®æ‰€éœ€è¦æ¶ˆè€—çš„å†…å­˜æ•°é‡æ˜¯è¶Šæ¥è¶Šå¤šçš„ï¼Œå®žçŽ°ç®—æ³•ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ä¸è¿‡ï¼Œéšç€é”å®šèµ„æºé¢—ç²’åº¦çš„å‡å°ï¼Œåº”ç”¨ç¨‹åºçš„è®¿é—®è¯·æ±‚é‡åˆ°é”ç­‰å¾…çš„å¯èƒ½æ€§ä¹Ÿä¼šéšä¹‹é™ä½Žï¼Œç³»ç»Ÿæ•´ä½“å¹¶å‘åº¦ä¹Ÿéšä¹‹æå‡ã€‚ 3:==ä»Žé”çš„è§’åº¦æ¥è¯´ï¼Œè¡¨çº§é”æ›´é€‚åˆäºŽä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Webåº”==ç”¨ï¼›è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºŽæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶å‘æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿã€‚ 4:æ„å‘é”æ˜¯InnoDBè‡ªåŠ¨åŠ çš„ï¼Œä¸éœ€ç”¨æˆ·å¹²é¢„ã€‚==å¯¹äºŽUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æŽ’ä»–é”ï¼ˆX)==ï¼›å¯¹äºŽæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼› 5:InnoDBè¡Œé”å®žçŽ°æ–¹å¼: ==InnoDBè¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®žçŽ°çš„ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”== Mysqlä¸­MVCCçš„ä½¿ç”¨åŠåŽŸç†è¯¦è§£MVCCæ˜¯ä¸€ç§å¤šç‰ˆæœ¬å¹¶å‘æŽ§åˆ¶æœºåˆ¶ã€‚MVCCæ˜¯é€šè¿‡ä¿å­˜æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ¥å®žçŽ°çš„ã€‚åœ¨æ¯ä¸ªè¡¨åŽæ·»åŠ åˆ›å»ºç‰ˆæœ¬å·å’Œåˆ é™¤ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·ä¸ºä¿®æ”¹è¯¥é¡¹çš„äº‹åŠ¡ç‰ˆæœ¬å·ã€‚ SELECT:InnoDBä¼šæ ¹æ®ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ£€æŸ¥æ¯è¡Œè®°å½• InnoDBåªä¼šæŸ¥æ‰¾ç‰ˆæœ¬æ—©äºŽå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œ(ä¹Ÿå°±æ˜¯,è¡Œçš„ç³»ç»Ÿç‰ˆæœ¬å·å°äºŽæˆ–ç­‰äºŽäº‹åŠ¡çš„ç³»ç»Ÿç‰ˆæœ¬å·)ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–çš„è¡Œï¼Œè¦ä¹ˆæ˜¯åœ¨äº‹åŠ¡å¼€å§‹å‰å·²ç»å­˜åœ¨çš„ï¼Œè¦ä¹ˆæ˜¯äº‹åŠ¡è‡ªèº«æ’å…¥æˆ–è€…ä¿®æ”¹è¿‡çš„. è¡Œçš„åˆ é™¤ç‰ˆæœ¬è¦ä¹ˆæœªå®šä¹‰,è¦ä¹ˆå¤§äºŽå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·,è¿™å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–åˆ°çš„è¡Œï¼Œåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰æœªè¢«åˆ é™¤.åªæœ‰a,båŒæ—¶æ»¡è¶³çš„è®°å½•ï¼Œæ‰èƒ½è¿”å›žä½œä¸ºæŸ¥è¯¢ç»“æžœ. DELETE:InnoDBä¼šä¸ºåˆ é™¤çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·(äº‹åŠ¡çš„ID)ä½œä¸ºåˆ é™¤æ ‡è¯†. UPDATE:InnoDBæ‰§è¡ŒUPDATEï¼Œå®žé™…ä¸Šæ˜¯æ–°æ’å…¥äº†ä¸€è¡Œè®°å½•ï¼Œå¹¶ä¿å­˜å…¶åˆ›å»ºæ—¶é—´ä¸ºå½“å‰äº‹åŠ¡çš„IDï¼ŒåŒæ—¶ä¿å­˜å½“å‰äº‹åŠ¡IDåˆ°è¦UPDATEçš„è¡Œçš„åˆ é™¤æ—¶é—´ã€‚ é”ç­–ç•¥2.æ—¥å¿—redologï¼Œbinlogï¼Œundologå¯¹äº‹åŠ¡çš„å½±å“ binlog redolog,ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œç¼“å­˜åŒºä¸­æ•°æ®ä¼šæ…¢æ…¢æ›´æ–°åˆ°æ•°æ®åº“çš„ç¡¬ç›˜ä¸Šã€‚ undologï¼Œè®°å½•äº†ä¿®æ”¹å‡ çŽ‡ï¼Œå¯ä»¥éšä¾¿å›žæ»šï¼Œä¿è¯åŽŸå­æ€§ã€‚ 3.äº‹åŠ¡MVCC (MultiVersion Concurrency Control) å«åš==å¤šç‰ˆæœ¬å¹¶å‘==æŽ§åˆ¶ã€‚==ç”±undologå’Œè®°å½•ç‰ˆæœ¬çš„ä¸€ä¸ªä¸œè¥¿ç»„æˆ==ã€‚ InnoDBçš„ MVCCï¼Œæ˜¯é€šè¿‡åœ¨æ¯è¡Œè®°å½•çš„åŽé¢ä¿å­˜ä¸¤ä¸ªéšè—çš„åˆ—æ¥å®žçŽ°çš„ã€‚è¿™ä¸¤ä¸ªåˆ—ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„åˆ›å»ºæ—¶é—´ï¼Œä¸€ä¸ªä¿å­˜äº†è¡Œçš„è¿‡æœŸæ—¶é—´ï¼Œå½“ç„¶å­˜å‚¨çš„å¹¶ä¸æ˜¯å®žé™…çš„æ—¶é—´å€¼ï¼Œè€Œæ˜¯ç³»ç»Ÿç‰ˆæœ¬å·ã€‚ ä»¥ä¸Šç‰‡æ®µæ‘˜è‡ªã€Šé«˜æ€§èƒ½Mysqlã€‹è¿™æœ¬ä¹¦å¯¹MVCCçš„å®šä¹‰ã€‚ä»–çš„ä¸»è¦å®žçŽ°æ€æƒ³æ˜¯é€šè¿‡==æ•°æ®å¤šç‰ˆæœ¬==æ¥åšåˆ°==è¯»å†™åˆ†ç¦»==ã€‚ä»Žè€Œå®žçŽ°ä¸åŠ é”è¯»è¿›è€Œåšåˆ°è¯»å†™å¹¶è¡Œã€‚ MVCCåœ¨mysqlä¸­çš„å®žçŽ°ä¾èµ–çš„æ˜¯undo logä¸Žread view undolog :undologä¸­è®°å½•æŸè¡Œæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚ read view :ç”¨æ¥åˆ¤æ–­å½“å‰ç‰ˆæœ¬æ•°æ®çš„å¯è§æ€§ACIDç‰¹æ€§ä¸­çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®žçŽ°çš„ äº‹åŠ¡çš„åŽŸå­æ€§æ˜¯é€šè¿‡ undo log æ¥å®žçŽ°çš„ äº‹åŠ¡çš„æŒä¹…æ€§æ€§æ˜¯é€šè¿‡ redo log æ¥å®žçŽ°çš„ äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡ (è¯»å†™é”+MVCC)æ¥å®žçŽ°çš„ è€Œäº‹åŠ¡çš„ç»ˆæžå¤§bossä¸€è‡´æ€§æ˜¯é€šè¿‡åŽŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æ¥å®žçŽ°çš„ï¼ï¼ï¼ åŽŸå­æ€§ï¼ŒæŒä¹…æ€§ï¼Œéš”ç¦»æ€§æŠ˜è…¾åŠå¤©çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼ACIDåªæ˜¯ä¸ªæ¦‚å¿µï¼Œäº‹åŠ¡æœ€ç»ˆç›®çš„æ˜¯è¦ä¿éšœæ•°æ®çš„å¯é æ€§ï¼Œä¸€è‡´æ€§ äº‹åŠ¡æ˜¯å¦‚ä½•é€šè¿‡æ—¥å¿—å®žçŽ°çš„ mysql ä¸ºäº†æå‡æ€§èƒ½ä¸ä¼šæŠŠæ¯æ¬¡çš„ä¿®æ”¹éƒ½å®žæ—¶åŒæ­¥åˆ°ç£ç›˜ï¼Œè€Œæ˜¯ä¼šå…ˆå­˜åˆ°Buffer Pool(ç¼“å†²æ± )é‡Œå¤´ï¼ŒæŠŠè¿™ä¸ªå½“ä½œç¼“å­˜æ¥ç”¨ã€‚ç„¶åŽä½¿ç”¨åŽå°çº¿ç¨‹åŽ»åšç¼“å†²æ± å’Œç£ç›˜ä¹‹é—´çš„åŒæ­¥ã€‚ redologæ¥è®°å½•å·²æˆåŠŸæäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šæŠŠredologæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œç³»ç»Ÿé‡å¯ä¹‹åŽåœ¨è¯»å–redo logæ¢å¤æœ€æ–°æ•°æ®ã€‚redologæ˜¯ç”¨æ¥æ¢å¤æ•°æ®çš„ ç”¨äºŽä¿éšœï¼Œå·²æäº¤äº‹åŠ¡çš„æŒä¹…åŒ–ç‰¹æ€§ undolog å«åšå›žæ»šæ—¥å¿—ï¼Œç”¨äºŽè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚ä»–æ­£å¥½è·Ÿå‰é¢æ‰€è¯´çš„é‡åšæ—¥å¿—æ‰€è®°å½•çš„ç›¸åï¼Œredologè®°å½•æ•°æ®è¢«ä¿®æ”¹åŽçš„ä¿¡æ¯ã€‚undologä¸»è¦è®°å½•çš„æ˜¯æ•°æ®çš„é€»è¾‘å˜åŒ–ï¼Œä¸ºäº†åœ¨å‘ç”Ÿé”™è¯¯æ—¶å›žæ»šä¹‹å‰çš„æ“ä½œï¼Œéœ€è¦å°†ä¹‹å‰çš„æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œç„¶åŽåœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰å¯ä»¥å›žæ»šã€‚undologè®°å½•äº‹åŠ¡ä¿®æ”¹ä¹‹å‰ç‰ˆæœ¬çš„æ•°æ®ä¿¡æ¯ï¼Œå› æ­¤å‡å¦‚ç”±äºŽç³»ç»Ÿé”™è¯¯æˆ–è€…rollbackæ“ä½œè€Œå›žæ»šçš„è¯å¯ä»¥æ ¹æ®undologçš„ä¿¡æ¯æ¥è¿›è¡Œå›žæ»šåˆ°æ²¡è¢«ä¿®æ”¹å‰çš„çŠ¶æ€ã€‚ redoå’ŒundoåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼šå› ä¸ºäº‹åŠ¡åœ¨ä¿®æ”¹é¡µæ—¶ï¼Œè¦å…ˆè®° undoï¼Œåœ¨è®° undo ä¹‹å‰è¦è®° undo çš„ redoï¼Œ ç„¶åŽä¿®æ”¹æ•°æ®é¡µï¼Œå†è®°æ•°æ®é¡µä¿®æ”¹çš„ redoã€‚ Redoï¼ˆé‡Œé¢åŒ…æ‹¬ undo çš„ä¿®æ”¹ï¼‰ ä¸€å®šè¦æ¯”æ•°æ®é¡µå…ˆæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚ å½“äº‹åŠ¡éœ€è¦å›žæ»šæ—¶ï¼Œå› ä¸ºæœ‰ undoï¼Œå¯ä»¥æŠŠæ•°æ®é¡µå›žæ»šåˆ°å‰é•œåƒçš„çŠ¶æ€ï¼Œå´©æºƒæ¢å¤æ—¶ï¼Œå¦‚æžœ redo log ä¸­äº‹åŠ¡æ²¡æœ‰å¯¹åº”çš„ commit è®°å½•ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ undoæŠŠè¯¥äº‹åŠ¡çš„ä¿®æ”¹å›žæ»šåˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‚ å¦‚æžœæœ‰ commit è®°å½•ï¼Œå°±ç”¨ redo å‰æ»šåˆ°è¯¥äº‹åŠ¡å®Œæˆæ—¶å¹¶æäº¤æŽ‰ã€‚ 4.ç´¢å¼•MySQLç´¢å¼•èƒŒåŽçš„æ•°æ®ç»“æž„åŠç®—æ³•åŽŸç†å¤šç§å¼•æ“Žçš„å®žçŽ°åŒºåˆ«ï¼Ÿèšæ—ç´¢å¼•ï¼Œéžèšæ—ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ã€æœ€å·¦åŒ¹é…åŽŸåˆ™ç­‰ç­‰ï¼ˆéžå¸¸é‡è¦ï¼‰ å”¯ä¸€ç´¢å¼• å”¯ä¸€ç´¢å¼•æ˜¯ä¸å…è®¸å…¶ä¸­ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒç´¢å¼•å€¼çš„ç´¢å¼•ã€‚å½“çŽ°æœ‰æ•°æ®ä¸­å­˜åœ¨é‡å¤çš„é”®å€¼æ—¶ï¼Œå¤§å¤šæ•°æ•°æ®åº“ä¸å…è®¸å°†æ–°åˆ›å»ºçš„å”¯ä¸€ç´¢å¼•ä¸Žè¡¨ä¸€èµ·ä¿å­˜ã€‚æ•°æ®åº“è¿˜å¯èƒ½é˜²æ­¢æ·»åŠ å°†åœ¨è¡¨ä¸­åˆ›å»ºé‡å¤é”®å€¼çš„æ–°æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœåœ¨employeeè¡¨ä¸­èŒå‘˜çš„å§“(lname)ä¸Šåˆ›å»ºäº†å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ä»»ä½•ä¸¤ä¸ªå‘˜å·¥éƒ½ä¸èƒ½åŒå§“ã€‚ ä¸»é”®ç´¢å¼• æ•°æ®åº“è¡¨ç»å¸¸æœ‰ä¸€åˆ—æˆ–åˆ—ç»„åˆï¼Œå…¶å€¼å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¯¥åˆ—ç§°ä¸ºè¡¨çš„ä¸»é”®ã€‚åœ¨æ•°æ®åº“å…³ç³»å›¾ä¸­ä¸ºè¡¨å®šä¹‰ä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹å®šç±»åž‹ã€‚è¯¥ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼éƒ½å”¯ä¸€ã€‚å½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»é”®ç´¢å¼•æ—¶ï¼Œå®ƒè¿˜å…è®¸å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚ èšé›†ç´¢å¼• è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸Žé”®å€¼çš„é€»è¾‘ï¼ˆç´¢å¼•ï¼‰é¡ºåºç›¸åŒã€‚ä¸€ä¸ªè¡¨åªèƒ½åŒ…å«ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚å¦‚æžœæŸç´¢å¼•ä¸æ˜¯èšé›†ç´¢å¼•ï¼Œåˆ™è¡¨ä¸­è¡Œçš„ç‰©ç†é¡ºåºä¸Žé”®å€¼çš„é€»è¾‘é¡ºåºä¸åŒ¹é…ã€‚ä¸Žéžèšé›†ç´¢å¼•ç›¸æ¯”ï¼Œèšé›†ç´¢å¼•é€šå¸¸æä¾›æ›´å¿«çš„æ•°æ®è®¿é—®é€Ÿåº¦ã€‚ å»ºç´¢å¼•æœ‰å“ªäº›åŽŸåˆ™ ç´¢å¼•æ˜¯å»ºç«‹åœ¨æ•°æ®åº“è¡¨ä¸­çš„æŸäº›åˆ—çš„ä¸Šé¢ã€‚åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œåº”è¯¥è€ƒè™‘åœ¨å“ªäº›åˆ—ä¸Šå¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œåœ¨å“ªäº›åˆ—ä¸Šä¸èƒ½åˆ›å»ºç´¢å¼•ã€‚ä¸€èˆ¬æ¥è¯´åº”è¯¥åœ¨è¿™äº›åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼š åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦ åœ¨ä½œä¸ºä¸»é”®çš„åˆ—ä¸Šï¼Œå¼ºåˆ¶è¯¥åˆ—çš„å”¯ä¸€æ€§å’Œç»„ç»‡è¡¨ä¸­æ•°æ®çš„æŽ’åˆ—ç»“æž„ï¼› åœ¨ç»å¸¸ç”¨åœ¨è¿žæŽ¥çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿žæŽ¥çš„é€Ÿåº¦ï¼› åœ¨ç»å¸¸éœ€è¦æ ¹æ®èŒƒå›´è¿›è¡Œæœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æŽ’åºï¼Œå…¶æŒ‡å®šçš„èŒƒå›´æ˜¯è¿žç»­çš„ï¼› åœ¨ç»å¸¸éœ€è¦æŽ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æŽ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æŽ’åºï¼ŒåŠ å¿«æŽ’åºæŸ¥è¯¢æ—¶é—´ï¼› åœ¨ç»å¸¸ä½¿ç”¨åœ¨WHEREå­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚ ä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨ æ¡ä»¶ä¸­ä½¿ç”¨äº† orï¼Œè€Œç›¸å…³åˆ—ä¸å…¨æœ‰ç´¢å¼• æ¡ä»¶ä¸­ä½¿ç”¨äº†andï¼Œè€Œç›¸å…³åˆ—ä¸æ»¡è¶³æœ€å·¦åŽŸåˆ™ ç´¢å¼•åˆ—çš„æ•°æ®ç±»åž‹å‡ºçŽ°éšå½¢è½¬æ¢ï¼Œå¦‚varcharä¸åŠ å•å¼•å·çš„è¯å¯èƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºintåž‹ï¼‰ likeæŸ¥è¯¢æ˜¯ä»¥%å¼€å¤´ where å­å¥é‡Œå¯¹ç´¢å¼•åˆ—ä¸Šæœ‰æ•°å­¦è¿ç®—/å‡½æ•° mysqlä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«ä»€ä¹ˆæƒ…å†µä¸‹ä¸å®œå»ºç«‹ç´¢å¼•ï¼Ÿ å¯¹äºŽé‚£äº›åœ¨æŸ¥è¯¢ä¸­==å¾ˆå°‘ä½¿ç”¨æˆ–è€…å‚è€ƒçš„åˆ—ä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¢ç„¶è¿™äº›åˆ—å¾ˆå°‘ä½¿ç”¨åˆ°ï¼Œå› æ­¤æœ‰ç´¢å¼•æˆ–è€…æ— ç´¢å¼•ï¼Œå¹¶ä¸èƒ½æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ç›¸åï¼Œç”±äºŽå¢žåŠ äº†ç´¢å¼•ï¼Œåè€Œé™ä½Žäº†ç³»ç»Ÿçš„ç»´æŠ¤é€Ÿåº¦å’Œå¢žå¤§äº†ç©ºé—´éœ€æ±‚ã€‚ å¯¹äºŽé‚£äº›==åªæœ‰å¾ˆå°‘æ•°æ®å€¼çš„åˆ—==ä¹Ÿä¸åº”è¯¥å¢žåŠ ç´¢å¼•ã€‚ä¸¾ä¾‹æ¯”å¦‚æ€§åˆ«åªæœ‰ç”·å’Œå¥³ å¯¹äºŽ==é‚£äº›å®šä¹‰ä¸ºtext,imageå’Œbitæ•°æ®ç±»åž‹çš„åˆ—ä¸åº”è¯¥å¢žåŠ ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™äº›åˆ—çš„æ•°æ®é‡è¦ä¹ˆç›¸å½“å¤§ï¼Œè¦ä¹ˆå–å€¼å¾ˆå°‘==ã€‚ ç»==å¸¸é¢‘ç¹æ›´æ–°çš„åˆ—==ä¸è¦å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºè‚¯å®šä¼šå½±å“æ’å…¥æˆ–æ›´æ–°çš„æ•ˆçŽ‡ å°½é‡é¿==å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ ï¼= æˆ–è€… &lt;&gt; æ“ä½œç¬¦ï¼ŒæŸ¥è¯¢å¼•ç”¨ä¼šæ”¾å¼ƒç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«==æã€‚ å½“==ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºŽæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•==ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¿®æ”¹æ€§èƒ½å’Œæ£€ç´¢æ€§èƒ½æ˜¯äº’ç›¸çŸ›ç›¾çš„ã€‚å½“å¢žåŠ ç´¢å¼•æ—¶ï¼Œä¼šæé«˜æ£€ç´¢æ€§èƒ½ï¼Œä½†æ˜¯ä¼šé™ä½Žä¿®æ”¹æ€§èƒ½ã€‚å½“å‡å°‘ç´¢å¼•æ—¶ï¼Œä¼šæé«˜ä¿®æ”¹æ€§èƒ½ï¼Œé™ä½Žæ£€ç´¢æ€§èƒ½ã€‚å› æ­¤ï¼Œå½“ä¿®æ”¹æ€§èƒ½è¿œè¿œå¤§äºŽæ£€ç´¢æ€§èƒ½æ—¶ï¼Œä¸åº”è¯¥åˆ›å»ºç´¢å¼•ã€‚ å°½é‡é¿å…NULLï¼šåœ¨MySQLä¸­ï¼Œ==å«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚==ã€‚å¯ä»¥é‡‡ç”¨0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼ åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢žåŠ è€Œå¢žåŠ ã€‚ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æžœè¦å»ºç«‹èšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢žåŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½Žäº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚ ä¸ºä»€ä¹ˆç”¨B-æ ‘ä¸Šæ–‡è¯´è¿‡ä¸€èˆ¬ä½¿ç”¨ç£ç›˜I/Oæ¬¡æ•°è¯„ä»·ç´¢å¼•ç»“æž„çš„ä¼˜åŠ£ã€‚å…ˆä»ŽB-Treeåˆ†æžï¼Œæ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ã€‚æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†==ç£ç›˜é¢„è¯»åŽŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºŽä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥== ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®žé™…å®žçŽ°B-Treeè¿˜éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŠ€å·§ï¼š æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æŽ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®žçŽ°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡I/Oã€‚ ä¸ºä»€ä¹ˆä¸ç”¨çº¢é»‘æ ‘ çº¢é»‘æ ‘è¿™ç§ç»“æž„ï¼Œh(å±‚æ•°)æ˜Žæ˜¾è¦æ·±çš„å¤šã€‚ç”±äºŽé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„I/Oæ¸è¿›å¤æ‚åº¦ä¹Ÿä¸ºO(h)ï¼Œæ•ˆçŽ‡æ˜Žæ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ MySQLç´¢å¼•å¤±æ•ˆçš„æƒ…å½¢å¾ˆå¤šã€‚ä¾‹å¦‚ï¼š åœ¨WHEREæ¡ä»¶çš„LIKEå…³é”®å­—åŒ¹é…çš„å­—ç¬¦ä¸²ä»¥â€%â€œå¼€å¤´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•æ˜¯ä¸ä¼šèµ·åˆ°ä½œç”¨çš„ï¼›WHEREæ¡ä»¶ä¸­ä½¿ç”¨ORå…³é”®å­—æ¥è¿žæŽ¥å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æžœæœ‰ä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œé‚£ä¹ˆå…¶ä»–çš„ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ï¼›å¤šåˆ—ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤šåˆ—ç´¢å¼•ä¹Ÿä¸ä¼šèµ·ä½œç”¨ã€‚ ä½¿ç”¨inæŸ¥è¯¢æ—¶ï¼ŒinæŸ¥è¯¢æ¡ä»¶è¶…è¿‡æ•°æ®åº“è¡¨çš„ä¸€åŠçš„æ—¶å€™ä¹Ÿä¼šå¤±æ•ˆã€‚ æœ€å·¦åŒ¹é…åŽŸåˆ™ ç´¢å¼•å­—æ®µè¦å°½é‡çš„å° ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼ˆå³ä»Žå·¦å¾€å³åŒ¹é…ï¼‰ï¼šå½“b+æ ‘çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æž„ï¼Œæ¯”å¦‚(name,age,sex)çš„æ—¶å€™ï¼Œb+æ•°æ˜¯æŒ‰ç…§ä»Žå·¦åˆ°å³çš„é¡ºåºæ¥å»ºç«‹æœç´¢æ ‘çš„ï¼Œæ¯”å¦‚å½“(å¼ ä¸‰,20,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢çš„æ—¶å€™ï¼Œb+æ ‘ä¼šä¼˜å…ˆæ¯”è¾ƒnameæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘ï¼Œå¦‚æžœnameç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒageå’Œsexï¼Œæœ€åŽå¾—åˆ°æ£€ç´¢çš„æ•°æ®ï¼›ä½†å½“(20,F)è¿™æ ·çš„æ²¡æœ‰nameçš„æ•°æ®æ¥çš„æ—¶å€™ï¼Œb+æ ‘å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™nameå°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ®nameæ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥åŽ»å“ªé‡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚å½“(å¼ ä¸‰,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼Œb+æ ‘å¯ä»¥ç”¨nameæ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µageçš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºŽå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åŽå†åŒ¹é…æ€§åˆ«æ˜¯Fçš„æ•°æ®äº†ï¼Œ è¿™ä¸ªæ˜¯éžå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚ MySQLç´¢å¼•ä¼˜åŒ–æ·±å…¥åˆ†æžæ‰§è¡Œè®¡åˆ’å¦‚æžœæœ‰2çº§ç´¢å¼•æ€Žä¹ˆå­˜å±€éƒ¨æ€§åŽŸç†ä¸Žç£ç›˜é¢„è¯»ç”±äºŽå­˜å‚¨ä»‹è´¨çš„ç‰¹æ€§ï¼Œç£ç›˜æœ¬èº«å­˜å–å°±æ¯”ä¸»å­˜æ…¢å¾ˆå¤šï¼Œå†åŠ ä¸Šæœºæ¢°è¿åŠ¨è€—è´¹ï¼Œç£ç›˜çš„å­˜å–é€Ÿåº¦å¾€å¾€æ˜¯ä¸»å­˜çš„å‡ ç™¾åˆ†åˆ†ä¹‹ä¸€ï¼Œå› æ­¤ä¸ºäº†æé«˜æ•ˆçŽ‡ï¼Œè¦å°½é‡å‡å°‘ç£ç›˜I/Oã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œ==ç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ï¼Œå³ä½¿åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œç£ç›˜ä¹Ÿä¼šä»Žè¿™ä¸ªä½ç½®å¼€å§‹ï¼Œé¡ºåºå‘åŽè¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®æ”¾å…¥å†…å­˜ã€‚==è¿™æ ·åšçš„ç†è®ºä¾æ®æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­è‘—åçš„==å±€éƒ¨æ€§åŽŸç†ï¼šå½“ä¸€ä¸ªæ•°æ®è¢«ç”¨åˆ°æ—¶ï¼Œå…¶é™„è¿‘çš„æ•°æ®ä¹Ÿé€šå¸¸ä¼šé©¬ä¸Šè¢«ä½¿ç”¨ã€‚ç¨‹åºè¿è¡ŒæœŸé—´æ‰€éœ€è¦çš„æ•°æ®é€šå¸¸æ¯”è¾ƒé›†ä¸­==ã€‚ ç”±äºŽç£ç›˜é¡ºåºè¯»å–çš„æ•ˆçŽ‡å¾ˆé«˜ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ï¼Œå› æ­¤å¯¹äºŽå…·æœ‰å±€éƒ¨æ€§çš„ç¨‹åºæ¥è¯´ï¼Œé¢„è¯»å¯ä»¥æé«˜I/Oæ•ˆçŽ‡ã€‚ é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆpageï¼‰çš„æ•´å€æ•°ã€‚é¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿žç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œé¡µå¾—å¤§å°é€šå¸¸ä¸º4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚å½“ç¨‹åºè¦è¯»å–çš„æ•°æ®ä¸åœ¨ä¸»å­˜ä¸­æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘ç£ç›˜å‘å‡ºè¯»ç›˜ä¿¡å·ï¼Œç£ç›˜ä¼šæ‰¾åˆ°æ•°æ®çš„èµ·å§‹ä½ç½®å¹¶å‘åŽè¿žç»­è¯»å–ä¸€é¡µæˆ–å‡ é¡µè½½å…¥å†…å­˜ä¸­ï¼Œç„¶åŽå¼‚å¸¸è¿”å›žï¼Œç¨‹åºç»§ç»­è¿è¡Œ 5.SQLè¯­å¥ SQLè¯­å¥èœé¸Ÿæ•™ç¨‹ SQLæ•™ç¨‹ ANDè¿ç®—ç¬¦ï¼Œå¦‚æžœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ AND è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚ ORè¿ç®—ç¬¦å¦‚æžœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶ä¸­åªè¦æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ OR è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚ 123SELECT * FROM WebsitesWHERE alexa &gt; 15AND (country=&apos;CN&apos; OR country=&apos;USA&apos;); ORDER BY å…³é”®å­—é»˜è®¤æŒ‰ç…§å‡åºå¯¹è®°å½•è¿›è¡ŒæŽ’åºã€‚å¦‚æžœéœ€è¦æŒ‰ç…§é™åºå¯¹è®°å½•è¿›è¡ŒæŽ’åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ DESC å…³é”®å­—ã€‚ INæ“ä½œç¬¦INæ“ä½œç¬¦å…è®¸åœ¨WHEREå­å¥ä¸­è§„å®šå¤šä¸ªå€¼ã€‚ BETWEENæ“ä½œç¬¦ç”¨äºŽé€‰å–ä»‹äºŽä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´å†…çš„å€¼ã€‚ 123SELECT * FROM WebsitesWHERE (alexa BETWEEN 1 AND 20)AND country NOT IN (&apos;USA&apos;, &apos;IND&apos;); INNER JOINï¼šå¦‚æžœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›žè¡Œ LEFT JOINï¼šå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»Žå·¦è¡¨è¿”å›žæ‰€æœ‰çš„è¡Œ RIGHT JOINï¼šå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»Žå³è¡¨è¿”å›žæ‰€æœ‰çš„è¡Œ FULL JOINï¼šåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›žè¡Œ SQLé«˜çº§æ•™ç¨‹ æ¨¡ç³ŠæŸ¥è¯¢(like)1234SELECT * FROM Websitesä»¥&quot;G&quot;å¼€å§‹çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;G%&apos;;ä»¥&quot;k&quot;ç»“å°¾çš„æ‰€æœ‰å®¢æˆ·WHERE name LIKE &apos;%k&apos;;è¿˜å¯ä»¥å†™NOT LIKEåšåå‘æŸ¥è¯¢ è§£é‡ŠMySQLå¤–è¿žæŽ¥ã€å†…è¿žæŽ¥(outer joinå’Œinner join)ä¸Žè‡ªè¿žæŽ¥çš„åŒºåˆ«å¤–è¿žæŽ¥ å·¦è¿žæŽ¥ï¼šè¿žæŽ¥ä¸¤å¼ è¡¨ï¼Œå·¦è¡¨æ•°æ®å®Œå…¨æ˜¾ç¤ºï¼Œå³è¡¨åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼›åœ¨è¿™é‡Œï¼Œt_employeeå°±æ˜¯å·¦è¡¨ï¼Œä¹Ÿå°±æ˜¯åŸºå‡†è¡¨ï¼Œ==ç”¨åŸºå‡†è¡¨çš„æ•°æ®åŽ»åŒ¹é…å³è¡¨çš„æ•°æ®ï¼Œæ‰€ä»¥å·¦è¡¨çš„è®°å½•æ˜¯å…¨éƒ¨ä¼šæŸ¥è¯¢å‡ºæ¥çš„ï¼Œå¦‚æžœå³è¡¨æ²¡æœ‰è®°å½•å¯¹åº”çš„è¯å°±æ˜¾ç¤ºnull==ã€‚ LEFT JOIN å…³é”®å­—ä»Žå·¦è¡¨ï¼ˆtable1ï¼‰è¿”å›žæ‰€æœ‰çš„è¡Œï¼Œå³ä½¿å³è¡¨ï¼ˆtable2ï¼‰ä¸­æ²¡æœ‰åŒ¹é…ã€‚å¦‚æžœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œåˆ™ç»“æžœä¸º NULLã€‚ å³è¿žæŽ¥ï¼šåŒä¸Šï¼Œæ¢ä¸ªæ–¹å‘ï¼›å…¨å¤–è¿žæŽ¥ï¼šä¸¤è¡¨å­—æ®µéƒ½åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šçš„è¡¥nullï¼› å†…è¿žæŽ¥ï¼šæ‰€æœ‰æŸ¥è¯¢å‡ºçš„ç»“æžœéƒ½æ˜¯èƒ½å¤Ÿåœ¨è¿žæŽ¥çš„è¡¨ä¸­æœ‰å¯¹åº”è®°å½•çš„ã€‚è¿™å°±æ˜¯å†…è¿žæŽ¥çš„ç‰¹ç‚¹ï¼Œ==åªæŸ¥è¯¢åœ¨è¿žæŽ¥çš„è¡¨ä¸­èƒ½å¤Ÿæœ‰å¯¹åº”çš„è®°å½•==ï¼Œ INNER JOINå…³é”®å­—åœ¨è¡¨ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªåŒ¹é…æ—¶è¿”å›žè¡Œã€‚ å…¨å¤–è¿žæŽ¥ï¼š==mysqlæ˜¯æ²¡æœ‰å…¨å¤–è¿žæŽ¥çš„==(mysqlä¸­æ²¡æœ‰full outer joinå…³é”®å­—)ï¼Œ==æƒ³è¦è¾¾åˆ°å…¨å¤–è¿žæŽ¥çš„æ•ˆæžœï¼Œå¯ä»¥ä½¿ç”¨unionå…³é”®å­—è¿žæŽ¥å·¦å¤–è¿žæŽ¥å’Œå³å¤–è¿žæŽ¥==ã€‚å¦‚æžœåœ¨Oracleä¸­ï¼Œç›´æŽ¥å°±ä½¿ç”¨full outer joinå…³é”®å­—è¿žæŽ¥ä¸¤è¡¨å°±è¡Œäº†ã€‚ UNION SQL UNION æ“ä½œç¬¦åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æžœã€‚ 1234SELECT country FROM WebsitesUNIONSELECT country FROM appsORDER BY country; SELECT INTO é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»Žä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚SELECT INTO è¯­å¥ä»Žä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åŽæŠŠæ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªæ–°è¡¨ä¸­ 123CREATE TABLE æ–°è¡¨ASSELECT * FROM æ—§è¡¨ INSERT INTO SELECT é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»Žä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚INSERT INTO SELECT è¯­å¥ä»Žä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åŽæŠŠæ•°æ®æ’å…¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ä¸­ã€‚ 12INSERT INTO table2SELECT * FROM table1; è‡ªè¿žæŽ¥ï¼šæ‰¾åˆ°ä¸¤è¡¨çš„å…¬å…±å­—æ®µï¼Œç„¶åŽå’Œå†…è¿žæŽ¥ä¸€æ ·ã€‚ äº¤å‰è¿žæŽ¥: ç”Ÿæˆç¬›å¡å°”ç§¯ï¼å®ƒä¸ä½¿ç”¨ä»»ä½•åŒ¹é…æˆ–è€…é€‰å–æ¡ä»¶ï¼Œè€Œæ˜¯ç›´æŽ¥å°†ä¸€ä¸ªæ•°æ®æºä¸­çš„æ¯ä¸ªè¡Œä¸Žå¦ä¸€ä¸ªæ•°æ®æºçš„æ¯ä¸ªè¡Œéƒ½ä¸€ä¸€åŒ¹é… SELECT type,pub_name FROM titles CROSS JOIN publishers ORDER BY type å­æŸ¥è¯¢ä¸€ä¸ªSELECTè¯­å¥åµŒå¥—åœ¨å¦ä¸€ä¸ªSELECTè¯­å¥ä¸­ï¼Œå­æŸ¥è¯¢ä¹Ÿå«åšå†…éƒ¨æŸ¥è¯¢ï¼Œè€ŒåŒ…å«å­æŸ¥è¯¢çš„è¯­å¥åˆç§°ä¸ºå¤–éƒ¨æŸ¥è¯¢æˆ–ä¸»æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è‡ªèº«å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­æŸ¥è¯¢ï¼Œä¸€ä¸ªæŸ¥è¯¢è¯­å¥ä¸­å¯ä»¥åµŒå¥—ä»»æ„æ•°é‡çš„å­æŸ¥è¯¢ã€‚ SQLæŸ¥è¯¢é‡å¤è®°å½• MySQLä¸¤é“ç»å…¸SQLé¢è¯•é¢˜(è¡Œè½¬åˆ—/åˆ—è½¬è¡Œ/æ±‚æœ€å€¼) SQLå‡½æ•° GROUP BY GROUP BY è¯­å¥ç”¨äºŽç»“åˆèšåˆå‡½æ•°ï¼Œæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æžœé›†è¿›è¡Œåˆ†ç»„ã€‚ 123ç»Ÿè®¡ access_log å„ä¸ª site_id çš„è®¿é—®é‡ï¼šSELECT site_id, SUM(access_log.count) AS numsFROM access_log GROUP BY site_id; 1234SELECT Websites.name,COUNT(access_log.aid) AS nums FROM access_logLEFT JOIN WebsitesON access_log.site_id=Websites.idGROUP BY Websites.name; HAVING åœ¨ SQL ä¸­å¢žåŠ  HAVING å­å¥åŽŸå› æ˜¯ï¼Œ==WHERE å…³é”®å­—æ— æ³•ä¸Žèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨==ã€‚HAVING å­å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰åˆ†ç»„åŽçš„å„ç»„æ•°æ®ã€‚ 12345æŸ¥æ‰¾æ€»è®¿é—®é‡å¤§äºŽ 200 çš„ç½‘ç«™ã€‚SELECT Websites.name, Websites.url, SUM(access_log.count) AS nums FROM (access_log INNER JOIN WebsitesON access_log.site_id=Websites.id)GROUP BY Websites.nameHAVING SUM(access_log.count) &gt; 200; 6.SQLä¼˜åŒ–æ…¢æŸ¥è¯¢è§£å†³çš„åŸºæœ¬æ­¥éª¤500ä¸‡æ•°é‡çº§æŸ¥è¯¢ä¼˜åŒ–æˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹å®žé™…é¡¹ç›®è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„å·§ç”¨è¿™19æ¡MySQLä¼˜åŒ–ï¼Œæ•ˆçŽ‡è‡³å°‘æé«˜3å€ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œåˆ†è¡¨å’Œåˆ†åº“ï¼Ÿä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŽŸç†åˆ†æžï¼ˆ900W+æ•°æ®ï¼Œä»Ž17såˆ°300msé¢è¯•å®˜ï¼šç»™æˆ‘è®²ä¸€ä¸‹åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆæ•°æ®åº“å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±MYSQLçš„ä¸»ä»ŽåŒæ­¥å»¶è¿Ÿçš„åŽŸå› åŠè§£å†³æ–¹æ¡ˆ mysqlä¸»ä»Žå¤åˆ¶ç”¨é€” ä»Žåº“ç”Ÿæˆä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œä¸€ä¸ªSQLçº¿ç¨‹ï¼›i/oçº¿ç¨‹åŽ»è¯·æ±‚ä¸»åº“çš„binlogï¼Œå¹¶å°†å¾—åˆ°çš„binlogæ—¥å¿—å†™åˆ°relaylogï¼ˆä¸­ç»§æ—¥å¿—ï¼‰æ–‡ä»¶ä¸­ï¼›ä¸»åº“ä¼šç”Ÿæˆä¸€ä¸ª log dump çº¿ç¨‹ï¼Œç”¨æ¥ç»™ä»Žåº“i/oçº¿ç¨‹ä¼ binlogï¼›SQL çº¿ç¨‹ï¼Œä¼šè¯»å–relay logæ–‡ä»¶ä¸­çš„æ—¥å¿—ï¼Œå¹¶è§£æžæˆå…·ä½“æ“ä½œï¼Œæ¥å®žçŽ°ä¸»ä»Žçš„æ“ä½œä¸€è‡´ï¼Œè€Œæœ€ç»ˆæ•°æ®ä¸€è‡´ï¼› å®žæ—¶ç¾å¤‡ï¼Œç”¨äºŽæ•…éšœåˆ‡æ¢,==è¯»å†™åˆ†ç¦»(ä¸»å†™ä»Žè¯»æ¯”ä¾‹ä¸º10ï¼š1)==ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡å¤‡ä»½ï¼Œé¿å…å½±å“ä¸šåŠ¡ ä¸»ä»Žéƒ¨ç½²å¿…è¦æ¡ä»¶ï¼šä¸»åº“å¼€å¯binlogæ—¥å¿—ï¼ˆè®¾ç½®log-binå‚æ•°ï¼‰,ä¸»ä»Žserver-idä¸åŒ,ä»Žåº“æœåŠ¡å™¨èƒ½è¿žé€šä¸»åº“æ•°æ®åº“å¦‚ä½•ä¿è¯é«˜å¯ç”¨ç°åº¦å‘å¸ƒåœ¨ç°åº¦å‘å¸ƒå¼€å§‹åŽï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸ç›´æŽ¥å°†æµé‡åˆ‡è¿‡æ¥ï¼Œè€Œæ˜¯æµ‹è¯•äººå‘˜å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œçº¿ä¸Šæµ‹è¯•ï¼Œå¯åŠ¨çš„è¿™ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‘ä¸é›€ã€‚å¦‚æžœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°†å°‘é‡çš„ç”¨æˆ·æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œç„¶åŽå†å¯¹æ–°ç‰ˆæœ¬åšè¿è¡ŒçŠ¶æ€è§‚å¯Ÿï¼Œæ”¶é›†å„ç§è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚æžœæ­¤æ—¶å¯¹æ–°æ—§ç‰ˆæœ¬åšå„ç§æ•°æ®å¯¹æ¯”ï¼Œå°±æ˜¯æ‰€è°“çš„A/Bæµ‹è¯•ã€‚ å½“ç¡®è®¤æ–°ç‰ˆæœ¬è¿è¡Œè‰¯å¥½åŽï¼Œå†é€æ­¥å°†æ›´å¤šçš„æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œåœ¨æ­¤æœŸé—´ï¼Œè¿˜å¯ä»¥ä¸æ–­åœ°è°ƒæ•´æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„è¿è¡Œçš„æœåŠ¡å™¨å‰¯æœ¬æ•°é‡ï¼Œä»¥ä½¿å¾—æ–°ç‰ˆæœ¬èƒ½å¤Ÿæ‰¿å—è¶Šæ¥è¶Šå¤§çš„æµé‡åŽ‹åŠ›ã€‚ç›´åˆ°å°†100%çš„æµé‡éƒ½åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œæœ€åŽå…³é—­å‰©ä¸‹çš„è€ç‰ˆæœ¬æœåŠ¡ï¼Œå®Œæˆç°åº¦å‘å¸ƒã€‚ å¦‚æžœåœ¨ç°åº¦å‘å¸ƒè¿‡ç¨‹ä¸­ï¼ˆç°åº¦æœŸï¼‰å‘çŽ°äº†æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå°±åº”è¯¥ç«‹å³å°†æµé‡åˆ‡å›žè€ç‰ˆæœ¬ä¸Šï¼Œè¿™æ ·ï¼Œå°±ä¼šå°†è´Ÿé¢å½±å“æŽ§åˆ¶åœ¨æœ€å°èŒƒå›´å†…ã€‚ MySQLä¼˜åŒ–åˆ›å»ºè¡¨æ—¶å€™çš„ä¼˜åŒ– æ•´æ•°TinyInt,SmallInt,MediumInt,Int,BigInt ä½¿ç”¨çš„å­˜å‚¨ 8,16,24,32,64 ä½å­˜å‚¨ç©ºé—´ã€‚ä½¿ç”¨ Unsigned è¡¨ç¤ºä¸å…è®¸è´Ÿæ•°ï¼Œå¯ä»¥ä½¿æ­£æ•°çš„ä¸Šçº¿æé«˜ä¸€å€ã€‚ å®žæ•°Float,Double , æ”¯æŒè¿‘ä¼¼çš„æµ®ç‚¹è¿ç®—ã€‚Decimalï¼Œç”¨äºŽå­˜å‚¨ç²¾ç¡®çš„å°æ•°ã€‚ å­—ç¬¦ä¸²VarCharï¼Œå­˜å‚¨å˜é•¿çš„å­—ç¬¦ä¸²ã€‚éœ€è¦ 1 æˆ– 2 ä¸ªé¢å¤–çš„å­—èŠ‚è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚Charï¼Œå®šé•¿ï¼Œé€‚åˆå­˜å‚¨å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚ MD5 å€¼ã€‚ Blobï¼ŒTextä¸ºäº†å­˜å‚¨å¾ˆå¤§çš„æ•°æ®è€Œè®¾è®¡çš„ã€‚åˆ†åˆ«é‡‡ç”¨äºŒè¿›åˆ¶å’Œå­—ç¬¦çš„æ–¹å¼ã€‚ æ—¶é—´ç±»åž‹DateTimeï¼Œä¿å­˜å¤§èŒƒå›´çš„å€¼ï¼Œå  8 ä¸ªå­—èŠ‚ã€‚TimeStampï¼ŒæŽ¨èï¼Œä¸Ž UNIX æ—¶é—´æˆ³ç›¸åŒï¼Œå  4 ä¸ªå­—èŠ‚ã€‚SQLè¯­å¥ä¼˜åŒ– åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“Žæ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚ åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“Žæ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼šselect id from t where num is nullå¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åŽè¿™æ ·æŸ¥è¯¢ï¼šselect id from t where num=0 ç”¨EXISTSæ›¿ä»£INã€ç”¨NOT EXISTSæ›¿ä»£NOT IN ç”¨Whereå­å¥æ›¿æ¢HAVING å­å¥ å› ä¸ºHAVING åªä¼šåœ¨æ£€ç´¢å‡ºæ‰€æœ‰è®°å½•ä¹‹åŽæ‰å¯¹ç»“æžœé›†è¿›è¡Œè¿‡æ»¤ã€‚ å°½é‡é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“Žæ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æ Whereå­å¥ä¸­ï¼šwhereè¡¨ä¹‹é—´çš„è¿žæŽ¥å¿…é¡»å†™åœ¨å…¶ä»–Whereæ¡ä»¶ä¹‹å‰ï¼Œé‚£äº›å¯ä»¥è¿‡æ»¤æŽ‰æœ€å¤§æ•°é‡è®°å½•çš„æ¡ä»¶å¿…é¡»å†™åœ¨Whereå­å¥çš„æœ«å°¾.HAVINGæœ€åŽã€‚ å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œåº”å°½é‡é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆåº”è€ƒè™‘åœ¨ where åŠ order by æ¶‰åŠçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ç´¢å¼•ä¼˜åŒ–(é€‰æ‹©ç´¢å¼•çš„æ•°æ®ç±»åž‹)MySQLæ”¯æŒå¾ˆå¤šæ•°æ®ç±»åž‹ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»åž‹å­˜å‚¨æ•°æ®å¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ã€‚ è¶Šå°çš„æ•°æ®ç±»åž‹é€šå¸¸æ›´å¥½ï¼šè¶Šå°çš„æ•°æ®ç±»åž‹é€šå¸¸åœ¨ç£ç›˜ã€å†…å­˜å’Œcpuç¼“å­˜ä¸­éƒ½éœ€è¦æ›´å°‘çš„ç©ºé—´ï¼Œå¤„ç†èµ·æ¥æ›´å¿«ã€‚ ç®€å•çš„æ•°æ®ç±»åž‹æ›´å¥½ï¼šæ•´å½¢æ•°æ®æ¯”èµ·å­—ç¬¦ï¼Œå¤„ç†å¼€é”€æ›´å°ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„æ¯”è¾ƒæ›´å¤æ‚ã€‚åœ¨MySQLä¸­ï¼Œåº”ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»åž‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å­˜å‚¨æ—¶é—´ï¼›ä»¥åŠç”¨æ•´å½¢æ•°æ®å­˜å‚¨IPåœ°å€ã€‚ å°½é‡é¿å…NULLï¼šåº”è¯¥åˆ¶å®šåˆ—ä¸ºNOT NULLï¼Œé™¤éžä½ æƒ³å­˜å‚¨NULLã€‚åœ¨MySQLä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºä»–ä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚ ä¸ºäº†æ›´å¤šçš„æé«˜mysqlæ•ˆçŽ‡å¯å»ºç«‹ç»„åˆç´¢å¼•ï¼Œéµå¾ªâ€œæœ€å·¦å‰ç¼€â€åŽŸåˆ™ã€‚åˆ›å»ºå¤åˆç´¢å¼•åº”è¯¥å°†æœ€å¸¸ç”¨ï¼ˆé¢‘çŽ‡ï¼‰åšé™åˆ¶æ¡ä»¶çš„åˆ—æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä¸€æ¬¡é€’å‡ã€‚ç»„åˆç´¢å¼•æœ€å·¦å­—æ®µç”¨inæ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„ã€‚ç›¸å½“äºŽå»ºç«‹äº†col1,col1col2,col1col2col3ä¸‰ä¸ªç´¢å¼•ã€‚åˆ†åº“åˆ†è¡¨ä¼˜åŒ– åž‚ç›´æ‹†åˆ†ï¼šè§£å†³é—®é¢˜ï¼šè¡¨ä¸Žè¡¨ä¹‹é—´çš„ioç«žäº‰ ä¸è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢žé•¿å‡ºçŽ°çš„åŽ‹åŠ› æ–¹æ¡ˆï¼š æŠŠäº§å“è¡¨å’Œç”¨æˆ·è¡¨æ”¾åˆ°ä¸€ä¸ªserverä¸Š è®¢å•è¡¨å•ç‹¬æ”¾åˆ°ä¸€ä¸ªserverä¸Šã€‚ æ°´å¹³æ‹†åˆ†ï¼š è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢žé•¿å‡ºçŽ°çš„åŽ‹åŠ› ä¸è§£å†³é—®é¢˜ï¼šè¡¨ä¸Žè¡¨ä¹‹é—´çš„ioäº‰å¤º ç”¨æˆ·è¡¨é€šè¿‡æ€§åˆ«æ‹†åˆ†ä¸ºç”·ç”¨æˆ·è¡¨å’Œå¥³ç”¨æˆ·è¡¨ è®¢å•è¡¨é€šè¿‡å·²å®Œæˆå’Œå®Œæˆä¸­æ‹†åˆ†ä¸ºå·²å®Œæˆè®¢å•å’Œæœªå®Œæˆè®¢å• äº§å“è¡¨ æœªå®Œæˆè®¢å•æ”¾ä¸€ä¸ªserverä¸Š å·²å®Œæˆè®¢å•è¡¨ç›’ç”·ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š å¥³ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ªserverä¸Š(å¥³çš„çˆ±è´­ç‰© å“ˆå“ˆ)ï¼Œ==å¯ä»¥æŠŠå­¦æ ¡èŒƒå›´å†…çš„ç”¨æˆ·å•ç‹¬ç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨==ã€‚ MySQLä¸éœ€è¦æ‰§è¡ŒåŽé¢çš„å¤æ‚æ“ä½œï¼Œå°±å¯ä»¥ç›´æŽ¥è¿”å›žç»“æžœï¼Œæ•ˆçŽ‡å¾ˆé«˜ï¼Œ==ä½†æ˜¯æŸ¥è¯¢ç¼“å­˜å¤±æ•ˆéžå¸¸é¢‘ç¹ï¼Œåªè¦æœ‰å¯¹ä¸€ä¸ªè¡¨çš„æ›´æ–°ï¼Œè¿™ä¸ªè¡¨çš„æ‰€æœ‰æŸ¥è¯¢ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œå› æ­¤å¯èƒ½ä½ è´¹åŠ›åœ°æŠŠç»“æžœç¼“å­˜èµ·æ¥ï¼Œè¿˜æ²¡ä½¿ç”¨ï¼Œå°±è¢«ä¸€ä¸ªæ›´æ–°å…¨éƒ¨æ¸…ç©ºäº†ã€‚é™¤éžä½ çš„ä¸šåŠ¡æ˜¯ä¸€å¼ é™æ€è¡¨ï¼Œå¾ˆé•¿æ—¶é—´æ‰ä¼šæ›´æ–°ä¸€æ¬¡ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜==ã€‚(==æŠŠç®¡ç†å‘˜ä¿¡æ¯æ”¾è¿›åŽ»==) 7.ä¸‰èŒƒå¼ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰==å¦‚æžœä¸€ä¸ªå…³ç³»æ¨¡å¼çš„æ‰€æœ‰å±žæ€§çš„åŸŸéƒ½æ˜¯åŽŸå­çš„æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹==ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®žä½“ä¸­çš„æŸä¸ªå±žæ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±žæ€§ã€‚å¦‚æžœå‡ºçŽ°é‡å¤çš„å±žæ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®žä½“ï¼Œæ–°çš„å®žä½“ç”±é‡å¤çš„å±žæ€§æž„æˆï¼Œæ–°å®žä½“ä¸ŽåŽŸå®žä½“ä¹‹é—´ä¸ºä¸€å¯¹å¤šå…³ç³»ã€‚åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ä¸­è¡¨çš„æ¯ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªå®žä¾‹çš„ä¿¡æ¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—ã€‚ ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€‚ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªå®žä¾‹æˆ–è¡Œå¿…é¡»å¯ä»¥è¢«æƒŸä¸€åœ°åŒºåˆ†ã€‚ä¸ºå®žçŽ°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®žä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚è¿™ä¸ªæƒŸä¸€å±žæ€§åˆ—è¢«ç§°ä¸ºä¸»å…³é”®å­—æˆ–ä¸»é”®ã€ä¸»ç ã€‚ï¼ˆ2NFï¼‰==è¦æ±‚å®žä½“çš„å±žæ€§å®Œå…¨ä¾èµ–äºŽä¸»å…³é”®å­—ã€‚æ‰€è°“å®Œå…¨ä¾èµ–æ˜¯æŒ‡ä¸èƒ½å­˜åœ¨ä»…ä¾èµ–ä¸»å…³é”®å­—ä¸€éƒ¨åˆ†çš„å±žæ€§==ï¼Œå¦‚æžœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå±žæ€§å’Œä¸»å…³é”®å­—çš„è¿™ä¸€éƒ¨åˆ†åº”è¯¥åˆ†ç¦»å‡ºæ¥å½¢æˆä¸€ä¸ªæ–°çš„å®žä½“ï¼Œæ–°å®žä½“ä¸ŽåŽŸå®žä½“ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ä¸ºå®žçŽ°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®žä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬äºŒèŒƒå¼å°±æ˜¯éžä¸»å±žæ€§éžéƒ¨åˆ†ä¾èµ–äºŽä¸»å…³é”®å­—ã€‚ ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éžä¸»å…³é”®å­—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå­˜åœ¨ä¸€ä¸ªéƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªéƒ¨é—¨æœ‰éƒ¨é—¨ç¼–å·ï¼ˆdept_idï¼‰ã€éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨å‘˜å·¥ä¿¡æ¯è¡¨ä¸­åˆ—å‡ºéƒ¨é—¨ç¼–å·åŽå°±ä¸èƒ½å†å°†éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¸Žéƒ¨é—¨æœ‰å…³çš„ä¿¡æ¯å†åŠ å…¥å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ã€‚å¦‚æžœä¸å­˜åœ¨éƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œåˆ™æ ¹æ®ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ä¹Ÿåº”è¯¥æž„å»ºå®ƒï¼Œå¦åˆ™å°±ä¼šæœ‰å¤§é‡çš„æ•°æ®å†—ä½™ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼å°±æ˜¯å±žæ€§ä¸ä¾èµ–äºŽå…¶å®ƒéžä¸»å±žæ€§ã€‚ï¼ˆæˆ‘çš„ç†è§£æ˜¯æ¶ˆé™¤å†—ä½™ï¼‰ ä¼˜ç‚¹:å¯ä»¥å°½é‡å¾—å‡å°‘æ•°æ®å†—ä½™ï¼Œä½¿å¾—æ›´æ–°å¿«ï¼Œä½“ç§¯å° ç¼ºç‚¹:å¯¹äºŽæŸ¥è¯¢éœ€è¦å¤šä¸ªè¡¨è¿›è¡Œå…³è”ï¼Œå‡å°‘å†™å¾—æ•ˆçŽ‡å¢žåŠ è¯»å¾—æ•ˆçŽ‡ï¼Œæ›´éš¾è¿›è¡Œç´¢å¼•ä¼˜åŒ–]]></content>
      <tags>
        <tag>MySQL, DataBase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SortAlgorithms]]></title>
    <url>%2F2020%2F01%2F13%2FSortAlgorithm%2F</url>
    <content type="text"><![CDATA[SortAlgorithms åŽŸæ–‡é“¾æŽ¥ï¼š å…«å¤§æŽ’åºç®—æ³•æ€»ç»“ä¸Žjavaå®žçŽ° - iTimeTraveler æ¦‚è¿° ç›´æŽ¥æ’å…¥æŽ’åº å¸Œå°”æŽ’åº ç®€å•é€‰æ‹©æŽ’åº å †æŽ’åº å†’æ³¡æŽ’åº å¿«é€ŸæŽ’åº å½’å¹¶æŽ’åº åŸºæ•°æŽ’åº å…¶ä¸­æˆ‘ä»¬è®¨è®ºçš„è¿™å…«å¤§æŽ’åºç®—æ³•çš„å®žçŽ°å¯ä»¥å‚è€ƒæˆ‘çš„Githubï¼šSortAlgorithmsï¼Œå…¶ä¸­åŒ…æ‹¬äº†æŽ’åºæµ‹è¯•æ¨¡å—[Test.java]å’ŒæŽ’åºç®—æ³•å¯¹æ¯”æ¨¡å—[Bench.java]ï¼Œå¤§å®¶å¯ä»¥è¯•è¿è¡Œã€‚ å®ƒä»¬éƒ½å±žäºŽå†…éƒ¨æŽ’åºï¼Œä¹Ÿå°±æ˜¯åªè€ƒè™‘æ•°æ®é‡è¾ƒå°ä»…éœ€è¦ä½¿ç”¨å†…å­˜çš„æŽ’åºç®—æ³•ï¼Œä»–ä»¬ä¹‹é—´å…³ç³»å¦‚ä¸‹ï¼š ä¸€ã€ç›´æŽ¥æ’å…¥æŽ’åºï¼ˆInsertion Sortï¼‰ æ’å…¥æŽ’åºçš„è®¾è®¡åˆè¡·æ˜¯å¾€æœ‰åºçš„æ•°ç»„ä¸­å¿«é€Ÿæ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚å®ƒçš„ç®—æ³•æ€æƒ³æ˜¯ï¼šæŠŠè¦æŽ’åºçš„æ•°ç»„åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†, ä¸€éƒ¨åˆ†æ˜¯æ•°ç»„çš„å…¨éƒ¨å…ƒç´ (é™¤åŽ»å¾…æ’å…¥çš„å…ƒç´ ), å¦ä¸€éƒ¨åˆ†æ˜¯å¾…æ’å…¥çš„å…ƒç´ ; å…ˆå°†ç¬¬ä¸€éƒ¨åˆ†æŽ’åºå®Œæˆ, ç„¶åŽå†æ’å…¥è¿™ä¸ªå…ƒç´ . å…¶ä¸­ç¬¬ä¸€éƒ¨åˆ†çš„æŽ’åºä¹Ÿæ˜¯é€šè¿‡å†æ¬¡æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥è¿›è¡Œçš„. æ’å…¥æŽ’åºç”±äºŽæ“ä½œä¸å°½ç›¸åŒ, å¯åˆ†ä¸º ç›´æŽ¥æ’å…¥æŽ’åº , æŠ˜åŠæ’å…¥æŽ’åº(åˆç§°äºŒåˆ†æ’å…¥æŽ’åº), é“¾è¡¨æ’å…¥æŽ’åº , å¸Œå°”æŽ’åº ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›´æŽ¥æ’å…¥æŽ’åºã€‚ 1ã€åŸºæœ¬æ€æƒ³ç›´æŽ¥æ’å…¥æŽ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡è·Ÿå‰é¢å·²ç»æŽ’å¥½çš„å…ƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚æžœé€‰æ‹©çš„å…ƒç´ æ¯”å·²æŽ’åºçš„å…ƒç´ å°ï¼Œåˆ™äº¤æ¢ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ éƒ½æ¯”è¾ƒè¿‡ä¸ºæ­¢ã€‚ 2ã€ç®—æ³•æè¿°ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æŽ’åºéƒ½é‡‡ç”¨in-placeåœ¨æ•°ç»„ä¸Šå®žçŽ°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š â‘ . ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æŽ’åºâ‘¡. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æŽ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»ŽåŽå‘å‰æ‰«æâ‘¢. å¦‚æžœè¯¥å…ƒç´ ï¼ˆå·²æŽ’åºï¼‰å¤§äºŽæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®â‘£. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æŽ’åºçš„å…ƒç´ å°äºŽæˆ–è€…ç­‰äºŽæ–°å…ƒç´ çš„ä½ç½®â‘¤. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åŽâ‘¥. é‡å¤æ­¥éª¤â‘¡~â‘¤ ç®—æ³•å®žçŽ°ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨æ¯æ¬¡æ¯”è¾ƒæ“ä½œå‘çŽ°å–å‡ºæ¥çš„æ–°å…ƒç´ å°äºŽç­‰äºŽå·²æŽ’åºçš„å…ƒç´ æ—¶ï¼Œå¯ä»¥å°†å·²æŽ’åºçš„å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼Œç„¶åŽå°†å–å‡ºæ¥çš„æ–°å…ƒç´ æ’å…¥è¯¥ä½ç½®ï¼ˆå³ç›¸é‚»ä½ç½®å¯¹è°ƒï¼‰ï¼ŒæŽ¥ç€å†ä¸Žå‰é¢çš„å·²æŽ’åºçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ ·åšç¼ºç‚¹æ˜¯äº¤æ¢æ“ä½œä»£ä»·æ¯”è¾ƒå¤§ã€‚å¦ä¸€ç§åšæ³•æ˜¯ï¼šå°†æ–°å…ƒç´ å–å‡ºï¼ˆæŒ–å‘ï¼‰ï¼Œä»Žå·¦åˆ°å³ä¾æ¬¡ä¸Žå·²æŽ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æžœå·²æŽ’åºçš„å…ƒç´ å¤§äºŽå–å‡ºçš„æ–°å…ƒç´ ï¼Œé‚£ä¹ˆå°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå¡«å‘ï¼‰ï¼ŒæŽ¥ç€å†ä¸Žå‰é¢çš„å·²æŽ’åºçš„å…ƒç´ æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°å·²æŽ’åºçš„å…ƒç´ å°äºŽç­‰äºŽæ–°å…ƒç´ çš„ä½ç½®ï¼Œè¿™æ—¶å†å°†æ–°å…ƒç´ æ’å…¥è¿›åŽ»ã€‚å°±åƒåŸºæœ¬æ€æƒ³ä¸­çš„åŠ¨å›¾æ¼”ç¤ºçš„é‚£æ ·ã€‚ å¦‚æžœæ¯”è¾ƒæ“ä½œçš„ä»£ä»·æ¯”äº¤æ¢æ“ä½œå¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æ¥å‡å°‘æ¯”è¾ƒæ“ä½œçš„æ•°ç›®ã€‚å¯ä»¥è®¤ä¸ºæ˜¯æ’å…¥æŽ’åºçš„ä¸€ä¸ªå˜ç§ï¼Œç§°ä¸ºäºŒåˆ†æŸ¥æ‰¾æ’å…¥æŽ’åºã€‚ 3ã€ä»£ç å®žçŽ°1234567891011121314151617181920212223242526272829303132333435363738394041/** * æ’å…¥æŽ’åº * * 1. ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æŽ’åº * 2. å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æŽ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»ŽåŽå‘å‰æ‰«æ * 3. å¦‚æžœè¯¥å…ƒç´ ï¼ˆå·²æŽ’åºï¼‰å¤§äºŽæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½® * 4. é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æŽ’åºçš„å…ƒç´ å°äºŽæˆ–è€…ç­‰äºŽæ–°å…ƒç´ çš„ä½ç½® * 5. å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åŽ * 6. é‡å¤æ­¥éª¤2~5 * @param arr å¾…æŽ’åºæ•°ç»„ */public static void insertionSort(int[] arr)&#123; for( int i = 1; i &lt; arr.length; i++ ) &#123; int temp = arr[i]; // å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æŽ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»ŽåŽå‘å‰æ‰«æ for( int j = i; j &gt;= 0; j-- ) &#123; if( j &gt; 0 &amp;&amp; arr[j-1] &gt; temp ) &#123; arr[j] = arr[j-1]; // å¦‚æžœè¯¥å…ƒç´ ï¼ˆå·²æŽ’åºï¼‰å¤§äºŽå–å‡ºçš„å…ƒç´ tempï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½® System.out.println("Temping: " + Arrays.toString(arr)); &#125; else &#123; // å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åŽ arr[j] = temp; System.out.println("Sorting: " + Arrays.toString(arr)); break; &#125; &#125; &#125;&#125;// äº¤æ¢æ¬¡æ•°è¾ƒå¤šçš„å®žçŽ°public static void insertionSort(int[] arr)&#123; for( int i=0; i&lt;arr.length-1; i++ ) &#123; for( int j=i+1; j&gt;0; j-- ) &#123; if( arr[j-1] &lt;= arr[j] ) break; int temp = arr[j]; //äº¤æ¢æ“ä½œ arr[j] = arr[j-1]; arr[j-1] = temp; System.out.println("Sorting: " + Arrays.toString(arr)); &#125; &#125;&#125; ç›´æŽ¥æ’å…¥æŽ’åºå¤æ‚åº¦å¦‚ä¸‹ï¼š æœ€å¥½æƒ…å†µä¸‹ï¼ŒæŽ’åºå‰å¯¹è±¡å·²ç»æŒ‰ç…§è¦æ±‚çš„æœ‰åºã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnâˆ’1ï¼›ç§»åŠ¨æ¬¡æ•°(RMN)ä¸º0ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ æœ€åæƒ…å†µä¸‹ï¼ŒæŽ’åºå‰å¯¹è±¡ä¸ºè¦æ±‚çš„é¡ºåºçš„ååºã€‚ç¬¬iè¶Ÿæ—¶ç¬¬iä¸ªå¯¹è±¡å¿…é¡»ä¸Žå‰é¢iä¸ªå¯¹è±¡éƒ½åšæŽ’åºç æ¯”è¾ƒï¼Œå¹¶ä¸”æ¯åš1æ¬¡æ¯”è¾ƒå°±è¦åš1æ¬¡æ•°æ®ç§»åŠ¨ï¼ˆä»Žä¸Šé¢ç»™å‡ºçš„ä»£ç ä¸­çœ‹å‡ºï¼‰ã€‚æ¯”è¾ƒæ¬¡æ•°(KCN)ï¼šnÂ²/2 ; ç§»åŠ¨æ¬¡æ•°(RMN)ä¸ºï¼šnÂ²/2ã€‚åˆ™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚ å¦‚æžœæŽ’åºè®°å½•æ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆæ ¹æ®æ¦‚çŽ‡ç›¸åŒçš„åŽŸåˆ™ï¼Œåœ¨å¹³å‡æƒ…å†µä¸‹çš„æŽ’åºç æ¯”è¾ƒæ¬¡æ•°å’Œå¯¹è±¡ç§»åŠ¨æ¬¡æ•°çº¦ä¸ºnÂ²/2ï¼Œå› æ­¤ï¼Œç›´æŽ¥æ’å…¥æŽ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nÂ²) O(n) O(nÂ²) O(1) Tips: ç”±äºŽç›´æŽ¥æ’å…¥æŽ’åºæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ çš„ä½ï¼Œ å¹¶ä¸ä¼šæ”¹å˜å€¼ç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„æŽ’åºï¼Œ å› æ­¤å®ƒæ˜¯ä¸€ç§ç¨³å®šæŽ’åºã€‚ äºŒã€å¸Œå°”æŽ’åºï¼ˆShell Sortï¼‰ ç¬¬ä¸€ä¸ªçªç ´O(n^2)çš„æŽ’åºç®—æ³•ï¼›æ˜¯ç®€å•æ’å…¥æŽ’åºçš„æ”¹è¿›ç‰ˆï¼›å®ƒä¸Žæ’å…¥æŽ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ã€‚ å¸Œå°”æŽ’åºï¼Œä¹Ÿç§°é€’å‡å¢žé‡æŽ’åºç®—æ³•ï¼Œ1959å¹´Shellå‘æ˜Žã€‚æ˜¯æ’å…¥æŽ’åºçš„ä¸€ç§é«˜é€Ÿè€Œç¨³å®šçš„æ”¹è¿›ç‰ˆæœ¬ã€‚ å¸Œå°”æŽ’åºæ˜¯å…ˆå°†æ•´ä¸ªå¾…æŽ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æŽ¥æ’å…¥æŽ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æŽ¥æ’å…¥æŽ’åºã€‚ 1ã€åŸºæœ¬æ€æƒ³ å°†å¾…æŽ’åºæ•°ç»„æŒ‰ç…§æ­¥é•¿gapè¿›è¡Œåˆ†ç»„ï¼Œç„¶åŽå°†æ¯ç»„çš„å…ƒç´ åˆ©ç”¨ç›´æŽ¥æ’å…¥æŽ’åºçš„æ–¹æ³•è¿›è¡ŒæŽ’åºï¼›æ¯æ¬¡å†å°†gapæŠ˜åŠå‡å°ï¼Œå¾ªçŽ¯ä¸Šè¿°æ“ä½œï¼›å½“gap=1æ—¶ï¼Œåˆ©ç”¨ç›´æŽ¥æ’å…¥ï¼Œå®ŒæˆæŽ’åºã€‚ å¯ä»¥çœ‹åˆ°æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æŽ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´æœ€ç®€å•çš„æ­¥é•¿å–å€¼æ˜¯åˆæ¬¡å–æ•°ç»„é•¿åº¦çš„ä¸€åŠä¸ºå¢žé‡ï¼Œä¹‹åŽæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢žé‡ä¸º1ã€‚æ›´å¥½çš„æ­¥é•¿åºåˆ—å–å€¼å¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘ã€‚ 2ã€ç®—æ³•æè¿°â‘ . é€‰æ‹©ä¸€ä¸ªå¢žé‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åŽæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢žé‡ä¸º1ï¼‰â‘¡. æŒ‰å¢žé‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶ŸæŽ’åºï¼›â‘¢. æ¯è¶ŸæŽ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢žé‡tiï¼Œå°†å¾…æŽ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æŽ¥æ’å…¥æŽ’åºã€‚ä»…å¢žé‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ 3ã€ä»£ç å®žçŽ°ä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®žçŽ°ï¼Œå¯ä»¥çœ‹åˆ°å®žçŽ°å¾ˆå¹¼ç¨šï¼Œä½†æ˜¯å¥½å¤„æ˜¯ç†è§£èµ·æ¥å¾ˆç®€å•ã€‚å› ä¸ºæ²¡æœ‰ç»è¿‡ä»»ä½•çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¸å»ºè®®å¤§å®¶ç›´æŽ¥ä½¿ç”¨ã€‚å»ºè®®å¯¹æ¯”ä¸‹æ–¹çš„ç»´åŸºç™¾ç§‘å®˜æ–¹å®žçŽ°ä»£ç ï¼Œç‰¹åˆ«æ˜¯æ­¥é•¿å–å€¼ç­–ç•¥éƒ¨åˆ†ã€‚ 123456789101112131415161718192021222324/** * å¸Œå°”æŽ’åº * * 1. é€‰æ‹©ä¸€ä¸ªå¢žé‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆä¸€èˆ¬åˆæ¬¡å–æ•°ç»„åŠé•¿ï¼Œä¹‹åŽæ¯æ¬¡å†å‡åŠï¼Œç›´åˆ°å¢žé‡ä¸º1ï¼‰ * 2. æŒ‰å¢žé‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶ŸæŽ’åºï¼› * 3. æ¯è¶ŸæŽ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢žé‡tiï¼Œå°†å¾…æŽ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æŽ¥æ’å…¥æŽ’åºã€‚ * ä»…å¢žé‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ */public static void shellSort(int[] arr)&#123; int gap = arr.length / 2; for (; gap &gt; 0; gap /= 2) &#123; //ä¸æ–­ç¼©å°gapï¼Œç›´åˆ°1ä¸ºæ­¢ for (int j = 0; (j+gap) &lt; arr.length; j++)&#123; //ä½¿ç”¨å½“å‰gapè¿›è¡Œç»„å†…æ’å…¥æŽ’åº for(int k = 0; (k+gap)&lt; arr.length; k += gap)&#123; if(arr[k] &gt; arr[k+gap]) &#123; int temp = arr[k+gap]; //äº¤æ¢æ“ä½œ arr[k+gap] = arr[k]; arr[k] = temp; System.out.println(" Sorting: " + Arrays.toString(arr)); &#125; &#125; &#125; &#125;&#125; ä¸‹é¢æ˜¯ç»´åŸºç™¾ç§‘å®˜æ–¹å®žçŽ°ï¼Œå¤§å®¶æ³¨æ„gapæ­¥é•¿å–å€¼éƒ¨åˆ†ï¼š 1234567891011121314151617181920212223/** * å¸Œå°”æŽ’åºï¼ˆWikiå®˜æ–¹ç‰ˆï¼‰ * * 1. é€‰æ‹©ä¸€ä¸ªå¢žé‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&gt;tjï¼Œtk=1ï¼›ï¼ˆæ³¨æ„æ­¤ç®—æ³•çš„gapå–å€¼ï¼‰ * 2. æŒ‰å¢žé‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶ŸæŽ’åºï¼› * 3. æ¯è¶ŸæŽ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢žé‡tiï¼Œå°†å¾…æŽ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æŽ¥æ’å…¥æŽ’åºã€‚ * ä»…å¢žé‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ */public static void shell_sort(int[] arr) &#123; int gap = 1, i, j, len = arr.length; int temp; while (gap &lt; len / 3) gap = gap * 3 + 1; // &lt;O(n^(3/2)) by Knuth,1973&gt;: 1, 4, 13, 40, 121, ... for (; gap &gt; 0; gap /= 3) &#123; for (i = gap; i &lt; len; i++) &#123; temp = arr[i]; for (j = i - gap; j &gt;= 0 &amp;&amp; arr[j] &gt; temp; j -= gap) arr[j + gap] = arr[j]; arr[j + gap] = temp; &#125; &#125;&#125; ä»¥ä¸‹æ˜¯å¸Œå°”æŽ’åºå¤æ‚åº¦: å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlog2 n) O(nlog2 n) O(nlog2 n) O(1) ä¸‰ã€é€‰æ‹©æŽ’åºï¼ˆSelection Sortï¼‰ ä»Žç®—æ³•é€»è¾‘ä¸Šçœ‹ï¼Œé€‰æ‹©æŽ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æŽ’åºç®—æ³•ï¼Œåœ¨ç®€å•é€‰æ‹©æŽ’åºè¿‡ç¨‹ä¸­ï¼Œæ‰€éœ€ç§»åŠ¨è®°å½•çš„æ¬¡æ•°æ¯”è¾ƒå°‘ã€‚ 1ã€åŸºæœ¬æ€æƒ³é€‰æ‹©æŽ’åºçš„åŸºæœ¬æ€æƒ³ï¼šæ¯”è¾ƒ + äº¤æ¢ã€‚ åœ¨æœªæŽ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æœªæŽ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢åŽ»ç§»åŠ¨å…ƒç´ çš„æŽ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æŽ’åºå±žäºŽéžå¸¸å¥½çš„ä¸€ç§ã€‚ 2ã€ç®—æ³•æè¿°â‘ . ä»Žå¾…æŽ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼›â‘¡. å¦‚æžœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æŽ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼›â‘¢. ä»Žä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æŽ’åºç»“æŸã€‚ 3ã€ä»£ç å®žçŽ°é€‰æ‹©æŽ’åºæ¯”è¾ƒç®€å•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„å®žçŽ°ï¼Œè·Ÿå®˜æ–¹ç‰ˆå·®ä¸å¤šï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥å‚è€ƒã€‚ 12345678910111213141516171819202122232425/** * é€‰æ‹©æŽ’åº * * 1. ä»Žå¾…æŽ’åºåºåˆ—ä¸­ï¼Œæ‰¾åˆ°å…³é”®å­—æœ€å°çš„å…ƒç´ ï¼› * 2. å¦‚æžœæœ€å°å…ƒç´ ä¸æ˜¯å¾…æŽ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ï¼› * 3. ä»Žä½™ä¸‹çš„ N - 1 ä¸ªå…ƒç´ ä¸­ï¼Œæ‰¾å‡ºå…³é”®å­—æœ€å°çš„å…ƒç´ ï¼Œé‡å¤â‘ ã€â‘¡æ­¥ï¼Œç›´åˆ°æŽ’åºç»“æŸã€‚ * ä»…å¢žé‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ */public static void selectionSort(int[] arr)&#123; for(int i = 0; i &lt; arr.length-1; i++)&#123; int min = i; for(int j = i+1; j &lt; arr.length; j++)&#123; //é€‰å‡ºä¹‹åŽå¾…æŽ’åºä¸­å€¼æœ€å°çš„ä½ç½® if(arr[j] &lt; arr[min])&#123; min = j; &#125; &#125; if(min != i)&#123; int temp = arr[min]; //äº¤æ¢æ“ä½œ arr[min] = arr[i]; arr[i] = temp; System.out.println("Sorting: " + Arrays.toString(arr)); &#125; &#125;&#125; ä»¥ä¸‹æ˜¯é€‰æ‹©æŽ’åºå¤æ‚åº¦: å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nÂ²) O(nÂ²) O(nÂ²) O(1) é€‰æ‹©æŽ’åºçš„ç®€å•å’Œç›´è§‚åå‰¯å…¶å®žï¼Œè¿™ä¹Ÿé€ å°±äº†å®ƒâ€å‡ºäº†åçš„æ…¢æ€§å­â€ï¼Œæ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œå“ªæ€•åŽŸæ•°ç»„å·²æŽ’åºå®Œæˆï¼Œå®ƒä¹Ÿå°†èŠ±è´¹å°†è¿‘nÂ²/2æ¬¡éåŽ†æ¥ç¡®è®¤ä¸€éã€‚å³ä¾¿æ˜¯è¿™æ ·ï¼Œå®ƒçš„æŽ’åºç»“æžœä¹Ÿè¿˜æ˜¯ä¸ç¨³å®šçš„ã€‚ å”¯ä¸€å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œå®ƒå¹¶ä¸è€—è´¹é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ å››ã€å †æŽ’åºï¼ˆHeap Sortï¼‰ 1991å¹´çš„è®¡ç®—æœºå…ˆé©±å¥–èŽ·å¾—è€…ã€æ–¯å¦ç¦å¤§å­¦è®¡ç®—æœºç§‘å­¦ç³»æ•™æŽˆç½—ä¼¯ç‰¹Â·å¼—æ´›ä¼Šå¾·(Robert Wï¼ŽFloyd) å’Œå¨å»‰å§†æ–¯(Jï¼ŽWilliams) åœ¨1964å¹´å…±åŒå‘æ˜Žäº†è‘—åçš„å †æŽ’åºç®—æ³•(Heap Sort). å †çš„å®šä¹‰å¦‚ä¸‹ï¼šnä¸ªå…ƒç´ çš„åºåˆ—{k1,k2,Â·Â·Â·,kn}ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä¸‹å…³ç³»æ—¶ï¼Œç§°ä¹‹ä¸ºå †ã€‚ ki &lt;= k(2i) ä¸” ki &lt;= k(2i+1) æˆ–ï¼š ki &gt;= k(2i) ä¸” ki &gt;= k(2i+1) æŠŠæ­¤åºåˆ—å¯¹åº”çš„äºŒç»´æ•°ç»„çœ‹æˆä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚é‚£ä¹ˆå †çš„å«ä¹‰å°±æ˜¯ï¼šå®Œå…¨äºŒå‰æ ‘ä¸­ä»»ä½•ä¸€ä¸ªéžå¶å­èŠ‚ç‚¹çš„å€¼å‡ä¸å¤§äºŽï¼ˆæˆ–ä¸å°äºŽï¼‰å…¶å·¦ï¼Œå³å­©å­èŠ‚ç‚¹çš„å€¼ã€‚ç”±ä¸Šè¿°æ€§è´¨å¯çŸ¥å¤§é¡¶å †çš„å †é¡¶çš„å…³é”®å­—è‚¯å®šæ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å¤§çš„ï¼Œå°é¡¶å †çš„å †é¡¶çš„å…³é”®å­—æ˜¯æ‰€æœ‰å…³é”®å­—ä¸­æœ€å°çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä½¿ç”¨å¤§é¡¶å †è¿›è¡Œå‡åºæŽ’åº, ä½¿ç”¨å°é¡¶å †è¿›è¡Œé™åºæŽ’åºã€‚ 1ã€åŸºæœ¬æ€æƒ³æ­¤å¤„ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œå †æŽ’åºçš„è¿‡ç¨‹å°±æ˜¯å°†å¾…æŽ’åºçš„åºåˆ—æž„é€ æˆä¸€ä¸ªå †ï¼Œé€‰å‡ºå †ä¸­æœ€å¤§çš„ç§»èµ°ï¼Œå†æŠŠå‰©ä½™çš„å…ƒç´ è°ƒæ•´æˆå †ï¼Œæ‰¾å‡ºæœ€å¤§çš„å†ç§»èµ°ï¼Œé‡å¤ç›´è‡³æœ‰åºã€‚ 2ã€ç®—æ³•æè¿°â‘ . å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº.â‘¡. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åŽä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..n-1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..n-1].keys &lt;= K[n].key â‘¢. äº¤æ¢K1 å’Œ Kn åŽ, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..n-1]è°ƒæ•´ä¸ºå †. ç„¶åŽé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢. åŠ¨å›¾æ•ˆæžœå¦‚ä¸‹æ‰€ç¤ºï¼š 3ã€ä»£ç å®žçŽ°ä»Žç®—æ³•æè¿°æ¥çœ‹ï¼Œå †æŽ’åºéœ€è¦ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸€æ˜¯å»ºç«‹å †ï¼ŒäºŒæ˜¯å †é¡¶ä¸Žå †çš„æœ€åŽä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚æ‰€ä»¥å †æŽ’åºæœ‰ä¸¤ä¸ªå‡½æ•°ç»„æˆã€‚ä¸€æ˜¯å»ºå †å‡½æ•°ï¼ŒäºŒæ˜¯åå¤è°ƒç”¨å»ºå †å‡½æ•°ä»¥é€‰æ‹©å‡ºå‰©ä½™æœªæŽ’å…ƒç´ ä¸­æœ€å¤§çš„æ•°æ¥å®žçŽ°æŽ’åºçš„å‡½æ•°ã€‚ æ€»ç»“èµ·æ¥å°±æ˜¯å®šä¹‰äº†ä»¥ä¸‹å‡ ç§æ“ä½œï¼š æœ€å¤§å †è°ƒæ•´ï¼ˆMax_Heapifyï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºŽçˆ¶èŠ‚ç‚¹ åˆ›å»ºæœ€å¤§å †ï¼ˆBuild_Max_Heapï¼‰ï¼šå°†å †æ‰€æœ‰æ•°æ®é‡æ–°æŽ’åº å †æŽ’åºï¼ˆHeapSortï¼‰ï¼šç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®— å¯¹äºŽå †èŠ‚ç‚¹çš„è®¿é—®ï¼š çˆ¶èŠ‚ç‚¹içš„å·¦å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š(2*i+1); çˆ¶èŠ‚ç‚¹içš„å³å­èŠ‚ç‚¹åœ¨ä½ç½®ï¼š(2*i+2); å­èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®ï¼šfloor((i-1)/2); 1234567891011121314151617181920212223242526272829303132333435363738/** * å †æŽ’åº * * 1. å…ˆå°†åˆå§‹åºåˆ—K[1..n]å»ºæˆä¸€ä¸ªå¤§é¡¶å †, é‚£ä¹ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªå…ƒç´ K1æœ€å¤§, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº. * 2. å†å°†å…³é”®å­—æœ€å¤§çš„è®°å½•K1 (å³å †é¡¶, ç¬¬ä¸€ä¸ªå…ƒç´ )å’Œæ— åºåŒºçš„æœ€åŽä¸€ä¸ªè®°å½• Kn äº¤æ¢, ç”±æ­¤å¾—åˆ°æ–°çš„æ— åºåŒºK[1..nâˆ’1]å’Œæœ‰åºåŒºK[n], ä¸”æ»¡è¶³K[1..nâˆ’1].keysâ©½K[n].key * 3. äº¤æ¢K1 å’Œ Kn åŽ, å †é¡¶å¯èƒ½è¿åå †æ€§è´¨, å› æ­¤éœ€å°†K[1..nâˆ’1]è°ƒæ•´ä¸ºå †. ç„¶åŽé‡å¤æ­¥éª¤â‘¡, ç›´åˆ°æ— åºåŒºåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶åœæ­¢. * @param arr å¾…æŽ’åºæ•°ç»„ */public static void heapSort(int[] arr)&#123; for(int i = arr.length; i &gt; 0; i--)&#123; max_heapify(arr, i); int temp = arr[0]; //å †é¡¶å…ƒç´ (ç¬¬ä¸€ä¸ªå…ƒç´ )ä¸ŽKnäº¤æ¢ arr[0] = arr[i-1]; arr[i-1] = temp; &#125;&#125;private static void max_heapify(int[] arr, int limit)&#123; if(arr.length &lt;= 0 || arr.length &lt; limit) return; int parentIdx = limit / 2; for(; parentIdx &gt;= 0; parentIdx--)&#123; if(parentIdx * 2 &gt;= limit)&#123; continue; &#125; int left = parentIdx * 2; //å·¦å­èŠ‚ç‚¹ä½ç½® int right = (left + 1) &gt;= limit ? left : (left + 1); //å³å­èŠ‚ç‚¹ä½ç½®ï¼Œå¦‚æžœæ²¡æœ‰å³èŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºå·¦èŠ‚ç‚¹ä½ç½® int maxChildId = arr[left] &gt;= arr[right] ? left : right; if(arr[maxChildId] &gt; arr[parentIdx])&#123; //äº¤æ¢çˆ¶èŠ‚ç‚¹ä¸Žå·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼ int temp = arr[parentIdx]; arr[parentIdx] = arr[maxChildId]; arr[maxChildId] = temp; &#125; &#125; System.out.println("Max_Heapify: " + Arrays.toString(arr));&#125; æ³¨: x&gt;&gt;1 æ˜¯ä½è¿ç®—ä¸­çš„å³ç§»è¿ç®—, è¡¨ç¤ºå³ç§»ä¸€ä½, ç­‰åŒäºŽxé™¤ä»¥2å†å–æ•´, å³ x&gt;&gt;1 == Math.floor(x/2) . ä»¥ä¸Š,â‘ . å»ºç«‹å †çš„è¿‡ç¨‹, ä»Žlength/2 ä¸€ç›´å¤„ç†åˆ°0, æ—¶é—´å¤æ‚åº¦ä¸ºO(n);â‘¡. è°ƒæ•´å †çš„è¿‡ç¨‹æ˜¯æ²¿ç€å †çš„çˆ¶å­èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´, æ‰§è¡Œæ¬¡æ•°ä¸ºå †çš„æ·±åº¦, æ—¶é—´å¤æ‚åº¦ä¸ºO(lgn);â‘¢. å †æŽ’åºçš„è¿‡ç¨‹ç”±næ¬¡ç¬¬â‘¡æ­¥å®Œæˆ, æ—¶é—´å¤æ‚åº¦ä¸ºO(nlgn). å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlog2n) O(nlog2n) O(nlog2n) O(1) Tips: ç”±äºŽå †æŽ’åºä¸­åˆå§‹åŒ–å †çš„è¿‡ç¨‹æ¯”è¾ƒæ¬¡æ•°è¾ƒå¤š, å› æ­¤å®ƒä¸å¤ªé€‚ç”¨äºŽå°åºåˆ—. åŒæ—¶ç”±äºŽå¤šæ¬¡ä»»æ„ä¸‹æ ‡ç›¸äº’äº¤æ¢ä½ç½®, ç›¸åŒå…ƒç´ ä¹‹é—´åŽŸæœ¬ç›¸å¯¹çš„é¡ºåºè¢«ç ´åäº†, å› æ­¤, å®ƒæ˜¯ä¸ç¨³å®šçš„æŽ’åº. äº”ã€å†’æ³¡æŽ’åºï¼ˆBubble Sortï¼‰ æˆ‘æƒ³å¯¹äºŽå®ƒæ¯ä¸ªå­¦è¿‡Cè¯­è¨€çš„éƒ½ä¼šäº†è§£ï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººæŽ¥è§¦çš„ç¬¬ä¸€ä¸ªæŽ’åºç®—æ³•ã€‚ 1ã€åŸºæœ¬æ€æƒ³å†’æ³¡æŽ’åºï¼ˆBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æŽ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æŽ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æžœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æŽ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚ 2ã€ç®—æ³•æè¿°å†’æ³¡æŽ’åºç®—æ³•çš„è¿ä½œå¦‚ä¸‹ï¼š â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æžœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»Žå¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åŽä¸€å¯¹ã€‚è¿™æ­¥åšå®ŒåŽï¼Œæœ€åŽçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åŽä¸€ä¸ªã€‚â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ 3ã€ä»£ç å®žçŽ°å†’æ³¡æŽ’åºéœ€è¦ä¸¤ä¸ªåµŒå¥—çš„å¾ªçŽ¯. å…¶ä¸­, å¤–å±‚å¾ªçŽ¯ç§»åŠ¨æ¸¸æ ‡; å†…å±‚å¾ªçŽ¯éåŽ†æ¸¸æ ‡åŠä¹‹åŽ(æˆ–ä¹‹å‰)çš„å…ƒç´ , é€šè¿‡ä¸¤ä¸¤äº¤æ¢çš„æ–¹å¼, æ¯æ¬¡åªç¡®ä¿è¯¥å†…å¾ªçŽ¯ç»“æŸä½ç½®æŽ’åºæ­£ç¡®, ç„¶åŽå†…å±‚å¾ªçŽ¯å‘¨æœŸç»“æŸ, äº¤ç”±å¤–å±‚å¾ªçŽ¯å¾€åŽ(æˆ–å‰)ç§»åŠ¨æ¸¸æ ‡, éšå³å¼€å§‹ä¸‹ä¸€è½®å†…å±‚å¾ªçŽ¯, ä»¥æ­¤ç±»æŽ¨, ç›´è‡³å¾ªçŽ¯ç»“æŸ. 123456789101112131415161718192021/** * å†’æ³¡æŽ’åº * * â‘ . æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æžœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚ * â‘¡. å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»Žå¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åŽä¸€å¯¹ã€‚è¿™æ­¥åšå®ŒåŽï¼Œæœ€åŽçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ * â‘¢. é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åŽä¸€ä¸ªã€‚ * â‘£. æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤â‘ ~â‘¢ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ */public static void bubbleSort(int[] arr)&#123; for (int i = arr.length - 1; i &gt; 0; i--) &#123; //å¤–å±‚å¾ªçŽ¯ç§»åŠ¨æ¸¸æ ‡ for(int j = 0; j &lt; i; j++)&#123; //å†…å±‚å¾ªçŽ¯éåŽ†æ¸¸æ ‡åŠä¹‹åŽ(æˆ–ä¹‹å‰)çš„å…ƒç´  if(arr[j] &gt; arr[j+1])&#123; int temp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = temp; System.out.println("Sorting: " + Arrays.toString(arr)); &#125; &#125; &#125;&#125; ä»¥ä¸‹æ˜¯å†’æ³¡æŽ’åºç®—æ³•å¤æ‚åº¦: å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nÂ²) O(n) O(nÂ²) O(1) å†’æ³¡æŽ’åºæ˜¯æœ€å®¹æ˜“å®žçŽ°çš„æŽ’åº, æœ€åçš„æƒ…å†µæ˜¯æ¯æ¬¡éƒ½éœ€è¦äº¤æ¢, å…±éœ€éåŽ†å¹¶äº¤æ¢å°†è¿‘nÂ²/2æ¬¡, æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). æœ€ä½³çš„æƒ…å†µæ˜¯å†…å¾ªçŽ¯éåŽ†ä¸€æ¬¡åŽå‘çŽ°æŽ’åºæ˜¯å¯¹çš„, å› æ­¤é€€å‡ºå¾ªçŽ¯, æ—¶é—´å¤æ‚åº¦ä¸ºO(n). å¹³å‡æ¥è®², æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²). ç”±äºŽå†’æ³¡æŽ’åºä¸­åªæœ‰ç¼“å­˜çš„tempå˜é‡éœ€è¦å†…å­˜ç©ºé—´, å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸é‡O(1). Tips: ç”±äºŽå†’æ³¡æŽ’åºåªåœ¨ç›¸é‚»å…ƒç´ å¤§å°ä¸ç¬¦åˆè¦æ±‚æ—¶æ‰è°ƒæ¢ä»–ä»¬çš„ä½ç½®, å®ƒå¹¶ä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåº, å› æ­¤å®ƒæ˜¯ç¨³å®šçš„æŽ’åºç®—æ³•. å…­ã€å¿«é€ŸæŽ’åºï¼ˆQuick Sortï¼‰ å¿«é€ŸæŽ’åºï¼ˆQuicksortï¼‰æ˜¯å¯¹å†’æ³¡æŽ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œå€Ÿç”¨äº†åˆ†æ²»çš„æ€æƒ³ï¼Œç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚ 1ã€åŸºæœ¬æ€æƒ³å¿«é€ŸæŽ’åºçš„åŸºæœ¬æ€æƒ³ï¼šæŒ–å‘å¡«æ•°+åˆ†æ²»æ³•ã€‚ é¦–å…ˆé€‰ä¸€ä¸ªè½´å€¼(pivotï¼Œä¹Ÿæœ‰å«åŸºå‡†çš„)ï¼Œé€šè¿‡ä¸€è¶ŸæŽ’åºå°†å¾…æŽ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡ŒæŽ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚ 2ã€ç®—æ³•æè¿°å¿«é€ŸæŽ’åºä½¿ç”¨åˆ†æ²»ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚æ­¥éª¤ä¸ºï¼š â‘ . ä»Žæ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚â‘¡. é‡æ–°æŽ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åŽé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åŽï¼Œè¯¥åŸºå‡†å°±å¤„äºŽæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºŽåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºŽåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æŽ’åºã€‚ é€’å½’åˆ°æœ€åº•éƒ¨æ—¶ï¼Œæ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯å·²ç»æŽ’åºå¥½äº†ã€‚è¿™ä¸ªç®—æ³•ä¸€å®šä¼šç»“æŸï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ï¼ˆiterationï¼‰ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åŽçš„ä½ç½®åŽ»ã€‚ 3ã€ä»£ç å®žçŽ°ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ï¼š â‘ . i = L; j = R; å°†åŸºå‡†æ•°æŒ–å‡ºå½¢æˆç¬¬ä¸€ä¸ªå‘a[i]ã€‚â‘¡ï¼Žj--ï¼Œç”±åŽå‘å‰æ‰¾æ¯”å®ƒå°çš„æ•°ï¼Œæ‰¾åˆ°åŽæŒ–å‡ºæ­¤æ•°å¡«å‰ä¸€ä¸ªå‘a[i]ä¸­ã€‚â‘¢ï¼Ži++ï¼Œç”±å‰å‘åŽæ‰¾æ¯”å®ƒå¤§çš„æ•°ï¼Œæ‰¾åˆ°åŽä¹ŸæŒ–å‡ºæ­¤æ•°å¡«åˆ°å‰ä¸€ä¸ªå‘a[j]ä¸­ã€‚â‘£ï¼Žå†é‡å¤æ‰§è¡Œâ‘¡ï¼Œâ‘¢äºŒæ­¥ï¼Œç›´åˆ°i==jï¼Œå°†åŸºå‡†æ•°å¡«å…¥a[i]ä¸­ 1234567891011121314151617181920212223242526272829303132/** * å¿«é€ŸæŽ’åºï¼ˆé€’å½’ï¼‰ * * â‘ . ä»Žæ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚ * â‘¡. é‡æ–°æŽ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åŽé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åŽï¼Œè¯¥åŸºå‡†å°±å¤„äºŽæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚ * â‘¢. é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºŽåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºŽåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æŽ’åºã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ * @param low å·¦è¾¹ç•Œ * @param high å³è¾¹ç•Œ */public static void quickSort(int[] arr, int low, int high)&#123; if(arr.length &lt;= 0) return; if(low &gt;= high) return; int left = low; int right = high; int temp = arr[left]; //æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼ while (left &lt; right)&#123; while(left &lt; right &amp;&amp; arr[right] &gt;= temp)&#123; //å‘2ï¼šä»ŽåŽå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­ right--; &#125; arr[left] = arr[right]; while(left &lt; right &amp;&amp; arr[left] &lt;= temp)&#123; //å‘3ï¼šä»Žå‰å¾€åŽæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­ left++; &#125; arr[right] = arr[left]; &#125; arr[left] = temp; //åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æŽ’ System.out.println("Sorting: " + Arrays.toString(arr)); quickSort(arr, low, left-1); quickSort(arr, left+1, high);&#125; ä¸Šé¢æ˜¯é€’å½’ç‰ˆçš„å¿«é€ŸæŽ’åºï¼šé€šè¿‡æŠŠåŸºå‡†tempæ’å…¥åˆ°åˆé€‚çš„ä½ç½®æ¥å®žçŽ°åˆ†æ²»ï¼Œå¹¶é€’å½’åœ°å¯¹åˆ†æ²»åŽçš„ä¸¤ä¸ªåˆ’åˆ†ç»§ç»­å¿«æŽ’ã€‚é‚£ä¹ˆéžé€’å½’ç‰ˆçš„å¿«æŽ’å¦‚ä½•å®žçŽ°å‘¢ï¼Ÿ å› ä¸ºé€’å½’çš„æœ¬è´¨æ˜¯æ ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éžé€’å½’å®žçŽ°çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å€ŸåŠ©æ ˆæ¥ä¿å­˜ä¸­é—´å˜é‡å°±å¯ä»¥å®žçŽ°éžé€’å½’äº†ã€‚åœ¨è¿™é‡Œä¸­é—´å˜é‡ä¹Ÿå°±æ˜¯é€šè¿‡Pritationå‡½æ•°åˆ’åˆ†åŒºé—´ä¹‹åŽåˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆï¼Œåªéœ€è¦ä¿å­˜è¿™ä¸¤éƒ¨åˆ†çš„é¦–å°¾æŒ‡é’ˆå³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * å¿«é€ŸæŽ’åºï¼ˆéžé€’å½’ï¼‰ * * â‘ . ä»Žæ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º"åŸºå‡†"ï¼ˆpivotï¼‰ã€‚ * â‘¡. é‡æ–°æŽ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åŽé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åŽï¼Œè¯¥åŸºå‡†å°±å¤„äºŽæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚ * â‘¢. æŠŠåˆ†åŒºä¹‹åŽä¸¤ä¸ªåŒºé—´çš„è¾¹ç•Œï¼ˆlowå’Œhighï¼‰åŽ‹å…¥æ ˆä¿å­˜ï¼Œå¹¶å¾ªçŽ¯â‘ ã€â‘¡æ­¥éª¤ * @param arr å¾…æŽ’åºæ•°ç»„ */public static void quickSortByStack(int[] arr)&#123; if(arr.length &lt;= 0) return; Stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;(); //åˆå§‹çŠ¶æ€çš„å·¦å³æŒ‡é’ˆå…¥æ ˆ stack.push(0); stack.push(arr.length - 1); while(!stack.isEmpty())&#123; int high = stack.pop(); //å‡ºæ ˆè¿›è¡Œåˆ’åˆ† int low = stack.pop(); int pivotIdx = partition(arr, low, high); //ä¿å­˜ä¸­é—´å˜é‡ if(pivotIdx &gt; low) &#123; stack.push(low); stack.push(pivotIdx - 1); &#125; if(pivotIdx &lt; high &amp;&amp; pivotIdx &gt;= 0)&#123; stack.push(pivotIdx + 1); stack.push(high); &#125; &#125;&#125;private static int partition(int[] arr, int low, int high)&#123; if(arr.length &lt;= 0) return -1; if(low &gt;= high) return -1; int l = low; int r = high; int pivot = arr[l]; //æŒ–å‘1ï¼šä¿å­˜åŸºå‡†çš„å€¼ while(l &lt; r)&#123; while(l &lt; r &amp;&amp; arr[r] &gt;= pivot)&#123; //å‘2ï¼šä»ŽåŽå‘å‰æ‰¾åˆ°æ¯”åŸºå‡†å°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°åŸºå‡†ä½ç½®å‘1ä¸­ r--; &#125; arr[l] = arr[r]; while(l &lt; r &amp;&amp; arr[l] &lt;= pivot)&#123; //å‘3ï¼šä»Žå‰å¾€åŽæ‰¾åˆ°æ¯”åŸºå‡†å¤§çš„å…ƒç´ ï¼Œæ”¾åˆ°åˆšæ‰æŒ–çš„å‘2ä¸­ l++; &#125; arr[r] = arr[l]; &#125; arr[l] = pivot; //åŸºå‡†å€¼å¡«è¡¥åˆ°å‘3ä¸­ï¼Œå‡†å¤‡åˆ†æ²»é€’å½’å¿«æŽ’ return l;&#125; å¿«é€ŸæŽ’åºæ˜¯é€šå¸¸è¢«è®¤ä¸ºåœ¨åŒæ•°é‡çº§ï¼ˆO(nlog2n)ï¼‰çš„æŽ’åºæ–¹æ³•ä¸­å¹³å‡æ€§èƒ½æœ€å¥½çš„ã€‚ä½†è‹¥åˆå§‹åºåˆ—æŒ‰å…³é”®ç æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œå¿«æŽ’åºåè€Œèœ•åŒ–ä¸ºå†’æ³¡æŽ’åºã€‚ä¸ºæ”¹è¿›ä¹‹ï¼Œé€šå¸¸ä»¥â€œä¸‰è€…å–ä¸­æ³•â€æ¥é€‰å–åŸºå‡†è®°å½•ï¼Œå³å°†æŽ’åºåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ä¸Žä¸­ç‚¹ä¸‰ä¸ªè®°å½•å…³é”®ç å±…ä¸­çš„è°ƒæ•´ä¸ºæ”¯ç‚¹è®°å½•ã€‚å¿«é€ŸæŽ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æŽ’åºæ–¹æ³•ã€‚ ä»¥ä¸‹æ˜¯å¿«é€ŸæŽ’åºç®—æ³•å¤æ‚åº¦: å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlogâ‚‚n) O(nlogâ‚‚n) O(nÂ²) O(1)ï¼ˆåŽŸåœ°åˆ†åŒºé€’å½’ç‰ˆï¼‰ å¿«é€ŸæŽ’åºæŽ’åºæ•ˆçŽ‡éžå¸¸é«˜ã€‚ è™½ç„¶å®ƒè¿è¡Œæœ€ç³Ÿç³•æ—¶å°†è¾¾åˆ°O(nÂ²)çš„æ—¶é—´å¤æ‚åº¦, ä½†é€šå¸¸å¹³å‡æ¥çœ‹, å®ƒçš„æ—¶é—´å¤æ‚ä¸ºO(nlogn), æ¯”åŒæ ·ä¸ºO(nlogn)æ—¶é—´å¤æ‚åº¦çš„å½’å¹¶æŽ’åºè¿˜è¦å¿«. å¿«é€ŸæŽ’åºä¼¼ä¹Žæ›´åçˆ±ä¹±åºçš„æ•°åˆ—, è¶Šæ˜¯ä¹±åºçš„æ•°åˆ—, å®ƒç›¸æ¯”å…¶ä»–æŽ’åºè€Œè¨€, ç›¸å¯¹æ•ˆçŽ‡æ›´é«˜. Tips: åŒé€‰æ‹©æŽ’åºç›¸ä¼¼, å¿«é€ŸæŽ’åºæ¯æ¬¡äº¤æ¢çš„å…ƒç´ éƒ½æœ‰å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„, å› æ­¤å®ƒæœ‰å¯èƒ½æ‰“ç ´åŽŸæ¥å€¼ä¸ºç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåº. å› æ­¤, å¿«é€ŸæŽ’åºå¹¶ä¸ç¨³å®š. ä¸ƒã€å½’å¹¶æŽ’åºï¼ˆMerging Sortï¼‰ å½’å¹¶æŽ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æŽ’åºç®—æ³•ï¼Œ1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéžå¸¸å…¸åž‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚ 1ã€åŸºæœ¬æ€æƒ³å½’å¹¶æŽ’åºç®—æ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æŽ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åŽå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚ 2ã€ç®—æ³•æè¿°å½’å¹¶æŽ’åºå¯é€šè¿‡ä¸¤ç§æ–¹å¼å®žçŽ°ï¼š è‡ªä¸Šè€Œä¸‹çš„é€’å½’ è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£ ä¸€ã€é€’å½’æ³•ï¼ˆå‡è®¾åºåˆ—å…±æœ‰nä¸ªå…ƒç´ ï¼‰ï¼š â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼ŒæŽ’åºåŽæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼›â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼›â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æŽ’åºå®Œæ¯•ã€‚ äºŒã€è¿­ä»£æ³• â‘ . ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æŽ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åŽçš„åºåˆ— â‘¡. è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æŽ’åºåºåˆ—çš„èµ·å§‹ä½ç½® â‘¢. æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½® â‘£. é‡å¤æ­¥éª¤â‘¢ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ â‘¤. å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æŽ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ 3ã€ä»£ç å®žçŽ°å½’å¹¶æŽ’åºå…¶å®žè¦åšä¸¤ä»¶äº‹ï¼š åˆ†è§£ï¼šå°†åºåˆ—æ¯æ¬¡æŠ˜åŠæ‹†åˆ† åˆå¹¶ï¼šå°†åˆ’åˆ†åŽçš„åºåˆ—æ®µä¸¤ä¸¤æŽ’åºåˆå¹¶ å› æ­¤ï¼Œå½’å¹¶æŽ’åºå®žé™…ä¸Šå°±æ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ‹†åˆ†+åˆå¹¶ å¦‚ä½•åˆå¹¶ï¼Ÿ L[firstâ€¦mid]ä¸ºç¬¬ä¸€æ®µï¼ŒL[mid+1â€¦last]ä¸ºç¬¬äºŒæ®µï¼Œå¹¶ä¸”ä¸¤ç«¯å·²ç»æœ‰åºï¼ŒçŽ°åœ¨æˆ‘ä»¬è¦å°†ä¸¤ç«¯åˆæˆè¾¾åˆ°L[firstâ€¦last]å¹¶ä¸”ä¹Ÿæœ‰åºã€‚ é¦–å…ˆä¾æ¬¡ä»Žç¬¬ä¸€æ®µä¸Žç¬¬äºŒæ®µä¸­å–å‡ºå…ƒç´ æ¯”è¾ƒï¼Œå°†è¾ƒå°çš„å…ƒç´ èµ‹å€¼ç»™temp[]é‡å¤æ‰§è¡Œä¸Šä¸€æ­¥ï¼Œå½“æŸä¸€æ®µèµ‹å€¼ç»“æŸï¼Œåˆ™å°†å¦ä¸€æ®µå‰©ä¸‹çš„å…ƒç´ èµ‹å€¼ç»™temp[]æ­¤æ—¶å°†temp[]ä¸­çš„å…ƒç´ å¤åˆ¶ç»™L[]ï¼Œåˆ™å¾—åˆ°çš„L[firstâ€¦last]æœ‰åº å¦‚ä½•åˆ†è§£ï¼Ÿ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨é€’å½’çš„æ–¹æ³•ï¼Œé¦–å…ˆå°†å¾…æŽ’åºåˆ—åˆ†æˆA,Bä¸¤ç»„ï¼›ç„¶åŽé‡å¤å¯¹Aã€Båºåˆ—åˆ†ç»„ï¼›ç›´åˆ°åˆ†ç»„åŽç»„å†…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¤ä¸ºç»„å†…æ‰€æœ‰å…ƒç´ æœ‰åºï¼Œåˆ™åˆ†ç»„ç»“æŸã€‚ è¿™é‡Œæˆ‘å†™äº†é€’å½’ç®—æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637/** * å½’å¹¶æŽ’åºï¼ˆé€’å½’ï¼‰ * * â‘ . å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ floor(n/2)ä¸ªåºåˆ—ï¼ŒæŽ’åºåŽæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼› * â‘¡. å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ floor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ï¼› * â‘¢. é‡å¤æ­¥éª¤â‘¡ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æŽ’åºå®Œæ¯•ã€‚ * @param arr å¾…æŽ’åºæ•°ç»„ */public static int[] mergingSort(int[] arr)&#123; if(arr.length &lt;= 1) return arr; int num = arr.length &gt;&gt; 1; int[] leftArr = Arrays.copyOfRange(arr, 0, num); int[] rightArr = Arrays.copyOfRange(arr, num, arr.length); System.out.println("split two array: " + Arrays.toString(leftArr) + " And " + Arrays.toString(rightArr)); return mergeTwoArray(mergingSort(leftArr), mergingSort(rightArr)); //ä¸æ–­æ‹†åˆ†ä¸ºæœ€å°å•å…ƒï¼Œå†æŽ’åºåˆå¹¶&#125;private static int[] mergeTwoArray(int[] arr1, int[] arr2)&#123; int i = 0, j = 0, k = 0; int[] result = new int[arr1.length + arr2.length]; //ç”³è¯·é¢å¤–çš„ç©ºé—´å­˜å‚¨åˆå¹¶ä¹‹åŽçš„æ•°ç»„ while(i &lt; arr1.length &amp;&amp; j &lt; arr2.length)&#123; //é€‰å–ä¸¤ä¸ªåºåˆ—ä¸­çš„è¾ƒå°å€¼æ”¾å…¥æ–°æ•°ç»„ if(arr1[i] &lt;= arr2[j])&#123; result[k++] = arr1[i++]; &#125;else&#123; result[k++] = arr2[j++]; &#125; &#125; while(i &lt; arr1.length)&#123; //åºåˆ—1ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„ result[k++] = arr1[i++]; &#125; while(j &lt; arr2.length)&#123; //åºåˆ—2ä¸­å¤šä½™çš„å…ƒç´ ç§»å…¥æ–°æ•°ç»„ result[k++] = arr2[j++]; &#125; System.out.println("Merging: " + Arrays.toString(result)); return result;&#125; ç”±ä¸Š, é•¿åº¦ä¸ºnçš„æ•°ç»„, æœ€ç»ˆä¼šè°ƒç”¨mergeSortå‡½æ•°2n-1æ¬¡ã€‚é€šè¿‡è‡ªä¸Šè€Œä¸‹çš„é€’å½’å®žçŽ°çš„å½’å¹¶æŽ’åº, å°†å­˜åœ¨å †æ ˆæº¢å‡ºçš„é£Žé™©ã€‚ ä»¥ä¸‹æ˜¯å½’å¹¶æŽ’åºç®—æ³•å¤æ‚åº¦: å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(nlogâ‚‚n) O(nlogâ‚‚n) O(nlogâ‚‚n) O(n) ä»Žæ•ˆçŽ‡ä¸Šçœ‹ï¼Œå½’å¹¶æŽ’åºå¯ç®—æ˜¯æŽ’åºç®—æ³•ä¸­çš„â€ä½¼ä½¼è€…â€. å‡è®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œé‚£ä¹ˆæ‹†åˆ†æ•°ç»„å…±éœ€lognï¼Œ, åˆæ¯æ­¥éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆå¹¶å­æ•°ç»„çš„è¿‡ç¨‹ï¼Œ æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ æ•…å…¶ç»¼åˆæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å¦ä¸€æ–¹é¢ï¼Œ å½’å¹¶æŽ’åºå¤šæ¬¡é€’å½’è¿‡ç¨‹ä¸­æ‹†åˆ†çš„å­æ•°ç»„éœ€è¦ä¿å­˜åœ¨å†…å­˜ç©ºé—´ï¼Œ å…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚ å’Œé€‰æ‹©æŽ’åºä¸€æ ·ï¼Œå½’å¹¶æŽ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨çŽ°æ¯”é€‰æ‹©æŽ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯O(n log nï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ å…«ã€åŸºæ•°æŽ’åºï¼ˆRadix Sortï¼‰ åŸºæ•°æŽ’åºçš„å‘æ˜Žå¯ä»¥è¿½æº¯åˆ°1887å¹´èµ«å°”æ›¼Â·ä½•ä¹ç¤¼åœ¨æ‰“å­”å¡ç‰‡åˆ¶è¡¨æœºï¼ˆTabulation Machineï¼‰, æŽ’åºå™¨æ¯æ¬¡åªèƒ½çœ‹åˆ°ä¸€ä¸ªåˆ—ã€‚å®ƒæ˜¯åŸºäºŽå…ƒç´ å€¼çš„æ¯ä¸ªä½ä¸Šçš„å­—ç¬¦æ¥æŽ’åºçš„ã€‚ å¯¹äºŽæ•°å­—è€Œè¨€å°±æ˜¯åˆ†åˆ«åŸºäºŽä¸ªä½ï¼Œåä½ï¼Œ ç™¾ä½æˆ–åƒä½ç­‰ç­‰æ•°å­—æ¥æŽ’åºã€‚ åŸºæ•°æŽ’åºï¼ˆRadix sortï¼‰æ˜¯ä¸€ç§éžæ¯”è¾ƒåž‹æ•´æ•°æŽ’åºç®—æ³•ï¼Œå…¶åŽŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åŽæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºŽæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æŽ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºŽæ•´æ•°ã€‚ 1ã€åŸºæœ¬æ€æƒ³å®ƒæ˜¯è¿™æ ·å®žçŽ°çš„ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åŽï¼Œä»Žæœ€ä½Žä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æŽ’åºã€‚è¿™æ ·ä»Žæœ€ä½Žä½æŽ’åºä¸€ç›´åˆ°æœ€é«˜ä½æŽ’åºå®Œæˆä»¥åŽï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚ åŸºæ•°æŽ’åºæŒ‰ç…§ä¼˜å…ˆä»Žé«˜ä½æˆ–ä½Žä½æ¥æŽ’åºæœ‰ä¸¤ç§å®žçŽ°æ–¹æ¡ˆï¼š MSDï¼ˆMost significant digitalï¼‰ ä»Žæœ€å·¦ä¾§é«˜ä½å¼€å§‹è¿›è¡ŒæŽ’åºã€‚å…ˆæŒ‰k1æŽ’åºåˆ†ç»„, åŒä¸€ç»„ä¸­è®°å½•, å…³é”®ç k1ç›¸ç­‰, å†å¯¹å„ç»„æŒ‰k2æŽ’åºåˆ†æˆå­ç»„, ä¹‹åŽ, å¯¹åŽé¢çš„å…³é”®ç ç»§ç»­è¿™æ ·çš„æŽ’åºåˆ†ç»„, ç›´åˆ°æŒ‰æœ€æ¬¡ä½å…³é”®ç kdå¯¹å„å­ç»„æŽ’åºåŽ. å†å°†å„ç»„è¿žæŽ¥èµ·æ¥, ä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚MSDæ–¹å¼é€‚ç”¨äºŽä½æ•°å¤šçš„åºåˆ—ã€‚ LSD ï¼ˆLeast significant digitalï¼‰ä»Žæœ€å³ä¾§ä½Žä½å¼€å§‹è¿›è¡ŒæŽ’åºã€‚å…ˆä»Žkdå¼€å§‹æŽ’åºï¼Œå†å¯¹kd-1è¿›è¡ŒæŽ’åºï¼Œä¾æ¬¡é‡å¤ï¼Œç›´åˆ°å¯¹k1æŽ’åºåŽä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚LSDæ–¹å¼é€‚ç”¨äºŽä½æ•°å°‘çš„åºåˆ—ã€‚ 2ã€ç®—æ³•æè¿°æˆ‘ä»¬ä»¥LSDä¸ºä¾‹ï¼Œä»Žæœ€ä½Žä½å¼€å§‹ï¼Œå…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›â‘¡. arrä¸ºåŽŸå§‹æ•°ç»„ï¼Œä»Žæœ€ä½Žä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æŽ’åºï¼ˆåˆ©ç”¨è®¡æ•°æŽ’åºé€‚ç”¨äºŽå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼› 3ã€ä»£ç å®žçŽ°åŸºæ•°æŽ’åºï¼šé€šè¿‡åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„å€¼ï¼Œå¯¹æŽ’åºçš„Nä¸ªå…ƒç´ è¿›è¡Œè‹¥å¹²è¶Ÿçš„â€œåˆ†é…â€ä¸Žâ€œæ”¶é›†â€æ¥å®žçŽ°æŽ’åºã€‚ åˆ†é…ï¼šæˆ‘ä»¬å°†L[i]ä¸­çš„å…ƒç´ å–å‡ºï¼Œé¦–å…ˆç¡®å®šå…¶ä¸ªä½ä¸Šçš„æ•°å­—ï¼Œæ ¹æ®è¯¥æ•°å­—åˆ†é…åˆ°ä¸Žä¹‹åºå·ç›¸åŒçš„æ¡¶ä¸­ æ”¶é›†ï¼šå½“åºåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œå†æŒ‰ç…§é¡ºåºä¾æ¬¡å°†æ¡¶ä¸­çš„å…ƒç´ æ”¶é›†å½¢æˆæ–°çš„ä¸€ä¸ªå¾…æŽ’åºåˆ—L[]ã€‚å¯¹æ–°å½¢æˆçš„åºåˆ—L[]é‡å¤æ‰§è¡Œåˆ†é…å’Œæ”¶é›†å…ƒç´ ä¸­çš„åä½ã€ç™¾ä½â€¦ç›´åˆ°åˆ†é…å®Œè¯¥åºåˆ—ä¸­çš„æœ€é«˜ä½ï¼Œåˆ™æŽ’åºç»“æŸ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * åŸºæ•°æŽ’åºï¼ˆLSD ä»Žä½Žä½å¼€å§‹ï¼‰ * * åŸºæ•°æŽ’åºé€‚ç”¨äºŽï¼š * (1)æ•°æ®èŒƒå›´è¾ƒå°ï¼Œå»ºè®®åœ¨å°äºŽ1000 * (2)æ¯ä¸ªæ•°å€¼éƒ½è¦å¤§äºŽç­‰äºŽ0 * * â‘ . å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼› * â‘¡. arrä¸ºåŽŸå§‹æ•°ç»„ï¼Œä»Žæœ€ä½Žä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼› * â‘¢. å¯¹radixè¿›è¡Œè®¡æ•°æŽ’åºï¼ˆåˆ©ç”¨è®¡æ•°æŽ’åºé€‚ç”¨äºŽå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼› * @param arr å¾…æŽ’åºæ•°ç»„ */public static void radixSort(int[] arr)&#123; if(arr.length &lt;= 1) return; //å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•° int max = 0; for(int i = 0; i &lt; arr.length; i++)&#123; if(max &lt; arr[i])&#123; max = arr[i]; &#125; &#125; int maxDigit = 1; while(max / 10 &gt; 0)&#123; maxDigit++; max = max / 10; &#125; System.out.println("maxDigit: " + maxDigit); //ç”³è¯·ä¸€ä¸ªæ¡¶ç©ºé—´ int[][] buckets = new int[10][arr.length]; int base = 10; //ä»Žä½Žä½åˆ°é«˜ä½ï¼Œå¯¹æ¯ä¸€ä½éåŽ†ï¼Œå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­ for(int i = 0; i &lt; maxDigit; i++)&#123; int[] bktLen = new int[10]; //å­˜å‚¨å„ä¸ªæ¡¶ä¸­å­˜å‚¨å…ƒç´ çš„æ•°é‡ //åˆ†é…ï¼šå°†æ‰€æœ‰å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­ for(int j = 0; j &lt; arr.length; j++)&#123; int whichBucket = (arr[j] % base) / (base / 10); buckets[whichBucket][bktLen[whichBucket]] = arr[j]; bktLen[whichBucket]++; &#125; //æ”¶é›†ï¼šå°†ä¸åŒæ¡¶é‡Œæ•°æ®æŒ¨ä¸ªæžå‡ºæ¥,ä¸ºä¸‹ä¸€è½®é«˜ä½æŽ’åºåšå‡†å¤‡,ç”±äºŽé è¿‘æ¡¶åº•çš„å…ƒç´ æŽ’åé å‰,å› æ­¤ä»Žæ¡¶åº•å…ˆæž int k = 0; for(int b = 0; b &lt; buckets.length; b++)&#123; for(int p = 0; p &lt; bktLen[b]; p++)&#123; arr[k++] = buckets[b][p]; &#125; &#125; System.out.println("Sorting: " + Arrays.toString(arr)); base *= 10; &#125;&#125; ä»¥ä¸‹æ˜¯åŸºæ•°æŽ’åºç®—æ³•å¤æ‚åº¦ï¼Œå…¶ä¸­kä¸ºæœ€å¤§æ•°çš„ä½æ•°ï¼š å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ ç©ºé—´å¤æ‚åº¦ O(d*(n+r)) O(d*(n+r)) O(d*(n+r)) O(n+r) å…¶ä¸­ï¼Œd ä¸ºä½æ•°ï¼Œr ä¸ºåŸºæ•°ï¼Œn ä¸ºåŽŸæ•°ç»„ä¸ªæ•°ã€‚åœ¨åŸºæ•°æŽ’åºä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¯”è¾ƒæ“ä½œï¼Œæ‰€ä»¥åœ¨å¤æ‚ä¸Šï¼Œæœ€å¥½çš„æƒ…å†µä¸Žæœ€åçš„æƒ…å†µåœ¨æ—¶é—´ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå‡ä¸º O(d*(n + r))ã€‚ åŸºæ•°æŽ’åºæ›´é€‚åˆç”¨äºŽå¯¹æ—¶é—´, å­—ç¬¦ä¸²ç­‰è¿™äº›æ•´ä½“æƒå€¼æœªçŸ¥çš„æ•°æ®è¿›è¡ŒæŽ’åºã€‚ Tips: åŸºæ•°æŽ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ åŸºæ•°æŽ’åº vs è®¡æ•°æŽ’åº vs æ¡¶æŽ’åº è¿™ä¸‰ç§æŽ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæœ‰æ˜Žæ˜¾å·®å¼‚ï¼š åŸºæ•°æŽ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶ è®¡æ•°æŽ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼ æ¡¶æŽ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼ æ€»ç»“ å„ç§æŽ’åºæ€§èƒ½å¯¹æ¯”å¦‚ä¸‹å›¾ï¼Œæœ‰äº›æŽ’åºæœªè¯¦ç»†ä»‹ç»ï¼Œæš‚ä¸”æ”¾åˆ°è¿™é‡Œã€‚å®žä¾‹æµ‹è¯•ç»“æžœå¯ä»¥çœ‹è¿™é‡Œï¼šå…«å¤§æŽ’åºç®—æ³•è€—æ—¶å¯¹æ¯” ã€‚ æŽ’åºç±»åž‹ å¹³å‡æƒ…å†µ æœ€å¥½æƒ…å†µ æœ€åæƒ…å†µ è¾…åŠ©ç©ºé—´ ç¨³å®šæ€§ å†’æ³¡æŽ’åº O(nÂ²) O(n) O(nÂ²) O(1) ç¨³å®š é€‰æ‹©æŽ’åº O(nÂ²) O(nÂ²) O(nÂ²) O(1) ä¸ç¨³å®š ç›´æŽ¥æ’å…¥æŽ’åº O(nÂ²) O(n) O(nÂ²) O(1) ç¨³å®š æŠ˜åŠæ’å…¥æŽ’åº O(nÂ²) O(n) O(nÂ²) O(1) ç¨³å®š å¸Œå°”æŽ’åº O(n^1.3) O(nlogn) O(nÂ²) O(1) ä¸ç¨³å®š å½’å¹¶æŽ’åº O(nlogâ‚‚n) O(nlogâ‚‚n) O(nlogâ‚‚n) O(n) ç¨³å®š å¿«é€ŸæŽ’åº O(nlogâ‚‚n) O(nlogâ‚‚n) O(nÂ²) O(nlogâ‚‚n) ä¸ç¨³å®š å †æŽ’åº O(nlogâ‚‚n) O(nlogâ‚‚n) O(nlogâ‚‚n) O(1) ä¸ç¨³å®š è®¡æ•°æŽ’åº O(n+k) O(n+k) O(n+k) O(k) ç¨³å®š æ¡¶æŽ’åº O(n+k) O(n+k) O(nÂ²) O(n+k) (ä¸)ç¨³å®š åŸºæ•°æŽ’åº O(d(n+k)) O(d(n+k)) O(d(n+kd)) O(n+kd) ç¨³å®š ä»Žæ—¶é—´å¤æ‚åº¦æ¥è¯´ï¼š (1). å¹³æ–¹é˜¶O(nÂ²)æŽ’åºï¼šå„ç±»ç®€å•æŽ’åºï¼šç›´æŽ¥æ’å…¥ã€ç›´æŽ¥é€‰æ‹©å’Œå†’æ³¡æŽ’åºï¼› (2). çº¿æ€§å¯¹æ•°é˜¶O(nlogâ‚‚n)æŽ’åºï¼šå¿«é€ŸæŽ’åºã€å †æŽ’åºå’Œå½’å¹¶æŽ’åºï¼› (3). O(n1+Â§))æŽ’åºï¼ŒÂ§æ˜¯ä»‹äºŽ0å’Œ1ä¹‹é—´çš„å¸¸æ•°ï¼šå¸Œå°”æŽ’åº (4). çº¿æ€§é˜¶O(n)æŽ’åºï¼šåŸºæ•°æŽ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æŽ’åºã€‚ åˆ°æ­¤ï¼Œå¾ˆå¤šäººä¼šæ³¨æ„åˆ°åŸºæ•°æŽ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå´æ²¡æœ‰å¿«æŽ’ã€å †æŽ’åºæµè¡Œå‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ä¸‹å›¾ç®—æ³•å¯¼è®ºçš„ç›¸å…³è¯´æ˜Žï¼š åŸºæ•°æŽ’åºåªé€‚ç”¨äºŽæœ‰åŸºæ•°çš„æƒ…å†µï¼Œè€ŒåŸºäºŽæ¯”è¾ƒçš„æŽ’åºé€‚ç”¨èŒƒå›´å°±å¹¿å¾—å¤šã€‚å¦ä¸€æ–¹é¢æ˜¯å†…å­˜ä¸Šçš„è€ƒè™‘ã€‚ä½œä¸ºä¸€ç§é€šç”¨çš„æŽ’åºæ–¹æ³•ï¼Œæœ€å¥½ä¸è¦å¸¦æ¥æ„æ–™ä¹‹å¤–çš„å†…å­˜å¼€é”€ï¼Œæ‰€ä»¥å„è¯­è¨€çš„é»˜è®¤å®žçŽ°éƒ½æ²¡æœ‰ç”¨åŸºæ•°æŽ’åºï¼Œä½†æ˜¯ä¸èƒ½å¦è®¤åŸºæ•°æŽ’åºåœ¨å„é¢†åŸŸçš„åº”ç”¨ã€‚ æ—¶é—´å¤æ‚åº¦æžé™å½“è¢«æŽ’åºçš„æ•°æœ‰ä¸€äº›æ€§è´¨çš„æ—¶å€™ï¼ˆæ¯”å¦‚æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚æœ‰ä¸€å®šçš„èŒƒå›´ï¼‰ï¼ŒæŽ’åºç®—æ³•çš„å¤æ‚åº¦æ˜¯å¯ä»¥å°äºŽO(nlgn)çš„ã€‚æ¯”å¦‚ï¼š è®¡æ•°æŽ’åº å¤æ‚åº¦O( k+n) è¦æ±‚ï¼šè¢«æŽ’åºçš„æ•°æ˜¯0~kèŒƒå›´å†…çš„æ•´æ•° åŸºæ•°æŽ’åº å¤æ‚åº¦O( d(k+n) ) è¦æ±‚ï¼šdä½æ•°ï¼Œæ¯ä¸ªæ•°ä½æœ‰kä¸ªå–å€¼ æ¡¶æŽ’åº å¤æ‚åº¦ O( n ) ï¼ˆå¹³å‡ï¼‰ è¦æ±‚ï¼šè¢«æŽ’åºæ•°åœ¨æŸä¸ªèŒƒå›´å†…ï¼Œå¹¶ä¸”æœä»Žå‡åŒ€åˆ†å¸ƒ ä½†æ˜¯ï¼Œå½“è¢«æŽ’åºçš„æ•°ä¸å…·æœ‰ä»»ä½•æ€§è´¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä½¿ç”¨åŸºäºŽæ¯”è¾ƒçš„æŽ’åºç®—æ³•ï¼Œè€ŒåŸºäºŽæ¯”è¾ƒçš„æŽ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦çš„ä¸‹é™å¿…é¡»æ˜¯O(nlgn)ã€‚ å‚è€ƒå¾ˆå¤šé«˜æ•ˆæŽ’åºç®—æ³•çš„ä»£ä»·æ˜¯ nlognï¼Œéš¾é“è¿™æ˜¯æŽ’åºç®—æ³•çš„æžé™äº†å—ï¼Ÿ è¯´æ˜Ž å½“åŽŸè¡¨æœ‰åºæˆ–åŸºæœ¬æœ‰åºæ—¶ï¼Œç›´æŽ¥æ’å…¥æŽ’åºå’Œå†’æ³¡æŽ’åºå°†å¤§å¤§å‡å°‘æ¯”è¾ƒæ¬¡æ•°å’Œç§»åŠ¨è®°å½•çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™è‡³Oï¼ˆnï¼‰ï¼› è€Œå¿«é€ŸæŽ’åºåˆ™ç›¸åï¼Œå½“åŽŸè¡¨åŸºæœ¬æœ‰åºæ—¶ï¼Œå°†èœ•åŒ–ä¸ºå†’æ³¡æŽ’åºï¼Œæ—¶é—´å¤æ‚åº¦æé«˜ä¸ºOï¼ˆn2ï¼‰ï¼› åŽŸè¡¨æ˜¯å¦æœ‰åºï¼Œå¯¹ç®€å•é€‰æ‹©æŽ’åºã€å †æŽ’åºã€å½’å¹¶æŽ’åºå’ŒåŸºæ•°æŽ’åºçš„æ—¶é—´å¤æ‚åº¦å½±å“ä¸å¤§ã€‚ å‚è€ƒèµ„æ–™ æ•°æ®ç»“æž„å¯è§†åŒ–ï¼švisualgoï¼ŒSorting Algorithms Animationsï¼ŒCodePen &amp; sort it out ä¸€ä¸ªæ˜¾ç¤ºæŽ’åºè¿‡ç¨‹çš„PYTHONè„šæœ¬ æŽ’åºç®—æ³•æµ‹è¯•ï¼šLab 1: Sorting - å“¥å¾·å ¡å¤§å­¦è¯¾ä»¶ï¼ˆUniversity of Gothenburgï¼‰ Sorting Algorithm Animations - ä¸€ä¸ªæŽ’åºç®—æ³•æ¯”è¾ƒçš„ç½‘ç«™ Sorting - å¡å†…åŸºæ¢…éš†å¤§å­¦è¯¾ä»¶ æ•°æ®ç»“æž„å¸¸è§çš„å…«å¤§æŽ’åºç®—æ³•ï¼ˆè¯¦ç»†æ•´ç†ï¼‰ å¿…é¡»çŸ¥é“çš„å…«å¤§ç§æŽ’åºç®—æ³•ã€javaå®žçŽ°ã€‘ åå¤§ç»å…¸æŽ’åºç®—æ³• è§†è§‰ç›´è§‚æ„Ÿå— 7 ç§å¸¸ç”¨çš„æŽ’åºç®—æ³• JSä¸­å¯èƒ½ç”¨å¾—åˆ°çš„å…¨éƒ¨çš„æŽ’åºç®—æ³• æ€»ç»“5ç§æ¯”è¾ƒé«˜æ•ˆå¸¸ç”¨çš„æŽ’åºç®—æ³• å¸¸è§æŽ’åºç®—æ³•C++æ€»ç»“]]></content>
      <tags>
        <tag>Algorithms,</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EveryThing About Operation System]]></title>
    <url>%2F2019%2F12%2F27%2FEveryThing-About-Operation-System%2F</url>
    <content type="text"><![CDATA[å †å’Œæ ˆçš„åŒºåˆ«å † ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›žæ”¶ï¼Œåˆ†é…æ–¹å¼ç±»ä¼¼äºŽé“¾è¡¨ã€‚å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åžƒåœ¾å›žæ”¶ç®—æ³•æ¥å†³å®šï¼ˆå¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›žæ”¶ï¼‰ã€‚æ‰€ä»¥è°ƒç”¨è¿™äº›å¯¹è±¡çš„é€Ÿåº¦è¦ç›¸å¯¹æ¥å¾—ä½Žä¸€äº›å †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æŽ’åºã€‚ æ ˆ ç”±æ“ä½œç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºŽæ•°æ®ç»“æž„ä¸­çš„æ ˆæ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œ å®ƒä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºŽå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾ã€‚ä¸€ç§å…ˆè¿›åŽå‡ºçš„æ•°æ®ç»“æž„ ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä»¥åŠå¦‚ä½•åˆ‡æ¢ã€‚ å†…æ ¸æ€ï¼šè¿è¡Œæ“ä½œç³»ç»Ÿç¨‹åºï¼ŒæŽ§åˆ¶è®¡ç®—æœºçš„ç¡¬ä»¶èµ„æºï¼Œå¹¶æä¾›ä¸Šå±‚åº”ç”¨ç¨‹åºè¿è¡Œçš„çŽ¯å¢ƒï¼Œè¿è¡Œåœ¨é«˜ç‰¹æƒçº§ä¸Šã€‚å†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€çš„é€”å¾„â€”â€”&gt;è®¾ç½®ç¨‹åºçŠ¶æ€å­—ã€‚ ç”¨æˆ·æ€ï¼šè¿è¡Œç”¨æˆ·ç¨‹åºä¸Šå±‚åº”ç”¨ç¨‹åºçš„æ´»åŠ¨ç©ºé—´ï¼Œè¿è¡Œåœ¨ä½Žç‰¹æƒçº§åˆ«ä¸Šã€‚ä¸ºäº†ä½¿ä¸Šå±‚åº”ç”¨èƒ½å¤Ÿè®¿é—®åˆ°è¿™äº›èµ„æºï¼Œå†…æ ¸ä¸ºä¸Šå±‚åº”ç”¨æä¾›è®¿é—®çš„æŽ¥å£ã€‚ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„å”¯ä¸€é€”å¾„(ç”³è¯·å¤–éƒ¨èµ„æº)â€”â€”&gt;ä¸­æ–­/å¼‚å¸¸/ç³»ç»Ÿè°ƒç”¨(è¯»å†™æ–‡ä»¶,ç”³è¯·å †å†…å­˜,ç¼ºé¡µ(è™šæ‹Ÿå†…å­˜åœ°å€æ²¡æœ‰æ˜ å°„åˆ°ç‰©ç†å†…å­˜åœ°å€,åœ¨Javaä¸­Newä¸€ä¸ªå¯¹è±¡))ã€‚ç³»ç»Ÿè°ƒç”¨ Systemï¼Œ Callaccept:å¥—æŽ¥å­—çš„å®¢æˆ·ç«¯è¿žæŽ¥å¥—æŽ¥å­—ï¼Œbindå¥—æŽ¥å­—çš„æœåŠ¡ç«¯ç›‘å¬ç«¯å£ ä¿¡å·å’Œä¿¡å·é‡çš„å…³ç³» ä¿¡å·ï¼šï¼ˆsignalï¼‰æ˜¯ä¸€ç§å¤„ç†å¼‚æ­¥äº‹ä»¶çš„æ–¹å¼ã€‚ä¿¡å·æ—¶æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºŽé€šçŸ¥æŽ¥å—è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿï¼Œé™¤äº†ç”¨äºŽè¿›ç¨‹å¤–ï¼Œè¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«ã€‚linuxé™¤äº†æ”¯æŒunixæ—©æœŸçš„ä¿¡å·è¯­ä¹‰å‡½æ•°ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆposix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigactionã€‚ ä¿¡å·é‡ï¼šï¼ˆSemaphoreï¼‰è¿›ç¨‹é—´é€šä¿¡å¤„ç†åŒæ­¥äº’æ–¥çš„æœºåˆ¶ã€‚æ˜¯åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä½¿ç”¨çš„ä¸€ç§è®¾æ–½, å®ƒè´Ÿè´£åè°ƒå„ä¸ªçº¿ç¨‹, ä»¥ä¿è¯å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®ã€åˆç†çš„ä½¿ç”¨å…¬å…±èµ„æºã€‚è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ç­‰å•¥æ˜¯è¿›ç¨‹ï¼Œå•¥æ˜¯çº¿ç¨‹ï¼Œä»–ä»¬çš„æœ¬è´¨åŒºåˆ«ï¼Ÿæˆ‘ä»¬è¿è¡Œä¸€ä¸ªç¨‹åºæ—¶ï¼Œæ•°æ®æ”¾åœ¨å“ªé‡Œï¼Ÿä»£ç æ”¾åœ¨å“ªé‡Œï¼Ÿå’‹å°±è¿˜è¦åˆ†å †å’Œæ ˆï¼Ÿçº¿ç¨‹åˆ‡æ¢æ—¶æ˜¯ä¸Šä¸‹æ–‡æ˜¯å•¥æ„æ€ï¼Ÿ è™šæ‹Ÿåœ°å€æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿ï¼Ÿçº¿ç¨‹éœ€è¦é‚£ä¹ˆå¤šç§çŠ¶æ€å¹²å•¥å­ï¼Ÿä»€ä¹ˆæ˜¯ä¹è§‚é”ã€æ‚²è§‚é”ï¼Ÿæ­»é”æ˜¯æ€Žä¹ˆé€ æˆçš„ï¼Ÿè§£å†³æ­»é”çš„ç­–ç•¥æœ‰å“ªäº›ï¼Ÿç­‰ç­‰2ã€è¿›ç¨‹ã€çº¿ç¨‹ç©¶ç«Ÿæ˜¯ç”±ä»€ä¹ˆç»„æˆçš„ï¼Ÿæœ‰å“ªäº›æ•°æ®ï¼Ÿ 3ã€å†…å­˜ç®¡ç†ï¼ŒåŒ…æ‹¬ï¼šè™šæ‹Ÿå†…å­˜ï¼ˆé‡ç‚¹ï¼‰ã€åˆ†é¡µã€åˆ†æ®µã€åˆ†é¡µç³»ç»Ÿåœ°å€æ˜ å°„ã€å†…å­˜ç½®æ¢ç®—æ³•ï¼ˆé‡ç‚¹ï¼‰ã€‚ å®‰å…¨ç³»ç»Ÿä¸ä¼šæ­»é” è¿›ç¨‹æ˜¯ä»€ä¹ˆè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œé‡ç‚¹åœ¨ç³»ç»Ÿè°ƒåº¦å’Œç‹¬ç«‹çš„å•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹æ˜¯å¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ä¸€æ®µç¨‹åºã€‚ çº¿ç¨‹æ˜¯ä»€ä¹ˆçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®žä½“ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåœ¨è¿è¡Œæ—¶ï¼Œåªæ˜¯æš‚ç”¨ä¸€äº›è®¡æ•°å™¨ï¼Œå¯„å­˜å™¨ï¼Œå’Œæ ˆã€‚ è¿›ç¨‹ä¸Žçº¿ç¨‹çš„å…³ç³» ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±žäºŽä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆé€šå¸¸è¯´çš„ä¸»çº¿ç¨‹ï¼‰ã€‚ èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚ çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åä½œåŒæ­¥ï¼Œä¸åŒè¿›ç¨‹çš„çº¿ç¨‹é—´è¦åˆ©ç”¨æ¶ˆæ¯é€šä¿¡çš„æ–¹æ³•å®žçŽ°åŒæ­¥ã€‚ å¤„ç†æœºåˆ†é…ç»™çº¿ç¨‹ï¼Œå³çœŸæ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ˜¯çº¿ç¨‹ã€‚ çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹å†…çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯è¿›ç¨‹å†…çš„å¯è°ƒåº¦å®žä½“ã€‚ è¿›ç¨‹ä¼šé‡Šæ”¾èµ„æºï¼Œçº¿ç¨‹ä¸ä¼šã€‚ä»Ž4ä¸ªè§’åº¦æ¥åˆ†æžè¿›ç¨‹ä¸Žçº¿ç¨‹ä¹‹é—´çš„åŒºåˆ« è°ƒåº¦ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºçš„åŸºæœ¬å•ä½ å¹¶å‘æ€§ï¼šä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥å¹¶å‘æ‰§è¡Œ æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†æ˜¯å¯ä»¥è®¿é—®éš¶å±žäºŽè¿›ç¨‹çš„èµ„æº ç³»ç»Ÿå¼€é”€ï¼šåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›žæ”¶ç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ï¼ŒI/Oè®¾å¤‡ç­‰ï¼ŒOSæ‰€ä»˜å‡ºçš„å¼€é”€æ˜¾è‘—å¤§äºŽåœ¨åˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ï¼Œè¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ä¹Ÿè¿œå¤§äºŽçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€è¿›ç¨‹æœ‰å‡ ç§çŠ¶æ€ å°±ç»ªçŠ¶æ€ï¼šè¿›ç¨‹å·²ç»èŽ·å¾—é™¤å¤„ç†æœºä»¥å¤–çš„æ‰€æœ‰èµ„æºï¼Œç­‰å¾…åˆ†é…å¤„ç†æœºèµ„æº è¿è¡ŒçŠ¶æ€ï¼šå ç”¨å¤„ç†æœºèµ„æºè¿è¡Œï¼Œå¤„äºŽæ­¤çŠ¶æ€çš„è¿›ç¨‹æ•°å°äºŽç­‰äºŽCPUæ•°ç›® é˜»å¡žçŠ¶æ€ï¼šè¿›ç¨‹ç­‰å¾…æŸç§æ¡ä»¶ï¼Œåœ¨æ¡ä»¶æ»¡è¶³ä¹‹å‰æ— æ³•è¿è¡Œçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€ æ‰§è¡ŒçŠ¶æ€ï¼šè¡¨ç¤ºçº¿ç¨‹å·²ç»èŽ·å¾—å¤„ç†æœºè€Œæ­£åœ¨è¿è¡Œ å°±ç»ªçŠ¶æ€ï¼šæŒ‡çº¿ç¨‹å·²ç»å…·å¤‡äº†å„ç§æ‰§è¡Œæ¡ä»¶ï¼Œåªéœ€å†èŽ·å¾—CPUä¾¿å¯ä»¥ç«‹å³æ‰§è¡Œéš¾ é˜»å¡žçŠ¶æ€ï¼šçº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å› æŸäº‹å—é˜»è€Œå¤„äºŽæš‚åœçŠ¶æ€æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦æœ‰å“ªå‡ ç§ éžæŠ¢å å¼æ–¹å¼ï¼šé‡‡ç”¨è¿™ç§è°ƒåº¦æ–¹å¼æ—¶ï¼Œä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™æŸä¸ªè¿›ç¨‹åŽï¼Œå°±ä¸€ç›´è®©å®ƒè¿è¡Œä¸‹åŽ»ï¼Œå†³ä¸ä¼šå› ä¸ºæ—¶é’Ÿä¸­æ–­æˆ–ä»»ä½•å…¶å®ƒåŽŸå› åŽ»æŠ¢å å½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„å¤„ç†æœºï¼Œç›´è‡³è¯¥è¿›ç¨‹å®Œæˆï¼Œæˆ–å‘ç”ŸæŸç§äº‹ä»¶è€Œè¢«é˜»å¡žæ—¶ï¼Œæ‰æŠŠå¤„ç†æœºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹ æŠ¢å å¼æ–¹å¼ï¼šè¿™ç§è°ƒåº¦æ–¹å¼å…è®¸è°ƒåº¦ç¨‹åºæ ¹æ®æŸç§åŽŸåˆ™ï¼ŒåŽ»æš‚åœæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å·²ç»åˆ†é…ç»™è¯¥è¿›ç¨‹çš„å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€è¿›ç¨‹ï¼Œåœ¨çŽ°ä»£OSä¸­å¹¿æ³›é‡‡ç”¨æŠ¢å æ–¹å¼ã€‚è¿›ç¨‹ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥è¿›ç¨‹åŒæ­¥æœºåˆ¶çš„ä¸»è¦ä»»åŠ¡æ˜¯å¯¹å¤šä¸ªç›¸å…³è¿›ç¨‹åœ¨æ‰§è¡Œæ¬¡åºä¸Šè¿›è¡Œåè°ƒï¼Œä½¿å¾—å¹¶å‘æ‰§è¡Œçš„å„ä¸ªè¿›ç¨‹ä¹‹é—´èƒ½æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æˆ–æ—¶åºå…±äº«ç³»ç»Ÿèµ„æºï¼Œå¹¶èƒ½å¾ˆå¥½çš„ç›¸äº’åˆä½œï¼Œä»Žè€Œä½¿å¾—ç¨‹åºçš„æ‰§è¡Œå…·æœ‰å¯å†çŽ°æ€§ åˆ—ä¸¾å‡ ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œå¹¶è¯´æ˜Žå…¶ä¼˜ç¼ºç‚¹ ç¡¬ä»¶åŒæ­¥æœºåˆ¶ï¼š ä¿¡å·é‡æœºåˆ¶ï¼š ç®¡ç¨‹æœºåˆ¶ï¼šè¿›ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„è¿›ç¨‹ä¹‹é—´é€šä¿¡æ–¹å‘ ç®¡é“ï¼šç®¡é“æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œè€Œä¸”åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´ä½¿ç”¨ï¼Œè¿›ç¨‹çš„äº²ç¼˜å…³ç³»é€šå¸¸æ˜¯æŒ‡çˆ¶å­è¿›ç¨‹å…³ç³» æœ‰åç®¡é“ï¼šæœ‰åç®¡é“ä¹Ÿæ˜¯åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œä½†æ˜¯å®ƒå…è®¸æ— äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡ ä¿¡å·é‡ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥ç”¨æ¥æŽ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œå®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºï¼Œå› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”±æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ ä¿¡å·ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºŽé€šçŸ¥æŽ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿ å…±äº«å†…å­˜ï¼šå…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜ï¼Œè¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºï¼Œä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ï¼Œå…±äº«å†…å­˜æ˜¯æœ€å¿«çš„IPCæ–¹å¼ï¼Œå®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆçŽ‡ä½Žè€Œä¸“é—¨è®¾è®¡çš„ï¼Œå®ƒå¾€å¾€ä¸Žå…¶ä»–é€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ï¼Œé…åˆä½¿ç”¨ï¼Œæ¥å®žçŽ°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡ Socket(å¥—æŽ¥å­—)ï¼šå¥—æŽ¥å­—å¯ä»¥ç”¨äºŽä¸åŒçš„è¿›ç¨‹é—´çš„é€šä¿¡çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„é€”å¾„ é”æœºåˆ¶ï¼šåŒ…æ‹¬äº’æ–¥é”ï¼Œæ¡ä»¶å˜é‡ï¼Œè¯»å†™é” äº’æ–¥é”æä¾›äº†ä»¥æŽ’ä»–æ–¹å¼é˜²æ­¢æ•°æ®ç»“æž„è¢«å¹¶å‘ä¿®æ”¹çš„æ–¹æ³• æ¡ä»¶å˜é‡å¯ä»¥ä»¥åŽŸå­çš„æ–¹å¼é˜»å¡žè¿›ç¨‹ï¼Œç›´åˆ°æŸä¸ªç‰¹å®šæ¡ä»¶ä¸ºçœŸä¸ºæ­¢ï¼Œå¯¹æ¡ä»¶çš„æµ‹è¯•æ˜¯åœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œçš„ï¼Œæ¡ä»¶å˜é‡å§‹ç»ˆä¸Žäº’æ–¥é”ä¸€èµ·ä½¿ç”¨ è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å…±äº«æ•°æ®ï¼Œè€Œå¯¹å†™æ“ä½œæ˜¯äº’æ–¥çš„ ä¿¡å·é‡æœºåˆ¶ï¼šåŒ…æ‹¬æ— åçº¿ç¨‹ä¿¡å·é‡å’Œå‘½åçº¿ç¨‹ä¿¡å·é‡ ä¿¡å·æœºåˆ¶ï¼šç±»ä¼¼è¿›ç¨‹é—´çš„ä¿¡å·å¤„ç† æ³¨æ„ï¼šçº¿ç¨‹é—´çš„é€šä¿¡çš„ç›®çš„ä¸»è¦æ˜¯ç”¨äºŽçº¿ç¨‹çš„åŒæ­¥ï¼Œæ‰€ä»¥çº¿ç¨‹æ²¡æœ‰åƒè¿›ç¨‹é€šä¿¡ä¸­çš„ç”¨äºŽæ•°æ®äº¤æ¢çš„é€šä¿¡æœºåˆ¶ å¤šçº¿ç¨‹å¦‚ä½•åŒæ­¥ ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰ã€ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ã€äº‹ä»¶ï¼ˆEventï¼‰çš„åŒºåˆ« ä¸´ç•ŒåŒºï¼šé€šè¿‡å¯¹å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæŽ§åˆ¶æ•°æ®è®¿é—®ã€‚åœ¨ä»»æ„æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ï¼Œå¦‚æžœæœ‰å¤šä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®å…¬å…±èµ„æºï¼Œé‚£ä¹ˆåœ¨æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åŽï¼Œå…¶ä»–è¯•å›¾è®¿é—®å…¬å…±èµ„æºçš„çº¿ç¨‹å°†è¢«æŒ‚èµ·ï¼Œå¹¶ä¸€ç›´ç­‰åˆ°è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ç¦»å¼€ï¼Œä¸´ç•ŒåŒºåœ¨è¢«é‡Šæ”¾åŽï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥æŠ¢å ã€‚ äº’æ–¥é‡ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ã€‚ åªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ï¼Œå› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥èƒ½ä¿è¯å…¬å…±èµ„æºä¸ä¼šåŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ã€‚äº’æ–¥ä¸ä»…èƒ½å®žçŽ°åŒä¸€åº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº«ï¼Œè¿˜èƒ½å®žçŽ°ä¸åŒåº”ç”¨ç¨‹åºçš„å…¬å…±èµ„æºå®‰å…¨å…±äº« .äº’æ–¥é‡æ¯”ä¸´ç•ŒåŒºå¤æ‚ã€‚å› ä¸ºä½¿ç”¨äº’æ–¥ä¸ä»…ä»…èƒ½å¤Ÿåœ¨åŒä¸€åº”ç”¨ç¨‹åºä¸åŒçº¿ç¨‹ä¸­å®žçŽ°èµ„æºçš„å®‰å…¨å…±äº«ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸åŒåº”ç”¨ç¨‹åºçš„çº¿ç¨‹ä¹‹é—´å®žçŽ°å¯¹èµ„æºçš„å®‰å…¨å…±äº«ã€‚ ä¿¡å·é‡ï¼šå®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›® .ä¿¡å·é‡å¯¹è±¡å¯¹çº¿ç¨‹çš„åŒæ­¥æ–¹å¼ä¸Žå‰é¢å‡ ç§æ–¹æ³•ä¸åŒï¼Œä¿¡å·å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨å…±äº«èµ„æºï¼Œè¿™ä¸Žæ“ä½œç³»ç»Ÿä¸­çš„PVæ“ä½œç›¸åŒã€‚å®ƒæŒ‡å‡ºäº†åŒæ—¶è®¿é—®å…±äº«èµ„æºçš„çº¿ç¨‹æœ€å¤§æ•°ç›®ã€‚å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦é™åˆ¶åœ¨åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°ç›®ã€‚ PVæ“ä½œåŠä¿¡å·é‡çš„æ¦‚å¿µéƒ½æ˜¯ç”±è·å…°ç§‘å­¦å®¶E.W.Dijkstraæå‡ºçš„ã€‚ä¿¡å·é‡Sæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒSå¤§äºŽç­‰äºŽé›¶æ—¶ä»£è¡¨å¯ä¾›å¹¶å‘è¿›ç¨‹ä½¿ç”¨çš„èµ„æºå®žä½“æ•°ï¼Œä½†Så°äºŽé›¶æ—¶åˆ™è¡¨ç¤ºæ­£åœ¨ç­‰å¾…ä½¿ç”¨å…±äº«èµ„æºçš„è¿›ç¨‹æ•°ã€‚ Pæ“ä½œç”³è¯·èµ„æºï¼š Så‡1ï¼› è‹¥Så‡1åŽä»å¤§äºŽç­‰äºŽé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼› è‹¥Så‡1åŽå°äºŽé›¶ï¼Œåˆ™è¯¥è¿›ç¨‹è¢«é˜»å¡žåŽè¿›å…¥ä¸Žè¯¥ä¿¡å·ç›¸å¯¹åº”çš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åŽè½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ Væ“ä½œé‡Šæ”¾èµ„æºï¼š SåŠ 1ï¼› è‹¥ç›¸åŠ ç»“æžœå¤§äºŽé›¶ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼› è‹¥ç›¸åŠ ç»“æžœå°äºŽç­‰äºŽé›¶ï¼Œåˆ™ä»Žè¯¥ä¿¡å·çš„ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªç­‰å¾…è¿›ç¨‹ï¼Œç„¶åŽå†è¿”å›žåŽŸè¿›ç¨‹ç»§ç»­æ‰§è¡Œæˆ–è½¬å…¥è¿›ç¨‹è°ƒåº¦ã€‚ äº‹ä»¶ï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿å®žçŽ°å¯¹å¤šä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒçš„æ“ä½œ . æ€»ç»“ï¼š äº’æ–¥é‡ä¸Žä¸´ç•ŒåŒºçš„ä½œç”¨éžå¸¸ç›¸ä¼¼ï¼Œä½†äº’æ–¥é‡æ˜¯å¯ä»¥å‘½åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è·¨è¶Šè¿›ç¨‹ä½¿ç”¨ã€‚æ‰€ä»¥åˆ›å»ºäº’æ–¥é‡éœ€è¦çš„èµ„æºæ›´å¤šï¼Œæ‰€ä»¥å¦‚æžœåªä¸ºäº†åœ¨è¿›ç¨‹å†…éƒ¨æ˜¯ç”¨çš„è¯ä½¿ç”¨ä¸´ç•ŒåŒºä¼šå¸¦æ¥é€Ÿåº¦ä¸Šçš„ä¼˜åŠ¿å¹¶èƒ½å¤Ÿå‡å°‘èµ„æºå ç”¨é‡ã€‚å› ä¸ºäº’æ–¥é‡æ˜¯è·¨è¿›ç¨‹çš„äº’æ–¥é‡ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±å¯ä»¥é€šè¿‡åå­—æ‰“å¼€å®ƒã€‚ äº’æ–¥é‡ï¼ˆMutexï¼‰ï¼Œä¿¡å·ç¯ï¼ˆSemaphoreï¼‰ï¼Œäº‹ä»¶ï¼ˆEventï¼‰éƒ½å¯ä»¥è¢«è·¨è¶Šè¿›ç¨‹ä½¿ç”¨æ¥è¿›è¡ŒåŒæ­¥æ•°æ®æ“ä½œï¼Œè€Œå…¶ä»–çš„å¯¹è±¡ä¸Žæ•°æ®åŒæ­¥æ“ä½œæ— å…³ï¼Œä½†å¯¹äºŽè¿›ç¨‹å’Œçº¿ç¨‹æ¥è®²ï¼Œå¦‚æžœè¿›ç¨‹å’Œçº¿ç¨‹åœ¨è¿è¡ŒçŠ¶æ€åˆ™ä¸ºæ— ä¿¡å·çŠ¶æ€ï¼Œåœ¨é€€å‡ºåŽä¸ºæœ‰ä¿¡å·çŠ¶æ€ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨WaitForSingleObjectæ¥ç­‰å¾…è¿›ç¨‹å’Œçº¿ç¨‹é€€å‡ºã€‚ é€šè¿‡äº’æ–¥é‡å¯ä»¥æŒ‡å®šèµ„æºè¢«ç‹¬å çš„æ–¹å¼ä½¿ç”¨ï¼Œä½†å¦‚æžœæœ‰ä¸‹é¢ä¸€ç§æƒ…å†µé€šè¿‡äº’æ–¥é‡å°±æ— æ³•å¤„ç†ï¼Œæ¯”å¦‚çŽ°åœ¨ä¸€ä½ç”¨æˆ·è´­ä¹°äº†ä¸€ä»½ä¸‰ä¸ªå¹¶å‘è®¿é—®è®¸å¯çš„æ•°æ®åº“ç³»ç»Ÿï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è´­ä¹°çš„è®¿é—®è®¸å¯æ•°é‡æ¥å†³å®šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹/è¿›ç¨‹èƒ½åŒæ—¶è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œè¿™æ—¶å€™å¦‚æžœåˆ©ç”¨äº’æ–¥é‡å°±æ²¡æœ‰åŠžæ³•å®Œæˆè¿™ä¸ªè¦æ±‚ï¼Œä¿¡å·ç¯å¯¹è±¡å¯ä»¥è¯´æ˜¯ä¸€ç§èµ„æºè®¡æ•°å™¨ã€‚ æ­»é”çš„å®šä¹‰å¦‚æžœä¸€ç»„è¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä»…ç”±è¯¥ç»„è¿›ç¨‹ä¸­çš„å…¶å®ƒè¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥ç»„è¿›ç¨‹æ˜¯æ­»é”çš„ è¿›ç¨‹æ­»é”çš„åŽŸå› å¤šä¸ªè¿›ç¨‹å¯¹èµ„æºçš„äº‰å¤ºï¼ŒåŒ…æ‹¬å¯¹ä¸å¯æŠ¢å èµ„æºå’Œå¯¹å¯æ¶ˆè€—èµ„æº è¿›ç¨‹æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡ŒæŽ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå…¶èµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ï¼Œå¦‚æžœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰è¯¥èµ„æºçš„è¿›ç¨‹ç”¨å®Œé‡Šæ”¾ è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²ç»è¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡žï¼Œä½†å¯¹è‡ªå·±å·²ç»èŽ·å¾—çš„èµ„æºä¿æŒä¸æ”¾ ä¸å¯æŠ¢å æ¡ä»¶ï¼šè¿›ç¨‹å·²ç»èŽ·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«æŠ¢å ï¼Œåªèƒ½åœ¨è¿›ç¨‹ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ å¾ªçŽ¯ç­‰å¾…æ¡ä»¶ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹-èµ„æºå¾ªçŽ¯é“¾ï¼Œå³è¿›ç¨‹é›†åˆï½›P0,P1,â€¦â€¦,PNï½ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼ŒP1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPN æ­£åœ¨ç­‰å¾…P0å ç”¨çš„èµ„æºè¿›ç¨‹æ­»é”çš„å¤„ç† é¢„é˜²æ­»é”ï¼šé€šè¿‡è®¾ç½®æŸäº›é™åˆ¶æ¡ä»¶ï¼ŒåŽ»ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ç§ é¿å…æ­»é”ï¼šåœ¨èµ„æºçš„åŠ¨æ€åˆ†é…è¿‡ç¨‹ä¸­ï¼Œç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ æ£€æµ‹æ­»é”ï¼šé€šè¿‡æ£€æµ‹æœºæž„åŠæ—¶æ£€æµ‹å‡ºæ­»é”çš„å‘ç”Ÿï¼Œç„¶åŽé‡‡å–é€‚å½“çš„æŽªæ–½ï¼ŒæŠŠè¿›ç¨‹ä»Žæ­»é”ä¸­è§£è„±å‡ºæ¥ è§£é™¤æ­»é”ï¼šå½“æ£€æµ‹åˆ°ç³»ç»Ÿä¸­å·²ç»å‘ç”Ÿæ­»é”æ—¶ï¼Œé‡‡å–ç›¸åº”çš„æŽªæ–½ï¼Œå°†è¿›ç¨‹ä»Žæ­»é”çŠ¶æ€è§£è„±å‡ºæ¥ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯æ’¤é”€ä¸€äº›è¿›ç¨‹ï¼Œå›žæ”¶ä»–ä»¬çš„èµ„æºï¼Œå°†å®ƒä»¬åˆ†é…ç»™å·²ç»å¤„äºŽé˜»å¡žçŠ¶æ€çš„è¿›ç¨‹ï¼Œä½¿å…¶èƒ½å¤Ÿç»§ç»­è¿è¡Œæè¿°å®žæ—¶æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾å®žæ—¶æ“ä½œç³»ç»Ÿæ˜¯æŒ‡æ“ä½œç³»ç»Ÿå·¥ä½œæ—¶ï¼Œå…¶å„ç§èµ„æºå¯ä»¥æ ¹æ®éœ€è¦éšæ—¶è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œç”±äºŽå„ç§èµ„æºå¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œå› æ­¤ï¼Œå…¶å¤„ç†äº‹åŠ¡çš„èƒ½åŠ›è¾ƒå¼º æ¢è¨€ä¹‹ï¼Œåœ¨ç‰¹å®šæ—¶é—´å†…å®Œæˆç‰¹å®šçš„ä»»åŠ¡ï¼Œå…·æœ‰å®žæ—¶æ€§ä¸Žå¯é æ€§ æ“ä½œç³»ç»Ÿä¸­æ–­ä¸Žè½®è¯¢çš„åŸºæœ¬ç‰¹ç‚¹ è½®è¯¢ï¼šå¯¹I/Oè®¾å¤‡çš„ç¨‹åºè½®è¯¢çš„æ–¹å¼æ˜¯æ—©æœŸçš„è®¡ç®—æœºç³»ç»Ÿå¯¹I/Oè®¾å¤‡çš„ä¸€ç§ç®¡ç†æ–¹å¼ï¼Œå®ƒå®šæ—¶å¯¹å„ç§è®¾å¤‡è½®æµè¯¢é—®ä¸€éæœ‰æ— å¤„ç†è¦æ±‚ã€‚è½®è¯¢å æ®äº†CPUç›¸å½“ä¸€éƒ¨åˆ†å¤„ç†æ—¶é—´ï¼Œå› æ­¤ï¼Œç¨‹åºè½®è¯¢æ˜¯ä¸€ç§æ•ˆçŽ‡è¾ƒä½Žçš„æ–¹å¼ï¼Œåœ¨çŽ°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­å·²ç»å¾ˆå°‘åº”ç”¨ ä¸­æ–­ï¼šä¸­æ–­æ˜¯æŒ‡CPUåœ¨æ­£å¸¸è¿è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œç”±äºŽå‘ç”Ÿçš„å†…éƒ¨æˆ–å¤–éƒ¨çš„ç‰¹å®šçš„äº‹ä»¶ï¼Œä½¿å¾—CPUä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œè€Œè½¬åˆ°å“åº”çš„æœåŠ¡ç¨‹åºåŽ»å¤„ç† ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œå¦‚ä½•è§£å†³å†²çªæ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µç¨‹åºç§°ä¸ºä¸´ç•ŒåŒºï¼Œæ¯æ¬¡åªå‡†è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œè¿›å…¥åŽä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥ è§£å†³å†²çªçš„æ–¹æ³•ï¼š å¦‚æžœæœ‰è‹¥å¹²ä¸ªè¿›ç¨‹è¦æ±‚è¿›å…¥ç©ºé—²çš„ä¸´ç•ŒåŒºï¼Œä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ ä»»ä½•æ—¶å€™ï¼Œå¤„äºŽä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹ä¸å¯ä»¥å¤šäºŽä¸€ä¸ªï¼Œå¦‚æžœå·²ç»æœ‰è¿›ç¨‹è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™å…¶ä»–æ‰€æœ‰è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾… è¿›å…¥ä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹è¦åœ¨æœ‰é™æ—¶é—´å†…é€€å‡ºï¼Œä»¥ä¾¿å…¶å®ƒè¿›ç¨‹èƒ½åŠæ—¶è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒº å¦‚æžœè¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºï¼Œåˆ™åº”è¯¥è®©å‡ºCPUï¼Œé¿å…è¿›ç¨‹å‡ºçŽ°â€œå¿™ç¢Œâ€çŽ°è±¡ã€‚windowsä¸‹å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„windowsæ“çºµå†…å­˜å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå±‚é¢ï¼Œç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ã€‚ è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­) æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼‰ï¼šç»™æ¯ä¸ªè¿›ç¨‹å›ºå®šçš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåŽé¡ºåºè®©è¿›ç¨‹åœ¨å•ä½æ—¶é—´ç‰‡å†…æ‰§è¡Œï¼Œæ‰§è¡Œå®ŒæˆåŽä¾¿è°ƒåº¦ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ä¸è€ƒè™‘è¿›ç¨‹ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œå±žäºŽæŠ¢å å¼è°ƒåº¦ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼›ç¼ºç‚¹æ˜¯å¹³å‡ç­‰å¾…æ—¶é—´è¾ƒé•¿ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢è¾ƒè´¹æ—¶ã€‚é€‚ç”¨äºŽåˆ†æ—¶ç³»ç»Ÿã€‚ å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼ˆFCFSï¼‰ï¼šæ ¹æ®è¿›ç¨‹åˆ°è¾¾çš„å…ˆåŽé¡ºåºæ‰§è¡Œè¿›ç¨‹ï¼Œä¸è€ƒè™‘ç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´ï¼Œä¼šäº§ç”Ÿé¥¥é¥¿çŽ°è±¡ã€‚å±žäºŽéžæŠ¢å å¼è°ƒåº¦ï¼Œä¼˜ç‚¹æ˜¯å…¬å¹³ï¼Œå®žçŽ°ç®€å•ï¼›ç¼ºç‚¹æ˜¯ä¸åˆ©äºŽçŸ­ä½œä¸šã€‚ ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆHPFï¼‰ï¼šåœ¨è¿›ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„æ¥æ‰§è¡Œã€‚ å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼šå°†æ—¶é—´ç‰‡è½®è½¬ä¸Žä¼˜å…ˆçº§è°ƒåº¦ç›¸ç»“åˆï¼ŒæŠŠè¿›ç¨‹æŒ‰ä¼˜å…ˆçº§åˆ†æˆä¸åŒçš„é˜Ÿåˆ—ï¼Œå…ˆæŒ‰ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä¼˜å…ˆçº§ç›¸åŒçš„ï¼ŒæŒ‰æ—¶é—´ç‰‡è½®è½¬ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œæœ‰è¾ƒå¥½çš„å“åº”æ—¶é—´ï¼Œå¯è¡Œæ€§å¼ºï¼Œé€‚ç”¨äºŽå„ç§ä½œä¸šçŽ¯å¢ƒã€‚ é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼šæ ¹æ®â€œå“åº”æ¯”=ï¼ˆè¿›ç¨‹æ‰§è¡Œæ—¶é—´+è¿›ç¨‹ç­‰å¾…æ—¶é—´ï¼‰/ è¿›ç¨‹æ‰§è¡Œæ—¶é—´â€è¿™ä¸ªå…¬å¼å¾—åˆ°çš„å“åº”æ¯”æ¥è¿›è¡Œè°ƒåº¦ã€‚é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•åœ¨ç­‰å¾…æ—¶é—´ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä½œä¸šæ‰§è¡Œçš„æ—¶é—´è¶ŠçŸ­ï¼Œå“åº”æ¯”è¶Šé«˜ï¼Œæ»¡è¶³æ®µä»»åŠ¡ä¼˜å…ˆï¼ŒåŒæ—¶å“åº”æ¯”ä¼šéšç€ç­‰å¾…æ—¶é—´å¢žåŠ è€Œå˜å¤§ï¼Œä¼˜å…ˆçº§ä¼šæé«˜ï¼Œèƒ½å¤Ÿé¿å…é¥¥é¥¿çŽ°è±¡ã€‚ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œç¼ºç‚¹æ˜¯è®¡ç®—å“åº”æ¯”å¼€é”€å¤§ï¼Œé€‚ç”¨äºŽæ‰¹å¤„ç†ç³»ç»Ÿã€‚ è¿›ç¨‹è°ƒåº¦ç®—æ³•(é•¿ä¸­çŸ­) é•¿ç¨‹è°ƒåº¦ï¼ŒæŠŠä½œä¸šåŽèƒŒé˜Ÿåˆ—è°ƒå…¥å†…å­˜ï¼Œåˆç§°ä¸ºä½œä¸šè°ƒåº¦æˆ–é«˜çº§è°ƒåº¦ï¼Œè¿™ç§è°ƒåº¦å°†å·²è¿›å…¥ç³»ç»Ÿå¹¶å¤„äºŽåŽå¤‡çŠ¶æ€çš„ä½œä¸šæŒ‰æŸç§ç®—æ³•é€‰æ‹©ä¸€ä¸ªæˆ–ä¸€æ‰¹ï¼Œä¸ºå…¶å»ºç«‹è¿›ç¨‹ï¼Œå¹¶è¿›å…¥ä¸»æœºï¼Œå½“è¯¥ä½œä¸šæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¿˜è´Ÿè´£å›žæ”¶ç³»ç»Ÿèµ„æºï¼Œåœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œéœ€è¦æœ‰ä½œä¸šè°ƒåº¦çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å°†å®ƒä»¬åˆ†æ‰¹åœ°è£…å…¥å†…å­˜ï¼Œåœ¨åˆ†æ—¶ç³»ç»Ÿå’Œå®žæ—¶ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸éœ€è¦é•¿æœŸè°ƒåº¦ã€‚å®ƒçš„é¢‘çŽ‡æ¯”è¾ƒä½Žï¼Œä¸»è¦ç”¨æ¥æŽ§åˆ¶å†…å­˜ä¸­è¿›ç¨‹çš„æ•°é‡ã€‚ ä¸­ç¨‹è°ƒåº¦ï¼Œå†…å¤–å­˜é˜»å¡žè¿›ç¨‹æ¥å›žåˆ‡æ¢ï¼Œåˆç§°ä¸ºäº¤æ¢è°ƒåº¦ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯èƒ½å°†è¿›ç¨‹ä»Žå†…å­˜æˆ–ä»ŽCPUç«žäº‰ä¸­ç§»å‡ºï¼Œä»Žè€Œé™ä½Žå¤šé“ç¨‹åºè®¾è®¡çš„ç¨‹åº¦ï¼Œä¹‹åŽè¿›ç¨‹èƒ½è¢«é‡æ–°è°ƒå…¥å†…å­˜ï¼Œå¹¶ä»Žä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œï¼Œè¿™ç§äº¤æ¢çš„***ä½œå¯ä»¥è°ƒæ•´è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„å­˜åœ¨æ•°é‡å’Œæ—¶æœºã€‚å…¶ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§ç»™å®šçš„åŽŸåˆ™å’Œç­–ç•¥ï¼Œå°†å¤„äºŽå¤–å­˜äº¤æ¢åŒºä¸­çš„å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹è°ƒå…¥å†…å­˜ï¼Œæˆ–æŠŠå¤„äºŽå†…å­˜å°±ç»ªçŠ¶æ€æˆ–å†…å­˜ç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹äº¤æ¢åˆ°å¤–å­˜äº¤æ¢åŒºã€‚ çŸ­ç¨‹è°ƒåº¦ï¼ŒæŠŠè¿›ç¨‹åˆ†é…ç»™CPUæ‰§è¡Œã€‚åˆç§°ä¸ºè¿›ç¨‹è°ƒåº¦ã€ä½Žçº§è°ƒåº¦æˆ–å¾®è§‚è°ƒåº¦ã€‚è¿™ä¹Ÿæ˜¯é€šå¸¸æ‰€è¯´çš„è°ƒåº¦ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯çŸ­æœŸè°ƒåº¦ã€‚å®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§æŸç§ç­–ç•¥å’Œç®—æ³•å°†å¤„ç†æœºåˆ†é…ç»™ä¸€ä¸ªå¤„äºŽå°±ç»ªçŠ¶æ€çš„è¿›ç¨‹ï¼Œåˆ†ä¸ºæŠ¢å å¼å’ŒéžæŠ¢å å¼ã€‚ å¯ä»¥ä»Žä¸‹å›¾ä¸­æ¸…æ™°çš„çœ‹åˆ°è¿™äº›è°ƒåº¦ä¹‹é—´çš„åŒºåˆ«ã€‚ ç£ç›˜å¯»é“ç®—æ³• å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•ï¼ˆFCFSï¼‰First Come First Service è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ç£ç›˜è°ƒåº¦ç®—æ³•ã€‚å®ƒæ ¹æ®è¿›ç¨‹è¯·æ±‚è®¿é—®ç£ç›˜çš„å…ˆåŽæ¬¡åºè¿›è¡Œè°ƒåº¦ã€‚æ­¤ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å…¬å¹³ã€ç®€å•ï¼Œä¸”æ¯ä¸ªè¿›ç¨‹çš„è¯·æ±‚éƒ½èƒ½ä¾æ¬¡å¾—åˆ°å¤„ç†ï¼Œä¸ä¼šå‡ºçŽ°æŸä¸€è¿›ç¨‹çš„è¯·æ±‚é•¿æœŸå¾—ä¸åˆ°æ»¡è¶³çš„æƒ…å†µã€‚æ­¤ç®—æ³•ç”±äºŽæœªå¯¹å¯»é“è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨å¯¹ç£ç›˜çš„è®¿é—®è¯·æ±‚æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ­¤ç®—æ³•å°†é™ä½Žè®¾å¤‡æœåŠ¡çš„åžåé‡ï¼Œè‡´ä½¿å¹³å‡å¯»é“æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œä½†å„è¿›ç¨‹å¾—åˆ°æœåŠ¡çš„å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦è¾ƒå°ã€‚åœ¨å•ç”¨æˆ·ç³»ç»ŸçŽ¯å¢ƒä¸­ï¼ŒI/Oé˜Ÿåˆ—çš„é•¿åº¦é€šå¸¸ä¸º1ï¼Œå› æ­¤ï¼Œå…ˆæ¥å…ˆæœåŠ¡FCFSç®—æ³•æ˜¯æœ€ç»æµŽå®žæƒ çš„ç£ç›˜è°ƒåº¦ç®—æ³•. å…ˆæ¥å…ˆæœåŠ¡ ï¼ˆ125ï¼‰86.147.91.177.94.150.102.175.130 æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSSTFï¼‰ Shortest Seek Time First è¯¥ç®—æ³•é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹ï¼Œå…¶è¦æ±‚è®¿é—®çš„ç£é“ä¸Žå½“å‰ç£å¤´æ‰€åœ¨çš„ç£é“è·ç¦»æœ€è¿‘ï¼Œä»¥ä½¿æ¯æ¬¡çš„å¯»é“æ—¶é—´æœ€çŸ­ï¼Œè¯¥ç®—æ³•å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¥½çš„åžåé‡ï¼Œä½†å´ä¸èƒ½ä¿è¯å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚å…¶ç¼ºç‚¹æ˜¯å¯¹ç”¨æˆ·çš„æœåŠ¡è¯·æ±‚çš„å“åº”æœºä¼šä¸æ˜¯å‡ç­‰çš„ï¼Œå› è€Œå¯¼è‡´å“åº”æ—¶é—´çš„å˜åŒ–å¹…åº¦å¾ˆå¤§ã€‚åœ¨æœåŠ¡è¯·æ±‚å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå¯¹å†…å¤–è¾¹ç¼˜ç£é“çš„è¯·æ±‚å°†ä¼šæ— é™æœŸçš„è¢«å»¶è¿Ÿï¼Œæœ‰äº›è¯·æ±‚çš„å“åº”æ—¶é—´å°†ä¸å¯é¢„æœŸã€‚æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆï¼ˆ125ï¼‰130.147.150.175.177.102.94.91.86 æ‰«æç®—æ³•ï¼ˆSCANï¼‰ç”µæ¢¯è°ƒåº¦ æ‰«æç®—æ³•ä¸ä»…è€ƒè™‘åˆ°æ¬²è®¿é—®çš„ç£é“ä¸Žå½“å‰ç£é“çš„è·ç¦»ï¼Œæ›´ä¼˜å…ˆè€ƒè™‘çš„æ˜¯ç£å¤´çš„å½“å‰ç§»åŠ¨æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œå½“ç£å¤´æ­£åœ¨è‡ªé‡Œå‘å¤–ç§»åŠ¨æ—¶ï¼Œæ‰«æç®—æ³•æ‰€é€‰æ‹©çš„ä¸‹ä¸€ä¸ªè®¿é—®å¯¹è±¡åº”æ˜¯å…¶æ¬²è®¿é—®çš„ç£é“æ—¢åœ¨å½“å‰ç£é“ä¹‹å¤–ï¼Œåˆæ˜¯è·ç¦»æœ€è¿‘çš„ã€‚è¿™æ ·è‡ªé‡Œå‘å¤–åœ°è®¿é—®ï¼Œç›´åˆ°å†æ— æ›´å¤–çš„ç£é“éœ€è¦è®¿é—®æ‰å°†ç£è‡‚æ¢å‘ï¼Œè‡ªå¤–å‘é‡Œç§»åŠ¨ã€‚è¿™æ—¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ¯æ¬¡é€‰æ‹©è¿™æ ·çš„è¿›ç¨‹æ¥è°ƒåº¦ï¼Œå³å…¶è¦è®¿é—®çš„ç£é“ï¼Œåœ¨å½“å‰ç£é“ä¹‹å†…ï¼Œä»Žè€Œé¿å…äº†é¥¥é¥¿çŽ°è±¡çš„å‡ºçŽ°ã€‚ç”±äºŽè¿™ç§ç®—æ³•ä¸­ç£å¤´ç§»åŠ¨çš„è§„å¾‹é¢‡ä¼¼ç”µæ¢¯çš„è¿è¡Œï¼Œæ•…åˆç§°ä¸ºç”µæ¢¯è°ƒåº¦ç®—æ³•ã€‚æ­¤ç®—æ³•åŸºæœ¬ä¸Šå…‹æœäº†æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„æœåŠ¡é›†ä¸­äºŽä¸­é—´ç£é“å’Œå“åº”æ—¶é—´å˜åŒ–æ¯”è¾ƒå¤§çš„ç¼ºç‚¹ï¼Œè€Œå…·æœ‰æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•çš„ä¼˜ç‚¹å³åžåé‡è¾ƒå¤§ï¼Œå¹³å‡å“åº”æ—¶é—´è¾ƒå°ï¼Œä½†ç”±äºŽæ˜¯æ‘†åŠ¨å¼çš„æ‰«ææ–¹æ³•ï¼Œä¸¤ä¾§ç£é“è¢«è®¿é—®çš„é¢‘çŽ‡ä»ä½ŽäºŽä¸­é—´ç£é“ã€‚ç”µæ¢¯è°ƒåº¦ï¼ˆ125ï¼‰102.94.91.86.130.147.150.175.177 å¾ªçŽ¯æ‰«æç®—æ³•ï¼ˆCSCANï¼‰ å¾ªçŽ¯æ‰«æç®—æ³•æ˜¯å¯¹æ‰«æç®—æ³•çš„æ”¹è¿›ã€‚å¦‚æžœå¯¹ç£é“çš„è®¿é—®è¯·æ±‚æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œå½“ç£å¤´åˆ°è¾¾ç£ç›˜çš„ä¸€ç«¯ï¼Œå¹¶åå‘è¿åŠ¨æ—¶è½åœ¨ç£å¤´ä¹‹åŽçš„è®¿é—®è¯·æ±‚ç›¸å¯¹è¾ƒå°‘ã€‚è¿™æ˜¯ç”±äºŽè¿™äº›ç£é“åˆšè¢«å¤„ç†ï¼Œè€Œç£ç›˜å¦ä¸€ç«¯çš„è¯·æ±‚å¯†åº¦ç›¸å½“é«˜ï¼Œä¸”è¿™äº›è®¿é—®è¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ï¼Œä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œå¾ªçŽ¯æ‰«æç®—æ³•è§„å®šç£å¤´å•å‘ç§»åŠ¨ã€‚ä¾‹å¦‚ï¼Œåªè‡ªé‡Œå‘å¤–ç§»åŠ¨ï¼Œå½“ç£å¤´ç§»åˆ°æœ€å¤–çš„è¢«è®¿é—®ç£é“æ—¶ï¼Œç£å¤´ç«‹å³è¿”å›žåˆ°æœ€é‡Œçš„æ¬²è®¿ç£é“ï¼Œå³å°†æœ€å°ç£é“å·ç´§æŽ¥ç€æœ€å¤§ç£é“å·æž„æˆå¾ªçŽ¯ï¼Œè¿›è¡Œæ‰«æã€‚å¾ªçŽ¯æ‰«æ ï¼ˆ125ï¼‰130.147.150.175.177.86.91.94.102 å­¸é•·ç­†è¨˜é€£çµ https://kim85326.github.io/2018/01/09/CH6-%E8%A1%8C%E7%A8%8B%E6%8E%92%E7%8F%AD-(Process-Scheduling)/ä¿¡è™Ÿ https://kim85326.github.io/2018/01/10/CH10-%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-(File-System)/ æª”æ¡ˆç³»çµ±https://kim85326.github.io/2018/01/09/CH8-%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Memory-Management-Strategies)/è¨˜æ†¶é«”ç®¡ç† https://kim85326.github.io/2018/01/09/CH9-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94%E7%AE%A1%E7%90%86-(Virtual-Memory-Management)/è™›æ“¬è¨˜æ†¶è£¡ lru]]></content>
      <tags>
        <tag>Operation System</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SDN_OpenFlow]]></title>
    <url>%2F2019%2F11%2F06%2FSDN-OpenFlow%2F</url>
    <content type="text"><![CDATA[107 SDNa10715005 ä»»å‰Boot onosproject Configuration Json file and Create Topo using command line å·²ç¶“è§£æ±ºONOS GUIä¸­çš„topology Ping æˆåŠŸçš„ç•«é¢ Switch s3çš„forwarding table é‚„æ²’æœ‰è§£æ±ºh1 ping h2ç”¢ç”Ÿæœ‰å…©æ¢è·¯å¾‘çš„topology è®“ping packetèµ°è¼ƒé•·çš„è·¯å¾‘ åŽŸæ¥æ˜¯ çŽ°åœ¨æƒ³è®©ä»–å˜æˆ Pre-requisites:VirtualBox Configuration:JDK Configuration in Ubuntu Install ONOS on Ubuntu Using Linux command:modification file in Linux gedit Reference: Basic ONOS Tutorial OpenFlow]]></content>
      <tags>
        <tag>ONOS OpenFlow SDN</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CV]]></title>
    <url>%2F2019%2F11%2F05%2FCV%2F</url>
    <content type="text"><![CDATA[pix2pixHDç°¡ä»‹ â€” High-Resolution Image Synthesis and Semantic Manipulation with Conditional GANs ã€ç†Ÿè‚‰ã€‘çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - 01 - å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ Machine-Learning-Notes]]></content>
  </entry>
  <entry>
    <title><![CDATA[108FALL]]></title>
    <url>%2F2019%2F10%2F18%2F108FALL%2F</url>
    <content type="text"><![CDATA[CS5095701 Advanced Database Systems CourseInfo PrensentationSlides 11/15 Proposal presentation (all 14 groups) 11/22 Mid-term exam 11/29 paper presentation (4 groups)(sequence 1~4) Project proposal:You are required to propose a database related research project in this course. You are encouraged to have a publication as a goal for your project. A list of project ideas is listed below. You proposal should include the following aspects: importance of the proposed project your algorithm and ideas main contributions the design of the software you propose to build how you propose to evaluate your ideas the design of the experiments literature survey You will present to the class about your proposal (~ 5 minutes) and write a proposal report (2~4 pages in IEEE format).CS5014701 é›»è…¦èˆ‡æ©Ÿå™¨äººè¦–è¦º Computer and Robot Vision Everybody Dance NOW Joint Discriminative and Generative Learning for Person Re-identification CS5146701 è™›æ“¬åŒ–ç¶²è·¯åŠæ‡‰ç”¨ Virtualized Networks and Applications Proposal Catch up from Flicknetwork virtualization CS5023701 Knowledge-Based SystemsRevisit Fuzzy Neural Network: Demystifying Batch Normalization and ReLU with Generalized Hamming Network CS5141701 æ·±åº¦å­¸ç¿’å°Žè«–åŠå…¶æ‡‰ç”¨ Introduction to Deep Learning and Its ApplicationsHung-yi Leeâ€™S CourseInfo æŽå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°(LeeML-Notes) ã€è²¡é‡‘å­¸ç¨‹ã€‘FBG006301 å“ç‰Œåƒ¹å€¼å‰µæ–°è¬›åº§ Seminar on Brand Value InnovationæŸ¯é”ä¼æ¥­å¤±æ•—å€‹æ¡ˆåˆ†æž TCG037301 è¦ªè¿‘ç¶“å…¸æ™ºæ…§ Wisdom in Classicsç•œç‰§æ¥­çš„é™°è¬€]]></content>
  </entry>
  <entry>
    <title><![CDATA[Recommend System]]></title>
    <url>%2F2019%2F10%2F03%2FRecommend-System%2F</url>
    <content type="text"><![CDATA[http://wepon.me/ pkuhttps://coladrill.github.io/about/ seuhttps://github.com/ColaDrill/2018spa æŽ¨èç³»ç»Ÿ https://www.zhihu.com/people/coladrill/activitiesæŽ¨èç³»ç»Ÿ å¿…çœ‹ æ‰‹å†™xgboost Special ProjectsPreviousThe Uni require all the undergraduate student to reach out the Special Projects. Mission:Recommend systems based on the Collaborative Filtering Reference: Reinforcement Spinning Up Introduction to Deep Learning STAT 157, UC Berkeley, Spring, 2019Reference By åœ¨ä¼¯å…‹åˆ©æ•™æ·±åº¦å­¦ä¹  Talk in Mandarin Intro CNN Elegant in code, simple in core IEEE International Conference on Signal, Information and Data Processing 2019Automatic Digital Recognition of Multiple Electricity Dashboards, (accepted) [EI]]]></content>
  </entry>
  <entry>
    <title><![CDATA[108_FALL]]></title>
    <url>%2F2019%2F09%2F28%2FPrepare4Interview%2F</url>
    <content type="text"><![CDATA[è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿ ä¸€ä¸ªæµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼šæŠŠæ‰€æœ‰æµç¨‹è¿žèµ·æ¥æŠŠæƒ³åˆ°çš„çŸ¥è¯†æ¢³ç†ä¸€éï¼Œhttpä¼ è¾“ï¼Œjsonè§£æžï¼Œtomcatæ”¶åˆ°è¯·æ±‚ï¼Œ springmvcè§£æžè¯·æ±‚ï¼Œ ä¼ ç»™æœåŠ¡å±‚ï¼Œ è¯·æ±‚æ•°æ®åº“ï¼Œ æŸ¥è¯¢æ•°æ®åº“ï¼Œ æ•°æ®åº“æŸ¥æ‰¾ç´¢å¼•ï¼Œæ•°æ®åº“è¿”å›žæ•°æ®ã€‚ ç¡¬ç›˜è½¬é€Ÿå’Œæ–‡ä»¶ç³»ç»Ÿè¯»å†™é€Ÿåº¦çš„å…³ç³» åŠ å¯†ä¸ºä»€ä¹ˆä¸ç”¨https ä¹ç« ç®—æ³• ã€ŠJavaå…¥é—¨ä¸ŽåŸºç¡€ç®—æ³•ç­ã€‹ Javaè¯­è¨€åŸºç¡€ï¼šæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œå‡½æ•°ï¼Œç±»ï¼Œå¯¹è±¡ï¼Œå¼•ç”¨ Javaç®—æ³•åŸºç¡€ï¼š æžšä¸¾æ³•ï¼Œè´ªå¿ƒæ³•ï¼Œé€’å½’ï¼Œé“¾è¡¨ï¼Œæ ˆï¼Œæ ‘ï¼Œé€’å½’ï¼Œå“ˆå¸Œè¡¨ï¼ŒæŽ’åº é—®é¢˜ç±»åž‹ æ“ä½œç³»ç»Ÿï¼šï¼ˆæ‰¾æ‰‹æœºç›¸å†Œé‡Œé¢çš„å›¾ç‰‡ï¼‰ ç´ è´¨æµ‹è¯•æ•°å­—æŽ¨ç†å’Œå›¾å½¢æŽ¨ç†å­—ç¬¦ä¸²æŽ’é‡å¹¶æŽ’åº ä¸“ä¸šæµ‹è¯•ç®—æ³•ä¸€çº§ä¸­è¯dijkstralruç¼“å­˜æœºåˆ¶ ç®—æ³•ä¹Ÿå¯ä»¥è€ƒç³»ç»Ÿè®¾è®¡é“¾è¡¨æŽ’åºlruå¦‚ä½•ä¿è¯o1çš„æŸ¥æ‰¾å’Œä¿®æ”¹ å¤©å“¥é¢è¯•ï¼šï¼ˆå¿…ä¼šï¼‰ 1:å†™ä¸€ä¸ªäºŒå‰æ ‘çš„å±‚æ¬¡éåŽ†æˆ–è€…é“¾è¡¨çš„å–ä¸­å¿ƒç‚¹+æŠŠé“¾è¡¨ä¸­å¿ƒç‚¹åŽçš„éƒ¨åˆ†åè½¬ 2:å¿«é€ŸæŽ’åºå’ŒäºŒåˆ†å½’å¹¶æŽ’åºæœ‰ä»€ä¹ˆä¸åŒï¼Œæœ€åå’Œå¹³å‡æ—¶é—´å¤æ‚åº¦åˆ†åŠæ˜¯å¤šå°‘ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œé™¤äº†æ—¶é—´ç‰‡è½®è½¬æ³•å¤–ï¼Œä½ è¿˜çŸ¥é“ä»€ä¹ˆè¿›ç¨‹è°ƒåº¦ç®—æ³• çº¿ç¨‹æŒæœ‰é”çš„å˜é‡æ—¶ï¼Œçº¿ç¨‹è¢«åˆ‡æ¢äº†ï¼ˆè‹¥åªæœ‰cpuæ—¶é—´ç‰‡åˆ°äº†çš„è¯ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œä¸ç„¶ä¹Ÿå°±ä¸å­˜åœ¨æ­»é”é—®é¢˜äº†ï¼‰ï¼Œé”ä¼šè¢«é‡Šæ”¾å—ï¼Ÿä¸ä¼šï¼Œè¿›ç¨‹é‡Šæ”¾æ‰€æœ‰èµ„æºï¼Œçº¿ç¨‹ä¸ä¼šï¼Œ Javaå®žçŽ°b+æ ‘ï¼Œé“¾è¡¨å’Œæ ˆï¼Œéœå¤«æ›¼ã€‚ï¼ˆJavaé›†åˆçš„åº•å±‚å®žçŽ°ï¼‰hashmap dpå’Œå†™æ­£åˆ™ é€»è¾‘å›žå½’å’Œsvméƒ½å¯ä»¥ç”¨æ¥ä½œäºŒåˆ†ç±»ï¼Œä»–ä»¬çš„lost functionæœ‰ä»€ä¹ˆä¸åŒ å†™ä¸€ä¸ªdnnæˆ–è€…çº¿æ€§å›žå½’çš„åå‘ä¼ æ’­ç®—æ³•çš„æŽ¨å¯¼ svmä¸­æ ¸å‡½æ•°èµ·åˆ°çš„ä½œç”¨ï¼Œ ä¿¡æ¯å¢žç›Šæ˜¯æ€Žä¹ˆç”¨äºŽå†³ç­–æ ‘ä¸­çš„ç‰¹å¾é€‰æ‹© pcaçš„åŽŸç†æ˜¯ä»€ä¹ˆ cnnä¸­çš„resnetä¸­çš„resæŒ‡ä»€ä¹ˆ depthwiseæœ‰ä»€ä¹ˆå¥½å¤„ è®¡ç®—ä¸€ä¸‹ä¸€ä¸ªcnnå·ç§¯ä¸€æ¬¡çš„è®¡ç®—é‡ ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•° äºŒçº§ä¸­è¯çº¢é»‘æ ‘ï¼Œå¹³è¡¡æ ‘ï¼Œb+æ ‘ï¼Œè·³è·ƒè¡¨ JavaåŸºç¡€ åŸºç¡€æ•°æ®ç±»åž‹ protectedä¿®é¥°ç¬¦ æŠ½è±¡ç±»å’ŒæŽ¥å£åŒºåˆ« Javaå†…å­˜ç»“æž„ï¼ˆé‡è¦ï¼‰ Javaå¹¶å‘å’Œçº¿ç¨‹åŒæ­¥ã€‚åŒæ­¥æœºåˆ¶å’Œé”è§£é‡Šä¸€ä¸‹ synchronizedå’ŒlockåŒºåˆ« ç±»ï¼Œç»§æ‰¿ï¼Œå¤šæ€çš„æ¦‚å¿µ è®¾è®¡çˆ¬è™«ï¼Œä½ éœ€è¦è®¾è®¡ä»€ä¹ˆ wait()å’Œsleep(åŒºåˆ«) å¤šçº¿ç¨‹çš„ç†è§£ hashtableå’ŒhashmapåŒºåˆ« synchronizedå¦‚ä½•ä¿è¯åŽŸå­æ€§ï¼šmonitor ï¼Œç»§ç»­æ·±å…¥ï¼šå¦‚ä½•ä¿è¯è¯»å–å¯¹è±¡å¤´å’Œä¿®æ”¹å¯¹è±¡å¤´çš„åŽŸå­æ€§* è®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼ï¼šæ‰‹ç”»ä»£ç†æ¨¡å¼ æ•°æ®åº“äº‹åŠ¡ä¸€å®šä¼šé”è¡¨å— é¡¹ç›®æ‰¾åˆ°ä¸€ä¸ªç—›ç‚¹ éš¾ç‚¹ï¼šï¼ˆç‰¹è‰²æ¨¡å—ï¼‰ï¼šå•ç‚¹ç™»å½•ï¼Œå…¨å±€æœç´¢ï¼ˆæœå…³é”®å­—ï¼Œå¿«é€Ÿæ‰¾åˆ°ï¼‰ åŽä¸º 6ä¸ªæ•°æ‰¾å‡ºé‡Œé¢æœ€å¤§çš„ä¸¤ä¸ªæ•° ä¸€ä¸ªå››åˆ™è¿ç®—å­—ç¬¦ä¸²å†™ç¨‹åºè¿ç®—å‡ºç»“æžœ]]></content>
      <tags>
        <tag>Algorithms</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Computer Networks]]></title>
    <url>%2F2019%2F08%2F28%2FComputer-Networkds%2F</url>
    <content type="text"><![CDATA[##è®¡ç®—æœºç½‘ç»œå¸¸è§é¢è¯•é¢˜ ç»å…¸é¢è¯•é¢˜ï¼šä»Ž URL è¾“å…¥åˆ°é¡µé¢å±•çŽ°åˆ°åº•å‘ç”Ÿä»€ä¹ˆä¹‹ä¼šè¯é¡ºåºï¼Ÿ æ¶‰åŠåˆ°çš„åè®®(1) åº”ç”¨å±‚ï¼šHTTP(WWWè®¿é—®åè®®)ï¼ŒDNS(åŸŸåè§£æžæœåŠ¡) (2) ä¼ è¾“å±‚ï¼šTCP(ä¸ºHTTPæä¾›å¯é çš„æ•°æ®ä¼ è¾“)ï¼ŒUDP(DNSä½¿ç”¨UDPä¼ è¾“) (3) ç½‘ç»œå±‚ï¼šIP(IPæ•°æ®æ•°æ®åŒ…ä¼ è¾“å’Œè·¯ç”±é€‰æ‹©)ï¼ŒICMP(æä¾›ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å·®é”™æ£€æµ‹)ï¼ŒARP(å°†æœ¬æœºçš„é»˜è®¤ç½‘å…³IPåœ°å€æ˜ å°„æˆç‰©ç†MACåœ°å€) ä»Ž URL è¾“å…¥åˆ°é¡µé¢å±•çŽ°åˆ°åº•å‘ç”Ÿä»€ä¹ˆä¹‹åˆ†å¸ƒå¼DNSåŽŸç†åŠè§£æžé¡ºåºï¼Œæµè§ˆå™¨å¦‚ä½•é€šè¿‡åŸŸååŽ»æŸ¥è¯¢ URL å¯¹åº”çš„ IP è·¯ç”±å™¨æ˜¯ä¸€ç§ä¸‰å±‚è®¾å¤‡ï¼Œä¸»è¦ä½¿ç”¨ipåœ°å€è¿›è¡Œç½‘é—´è·¯ç”±æŸ¥è¯¢ä¸ŽipåŒ…çš„è½¬å‘ã€‚è€Œäº¤æ¢æœºæ˜¯ä¸€ç§äºŒå±‚è®¾å¤‡ï¼Œä½¿ç”¨MACåœ°å€è¿›è¡Œå¯»å€ï¼Œå®žçŽ°ä¸€ä¸ªç½‘ç»œå†…çš„æ•°æ®å¸§çš„è½¬å‘ã€‚Aç±»ç½‘ç»œä¸º1åˆ°126Bç±»ç½‘ç»œä¸º129åˆ°191Cç±»ç½‘ç»œä¸º192åˆ°223IPV4æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€ï¼Œç”¨4ä¸ªåè¿›åˆ¶æ•°å­—è¡¨ç¤ºã€‚ä»¥Cç±»åœ°å€192.168.24.1ä¸ºä¾‹ï¼Œå…¶ä¸­å‰24ä½æ˜¯ç½‘ç»œåœ°å€ï¼ŒåŽ8ä½æ˜¯ä¸»æœºåœ°å€ã€‚å¦‚æžœä¸¤ä¸ªIPåœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘å†…ï¼Œåˆ™ç½‘ç»œåœ°å€ä¸€å®šç›¸åŒã€‚ æœºå™¨Açš„ipåœ°å€ä¸º 202.96.128.130ï¼Œå­ç½‘æŽ©ç ä¸º255.255.255.128ï¼Œåˆ™IPåœ°å€çš„ç½‘ç»œå·ä¸º202.96.128ï¼Œä¸»æœºå·ä¸º130 äºŒå±‚äº¤æ¢æœºå·¥ä½œäºŽOSIæ¨¡åž‹çš„ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚ï¼ˆç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ï¼‰ï¼Œå®ƒå¯ä»¥è¯†åˆ«æ•°æ®åŒ…ä¸­çš„MACåœ°å€ä¿¡æ¯ï¼Œæ ¹æ®MACåœ°å€è¿›è¡Œè½¬å‘ï¼Œå¹¶å°†è¿™å†™åœ°å€ä¸Žå¯¹åº”çš„è¿žæŽ¥ç«¯å£è®°å½•åœ¨è‡ªå·±å†…éƒ¨çš„ä¸€ä¸ªåœ°å€è¡¨ä¸­ã€‚ ä¸‰å±‚äº¤æ¢æœºï¼ˆè·¯ç”±å™¨ï¼‰ä¸‰å±‚äº¤æ¢æœºå·¥ä½œäºŽOSIæ¨¡åž‹ä¸­çš„ç¬¬ä¸‰å±‚ç½‘ç»œå±‚ï¼Œä¸»è¦ç›®çš„æ˜¯åŠ å¿«å¤§åž‹å±€åŸŸç½‘å†…éƒ¨çš„æ•°æ®äº¤æ¢ã€‚äºŒå±‚äº¤æ¢æœºæ˜¯æ ¹æ®MACåœ°å€è¿›è¡Œå¤„ç†æ•°æ®ï¼Œ ä¸‰å±‚äº¤æ¢æœºæ˜¯æ ¹æ®IPåœ°å€è¿›è¡Œå¤„ç†æ•°æ® å­ç½‘æŽ©ç ï¼šå­ç½‘æŽ©ç åªæœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯å°†æŸä¸ªIPåœ°å€åˆ’åˆ†æˆç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†.é€šè¿‡ANDæŒ‰ä½ä¸Žè¿ç®—å³å¯ç¡®å®šã€‚ DNSæ˜¯åº”ç”¨å±‚åè®® ç½‘å…³æ˜¯ä»Žä¸€ä¸ªç½‘ç»œåˆ°å¦ä¸€ä¸ªç½‘ç»œçš„å…³å£ï¼Œæˆ–è€…è¯´æ˜¯ä»Žä¸€ä¸ªç½‘ç»œé€šå‘å…¶ä»–ç½‘ç»œçš„IPåœ°å€ã€‚æ¯”å¦‚æœ‰ç½‘ç»œAå’Œç½‘ç»œBï¼ŒAçš„IPèŒƒå›´192.168.1.1 ~ 192.168.1.254ï¼Œå­ç½‘æŽ©ç 255.255.255.0ï¼ŒBçš„IPèŒƒå›´æ˜¯192.168.2.1 ~ 192.168.2.254ï¼Œå­ç½‘æŽ©ç ä¸º255.255.255.0.åœ¨æ²¡æœ‰è·¯ç”±å™¨çš„æƒ…å†µä¸‹ï¼ŒAç½‘ç»œå’ŒBç½‘ç»œæ˜¯ä¸èƒ½è¿›è¡ŒTCPï¼ŸIPé€šä¿¡çš„ã€‚TCP/IPåè®®ä¼šåˆ¤å®šä¸¤ä¸ªç½‘ç»œä¸­çš„ä¸»æœºå±žäºŽä¸åŒçš„ç½‘ç»œã€‚å¦‚æžœç½‘ç»œAä¸­çš„ä¸»æœºå‘çŽ°æ•°æ®åŒ…çš„ç›®çš„ä¸»æœºä¸åœ¨è‡ªå·±æ‰€å±žçš„ç½‘ç»œä¸­ï¼Œå®ƒå°±ä¼šæŠŠæ•°æ®åŒ…å‘é€ç»™è‡ªå·±çš„ç½‘å…³ï¼Œå†ç”±ç½‘å…³è½¬å‘ç»™ç½‘ç»œBçš„ç½‘å…³ï¼Œæœ€ç»ˆç½‘ç»œBçš„ç½‘å…³å†è½¬å‘ä¸ªç½‘ç»œBä¸­çš„æŸä¸ªä¸»æœºã€‚ ARPåŽŸç† åªè¦çŸ¥é“äº†ç›®æ ‡åœ°å€çš„IPï¼Œå°±å¯ä»¥æƒ³è¿™ä¸ªç›®æ ‡IPå‘é€æ•°æ®åŒ…ï¼Œä½†æ˜¯ï¼Œåœ¨ç½‘ç»œå±‚ä»¥ä¸‹çš„é“¾è·¯å±‚ï¼Œå®žé™…è¿›è¡Œé€šä¿¡çš„è¿˜æ˜¯MACï¼Œå®žé™…ä¸Šä¹Ÿå°±æ˜¯ä¸¤ä¸ªç½‘å¡ä¹‹é—´çš„é€šä¿¡ã€‚ARPåœ°å€è§£æžåè®®ä»¥IPåœ°å€ä¸ºçº¿ç´¢ï¼Œç”¨æ¥å®šä½ä¸‹ä¸€ä¸ªåº”è¯¥æŽ¥æ”¶æ•°æ®åŒ…çš„ä¸»æœºçš„MACåœ°å€ã€‚ARPæ˜¯æ ¹æ®IPåœ°å€èŽ·å–MACåœ°å€çš„ä¸€ä¸ªç½‘ç»œå±‚åè®®ã€‚ Aç±»åœ°å€ï¼šç¬¬1åˆ°8ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œé¦–ä½ä»¥äºŒè¿›åˆ¶0å¼€å¤´ï¼ŒåŽ24ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚Bç±»åœ°å€ï¼šç¬¬1åˆ°16ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰ä¸¤ä½æ˜¯äºŒè¿›åˆ¶10ï¼ŒåŽ16ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚Cç±»åœ°å€ï¼šç¬¬1åˆ°24ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰ä¸‰ä½æ˜¯äºŒè¿›åˆ¶110ï¼ŒåŽ8ä½äºŒè¿›åˆ¶æ˜¯ä¸»æœºåœ°å€ã€‚Dç±»åœ°å€ï¼šç¬¬1åˆ°32ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå‰å››ä½æ˜¯äºŒè¿›åˆ¶1110ï¼Œæ²¡æœ‰ä¸»æœºåœ°å€ã€‚ æ‰€ä»¥åªæœ‰è®¾ç½®å¥½ç½‘å…³çš„IPï¼ŒTCP/IPåè®®æ‰èƒ½å®žçŽ°ä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ã€‚ç½‘å…³çš„IPåœ°å€æ˜¯å…·æœ‰è·¯ç”±åŠŸèƒ½çš„è®¾å¤‡çš„IPåœ°å€ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å™¨ã€‚ ç½‘ç»œä¼ è¾“ä¸­çš„å¿ƒè·³æŽ§åˆ¶ ä¸ºä»€ä¹ˆè¿žæŽ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿå› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡åŽï¼Œå¯ä»¥ç›´æŽ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒ æ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿žæŽ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›žå¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€ä½  å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ­¥æ¡æ‰‹ã€‚ DNSçš„åŽŸç†HTTPæŠ¥æ–‡æ ¼å¼ã€å¤´éƒ¨å­—æ®µç­‰ è¯·æ±‚æ–¹æ³•â€œæ–¹æ³•URLè®®/ç‰ˆæœ¬â€ï¼šGET/sample.jsp HTTP/1.1 è¯·æ±‚å¤´(Request Header)è¯·æ±‚å¤´åŒ…å«è®¸å¤šæœ‰å…³çš„å®¢æˆ·ç«¯çŽ¯å¢ƒå’Œè¯·æ±‚æ­£æ–‡çš„æœ‰ç”¨ä¿¡æ¯ã€‚è¯·æ±‚å¤´å¯ä»¥å£°æ˜Žæµè§ˆå™¨æ‰€ç”¨çš„è¯­è¨€ï¼Œè¯·æ±‚æ­£æ–‡çš„é•¿åº¦ç­‰ã€‚ 123456Accept:image/gif.image/jpeg.*/*Accept-Language:zh-cnConnection:Keep-AliveHost:localhostUser-Agent:Mozila/4.0(compatible:MSIE5.01:Windows NT5.0)Accept-Encoding:gzip,deflate. è¯·æ±‚æ­£æ–‡ è¯·æ±‚å¤´å’Œè¯·æ±‚æ­£æ–‡ä¹‹é—´æ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œè¿™ä¸ªè¡Œéžå¸¸é‡è¦ï¼Œå®ƒè¡¨ç¤ºè¯·æ±‚å¤´å·²ç»ç»“æŸï¼ŒæŽ¥ä¸‹æ¥çš„æ˜¯è¯·æ±‚æ­£æ–‡ã€‚è¯·æ±‚æ­£æ–‡ä¸­å¯ä»¥åŒ…å«å®¢æˆ·æäº¤çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¿¡æ¯ï¼šusername=jinqiao&amp;password=1234 sessionå’Œcookiecookieæ˜¯WebæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„ä¸€å—ä¿¡æ¯ã€‚æµè§ˆå™¨ä¼šåœ¨æœ¬åœ°æ–‡ä»¶ä¸­ç»™æ¯ä¸€ä¸ªWebæœåŠ¡å™¨å­˜å‚¨cookieã€‚ä»¥åŽæµè§ˆå™¨åœ¨ç»™ç‰¹å®šçš„WebæœåŠ¡å™¨å‘è¯·æ±‚çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šå‘é€æ‰€æœ‰ä¸ºè¯¥æœåŠ¡å™¨å­˜å‚¨çš„cookieã€‚ä¸‹é¢åˆ—å‡ºäº†sessionå’Œcookieçš„åŒºåˆ«ï¼š æ— è®ºå®¢æˆ·ç«¯æµè§ˆå™¨åšæ€Žä¹ˆæ ·çš„è®¾ç½®ï¼Œsessionéƒ½åº”è¯¥èƒ½æ­£å¸¸å·¥ä½œã€‚å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ç¦ç”¨cookieï¼Œä½†æ˜¯ï¼Œsessionä»ç„¶æ˜¯èƒ½å¤Ÿå·¥ä½œçš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯æ— æ³•ç¦ç”¨æœåŠ¡ç«¯çš„sessionã€‚ åœ¨å­˜å‚¨çš„æ•°æ®é‡æ–¹é¢sessionå’Œcookiesä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚sessionèƒ½å¤Ÿå­˜å‚¨ä»»æ„çš„Javaå¯¹è±¡ï¼Œcookieåªèƒ½å­˜å‚¨Stringç±»åž‹çš„å¯¹è±¡ã€‚IPv4å’ŒIPv6 åœ°å€ç©ºé—´ä¸åŒï¼ŒIPv4ä¸­è§„å®šIPåœ°å€é•¿åº¦ä¸º32ï¼Œè€ŒIPv6ä¸­IPåœ°å€çš„é•¿åº¦ä¸º128ã€‚ è·¯ç”±è¡¨å¤§å°ä¸åŒï¼ŒIPv6çš„è·¯ç”±è¡¨ç›¸æ¯”IPv4çš„æ›´å°ã€‚ å®‰å…¨æ€§ä¸åŒï¼ŒIPv6çš„å®‰å…¨æ€§æ›´é«˜ï¼Œåœ¨ä½¿ç”¨IPv6çš„ç½‘ç»œæ—¶ï¼Œç”¨æˆ·å¯å¯¹ç½‘ç»œå±‚çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚ æ•°å­—è¯ä¹¦å¦‚ä½•ç”ŸæˆDHCPåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿žæŽ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶èŽ·å–æ‰€éœ€çš„é…ç½®å‚æ•°çš„æ‰‹æ®µ ICMP pingæ£€æµ‹ç½‘ç»œé€šä¿¡æ•…éšœå’Œå®žçŽ°é“¾è·¯è¿½è¸ª ICMPï¼ˆInternet Control Message Protocolï¼‰InternetæŽ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP/IPåè®®ç°‡çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºŽåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æŽ§åˆ¶æ¶ˆæ¯ã€‚ ä»Žç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹å›¾è§£TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹TCPåè®®å¦‚ä½•æ¥ä¿è¯ä¼ è¾“çš„å¯é æ€§å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§Getä¸ŽPOSTçš„åŒºåˆ« getè¯·æ±‚å‚æ•°åœ¨urlåœ°å€ä¸Šï¼Œç›´æŽ¥æš´éœ²ï¼Œpostè¯·æ±‚çš„å‚æ•°æ”¾bodyéƒ¨åˆ†ï¼ŒæŒ‰F12ä¹Ÿç›´æŽ¥æš´éœ²äº† GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚é•¿çš„è¯´ï¼šå¯¹äºŽGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºåŽ»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›žæ•°æ®ï¼‰ï¼›è€Œå¯¹äºŽPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200okï¼ˆè¿”å›žæ•°æ®ï¼‰ã€‚ getä¼ è¾“é‡å°,å› ä¸ºå—URLé•¿åº¦é™åˆ¶,ä½†æ•ˆçŽ‡è¾ƒä½Žã€‚postå¯ä»¥ä¼ è¾“å¤§é‡æ•°æ®,æ‰€ä»¥ä¸Šä¼ æ–‡ä»¶æ—¶åªèƒ½ç”¨postæ–¹å¼TCPçš„æ‹¥å¡žå¤„ç†TCPæ˜¯å¦‚ä½•è¿›è¡Œæµé‡æŽ§åˆ¶TCPå’ŒUDPåˆ†åˆ«å¯¹åº”çš„å¸¸è§åº”ç”¨å±‚åè®®IPåœ°å€çš„åˆ†ç±»æœ‰äº†å”¯ä¸€çš„Macåœ°å€ä¸ºå•¥è¿˜éœ€è¦IPåœ°å€ï¼Ÿäº¤æ¢æœºã€é›†çº¿å™¨ä¸Žè·¯ç”±å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç½‘æ¡¥çš„ä½œç”¨ç½‘æ¡¥å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå°†ä¸¤ä¸ªLANè¿žèµ·æ¥ï¼Œæ ¹æ®MACåœ°å€æ¥è½¬å‘å¸§ï¼Œå¯ä»¥çœ‹ä½œä¸€ä¸ªâ€œä½Žå±‚çš„è·¯ç”±å™¨â€ï¼ˆè·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œæ ¹æ®ç½‘ç»œåœ°å€å¦‚IPåœ°å€è¿›è¡Œè½¬å‘ è¿‡æ»¤é€šä¿¡é‡ã€‚ç½‘æ¡¥å¯ä»¥ä½¿ç”¨å±€åŸŸç½‘çš„ä¸€ä¸ªç½‘æ®µä¸Šå„å·¥ä½œç«™ä¹‹é—´çš„ä¿¡æ¯é‡å±€é™åœ¨æœ¬ç½‘æ®µçš„èŒƒå›´å†…ï¼Œè€Œä¸ä¼šç»è¿‡ç½‘æ¡¥æºœåˆ°å…¶ä»–ç½‘æ®µåŽ»ã€‚ æ‰©å¤§äº†ç‰©ç†èŒƒå›´ï¼Œä¹Ÿå¢žåŠ äº†æ•´ä¸ªå±€åŸŸç½‘ä¸Šçš„å·¥ä½œç«™çš„æœ€å¤§æ•°ç›®ã€‚ å¯ä½¿ç”¨ä¸åŒçš„ç‰©ç†å±‚ï¼Œå¯äº’è¿žä¸åŒçš„å±€åŸŸç½‘ã€‚ æé«˜äº†å¯é æ€§ã€‚å¦‚æžœæŠŠè¾ƒå¤§çš„å±€åŸŸç½‘åˆ†å‰²æˆè‹¥å¹²è¾ƒå°çš„å±€åŸŸç½‘ï¼Œå¹¶ä¸”æ¯ä¸ªå°çš„å±€åŸŸç½‘å†…éƒ¨çš„ä¿¡æ¯é‡æ˜Žæ˜¾åœ°é«˜äºŽç½‘é—´çš„ä¿¡æ¯é‡ï¼Œé‚£ä¹ˆæ•´ä¸ªäº’è¿žç½‘ç»œçš„æ€§èƒ½å°±å˜å¾—æ›´å¥½ç½‘æ¡¥ç¼ºç‚¹ ç”±äºŽç½‘æ¡¥å¯¹æŽ¥æ”¶çš„å¸§è¦å…ˆå­˜å‚¨å’ŒæŸ¥æ‰¾ç«™è¡¨ï¼Œç„¶åŽè½¬å‘ï¼Œè¿™å°±å¢žåŠ äº†æ—¶å»¶ã€‚ åœ¨MACå­å±‚å¹¶æ²¡æœ‰æµé‡æŽ§åˆ¶åŠŸèƒ½ã€‚å½“ç½‘ç»œä¸Šè´Ÿè·å¾ˆé‡æ—¶ï¼Œå¯èƒ½å› ç½‘æ¡¥ç¼“å†²åŒºçš„å­˜å‚¨ç©ºé—´ä¸å¤Ÿè€Œå‘ç”Ÿæº¢å‡ºï¼Œä»¥è‡´äº§ç”Ÿå¸§ä¸¢å¤±çš„çŽ°è±¡ã€‚ å…·æœ‰ä¸åŒMACå­å±‚çš„ç½‘æ®µæ¡¥æŽ¥å†ä¸€èµ·æ—¶ï¼Œç½‘æ¡¥åœ¨è½¬å‘ä¸€ä¸ªå¸§ä¹‹å‰ï¼Œå¿…é¡»ä¿®æ”¹å¸§çš„æŸäº›å­—æ®µçš„å†…å®¹ï¼Œä»¥é€‚åˆå¦ä¸€ä¸ªMACå­å±‚çš„è¦æ±‚ï¼Œå¢žåŠ æ—¶å»¶ã€‚ ç½‘æ¡¥åªé€‚åˆäºŽç”¨æˆ·æ•°ä¸å¤ªå¤šï¼ˆä¸è¶…è¿‡å‡ ç™¾ä¸ªï¼‰å’Œä¿¡æ¯é‡ä¸å¤ªå¤§çš„å±€åŸŸç½‘ï¼Œå¦åˆ™æœ‰æ—¶ä¼šäº§ç”Ÿè¾ƒå¤§çš„å¹¿æ’­é£Žæš´ã€‚ç½‘ç»œæŽ¥å£å¡ï¼ˆç½‘å¡ï¼‰çš„åŠŸèƒ½ï¼Ÿç½‘ç»œæŽ¥å£å¡å³ç½‘å¡ä¹Ÿå°±æ˜¯ç½‘ç»œé€‚é…å™¨ï¼ŒæŽ¥æ”¶ä¸Šä¸€å±‚çš„ipæ•°æ®æŠ¥ï¼Œå¹¶å°†å…¶å°è£…æˆå¸§å‘é€åˆ°å±€åŸŸç½‘ä¸­ã€‚ä¸€èˆ¬çš„é€‚é…å™¨éƒ½åŒ…å«ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚è¿™ä¸¤å±‚çš„åŠŸèƒ½ã€‚ç½‘ç»œæŽ¥å£å¡å®žçŽ°çš„æ˜¯TCP/IPå››å±‚å‚è€ƒæ¨¡åž‹ä¸­çš„ç½‘ç»œæŽ¥å£å±‚ï¼Œå¯¹åº”OSIä¸ƒ å±‚å‚è€ƒæ¨¡åž‹ä¸­çš„ ç‰©ç†å±‚åè®®å’Œæ•°æ®é“¾è·¯å±‚åè®®ã€‚ URIå’ŒURLçš„åŒºåˆ«URIæ ‡è®°äº†ä¸€ä¸ªç½‘ç»œèµ„æºï¼Œä»…æ­¤è€Œå·²ï¼› URLæ ‡è®°äº†ä¸€ä¸ªWWWäº’è”ç½‘èµ„æºï¼ˆç”¨åœ°å€æ ‡è®°ï¼‰ï¼Œå¹¶ç»™å‡ºäº†ä»–çš„è®¿é—®åœ°å€ GETè¯·æ±‚ä¸­URLç¼–ç çš„æ„ä¹‰ é¦–å…ˆ url åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶ä½¿ç”¨ascllç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¸€ä¸ªè¯·æ±‚å‘å‡ºåŽ»æœ€ç»ˆæ˜¯ä½¿ç”¨ascllç¼–ç çš„ï¼Œè¿™æ ·å­è¦æ˜¯æˆ‘ä»¬å‘å‡ºåŽ»çš„è¯·æ±‚ä¸­åŒ…å«æœ‰éžascllå­—ç¬¦çš„è¯ï¼Œå°±ä¼šè¢«æµè§ˆå™¨ç¼–ç ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œå„ä¸ªæµè§ˆå™¨å¯¹äºŽurlçš„ç¼–ç æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼ï¼ï¼è¿™å°±ä¼šå¯¼è‡´å¾ˆå¤§çš„é—®é¢˜ï¼ŒåŒä¸€ä¸ªurlåœ¨ä¸åŒçš„æµè§ˆå™¨ä¸­å®žé™…å‘å‡ºçš„urléƒ½ä¸ä¸€æ ·äº†ï¼ŒæœåŠ¡å™¨è¿˜è¦æ€Žä¹ˆè§£æžè¿™äº›è¯·æ±‚çš„ï¼Ÿè¦è§£å†³è¿™ä¸ªé—®é¢˜æ•ˆçŽ‡æœ€æœ€é«˜çš„æ–¹æ³•å°±æ˜¯åœ¨å‰ç«¯ä¸­å¯¹è¦å‘å‡ºçš„urlä½¿ç”¨js è¿›è¡Œç¼–ç ï¼Œç¼–ç åŽçš„urlå°±åªå‰©ä¸‹ascllç¼–ç ä¸­æœ‰çš„å­—ç¬¦äº†ã€‚è¿™å°±æ˜¯URLç¼–ç ã€‚URLç¼–ç æŒ‡çš„æ˜¯å¯¹ç½‘å€ä¸Šçš„ä¸å®‰å…¨çš„å­—ç¬¦ï¼Œä¾‹å¦‚ä¸­æ–‡ï¼Œè¿›è¡Œç¼–ç ï¼Œç¼–ç åŽçš„ä¸­æ–‡æ–¹ä¾¿åœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚URLç¼–ç æ˜¯è´Ÿè´£æŠŠURLé‡Œé¢çš„ç©ºæ ¼å’Œå…¶ä»–çš„ç‰¹æ®Šå­—ç¬¦æ›¿æ¢æˆå¯¹åº”çš„åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œåä¹‹å°±æ˜¯è§£ç ã€‚ APPlication,Sessionå’ŒCookieçš„åŒºåˆ«å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtokenhttpç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆå¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜ä»€ä¹ˆæ˜¯åˆ†å—ä¼ é€ã€‚å¦‚æžœ HTTP æ•´å—ä¼ è¾“ï¼Œéœ€è¦æå‰è®¾ç½® Content-Lengthã€‚åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked transfer encodingï¼‰å…è®¸æœåŠ¡ç«¯åœ¨ä¸é¢„å…ˆç»™å‡ºæŠ¥æ–‡é•¿åº¦çš„æƒ…å†µä¸‹ï¼Œåˆ†å—å°†è¾“å‡ºå‘é€ç»™å®¢æˆ·ç«¯ã€‚è¾“å‡ºç©ºæ®µè¡¨ç¤ºæŠ¥æ–‡ç»“æŸã€‚ å‡ ç§ç½‘ç»œæ”»å‡»æ–¹æ³• XSS ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡») ã€æ”»å‡»è€…åœ¨ Web é¡µé¢ä¸­æ’å…¥æ¶æ„è„šæœ¬ï¼Œå½“ç”¨æˆ·æµè§ˆé¡µé¢æ—¶ï¼Œä¿ƒä½¿è„šæœ¬æ‰§è¡Œï¼Œä»Žè€Œè¾¾åˆ°æ”»å‡»ç›®çš„ã€‘ (1)å®¢æœç«¯åŠæœåŠ¡ç«¯ç”¨æˆ·çš„è¾“å…¥æ•°æ®è¿›è¡ŒåŒé‡éªŒè¯(2)å¯¹æ‰€æœ‰çš„æ•°æ®è¿›è¡Œé€‚å½“çš„ç¼–ç (3)è®¾ç½® HTTP Headerï¼š â€œX-XSS-Protection:1â€ DDos åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼Œã€å‘é€å¤§é‡è¯·æ±‚ï¼Œä½¿æœåŠ¡å™¨ç˜«ç—ªã€‘ æœåŠ¡å™¨åŠ å¸¦å®½ï¼ˆæˆæœ¬æ˜‚è´µï¼‰2.ä½¿ç”¨DDos é˜²å¾¡äº§å“ CSRF è·¨ç«™è¯·æ±‚ä¼ªé€  ã€ç”¨æˆ·æœ¬åœ°å­˜å‚¨cookieï¼Œæ”»å‡»è€…åˆ©ç”¨ç”¨æˆ·çš„cookieè¿›è¡Œè®¤è¯ï¼Œç„¶åŽä¼ªé€ ç”¨æˆ·å‘å‡ºè¯·æ±‚ã€‘ æ£€æŸ¥æ ‡å‡†è¯·æ±‚å¤´ ï¼Œç¡®è®¤æ˜¯å¦åŒæº(2)æ£€æŸ¥CSRF token SQLæ³¨å…¥(é€šè¿‡ç”¨æˆ·è¾“å…¥,æ‹¼æŽ¥æˆæ¶æ„Sql,å¹¶æ‰§è¡Œ) é¢„ç¼–è¯‘SQL 2.éªŒè¯ç”¨æˆ·è¾“å…¥3.ç”¨æˆ·è¾“å…¥ç¼–ç  XXSæ”»å‡»å’ŒSQLæ³¨å…¥MySQLæœ€å…¨çš„é‡è¦çŸ¥è¯†ç‚¹å­¦ä¹  SSL/TLSåè®®è¿è¡Œæœºåˆ¶çš„æ¦‚è¿° HTTP å¸¸è§é¢è¯•é¢˜httpåè®®æœ‰å“ªå‡ ç§è¯·æ±‚æ–¹å¼ï¼Ÿ GET:ç”¨äºŽè¯·æ±‚è®¿é—®å·²ç»è¢«URI(ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)è¯†åˆ«çš„èµ„æº,å¯ä»¥é€šè¿‡URLä¼ å‚ç»™æœåŠ¡å™¨ POST:ç”¨äºŽä¼ è¾“ä¿¡æ¯ç»™æœåŠ¡å™¨,ä¸»è¦åŠŸèƒ½ä¸ŽGETæ–¹æ³•ç±»ä¼¼,ä½†ä¸€èˆ¬æŽ¨èä½¿ç”¨POSTæ–¹å¼ PUT:ä¼ è¾“æ–‡ä»¶,æŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹,ä¿å­˜åˆ°å¯¹åº”URIä½ç½® HEAD:èŽ·å¾—æŠ¥æ–‡é¦–éƒ¨,ä¸ŽGETæ–¹æ³•ç±»ä¼¼,åªæ˜¯ä¸è¿”å›žæŠ¥æ–‡ä¸»ä½“,ä¸€èˆ¬ç”¨äºŽéªŒè¯URIæ˜¯å¦æœ‰æ•ˆ DELETE:åˆ é™¤æ–‡ä»¶,ä¸ŽPUTæ–¹æ³•ç›¸å,åˆ é™¤å¯¹åº”URIä½ç½®çš„æ–‡ä»¶ OPTIONS:æŸ¥è¯¢å“åº”URIæ”¯æŒçš„HTTPæ–¹æ³• httpå’ŒhttpsåŒºåˆ«ï¼ŸHTTPåè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜Žæ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨HTTPåè®®ä¼ è¾“éšç§ä¿¡æ¯éžå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼ŒäºŽæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†SSLï¼ˆSecure Sockets Layerï¼‰åè®®ç”¨äºŽå¯¹HTTPåè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»Žè€Œå°±è¯žç”Ÿäº†HTTPSã€‚ç®€å•æ¥è¯´ï¼ŒHTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æž„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”httpåè®®å®‰å…¨ã€‚æ€»çš„æ¥è¯´ï¼š HTTPS=SSL+HTTP httpsåè®®éœ€è¦åˆ°caç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨ã€‚ httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜Žæ–‡ä¼ è¾“ï¼Œhttpsåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚ httpå’Œhttpsä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿žæŽ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼ŒåŽè€…æ˜¯443ã€‚ï¼ˆè¿™ä¸ªåªæ˜¯é»˜è®¤ç«¯å£ä¸ä¸€æ ·ï¼Œå®žé™…ä¸Šç«¯å£æ˜¯å¯ä»¥æ”¹çš„ï¼‰ httpçš„è¿žæŽ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æž„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚ HTTPè¯·æ±‚æŠ¥æ–‡ä¸Žå“åº”æŠ¥æ–‡æ ¼å¼è¯·æ±‚æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š è¯·æ±‚è¡Œï¼šåŒ…å«è¯·æ±‚æ–¹æ³•ã€URIã€HTTPç‰ˆæœ¬ä¿¡æ¯ è¯·æ±‚å¤´éƒ¨ï¼ˆheadersï¼‰å­—æ®µ è¯·æ±‚å†…å®¹å®žä½“(body) å“åº”æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š çŠ¶æ€è¡Œï¼šåŒ…å«HTTPç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€ç çš„åŽŸå› çŸ­ å“åº”å¤´éƒ¨ï¼ˆheadersï¼‰å­—æ®µ å“åº”å†…å®¹(body)å®žä½“ HTTPçŠ¶æ€ç  200 è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›žã€‚ 201 è¯·æ±‚å·²ç»è¢«å®žçŽ°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œå»ºç«‹ï¼Œä¸”å…¶ URI å·²ç»éšLocation å¤´ä¿¡æ¯è¿”å›ž 202 æœåŠ¡å™¨å·²æŽ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 301 ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ æœåŠ¡å™¨è¿”å›žæ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚ 302 ï¼ˆä¸´æ—¶ç§»åŠ¨ï¼‰ æœåŠ¡å™¨ç›®å‰ä»Žä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŽŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åŽçš„è¯·æ±‚ã€‚ 303 ï¼ˆæŸ¥çœ‹å…¶ä»–ä½ç½®ï¼‰ è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›žæ­¤ä»£ç ã€‚ 304 ï¼ˆæœªä¿®æ”¹ï¼‰ è‡ªä»Žä¸Šæ¬¡è¯·æ±‚åŽï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ æœåŠ¡å™¨è¿”å›žæ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›žç½‘é¡µå†…å®¹ã€‚ 305 ï¼ˆä½¿ç”¨ä»£ç†ï¼‰ è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚ å¦‚æžœæœåŠ¡å™¨è¿”å›žæ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç†ã€‚ 307 ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰ æœåŠ¡å™¨ç›®å‰ä»Žä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŽŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åŽçš„è¯·æ±‚ã€‚ 401 å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚å¦‚æžœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº† Authorization è¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦ 403 æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸Ž401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ 404 è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘çŽ° 500 æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éƒ½ä¼šåœ¨æœåŠ¡å™¨çš„ç¨‹åºç å‡ºé”™æ—¶å‡ºçŽ°ã€‚ 501 æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ã€‚å½“æœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æ”¯æŒå…¶å¯¹ä»»ä½•èµ„æºçš„è¯·æ±‚ã€‚ 502 ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»Žä¸Šæ¸¸æœåŠ¡å™¨æŽ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚ 503 ç”±äºŽä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚è¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸”å°†åœ¨ä¸€æ®µæ—¶é—´ä»¥åŽæ¢å¤ã€‚]]></content>
      <tags>
        <tag>Computer Networks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Travel]]></title>
    <url>%2F2019%2F05%2F17%2FTravel%2F</url>
    <content type="text"><![CDATA[Europe Europe AsianTAIWAN taiwan]]></content>
      <categories>
        <category>Diary</category>
      </categories>
      <tags>
        <tag>Travel</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Design Pattern-Behavioral-pattern]]></title>
    <url>%2F2019%2F05%2F16%2FDesign-Pattern-Behavioral-pattern%2F</url>
    <content type="text"><![CDATA[Design Patternsâ€ Is a Bad Name From laike9mè¡Œä¸ºåž‹æ¨¡å¼ è¡Œä¸ºåž‹æ¨¡å¼å…³æ³¨çš„æ˜¯å„ä¸ªç±»ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼Œå°†èŒè´£åˆ’åˆ†æ¸…æ¥šï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´åŠ åœ°æ¸…æ™°ã€‚ç­–ç•¥æ¨¡å¼ç­–ç•¥æ¨¡å¼å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åˆ°æœ€å‰é¢è¿›è¡Œä»‹ç»ã€‚å®ƒæ¯”è¾ƒç®€å•ï¼Œæˆ‘å°±ä¸åºŸè¯ï¼Œç›´æŽ¥ç”¨ä»£ç è¯´äº‹å§ã€‚ä¸‹é¢è®¾è®¡çš„åœºæ™¯æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ç”»ä¸€ä¸ªå›¾å½¢ï¼Œå¯é€‰çš„ç­–ç•¥å°±æ˜¯ç”¨çº¢è‰²ç¬”æ¥ç”»ï¼Œè¿˜æ˜¯ç»¿è‰²ç¬”æ¥ç”»ï¼Œæˆ–è€…è“è‰²ç¬”æ¥ç”»ã€‚é¦–å…ˆï¼Œå…ˆå®šä¹‰ä¸€ä¸ªç­–ç•¥æŽ¥å£ï¼špublic interface Strategy { public void draw(int radius, int x, int y);}ç„¶åŽæˆ‘ä»¬å®šä¹‰å…·ä½“çš„å‡ ä¸ªç­–ç•¥ï¼š123456789101112131415161718public class RedPen implements Strategy &#123; @Override public void draw(int radius, int x, int y) &#123; System.out.println(&amp;quot;ç”¨çº¢è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y); &#125;&#125;public class GreenPen implements Strategy &#123; @Override public void draw(int radius, int x, int y) &#123; System.out.println(&amp;quot;ç”¨ç»¿è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y); &#125;&#125;public class BluePen implements Strategy &#123; @Override public void draw(int radius, int x, int y) &#123; System.out.println(&amp;quot;ç”¨è“è‰²ç¬”ç”»å›¾ï¼Œradius:&amp;quot; + radius + &amp;quot;, x:&amp;quot; + x + &amp;quot;, y:&amp;quot; + y); &#125;&#125;ä½¿ç”¨ç­–ç•¥çš„ç±»ï¼š1234567891011public class Context &#123; private Strategy strategy; public Context(Strategy strategy)&#123; this.strategy = strategy; &#125; public int executeDraw(int radius, int x, int y)&#123; return strategy.draw(radius, x, y); &#125;&#125;å®¢æˆ·ç«¯æ¼”ç¤ºï¼š1234public static void main(String[] args) &#123; Context context = new Context(new BluePen()); // ä½¿ç”¨ç»¿è‰²ç¬”æ¥ç”» context.executeDraw(10, 0, 0);&#125;è¿™ä¸ªæ—¶å€™ï¼Œå¤§å®¶æœ‰æ²¡æœ‰è”æƒ³åˆ°ç»“æž„åž‹æ¨¡å¼ä¸­çš„æ¡¥æ¢æ¨¡å¼ï¼Œå®ƒä»¬å…¶å®žéžå¸¸ç›¸ä¼¼ï¼Œæˆ‘æŠŠæ¡¥æ¢æ¨¡å¼çš„å›¾æ‹¿è¿‡æ¥å¤§å®¶å¯¹æ¯”ä¸‹ï¼šè¦æˆ‘è¯´çš„è¯ï¼Œå®ƒä»¬éžå¸¸ç›¸ä¼¼ï¼Œæ¡¥æ¢æ¨¡å¼åœ¨å·¦ä¾§åŠ äº†ä¸€å±‚æŠ½è±¡è€Œå·²ã€‚æ¡¥æ¢æ¨¡å¼çš„è€¦åˆæ›´ä½Žï¼Œç»“æž„æ›´å¤æ‚ä¸€äº›ã€‚ è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼å¯¹äºŽæˆ‘ä»¬æ¥è¯´ï¼ŒçœŸæ˜¯å†ç®€å•ä¸è¿‡äº†ã€‚æ— å¤–ä¹Žä¸¤ä¸ªæ“ä½œï¼Œè§‚å¯Ÿè€…è®¢é˜…è‡ªå·±å…³å¿ƒçš„ä¸»é¢˜å’Œä¸»é¢˜æœ‰æ•°æ®å˜åŒ–åŽé€šçŸ¥è§‚å¯Ÿè€…ä»¬ã€‚é¦–å…ˆï¼Œéœ€è¦å®šä¹‰ä¸»é¢˜ï¼Œæ¯ä¸ªä¸»é¢˜éœ€è¦æŒæœ‰è§‚å¯Ÿè€…åˆ—è¡¨çš„å¼•ç”¨ï¼Œç”¨äºŽåœ¨æ•°æ®å˜æ›´çš„æ—¶å€™é€šçŸ¥å„ä¸ªè§‚å¯Ÿè€…ï¼š12345678910111213141516171819202122public class Subject &#123; private List&amp;lt;Observer&amp;gt; observers = new ArrayList&amp;lt;Observer&amp;gt;(); private int state; public int getState() &#123; return state; &#125; public void setState(int state) &#123; this.state = state; // æ•°æ®å·²å˜æ›´ï¼Œé€šçŸ¥è§‚å¯Ÿè€…ä»¬ notifyAllObservers(); &#125; // æ³¨å†Œè§‚å¯Ÿè€… public void attach(Observer observer) &#123; observers.add(observer); &#125; // é€šçŸ¥è§‚å¯Ÿè€…ä»¬ public void notifyAllObservers() &#123; for (Observer observer : observers) &#123; observer.update(); &#125; &#125;&#125;å®šä¹‰è§‚å¯Ÿè€…æŽ¥å£ï¼š1234public abstract class Observer &#123; protected Subject subject; public abstract void update();&#125;å…¶å®žå¦‚æžœåªæœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ç±»çš„è¯ï¼ŒæŽ¥å£éƒ½ä¸ç”¨å®šä¹‰äº†ï¼Œä¸è¿‡ï¼Œé€šå¸¸åœºæ™¯ä¸‹ï¼Œæ—¢ç„¶ç”¨åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬å°±æ˜¯å¸Œæœ›ä¸€ä¸ªäº‹ä»¶å‡ºæ¥äº†ï¼Œä¼šæœ‰å¤šä¸ªä¸åŒçš„ç±»éœ€è¦å¤„ç†ç›¸åº”çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œè®¢å•ä¿®æ”¹æˆåŠŸäº‹ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›å‘çŸ­ä¿¡çš„ç±»å¾—åˆ°é€šçŸ¥ã€å‘é‚®ä»¶çš„ç±»å¾—åˆ°é€šçŸ¥ã€å¤„ç†ç‰©æµä¿¡æ¯çš„ç±»å¾—åˆ°é€šçŸ¥ç­‰ã€‚æˆ‘ä»¬æ¥å®šä¹‰å…·ä½“çš„å‡ ä¸ªè§‚å¯Ÿè€…ç±»ï¼š1234567891011121314151617181920212223242526public class BinaryObserver extends Observer &#123; // åœ¨æž„é€ æ–¹æ³•ä¸­è¿›è¡Œè®¢é˜…ä¸»é¢˜ public BinaryObserver(Subject subject) &#123; this.subject = subject; // é€šå¸¸åœ¨æž„é€ æ–¹æ³•ä¸­å°† this å‘å¸ƒå‡ºåŽ»çš„æ“ä½œä¸€å®šè¦å°å¿ƒ this.subject.attach(this); &#125; // è¯¥æ–¹æ³•ç”±ä¸»é¢˜ç±»åœ¨æ•°æ®å˜æ›´çš„æ—¶å€™è¿›è¡Œè°ƒç”¨ @Override public void update() &#123; String result = Integer.toBinaryString(subject.getState()); System.out.println(&amp;quot;è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºäºŒè¿›åˆ¶å€¼ä¸ºï¼š&amp;quot; + result); &#125;&#125;public class HexaObserver extends Observer &#123; public HexaObserver(Subject subject) &#123; this.subject = subject; this.subject.attach(this); &#125; @Override public void update() &#123; String result = Integer.toHexString(subject.getState()).toUpperCase(); System.out.println(&amp;quot;è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºåå…­è¿›åˆ¶å€¼ä¸ºï¼š&amp;quot; + result); &#125;&#125;å®¢æˆ·ç«¯ä½¿ç”¨ä¹Ÿéžå¸¸ç®€å•ï¼š12345678910public static void main(String[] args) &#123; // å…ˆå®šä¹‰ä¸€ä¸ªä¸»é¢˜ Subject subject1 = new Subject(); // å®šä¹‰è§‚å¯Ÿè€… new BinaryObserver(subject1); new HexaObserver(subject1); // æ¨¡æ‹Ÿæ•°æ®å˜æ›´ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè§‚å¯Ÿè€…ä»¬çš„ update æ–¹æ³•å°†ä¼šè¢«è°ƒç”¨ subject.setState(11);&#125;output:12è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºäºŒè¿›åˆ¶å€¼ä¸ºï¼š1011è®¢é˜…çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ–°çš„æ•°æ®å¤„ç†ä¸ºåå…­è¿›åˆ¶å€¼ä¸ºï¼šBå½“ç„¶ï¼Œjdk ä¹Ÿæä¾›äº†ç›¸ä¼¼çš„æ”¯æŒï¼Œå…·ä½“çš„å¤§å®¶å¯ä»¥å‚è€ƒ java.util.Observableå’Œ java.util.Observerè¿™ä¸¤ä¸ªç±»ã€‚å®žé™…ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¾€å¾€ç”¨æ¶ˆæ¯ä¸­é—´ä»¶æ¥å®žçŽ°ï¼Œå¦‚æžœè¦å®žçŽ°å•æœºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œç¬”è€…å»ºè®®è¯»è€…ä½¿ç”¨ Guava ä¸­çš„ EventBusï¼Œå®ƒæœ‰åŒæ­¥å®žçŽ°ä¹Ÿæœ‰å¼‚æ­¥å®žçŽ°ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»è®¾è®¡æ¨¡å¼ï¼Œå°±ä¸å±•å¼€è¯´äº†ã€‚è¿˜æœ‰ï¼Œå³ä½¿æ˜¯ä¸Šé¢çš„è¿™ä¸ªä»£ç ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šå˜ç§ï¼Œå¤§å®¶åªè¦è®°ä½æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œé‚£å°±æ˜¯ä¸€å®šæœ‰ä¸€ä¸ªåœ°æ–¹å­˜æ”¾äº†æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œç„¶åŽåœ¨äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼ŒéåŽ†è§‚å¯Ÿè€…ï¼Œè°ƒç”¨å®ƒä»¬çš„å›žè°ƒå‡½æ•°ã€‚è´£ä»»é“¾æ¨¡å¼ è´£ä»»é“¾é€šå¸¸éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œç„¶åŽè°ƒç”¨æ–¹åªéœ€è¦è°ƒç”¨å¤´éƒ¨èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼ŒåŽé¢ä¼šè‡ªåŠ¨æµè½¬ä¸‹åŽ»ã€‚æ¯”å¦‚æµç¨‹å®¡æ‰¹å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œåªè¦ç»ˆç«¯ç”¨æˆ·æäº¤ç”³è¯·ï¼Œæ ¹æ®ç”³è¯·çš„å†…å®¹ä¿¡æ¯ï¼Œè‡ªåŠ¨å»ºç«‹ä¸€æ¡è´£ä»»é“¾ï¼Œç„¶åŽå°±å¯ä»¥å¼€å§‹æµè½¬äº†ã€‚ æœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œç”¨æˆ·å‚åŠ ä¸€ä¸ªæ´»åŠ¨å¯ä»¥é¢†å–å¥–å“ï¼Œä½†æ˜¯æ´»åŠ¨éœ€è¦è¿›è¡Œå¾ˆå¤šçš„è§„åˆ™æ ¡éªŒç„¶åŽæ‰èƒ½æ”¾è¡Œï¼Œæ¯”å¦‚é¦–å…ˆéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯å¦æ˜¯æ–°ç”¨æˆ·ã€ä»Šæ—¥å‚ä¸Žäººæ•°æ˜¯å¦æœ‰é™é¢ã€å…¨åœºå‚ä¸Žäººæ•°æ˜¯å¦æœ‰é™é¢ç­‰ç­‰ã€‚è®¾å®šçš„è§„åˆ™éƒ½é€šè¿‡åŽï¼Œæ‰èƒ½è®©ç”¨æˆ·é¢†èµ°å¥–å“ã€‚ å¦‚æžœäº§å“ç»™ä½ è¿™ä¸ªéœ€æ±‚çš„è¯ï¼Œæˆ‘æƒ³å¤§éƒ¨åˆ†äººä¸€å¼€å§‹è‚¯å®šæƒ³çš„å°±æ˜¯ï¼Œç”¨ä¸€ä¸ª List æ¥å­˜æ”¾æ‰€æœ‰çš„è§„åˆ™ï¼Œç„¶åŽ foreach æ‰§è¡Œä¸€ä¸‹æ¯ä¸ªè§„åˆ™å°±å¥½äº†ã€‚ä¸è¿‡ï¼Œè¯»è€…ä¹Ÿå…ˆåˆ«æ€¥ï¼Œçœ‹çœ‹è´£ä»»é“¾æ¨¡å¼å’Œæˆ‘ä»¬è¯´çš„è¿™ä¸ªæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®šä¹‰æµç¨‹ä¸ŠèŠ‚ç‚¹çš„åŸºç±»ï¼š1234567891011121314public abstract class RuleHandler &#123; // åŽç»§èŠ‚ç‚¹ protected RuleHandler successor; public abstract void apply(Context context); public void setSuccessor(RuleHandler successor) &#123; this.successor = successor; &#125; public RuleHandler getSuccessor() &#123; return successor; &#125;&#125; æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å…·ä½“çš„æ¯ä¸ªèŠ‚ç‚¹äº†ã€‚ æ ¡éªŒç”¨æˆ·æ˜¯å¦æ˜¯æ–°ç”¨æˆ·ï¼š123456789101112public class NewUserRuleHandler extends RuleHandler &#123; public void apply(Context context) &#123; if (context.isNewUser()) &#123; // å¦‚æžœæœ‰åŽç»§èŠ‚ç‚¹çš„è¯ï¼Œä¼ é€’ä¸‹åŽ» if (this.getSuccessor() != null) &#123; this.getSuccessor().apply(context); &#125; &#125; else &#123; throw new RuntimeException(&amp;quot;è¯¥æ´»åŠ¨ä»…é™æ–°ç”¨æˆ·å‚ä¸Ž&amp;quot;); &#125; &#125;&#125; æ ¡éªŒç”¨æˆ·æ‰€åœ¨åœ°åŒºæ˜¯å¦å¯ä»¥å‚ä¸Žï¼š123456789101112public class LocationRuleHandler extends RuleHandler &#123; public void apply(Context context) &#123; boolean allowed = activityService.isSupportedLocation(context.getLocation); if (allowed) &#123; if (this.getSuccessor() != null) &#123; this.getSuccessor().apply(context); &#125; &#125; else &#123; throw new RuntimeException(&amp;quot;éžå¸¸æŠ±æ­‰ï¼Œæ‚¨æ‰€åœ¨çš„åœ°åŒºæ— æ³•å‚ä¸Žæœ¬æ¬¡æ´»åŠ¨&amp;quot;); &#125; &#125;&#125; æ ¡éªŒå¥–å“æ˜¯å¦å·²é¢†å®Œï¼š123456789101112public class LimitRuleHandler extends RuleHandler &#123; public void apply(Context context) &#123; int remainedTimes = activityService.queryRemainedTimes(context); // æŸ¥è¯¢å‰©ä½™å¥–å“ if (remainedTimes &amp;gt; 0) &#123; if (this.getSuccessor() != null) &#123; this.getSuccessor().apply(userInfo); &#125; &#125; else &#123; throw new RuntimeException(&amp;quot;æ‚¨æ¥å¾—å¤ªæ™šäº†ï¼Œå¥–å“è¢«é¢†å®Œäº†&amp;quot;); &#125; &#125;&#125; å®¢æˆ·ç«¯ï¼š12345678910public static void main(String[] args) &#123; RuleHandler newUserHandler = new NewUserRuleHandler(); RuleHandler locationHandler = new LocationRuleHandler(); RuleHandler limitHandler = new LimitRuleHandler(); // å‡è®¾æœ¬æ¬¡æ´»åŠ¨ä»…æ ¡éªŒåœ°åŒºå’Œå¥–å“æ•°é‡ï¼Œä¸æ ¡éªŒæ–°è€ç”¨æˆ· locationHandler.setSuccessor(limitHandler); locationHandler.apply(context);&#125; ä»£ç å…¶å®žå¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆå®šä¹‰å¥½ä¸€ä¸ªé“¾è¡¨ï¼Œç„¶åŽåœ¨é€šè¿‡ä»»æ„ä¸€èŠ‚ç‚¹åŽï¼Œå¦‚æžœæ­¤èŠ‚ç‚¹æœ‰åŽç»§èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¼ é€’ä¸‹åŽ»ã€‚ è‡³äºŽå®ƒå’Œæˆ‘ä»¬å‰é¢è¯´çš„ç”¨ä¸€ä¸ª List å­˜æ”¾éœ€è¦æ‰§è¡Œçš„è§„åˆ™çš„åšæ³•æœ‰ä»€ä¹ˆå¼‚åŒï¼Œç•™ç»™è¯»è€…è‡ªå·±ç¢ç£¨å§ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ åœ¨å«æœ‰ç»§æ‰¿ç»“æž„çš„ä»£ç ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯éžå¸¸å¸¸ç”¨çš„ã€‚ é€šå¸¸ä¼šæœ‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼š123456789101112131415161718public abstract class AbstractTemplate &#123; // è¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³• public void templateMethod() &#123; init(); apply(); // è¿™ä¸ªæ˜¯é‡ç‚¹ end(); // å¯ä»¥ä½œä¸ºé’©å­æ–¹æ³• &#125; protected void init() &#123; System.out.println(&amp;quot;init æŠ½è±¡å±‚å·²ç»å®žçŽ°ï¼Œå­ç±»ä¹Ÿå¯ä»¥é€‰æ‹©è¦†å†™&amp;quot;); &#125; // ç•™ç»™å­ç±»å®žçŽ° protected abstract void apply(); protected void end() &#123; &#125;&#125; æ¨¡æ¿æ–¹æ³•ä¸­è°ƒç”¨äº† 3 ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ apply() æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®žçŽ°å®ƒï¼Œå…¶å®žæ¨¡æ¿æ–¹æ³•ä¸­æœ‰å‡ ä¸ªæŠ½è±¡æ–¹æ³•å®Œå…¨æ˜¯è‡ªç”±çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸‰ä¸ªæ–¹æ³•éƒ½è®¾ç½®ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œè®©å­ç±»æ¥å®žçŽ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡æ¿æ–¹æ³•åªè´Ÿè´£å®šä¹‰ç¬¬ä¸€æ­¥åº”è¯¥è¦åšä»€ä¹ˆï¼Œç¬¬äºŒæ­¥åº”è¯¥åšä»€ä¹ˆï¼Œç¬¬ä¸‰æ­¥åº”è¯¥åšä»€ä¹ˆï¼Œè‡³äºŽæ€Žä¹ˆåšï¼Œç”±å­ç±»æ¥å®žçŽ°ã€‚ æˆ‘ä»¬å†™ä¸€ä¸ªå®žçŽ°ç±»ï¼š123456789public class ConcreteTemplate extends AbstractTemplate &#123; public void apply() &#123; System.out.println(&amp;quot;å­ç±»å®žçŽ°æŠ½è±¡æ–¹æ³• apply&amp;quot;); &#125; public void end() &#123; System.out.println(&amp;quot;æˆ‘ä»¬å¯ä»¥æŠŠ method3 å½“åšé’©å­æ–¹æ³•æ¥ä½¿ç”¨ï¼Œéœ€è¦çš„æ—¶å€™è¦†å†™å°±å¯ä»¥äº†&amp;quot;); &#125;&#125; å®¢æˆ·ç«¯è°ƒç”¨æ¼”ç¤ºï¼š12345public static void main(String[] args) &#123; AbstractTemplate t = new ConcreteTemplate(); // è°ƒç”¨æ¨¡æ¿æ–¹æ³• t.templateMethod();&#125; ä»£ç å…¶å®žå¾ˆç®€å•ï¼ŒåŸºæœ¬ä¸Šçœ‹åˆ°å°±æ‡‚äº†ï¼Œå…³é”®æ˜¯è¦å­¦ä¼šç”¨åˆ°è‡ªå·±çš„ä»£ç ä¸­ã€‚ çŠ¶æ€æ¨¡å¼ update: 2017-10-19 åºŸè¯æˆ‘å°±ä¸è¯´äº†ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å•†å“åº“å­˜ä¸­å¿ƒæœ‰ä¸ªæœ€åŸºæœ¬çš„éœ€æ±‚æ˜¯å‡åº“å­˜å’Œè¡¥åº“å­˜ï¼Œæˆ‘ä»¬çœ‹çœ‹æ€Žä¹ˆç”¨çŠ¶æ€æ¨¡å¼æ¥å†™ã€‚ æ ¸å¿ƒåœ¨äºŽï¼Œæˆ‘ä»¬çš„å…³æ³¨ç‚¹ä¸å†æ˜¯ Context æ˜¯è¯¥è¿›è¡Œå“ªç§æ“ä½œï¼Œè€Œæ˜¯å…³æ³¨åœ¨è¿™ä¸ª Context ä¼šæœ‰å“ªäº›æ“ä½œã€‚ å®šä¹‰çŠ¶æ€æŽ¥å£ï¼š123public interface State &#123; public void doAction(Context context);&#125; å®šä¹‰å‡åº“å­˜çš„çŠ¶æ€ï¼š12345678910111213public class DeductState implements State &#123; public void doAction(Context context) &#123; System.out.println(&amp;quot;å•†å“å–å‡ºï¼Œå‡†å¤‡å‡åº“å­˜&amp;quot;); context.setState(this); //... æ‰§è¡Œå‡åº“å­˜çš„å…·ä½“æ“ä½œ &#125; public String toString() &#123; return &amp;quot;Deduct State&amp;quot;; &#125;&#125; å®šä¹‰è¡¥åº“å­˜çŠ¶æ€ï¼š12345678910111213public class RevertState implements State &#123; public void doAction(Context context) &#123; System.out.println(&amp;quot;ç»™æ­¤å•†å“è¡¥åº“å­˜&amp;quot;); context.setState(this); //... æ‰§è¡ŒåŠ åº“å­˜çš„å…·ä½“æ“ä½œ &#125; public String toString() &#123; return &amp;quot;Revert State&amp;quot;; &#125;&#125; å‰é¢ç”¨åˆ°äº† context.setState(this)ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€Žä¹ˆå®šä¹‰ Context ç±»ï¼š1234567891011121314public class Context &#123; private State state; private String name; public Context(String name) &#123; this.name = name; &#125; public void setState(State state) &#123; this.state = state; &#125; public void getState() &#123; return this.state; &#125;&#125; æˆ‘ä»¬æ¥çœ‹ä¸‹å®¢æˆ·ç«¯è°ƒç”¨ï¼Œå¤§å®¶å°±ä¸€æ¸…äºŒæ¥šäº†ï¼š123456789101112131415public static void main(String[] args) &#123; // æˆ‘ä»¬éœ€è¦æ“ä½œçš„æ˜¯ iPhone X Context context = new Context(&amp;quot;iPhone X&amp;quot;); // çœ‹çœ‹æ€Žä¹ˆè¿›è¡Œè¡¥åº“å­˜æ“ä½œ State revertState = new RevertState(); revertState.doAction(context); // åŒæ ·çš„ï¼Œå‡åº“å­˜æ“ä½œä¹Ÿéžå¸¸ç®€å• State deductState = new DeductState(); deductState.doAction(context); // å¦‚æžœéœ€è¦æˆ‘ä»¬å¯ä»¥èŽ·å–å½“å‰çš„çŠ¶æ€ // context.getState().toString();&#125; è¯»è€…å¯èƒ½ä¼šå‘çŽ°ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æžœæˆ‘ä»¬ä¸å…³å¿ƒå½“å‰ context å¤„äºŽä»€ä¹ˆçŠ¶æ€ï¼Œé‚£ä¹ˆ Context å°±å¯ä»¥ä¸ç”¨ç»´æŠ¤ state å±žæ€§äº†ï¼Œé‚£æ ·ä»£ç ä¼šç®€å•å¾ˆå¤šã€‚ ä¸è¿‡ï¼Œå•†å“åº“å­˜è¿™ä¸ªä¾‹å­æ¯•ç«Ÿåªæ˜¯ä¸ªä¾‹ï¼Œæˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå®žä¾‹æ˜¯éœ€è¦çŸ¥é“å½“å‰ context å¤„äºŽä»€ä¹ˆçŠ¶æ€çš„ã€‚ è¡Œä¸ºåž‹æ¨¡å¼æ€»ç»“ è¡Œä¸ºåž‹æ¨¡å¼éƒ¨åˆ†ä»‹ç»äº†ç­–ç•¥æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼å’ŒçŠ¶æ€æ¨¡å¼ï¼Œå…¶å®žï¼Œç»å…¸çš„è¡Œä¸ºåž‹æ¨¡å¼è¿˜åŒ…æ‹¬å¤‡å¿˜å½•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ç­‰ï¼Œä½†æ˜¯å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒæœ‰é™ï¼Œè€Œä¸”æœ¬æ–‡ç¯‡å¹…ä¹ŸæŒºå¤§äº†ï¼Œæˆ‘å°±ä¸è¿›è¡Œä»‹ç»äº†ã€‚ æ€»ç»“ å­¦ä¹ è®¾è®¡æ¨¡å¼çš„ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ çš„ä¼˜é›…ã€æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•ã€‚è¿™æ¬¡æ•´ç†è¿™ç¯‡æ–‡ç« ï¼Œè®©æˆ‘é‡æ–°å®¡è§†äº†ä¸€ä¸‹å„ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå¯¹æˆ‘è‡ªå·±è€Œè¨€æ”¶èŽ·è¿˜æ˜¯æŒºå¤§çš„ã€‚æˆ‘æƒ³ï¼Œæ–‡ç« çš„æœ€å¤§æ”¶ç›Šè€…ä¸€èˆ¬éƒ½æ˜¯ä½œè€…æœ¬äººï¼Œä¸ºäº†å†™ä¸€ç¯‡æ–‡ç« ï¼Œéœ€è¦å·©å›ºè‡ªå·±çš„çŸ¥è¯†ï¼Œéœ€è¦å¯»æ‰¾å„ç§èµ„æ–™ï¼Œè€Œä¸”ï¼Œè‡ªå·±å†™è¿‡çš„æ‰æœ€å®¹æ˜“è®°ä½ï¼Œä¹Ÿç®—æ˜¯æˆ‘ç»™è¯»è€…çš„å»ºè®®å§ã€‚ ï¼ˆå…¨æ–‡å®Œï¼‰ https://javadoop.com/post/design-pattern]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Design Patterns</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DesignPattern-Structural-pattern part2]]></title>
    <url>%2F2019%2F05%2F16%2FDesignPattern-Structural-pattern-part2%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  è¯¦è§£è®¾è®¡æ¨¡å¼ä¹‹ç»“æž„åž‹æ¨¡å¼ï¼ˆä¸Šï¼‰ä¸­æˆ‘ä»¬å­¦ä¹ äº†ä¸‰ç§ç»“æž„åž‹æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ã€æ¡¥æŽ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€‚æœ¬æ–‡æˆ‘ä»¬å°†ä»‹ç»å‰©ä½™å››ç§ç»“æž„åž‹æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š è£…é¥°æ¨¡å¼ å¤–è§‚æ¨¡å¼ äº«å…ƒæ¨¡å¼ ä»£ç†æ¨¡å¼ å››ã€è£…é¥°æ¨¡å¼æåˆ°è£…é¥°ï¼Œæˆ‘ä»¬å…ˆæ¥æƒ³ä¸€ä¸‹ç”Ÿæ´»ä¸­æœ‰å“ªäº›è£…é¥°ï¼š å¥³ç”Ÿçš„é¦–é¥°ï¼šæˆ’æŒ‡ã€è€³çŽ¯ã€é¡¹é“¾ç­‰è£…é¥°å“ å®¶å±…è£…é¥°å“ï¼šç²˜é’©ã€é•œå­ã€å£ç”»ã€ç›†æ ½ç­‰ æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›è£…é¥°å“å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°æ˜¯ä¸ºäº†ç¾Žï¼Œæˆ’æŒ‡ã€è€³çŽ¯ã€é¡¹é“¾ã€å£ç”»ã€ç›†æ ½ç­‰éƒ½æ˜¯ä¸ºäº†æé«˜é¢œå€¼æˆ–å¢žåŠ ç¾Žè§‚åº¦ã€‚ä½†ç²˜é’©ã€é•œå­ä¸ä¸€æ ·ï¼Œå®ƒä»¬æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŒ‚ä¸œè¥¿ã€æ´—æ¼±ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºè£…é¥°å“å…±æœ‰ä¸¤ç§åŠŸèƒ½ï¼š å¢žå¼ºåŽŸæœ‰çš„ç‰¹æ€§ï¼šæˆ‘ä»¬æœ¬èº«å°±æ˜¯æœ‰ä¸€å®šé¢œå€¼çš„ï¼Œæ·»åŠ è£…é¥°å“æé«˜äº†æˆ‘ä»¬çš„é¢œå€¼ã€‚åŒæ ·ï¼Œæˆ¿å±‹æœ¬èº«å°±æœ‰ä¸€å®šçš„ç¾Žè§‚åº¦ï¼Œå®¶å±…è£…é¥°æé«˜äº†æˆ¿å±‹çš„ç¾Žè§‚åº¦ã€‚ æ·»åŠ æ–°çš„ç‰¹æ€§ï¼šåœ¨å¢™ä¸ŠæŒ‚ä¸Šç²˜é’©ï¼Œè®©å¢™å£æœ‰äº†æŒ‚ä¸œè¥¿çš„åŠŸèƒ½ã€‚åœ¨æ´—æ¼±å°è£…ä¸Šé•œå­ï¼Œè®©æ´—æ¼±å°æœ‰äº†ç…§é•œå­çš„åŠŸèƒ½ã€‚ å¹¶ä¸”ï¼Œæˆ‘ä»¬å‘çŽ°è£…é¥°å“å¹¶ä¸ä¼šæ”¹å˜ç‰©å“æœ¬èº«ï¼Œåªæ˜¯èµ·åˆ°ä¸€ä¸ªé”¦ä¸Šæ·»èŠ±çš„ä½œç”¨ã€‚è£…é¥°æ¨¡å¼ä¹Ÿä¸€æ ·ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ï¼š å¢žå¼ºä¸€ä¸ªç±»åŽŸæœ‰çš„åŠŸèƒ½ ä¸ºä¸€ä¸ªç±»æ·»åŠ æ–°çš„åŠŸèƒ½å¹¶ä¸” è£…é¥°æ¨¡å¼ä¹Ÿä¸ä¼šæ”¹å˜åŽŸæœ‰çš„ç±»ã€‚ è£…é¥°æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢žåŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢žåŠ å¯¹è±¡åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®žçŽ°æ›´ä¸ºçµæ´»ã€‚å…¶åˆ«åä¹Ÿå¯ä»¥ç§°ä¸ºåŒ…è£…å™¨ï¼Œä¸Žé€‚é…å™¨æ¨¡å¼çš„åˆ«åç›¸åŒï¼Œä½†å®ƒä»¬é€‚ç”¨äºŽä¸åŒçš„åœºåˆã€‚æ ¹æ®ç¿»è¯‘çš„ä¸åŒï¼Œè£…é¥°æ¨¡å¼ä¹Ÿæœ‰äººç§°ä¹‹ä¸ºâ€œæ²¹æ¼†å·¥æ¨¡å¼â€ã€‚ 1. ç”¨äºŽå¢žå¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹æˆ´ä¸Šè£…é¥°å“æé«˜æˆ‘ä»¬é¢œå€¼çš„è¿‡ç¨‹ï¼š æ–°å»ºé¢œå€¼æŽ¥å£ï¼š123public interface IBeauty &#123; int getBeautyValue();&#125; æ–°å»º Me ç±»ï¼Œå®žçŽ°é¢œå€¼æŽ¥å£ï¼š12345678public class Me implements IBeauty &#123;â€‹ @Override public int getBeautyValue() &#123; return 100; &#125;&#125; æˆ’æŒ‡è£…é¥°ç±»ï¼Œå°† Me åŒ…è£…èµ·æ¥ï¼š12345678910111213public class RingDecorator implements IBeauty &#123; private final IBeauty me;â€‹ public RingDecorator(IBeauty me) &#123; this.me = me; &#125;â€‹ @Override public int getBeautyValue() &#123; return me.getBeautyValue() + 20; &#125;&#125; å®¢æˆ·ç«¯æµ‹è¯•ï¼š12345678910public class Client &#123; @Test public void show() &#123; IBeauty me = new Me(); System.out.println("æˆ‘åŽŸæœ¬çš„é¢œå€¼ï¼š" + me.getBeautyValue());â€‹ IBeauty meWithRing = new RingDecorator(me); System.out.println("æˆ´ä¸Šäº†æˆ’æŒ‡åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š" + meWithRing.getBeautyValue()); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š12æˆ‘åŽŸæœ¬çš„é¢œå€¼ï¼š100æˆ´ä¸Šäº†æˆ’æŒ‡åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š120 è¿™å°±æ˜¯æœ€ç®€å•çš„å¢žå¼ºåŠŸèƒ½çš„è£…é¥°æ¨¡å¼ã€‚ä»¥åŽæˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´å¤šçš„è£…é¥°ç±»ï¼Œæ¯”å¦‚ï¼š è€³çŽ¯è£…é¥°ç±»ï¼š123456789101112public class EarringDecorator implements IBeauty &#123; private final IBeauty me;â€‹ public EarringDecorator(IBeauty me) &#123; this.me = me; &#125;â€‹ @Override public int getBeautyValue() &#123; return me.getBeautyValue() + 50; &#125;&#125; é¡¹é“¾è£…é¥°ç±»ï¼š123456789101112public class NecklaceDecorator implements IBeauty &#123; private final IBeauty me;â€‹ public NecklaceDecorator(IBeauty me) &#123; this.me = me; &#125;â€‹ @Override public int getBeautyValue() &#123; return me.getBeautyValue() + 80; &#125;&#125; å®¢æˆ·ç«¯æµ‹è¯•ï¼š12345678910111213141516171819public class Client &#123; @Test public void show() &#123; IBeauty me = new Me(); System.out.println("æˆ‘åŽŸæœ¬çš„é¢œå€¼ï¼š" + me.getBeautyValue());â€‹ // éšæ„æŒ‘é€‰è£…é¥° IBeauty meWithNecklace = new NecklaceDecorator(me); System.out.println("æˆ´ä¸Šäº†é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š" + meWithNecklace.getBeautyValue());â€‹ // å¤šæ¬¡è£…é¥° IBeauty meWithManyDecorators = new NecklaceDecorator(new RingDecorator(new EarringDecorator(me))); System.out.println("æˆ´ä¸Šè€³çŽ¯ã€æˆ’æŒ‡ã€é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š" + meWithManyDecorators.getBeautyValue());â€‹ // ä»»æ„æ­é…è£…é¥° IBeauty meWithNecklaceAndRing = new NecklaceDecorator(new RingDecorator(me)); System.out.println("æˆ´ä¸Šæˆ’æŒ‡ã€é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š" + meWithNecklaceAndRing.getBeautyValue()); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š12345æˆ‘åŽŸæœ¬çš„é¢œå€¼ï¼š100æˆ´ä¸Šäº†é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š180æˆ´ä¸Šè€³çŽ¯ã€æˆ’æŒ‡ã€é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š250æˆ´ä¸Šæˆ’æŒ‡ã€é¡¹é“¾åŽï¼Œæˆ‘çš„é¢œå€¼ï¼š200 å¯ä»¥çœ‹åˆ°ï¼Œè£…é¥°å™¨ä¹Ÿå®žçŽ°äº† IBeauty æŽ¥å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„è£…é¥°å™¨ä»…ç”¨äºŽå¢žå¼ºåŠŸèƒ½ï¼Œå¹¶ä¸ä¼šæ”¹å˜ Me åŽŸæœ‰çš„åŠŸèƒ½ï¼Œè¿™ç§è£…é¥°æ¨¡å¼ç§°ä¹‹ä¸º é€æ˜Žè£…é¥°æ¨¡å¼ï¼Œç”±äºŽæ²¡æœ‰æ”¹å˜æŽ¥å£ï¼Œä¹Ÿæ²¡æœ‰æ–°å¢žæ–¹æ³•ï¼Œæ‰€ä»¥é€æ˜Žè£…é¥°æ¨¡å¼å¯ä»¥æ— é™è£…é¥°ã€‚ è£…é¥°æ¨¡å¼æ˜¯ ç»§æ‰¿ çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚æœ¬ä¾‹å¦‚æžœä¸ä½¿ç”¨è£…é¥°æ¨¡å¼ï¼Œè€Œæ˜¯æ”¹ç”¨ç»§æ‰¿å®žçŽ°çš„è¯ï¼Œæˆ´ç€æˆ’æŒ‡çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€é¡¹é“¾çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€è€³çŽ¯çš„ Me éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»ã€æˆ´ç€æˆ’æŒ‡ + é¡¹é“¾çš„éœ€è¦æ´¾ç”Ÿä¸€ä¸ªå­ç±»â€¦â€¦å„ç§å„æ ·çš„æŽ’åˆ—ç»„åˆä¼šé€ æˆç±»çˆ†ç‚¸ã€‚è€Œé‡‡ç”¨äº†è£…é¥°æ¨¡å¼å°±åªéœ€è¦ä¸ºæ¯ä¸ªè£…é¥°å“ç”Ÿæˆä¸€ä¸ªè£…é¥°ç±»å³å¯ï¼Œæ‰€ä»¥è¯´å°± å¢žåŠ å¯¹è±¡åŠŸèƒ½ æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®žçŽ°æ›´ä¸ºçµæ´»ã€‚ 2. ç”¨äºŽæ·»åŠ åŠŸèƒ½çš„è£…é¥°æ¨¡å¼æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹æˆ¿å±‹è£…é¥°ç²˜é’©åŽï¼Œæ–°å¢žäº†æŒ‚ä¸œè¥¿åŠŸèƒ½çš„è¿‡ç¨‹ï¼š æ–°å»ºæˆ¿å±‹æŽ¥å£ï¼š123public interface IHouse &#123; void live();&#125; æˆ¿å±‹ç±»ï¼š1234567public class House implements IHouse&#123;â€‹ @Override public void live() &#123; System.out.println("æˆ¿å±‹åŽŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½"); &#125;&#125; æ–°å»ºç²˜é’©è£…é¥°å™¨æŽ¥å£ï¼Œç»§æ‰¿è‡ªæˆ¿å±‹æŽ¥å£ï¼š123public interface IStickyHookHouse extends IHouse&#123; void hangThings();&#125; ç²˜é’©è£…é¥°ç±»ï¼š1234567891011121314151617public class StickyHookDecorator implements IStickyHookHouse &#123; private final IHouse house;â€‹ public StickyHookDecorator(IHouse house) &#123; this.house = house; &#125;â€‹ @Override public void live() &#123; house.live(); &#125;â€‹ @Override public void hangThings() &#123; System.out.println("æœ‰äº†ç²˜é’©åŽï¼Œæ–°å¢žäº†æŒ‚ä¸œè¥¿åŠŸèƒ½"); &#125;&#125; å®¢æˆ·ç«¯æµ‹è¯•ï¼š1234567891011public class Client &#123; @Test public void show() &#123; IHouse house = new House(); house.live();â€‹ IStickyHookHouse stickyHookHouse = new StickyHookDecorator(house); stickyHookHouse.live(); stickyHookHouse.hangThings(); &#125;&#125; è¿è¡Œç¨‹åºï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š123æˆ¿å±‹åŽŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½æˆ¿å±‹åŽŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½æœ‰äº†ç²˜é’©åŽï¼Œæ–°å¢žäº†æŒ‚ä¸œè¥¿åŠŸèƒ½ è¿™å°±æ˜¯ç”¨äºŽ æ–°å¢žåŠŸèƒ½ çš„è£…é¥°æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨æŽ¥å£ä¸­æ–°å¢žäº†æ–¹æ³•ï¼šhangThingsï¼Œç„¶åŽåœ¨è£…é¥°å™¨ä¸­å°† House ç±»åŒ…è£…èµ·æ¥ï¼Œä¹‹å‰ House ä¸­çš„æ–¹æ³•ä»ç„¶è°ƒç”¨ house åŽ»æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¹¶æ²¡æœ‰ä¿®æ”¹åŽŸæœ‰çš„åŠŸèƒ½ï¼Œåªæ˜¯æ‰©å±•äº†æ–°çš„åŠŸèƒ½ï¼Œè¿™ç§æ¨¡å¼åœ¨è£…é¥°æ¨¡å¼ä¸­ç§°ä¹‹ä¸º åŠé€æ˜Žè£…é¥°æ¨¡å¼ã€‚ ä¸ºä»€ä¹ˆå«åŠé€æ˜Žå‘¢ï¼Ÿç”±äºŽæ–°çš„æŽ¥å£ IStickyHookHouse æ‹¥æœ‰ä¹‹å‰ IHouse ä¸å…·æœ‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æžœè¦ä½¿ç”¨è£…é¥°å™¨ä¸­æ·»åŠ çš„åŠŸèƒ½ï¼Œå°±ä¸å¾—ä¸åŒºåˆ«å¯¹å¾… è£…é¥°å‰çš„å¯¹è±¡å’Œè£…é¥°åŽçš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯è¦ä½¿ç”¨æ–°æ–¹æ³•ï¼Œå¿…é¡»çŸ¥é“å…·ä½“çš„è£…é¥°ç±» StickyHookDecoratorï¼Œæ‰€ä»¥è¿™ä¸ªè£…é¥°ç±»å¯¹å®¢æˆ·ç«¯æ¥è¯´æ˜¯å¯è§çš„ã€ä¸é€æ˜Žçš„ã€‚è€Œè¢«è£…é¥°è€…ä¸ä¸€å®šè¦æ˜¯ Houseï¼Œå®ƒå¯ä»¥æ˜¯å®žçŽ°äº† IHouse æŽ¥å£çš„ä»»æ„å¯¹è±¡ï¼Œæ‰€ä»¥è¢«è£…é¥°è€…å¯¹å®¢æˆ·ç«¯æ˜¯ä¸å¯è§çš„ã€é€æ˜Žçš„ã€‚ç”±äºŽä¸€åŠé€æ˜Žï¼Œä¸€åŠä¸é€æ˜Žï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºåŠé€æ˜Žè£…é¥°æ¨¡å¼ã€‚ æˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´å¤šçš„è£…é¥°å™¨ï¼š æ–°å»ºé•œå­è£…é¥°å™¨çš„æŽ¥å£ï¼Œç»§æ‰¿è‡ªæˆ¿å±‹æŽ¥å£ï¼š123public interface IMirrorHouse extends IHouse &#123; void lookMirror();&#125; é•œå­è£…é¥°ç±»ï¼š1234567891011121314151617public class MirrorDecorator implements IMirrorHouse&#123; private final IHouse house;â€‹ public MirrorDecorator(IHouse house) &#123; this.house = house; &#125;â€‹ @Override public void live() &#123; house.live(); &#125;â€‹ @Override public void lookMirror() &#123; System.out.println("æœ‰äº†é•œå­åŽï¼Œæ–°å¢žäº†ç…§é•œå­åŠŸèƒ½"); &#125;&#125; å®¢æˆ·ç«¯æµ‹è¯•ï¼š1234567891011public class Client &#123; @Test public void show() &#123; IHouse house = new House(); house.live();â€‹ IMirrorHouse mirrorHouse = new MirrorDecorator(house); mirrorHouse.live(); mirrorHouse.lookMirror(); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š123æˆ¿å±‹åŽŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½æˆ¿å±‹åŽŸæœ‰çš„åŠŸèƒ½ï¼šå±…ä½åŠŸèƒ½â€‹æœ‰äº†é•œå­åŽï¼Œæ–°å¢žäº†ç…§é•œå­åŠŸèƒ½ çŽ°åœ¨æˆ‘ä»¬ä»¿ç…§ é€æ˜Žè£…é¥°æ¨¡å¼ çš„å†™æ³•ï¼ŒåŒæ—¶æ·»åŠ ç²˜é’©å’Œé•œå­è£…é¥°è¯•ä¸€è¯•ï¼š12345678910111213public class Client &#123; @Test public void show() &#123; IHouse house = new House(); house.live();â€‹ IStickyHookHouse stickyHookHouse = new StickyHookDecorator(house); IMirrorHouse houseWithStickyHookMirror = new MirrorDecorator(stickyHookHouse); houseWithStickyHookMirror.live(); houseWithStickyHookMirror.hangThings(); // è¿™é‡Œä¼šæŠ¥é”™ï¼Œæ‰¾ä¸åˆ° hangThings æ–¹æ³• houseWithStickyHookMirror.lookMirror(); &#125;&#125; â€‹æˆ‘ä»¬ä¼šå‘çŽ°ï¼Œç¬¬äºŒæ¬¡è£…é¥°æ—¶ï¼Œæ— æ³•èŽ·å¾—ä¸Šä¸€æ¬¡è£…é¥°æ·»åŠ çš„æ–¹æ³•ã€‚åŽŸå› å¾ˆæ˜Žæ˜¾ï¼Œå½“æˆ‘ä»¬ç”¨ IMirrorHouse è£…é¥°å™¨åŽï¼ŒæŽ¥å£å˜ä¸ºäº† IMirrorHouseï¼Œè¿™ä¸ªæŽ¥å£ä¸­å¹¶æ²¡æœ‰ hangThings æ–¹æ³•ã€‚ é‚£ä¹ˆæˆ‘ä»¬èƒ½å¦è®© IMirrorHouse ç»§æ‰¿è‡ª IStickyHookHouseï¼Œä»¥å®žçŽ°æ–°å¢žä¸¤ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ å¯ä»¥ï¼Œä½†é‚£æ ·åšçš„è¯ä¸¤ä¸ªè£…é¥°ç±»ä¹‹é—´æœ‰äº†ä¾èµ–å…³ç³»ï¼Œé‚£å°±ä¸æ˜¯è£…é¥°æ¨¡å¼äº†ã€‚è£…é¥°ç±»ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè€Œåº”è¯¥åœ¨åŽŸæœ¬çš„ç±»ä¸Šè¿›è¡Œè£…é¥°ã€‚è¿™å°±æ„å‘³ç€ï¼ŒåŠé€æ˜Žè£…é¥°æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å¤šæ¬¡è£…é¥°ã€‚ æœ‰çš„åŒå­¦ä¼šé—®äº†ï¼Œæ—¢å¢žå¼ºäº†åŠŸèƒ½ï¼Œåˆæ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼å«ä»€ä¹ˆå‘¢ï¼Ÿ â€”â€” ä¸¾ä¸€åä¸‰ï¼Œè‚¯å®šæ˜¯å«å…¨ä¸é€æ˜Žè£…é¥°æ¨¡å¼ï¼ â€”â€” å¹¶ä¸æ˜¯ï¼åªè¦æ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼éƒ½ç§°ä¹‹ä¸º åŠé€æ˜Žè£…é¥°æ¨¡å¼ï¼Œä»–ä»¬éƒ½å…·æœ‰ä¸å¯ä»¥å¤šæ¬¡è£…é¥°çš„ç‰¹ç‚¹ã€‚ä»”ç»†ç†è§£ä¸Šæ–‡åŠé€æ˜Žåç§°çš„ç”±æ¥å°±çŸ¥é“äº†ï¼Œâ€œé€æ˜Žâ€æŒ‡çš„æ˜¯æˆ‘ä»¬æ— éœ€çŸ¥é“è¢«è£…é¥°è€…å…·ä½“çš„ç±»ï¼Œæ—¢å¢žå¼ºäº†åŠŸèƒ½ï¼Œåˆæ·»åŠ äº†æ–°åŠŸèƒ½çš„è£…é¥°æ¨¡å¼ä»ç„¶å…·æœ‰åŠé€æ˜Žç‰¹æ€§ã€‚ çœ‹äº†è¿™ä¸¤ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å‘çŽ°è£…é¥°æ¨¡å¼å¾ˆç®€å•å‘¢ï¼Ÿæ­å–œä½ å­¦ä¼šäº† 1 + 1 = 2ï¼ŒçŽ°åœ¨ä½ å·²ç»æŽŒæ¡äº†ç®—æ•°çš„åŸºæœ¬æ€æƒ³ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥åšä¸€é“å¾®ç§¯åˆ†é¢˜ç»ƒä¹ ä¸€ä¸‹ã€‚ I/O ä¸­çš„è£…é¥°æ¨¡å¼I/O æŒ‡çš„æ˜¯ Input/Outputï¼Œå³è¾“å…¥ã€è¾“å‡ºã€‚æˆ‘ä»¬ä»¥ Input ä¸ºä¾‹ã€‚å…ˆåœ¨ src æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ readme.textï¼Œéšä¾¿å†™ç‚¹æ–‡å­—ï¼š123ç¦æ­¢å¥—å¨ƒç¦æ­¢ç¦æ­¢å¥—å¨ƒâ€‹ç¦æ­¢ç¦æ­¢ç¦æ­¢å¥—å¨ƒ ç„¶åŽç”¨ Java çš„ InputStream è¯»å–ï¼Œä»£ç ä¸€èˆ¬é•¿è¿™æ ·ï¼š12345678public void io() throws IOException &#123; InputStream in = new BufferedInputStream(new FileInputStream("src/readme.txt")); byte[] buffer = new byte[1024]; while (in.read(buffer) != -1) &#123; System.out.println(new String(buffer)); &#125; in.close();&#125; è¿™æ ·å†™æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æžœè¯»å–è¿‡ç¨‹ä¸­å‡ºçŽ°äº† IO å¼‚å¸¸ï¼ŒInputStream å°±ä¸èƒ½æ­£ç¡®å…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨tryâ€¦finallyæ¥ä¿è¯ InputStream æ­£ç¡®å…³é—­ï¼š1234567891011121314public void io() throws IOException &#123; InputStream in = null; try &#123; in = new BufferedInputStream(new FileInputStream("src/readme.txt")); byte[] buffer = new byte[1024]; while (in.read(buffer) != -1) &#123; System.out.println(new String(buffer)); &#125; &#125; finally &#123; if (in != null) &#123; in.close(); &#125; &#125;&#125; è¿™ç§å†™æ³•å®žåœ¨æ˜¯å¤ªä¸‘äº†ï¼Œè€Œ IO æ“ä½œåˆå¿…é¡»è¿™ä¹ˆå†™ï¼Œæ˜¾ç„¶ Java ä¹Ÿæ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ Java 7 ä¸­å¼•å…¥äº†try(resource)è¯­æ³•ç³–ï¼ŒIO çš„ä»£ç å°±å¯ä»¥ç®€åŒ–å¦‚ä¸‹ï¼š12345678public void io() throws IOException &#123; try (InputStream in = new BufferedInputStream(new FileInputStream("src/readme.txt"))) &#123; byte[] buffer = new byte[1024]; while (in.read(buffer) != -1) &#123; System.out.println(new String(buffer)); &#125; &#125;&#125; è¿™ç§å†™æ³•å’Œä¸Šä¸€ç§é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œè¿è¡Œç¨‹åºï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š123ç¦æ­¢å¥—å¨ƒç¦æ­¢ç¦æ­¢å¥—å¨ƒç¦æ­¢ç¦æ­¢ç¦æ­¢å¥—å¨ƒ è§‚å¯ŸèŽ·å– InputStream è¿™å¥ä»£ç ï¼š1InputStream in = new BufferedInputStream(new FileInputStream("src/readme.txt")); æ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬ä¹‹å‰å¤šæ¬¡è£…é¥°çš„ä»£ç éžå¸¸ç›¸ä¼¼ï¼š123// å¤šæ¬¡è£…é¥°IBeauty meWithManyDecorators = new NecklaceDecorator(new RingDecorator(new EarringDecorator(me))); äº‹å®žä¸Šï¼ŒæŸ¥çœ‹ I/O çš„æºç å¯çŸ¥ï¼ŒJava I/O çš„è®¾è®¡æ¡†æž¶ä¾¿æ˜¯ä½¿ç”¨çš„ è£…é¥°è€…æ¨¡å¼ï¼ŒInputStream çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š å…¶ä¸­ï¼ŒInputStream æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¯¹åº”ä¸Šæ–‡ä¾‹å­ä¸­çš„ IHouseï¼Œå…¶ä¸­æœ€é‡è¦çš„æ–¹æ³•æ˜¯ read æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼š1234567public abstract class InputStream implements Closeable &#123; public abstract int read() throws IOException; // ...&#125; è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›žå­—èŠ‚è¡¨ç¤ºçš„ int å€¼ï¼ˆ0~255ï¼‰ï¼Œè¿”å›ž -1 è¡¨ç¤ºå·²è¯»åˆ°æœ«å°¾ã€‚ç”±äºŽå®ƒæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥å…·ä½“çš„é€»è¾‘äº¤ç”±å­ç±»å®žçŽ°ã€‚ ä¸Šå›¾ä¸­ï¼Œå·¦è¾¹çš„ä¸‰ä¸ªç±» FileInputStreamã€ByteArrayInputStreamã€ServletInputStream æ˜¯ InputStream çš„ä¸‰ä¸ªå­ç±»ï¼Œå¯¹åº”ä¸Šæ–‡ä¾‹å­ä¸­å®žçŽ°äº† IHouse æŽ¥å£çš„ Houseã€‚ å³ä¸‹è§’çš„ä¸‰ä¸ªç±» BufferedInputStreamã€DataInputStreamã€CheckedInputStream æ˜¯ä¸‰ä¸ªå…·ä½“çš„è£…é¥°è€…ç±»ï¼Œä»–ä»¬éƒ½ä¸º InputStream å¢žå¼ºäº†åŽŸæœ‰åŠŸèƒ½æˆ–æ·»åŠ äº†æ–°åŠŸèƒ½ã€‚ FilterInputStream æ˜¯æ‰€æœ‰è£…é¥°ç±»çš„çˆ¶ç±»ï¼Œå®ƒæ²¡æœ‰å®žçŽ°å…·ä½“çš„åŠŸèƒ½ï¼Œä»…ç”¨æ¥åŒ…è£…äº†ä¸€ä¸‹ InputStreamï¼š12345678910111213public class FilterInputStream extends InputStream &#123; protected volatile InputStream in; protected FilterInputStream(InputStream in) &#123; this.in = in; &#125;â€‹ public int read() throws IOException &#123; return in.read(); &#125; //...&#125; æˆ‘ä»¬ä»¥ BufferedInputStream ä¸ºä¾‹ã€‚åŽŸæœ‰çš„ InputStream è¯»å–æ–‡ä»¶æ—¶ï¼Œæ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚è¯»å–çš„ï¼Œè¿™ç§æ–¹å¼çš„æ‰§è¡Œæ•ˆçŽ‡å¹¶ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç«‹ä¸€ä¸ªç¼“å†²åŒºï¼Œå…ˆå°†å†…å®¹è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œç¼“å†²åŒºè¯»æ»¡åŽï¼Œå°†å†…å®¹ä»Žç¼“å†²åŒºä¸­å–å‡ºæ¥ï¼Œè¿™æ ·å°±å˜æˆäº†ä¸€æ®µä¸€æ®µè¯»å–ï¼Œç”¨å†…å­˜æ¢å–æ•ˆçŽ‡ã€‚BufferedInputStream å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªçš„ã€‚å®ƒç»§æ‰¿è‡ª FilterInputStreamï¼š123456789101112131415161718public class BufferedInputStream extends FilterInputStream &#123; private static final int DEFAULT_BUFFER_SIZE = 8192; protected volatile byte buf[];â€‹ public BufferedInputStream(InputStream in) &#123; this(in, DEFAULT_BUFFER_SIZE); &#125;â€‹ public BufferedInputStream(InputStream in, int size) &#123; super(in); if (size &lt;= 0) &#123; throw new IllegalArgumentException("Buffer size &lt;= 0"); &#125; buf = new byte[size]; &#125; //...&#125; æˆ‘ä»¬å…ˆæ¥çœ‹å®ƒçš„æž„é€ æ–¹æ³•ï¼Œåœ¨æž„é€ æ–¹æ³•ä¸­ï¼Œæ–°å»ºäº†ä¸€ä¸ª byte[] ä½œä¸ºç¼“å†²åŒºï¼Œä»Žæºç ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ŒJava é»˜è®¤è®¾ç½®çš„ç¼“å†²åŒºå¤§å°ä¸º 8192 byteï¼Œä¹Ÿå°±æ˜¯ 8 KBã€‚ ç„¶åŽæˆ‘ä»¬æ¥æŸ¥çœ‹ read æ–¹æ³•ï¼š1234567891011121314151617â€‹public class BufferedInputStream extends FilterInputStream &#123; //...â€‹ public synchronized int read() throws IOException &#123; if (pos &gt;= count) &#123; fill(); if (pos &gt;= count) return -1; &#125; return getBufIfOpen()[pos++] &amp; 0xff; &#125;â€‹ private void fill() throws IOException &#123; // å¾€ç¼“å†²åŒºå†…å¡«å……è¯»å–å†…å®¹çš„è¿‡ç¨‹ //... &#125;&#125; åœ¨ read æ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº† fill æ–¹æ³•ï¼Œfill æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å¾€ç¼“å†²åŒºä¸­å¡«å……è¯»å–çš„å†…å®¹ã€‚è¿™æ ·å°±å®žçŽ°äº†å¢žå¼ºåŽŸæœ‰çš„åŠŸèƒ½ã€‚ åœ¨æºç ä¸­æˆ‘ä»¬å‘çŽ°ï¼ŒBufferedInputStream æ²¡æœ‰æ·»åŠ  InputStream ä¸­æ²¡æœ‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥ BufferedInputStream ä½¿ç”¨çš„æ˜¯ é€æ˜Žçš„è£…é¥°æ¨¡å¼ã€‚ DataInputStream ç”¨äºŽæ›´åŠ æ–¹ä¾¿åœ°è¯»å– intã€double ç­‰å†…å®¹ï¼Œè§‚å¯Ÿ DataInputStream çš„æºç å¯ä»¥å‘çŽ°ï¼ŒDataInputStream ä¸­æ–°å¢žäº† readIntã€readLong ç­‰æ–¹æ³•ï¼Œæ‰€ä»¥ DataInputStream ä½¿ç”¨çš„æ˜¯ åŠé€æ˜Žè£…é¥°æ¨¡å¼ã€‚ ç†è§£äº† InputStream åŽï¼Œå†çœ‹ä¸€ä¸‹ OutputStream çš„ç»§æ‰¿å…³ç³»ï¼Œç›¸ä¿¡å¤§å®¶ä¸€çœ¼å°±èƒ½çœ‹å‡ºå„ä¸ªç±»çš„ä½œç”¨äº†ï¼š è¿™å°±æ˜¯è£…é¥°æ¨¡å¼ï¼Œæ³¨æ„ä¸è¦å’Œé€‚é…å™¨æ¨¡å¼æ··æ·†äº†ã€‚ä¸¤è€…åœ¨ä½¿ç”¨æ—¶éƒ½æ˜¯åŒ…è£…ä¸€ä¸ªç±»ï¼Œä½†ä¸¤è€…çš„åŒºåˆ«å…¶å®žä¹Ÿå¾ˆæ˜Žæ˜¾ï¼š çº¯ç²¹çš„é€‚é…å™¨æ¨¡å¼ ä»…ç”¨äºŽæ”¹å˜æŽ¥å£ï¼Œä¸æ”¹å˜å…¶åŠŸèƒ½ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸€ç‚¹åŠŸèƒ½ä»¥é€‚é…æ–°æŽ¥å£ã€‚ä½†ä½¿ç”¨é€‚é…å™¨æ¨¡å¼æ—¶ï¼ŒæŽ¥å£ä¸€å®šä¼šæœ‰ä¸€ä¸ª å›žç‚‰é‡é€  çš„è¿‡ç¨‹ã€‚ è£…é¥°æ¨¡å¼ ä¸æ”¹å˜åŽŸæœ‰çš„æŽ¥å£ï¼Œä»…ç”¨äºŽå¢žå¼ºåŽŸæœ‰åŠŸèƒ½æˆ–æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¼ºè°ƒçš„æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚ æŽŒæ¡äº†è£…é¥°è€…æ¨¡å¼ä¹‹åŽï¼Œç†è§£ Java I/O çš„æ¡†æž¶è®¾è®¡å°±éžå¸¸å®¹æ˜“äº†ã€‚ä½†å¯¹äºŽä¸ç†è§£è£…é¥°æ¨¡å¼çš„äººæ¥è¯´ï¼Œå„ç§å„æ ·ç›¸ä¼¼çš„ InputStream éžå¸¸å®¹æ˜“è®©å¼€å‘è€…æ„Ÿåˆ°å›°æƒ‘ã€‚è¿™ä¸€ç‚¹æ­£æ˜¯è£…é¥°æ¨¡å¼çš„ç¼ºç‚¹ï¼šå®¹æ˜“é€ æˆç¨‹åºä¸­æœ‰å¤§é‡ç›¸ä¼¼çš„ç±»ã€‚è™½ç„¶è¿™æ›´åƒæ˜¯å¼€å‘è€…çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥åšçš„æ˜¯æé«˜è‡ªå·±çš„æŠ€æœ¯ï¼ŒæŽŒæ¡äº†è¿™ä¸ªè®¾è®¡æ¨¡å¼ä¹‹åŽå®ƒå°±æ˜¯æˆ‘ä»¬çš„ä¸€æŠŠåˆ©å™¨ã€‚çŽ°åœ¨æˆ‘ä»¬å†çœ‹åˆ° I/O ä¸åŒçš„ InputStream è£…é¥°ç±»ï¼Œåªéœ€è¦å…³æ³¨å®ƒå¢žå¼ºäº†ä»€ä¹ˆåŠŸèƒ½æˆ–æ·»åŠ äº†ä»€ä¹ˆåŠŸèƒ½å³å¯ã€‚ äº”ã€å¤–è§‚æ¨¡å¼å¤–è§‚æ¨¡å¼éžå¸¸ç®€å•ï¼Œä½“çŽ°çš„å°±æ˜¯ Java ä¸­å°è£…çš„æ€æƒ³ã€‚å°†å¤šä¸ªå­ç³»ç»Ÿå°è£…èµ·æ¥ï¼Œæä¾›ä¸€ä¸ªæ›´ç®€æ´çš„æŽ¥å£ä¾›å¤–éƒ¨è°ƒç”¨ã€‚ å¤–è§‚æ¨¡å¼ï¼šå¤–éƒ¨ä¸Žä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æŽ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æŽ¥å£ï¼Œè¿™ä¸ªæŽ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚å¤–è§‚æ¨¡å¼åˆç§°ä¸ºé—¨é¢æ¨¡å¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æ¯å¤©æ‰“å¼€ç”µè„‘æ—¶ï¼Œéƒ½éœ€è¦åšä¸‰ä»¶äº‹ï¼š æ‰“å¼€æµè§ˆå™¨ æ‰“å¼€ IDE æ‰“å¼€å¾®ä¿¡ æ¯å¤©ä¸‹ç­æ—¶ï¼Œå…³æœºå‰éœ€è¦åšä¸‰ä»¶äº‹ï¼š å…³é—­æµè§ˆå™¨ å…³é—­ IDE å…³é—­å¾®ä¿¡ ç”¨ç¨‹åºæ¨¡æ‹Ÿå¦‚ä¸‹ï¼š æ–°å»ºæµè§ˆå™¨ç±»ï¼š123456789public class Browser &#123; public static void open() &#123; System.out.println("æ‰“å¼€æµè§ˆå™¨"); &#125;â€‹ public static void close() &#123; System.out.println("å…³é—­æµè§ˆå™¨"); &#125;â€‹&#125; æ–°å»º IDE ç±»ï¼š123456789public class IDE &#123; public static void open() &#123; System.out.println("æ‰“å¼€ IDE"); &#125;â€‹ public static void close() &#123; System.out.println("å…³é—­ IDE"); &#125;&#125; æ–°å»ºå¾®ä¿¡ç±»ï¼š123456789public class Wechat &#123; public static void open() &#123; System.out.println("æ‰“å¼€å¾®ä¿¡"); &#125;â€‹ public static void close() &#123; System.out.println("å…³é—­å¾®ä¿¡"); &#125;&#125; å®¢æˆ·ç«¯è°ƒç”¨ï¼š1234567891011121314public class Client &#123; @Test public void test() &#123; System.out.println("ä¸Šç­:"); Browser.open(); IDE.open(); Wechat.open();â€‹ System.out.println("ä¸‹ç­:"); Browser.close(); IDE.close(); Wechat.close(); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š12345678ä¸Šç­:æ‰“å¼€æµè§ˆå™¨æ‰“å¼€ IDEæ‰“å¼€å¾®ä¿¡ä¸‹ç­:å…³é—­æµè§ˆå™¨å…³é—­ IDEå…³é—­å¾®ä¿¡ ç”±äºŽæˆ‘ä»¬æ¯å¤©éƒ½è¦åšè¿™å‡ ä»¶äº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ å¤–è§‚æ¨¡å¼ï¼Œå°†è¿™å‡ ä¸ªå­ç³»ç»Ÿå°è£…èµ·æ¥ï¼Œæä¾›æ›´ç®€æ´çš„æŽ¥å£ï¼š12345678910111213public class Facade &#123; public void open() &#123; Browser.open(); IDE.open(); Wechat.open(); &#125;â€‹ public void close() &#123; Browser.close(); IDE.close(); Wechat.close(); &#125;&#125; å®¢æˆ·ç«¯å°±å¯ä»¥ç®€åŒ–ä»£ç ï¼Œåªå’Œè¿™ä¸ªå¤–è§‚ç±»æ‰“äº¤é“ï¼š1234567891011public class Client &#123; @Test public void test() &#123; Facade facade = new Facade(); System.out.println("ä¸Šç­:"); facade.open();â€‹ System.out.println("ä¸‹ç­:"); facade.close(); &#125;&#125; â€‹è¿è¡Œç¨‹åºï¼Œè¾“å‡ºä¸Žä¹‹å‰ä¸€æ ·ã€‚ å¤–è§‚æ¨¡å¼å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå®ƒä½¿å¾—ä¸¤ç§ä¸åŒçš„ç±»ä¸ç”¨ç›´æŽ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶â€”â€”ä¹Ÿå°±æ˜¯å¤–è§‚ç±»â€”â€”é—´æŽ¥äº¤äº’ã€‚å¤–è§‚ç±»ä¸­åªéœ€è¦æš´éœ²ç®€æ´çš„æŽ¥å£ï¼Œéšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œæ‰€ä»¥è¯´ç™½äº†å°±æ˜¯å°è£…çš„æ€æƒ³ã€‚ å¤–è§‚æ¨¡å¼éžå¸¸å¸¸ç”¨ï¼Œï¼ˆå½“ç„¶äº†ï¼å†™ä»£ç å“ªæœ‰ä¸å°è£…çš„ï¼ï¼‰å°¤å…¶æ˜¯åœ¨ç¬¬ä¸‰æ–¹åº“çš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æä¾›å°½é‡ç®€æ´çš„æŽ¥å£ä¾›åˆ«äººè°ƒç”¨ã€‚å¦å¤–ï¼Œåœ¨ MVC æž¶æž„ä¸­ï¼ŒC å±‚ï¼ˆControllerï¼‰å°±å¯ä»¥çœ‹ä½œæ˜¯å¤–è§‚ç±»ï¼ŒModel å’Œ View å±‚é€šè¿‡ Controller äº¤äº’ï¼Œå‡å°‘äº†è€¦åˆã€‚ å…­ã€äº«å…ƒæ¨¡å¼äº«å…ƒæ¨¡å¼ä½“çŽ°çš„æ˜¯ ç¨‹åºå¯å¤ç”¨ çš„ç‰¹ç‚¹ï¼Œä¸ºäº†èŠ‚çº¦å®è´µçš„å†…å­˜ï¼Œç¨‹åºåº”è¯¥å°½å¯èƒ½åœ°å¤ç”¨ï¼Œå°±åƒã€Šæžé™ç¼–ç¨‹ã€‹ä½œè€… Kent åœ¨ä¹¦é‡Œè¯´åˆ°çš„é‚£æ ·ï¼šDonâ€™t repeat yourself. ç®€å•æ¥è¯´ äº«å…ƒæ¨¡å¼å°±æ˜¯å…±äº«å¯¹è±¡ï¼Œæé«˜å¤ç”¨æ€§ï¼Œå®˜æ–¹çš„å®šä¹‰å€’æ˜¯æ˜¾å¾—æ–‡ç»‰ç»‰çš„ï¼š äº«å…ƒæ¨¡å¼ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ç³»ç»Ÿåªä½¿ç”¨å°‘é‡çš„å¯¹è±¡ï¼Œè€Œè¿™äº›å¯¹è±¡éƒ½å¾ˆç›¸ä¼¼ï¼ŒçŠ¶æ€å˜åŒ–å¾ˆå°ï¼Œå¯ä»¥å®žçŽ°å¯¹è±¡çš„å¤šæ¬¡å¤ç”¨ã€‚ç”±äºŽäº«å…ƒæ¨¡å¼è¦æ±‚èƒ½å¤Ÿå…±äº«çš„å¯¹è±¡å¿…é¡»æ˜¯ç»†ç²’åº¦å¯¹è±¡ï¼Œå› æ­¤å®ƒåˆç§°ä¸ºè½»é‡çº§æ¨¡å¼ã€‚ â€‹æœ‰ä¸ªç»†èŠ‚å€¼å¾—æ³¨æ„ï¼šæœ‰äº›å¯¹è±¡æœ¬èº«ä¸ä¸€æ ·ï¼Œä½†é€šè¿‡ä¸€ç‚¹ç‚¹å˜åŒ–åŽå°±å¯ä»¥å¤ç”¨ï¼Œæˆ‘ä»¬ç¼–ç¨‹æ—¶å¯èƒ½ç¨ä¸æ³¨æ„å°±ä¼šå¿˜è®°å¤ç”¨è¿™äº›å¯¹è±¡ã€‚æ¯”å¦‚è¯´ä¼Ÿå¤§çš„ã€Šè¶…çº§çŽ›ä¸½ã€‹ï¼Œè°èƒ½æƒ³åˆ°è‰å’Œäº‘æ›´æ”¹ä¸€ä¸‹é¢œè‰²å°±å¯ä»¥å®žçŽ°å¤ç”¨å‘¢ï¼Ÿ è¿˜æœ‰é‡Œé¢çš„ä¸‰ç§ä¹Œé¾Ÿï¼Œæ¢ä¸€ä¸ªé¢œè‰²ã€åŠ ä¸€ä¸ªè£…é¥°å°±å˜æˆäº†ä¸åŒçš„æ€ªï¼š åœ¨ã€Šè¶…çº§çŽ›ä¸½ã€‹ä¸­ï¼Œè¿™æ ·çš„ç»†èŠ‚è¿˜æœ‰å¾ˆå¤šï¼Œæ­£æ˜¯è¿™äº›ç²¾æ¹›çš„å¤ç”¨ä½¿å¾—è¿™ä¸€æ¬¾çº¢éå…¨çƒçš„æ¸¸æˆä»…æœ‰ 40KB å¤§å°ã€‚æ­£æ˜¯å°è¯äº†é‚£å¥åè¨€ï¼šç¥žåœ¨ç»†èŠ‚ä¹‹ä¸­ã€‚ ä¸ƒã€ä»£ç†æ¨¡å¼çŽ°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª äºº ç±»ï¼Œä»–æ•´å¤©å°±åªè´Ÿè´£åƒé¥­ã€ç¡è§‰ï¼š äººç±»çš„æŽ¥å£1234public interface IPerson &#123; void eat(); void sleep();&#125; äºº ç±»ï¼š123456789101112public class Person implements IPerson&#123;â€‹ @Override public void eat() &#123; System.out.println("æˆ‘åœ¨åƒé¥­"); &#125;â€‹ @Override public void sleep() &#123; System.out.println("æˆ‘åœ¨ç¡è§‰"); &#125;&#125; å®¢æˆ·ç«¯æµ‹è¯•ï¼š12345678public class Client &#123; @Test public void test() &#123; Person person = new Person(); person.eat(); person.sleep(); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š12â€‹æˆ‘åœ¨åƒé¥­æˆ‘åœ¨ç¡è§‰ æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç±»åŒ…è£…åˆ°å¦ä¸€ä¸ªç±»ä¸­ï¼Œå®žçŽ°å®Œå…¨ä¸€æ ·çš„è¡Œä¸ºï¼š123456789101112131415161718public class PersonProxy implements IPerson &#123;â€‹ private final Person person;â€‹ public PersonProxy(Person person) &#123; this.person = person; &#125;â€‹ @Override public void eat() &#123; person.eat(); &#125;â€‹ @Override public void sleep() &#123; person.sleep(); &#125;&#125; å°†å®¢æˆ·ç«¯ä¿®æ”¹ä¸ºè°ƒç”¨è¿™ä¸ªæ–°çš„ç±»ï¼š123456789public class Client &#123; @Test public void test() &#123; Person person = new Person(); PersonProxy proxy = new PersonProxy(person); proxy.eat(); proxy.sleep(); &#125;â€‹&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š12æˆ‘åœ¨åƒé¥­æˆ‘åœ¨ç¡è§‰ è¿™å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚ ç¬”è€…å°½é‡ç”¨æœ€ç®€æ´çš„ä»£ç è®²è§£æ­¤æ¨¡å¼ï¼Œåªè¦ç†è§£äº†ä¸Šè¿°è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å°±çŸ¥é“ä»£ç†æ¨¡å¼æ˜¯æ€Žä¹ˆä¸€å›žäº‹äº†ã€‚æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯å’Œ Person ç±»ä¹‹é—´æ–°å¢žäº†ä¸€ä¸ªä¸­é—´ä»¶ PersonProxyï¼Œè¿™ä¸ªç±»å°±å«åšä»£ç†ç±»ï¼Œä»–å®žçŽ°äº†å’Œ Person ç±»ä¸€æ¨¡ä¸€æ ·çš„è¡Œä¸ºã€‚ ä»£ç†æ¨¡å¼ï¼šç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æŽ§åˆ¶å¯¹åŽŸå¯¹è±¡çš„å¼•ç”¨ã€‚ çŽ°åœ¨è¿™ä¸ªä»£ç†ç±»è¿˜çœ‹ä¸å‡ºä»»ä½•æ„ä¹‰ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹å·¥ä½œä¸­çš„éœ€æ±‚ã€‚åœ¨å®žé™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šåœ¨ç½‘ç»œè¯·æ±‚å‰åŽï¼Œåˆ†åˆ«æ‰“å°å°†è¦å‘é€çš„æ•°æ®å’ŒæŽ¥æ”¶åˆ°æ•°æ®ä½œä¸ºæ—¥å¿—ä¿¡æ¯ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥æ–°å»ºä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„ä»£ç†ç±»ï¼Œè®©å®ƒä»£ä¸ºå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå¹¶åœ¨ä»£ç†ç±»ä¸­æ‰“å°è¿™äº›æ—¥å¿—ä¿¡æ¯ã€‚ æ–°å»ºç½‘ç»œè¯·æ±‚æŽ¥å£ï¼š12345public interface IHttp &#123; void request(String sendData);â€‹ void onSuccess(String receivedData);&#125; æ–°å»º Http è¯·æ±‚å·¥å…·ç±»ï¼š1234567891011public class HttpUtil implements IHttp &#123; @Override public void request(String sendData) &#123; System.out.println("ç½‘ç»œè¯·æ±‚ä¸­..."); &#125;â€‹ @Override public void onSuccess(String receivedData) &#123; System.out.println("ç½‘ç»œè¯·æ±‚å®Œæˆã€‚"); &#125;&#125; æ–°å»º Http ä»£ç†ç±»ï¼š1234567891011121314151617public class HttpProxy implements IHttp &#123; private final HttpUtil httpUtil;â€‹ public HttpProxy(HttpUtil httpUtil) &#123; this.httpUtil = httpUtil; &#125;â€‹ @Override public void request(String sendData) &#123; httpUtil.request(sendData); &#125;â€‹ @Override public void onSuccess(String receivedData) &#123; httpUtil.onSuccess(receivedData); &#125;&#125; åˆ°è¿™é‡Œï¼Œå’Œæˆ‘ä»¬ä¸Šè¿°åƒé¥­ç¡è§‰çš„ä»£ç æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ŒçŽ°åœ¨æˆ‘ä»¬åœ¨ HttpProxy ä¸­æ–°å¢žæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š12345678910111213141516171819public class HttpProxy implements IHttp &#123; private final HttpUtil httpUtil;â€‹ public HttpProxy(HttpUtil httpUtil) &#123; this.httpUtil = httpUtil; &#125;â€‹ @Override public void request(String sendData) &#123; System.out.println("å‘é€æ•°æ®:" + sendData); httpUtil.request(sendData); &#125;â€‹ @Override public void onSuccess(String receivedData) &#123; System.out.println("æ”¶åˆ°æ•°æ®:" + receivedData); httpUtil.onSuccess(receivedData); &#125;&#125; å®¢æˆ·ç«¯éªŒè¯ï¼š123456789public class Client &#123; @Test public void test() &#123; HttpUtil httpUtil = new HttpUtil(); HttpProxy proxy = new HttpProxy(httpUtil); proxy.request("request data"); proxy.onSuccess("received result"); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š1234å‘é€æ•°æ®:request dataç½‘ç»œè¯·æ±‚ä¸­...æ”¶åˆ°æ•°æ®:received resultç½‘ç»œè¯·æ±‚å®Œæˆã€‚ è¿™å°±æ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªåº”ç”¨ï¼Œé™¤äº† æ‰“å°æ—¥å¿—ï¼Œå®ƒè¿˜å¯ä»¥ç”¨æ¥åšæƒé™ç®¡ç†ã€‚è¯»è€…çœ‹åˆ°è¿™é‡Œå¯èƒ½å·²ç»å‘çŽ°äº†ï¼Œè¿™ä¸ªä»£ç†ç±»çœ‹èµ·æ¥å’Œè£…é¥°æ¨¡å¼çš„ FilterInputStream ä¸€æ¨¡ä¸€æ ·ï¼Œä½†ä¸¤è€…çš„ç›®çš„ä¸åŒï¼Œè£…é¥°æ¨¡å¼æ˜¯ä¸ºäº† å¢žå¼ºåŠŸèƒ½æˆ–æ·»åŠ åŠŸèƒ½ï¼Œä»£ç†æ¨¡å¼ä¸»è¦æ˜¯ä¸ºäº†åŠ ä»¥æŽ§åˆ¶ã€‚ åŠ¨æ€ä»£ç†ä¸Šä¾‹ä¸­çš„ä»£ç†è¢«ç§°ä¹‹ä¸ºé™æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†ä¸Žé™æ€ä»£ç†çš„åŽŸç†ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯æ¢äº†ä¸€ç§å†™æ³•ã€‚ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼Œéœ€è¦æŠŠä¸€ä¸ªç±»ä¼ å…¥ï¼Œç„¶åŽæ ¹æ®å®ƒæ­£åœ¨è°ƒç”¨çš„æ–¹æ³•ååˆ¤æ–­æ˜¯å¦éœ€è¦åŠ ä»¥æŽ§åˆ¶ã€‚ç”¨ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š1234567891011121314151617181920public class HttpProxy &#123; private final HttpUtil httpUtil;â€‹ public HttpProxy(HttpUtil httpUtil) &#123; this.httpUtil = httpUtil; &#125;â€‹ // å‡è®¾è°ƒç”¨ httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½è¦é€šè¿‡è¿™ä¸ªæ–¹æ³•é—´æŽ¥è°ƒç”¨, methodName è¡¨ç¤ºæ–¹æ³•åï¼Œargs è¡¨ç¤ºæ–¹æ³•ä¸­ä¼ å…¥çš„å‚æ•° public visit(String methodName, Object[] args) &#123; if (methodName.equals("request")) &#123; // å¦‚æžœæ–¹æ³•åæ˜¯ requestï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ request æ–¹æ³•ï¼Œargs çš„ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•° System.out.println("å‘é€æ•°æ®:" + args[0]); httpUtil.request(args[0].toString()); &#125; else if (methodName.equals("onSuccess")) &#123; // å¦‚æžœæ–¹æ³•åæ˜¯ onSuccessï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ onSuccess æ–¹æ³•ï¼Œargs çš„ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•° System.out.println("æ”¶åˆ°æ•°æ®:" + args[0]); httpUtil.onSuccess(args[0].toString()); &#125; &#125;&#125; ä¼ªä»£ç çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå®žçŽ°èµ·æ¥å”¯ä¸€çš„éš¾ç‚¹å°±æ˜¯ æ€Žä¹ˆè®© httpUtil è°ƒç”¨ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½é€šè¿‡ä¸€ä¸ªæ–¹æ³•é—´æŽ¥è°ƒç”¨ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ°åå°„æŠ€æœ¯ï¼Œä¸äº†è§£åå°„æŠ€æœ¯ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸å¦¨æŠŠå®ƒè®°åšå›ºå®šçš„å†™æ³•ã€‚å®žé™…çš„åŠ¨æ€ä»£ç†ç±»ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324public class HttpProxy implements InvocationHandler &#123; private HttpUtil httpUtil;â€‹ public IHttp getInstance(HttpUtil httpUtil) &#123; this.httpUtil = httpUtil; return (IHttp) Proxy.newProxyInstance(httpUtil.getClass().getClassLoader(), httpUtil.getClass().getInterfaces(), this); &#125;â€‹ // è°ƒç”¨ httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½è¦é€šè¿‡è¿™ä¸ªæ–¹æ³•è°ƒç”¨ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; Object result = null; if (method.getName().equals("request")) &#123; // å¦‚æžœæ–¹æ³•åæ˜¯ requestï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ request æ–¹æ³• System.out.println("å‘é€æ•°æ®:" + args[0]); result = method.invoke(httpUtil, args); &#125; else if (method.getName().equals("onSuccess")) &#123; // å¦‚æžœæ–¹æ³•åæ˜¯ onSuccessï¼Œæ‰“å°æ—¥å¿—ï¼Œå¹¶è°ƒç”¨ onSuccess æ–¹æ³• System.out.println("æ”¶åˆ°æ•°æ®:" + args[0]); result = method.invoke(httpUtil, args); &#125; return result; &#125;&#125; å…ˆçœ‹ getInstance æ–¹æ³•ï¼ŒProxy.newProxyInstance æ–¹æ³•æ˜¯ Java ç³»ç»Ÿæä¾›çš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºŽåŠ¨æ€ä»£ç†ã€‚å…¶ä¸­ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«ä»£ç†çš„ç±»çš„ ClassLoaderï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«ä»£ç†ç±»çš„ Interfacesï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Object ä¸­çš„ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ï¼Œè¿™é‡Œå°±æ˜¯å›ºå®šå†™æ³•ã€‚æˆ‘ä»¬åªè¦çŸ¥é“ç³»ç»Ÿéœ€è¦è¿™ä¸¤ä¸ªå‚æ•°æ‰èƒ½è®©æˆ‘ä»¬å®žçŽ°æˆ‘ä»¬çš„ç›®çš„ï¼šè°ƒç”¨è¢«ä»£ç†ç±»çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½é€šè¿‡ä¸€ä¸ªæ–¹æ³•é—´æŽ¥è°ƒç”¨ã€‚çŽ°åœ¨æˆ‘ä»¬ç»™ç³»ç»Ÿæä¾›äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œç³»ç»Ÿå°±ä¼šåœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­å¸®æˆ‘ä»¬å®žçŽ°è¿™ä¸ªç›®çš„ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ InvocationHandler æŽ¥å£ï¼Œè¿™ä¸ªæŽ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š1public Object invoke(Object proxy, Method method, Object[] args) throws Throwable; â€‹é‚£ä¹ˆä¸ç”¨çŒœå°±çŸ¥é“ï¼ŒçŽ°åœ¨æˆ‘ä»¬è°ƒç”¨è¢«ä»£ç†ç±» httpUtil çš„ä»»æ„æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šé€šè¿‡è¿™ä¸ª invoke æ–¹æ³•è°ƒç”¨äº†ã€‚invoke æ–¹æ³•ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬æš‚æ—¶ç”¨ä¸ä¸Šï¼Œç¬¬äºŒä¸ªå‚æ•° method å°±æ˜¯è°ƒç”¨çš„æ–¹æ³•ï¼Œä½¿ç”¨ method.getName() å¯ä»¥èŽ·å–åˆ°æ–¹æ³•åï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è°ƒç”¨ method æ–¹æ³•éœ€è¦ä¼ å…¥çš„å‚æ•°ã€‚æœ¬ä¾‹ä¸­æ— è®º request è¿˜æ˜¯ onSuccess éƒ½åªæœ‰ä¸€ä¸ª String ç±»åž‹çš„å‚æ•°ï¼Œå¯¹åº”åˆ°è¿™é‡Œå°±æ˜¯ args[0]ã€‚è¿”å›žçš„ Object æ˜¯ method æ–¹æ³•çš„è¿”å›žå€¼ï¼Œæœ¬ä¾‹ä¸­éƒ½æ˜¯æ— è¿”å›žå€¼çš„ã€‚ æˆ‘ä»¬åœ¨ invoke æ–¹æ³•ä¸­åˆ¤æ–­äº†å½“å‰è°ƒç”¨æ–¹æ³•çš„æ–¹æ³•åï¼Œå¦‚æžœçŽ°åœ¨è°ƒç”¨çš„æ–¹æ³•æ˜¯ requestï¼Œé‚£ä¹ˆæ‰“å°è¯·æ±‚å‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿™ä¸€è¡Œä»£ç ç»§ç»­æ‰§è¡Œå½“å‰æ–¹æ³•ï¼š1result = method.invoke(httpUtil, args); è¿™å°±æ˜¯ åå°„è°ƒç”¨å‡½æ•° çš„å†™æ³•ï¼Œå¦‚æžœä¸äº†è§£å¯ä»¥è®°åšå›ºå®šå†™æ³•ï¼Œæƒ³è¦äº†è§£çš„åŒå­¦å¯ä»¥çœ‹ä¹‹å‰çš„è¿™ç¯‡æ–‡ç« ï¼šè¯¦è§£é¢è¯•ä¸­å¸¸è€ƒçš„ Java åå°„æœºåˆ¶ã€‚è™½ç„¶è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›žå€¼ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å°† result è¿”å›žï¼Œè¿™æ˜¯æ ‡å‡†åšæ³•ã€‚ å¦‚æžœçŽ°åœ¨è°ƒç”¨çš„æ–¹æ³•æ˜¯ onSuccessï¼Œé‚£ä¹ˆæ‰“å°æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå¹¶åå°„ç»§ç»­æ‰§è¡Œå½“å‰æ–¹æ³•ã€‚ ä¿®æ”¹å®¢æˆ·ç«¯éªŒè¯ä¸€ä¸‹ï¼š123456789public class Client &#123; @Test public void test() &#123; HttpUtil httpUtil = new HttpUtil(); IHttp proxy = new HttpProxy().getInstance(httpUtil); proxy.request("request data"); proxy.onSuccess("received result"); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºä¸Žä¹‹å‰ä¸€æ ·ï¼š1234å‘é€æ•°æ®:request dataç½‘ç»œè¯·æ±‚ä¸­...æ”¶åˆ°æ•°æ®:received resultç½‘ç»œè¯·æ±‚å®Œæˆã€‚ åŠ¨æ€ä»£ç†æœ¬è´¨ä¸Šä¸Žé™æ€ä»£ç†æ²¡æœ‰åŒºåˆ«ï¼Œå®ƒçš„å¥½å¤„æ˜¯ èŠ‚çœä»£ç é‡ã€‚æ¯”å¦‚è¢«ä»£ç†ç±»æœ‰ 20 ä¸ªæ–¹æ³•ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦æŽ§åˆ¶å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥ç”¨åŠ¨æ€ä»£ç†é€šè¿‡æ–¹æ³•åå¯¹è¢«ä»£ç†ç±»è¿›è¡ŒåŠ¨æ€çš„æŽ§åˆ¶ï¼Œè€Œå¦‚æžœç”¨é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å¦å¤–çš„ 18 ä¸ªæ–¹æ³•ä¹Ÿå†™å‡ºæ¥ï¼Œéžå¸¸ç¹çã€‚è¿™å°±æ˜¯åŠ¨æ€ä»£ç†çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚ å…«. äº«å…ƒæ¨¡å¼ Flyweight Patternè‹±æ–‡æ˜¯ Flyweight Patternï¼Œä¸çŸ¥é“æ˜¯è°æœ€å…ˆç¿»è¯‘çš„è¿™ä¸ªè¯ï¼Œæ„Ÿè§‰è¿™ç¿»è¯‘çœŸçš„ä¸å¥½ç†è§£ï¼Œæˆ‘ä»¬è¯•ç€å¼ºè¡Œå…³è”èµ·æ¥å§ã€‚Flyweight æ˜¯è½»é‡çº§çš„æ„æ€ï¼Œäº«å…ƒåˆ†å¼€æ¥è¯´å°±æ˜¯ å…±äº« å…ƒå™¨ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤ç”¨å·²ç»ç”Ÿæˆçš„å¯¹è±¡ï¼Œè¿™ç§åšæ³•å½“ç„¶ä¹Ÿå°±æ˜¯è½»é‡çº§çš„äº†ã€‚ å¤ç”¨å¯¹è±¡æœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼Œç”¨ä¸€ä¸ª HashMap æ¥å­˜æ”¾æ¯æ¬¡æ–°ç”Ÿæˆçš„å¯¹è±¡ã€‚æ¯æ¬¡éœ€è¦ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå…ˆåˆ° HashMap ä¸­çœ‹çœ‹æœ‰æ²¡æœ‰ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå†ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œç„¶åŽå°†è¿™ä¸ªå¯¹è±¡æ”¾å…¥ HashMap ä¸­ ç»“æž„åž‹æ¨¡å¼æ€»ç»“å‰é¢ï¼Œæˆ‘ä»¬è¯´äº†ä»£ç†æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¢æ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€é—¨é¢æ¨¡å¼ã€ç»„åˆæ¨¡å¼å’Œäº«å…ƒæ¨¡å¼ã€‚è¯»è€…æ˜¯å¦å¯ä»¥åˆ†åˆ«æŠŠè¿™å‡ ä¸ªæ¨¡å¼è¯´æ¸…æ¥šäº†å‘¢ï¼Ÿåœ¨è¯´åˆ°è¿™äº›æ¨¡å¼çš„æ—¶å€™ï¼Œå¿ƒä¸­æ˜¯å¦æœ‰ä¸€ä¸ªæ¸…æ™°çš„å›¾æˆ–å¤„ç†æµç¨‹åœ¨è„‘æµ·é‡Œå‘¢ï¼Ÿ ä»£ç†æ¨¡å¼æ˜¯åšæ–¹æ³•å¢žå¼ºçš„ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯æŠŠé¸¡åŒ…è£…æˆé¸­è¿™ç§ç”¨æ¥é€‚é…æŽ¥å£çš„ï¼Œæ¡¥æ¢æ¨¡å¼åšåˆ°äº†å¾ˆå¥½çš„è§£è€¦ï¼Œè£…é¥°æ¨¡å¼ä»Žåå­—ä¸Šå°±çœ‹å¾—å‡ºæ¥ï¼Œé€‚åˆäºŽè£…é¥°ç±»æˆ–è€…è¯´æ˜¯å¢žå¼ºç±»çš„åœºæ™¯ï¼Œé—¨é¢æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒå®žä¾‹åŒ–è¿‡ç¨‹ï¼Œåªè¦è°ƒç”¨éœ€è¦çš„æ–¹æ³•å³å¯ï¼Œç»„åˆæ¨¡å¼ç”¨äºŽæè¿°å…·æœ‰å±‚æ¬¡ç»“æž„çš„æ•°æ®ï¼Œäº«å…ƒæ¨¡å¼æ˜¯ä¸ºäº†åœ¨ç‰¹å®šçš„åœºæ™¯ä¸­ç¼“å­˜å·²ç»åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨äºŽæé«˜æ€§èƒ½ã€‚ æœ¬æ–‡ä½œè€…ï¼šAlpinist Wang å£°æ˜Žï¼šæœ¬æ–‡å½’ â€œåŠ›æ‰£â€ ç‰ˆæƒæ‰€æœ‰ï¼Œå¦‚éœ€è½¬è½½è¯·è”ç³»ã€‚æ–‡ç« å°é¢å›¾å’Œæ–‡ä¸­éƒ¨åˆ†å›¾ç‰‡æ¥æºäºŽç½‘ç»œï¼Œä¸ºéžå•†ä¸šç”¨é€”ä½¿ç”¨ï¼Œå¦‚æœ‰ä¾µæƒè”ç³»åˆ é™¤ã€‚ ç¼–è¾‘äºŽ 2019-11-28]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Design Patterns</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CV And SoP]]></title>
    <url>%2F2019%2F05%2F14%2FCV-AND-SOP%2F</url>
    <content type="text"><![CDATA[THE GUIDELINE OF CV AND SOP(PS) ç¾Žå›½ç ”ç©¶ç”Ÿç”³è¯·æ—¶ç»å¸¸ä¼šåœ¨Application Requirementséƒ¨åˆ†çœ‹åˆ°å‡ ç§ä¸åŒåç§°çš„ç”³è¯·æ–‡ä¹¦ï¼Œæ¯”å¦‚ï¼špersonal statementï¼ŒPSï¼ŒPersonal history statementï¼Œstatementï¼ŒStatement of goalsï¼ŒPersonal purposeï¼Œpersonal essayæˆ–Statement of Purposeã€‚ä¸ç®¡åå­—å¦‚ä½•å˜åŒ–ï¼Œå…¶å®žå°±æ˜¯æˆ‘ä»¬å¤§å®¶éƒ½çŸ¥é“çš„ç ”ç©¶ç”Ÿç”³è¯·ä¸»æ–‡ä¹¦â€”â€”ä¸ªäººé™ˆè¿°ï¼Œåªä¸è¿‡ä¸åŒçš„ç¾Žå›½å¤§å­¦åœ¨ç”³è¯·æ—¶å…³æ³¨ç”³è¯·äººçš„ä¾§é‡ç‚¹ä¸åŒï¼Œè¦æ±‚å­¦ç”Ÿä¸»è¦é™ˆè¿°å’Œä»‹ç»è‡ªå·±çš„å†…å®¹å æ¯”ä¸åŒï¼Œä½†æ ¸å¿ƒå†…å®¹å¹¶æ— å¤ªå¤šå·®å¼‚ã€‚ é€šè¿‡ä¸Šé¢è¿™äº›ç¾Žå›½å¤§å­¦çš„å®˜æ–¹ç ”ç©¶ç”Ÿç”³è¯·æ–‡ä¹¦çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¸ªäººé™ˆè¿°æ–‡ä¹¦ä¸»è¦æ˜¯è®©ç”³è¯·äººè¦æè¿°ä¸ªäººèƒŒæ™¯ï¼ç»åŽ†ã€å­¦ä¹ ï¼å­¦æœ¯æƒ…å†µã€ä¸Žç”³è¯·ä¸“ä¸šç›¸å…³çš„ç ”ç©¶ï¼å®žä¹ ï¼å·¥ä½œæƒ…å†µï¼Œä»¥åŠèŒä¸šç›®æ ‡è¿™å››éƒ¨åˆ†ã€‚ æˆ‘è¦ç”³è¯·ä»€ä¹ˆä¸“ä¸šï¼é¡¹ç›®ï¼Ÿè¦ç”³è¯·å…·ä½“å“ªä¸ªåˆ†æ”¯ï¼Ÿ æˆ‘ä¸ºä»€ä¹ˆè¦ç”³è¯·è¿™ä¸ªä¸“ä¸šï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªåˆ†æ”¯ï¼Ÿ æˆ‘ä»€ä¹ˆç‰¹æ®Šç»åŽ†æˆ–ä¸ªäººåŽŸå› è®©ä½ å¼€å§‹å…³æ³¨è¿™ä¸ªä¸“ä¸šé¢†åŸŸï¼Œå¼€å§‹å¯¹è¿™ä¸ªåˆ†æ”¯æ–¹å‘æ„Ÿå…´è¶£ï¼Ÿ æˆ‘æ˜¯å¦ä¹‹å‰åœ¨å­¦ä¹ ã€ç ”ç©¶ã€å®žä¹ æˆ–å·¥ä½œä¸­æœ‰ä¸Žç”³è¯·ä¸“ä¸šå’Œç”³è¯·åˆ†æ”¯ç›¸å…³çš„ä¸ªäººç»åŽ†ã€å­¦æœ¯èƒ½åŠ›ã€ä¸“ä¸šæŠ€èƒ½æˆ–ç ”ç©¶æˆæžœï¼Ÿ æˆ‘è§‰å¾—æˆ‘ç›®å‰åœ¨è¿™ä¸ªä¸“ä¸šå’Œè¿™ä¸ªåˆ†æ”¯é¢†åŸŸè¿˜å­˜åœ¨å“ªäº›ä¸è¶³ï¼Œè¿˜å¸Œæœ›è¿›è¡Œæ€Žæ ·çš„ä¸“ä¸šèƒ½åŠ›æå‡å’Œè‡ªæˆ‘å®Œå–„ï¼Ÿ æˆ‘æœªæ¥çš„å­¦ä¹ ï¼ç ”ç©¶è®¡åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘æœªæ¥çš„çŸ­æœŸå’Œé•¿æœŸçš„èŒä¸šè§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘ä¸ºä»€ä¹ˆä¼šé€‰æ‹©ç”³è¯·è¿™æ‰€å¤§å­¦ï¼Ÿå¸å¼•æˆ‘çš„ä¸»è¦å› ç´ éƒ½æœ‰å“ªäº›ï¼Ÿ é™¤äº†å­¦æœ¯ã€ç ”ç©¶ã€å·¥ä½œæ–¹é¢ç»åŽ†å’Œèƒ½åŠ›æœ¬èº«ï¼Œä½ è¿˜æœ‰å“ªäº›ä¸ªäººç‹¬ç‰¹çš„ã€æœ‰åˆ«å…¶ä»–äººçš„åœ°æ–¹ï¼Ÿ UCSD çœ‹ä¸Šé¢å®˜ç½‘æˆªå›¾å›¾ç‰‡å†…å®¹æˆ‘ä»¬èƒ½çœ‹å‡ºï¼Œè¦æ±‚PSç¯‡å¹…1é¡µï¼Œå¹¶ä¸”éœ€è¦åŒ…æ‹¬ï¼šä½ æ„Ÿå…´è¶£çš„å…·ä½“é¢†åŸŸï¼Œä½ å…³æ³¨çš„åˆ†æ”¯æ–¹å‘ï¼Œä»¥åŠä½ æ„Ÿå…´è¶£çš„æ•™æŽˆæ˜¯è°ã€‚è¿™ä¸ªPSçš„å‘½é¢˜è¦æ±‚éœ€è¦æˆ‘ä»¬æ³¨æ„æ˜Žç¡®ç¯‡å¹…å­—æ•°ï¼ŒåŒæ—¶æ–‡ä¹¦å†…å®¹é‡ç‚¹æ˜¯åœ¨å­¦æœ¯èƒ½åŠ›å’Œé¡¹ç›®ç ”ç©¶æ–¹é¢åŽ»ä»‹ç»è‡ªå·±å’Œå±•ç¤ºè‡ªå·±èƒ½åŠ›ï¼Œä»¥åŠè¦å¯¹è¿™ä¸ªå­¦æ ¡çš„ç”³è¯·éƒ¨é—¨å’Œæ•™æŽˆä»¬æœ‰ä¸€äº›äº†è§£å’Œå…³æ³¨ï¼Œå› ä¸ºæ˜¯è¦æ˜Žç¡®å…·ä½“çš„å›žç­”ä½ æ„Ÿå…´è¶£è¿™ä¸ªå­¦æ ¡çš„åˆ†æ”¯æ–¹å‘å’ŒæŸä¸ªæ•™æŽˆçš„ï¼Œå¦‚æžœä½ ä¸æå‰è¿›è¡Œäº†è§£ï¼Œå›žç­”çš„æ²¡æœ‰é’ˆå¯¹æ€§ï¼Œæˆ–è€…ä½ æåˆ°çš„æ•™æŽˆæ“…é•¿ç ”ç©¶é¢†åŸŸæ ¹æœ¬ä¸æ˜¯ä½ æ–‡ä¹¦ä¸­è¡¨è¾¾çš„æ„Ÿå…´è¶£æ–¹å‘ï¼Œé‚£ä¹ˆä½ è¿™æ ·çš„å†…å®¹è¡¨è¿°ä¹Ÿä¼šç»™ä½ çš„ç”³è¯·å‡åˆ†ã€‚æˆ‘ä¸è¿‡è¿™ä¸ªå­¦æ ¡çš„é¢˜ç›®è¦æ±‚å¹¶ä¸ç¯‡ï¼Œå®Œå…¨å¯ä»¥åœ¨é€šç”¨ç‰ˆPSçš„åŸºç¡€ä¸Šæœ€åŽè¡¥å……1-2å¥æ„Ÿå…´è¶£æ•™æŽˆå’Œå¯¹äºŽè¿™åæ•™æŽˆçš„æ„Ÿå…´è¶£åŽŸå› å°±å¯ä»¥äº†ï¼Œå› ä¸ºå¤§éƒ¨åˆ†é€šç”¨ç‰ˆçš„PSå†…å®¹ä¸­æˆ‘æ˜¯ä¼šç»™å­¦ç”Ÿä»¬ç›´æŽ¥é™ˆè¿°å‡ºç”³è¯·äººæ“…é•¿å’Œæ„Ÿå…´è¶£çš„é¢†åŸŸå’Œåˆ†æ”¯æ–¹å‘çš„ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹ä¸éœ€è¦é¢å¤–æ–°å¢žå’Œè¡¥å……ï¼Œåªæ˜¯æœ‰é’ˆå¯¹æ€§çš„è¡¥å……æ„Ÿå…´è¶£æ•™æŽˆå°±è¡Œäº†ã€‚ University of Michiganâ€“Ann Arborçš„ç”³è¯·æ–‡ä¹¦è¦æ±‚ä¸­éœ€è¦åŒæ—¶é€’äº¤ä¸¤ç§æ–‡ä¹¦ï¼Œåˆ†åˆ«æ˜¯Statement of Purposeå’ŒPersonal Statementï¼Œ è¿™ä¸¤ä¸ªä¸åŒåç§°çš„æ–‡ä¹¦åœ¨å†…å®¹è¦æ±‚ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œç¬¬ä¸€ä¸ªStatement of Purposeä¸»è¦æ˜¯è®©æˆ‘ä»¬ä»‹ç»è‡ªå·±å…³äºŽå­¦æœ¯ã€ç ”ç©¶æ–¹é¢çš„èƒŒæ™¯å’Œæœªæ¥èŒä¸šè§„åˆ’ï¼Œè¿™äº›éƒ¨åˆ†æ­£å¥½æ˜¯æˆ‘ä¸Šé¢æåˆ°è¦åœ¨é€šç”¨ç‰ˆPSä¸­æ¶µç›–çš„ç¬¬1ã€2ã€4ã€5ã€6ã€7é—®é¢˜éƒ¨åˆ†å†…å®¹ã€‚ç¬¬äºŒä¸ªPersonal Statementä¸»è¦æ˜¯è®©æˆ‘ä»¬è®²è¿°è‡ªå·±çš„ä¸ªäººç»åŽ†ã€æƒ³æ³•è§‚ç‚¹ã€å…´è¶£å€¾å‘ï¼Œä»¥åŠé€‰æ‹©ç”³è¯·è¿™æ‰€å¤§å­¦æ ¸å¿ƒéƒ¨åˆ†åŽŸå› ç­‰å†…å®¹ï¼Œè¿™äº›éƒ¨åˆ†æ­£å¥½æ˜¯æˆ‘ä¸Šé¢æåˆ°è¦åœ¨é€šç”¨ç‰ˆPSä¸­æ¶µç›–çš„ç¬¬3ã€8ã€9é—®é¢˜éƒ¨åˆ†å†…å®¹ã€‚æˆ‘ä»¬åªè¦æ ¹æ®é¢˜ç›®å°†é€šç”¨ç‰ˆPSå†…å®¹è¿›è¡Œæœ‰æ•ˆæ‹†åˆ†å°±å¯ä»¥äº†ï¼Œä¹Ÿå¹¶ä¸éœ€è¦è·Ÿåˆ«å•ç‹¬å†æ–°å†™ä¸¤ç¯‡æ–‡ä¹¦çš„ã€‚ ç‰¹åˆ«ã€ç‰¹åˆ«ã€ç‰¹åˆ«é‡ç‚¹å¼ºè°ƒçš„å…³é”®ç‚¹ï¼š PSå†…å®¹ä¸è¦å†™çš„è·Ÿresumeæˆ–CVä¸€æ ·ï¼Œå°±æ˜¯ä¸ç”¨å†å®Œæ•´çš„é™ˆè¿°ä¸€éä½ ç®€åŽ†ä¸­å·²ç»å‡ºçŽ°è¿‡çš„å†…å®¹äº†ï¼Œå› ä¸ºç”³è¯·æ–‡ä¹¦ä¹‹é—´æ˜¯ç›¸äº’å‘¼åº”å’Œç»“åˆçš„ï¼Œæ‰€ä»¥PSè¦æœ‰é’ˆå¯¹æ€§å’Œä¾§é‡ç‚¹çš„åŽ»è¡¨è¿°é‡ç‚¹ï¼Œè€Œä¸æ˜¯æµæ°´è´¦ä¸€æ ·çš„å†è®²ä¸€éï¼ PSç”³è¯·æ–‡ä¹¦è¡¨è¿°çš„å½¢å¼è¦ä»¥å­¦æœ¯é£Žæ ¼ä¸ºä¸»ï¼Œä¸¥è°¨ã€æœ‰æ¡ç†ã€æœ‰é€»è¾‘æœ€é‡è¦ï¼Œè¦å®¢è§‚é™ˆè¿°ï¼Œé¿å…ä½¿ç”¨è¿‡å¤šå½¢å®¹è¯ï¼Œä½†ä¸è¦èŠ±å¾ˆå¤§æ¯”é‡åŽ»è®²è¿°å’Œä½“çŽ°ä½ çš„å­¦æœ¯æˆ–é¡¹ç›®ç ”ç©¶å®Œæˆè¿‡ç¨‹å’Œé¡¹ç›®è°ƒç ”å¤§ç¯‡å¹…å†…å®¹ï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯é€šè¿‡Writing sampleæˆ–Research paperåŽ»å±•ç¤ºçš„ï¼Œè€Œä¸æ˜¯PSã€‚ å¦‚æžœæˆ‘ä»¬é€’äº¤ç”³è¯·æ—¶ä¼šåŒæ—¶é€’äº¤å‡ ç¯‡æ–‡ä¹¦ï¼ˆç®€åŽ†é™¤å¤–ï¼‰ï¼Œé‚£ä¹ˆè¯·æ³¨æ„æ¯ç¯‡æ–‡ä¹¦ä¹‹é—´çš„ç´ æé€‰æ‹©å’Œæ–‡ä¹¦å†…å®¹è¦æœ‰ä¸åŒï¼Œä¸è¦æœ‰å¤ªå¤šç›¸åŒå†…å®¹é‡å¤å‡ºçŽ°ï¼Œå› ä¸ºäººæ˜¯å¤šå…ƒçš„ï¼Œæ‰€ä»¥è¯·å°½é‡æ›´å¤šç´ æé€‰æ‹©çš„åŽ»å…¨é¢å±•ç¤ºè‡ªå·±ã€‚ CV SOPå¯«ä½œå¿ƒå¾— ç•™å­¸ç”³è«‹(10) - è®“åˆ¥äººä¸€çœ¼å°±äº†è§£ä½ çš„CV å¥³åšå£«çš„ç”³è«‹è¨˜éŒ„ï¼ˆå¥¹çš„éƒ¨è½æ ¼ï¼‰ UCSDæ•™æŽˆçµ¦å‡ºçš„æŒ‡å°Žå»ºè­°(é‡è¦) UCSDæ•™æŽˆå’Œä»–çš„å­¸ç”Ÿåœ¨ç”³è«‹æ–¯å¦ä½›åšå£«å­¸ä½æ™‚ä½¿ç”¨çš„SOP Advice for Foreign Students Wishing to Pursue Graduate Study in Computer Science at UCSC by Professor Jim Whitehead Native Speaker Editor+ç†å·¥å•†æ³•å°ˆæ¥­èƒŒæ™¯ + ä¸­æ–‡å®¢æœ(é«˜å­¸æ­·+è±å¯Œç¾Žåœ‹å·¥ä½œç¶“é©—) modify ç”³è«‹æ–‡ä»¶ï¼šPersonal Statement Shau-ru Lin(shau.ru.lin@gmail.com)ï¼Œè²»ç”¨è¨ˆç®—æ˜¯(2012/2013)ï¼š Translation: $0.10/word (72 hours); $0.12/word (24 hours) English Editing: $0.05/word (72 hours); $0.06/word (24 hours) ##å­—æ•°è¦æ±‚ï¼š personal_statement ï¼š ä¸‰ç‰ˆ 500 700 1000 SOP ï¼šä¸‰ç‰ˆ 500 700 1000 ä¸åŒå­¸æ ¡çš„SOPå¯èƒ½æœƒæœ‰ä¸åŒçš„å­—é«”, å­—æ•¸é™åˆ¶, æœ‰äº›å­¸æ ¡çš„å­—æ•¸é™åˆ¶æ˜¯æ­»çš„, ä¹Ÿå°±æ˜¯èªªä»–ä¸æœƒè®“ä½ ä¸Šå‚³WORDæˆ–PDFæª”,è€Œæ˜¯åœ¨ç”³è«‹ç³»çµ±å…§ç›´æŽ¥æ‰“å­—, ç•¶ä½ æ‰“è¶…éŽè¦å®šçš„å­—æ•¸æ™‚ä»–ä¹Ÿä¸æœƒè®“ä½ å¯«ä¸‹åŽ»äº†, è€Œæœ‰äº›å­¸æ ¡å‰‡æ˜¯ä¸Šå‚³WORDæˆ–PDFæª”, å¯ä»¥ç¹³äº¤è¶…éŽå­¸æ ¡å­—æ•¸è¦å®šçš„SOP, ä½†æ˜¯è¶…éŽå­—æ•¸æœƒæœ‰ç”šéº¼å¾Œæžœæœ‰ç”šéº¼å½±éŸ¿ç•¶ç„¶é‚„æ˜¯è¦å…ˆå¯„ä¿¡è·Ÿå­¸æ ¡å•æ¸…æ¥š, å¦‚æžœæ ¡æ–¹èªªæ²’å•é¡Œ, ç•¶ç„¶å¯ä»¥å°è¶…éŽä¸€äº›, æˆ‘å¯«SOPçš„æ–¹å¼æ˜¯å…ˆæŠŠç¬¬ä¸€å¿—é¡˜çš„SOPå¯«å‡ºä¾†, æˆ‘çš„ç¬¬ä¸€å¿—é¡˜SOPæ‰€é™åˆ¶çš„å­—æ•¸æ˜¯1000å­—, å¦å¤–å¹¾é–“å­¸æ ¡éƒ½é™åˆ¶500å­—æˆ–800å­—, å…ˆæŠŠæœ€é•·çš„å¯«å®Œ, ä¹‹å¾Œå†ç”¨1000å­—çš„ä¿®å³å¯, SOPçš„æ ¼å¼ä¾ç…§ä¾ƒå¨çš„å»ºè­°æŽ¡å–5è‡³6æ®µ, ç¬¬ä¸€æ®µçš„ç›®çš„æ˜¯è¦å¸å¼•è®€è€…æ‰€ä»¥æœƒä»¥é¡žä¼¼å°èªªçš„å¯«æ³•ä½œç‚ºé–‹é ­. äºŒä¸‰æ®µåˆ†åˆ¥åœ¨æè¿°è‡ªå·±åœ¨å­¸æ ¡åšéŽçš„å…©å€‹projects, ç¬¬å››æ®µå‰‡æ˜¯è¬›ç•¢æ¥­å°ˆé¡Œ, äº”èˆ‡å…­æ®µå‰‡æ˜¯åœ¨è¬›å­¸æ ¡çš„èª²ç¨‹æˆ–æ˜¯å­¸æ ¡æœ‰å“ªæ–¹é¢å¾ˆå¸å¼•ä½ , ä»¥åŠä½ çš„æœªä¾†è¦åŠƒ. CVæ–¹é¢å¦‚æžœä½ æœ‰ç™¼publicationé‚£ç•¶ç„¶æ˜¯éžå¸¸åŠ åˆ†çš„, publicationä¹‹ä¸‹å°±æ˜¯åœ¨å­¸æ ¡åšçš„å„å€‹projectæˆ–è‡ªå·±åšçš„side-project, ä½ è¦ºå¾—è¶Šé‡è¦è¶Šèƒ½å¸å¼•å¯©æŸ¥å“¡çœ¼ç›çš„ç¶“æ­·å°±è¦æ”¾åœ¨è¶Šå‰é¢, ä¾‹å¦‚æˆ‘æ²’æœ‰ç™¼éŽä»»ä½•çš„publication, æˆ‘å°±æŠŠæˆ‘åœ¨å­¸æ ¡åšçš„å…©å€‹å°ˆé¡Œä»¥åŠç•¢æ¥­å°ˆé¡Œæ”¾åœ¨æœ€å‰é¢, å› ç‚ºè‡ªå·±æœ‰è¨±å¤šå¿—å·¥ç¶“æ­·ä¹Ÿæœ‰å‰µç«‹éŽç¤¾åœ˜, é€™äº›ç›¸æ¯”ä¹‹ä¸‹æ¯”è¼ƒæ²’é‚£éº¼é‡è¦çš„å°±æ”¾åœ¨å¾Œé¢çš„é æ•¸, CVæˆ‘å€‹äººèªç‚ºä¸è¦è¶…éŽ2é , è€Œæœ‰äº›äººä¹Ÿèªªå¯©æŸ¥è€…é€šå¸¸åªæœƒçœ‹ç¬¬ä¸€é , æ‰€ä»¥èªªèƒ½ç›¡é‡æŠ“ä½ä»–å€‘çœ¼ç›çš„æ±è¥¿å°±ç›¡é‡å¾€å‰ç§», æŽ’ç‰ˆæ–¹é¢ä¾ƒå¨ä¹Ÿå¹«æˆ‘ä¿®äº†å¤§æ¦‚5â€“6æ¬¡, ç¶²è·¯ä¸Šä¹Ÿæœ‰è¨±å¤šçš„templateå¯ä¾›å¤§å®¶åšé¸æ“‡. Reference NWUåŒå­¦çš„CV é€™è£¡æ˜¯å¥³åšå£«çš„ç”³è«‹æ–‡ä»¶ NTU_UCLA æœ‰ä¼¯å…‹åˆ©çš„å°å¤§ç”µæœºç³»åŒå­¦çš„åœ¨ç”µè„‘é‡Œé¢å¯ä»¥æ‹¿æ¥å‚è€ƒ åŸºæœ¬çŸ¥è¯†ï¼š1. personal statementâ†’ä¸ºä»€ä¹ˆæ¥è¯»ï¼ˆå…´è¶£ï¼‰ï¼Œä¸ºä»€ä¹ˆé€‰é¡¹ç›®ï¼Œä¸ºç›®æ ‡åšäº†ä»€ä¹ˆï¼ˆç»åŽ†ï¼‰ï¼Œå¯ä»¥ç»™é¡¹ç›®å¸¦æ¥ä»€ä¹ˆï¼ˆå¯¹åŒå­¦è´¡çŒ®ï¼Œå¯¹æ•™æŽˆè´¡çŒ®ï¼‰ 2. SOPâ†’è¦æ±‚ä¸€ç¯‡sop=psï¼ˆä¸ªäººç»åŽ†ï¼Œè¯¾å¤–æ´»åŠ¨ï¼Œå¿—æ„¿è€…ï¼Œäººç”Ÿè§„åˆ’ç­‰ï¼‰--å­¦æœ¯ç”Ÿæ´»å†™ä¸€ç¯‡ï¼Œè¦æ±‚ä¸¤ç¯‡--sopä¾§é‡å­¦æœ¯ï¼ˆå­¦æœ¯å…´è¶£ï¼ŒèŒä¸šè§„åˆ’ï¼Œå­¦æœ¯ç»åŽ†ï¼‰--åˆ†å¼€å†™ï¼Œé€‚å½“å¢žå‡ã€‚ 3. statement of diversityâ†’å­¦ç”ŸèƒŒæ™¯å¤šæ ·æ€§ï¼ˆå­¦æœ¯é¢†åŸŸï¼Œå…´è¶£ï¼Œå®¶åº­ï¼Œç¤¾ä¼šæ—ç¾¤ï¼‰ï¼Œæˆ‘çš„è§„åˆ’èƒ½å¸¦æ¥ä»€ä¹ˆå¤šæ ·æ€§ï¼ˆä»€ä¹ˆå¤šæ ·æ€§ï¼Œæ€Žä¹ˆå¸¦æ¥ï¼‰eg.ä¸­åŒ»ä¸–å®¶ç”³è¯·ç”Ÿç‰©åŒ»è¯ï¼Œæ”¿åºœå®˜å‘˜å®¶åº­ï¼ˆäº†è§£ä¸­å›½ï¼‰ç”³è¯·ç¤¾ä¼šå­¦åŽ†å²å­¦ç­‰ï¼Œå°‘æ•°æ°‘æ—ï¼ˆè¯­è¨€èžåˆï¼‰ç”³è¯·è¯­è¨€ç±»ï¼Œå®¶åº­èƒŒæ™¯ï¼ˆå’Œæœ¬å›½æ¯”ï¼‰å·®æ€Žä¹ˆå¯¹è‡ªå·±æ€§æ ¼å¡‘é€ äº§ç”Ÿå½±å“ 4. æœ‰äº›å­¦æ ¡æœ‰æ˜Žç¡®è¦æ±‚ï¼ŒæŒ‰ç…§è¦æ±‚æ¥ã€‚eg.æœ‰äº›å­¦æ ¡ä¼šè¦æ±‚â€˜ä¸è¦å†™ä»€ä¹ˆâ€™ï¼Œå¯ä»¥æ‰“ç”µè¯/å‘é‚®ä»¶ç»™å°èœœï¼ˆé—®psçš„æ˜Žç¡®è¦æ±‚ï¼‰ 5. æ ¼å¼è¦æ±‚ï¼šå¯ä»¥æœ‰é¡µçœ‰ï¼ˆCVä¸è¦æœ‰ï¼‰ï¼Œæ­£æ–‡å°±åˆ«å†å†™é¢˜ç›®äº†ï¼Œä¸€å®šè¦æœ‰é¡µç ï¼Œç”¨é»˜è®¤é¡µè¾¹è·ï¼Œç”¨TIMESæˆ–è€…Cabrialï¼Œå­—å·12ï¼Œä¸è¦æœ‰æ°´å°/Logoï¼Œæ ¹æ®è¦æ±‚ï¼ˆsingle spaceï¼Œdouble spaceï¼‰ï¼Œä¸è¦åˆ†ç‰ˆå—ï¼Œæ®µé¦–ç¼©è¿›äº”æ ¼ï¼ˆæ•²äº”ä¸‹ï¼‰ å†™ä»€ä¹ˆ/æ€Žä¹ˆå†™ï¼š1. æˆ‘æœ‰ä»€ä¹ˆå…´è¶£ï¼Œä¸ºä»€ä¹ˆï¼Œåšäº†ä»€ä¹ˆï¼Œæ„å‘³ç€ä»€ä¹ˆï¼ˆåšäº†å“ªäº›æ€è€ƒï¼Œå¾—åˆ°äº†ä»€ä¹ˆï¼‰ï¼Œä¸ºä»€ä¹ˆé€‰è¿™ä¸ªé¡¹ç›® 2. å­¦æ ¡çœ‹å®Œpsè¦èƒ½å›žç­”çš„ä¸‰ä¸ªé—®é¢˜ï¼š * ä¸ºä»€ä¹ˆèƒ½å†graduate levelçš„å­¦ä¹ ä¸­æˆåŠŸï¼ˆå­¦ä¹ èƒ½åŠ›ï¼Œå­¦ä¹ æ€åº¦â†’GPAï¼ŒåŸºç¡€çŸ¥è¯†â†’æˆç»©å•ï¼Œè‹¥æ²¡æœ‰ï¼Œéœ€è¦å†™å‡ºâ€˜æˆ‘æœ‰è¶³å¤Ÿçš„åŸºç¡€â€™ï¼Œæˆ‘æœ‰å…´è¶£ï¼‰ * ä¸ºä»€ä¹ˆèƒ½åœ¨èŒä¸šå‘å±•ä¸­æˆåŠŸï¼ˆæœ‰çƒ­æƒ…/å…´è¶£ï¼Œå¯¹é¢†åŸŸæœ‰ç†è§£ï¼Œæœ‰ç»éªŒâ†’ç»†èŠ‚ï¼Œæœ‰èƒ½åŠ›ï¼‰ * ä¸ºä»€ä¹ˆæˆ‘å’Œä½ çš„é¡¹ç›®å¾ˆåŒ¹é…ï¼ˆä¸ºä»€ä¹ˆé¡¹ç›®èƒ½å¸®æˆ‘å®žçŽ°æˆ‘çš„ç›®æ ‡ï¼Œæˆ‘æ˜¯ä½ é¡¹ç›®è¦æ‰¾çš„äººâ†’è¯»é€‰æ ¡è¦æ±‚+æŽ¨èä¿¡ï¼‰ 3. ç ”ç©¶å…´è¶£/å­¦æœ¯å…´è¶£ï¼š * eg. ç”³è¯·MEï¼Œå¯¹ç‡ƒçƒ§æ„Ÿå…´è¶£ï¼ˆç¬¼ç»Ÿï¼‰â†’æ”¹ä¸ºå¯¹å…¬å…±æ”¿ç­–ä¸“ä¸šé‡Œçš„å…·ä½“æ–¹é¢æ„Ÿå…´è¶£ï¼Œå¦‚health policyé‡Œçš„ä¸Žå¥åº·ç›¸å…³çš„XXé—®é¢˜ï¼ˆç»†åŒ–åˆ°ä¸€ä¸ªå¤§çš„ç ”ç©¶é—®é¢˜è€Œä¸æ˜¯å…·ä½“çš„é¢˜ç›®ï¼‰ * eg. ç”³è¯·media/communicationï¼Œå¦‚ä½•è¯„åˆ¤social mediaä¸­ä¸€ä¸ªè¯é¢˜çš„è®¨è®º/å½±å“ï¼ˆä¸å¼ºè°ƒä»€ä¹ˆè¯é¢˜ä»€ä¹ˆå½±å“ï¼Œè€Œæ˜¯â€˜å¦‚ä½•â€™è¯„åˆ¤ï¼‰ * æ€»ç»“ï¼šå¯ä»¥è¢«å®žè·µæŽ¢ç´¢çš„é—®é¢˜ï¼ˆPHDå¿…é¡»æœ‰ç ”ç©¶å…´è¶£ï¼ŒMSä¸ä¸€å®šï¼Œä½†è¦æœ‰ç›¸å…³çš„æ„Ÿå…´è¶£çš„é—®é¢˜oræƒ³å¼„æ¸…æ¥šç­‰â†’ä½“çŽ°å®ƒä¿ƒä½¿ä½ åŠªåŠ›å­¦ï¼‰ï¼Œç›¸å…³å…´è¶£ç‚¹ä¸è¦è¶…è¿‡ä¸‰ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªæœ€å¥½ï¼Œä¸ç›¸å…³å…´è¶£ç‚¹ä¸è¦è¶…è¿‡ä¸¤ä¸ªï¼ˆä¸å¤Ÿfocusï¼‰ã€‚ * å…·ä½“åˆ°â€˜å“ªä¸ªæ•™æŽˆå“ªä¸ªæ–¹å‘â€™ï¼Œ æœ€å¥½å†™ç›¸å¯¹generalï¼Œä¸è¦å†™æ•™æŽˆåå­—ï¼ˆé™¤éžå¥—è¿‡è¾žï¼Œæˆ–è€…ç›®æ ‡åŠå…¶æ˜Žç¡®ï¼‰ï¼Œå…å¾—è¯¥æ–¹å‘æ•™æŽˆä¸æ‹›äººï¼ˆå¯ä»¥å¤šå†™ä¸€ä¸ªç ”ç©¶å…´è¶£ï¼‰ã€‚ è¦äº†è§£é¢†åŸŸåŠ¨æ€ï¼Œä½ æ„Ÿå…´è¶£çš„ï¼ˆä¸èƒ½å¤ªè¿‡æ—¶ï¼‰æ˜¯å¦è·Ÿç¾Žå›½é™¢æ ¡ä¸»æµå…´è¶£matchçš„ï¼Œè¿™ä¸ªå­¦æ ¡çš„æ“…é•¿é¢†åŸŸæ˜¯å¦è·Ÿè‡ªå·±matchï¼ˆå¦‚ä¸“æŽ’ï¼‰ï¼Œè‡ªå·±çš„èƒŒæ™¯æ˜¯å¦justifyâ€“çœŸå®žï¼Œåˆç†ã€‚ å¯¹äºŽèŒä¸šåž‹MSï¼Œè¦çªå‡ºè‡ªå·±çš„è¡Œä¸šé¢†åŸŸå…´è¶£ï¼ˆå…·ä½“å“ªä¸ªè¡Œä¸šï¼Œgovernmentï¼Œnonprofit.â€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€..ï¼‰å…¬å¸æœåŠ¡æ–¹å‘ï¼ˆcreativeï¼Œresearchï¼Œanalysisï¼Œbrandingï¼Œprï¼‰å’Œå…·ä½“éƒ¨é—¨ è‹¥ä¸ç¡®å®šè¡Œä¸š/èŒèƒ½â†’é‡ç‚¹å†™è‡ªå·±è¦åšä»€ä¹ˆä¸œè¥¿ï¼ˆå²—ä½èŒèƒ½ï¼‰ï¼Œeg. æˆ‘æƒ³è¿›industryåšç ”å‘â†’è¿›ä»€ä¹ˆæ–¹å‘çš„ä¼ä¸šåšä»€ä¹ˆæ–¹å‘çš„ç ”å‘ï¼Œåœ°åŸŸä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªtalking pointã€‚å¯ä»¥é—®é—®å°èœœé€šå¸¸å‡ºæ¥çš„å­¦ç”Ÿéƒ½åšå•¥ã€‚ 4. å†™æ³•/åŽŸå› ï¼ˆæ€Žä¹ˆè¡¨çŽ°å…´è¶£ï¼‰ï¼š æˆ‘è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œäº§ç”Ÿäº†ä»€ä¹ˆå¥½å¤„ã€‚ æˆ‘å¯¹å­¦ç§‘æœ‰å¾ˆæ·±çš„äº†è§£ï¼ŒçŸ¥é“å®ƒçš„é­…åŠ›ï¼Œå›°éš¾ï¼ŒçŸ¥é“æ€Žä¹ˆåŽ»å…‹æœã€‚ æˆ‘æœ‰æŽ¢ç´¢ï¼Œæœ‰æ€è€ƒï¼Œegæˆ‘å°±æƒ³çŸ¥é“social mediaæ€Žä¹ˆè¯„åˆ¤ï¼Œæˆ‘åšäº†XXè°ƒæŸ¥/æ€è€ƒ/åˆ†æžï¼ˆå……å®žï¼‰ã€‚ å±•çŽ°æ•´ä¸ªè¿‡ç¨‹ï¼šä¸ºä»€ä¹ˆäº§ç”Ÿé—®é¢˜ï¼Œå¯¹è¿™ä¸ªé—®é¢˜åˆä»€ä¹ˆäº†è§£æŽ¢ç´¢ï¼Œè¿‡ç¨‹ä¸­æ€Žä¹ˆæ€è€ƒï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹è¶Šæ¥è¶Šæ˜Žç¡®åšå®šã€‚ 5.ç»åŽ†ï¼š æˆ‘åšçš„ä»€ä¹ˆäº‹ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®/é—®é¢˜é‡è¦ï¼Œæˆ‘ç”¨äº†ä»€ä¹ˆæ–¹æ³•ï¼ˆä¸ºä»€ä¹ˆç”¨è¿™äº›æ–¹æ³•ï¼‰ï¼Œé‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Œæ€Žä¹ˆå…‹æœï¼ˆæ˜¯å¦å…‹æœï¼‰ï¼Œæœ‰ä»€ä¹ˆæ€è€ƒï¼Œå¾—åˆ°äº†ä»€ä¹ˆå˜åŒ–ï¼ˆå…´è¶£æ›´åšå®šä¹‹ç±»ï¼‰ã€‚èƒ½ä¸èƒ½è®©å¯¹ä½ ä¸“ä¸šä¸å¤ªäº†è§£çš„èƒ½çŸ¥é“ä½ åšäº†ä»€ä¹ˆä¸ºä»€ä¹ˆåšï¼Œè®©åŒä¸“ä¸šçš„è®¤å¯ä½ çš„æˆæžœã€‚æ¯æ®µç»åŽ†éƒ½å·®ä¸å¤šå­—æ•°ï¼Œæœ‰é€‰æ‹©åœ°è®²ï¼ˆæœ€èƒ½ä½“çŽ°æˆ‘èƒ½åŠ›çš„åœ°æ–¹ï¼‰ï¼Œä¸è¦æŠŠä¸€ä¸ªç ”ç©¶åˆ†å‡ æ®µå†™ï¼Œä¸åŒçš„ç ”ç©¶å†…å®¹å¯ä»¥é€‚å½“åˆå¹¶åœ¨ä¸€èµ·ã€‚æŠŠé‡è¦çš„ç»åŽ†éƒ½å†™ä¸Šï¼Œæ²¡æœ‰æ•°é‡é™åˆ¶ã€‚ä¸è¦æµæ°´è´¦ã€‚ä¸ä¸€å®šè¦å’Œä¸“ä¸šç›¸å…³ã€‚ 6. be specificï¼š eg. æˆ‘å‘çŽ°Xåœ¨Yå­¦ç§‘å¾ˆé‡è¦â†’æ€Žä¹ˆé‡è¦ï¼Œæé«˜äº†æˆ‘çš„ç ”ç©¶èƒ½åŠ›â†’ä»€ä¹ˆèƒ½åŠ› 7. such asï¼šåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…ï¼ˆhowï¼‰ï¼Œwhat it isï¼Œ what does it meanï¼ˆè‡ªå·±é—®è‡ªå·±ï¼‰ 8. be strongï¼š ä¸»åŠ¨è¯­æ€ï¼žè¢«åŠ¨è¯­æ€ã€‚eg. was used, was obtainedâ†’we obtained, I realizedâ€¦PSä¸è¦å®¢è§‚ï¼Œè€Œæ˜¯å¼ºè°ƒâ€˜æˆ‘â€™çš„å‚ä¸Žæ€§ï¼ŒCVä¹Ÿæ˜¯ã€‚ solutionï¼žproblemã€‚å¼ºè°ƒè§£å†³è¿‡ç¨‹ã€‚ whâ€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€â€Œâ€â€at do you do nextï¼žwhat do you thinkã€‚ç†ç”±åŒä¸Šã€‚ ç”¨ç§¯æžæ›¿æ¢æ¶ˆæ¯ã€‚ä¸è¦æœ‰â€˜æˆ‘çŸ¥é“XXXåœ°æ–¹ä¸è¶³â€œï¼Œæ”¹æˆâ€™æˆ‘ä¼šæœ‰å…´è¶£åœ°å­¦ä¹ XXXâ€ï¼Œæˆ‘åšäº†XXXï¼Œè™½ç„¶å½±å“äº†GPAï¼Œä½†æ˜¯æ”¶èŽ·äº†XXXï¼ŒåŒæ—¶å…¶ä»–æ–¹é¢è¡¨çŽ°äº†æˆ‘çš„èƒ½åŠ›ã€‚ä¸è¦å¼ºè°ƒè‡ªå·±å¤šä¹ˆè‹¦å¤šä¹ˆæƒ¨å¤šä¹ˆå¤šæŒ‘æˆ˜ï¼Œè€Œæ˜¯å†™æˆå¾ˆäº«å—è¿‡ç¨‹ã€‚ é€‰æ ¡ç†ç”±ï¼šä¸è¦å†™å¾ˆæ™®éçš„ä¸œè¥¿ï¼ˆæ¯”å¦‚as we all knowâ€¦ï¼‰ä¸éœ€è¦ç‰¹åˆ«åŽä¸½çš„è¯­è¨€ï¼ˆNO PAIN, NO GAINè¿™ç§ï¼‰ã€‚ç´§å¯†ç»“åˆæ‰€å†™çš„ä¸œè¥¿ã€‚é€‰æ ¡ç†ç”±ä¸è¦åƒç¯‡ä¸€å¾‹ï¼ˆä½ç½®å¥½ï¼Œå­¦æœ¯å¥½ï¼ŒæŽ’åå¥½ï¼‰ï¼Œä¸è¦å¤ªpersonalï¼ˆç”·å¥³æœ‹å‹ï¼‰ã€‚å­¦æ ¡çš„è¯¾ç¨‹è®¾ç½®æ€Žä¹ˆfitæˆ‘ï¼Œå­¦æ ¡çš„è¯¾ç¨‹è®¾ç½®å¾ˆç‹¬ç‰¹ç­‰ã€‚ä¸ºä»€ä¹ˆå–œæ¬¢æ•™æŽˆï¼Œå–œæ¬¢å“ªå‡ ä¸ªï¼ˆXXçš„ç†è®ºå¯¹è‡ªå·±å°è±¡æ·±åˆ»ï¼‰ï¼Œæˆ‘å’Œå­¦é•¿/æ•™æŽˆèŠäº†ï¼Œä»–ä»¬å‘Šè¯‰æˆ‘XXXimpress meï¼Œæ‰€ä»¥æƒ³æ¥ã€‚ å¸ƒå±€ï¼š1. æ•…äº‹åž‹ã€‚è¯´æ˜Žè‡ªå·±çš„å¤§æˆå°±ã€‚é—®é¢˜--ä¸impressiveï¼Œå¤ªnaiveã€‚å¼€å¤´æ•…äº‹è¦conciseã€‚æœ€åˆæ€Žä¹ˆæ„Ÿå…´è¶£ï¼Œåšäº†ä»€ä¹ˆæŽ¢ç´¢ï¼Œå…·ä½“çš„è§„åˆ’ï¼Œä¸ºä»€ä¹ˆé€‰æ ¡ã€‚ 2. å•åˆ€ç›´å…¥åž‹ã€‚å¼€å¤´ç›´æŽ¥å†™æˆ‘çš„å…´è¶£ï¼Œæˆ‘çš„ä¼˜åŠ¿ï¼Œæˆ‘ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªå­¦æ ¡ã€‚ 3. é€‰æ‹©æœ€æœ‰åˆ©çš„è¯æ®ã€‚æŠ›æŽ‰æ°´è¯æ®ã€‚ æ€Žä¹ˆè¯„ä»·ï¼š1. æ˜¯ä¸æ˜¯æ¯å¥è¯éƒ½æ¸…æ¥šå…·ä½“ï¼Œè¯­æ³•ä¸Šï¼Œä¸“ä¸šä¸Šã€‚ 2. æ˜¯ä¸æ˜¯å›žç­”äº†â€™ä¸‰å¤§é—®é¢˜â€˜ 3. èƒ½ä¸èƒ½å±•çŽ°æˆ‘çš„ç‰¹ç‚¹ 4. èƒ½ä¸èƒ½ç»™åˆ«äººç•™ä¸‹å°è±¡ 5. æ€è€ƒæœ‰æ²¡æœ‰æ·±åº¦ï¼ˆæ–‡ç¬”åƒå°å­¦ç”Ÿï¼‰ 6. æ˜¯å¦è¶³å¤Ÿç®€æ´ï¼ˆä¸è¦è€ƒè™‘è¯­è¨€æ˜¯å¦åŽä¸½ï¼‰æŽ¨èçœ‹Emilyçš„PSä¿®æ”¹å»ºè®®å’Œå‰åŽå¯¹æ¯”ï¼Œçœ‹é»„é»„ï¼ˆç‰ˆä¸»ï¼‰çš„ps ç»†èŠ‚ï¼š1. çœ‹è¦æ±‚ï¼Œä¸€èˆ¬ä¸è¶…è¿‡1Kå­— 2. ä¸è¦å†™æˆæµæ°´è´¦ 3. è‹±è¯­è¡¨è¾¾&amp;ä¸“ä¸šæœ¯è¯­ 4. ä¸è¦assumeè¯»è€…ä»€ä¹ˆéƒ½ä¸çŸ¥é“è§£é‡Šä¸€å¤§å †ï¼Œå°½é‡ç®€æ´ 5. ä¸è¦å¤ªemotionalï¼ˆåŽ»æŽ‰ä½ çš„æƒŠå¹å·ï¼‰ï¼Œä¸è¦å†™åˆ«äººçš„æ„Ÿå—åšæ³•ç­‰ï¼Œåªå†™è‡ªå·±çš„ 6. æ®µè½åˆ†é…è¦åˆç† Q&amp;Aç§‘ç ”ç»åŽ†ä¸ä¸€å®šå¾ˆmatchï¼Œå…³é”®ä½“çŽ°ä½ çš„æ€è€ƒæ–¹å¼ç­‰ä¸ç”¨è‡ªçˆ†å®¶é—¨ï¼Œä»€ä¹ˆå­¦æ ¡ä»€ä¹ˆä¸“ä¸šä¸ç”¨å†™ä½ çš„è®ºæ–‡åä¸ç”¨å†™é¡¹ç›®çš„å…¨ç§°æè¿°è¯¦ç»†åˆ°â€™ä½ æƒ³ç ”ç©¶ä»€ä¹ˆé—®é¢˜â€˜å°±å¯ä»¥äº†å¦‚æžœæ˜¯å¤§æ–¹å‘çš„ï¼Œè¦çªå‡ºç ”ç©¶èƒ½åŠ›ï¼Œå¯ä»¥æ‰¯ä¸€äº›ä½“çŽ°ç›¸å…³æ€§çš„ä¸œè¥¿åšäº†å¤§æ¯”èµ›èŽ·å¾—å¾ˆå¤šæé«˜ä½†æ˜¯æ²¡èŽ·å¥–ï¼Œè¿˜æ˜¯è¦å†™ï¼Œçªå‡ºæ”¶èŽ·å®žä¹ ç»åŽ†ä¸ä¸€å®šè¦å†™ï¼Œçœ‹ç”³è¯·å­¦æ ¡æ˜¯å¦çœ‹é‡]]></content>
      <tags>
        <tag>Application</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[System Design]]></title>
    <url>%2F2019%2F05%2F14%2FSystem-Design%2F</url>
    <content type="text"><![CDATA[ç³»çµ±è¨­è¨ˆæ•‘æ˜Ÿ! ä¸€å¤©å…§æ‰‹æŠŠæ‰‹æ•™ä½ é¢è©¦System design]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Foundation</tag>
        <tag>System Design</tag>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DesignPattern_Structural pattern part1]]></title>
    <url>%2F2019%2F05%2F13%2FDesignPattern-Structural-pattern%20part1%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬å­¦ä¹ äº† 5 ç§æž„å»ºåž‹æ¨¡å¼ã€‚å®ƒä»¬ä¸»è¦ç”¨äºŽæž„å»ºå¯¹è±¡ã€‚è®©æˆ‘ä»¬ç®€å•å›žé¡¾ä¸€ä¸‹ï¼š â€‹å·¥åŽ‚æ–¹æ³•æ¨¡å¼ï¼šä¸ºæ¯ä¸€ç±»å¯¹è±¡å»ºç«‹å·¥åŽ‚ï¼Œå°†å¯¹è±¡äº¤ç”±å·¥åŽ‚åˆ›å»ºï¼Œå®¢æˆ·ç«¯åªå’Œå·¥åŽ‚æ‰“äº¤é“ã€‚ â€‹æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼šä¸ºæ¯ä¸€ç±»å·¥åŽ‚æå–å‡ºæŠ½è±¡æŽ¥å£ï¼Œä½¿å¾—æ–°å¢žå·¥åŽ‚ã€æ›¿æ¢å·¥åŽ‚å˜å¾—éžå¸¸å®¹æ˜“ã€‚ â€‹å»ºé€ è€…æ¨¡å¼ï¼šç”¨äºŽåˆ›å»ºæž„é€ è¿‡ç¨‹ç¨³å®šçš„å¯¹è±¡ï¼Œä¸åŒçš„ Builder å¯ä»¥å®šä¹‰ä¸åŒçš„é…ç½®ã€‚ â€‹å•ä¾‹æ¨¡å¼ï¼šå…¨å±€ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ†ä¸ºé¥¿æ±‰å¼å’Œæ‡’æ±‰å¼ã€‚æ‡’æ±‰å¼æœ‰åŒæ£€é”å’Œå†…éƒ¨ç±»ä¸¤ç§å®žçŽ°æ–¹å¼ã€‚ â€‹åŽŸåž‹æ¨¡å¼ï¼šä¸ºä¸€ä¸ªç±»å®šä¹‰ clone æ–¹æ³•ï¼Œä½¿å¾—åˆ›å»ºç›¸åŒçš„å¯¹è±¡æ›´æ–¹ä¾¿ã€‚ æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ ç»“æž„åž‹æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œç»“æž„åž‹æ¨¡å¼æ˜¯ç”¨æ¥è®¾è®¡ç¨‹åºçš„ç»“æž„çš„ã€‚ç»“æž„åž‹æ¨¡å¼å°±åƒæ­ç§¯æœ¨ï¼Œå°†ä¸åŒçš„ç±»ç»“åˆåœ¨ä¸€èµ·å½¢æˆå¥‘åˆçš„ç»“æž„ã€‚åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š â€‹é€‚é…å™¨æ¨¡å¼ â€‹æ¡¥æŽ¥æ¨¡å¼ â€‹ç»„åˆæ¨¡å¼ â€‹è£…é¥°æ¨¡å¼ â€‹å¤–è§‚æ¨¡å¼ â€‹äº«å…ƒæ¨¡å¼ â€‹ä»£ç†æ¨¡å¼ ç”±äºŽå†…å®¹è¾ƒå¤šï¼Œæœ¬ç¯‡æˆ‘ä»¬å…ˆè®²è§£å‰ä¸‰ç§æ¨¡å¼ã€‚ ä¸€ã€é€‚é…å™¨æ¨¡å¼ Adapter Convert the existing interfaces to a new interface to achieve compatibility and reusability of the unrelated classes in one application. Also known as Wrapper pattern. è¯´åˆ°é€‚é…å™¨ï¼Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„èŽ«è¿‡äºŽç”µæºé€‚é…å™¨äº†ï¼Œä¹Ÿå°±æ˜¯æ‰‹æœºçš„å……ç”µå¤´ã€‚å®ƒå°±æ˜¯é€‚é…å™¨æ¨¡å¼çš„ä¸€ä¸ªåº”ç”¨ã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€æ¡è¿žæŽ¥ç”µè„‘å’Œæ‰‹æœºçš„ USB æ•°æ®çº¿ï¼Œè¿žæŽ¥ç”µè„‘çš„ä¸€ç«¯ä»Žç”µè„‘æŽ¥å£å¤„æŽ¥æ”¶ 5V çš„ç”µåŽ‹ï¼Œè¿žæŽ¥æ‰‹æœºçš„ä¸€ç«¯å‘æ‰‹æœºè¾“å‡º 5V çš„ç”µåŽ‹ï¼Œå¹¶ä¸”ä»–ä»¬å·¥ä½œè‰¯å¥½ã€‚ ä¸­å›½çš„å®¶ç”¨ç”µåŽ‹éƒ½æ˜¯ 220Vï¼Œæ‰€ä»¥ USB æ•°æ®çº¿ä¸èƒ½ç›´æŽ¥æ‹¿æ¥ç»™æ‰‹æœºå……ç”µï¼Œè¿™æ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š å•ç‹¬åˆ¶ä½œæ‰‹æœºå……ç”µå™¨ï¼ŒæŽ¥æ”¶ 220V å®¶ç”¨ç”µåŽ‹ï¼Œè¾“å‡º 5V ç”µåŽ‹ã€‚æ·»åŠ ä¸€ä¸ªé€‚é…å™¨ï¼Œå°† 220V å®¶åº­ç”µåŽ‹è½¬åŒ–ä¸ºç±»ä¼¼ç”µè„‘æŽ¥å£çš„ 5V ç”µåŽ‹ï¼Œå†è¿žæŽ¥æ•°æ®çº¿ç»™æ‰‹æœºå……ç”µã€‚å¦‚æžœä½ ä½¿ç”¨è¿‡æ—©æœŸçš„æ‰‹æœºï¼Œå°±ä¼šçŸ¥é“ä»¥å‰çš„æ‰‹æœºåŽ‚å•†é‡‡ç”¨çš„å°±æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šæ—©æœŸçš„æ‰‹æœºå……ç”µå™¨éƒ½æ˜¯å•ç‹¬åˆ¶ä½œçš„ï¼Œå……ç”µå¤´å’Œå……ç”µçº¿æ˜¯è¿žåœ¨ä¸€èµ·çš„ã€‚çŽ°åœ¨çš„æ‰‹æœºéƒ½é‡‡ç”¨äº†ç”µæºé€‚é…å™¨åŠ æ•°æ®çº¿çš„æ–¹æ¡ˆã€‚è¿™æ˜¯ç”Ÿæ´»ä¸­åº”ç”¨é€‚é…å™¨æ¨¡å¼çš„ä¸€ä¸ªè¿›æ­¥ã€‚ é€‚é…å™¨æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æŽ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæŽ¥å£ï¼Œä½¿å¾—åŽŸæœ¬ç”±äºŽæŽ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚é€‚é…çš„æ„æ€æ˜¯é€‚åº”ã€åŒ¹é…ã€‚é€šä¿—åœ°è®²ï¼Œé€‚é…å™¨æ¨¡å¼é€‚ç”¨äºŽ æœ‰ç›¸å…³æ€§ä½†ä¸å…¼å®¹çš„ç»“æž„ï¼ŒæºæŽ¥å£é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶è½¬æ¢åŽæ‰å¯ä»¥é€‚ç”¨äºŽç›®æ ‡æŽ¥å£ï¼Œè¿™ä¸ªè½¬æ¢è¿‡ç¨‹å°±æ˜¯é€‚é…ï¼Œè¿™ä¸ªä¸­é—´ä»¶å°±ç§°ä¹‹ä¸ºé€‚é…å™¨ã€‚ å®¶ç”¨ç”µæºå’Œ USB æ•°æ®çº¿æœ‰ç›¸å…³æ€§ï¼šå®¶ç”¨ç”µæºè¾“å‡ºç”µåŽ‹ï¼ŒUSB æ•°æ®çº¿è¾“å…¥ç”µåŽ‹ã€‚ä½†ä¸¤ä¸ªæŽ¥å£æ— æ³•å…¼å®¹ï¼Œå› ä¸ºä¸€ä¸ªè¾“å‡º 220Vï¼Œä¸€ä¸ªè¾“å…¥ 5Vï¼Œé€šè¿‡é€‚é…å™¨å°†è¾“å‡º 220V è½¬æ¢æˆè¾“å‡º 5V ä¹‹åŽæ‰å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ è®©æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚ é¦–å…ˆï¼Œå®¶åº­ç”µæºæä¾› 220V çš„ç”µåŽ‹ï¼š 1234567class HomeBattery &#123; int supply() &#123; // å®¶ç”¨ç”µæºæä¾›ä¸€ä¸ª 220V çš„è¾“å‡ºç”µåŽ‹ return 220; &#125;&#125; USB æ•°æ®çº¿åªæŽ¥æ”¶ 5V çš„å……ç”µç”µåŽ‹ï¼š12345678class USBLine &#123; void charge(int volt) &#123; // å¦‚æžœç”µåŽ‹ä¸æ˜¯ 5Vï¼ŒæŠ›å‡ºå¼‚å¸¸ if (volt != 5) throw new IllegalArgumentException("åªèƒ½æŽ¥æ”¶ 5V ç”µåŽ‹"); // å¦‚æžœç”µåŽ‹æ˜¯ 5Vï¼Œæ­£å¸¸å……ç”µ System.out.println("æ­£å¸¸å……ç”µ"); &#125;&#125; å…ˆæ¥çœ‹çœ‹é€‚é…ä¹‹å‰ï¼Œç”¨æˆ·å¦‚æžœç›´æŽ¥ç”¨å®¶åº­ç”µæºç»™æ‰‹æœºå……ç”µï¼š123456789101112131415161718public class User &#123; @Test public void chargeForPhone() &#123; HomeBattery homeBattery = new HomeBattery(); int homeVolt = homeBattery.supply(); System.out.println("å®¶åº­ç”µæºæä¾›çš„ç”µåŽ‹æ˜¯ " + homeVolt + "V"); USBLine usbLine = new USBLine(); usbLine.charge(homeVolt); &#125;&#125;è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼šå®¶åº­ç”µæºæä¾›çš„ç”µåŽ‹æ˜¯ 220Vjava.lang.IllegalArgumentException: åªèƒ½æŽ¥æ”¶ 5V ç”µåŽ‹è¿™æ—¶ï¼Œæˆ‘ä»¬åŠ å…¥ç”µæºé€‚é…å™¨ï¼š 1234567class Adapter &#123; int convert(int homeVolt) &#123; // é€‚é…è¿‡ç¨‹ï¼šä½¿ç”¨ç”µé˜»ã€ç”µå®¹ç­‰å™¨ä»¶å°†å…¶é™ä½Žä¸ºè¾“å‡º 5V int chargeVolt = homeVolt - 215; return chargeVolt; &#125;&#125; ç„¶åŽï¼Œç”¨æˆ·å†ä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µæºæä¾›çš„ç”µåŽ‹è½¬æ¢ä¸ºå……ç”µç”µåŽ‹ï¼š123456789101112131415161718192021public class User &#123; @Test public void chargeForPhone() &#123; HomeBattery homeBattery = new HomeBattery(); int homeVolt = homeBattery.supply(); System.out.println("å®¶åº­ç”µæºæä¾›çš„ç”µåŽ‹æ˜¯ " + homeVolt + "V"); Adapter adapter = new Adapter(); int chargeVolt = adapter.convert(homeVolt); System.out.println("ä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µåŽ‹è½¬æ¢æˆäº† " + chargeVolt + "V"); USBLine usbLine = new USBLine(); usbLine.charge(chargeVolt); &#125;&#125;è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼šå®¶åº­ç”µæºæä¾›çš„ç”µåŽ‹æ˜¯ 220Vä½¿ç”¨é€‚é…å™¨å°†å®¶åº­ç”µåŽ‹è½¬æ¢æˆäº† 5Væ­£å¸¸å……ç”µ è¿™å°±æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚åœ¨æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°å„ç§å„æ ·çš„ Adapterï¼Œéƒ½å±žäºŽé€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ã€‚ ä½†é€‚é…å™¨æ¨¡å¼å¹¶ä¸æŽ¨èå¤šç”¨ã€‚å› ä¸ºæœªé›¨ç»¸ç¼ªå¥½è¿‡äº¡ç¾Šè¡¥ç‰¢ï¼Œå¦‚æžœäº‹å…ˆèƒ½é¢„é˜²æŽ¥å£ä¸åŒçš„é—®é¢˜ï¼Œä¸åŒ¹é…é—®é¢˜å°±ä¸ä¼šå‘ç”Ÿï¼Œåªæœ‰é‡åˆ°æºæŽ¥å£æ— æ³•æ”¹å˜æ—¶ï¼Œæ‰åº”è¯¥è€ƒè™‘ä½¿ç”¨é€‚é…å™¨ã€‚æ¯”å¦‚çŽ°ä»£çš„ç”µæºæ’å£ä¸­å¾ˆå¤šå·²ç»å¢žåŠ äº†ä¸“é—¨çš„å……ç”µæŽ¥å£ï¼Œè®©æˆ‘ä»¬ä¸éœ€è¦å†ä½¿ç”¨é€‚é…å™¨è½¬æ¢æŽ¥å£ï¼Œè¿™åˆæ˜¯ç¤¾ä¼šçš„ä¸€ä¸ªè¿›æ­¥ã€‚ äºŒã€æ¡¥æŽ¥æ¨¡å¼ Bridge Decouple an abstraction or interface from its implementation so that the two can vary independently. è€ƒè™‘è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šç»˜åˆ¶çŸ©å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢è¿™ä¸‰ç§å›¾æ¡ˆã€‚æŒ‰ç…§é¢å‘å¯¹è±¡çš„ç†å¿µï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸‰ä¸ªå…·ä½“ç±»ï¼Œå¯¹åº”ä¸‰ç§ä¸åŒçš„å›¾å½¢ã€‚ æŠ½è±¡æŽ¥å£ IShapeï¼š123public interface IShape &#123; void draw();&#125; ä¸‰ä¸ªå…·ä½“å½¢çŠ¶ç±»ï¼š12345678910111213141516171819202122class Rectangle implements IShape &#123; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶çŸ©å½¢"); &#125;&#125;class Round implements IShape &#123; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶åœ†å½¢"); &#125;&#125;class Triangle implements IShape &#123; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶ä¸‰è§’å½¢"); &#125;&#125; æŽ¥ä¸‹æ¥æˆ‘ä»¬æœ‰äº†æ–°çš„éœ€æ±‚ï¼Œæ¯ç§å½¢çŠ¶éƒ½éœ€è¦æœ‰å››ç§ä¸åŒçš„é¢œè‰²ï¼šçº¢ã€è“ã€é»„ã€ç»¿ã€‚ è¿™æ—¶æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ä¸¤ç§è®¾è®¡æ–¹æ¡ˆï¼š ä¸ºäº†å¤ç”¨å½¢çŠ¶ç±»ï¼Œå°†æ¯ç§å½¢çŠ¶å®šä¹‰ä¸ºçˆ¶ç±»ï¼Œæ¯ç§ä¸åŒé¢œè‰²çš„å›¾å½¢ç»§æ‰¿è‡ªå…¶å½¢çŠ¶çˆ¶ç±»ã€‚æ­¤æ—¶ä¸€å…±æœ‰ 12 ä¸ªç±»ã€‚ ä¸ºäº†å¤ç”¨é¢œè‰²ç±»ï¼Œå°†æ¯ç§é¢œè‰²å®šä¹‰ä¸ºçˆ¶ç±»ï¼Œæ¯ç§ä¸åŒé¢œè‰²çš„å›¾å½¢ç»§æ‰¿è‡ªå…¶é¢œè‰²çˆ¶ç±»ã€‚æ­¤æ—¶ä¸€å…±æœ‰ 12 ä¸ªç±»ã€‚ä¹ä¸€çœ‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„ç»§æ‰¿ç‰¹æ€§ï¼Œå¤ç”¨äº†çˆ¶ç±»çš„ä»£ç å¹¶æ‰©å±•äº†æ–°çš„åŠŸèƒ½ã€‚ ä½†ä»”ç»†æƒ³ä¸€æƒ³ï¼Œå¦‚æžœä»¥åŽè¦å¢žåŠ ä¸€ç§é¢œè‰²ï¼Œæ¯”å¦‚é»‘è‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¢žåŠ ä¸‰ä¸ªç±»ï¼›å¦‚æžœå†è¦å¢žåŠ ä¸€ç§å½¢çŠ¶ï¼Œæˆ‘ä»¬åˆéœ€è¦å¢žåŠ äº”ä¸ªç±»ï¼Œå¯¹åº” 5 ç§é¢œè‰²ã€‚ æ›´ä¸ç”¨è¯´é‡åˆ°å¢žåŠ  20 ä¸ªå½¢çŠ¶ï¼Œ20 ç§é¢œè‰²çš„éœ€æ±‚ï¼Œä¸åŒçš„æŽ’åˆ—ç»„åˆå°†ä¼šä½¿å·¥ä½œé‡å˜å¾—æ— æ¯”çš„åºžå¤§ã€‚çœ‹æ¥æˆ‘ä»¬ä¸å¾—ä¸é‡æ–°æ€è€ƒè®¾è®¡æ–¹æ¡ˆã€‚ å½¢çŠ¶å’Œé¢œè‰²ï¼Œéƒ½æ˜¯å›¾å½¢çš„ä¸¤ä¸ªå±žæ€§ã€‚ä»–ä»¬ä¸¤è€…çš„å…³ç³»æ˜¯å¹³ç­‰çš„ï¼Œæ‰€ä»¥ä¸å±žäºŽç»§æ‰¿å…³ç³»ã€‚æ›´å¥½çš„çš„å®žçŽ°æ–¹å¼æ˜¯ï¼šå°†å½¢çŠ¶å’Œé¢œè‰²åˆ†ç¦»ï¼Œæ ¹æ®éœ€è¦å¯¹å½¢çŠ¶å’Œé¢œè‰²è¿›è¡Œç»„åˆï¼Œè¿™å°±æ˜¯æ¡¥æŽ¥æ¨¡å¼çš„æ€æƒ³ã€‚ æ¡¥æŽ¥æ¨¡å¼ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸Žå®ƒçš„å®žçŽ°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æž„åž‹æ¨¡å¼ï¼Œåˆç§°ä¸ºæŸ„ä½“æ¨¡å¼æˆ–æŽ¥å£æ¨¡å¼ã€‚å®˜æ–¹å®šä¹‰éžå¸¸ç²¾å‡†ã€ç®€ç»ƒï¼Œä½†å´æœ‰ç‚¹ä¸æ˜“ç†è§£ã€‚é€šä¿—åœ°è¯´ï¼Œå¦‚æžœä¸€ä¸ªå¯¹è±¡æœ‰ä¸¤ç§æˆ–è€…å¤šç§åˆ†ç±»æ–¹å¼ï¼Œå¹¶ä¸”ä¸¤ç§åˆ†ç±»æ–¹å¼éƒ½å®¹æ˜“å˜åŒ–ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­çš„å½¢çŠ¶å’Œé¢œè‰²ã€‚è¿™æ—¶ä½¿ç”¨ç»§æ‰¿å¾ˆå®¹æ˜“é€ æˆå­ç±»è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯æŠŠè¿™ç§åˆ†ç±»æ–¹å¼åˆ†ç¦»å‡ºæ¥ï¼Œè®©ä»–ä»¬ç‹¬ç«‹å˜åŒ–ï¼Œä½¿ç”¨æ—¶å°†ä¸åŒçš„åˆ†ç±»è¿›è¡Œç»„åˆå³å¯ã€‚ è¯´åˆ°è¿™é‡Œï¼Œä¸å¾—ä¸æä¸€ä¸ªè®¾è®¡åŽŸåˆ™ï¼šåˆæˆ / èšåˆå¤ç”¨åŽŸåˆ™ã€‚è™½ç„¶å®ƒæ²¡æœ‰è¢«åˆ’åˆ†åˆ°å…­å¤§è®¾è®¡åŽŸåˆ™ä¸­ï¼Œä½†å®ƒåœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ä¹Ÿéžå¸¸çš„é‡è¦ã€‚ åˆæˆ / èšåˆå¤ç”¨åŽŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨åˆæˆ / èšåˆï¼Œè€Œä¸æ˜¯ç±»ç»§æ‰¿ã€‚ ç»§æ‰¿è™½ç„¶æ˜¯é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œä½†ç»§æ‰¿ä¼šå¯¼è‡´å­ç±»ä¸Žçˆ¶ç±»æœ‰éžå¸¸ç´§å¯†çš„ä¾èµ–å…³ç³»ï¼Œå®ƒä¼šé™åˆ¶å­ç±»çš„çµæ´»æ€§å’Œå­ç±»çš„å¤ç”¨æ€§ã€‚è€Œä½¿ç”¨åˆæˆ / èšåˆï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æŽ¥å£å®žçŽ°çš„æ–¹å¼ï¼Œå°±ä¸å­˜åœ¨ä¾èµ–é—®é¢˜ï¼Œä¸€ä¸ªç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‹“å±•åŠŸèƒ½ã€‚ è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æœ¬ä¾‹ä½¿ç”¨æ¡¥æŽ¥æ¨¡å¼çš„ç¨‹åºå®žçŽ°ï¼š æ–°å»ºæŽ¥å£ç±» IColorï¼Œä»…åŒ…å«ä¸€ä¸ªèŽ·å–é¢œè‰²çš„æ–¹æ³•ï¼š123public interface IColor &#123; String getColor();&#125; æ¯ç§é¢œè‰²éƒ½å®žçŽ°æ­¤æŽ¥å£ï¼š123456789101112131415161718192021222324252627282930public class Red implements IColor &#123; @Override public String getColor() &#123; return "çº¢"; &#125;&#125;public class Blue implements IColor &#123; @Override public String getColor() &#123; return "è“"; &#125;&#125;public class Yellow implements IColor &#123; @Override public String getColor() &#123; return "é»„"; &#125;&#125;public class Green implements IColor &#123; @Override public String getColor() &#123; return "ç»¿"; &#125;&#125; åœ¨æ¯ä¸ªå½¢çŠ¶ç±»ä¸­ï¼Œæ¡¥æŽ¥ IColor æŽ¥å£ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243class Rectangle implements IShape &#123; private IColor color; void setColor(IColor color) &#123; this.color = color; &#125; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶" + color.getColor() + "çŸ©å½¢"); &#125;&#125;class Round implements IShape &#123; private IColor color; void setColor(IColor color) &#123; this.color = color; &#125; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶" + color.getColor() + "åœ†å½¢"); &#125;&#125;class Triangle implements IShape &#123; private IColor color; void setColor(IColor color) &#123; this.color = color; &#125; @Override public void draw() &#123; System.out.println("ç»˜åˆ¶" + color.getColor() + "ä¸‰è§’å½¢"); &#125;&#125; æµ‹è¯•å‡½æ•°ï¼š12345678910111213141516171819@Testpublic void drawTest() &#123; Rectangle rectangle = new Rectangle(); rectangle.setColor(new Red()); rectangle.draw(); Round round = new Round(); round.setColor(new Blue()); round.draw(); Triangle triangle = new Triangle(); triangle.setColor(new Yellow()); triangle.draw();&#125;è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼šç»˜åˆ¶çº¢çŸ©å½¢ç»˜åˆ¶è“åœ†å½¢ç»˜åˆ¶é»„ä¸‰è§’å½¢ è¿™æ—¶æˆ‘ä»¬å†æ¥å›žé¡¾ä¸€ä¸‹å®˜æ–¹å®šä¹‰ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸Žå®ƒçš„å®žçŽ°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚æŠ½è±¡éƒ¨åˆ†æŒ‡çš„æ˜¯çˆ¶ç±»ï¼Œå¯¹åº”æœ¬ä¾‹ä¸­çš„å½¢çŠ¶ç±»ï¼Œå®žçŽ°éƒ¨åˆ†æŒ‡çš„æ˜¯ä¸åŒå­ç±»çš„åŒºåˆ«ä¹‹å¤„ã€‚å°†å­ç±»çš„åŒºåˆ«æ–¹å¼ â€”â€” ä¹Ÿå°±æ˜¯æœ¬ä¾‹ä¸­çš„é¢œè‰² â€”â€” åˆ†ç¦»æˆæŽ¥å£ï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼æ¡¥æŽ¥é¢œè‰²å’Œå½¢çŠ¶ï¼Œè¿™å°±æ˜¯æ¡¥æŽ¥æ¨¡å¼ï¼Œå®ƒä¸»è¦ç”¨äºŽ ä¸¤ä¸ªæˆ–å¤šä¸ªåŒç­‰çº§çš„æŽ¥å£ã€‚ ä¸‰ã€ç»„åˆæ¨¡å¼ Composite Build a complex object out of elemental objects and itself like a tree structure. ä¸Šæ–‡è¯´åˆ°ï¼Œæ¡¥æŽ¥æ¨¡å¼ç”¨äºŽå°†åŒç­‰çº§çš„æŽ¥å£äº’ç›¸ç»„åˆï¼Œé‚£ä¹ˆç»„åˆæ¨¡å¼å’Œæ¡¥æŽ¥æ¨¡å¼æœ‰ä»€ä¹ˆå…±åŒç‚¹å—ï¼Ÿ äº‹å®žä¸Šç»„åˆæ¨¡å¼å’Œæ¡¥æŽ¥æ¨¡å¼çš„ç»„åˆå®Œå…¨ä¸ä¸€æ ·ã€‚ç»„åˆæ¨¡å¼ç”¨äºŽ æ•´ä½“ä¸Žéƒ¨åˆ†çš„ç»“æž„ï¼Œå½“æ•´ä½“ä¸Žéƒ¨åˆ†æœ‰ç›¸ä¼¼çš„ç»“æž„ï¼Œåœ¨æ“ä½œæ—¶å¯ä»¥è¢«ä¸€è‡´å¯¹å¾…æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚ä¾‹å¦‚ï¼š æ–‡ä»¶å¤¹å’Œå­æ–‡ä»¶å¤¹çš„å…³ç³»ï¼šæ–‡ä»¶å¤¹ä¸­å¯ä»¥å­˜æ”¾æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹ä¹Ÿä¸€æ ·ã€‚æ€»å…¬å¸å­å…¬å¸çš„å…³ç³»ï¼šæ€»å…¬å¸å¯ä»¥è®¾ç«‹éƒ¨é—¨ï¼Œä¹Ÿå¯ä»¥è®¾ç«‹åˆ†å…¬å¸ï¼Œå­å…¬å¸ä¹Ÿä¸€æ ·ã€‚æ ‘æžå’Œåˆ†æ ‘æžçš„å…³ç³»ï¼šæ ‘æžå¯ä»¥é•¿å‡ºå¶å­ï¼Œä¹Ÿå¯ä»¥é•¿å‡ºæ ‘æžï¼Œåˆ†æ ‘æžä¹Ÿä¸€æ ·ã€‚åœ¨è¿™äº›å…³ç³»ä¸­ï¼Œè™½ç„¶æ•´ä½“åŒ…å«äº†éƒ¨åˆ†ï¼Œä½†æ— è®ºæ•´ä½“æˆ–éƒ¨åˆ†ï¼Œéƒ½å…·æœ‰ä¸€è‡´çš„è¡Œä¸ºã€‚ ç»„åˆæ¨¡å¼ï¼šåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºŽæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æž„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»åž‹çš„è®¾è®¡æ¨¡å¼å±žäºŽç»“æž„åž‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æž„ã€‚è€ƒè™‘è¿™æ ·ä¸€ä¸ªå®žé™…åº”ç”¨ï¼šè®¾è®¡ä¸€ä¸ªå…¬å¸çš„äººå‘˜åˆ†å¸ƒç»“æž„ï¼Œç»“æž„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æˆ‘ä»¬æ³¨æ„åˆ°äººå‘˜ç»“æž„ä¸­æœ‰ä¸¤ç§ç»“æž„ï¼Œä¸€æ˜¯ç®¡ç†è€…ï¼Œå¦‚è€æ¿ï¼ŒPMï¼ŒCFOï¼ŒCTOï¼ŒäºŒæ˜¯èŒå‘˜ã€‚å…¶ä¸­æœ‰çš„ç®¡ç†è€…ä¸ä»…ä»…è¦ç®¡ç†èŒå‘˜ï¼Œè¿˜ä¼šç®¡ç†å…¶ä»–çš„ç®¡ç†è€…ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„æ•´ä½“ä¸Žéƒ¨åˆ†çš„ç»“æž„ã€‚ 3.1.ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆè¦æè¿°è¿™æ ·çš„ç»“æž„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ä»¥ä¸‹è®¾è®¡æ–¹æ¡ˆï¼š æ–°å»ºç®¡ç†è€…ç±»ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class Manager &#123; // èŒä½ private String position; // å·¥ä½œå†…å®¹ private String job; // ç®¡ç†çš„ç®¡ç†è€… private List&lt;Manager&gt; managers = new ArrayList&lt;&gt;(); // ç®¡ç†çš„èŒå‘˜ private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;(); public Manager(String position, String job) &#123; this.position = position; this.job = job; &#125; public void addManager(Manager manager) &#123; managers.add(manager); &#125; public void removeManager(Manager manager) &#123; managers.remove(manager); &#125; public void addEmployee(Employee employee) &#123; employees.add(employee); &#125; public void removeEmployee(Employee employee) &#123; employees.remove(employee); &#125; // åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ public void work() &#123; System.out.println("æˆ‘æ˜¯" + position + "ï¼Œæˆ‘æ­£åœ¨" + job); &#125; // æ£€æŸ¥ä¸‹å±ž public void check() &#123; work(); for (Employee employee : employees) &#123; employee.work(); &#125; for (Manager manager : managers) &#123; manager.check(); &#125; &#125;&#125; æ–°å»ºèŒå‘˜ç±»ï¼š12345678910111213141516public class Employee &#123; // èŒä½ private String position; // å·¥ä½œå†…å®¹ private String job; public Employee(String position, String job) &#123; this.position = position; this.job = job; &#125; // åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ public void work() &#123; System.out.println("æˆ‘æ˜¯" + position + "ï¼Œæˆ‘æ­£åœ¨" + job); &#125;&#125; å®¢æˆ·ç«¯å»ºç«‹äººå‘˜ç»“æž„å…³ç³»ï¼š1234567891011121314151617181920212223242526272829public class Client &#123; @Test public void test() &#123; Manager boss = new Manager("è€æ¿", "å”±æ€’æ”¾çš„ç”Ÿå‘½"); Employee HR = new Employee("äººåŠ›èµ„æº", "èŠå¾®ä¿¡"); Manager PM = new Manager("äº§å“ç»ç†", "ä¸çŸ¥é“å¹²å•¥"); Manager CFO = new Manager("è´¢åŠ¡ä¸»ç®¡", "çœ‹å‰§"); Manager CTO = new Manager("æŠ€æœ¯ä¸»ç®¡", "åˆ’æ°´"); Employee UI = new Employee("è®¾è®¡å¸ˆ", "ç”»ç”»"); Employee operator = new Employee("è¿è¥äººå‘˜", "å…¼èŒå®¢æœ"); Employee webProgrammer = new Employee("ç¨‹åºå‘˜", "å­¦ä¹ è®¾è®¡æ¨¡å¼"); Employee backgroundProgrammer = new Employee("åŽå°ç¨‹åºå‘˜", "CRUD"); Employee accountant = new Employee("ä¼šè®¡", "èƒŒä¹ä¹ä¹˜æ³•è¡¨"); Employee clerk = new Employee("æ–‡å‘˜", "ç»™è€æ¿é€’éº¦å…‹é£Ž"); boss.addEmployee(HR); boss.addManager(PM); boss.addManager(CFO); PM.addEmployee(UI); PM.addManager(CTO); PM.addEmployee(operator); CTO.addEmployee(webProgrammer); CTO.addEmployee(backgroundProgrammer); CFO.addEmployee(accountant); CFO.addEmployee(clerk); boss.check(); &#125;&#125; è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼ˆä¸ºæ–¹ä¾¿æŸ¥çœ‹ï¼Œç¬”è€…æ·»åŠ äº†ç¼©è¿›ï¼‰ï¼š1234567891011æˆ‘æ˜¯è€æ¿ï¼Œæˆ‘æ­£åœ¨å”±æ€’æ”¾çš„ç”Ÿå‘½ æˆ‘æ˜¯äººåŠ›èµ„æºï¼Œæˆ‘æ­£åœ¨èŠå¾®ä¿¡ æˆ‘æ˜¯äº§å“ç»ç†ï¼Œæˆ‘æ­£åœ¨ä¸çŸ¥é“å¹²å•¥ æˆ‘æ˜¯è®¾è®¡å¸ˆï¼Œæˆ‘æ­£åœ¨ç”»ç”» æˆ‘æ˜¯è¿è¥äººå‘˜ï¼Œæˆ‘æ­£åœ¨å…¼èŒå®¢æœ æˆ‘æ˜¯æŠ€æœ¯ä¸»ç®¡ï¼Œæˆ‘æ­£åœ¨åˆ’æ°´ æˆ‘æ˜¯ç¨‹åºå‘˜ï¼Œæˆ‘æ­£åœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼ æˆ‘æ˜¯åŽå°ç¨‹åºå‘˜ï¼Œæˆ‘æ­£åœ¨CRUD æˆ‘æ˜¯è´¢åŠ¡ä¸»ç®¡ï¼Œæˆ‘æ­£åœ¨çœ‹å‰§ æˆ‘æ˜¯ä¼šè®¡ï¼Œæˆ‘æ­£åœ¨èƒŒä¹ä¹ä¹˜æ³•è¡¨ æˆ‘æ˜¯æ–‡å‘˜ï¼Œæˆ‘æ­£åœ¨ç»™è€æ¿é€’éº¦å…‹é£Ž è¿™æ ·æˆ‘ä»¬å°±è®¾è®¡å‡ºäº†å…¬å¸çš„ç»“æž„ï¼Œä½†æ˜¯è¿™æ ·çš„è®¾è®¡æœ‰ä¸¤ä¸ªå¼Šç«¯ï¼š name å­—æ®µï¼Œjob å­—æ®µï¼Œwork æ–¹æ³•é‡å¤äº†ã€‚ ç®¡ç†è€…å¯¹å…¶ç®¡ç†çš„ç®¡ç†è€…å’ŒèŒå‘˜éœ€è¦åŒºåˆ«å¯¹å¾…ã€‚ å…³äºŽç¬¬ä¸€ä¸ªå¼Šç«¯ï¼Œè™½ç„¶è¿™é‡Œä¸ºäº†è®²è§£ï¼Œåªæœ‰ä¸¤ä¸ªå­—æ®µå’Œä¸€ä¸ªæ–¹æ³•é‡å¤ï¼Œå®žé™…å·¥ä½œä¸­è¿™æ ·çš„æ•´ä½“éƒ¨åˆ†ç»“æž„ä¼šæœ‰ç›¸å½“å¤šçš„é‡å¤ã€‚æ¯”å¦‚æ­¤ä¾‹ä¸­è¿˜å¯èƒ½æœ‰å·¥å·ã€å¹´é¾„ç­‰å­—æ®µï¼Œé¢†å–å·¥èµ„ã€ä¸Šä¸‹ç­æ‰“å¡ã€å¼€å„ç§æ— èŠçš„ä¼šç­‰æ–¹æ³•ã€‚ å¤§é‡çš„é‡å¤æ˜¾ç„¶æ˜¯å¾ˆä¸‘é™‹çš„ä»£ç ï¼Œåˆ†æžä¸€ä¸‹å¯ä»¥å‘çŽ°ï¼Œ Manager ç±»åªæ¯” Employee ç±»å¤šä¸€ä¸ªç®¡ç†äººå‘˜çš„åˆ—è¡¨å­—æ®µï¼Œå¤šå‡ ä¸ªå¢žåŠ  / ç§»é™¤äººå‘˜çš„æ–¹æ³•ï¼Œå…¶ä»–çš„å­—æ®µå’Œæ–¹æ³•å…¨éƒ½æ˜¯ä¸€æ ·çš„ã€‚ æœ‰è¯»è€…åº”è¯¥ä¼šæƒ³åˆ°ï¼šæˆ‘ä»¬å¯ä»¥å°†é‡å¤çš„å­—æ®µå’Œæ–¹æ³•æå–åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼Œè®© Employee å’Œ Manager éƒ½åŽ»è°ƒç”¨æ­¤å·¥å…·ç±»ï¼Œå°±å¯ä»¥æ¶ˆé™¤é‡å¤äº†ã€‚ è¿™æ ·å›ºç„¶å¯è¡Œï¼Œä½†å±žäºŽ Employee å’Œ Manager ç±»è‡ªå·±çš„ä¸œè¥¿å´è¦é€šè¿‡å…¶ä»–ç±»è°ƒç”¨ï¼Œå¹¶ä¸åˆ©äºŽç¨‹åºçš„é«˜å†…èšã€‚ å…³äºŽç¬¬äºŒä¸ªå¼Šç«¯ï¼Œæ­¤æ–¹æ¡ˆæ— æ³•è§£å†³ï¼Œæ­¤æ–¹æ¡ˆä¸­ Employee å’Œ Manager ç±»å®Œå…¨æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä¸¤è€…çš„ç›¸ä¼¼æ€§è¢«å¿½ç•¥äº†ã€‚ æ‰€ä»¥æˆ‘ä»¬æœ‰æ›´å¥½çš„è®¾è®¡æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ç»„åˆæ¨¡å¼ï¼ 3.2.ä½¿ç”¨ç»„åˆæ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆç»„åˆæ¨¡å¼æœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯è®©ç”¨æˆ·å¯ä»¥ä¸€è‡´å¯¹å¾…æ•´ä½“å’Œéƒ¨åˆ†ç»“æž„ï¼Œå°†ä¸¤è€…éƒ½ä½œä¸ºä¸€ä¸ªç›¸åŒçš„ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªæŠ½è±¡çš„ç»„ä»¶ç±»ï¼š12345678910111213141516171819202122public abstract class Component &#123; // èŒä½ private String position; // å·¥ä½œå†…å®¹ private String job; public Component(String position, String job) &#123; this.position = position; this.job = job; &#125; // åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ public void work() &#123; System.out.println("æˆ‘æ˜¯" + position + "ï¼Œæˆ‘æ­£åœ¨" + job); &#125; abstract void addComponent(Component component); abstract void removeComponent(Component component); abstract void check();&#125; ç®¡ç†è€…ç»§æ‰¿è‡ªæ­¤æŠ½è±¡ç±»ï¼š123456789101112131415161718192021222324252627public class Manager extends Component &#123; // ç®¡ç†çš„ç»„ä»¶ private List&lt;Component&gt; components = new ArrayList&lt;&gt;(); public Manager(String position, String job) &#123; super(position, job); &#125; @Override public void addComponent(Component component) &#123; components.add(component); &#125; @Override void removeComponent(Component component) &#123; components.remove(component); &#125; // æ£€æŸ¥ä¸‹å±ž @Override public void check() &#123; work(); for (Component component : components) &#123; component.check(); &#125; &#125;&#125; èŒå‘˜åŒæ ·ç»§æ‰¿è‡ªæ­¤æŠ½è±¡ç±»ï¼š123456789101112131415161718192021public class Employee extends Component &#123; public Employee(String position, String job) &#123; super(position, job); &#125; @Override void addComponent(Component component) &#123; System.out.println("èŒå‘˜æ²¡æœ‰ç®¡ç†æƒé™"); &#125; @Override void removeComponent(Component component) &#123; System.out.println("èŒå‘˜æ²¡æœ‰ç®¡ç†æƒé™"); &#125; @Override void check() &#123; work(); &#125;&#125; ä¿®æ”¹å®¢æˆ·ç«¯å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829public class Client &#123; @Test public void test()&#123; Component boss = new Manager("è€æ¿", "å”±æ€’æ”¾çš„ç”Ÿå‘½"); Component HR = new Employee("äººåŠ›èµ„æº", "èŠå¾®ä¿¡"); Component PM = new Manager("äº§å“ç»ç†", "ä¸çŸ¥é“å¹²å•¥"); Component CFO = new Manager("è´¢åŠ¡ä¸»ç®¡", "çœ‹å‰§"); Component CTO = new Manager("æŠ€æœ¯ä¸»ç®¡", "åˆ’æ°´"); Component UI = new Employee("è®¾è®¡å¸ˆ", "ç”»ç”»"); Component operator = new Employee("è¿è¥äººå‘˜", "å…¼èŒå®¢æœ"); Component webProgrammer = new Employee("ç¨‹åºå‘˜", "å­¦ä¹ è®¾è®¡æ¨¡å¼"); Component backgroundProgrammer = new Employee("åŽå°ç¨‹åºå‘˜", "CRUD"); Component accountant = new Employee("ä¼šè®¡", "èƒŒä¹ä¹ä¹˜æ³•è¡¨"); Component clerk = new Employee("æ–‡å‘˜", "ç»™è€æ¿é€’éº¦å…‹é£Ž"); boss.addComponent(HR); boss.addComponent(PM); boss.addComponent(CFO); PM.addComponent(UI); PM.addComponent(CTO); PM.addComponent(operator); CTO.addComponent(webProgrammer); CTO.addComponent(backgroundProgrammer); CFO.addComponent(accountant); CFO.addComponent(clerk); boss.check(); &#125;&#125; è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œè¾“å‡ºç»“æžœä¸Žä¹‹å‰çš„ç»“æžœä¸€æ¨¡ä¸€æ ·ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ç»„åˆæ¨¡å¼åŽï¼Œæˆ‘ä»¬è§£å†³äº†ä¹‹å‰çš„ä¸¤ä¸ªå¼Šç«¯ã€‚ä¸€æ˜¯å°†å…±æœ‰çš„å­—æ®µä¸Žæ–¹æ³•ç§»åˆ°äº†çˆ¶ç±»ä¸­ï¼Œæ¶ˆé™¤äº†é‡å¤ï¼Œå¹¶ä¸”åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œå¯ä»¥ä¸€è‡´å¯¹å¾… Manager å’Œ Employee ç±»ï¼š Manager ç±»å’Œ Employee ç±»ç»Ÿä¸€å£°æ˜Žä¸º Component å¯¹è±¡ ç»Ÿä¸€è°ƒç”¨ Component å¯¹è±¡çš„ addComponent æ–¹æ³•æ·»åŠ å­å¯¹è±¡å³å¯ã€‚ 3.3.ç»„åˆæ¨¡å¼ä¸­çš„å®‰å…¨æ–¹å¼ä¸Žé€æ˜Žæ–¹å¼è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼ŒEmployee ç±»è™½ç„¶ç»§æ‰¿äº†çˆ¶ç±»çš„ addComponent å’Œ removeComponent æ–¹æ³•ï¼Œä½†æ˜¯ä»…ä»…æä¾›äº†ä¸€ä¸ªç©ºå®žçŽ°ï¼Œå› ä¸º Employee ç±»æ˜¯ä¸æ”¯æŒæ·»åŠ å’Œç§»é™¤ç»„ä»¶çš„ã€‚è¿™æ ·æ˜¯å¦è¿èƒŒäº†æŽ¥å£éš”ç¦»åŽŸåˆ™å‘¢ï¼Ÿ æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ã€‚å¦‚æžœä¸€ä¸ªæŽ¥å£åœ¨å®žçŽ°æ—¶ï¼Œéƒ¨åˆ†æ–¹æ³•ç”±äºŽå†—ä½™è¢«å®¢æˆ·ç«¯ç©ºå®žçŽ°ï¼Œåˆ™åº”è¯¥å°†æŽ¥å£æ‹†åˆ†ï¼Œè®©å®žçŽ°ç±»åªéœ€ä¾èµ–è‡ªå·±éœ€è¦çš„æŽ¥å£æ–¹æ³•ã€‚ ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™æ ·ç¡®å®žè¿èƒŒäº†æŽ¥å£éš”ç¦»åŽŸåˆ™ã€‚è¿™ç§æ–¹å¼åœ¨ç»„åˆæ¨¡å¼ä¸­è¢«ç§°ä½œé€æ˜Žæ–¹å¼. é€æ˜Žæ–¹å¼ï¼šåœ¨ Component ä¸­å£°æ˜Žæ‰€æœ‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ add ã€remove ç­‰ï¼Œè¿™æ ·ç»§æ‰¿è‡ª Component çš„å­ç±»éƒ½å…·å¤‡äº† addã€remove æ–¹æ³•ã€‚å¯¹äºŽå¤–ç•Œæ¥è¯´å¶èŠ‚ç‚¹å’ŒæžèŠ‚ç‚¹æ˜¯é€æ˜Žçš„ï¼Œå®ƒä»¬å…·å¤‡å®Œå…¨ä¸€è‡´çš„æŽ¥å£ã€‚ è¿™ç§æ–¹å¼æœ‰å®ƒçš„ä¼˜ç‚¹ï¼šè®© Manager ç±»å’Œ Employee ç±»å…·å¤‡å®Œå…¨ä¸€è‡´çš„è¡Œä¸ºæŽ¥å£ï¼Œè°ƒç”¨è€…å¯ä»¥ä¸€è‡´å¯¹å¾…å®ƒä»¬ã€‚ ä½†å®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼šEmployee ç±»å¹¶ä¸æ”¯æŒç®¡ç†å­å¯¹è±¡ï¼Œä¸ä»…è¿èƒŒäº†æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼Œè€Œä¸”å®¢æˆ·ç«¯å¯ä»¥ç”¨ Employee ç±»è°ƒç”¨ addComponent å’Œ removeComponent æ–¹æ³•ï¼Œå¯¼è‡´ç¨‹åºå‡ºé”™ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯ä¸å®‰å…¨çš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥å°† addComponent å’Œ removeComponent æ–¹æ³•ç§»åˆ° Manager å­ç±»ä¸­åŽ»å•ç‹¬å®žçŽ°ï¼Œè®© Employee ä¸å†å®žçŽ°è¿™ä¸¤ä¸ªæ–¹æ³•å‘¢ï¼Ÿæˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ã€‚ å°†æŠ½è±¡ç±»ä¿®æ”¹ä¸ºï¼š123456789101112131415161718public abstract class Component &#123; // èŒä½ private String position; // å·¥ä½œå†…å®¹ private String job; public Component(String position, String job) &#123; this.position = position; this.job = job; &#125; // åšè‡ªå·±çš„æœ¬èŒå·¥ä½œ public void work() &#123; System.out.println("æˆ‘æ˜¯" + position + "ï¼Œæˆ‘æ­£åœ¨" + job); &#125; abstract void check();&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨çˆ¶ç±»ä¸­åŽ»æŽ‰äº† addComponent å’Œ removeComponent è¿™ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚ Manager ç±»ä¿®æ”¹ä¸ºï¼š12345678910111213141516171819202122232425public class Manager extends Component &#123; // ç®¡ç†çš„ç»„ä»¶ private List&lt;Component&gt; components = new ArrayList&lt;&gt;(); public Manager(String position, String job) &#123; super(position, job); &#125; public void addComponent(Component component) &#123; components.add(component); &#125; void removeComponent(Component component) &#123; components.remove(component); &#125; // æ£€æŸ¥ä¸‹å±ž @Override public void check() &#123; work(); for (Component component : components) &#123; component.check(); &#125; &#125;&#125; Manager ç±»å•ç‹¬å®žçŽ°äº† addComponent å’Œ removeComponent è¿™ä¸¤ä¸ªæ–¹æ³•ï¼ŒåŽ»æŽ‰äº† @Override æ³¨è§£ã€‚ Employee ç±»ä¿®æ”¹ä¸ºï¼š1234567891011public class Employee extends Component &#123; public Employee(String position, String job) &#123; super(position, job); &#125; @Override void check() &#123; work(); &#125;&#125; å®¢æˆ·ç«¯å»ºç«‹äººå‘˜ç»“æž„å…³ç³»ï¼š1234567891011121314151617181920212223242526272829public class Client &#123; @Test public void test()&#123; Manager boss = new Manager("è€æ¿", "å”±æ€’æ”¾çš„ç”Ÿå‘½"); Employee HR = new Employee("äººåŠ›èµ„æº", "èŠå¾®ä¿¡"); Manager PM = new Manager("äº§å“ç»ç†", "ä¸çŸ¥é“å¹²å•¥"); Manager CFO = new Manager("è´¢åŠ¡ä¸»ç®¡", "çœ‹å‰§"); Manager CTO = new Manager("æŠ€æœ¯ä¸»ç®¡", "åˆ’æ°´"); Employee UI = new Employee("è®¾è®¡å¸ˆ", "ç”»ç”»"); Employee operator = new Employee("è¿è¥äººå‘˜", "å…¼èŒå®¢æœ"); Employee webProgrammer = new Employee("ç¨‹åºå‘˜", "å­¦ä¹ è®¾è®¡æ¨¡å¼"); Employee backgroundProgrammer = new Employee("åŽå°ç¨‹åºå‘˜", "CRUD"); Employee accountant = new Employee("ä¼šè®¡", "èƒŒä¹ä¹ä¹˜æ³•è¡¨"); Employee clerk = new Employee("æ–‡å‘˜", "ç»™è€æ¿é€’éº¦å…‹é£Ž"); boss.addComponent(HR); boss.addComponent(PM); boss.addComponent(CFO); PM.addComponent(UI); PM.addComponent(CTO); PM.addComponent(operator); CTO.addComponent(webProgrammer); CTO.addComponent(backgroundProgrammer); CFO.addComponent(accountant); CFO.addComponent(clerk); boss.check(); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æžœä¸Žä¹‹å‰ä¸€æ¨¡ä¸€æ ·ã€‚ è¿™ç§æ–¹å¼åœ¨ç»„åˆæ¨¡å¼ä¸­ç§°ä¹‹ä¸ºå®‰å…¨æ–¹å¼ã€‚ å®‰å…¨æ–¹å¼ï¼šåœ¨ Component ä¸­ä¸å£°æ˜Ž add å’Œ remove ç­‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™æ ·å¶èŠ‚ç‚¹å°±æ— éœ€å®žçŽ°å®ƒï¼Œåªéœ€åœ¨æžèŠ‚ç‚¹ä¸­å®žçŽ°ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•å³å¯ã€‚ å®‰å…¨æ–¹å¼éµå¾ªäº†æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼Œä½†ç”±äºŽä¸å¤Ÿé€æ˜Žï¼ŒManager å’Œ Employee ç±»ä¸å…·æœ‰ç›¸åŒçš„æŽ¥å£ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å°† Manager å’Œ Employee ç»Ÿä¸€å£°æ˜Žä¸º Component ç±»äº†ï¼Œå¿…é¡»è¦åŒºåˆ«å¯¹å¾…ï¼Œå¸¦æ¥äº†ä½¿ç”¨ä¸Šçš„ä¸æ–¹ä¾¿ã€‚ å®‰å…¨æ–¹å¼å’Œé€æ˜Žæ–¹å¼å„æœ‰å¥½å¤„ï¼Œåœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œéœ€è¦æ ¹æ®å®žé™…æƒ…å†µå†³å®šã€‚ä½†å¤§å¤šæ•°ä½¿ç”¨ç»„åˆæ¨¡å¼çš„åœºæ™¯éƒ½æ˜¯é‡‡ç”¨çš„é€æ˜Žæ–¹å¼ï¼Œè™½ç„¶å®ƒæœ‰ç‚¹ä¸å®‰å…¨ï¼Œä½†æ˜¯å®¢æˆ·ç«¯æ— éœ€åšä»»ä½•åˆ¤æ–­æ¥åŒºåˆ†æ˜¯å¶å­ç»“ç‚¹è¿˜æ˜¯æžèŠ‚ç‚¹ï¼Œç”¨èµ·æ¥æ˜¯çœŸé¦™ã€‚ æ€»ç»“åˆ°è¿™é‡Œæˆ‘ä»¬å°±æŠŠç»“æž„åž‹æ¨¡å¼çš„å‰ä¸‰ç§ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š é€‚é…å™¨æ¨¡å¼ï¼šç”¨äºŽæœ‰ç›¸å…³æ€§ä½†ä¸å…¼å®¹çš„æŽ¥å£ æ¡¥æŽ¥æ¨¡å¼ï¼šç”¨äºŽåŒç­‰çº§çš„æŽ¥å£äº’ç›¸ç»„åˆ ç»„åˆæ¨¡å¼ï¼šç”¨äºŽæ•´ä½“ä¸Žéƒ¨åˆ†çš„ç»“æž„ å‰©ä½™å››ç§ç»“æž„åž‹æ¨¡å¼æˆ‘ä»¬å°†åœ¨ä¸‹ç¯‡æ–‡ç« ä¸­å­¦ä¹ ã€‚ æœ¬æ–‡ä½œè€…ï¼šAlpinist Wang å£°æ˜Žï¼šæœ¬æ–‡å½’ â€œåŠ›æ‰£â€ ç‰ˆæƒæ‰€æœ‰ï¼Œå¦‚éœ€è½¬è½½è¯·è”ç³»ã€‚æ–‡ç« å°é¢å›¾å’Œæ–‡ä¸­éƒ¨åˆ†å›¾ç‰‡æ¥æºäºŽç½‘ç»œï¼Œä¸ºéžå•†ä¸šç”¨é€”ä½¿ç”¨ï¼Œå¦‚æœ‰ä¾µæƒè”ç³»åˆ é™¤ã€‚]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Design Patterns</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DesignPattern_Creational Pattern]]></title>
    <url>%2F2019%2F05%2F12%2FDesignPattern_Creational%20Pattern%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿé¢å‘å¯¹è±¡çš„ç‰¹ç‚¹æ˜¯å¯ç»´æŠ¤ã€å¯å¤ç”¨ã€å¯æ‰©å±•ã€çµæ´»æ€§å¥½ï¼Œå®ƒçœŸæ­£å¼ºå¤§çš„åœ°æ–¹åœ¨äºŽï¼šéšç€ä¸šåŠ¡å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œé¢å‘å¯¹è±¡ä¾ç„¶èƒ½å¤Ÿä½¿å¾—ç¨‹åºç»“æž„è‰¯å¥½ï¼Œè€Œé¢å‘è¿‡ç¨‹å´ä¼šå¯¼è‡´ç¨‹åºè¶Šæ¥è¶Šè‡ƒè‚¿ã€‚ è®©é¢å‘å¯¹è±¡ä¿æŒç»“æž„è‰¯å¥½çš„ç§˜è¯€å°±æ˜¯ è®¾è®¡æ¨¡å¼ï¼Œä»Šå¤©åŠ›æ‰£å°±å¸¦é¢†å¤§å®¶ä¸€èµ·æ¥æŽ¢ç´¢è®¾è®¡æ¨¡å¼çš„ä¸–ç•Œï¼ è®¾è®¡æ¨¡å¼çš„å…­å¤§åŽŸåˆ™è®¾è®¡æ¨¡å¼çš„ä¸–ç•Œä¸°å¯Œå¤šå½©ï¼Œæ¯”å¦‚ç”Ÿäº§ä¸€ä¸ªä¸ªã€Œäº§å“ã€çš„å·¥åŽ‚æ¨¡å¼ï¼Œè¡”æŽ¥ä¸¤ä¸ªä¸ç›¸å…³æŽ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼Œç”¨ä¸åŒçš„æ–¹å¼åšåŒä¸€ä»¶äº‹çš„ç­–ç•¥æ¨¡å¼ï¼Œæž„å»ºæ­¥éª¤ç¨³å®šã€æ ¹æ®æž„å»ºè¿‡ç¨‹çš„ä¸åŒé…ç½®æž„å»ºå‡ºä¸åŒå¯¹è±¡çš„å»ºé€ è€…æ¨¡å¼ç­‰ã€‚ é¢å‘å¯¹è±¡ç»“åˆè®¾è®¡æ¨¡å¼ï¼Œæ‰èƒ½çœŸæ­£ä½“ä¼šåˆ°ç¨‹åºå˜å¾—å¯ç»´æŠ¤ã€å¯å¤ç”¨ã€å¯æ‰©å±•ã€çµæ´»æ€§å¥½ã€‚è®¾è®¡æ¨¡å¼å¯¹äºŽç¨‹åºå‘˜è€Œè¨€å¹¶ä¸é™Œç”Ÿï¼Œæ¯ä¸ªç¨‹åºå‘˜åœ¨ç¼–ç¨‹æ—¶éƒ½ä¼šæˆ–å¤šæˆ–å°‘åœ°æŽ¥è§¦åˆ°è®¾è®¡æ¨¡å¼ã€‚æ— è®ºæ˜¯åœ¨å¤§åž‹ç¨‹åºçš„æž¶æž„ä¸­ï¼Œäº¦æˆ–æ˜¯åœ¨æºç çš„å­¦ä¹ ä¸­ï¼Œè®¾è®¡æ¨¡å¼éƒ½æ‰®æ¼”ç€éžå¸¸é‡è¦çš„è§’è‰²ã€‚ è®¾è®¡æ¨¡å¼åŸºäºŽå…­å¤§åŽŸåˆ™ï¼š å¼€é—­åŽŸåˆ™ Open Close Principleï¼šä¸€ä¸ªè½¯ä»¶å®žä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹ä¿®æ”¹å°é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚ å•ä¸€èŒè´£åŽŸåˆ™ Single Responsibility Principleï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼Œä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å®ƒä¿®æ”¹çš„åŽŸå› ã€‚ é‡Œæ°æ›¿æ¢åŽŸåˆ™ Liskov Substitution Principleï¼šå­ç±»åº”è¯¥å¯ä»¥å®Œå…¨æ›¿æ¢çˆ¶ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œåªæ‰©å±•æ–°åŠŸèƒ½ï¼Œè€Œä¸è¦ç ´åçˆ¶ç±»åŽŸæœ‰çš„åŠŸèƒ½ã€‚ ä¾èµ–å€’ç½®åŽŸåˆ™ Dependence Inversion Principleï¼šç»†èŠ‚åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ï¼ŒæŠ½è±¡ä¸åº”ä¾èµ–äºŽç»†èŠ‚ã€‚æŠŠæŠ½è±¡å±‚æ”¾åœ¨ç¨‹åºè®¾è®¡çš„é«˜å±‚ï¼Œå¹¶ä¿æŒç¨³å®šï¼Œç¨‹åºçš„ç»†èŠ‚å˜åŒ–ç”±ä½Žå±‚çš„å®žçŽ°å±‚æ¥å®Œæˆã€‚ è¿ªç±³ç‰¹æ³•åˆ™ Law of Demeter ï¼ˆæœ€å°‘çŸ¥è¯†åŽŸåˆ™ Least Knowledge Principleï¼‰ï¼šåˆåã€Œæœ€å°‘çŸ¥é“åŽŸåˆ™ã€ï¼Œä¸€ä¸ªç±»ä¸åº”çŸ¥é“è‡ªå·±æ“ä½œçš„ç±»çš„ç»†èŠ‚ï¼Œæ¢è¨€ä¹‹ï¼Œåªå’Œæœ‹å‹è°ˆè¯ï¼Œä¸å’Œæœ‹å‹çš„æœ‹å‹è°ˆè¯ã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™ Interface segregation Principleï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ã€‚å¦‚æžœä¸€ä¸ªæŽ¥å£åœ¨å®žçŽ°æ—¶ï¼Œéƒ¨åˆ†æ–¹æ³•ç”±äºŽå†—ä½™è¢«å®¢æˆ·ç«¯ç©ºå®žçŽ°ï¼Œåˆ™åº”è¯¥å°†æŽ¥å£æ‹†åˆ†ï¼Œè®©å®žçŽ°ç±»åªéœ€ä¾èµ–è‡ªå·±éœ€è¦çš„æŽ¥å£æ–¹æ³•ã€‚ æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸ºäº†ç¨‹åºèƒ½æ›´å¥½çš„æ»¡è¶³è¿™å…­å¤§åŽŸåˆ™ã€‚è®¾è®¡æ¨¡å¼ä¸€å…±æœ‰ 23 ç§ï¼Œä»Šå¤©æˆ‘ä»¬å…ˆæ¥å­¦ä¹ æž„å»ºåž‹æ¨¡å¼ï¼Œä¸€å…±äº”ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š å·¥åŽ‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥åŽ‚æ¨¡å¼ å•ä¾‹æ¨¡å¼ å»ºé€ åž‹æ¨¡å¼ åŽŸåž‹æ¨¡å¼ ä¸€ã€å·¥åŽ‚æ¨¡å¼ Factory Method Provides an abstraction or an interface and lets subclass or implementing classes decide which class or method should be instantiated or called, based on the conditions or parameters given. åœ¨å¹³æ—¶ç¼–ç¨‹ä¸­ï¼Œæž„å»ºå¯¹è±¡æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ new ä¸€ä¸ªå¯¹è±¡ã€‚ä¹ä¸€çœ‹è¿™ç§åšæ³•æ²¡ä»€ä¹ˆä¸å¥½ï¼Œè€Œå®žé™…ä¸Šè¿™ä¹Ÿå±žäºŽä¸€ç§ç¡¬ç¼–ç ã€‚æ¯ new ä¸€ä¸ªå¯¹è±¡ï¼Œç›¸å½“äºŽè°ƒç”¨è€…å¤šçŸ¥é“äº†ä¸€ä¸ªç±»ï¼Œå¢žåŠ äº†ç±»ä¸Žç±»ä¹‹é—´çš„è”ç³»ï¼Œä¸åˆ©äºŽç¨‹åºçš„æ¾è€¦åˆã€‚å…¶å®žæž„å»ºè¿‡ç¨‹å¯ä»¥è¢«å°è£…èµ·æ¥ï¼Œå·¥åŽ‚æ¨¡å¼ä¾¿æ˜¯ç”¨äºŽå°è£…å¯¹è±¡çš„è®¾è®¡æ¨¡å¼ã€‚ 1.1.ç®€å•å·¥åŽ‚æ¨¡å¼ ä¸¾ä¸ªä¾‹å­ï¼Œç›´æŽ¥ new å¯¹è±¡çš„æ–¹å¼ç›¸å½“äºŽå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‹¹æžœæ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è‹¹æžœçš„æž„é€ æ–¹æ³•ï¼Œéœ€è¦ä¸€ä¸ªæ¢¨å­æ—¶ï¼Œéœ€è¦çŸ¥é“æ¢¨å­çš„æž„é€ æ–¹æ³•ã€‚æ›´å¥½çš„å®žçŽ°æ–¹å¼æ˜¯æœ‰ä¸€ä¸ªæ°´æžœå·¥åŽ‚ï¼Œæˆ‘ä»¬å‘Šè¯‰å·¥åŽ‚éœ€è¦ä»€ä¹ˆç§ç±»çš„æ°´æžœï¼Œæ°´æžœå·¥åŽ‚å°†æˆ‘ä»¬éœ€è¦çš„æ°´æžœåˆ¶é€ å‡ºæ¥ç»™æˆ‘ä»¬å°±å¯ä»¥äº†ã€‚è¿™æ ·æˆ‘ä»¬å°±æ— éœ€çŸ¥é“è‹¹æžœã€æ¢¨å­æ˜¯æ€Žä¹ˆç§å‡ºæ¥çš„ï¼Œåªç”¨å’Œæ°´æžœå·¥åŽ‚æ‰“äº¤é“å³å¯ã€‚ æ°´æžœå·¥åŽ‚ï¼š 123456789public class FruitFactory &#123; public Fruit create(String type)&#123; switch (type)&#123; case "è‹¹æžœ": return new Apple(); case "æ¢¨å­": return new Pear(); default: throw new IllegalArgumentException("æš‚æ—¶æ²¡æœ‰è¿™ç§æ°´æžœ"); &#125; &#125;&#125; è°ƒç”¨è€…ï¼š123456789public class User &#123; private void eat()&#123; FruitFactory fruitFactory = new FruitFactory(); Fruit apple = fruitFactory.create("è‹¹æžœ"); Fruit pear = fruitFactory.create("æ¢¨å­"); apple.eat(); pear.eat(); &#125;&#125; äº‹å®žä¸Šï¼Œå°†æž„å»ºè¿‡ç¨‹å°è£…çš„å¥½å¤„ä¸ä»…å¯ä»¥é™ä½Žè€¦åˆï¼Œå¦‚æžœæŸä¸ªäº§å“æž„é€ æ–¹æ³•ç›¸å½“å¤æ‚ï¼Œä½¿ç”¨å·¥åŽ‚æ¨¡å¼å¯ä»¥å¤§å¤§å‡å°‘ä»£ç é‡å¤ã€‚æ¯”å¦‚ï¼Œå¦‚æžœç”Ÿäº§ä¸€ä¸ªè‹¹æžœéœ€è¦è‹¹æžœç§å­ã€é˜³å…‰ã€æ°´åˆ†ï¼Œå°†å·¥åŽ‚ä¿®æ”¹å¦‚ä¸‹ï¼š123456789101112131415public class FruitFactory &#123; public Fruit create(String type) &#123; switch (type) &#123; case "è‹¹æžœ": AppleSeed appleSeed = new AppleSeed(); Sunlight sunlight = new Sunlight(); Water water = new Water(); return new Apple(appleSeed, sunlight, water); case "æ¢¨å­": return new Pear(); default: throw new IllegalArgumentException("æš‚æ—¶æ²¡æœ‰è¿™ç§æ°´æžœ"); &#125; &#125;&#125; è°ƒç”¨è€…çš„ä»£ç åˆ™å®Œå…¨ä¸éœ€è¦å˜åŒ–ï¼Œè€Œä¸”è°ƒç”¨è€…ä¸éœ€è¦åœ¨æ¯æ¬¡éœ€è¦è‹¹æžœæ—¶ï¼Œè‡ªå·±åŽ»æž„å»ºè‹¹æžœç§å­ã€é˜³å…‰ã€æ°´åˆ†ä»¥èŽ·å¾—è‹¹æžœã€‚è‹¹æžœçš„ç”Ÿäº§è¿‡ç¨‹å†å¤æ‚ï¼Œä¹Ÿåªæ˜¯å·¥åŽ‚çš„äº‹ã€‚è¿™å°±æ˜¯å°è£…çš„å¥½å¤„ï¼Œå‡å¦‚æŸå¤©ç§‘å­¦å®¶å‘æ˜Žäº†è®©è‹¹æžœæ›´é¦™ç”œçš„è‚¥æ–™ï¼Œè¦åŠ å…¥è‹¹æžœçš„ç”Ÿäº§è¿‡ç¨‹ä¸­çš„è¯ï¼Œä¹Ÿåªéœ€è¦åœ¨å·¥åŽ‚ä¸­ä¿®æ”¹ï¼Œè°ƒç”¨è€…å®Œå…¨ä¸ç”¨å…³å¿ƒã€‚ ä¸çŸ¥ä¸è§‰ä¸­ï¼Œæˆ‘ä»¬å°±å†™å‡ºäº†ç®€å•å·¥åŽ‚æ¨¡å¼çš„ä»£ç ã€‚å·¥åŽ‚æ¨¡å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š ç®€å•å·¥åŽ‚æ¨¡å¼ å·¥åŽ‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥åŽ‚æ¨¡å¼ æ³¨ï¼šåœ¨ GoF æ‰€è‘—çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œç®€å•å·¥åŽ‚æ¨¡å¼è¢«åˆ’åˆ†ä¸ºå·¥åŽ‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ï¼Œæ²¡æœ‰å•ç‹¬è¢«åˆ—å‡ºæ¥ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œç®€å•å·¥åŽ‚æ¨¡å¼å°±æ˜¯è®©ä¸€ä¸ªå·¥åŽ‚ç±»æ‰¿æ‹…æž„å»ºæ‰€æœ‰å¯¹è±¡çš„èŒè´£ã€‚è°ƒç”¨è€…éœ€è¦ä»€ä¹ˆäº§å“ï¼Œè®©å·¥åŽ‚ç”Ÿäº§å‡ºæ¥å³å¯ã€‚å®ƒçš„å¼Šç«¯ä¹Ÿæ˜¾è€Œæ˜“è§ï¼š ä¸€æ˜¯å¦‚æžœéœ€è¦ç”Ÿäº§çš„äº§å“è¿‡å¤šï¼Œæ­¤æ¨¡å¼ä¼šå¯¼è‡´å·¥åŽ‚ç±»è¿‡äºŽåºžå¤§ï¼Œæ‰¿æ‹…è¿‡å¤šçš„èŒè´£ï¼Œå˜æˆè¶…çº§ç±»ã€‚å½“è‹¹æžœç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œè¦æ¥ä¿®æ”¹æ­¤å·¥åŽ‚ã€‚æ¢¨å­ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œä¹Ÿè¦æ¥ä¿®æ”¹æ­¤å·¥åŽ‚ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç±»ä¸æ­¢ä¸€ä¸ªå¼•èµ·ä¿®æ”¹çš„åŽŸå› ã€‚è¿èƒŒäº†å•ä¸€èŒè´£åŽŸåˆ™ã€‚äºŒæ˜¯å½“è¦ç”Ÿäº§æ–°çš„äº§å“æ—¶ï¼Œå¿…é¡»åœ¨å·¥åŽ‚ç±»ä¸­æ·»åŠ æ–°çš„åˆ†æ”¯ã€‚è€Œå¼€é—­åŽŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼šç±»åº”è¯¥å¯¹ä¿®æ”¹å°é—­ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€å¢žåŠ æ–°çš„ç±»ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—¢æœ‰çš„ç±»ï¼Œæ‰€ä»¥è¿™å°±è¿èƒŒäº†å¼€é—­åŽŸåˆ™ã€‚ 1.2.å·¥åŽ‚æ–¹æ³•æ¨¡å¼ ä¸ºäº†è§£å†³ç®€å•å·¥åŽ‚æ¨¡å¼çš„è¿™ä¸¤ä¸ªå¼Šç«¯ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œå®ƒè§„å®šæ¯ä¸ªäº§å“éƒ½æœ‰ä¸€ä¸ªä¸“å±žå·¥åŽ‚ã€‚æ¯”å¦‚è‹¹æžœæœ‰ä¸“å±žçš„è‹¹æžœå·¥åŽ‚ï¼Œæ¢¨å­æœ‰ä¸“å±žçš„æ¢¨å­å·¥åŽ‚ï¼ŒJava ä»£ç å¦‚ä¸‹ï¼š è‹¹æžœå·¥åŽ‚ï¼š12345public class AppleFactory &#123; public Fruit create()&#123; return new Apple(); &#125;&#125; æ¢¨å­å·¥åŽ‚ï¼š12345public class PearFactory &#123; public Fruit create()&#123; return new Pear(); &#125;&#125; è°ƒç”¨è€…ï¼š12345678910public class User &#123; private void eat()&#123; AppleFactory appleFactory = new AppleFactory(); Fruit apple = appleFactory.create(); PearFactory pearFactory = new PearFactory(); Fruit pear = pearFactory.create(); apple.eat(); pear.eat(); &#125;&#125; æœ‰è¯»è€…å¯èƒ½ä¼šå¼€å–·äº†ï¼Œè¿™æ ·å’Œç›´æŽ¥ new å‡ºè‹¹æžœå’Œæ¢¨å­æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸Šæ–‡è¯´å·¥åŽ‚æ˜¯ä¸ºäº†å‡å°‘ç±»ä¸Žç±»ä¹‹é—´çš„è€¦åˆï¼Œè®©è°ƒç”¨è€…å°½å¯èƒ½å°‘çš„å’Œå…¶ä»–ç±»æ‰“äº¤é“ã€‚ç”¨ç®€å•å·¥åŽ‚æ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ FruitFactoryï¼Œæ— éœ€çŸ¥é“ Apple ã€Pear ç±»ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºè€¦åˆåº¦é™ä½Žäº†ã€‚ä½†ç”¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ï¼Œè°ƒç”¨è€…è™½ç„¶ä¸éœ€è¦å’Œ Apple ã€Pear ç±»æ‰“äº¤é“äº†ï¼Œä½†å´éœ€è¦å’Œ AppleFactoryã€PearFactory ç±»æ‰“äº¤é“ã€‚æœ‰å‡ ç§æ°´æžœå°±éœ€è¦çŸ¥é“å‡ ä¸ªå·¥åŽ‚ç±»ï¼Œè€¦åˆåº¦å®Œå…¨æ²¡æœ‰ä¸‹é™å•Šï¼Œç”šè‡³è¿˜å¢žåŠ äº†ä»£ç é‡ï¼ è¿™ä½è¯»è€…è¯·å…ˆæ”¾ä¸‹æ‰‹ä¸­çš„å¤§åˆ€ï¼Œä»”ç»†æƒ³ä¸€æƒ³ï¼Œå·¥åŽ‚æ¨¡å¼çš„ç¬¬äºŒä¸ªä¼˜ç‚¹åœ¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸­è¿˜æ˜¯å­˜åœ¨çš„ã€‚å½“æž„å»ºè¿‡ç¨‹ç›¸å½“å¤æ‚æ—¶ï¼Œå·¥åŽ‚å°†æž„å»ºè¿‡ç¨‹å°è£…èµ·æ¥ï¼Œè°ƒç”¨è€…å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æŽ¥ä½¿ç”¨ï¼ŒåŒæ ·ä»¥è‹¹æžœç”Ÿäº§ä¸ºä¾‹ï¼š12345678public class AppleFactory &#123; public Fruit create()&#123; AppleSeed appleSeed = new AppleSeed(); Sunlight sunlight = new Sunlight(); Water water = new Water(); return new Apple(appleSeed, sunlight, water); &#125;&#125; è°ƒç”¨è€…æ— éœ€çŸ¥é“è‹¹æžœçš„ç”Ÿäº§ç»†èŠ‚ï¼Œå½“ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ä¹Ÿæ— éœ€æ›´æ”¹è°ƒç”¨ç«¯ã€‚åŒæ—¶ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼è§£å†³äº†ç®€å•å·¥åŽ‚æ¨¡å¼çš„ä¸¤ä¸ªå¼Šç«¯ã€‚ å½“ç”Ÿäº§çš„äº§å“ç§ç±»è¶Šæ¥è¶Šå¤šæ—¶ï¼Œå·¥åŽ‚ç±»ä¸ä¼šå˜æˆè¶…çº§ç±»ã€‚å·¥åŽ‚ç±»ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¿æŒçµæ´»ã€‚ä¸ä¼šè¶Šæ¥è¶Šå¤§ã€å˜å¾—è‡ƒè‚¿ã€‚å¦‚æžœè‹¹æžœçš„ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œåªéœ€ä¿®æ”¹è‹¹æžœå·¥åŽ‚ã€‚æ¢¨å­çš„ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œåªéœ€ä¿®æ”¹æ¢¨å­å·¥åŽ‚ã€‚ç¬¦åˆå•ä¸€èŒè´£åŽŸåˆ™ã€‚ å½“éœ€è¦ç”Ÿäº§æ–°çš„äº§å“æ—¶ï¼Œæ— éœ€æ›´æ”¹æ—¢æœ‰çš„å·¥åŽ‚ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„å·¥åŽ‚å³å¯ã€‚ä¿æŒäº†é¢å‘å¯¹è±¡çš„å¯æ‰©å±•æ€§ï¼Œç¬¦åˆå¼€é—­åŽŸåˆ™ã€‚ 1.3.æŠ½è±¡å·¥åŽ‚æ¨¡å¼ Abstract Factory Provides one level of interface higher than the factory pattern. It is used to return one of several factories. å·¥åŽ‚æ–¹æ³•æ¨¡å¼å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæå–å‡ºå·¥åŽ‚æŽ¥å£ï¼š 123public interface IFactory &#123; Fruit create();&#125; ç„¶åŽè‹¹æžœå·¥åŽ‚å’Œæ¢¨å­å·¥åŽ‚éƒ½å®žçŽ°æ­¤æŽ¥å£ï¼š1234567891011121314public class AppleFactory implements IFactory &#123; @Override public Fruit create()&#123; return new Apple(); &#125;&#125;public class PearFactory implements IFactory &#123; @Override public Fruit create()&#123; return new Pear(); &#125;&#125; æ­¤æ—¶ï¼Œè°ƒç”¨è€…å¯ä»¥å°† AppleFactory å’Œ PearFactory ç»Ÿä¸€ä½œä¸º IFactory å¯¹è±¡ä½¿ç”¨ï¼Œè°ƒç”¨è€… Java ä»£ç å¦‚ä¸‹ï¼š12345678910public class User &#123; private void eat()&#123; IFactory appleFactory = new AppleFactory(); Fruit apple = appleFactory.create(); IFactory pearFactory = new PearFactory(); Fruit pear = pearFactory.create(); apple.eat(); pear.eat(); &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæ—¶æŒ‡å®šäº†å…·ä½“çš„å·¥åŽ‚ç±»åŽï¼Œåœ¨ä½¿ç”¨æ—¶å°±æ— éœ€å†å…³å¿ƒæ˜¯å“ªä¸ªå·¥åŽ‚ç±»ï¼Œåªéœ€è¦å°†æ­¤å·¥åŽ‚å½“ä½œæŠ½è±¡çš„ IFactory æŽ¥å£ä½¿ç”¨å³å¯ã€‚è¿™ç§ç»è¿‡æŠ½è±¡çš„å·¥åŽ‚æ–¹æ³•æ¨¡å¼è¢«ç§°ä½œæŠ½è±¡å·¥åŽ‚æ¨¡å¼ã€‚ ç”±äºŽå®¢æˆ·ç«¯åªå’Œ IFactory æ‰“äº¤é“äº†ï¼Œè°ƒç”¨çš„æ˜¯æŽ¥å£ä¸­çš„æ–¹æ³•ï¼Œä½¿ç”¨æ—¶æ ¹æœ¬ä¸éœ€è¦çŸ¥é“æ˜¯åœ¨å“ªä¸ªå…·ä½“å·¥åŽ‚ä¸­å®žçŽ°çš„è¿™äº›æ–¹æ³•ï¼Œè¿™å°±ä½¿å¾—æ›¿æ¢å·¥åŽ‚å˜å¾—éžå¸¸å®¹æ˜“ã€‚ ä¾‹å¦‚ï¼š12345678910111213141516public class User &#123; private void eat()&#123; IFactory factory = new AppleFactory(); Fruit fruit = factory.create(); fruit.eat(); &#125;&#125;//å¦‚æžœéœ€è¦æ›¿æ¢ä¸ºåƒæ¢¨å­ï¼Œåªéœ€è¦æ›´æ”¹ä¸€è¡Œä»£ç å³å¯ï¼špublic class User &#123; private void eat()&#123; IFactory factory = new PearFactory(); Fruit fruit = factory.create(); fruit.eat(); &#125;&#125; IFactory ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•æ—¶ï¼Œæˆ–è®¸è¿˜çœ‹ä¸å‡ºæŠ½è±¡å·¥åŽ‚æ¨¡å¼çš„å¨åŠ›ã€‚å®žé™…ä¸ŠæŠ½è±¡å·¥åŽ‚æ¨¡å¼ä¸»è¦ç”¨äºŽæ›¿æ¢ä¸€ç³»åˆ—æ–¹æ³•ã€‚ä¾‹å¦‚å°†ç¨‹åºä¸­çš„ SQL Server æ•°æ®åº“æ•´ä¸ªæ›¿æ¢ä¸º Access æ•°æ®åº“ï¼Œä½¿ç”¨æŠ½è±¡æ–¹æ³•æ¨¡å¼çš„è¯ï¼Œåªéœ€åœ¨ IFactory æŽ¥å£ä¸­å®šä¹‰å¥½å¢žåˆ æ”¹æŸ¥å››ä¸ªæ–¹æ³•ï¼Œè®© SQLFactory å’Œ AccessFactory å®žçŽ°æ­¤æŽ¥å£ï¼Œè°ƒç”¨æ—¶ç›´æŽ¥ä½¿ç”¨ IFactory ä¸­çš„æŠ½è±¡æ–¹æ³•å³å¯ï¼Œè°ƒç”¨è€…æ— éœ€çŸ¥é“ä½¿ç”¨çš„ä»€ä¹ˆæ•°æ®åº“ï¼Œæˆ‘ä»¬å°±å¯ä»¥éžå¸¸æ–¹ä¾¿çš„æ•´ä¸ªæ›¿æ¢ç¨‹åºçš„æ•°æ®åº“ï¼Œå¹¶ä¸”è®©å®¢æˆ·ç«¯æ¯«ä¸çŸ¥æƒ…ã€‚ æŠ½è±¡å·¥åŽ‚æ¨¡å¼å¾ˆå¥½çš„å‘æŒ¥äº†å¼€é—­åŽŸåˆ™ã€ä¾èµ–å€’ç½®åŽŸåˆ™ï¼Œä½†ç¼ºç‚¹æ˜¯æŠ½è±¡å·¥åŽ‚æ¨¡å¼å¤ªé‡äº†ï¼Œå¦‚æžœ IFactory æŽ¥å£éœ€è¦æ–°å¢žåŠŸèƒ½ï¼Œåˆ™ä¼šå½±å“åˆ°æ‰€æœ‰çš„å…·ä½“å·¥åŽ‚ç±»ã€‚ä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼Œæ›¿æ¢å…·ä½“å·¥åŽ‚æ—¶åªéœ€æ›´æ”¹ä¸€è¡Œä»£ç ï¼Œä½†è¦æ–°å¢žæŠ½è±¡æ–¹æ³•åˆ™éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å…·ä½“å·¥åŽ‚ç±»ã€‚æ‰€ä»¥æŠ½è±¡å·¥åŽ‚æ¨¡å¼é€‚ç”¨äºŽå¢žåŠ åŒç±»å·¥åŽ‚è¿™æ ·çš„æ¨ªå‘æ‰©å±•éœ€æ±‚ï¼Œä¸é€‚åˆæ–°å¢žåŠŸèƒ½è¿™æ ·çš„çºµå‘æ‰©å±•ã€‚ äºŒã€å•ä¾‹æ¨¡å¼ Singleton One instance of a class or one value accessible globally in an application. å•ä¾‹æ¨¡å¼éžå¸¸å¸¸è§ï¼ŒæŸä¸ªå¯¹è±¡å…¨å±€åªéœ€è¦ä¸€ä¸ªå®žä¾‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼š å®ƒèƒ½å¤Ÿé¿å…å¯¹è±¡é‡å¤åˆ›å»ºï¼ŒèŠ‚çº¦ç©ºé—´å¹¶æå‡æ•ˆçŽ‡ é¿å…ç”±äºŽæ“ä½œä¸åŒå®žä¾‹å¯¼è‡´çš„é€»è¾‘é”™è¯¯ å•ä¾‹æ¨¡å¼æœ‰ä¸¤ç§å®žçŽ°æ–¹å¼ï¼šé¥¿æ±‰å¼å’Œæ‡’æ±‰å¼ã€‚ 2.1.é¥¿æ±‰å¼ é¥¿æ±‰å¼ï¼šå˜é‡åœ¨å£°æ˜Žæ—¶ä¾¿åˆå§‹åŒ–ã€‚1234567891011public class Singleton &#123; private static Singleton instance = new Singleton(); private Singleton() &#123; &#125; public static Singleton getInstance() &#123; return instance; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†æž„é€ æ–¹æ³•å®šä¹‰ä¸º privateï¼Œè¿™å°±ä¿è¯äº†å…¶ä»–ç±»æ— æ³•å®žä¾‹åŒ–æ­¤ç±»ï¼Œå¿…é¡»é€šè¿‡ getInstance æ–¹æ³•æ‰èƒ½èŽ·å–åˆ°å”¯ä¸€çš„ instance å®žä¾‹ï¼Œéžå¸¸ç›´è§‚ã€‚ä½†é¥¿æ±‰å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯å³ä½¿è¿™ä¸ªå•ä¾‹ä¸éœ€è¦ä½¿ç”¨ï¼Œå®ƒä¹Ÿä¼šåœ¨ç±»åŠ è½½ä¹‹åŽç«‹å³åˆ›å»ºå‡ºæ¥ï¼Œå ç”¨ä¸€å—å†…å­˜ï¼Œå¹¶å¢žåŠ ç±»åˆå§‹åŒ–æ—¶é—´ã€‚å°±å¥½æ¯”ä¸€ä¸ªç”µå·¥åœ¨ä¿®ç†ç¯æ³¡æ—¶ï¼Œå…ˆæŠŠæ‰€æœ‰å·¥å…·æ‹¿å‡ºæ¥ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æ‰€æœ‰çš„å·¥å…·éƒ½ç”¨å¾—ä¸Šã€‚å°±åƒä¸€ä¸ªé¥¥ä¸æ‹©é£Ÿçš„é¥¿æ±‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºé¥¿æ±‰å¼ã€‚ 2.2.æ‡’æ±‰å¼ æ‡’æ±‰å¼ï¼šå…ˆå£°æ˜Žä¸€ä¸ªç©ºå˜é‡ï¼Œéœ€è¦ç”¨æ—¶æ‰åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š1234567891011121314public class Singleton &#123; private static Singleton instance = null; private Singleton() &#123; &#125; public static Singleton getInstance()&#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125;&#125; æˆ‘ä»¬å…ˆå£°æ˜Žäº†ä¸€ä¸ªåˆå§‹å€¼ä¸º null çš„ instance å˜é‡ï¼Œå½“éœ€è¦ä½¿ç”¨æ—¶åˆ¤æ–­æ­¤å˜é‡æ˜¯å¦å·²è¢«åˆå§‹åŒ–ï¼Œæ²¡æœ‰åˆå§‹åŒ–çš„è¯æ‰ new ä¸€ä¸ªå®žä¾‹å‡ºæ¥ã€‚å°±å¥½æ¯”ç”µå·¥åœ¨ä¿®ç†ç¯æ³¡æ—¶ï¼Œå¼€å§‹æ¯”è¾ƒå·æ‡’ï¼Œä»€ä¹ˆå·¥å…·éƒ½ä¸æ‹¿ï¼Œå½“å‘çŽ°éœ€è¦ä½¿ç”¨èžºä¸åˆ€æ—¶ï¼Œæ‰æŠŠèžºä¸åˆ€æ‹¿å‡ºæ¥ã€‚å½“éœ€è¦ç”¨é’³å­æ—¶ï¼Œå†æŠŠé’³å­æ‹¿å‡ºæ¥ã€‚å°±åƒä¸€ä¸ªä¸åˆ°ä¸‡ä¸å¾—å·²ä¸ä¼šè¡ŒåŠ¨çš„æ‡’æ±‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºæ‡’æ±‰å¼ã€‚ æ‡’æ±‰å¼è§£å†³äº†é¥¿æ±‰å¼çš„å¼Šç«¯ï¼Œå¥½å¤„æ˜¯æŒ‰éœ€åŠ è½½ï¼Œé¿å…äº†å†…å­˜æµªè´¹ï¼Œå‡å°‘äº†ç±»åˆå§‹åŒ–æ—¶é—´ã€‚ ä¸Šè¿°ä»£ç çš„æ‡’æ±‰å¼å•ä¾‹ä¹ä¸€çœ‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å…¶å®žå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æžœæœ‰å¤šä¸ªçº¿ç¨‹åŒä¸€æ—¶é—´è°ƒç”¨ getInstance æ–¹æ³•ï¼Œinstance å˜é‡å¯èƒ½ä¼šè¢«å®žä¾‹åŒ–å¤šæ¬¡ã€‚ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™åˆ¤ç©ºè¿‡ç¨‹åŠ ä¸Šé”ï¼š12345678910111213141516public class Singleton &#123; private static Singleton instance = null; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; synchronized (Singleton.class) &#123; if (instance == null) &#123; instance = new Singleton(); &#125; &#125; return instance; &#125;&#125; è¿™æ ·å°±èƒ½ä¿è¯å¤šä¸ªçº¿ç¨‹è°ƒç”¨ getInstance æ—¶ï¼Œä¸€æ¬¡æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡Œåˆ¤ç©ºå¹¶ new å‡ºå®žä¾‹çš„æ“ä½œï¼Œæ‰€ä»¥ instance åªä¼šå®žä¾‹åŒ–ä¸€æ¬¡ã€‚ä½†è¿™æ ·çš„å†™æ³•ä»ç„¶æœ‰é—®é¢˜ï¼Œå½“å¤šä¸ªçº¿ç¨‹è°ƒç”¨ getInstance æ—¶ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰§è¡Œ synchronized åŒæ­¥åŒ–æ–¹æ³•ï¼Œè¿™æ ·ä¼šä¸¥é‡å½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚æ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯åœ¨åŒæ­¥åŒ–ä¹‹å‰ï¼Œå†åŠ ä¸Šä¸€å±‚æ£€æŸ¥ï¼š123456789101112131415161718public class Singleton &#123; private static Singleton instance = null; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; è¿™æ ·å¢žåŠ ä¸€ç§æ£€æŸ¥æ–¹å¼åŽï¼Œå¦‚æžœ instance å·²ç»è¢«å®žä¾‹åŒ–ï¼Œåˆ™ä¸ä¼šæ‰§è¡ŒåŒæ­¥åŒ–æ“ä½œï¼Œå¤§å¤§æå‡äº†ç¨‹åºæ•ˆçŽ‡ã€‚ä¸Šé¢è¿™ç§å†™æ³•ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¾ƒå¸¸ç”¨çš„åŒæ£€é”æ–¹å¼å®žçŽ°çš„çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ã€‚ é™¤äº†åŒæ£€é”æ–¹å¼å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ¯”è¾ƒå¸¸è§çš„é™æ€å†…éƒ¨ç±»æ–¹å¼ä¿è¯æ‡’æ±‰å¼å•ä¾‹çš„çº¿ç¨‹å®‰å…¨ï¼š12345678910111213public class Singleton &#123; private static class SingletonHolder &#123; public static Singleton instance = new Singleton(); &#125; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; return SingletonHolder.instance; &#125;&#125; è™½ç„¶æˆ‘ä»¬ç»å¸¸ä½¿ç”¨è¿™ç§é™æ€å†…éƒ¨ç±»çš„æ‡’åŠ è½½æ–¹å¼ï¼Œä½†å…¶ä¸­çš„åŽŸç†ä¸ä¸€å®šæ¯ä¸ªäººéƒ½æ¸…æ¥šã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿æ¥åˆ†æžå…¶åŽŸç†ï¼Œæžæ¸…æ¥šä¸¤ä¸ªé—®é¢˜ï¼š é™æ€å†…éƒ¨ç±»æ–¹å¼æ˜¯æ€Žä¹ˆå®žçŽ°æ‡’åŠ è½½çš„ é™æ€å†…éƒ¨ç±»æ–¹å¼æ˜¯æ€Žä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨çš„ Java ç±»çš„åŠ è½½è¿‡ç¨‹åŒ…æ‹¬ï¼šåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æžã€åˆå§‹åŒ–ã€‚åˆå§‹åŒ–é˜¶æ®µå³æ‰§è¡Œç±»çš„ clinit æ–¹æ³•ï¼ˆclinit = class + initializeï¼‰ï¼ŒåŒ…æ‹¬ä¸ºç±»çš„é™æ€å˜é‡èµ‹åˆå§‹å€¼å’Œæ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„å†…å®¹ã€‚ä½†ä¸ä¼šç«‹å³åŠ è½½å†…éƒ¨ç±»ï¼Œå†…éƒ¨ç±»ä¼šåœ¨ä½¿ç”¨æ—¶æ‰åŠ è½½ã€‚æ‰€ä»¥å½“æ­¤ Singleton ç±»åŠ è½½æ—¶ï¼ŒSingletonHolder å¹¶ä¸ä¼šè¢«ç«‹å³åŠ è½½ï¼Œæ‰€ä»¥ä¸ä¼šåƒé¥¿æ±‰å¼é‚£æ ·å ç”¨å†…å­˜ã€‚ å¦å¤–ï¼ŒJava è™šæ‹Ÿæœºè§„å®šï¼Œå½“è®¿é—®ä¸€ä¸ªç±»çš„é™æ€å­—æ®µæ—¶ï¼Œå¦‚æžœè¯¥ç±»å°šæœªåˆå§‹åŒ–ï¼Œåˆ™ç«‹å³åˆå§‹åŒ–æ­¤ç±»ã€‚å½“è°ƒç”¨Singleton çš„ getInstance æ–¹æ³•æ—¶ï¼Œç”±äºŽå…¶ä½¿ç”¨äº† SingletonHolder çš„é™æ€å˜é‡ instanceï¼Œæ‰€ä»¥è¿™æ—¶æ‰ä¼šåŽ»åˆå§‹åŒ– SingletonHolderï¼Œåœ¨ SingletonHolder ä¸­ new å‡º Singleton å¯¹è±¡ã€‚è¿™å°±å®žçŽ°äº†æ‡’åŠ è½½ã€‚ ç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ Java è™šæ‹Ÿæœºçš„è®¾è®¡æ˜¯éžå¸¸ç¨³å®šçš„ï¼Œæ—©å·²ç»è€ƒè™‘åˆ°äº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æƒ…å†µã€‚è™šæ‹Ÿæœºåœ¨åŠ è½½ç±»çš„ clinit æ–¹æ³•æ—¶ï¼Œä¼šä¿è¯ clinit åœ¨å¤šçº¿ç¨‹ä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ã€‚å³ä½¿æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶åŽ»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œä¸€æ¬¡ä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œ clinit æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡žç­‰å¾…ï¼Œä»Žè€Œä¿è¯äº†çº¿ç¨‹å®‰å…¨ã€‚ æ‡’åŠ è½½æ–¹å¼åœ¨å¹³æ—¶éžå¸¸å¸¸è§ï¼Œæ¯”å¦‚æ‰“å¼€æˆ‘ä»¬å¸¸ç”¨çš„ç¾Žå›¢ã€é¥¿äº†ä¹ˆã€æ”¯ä»˜å® appï¼Œåº”ç”¨é¦–é¡µä¼šç«‹åˆ»åˆ·æ–°å‡ºæ¥ï¼Œä½†å…¶ä»–æ ‡ç­¾é¡µåœ¨æˆ‘ä»¬ç‚¹å‡»åˆ°æ—¶æ‰ä¼šåˆ·æ–°ã€‚è¿™æ ·å°±å‡å°‘äº†æµé‡æ¶ˆè€—ï¼Œå¹¶ç¼©çŸ­äº†ç¨‹åºå¯åŠ¨æ—¶é—´ã€‚å†æ¯”å¦‚æ¸¸æˆä¸­çš„æŸäº›æ¨¡å—ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»åˆ°æ—¶æ‰ä¼šåŽ»ä¸‹è½½èµ„æºï¼Œè€Œä¸æ˜¯äº‹å…ˆå°†æ‰€æœ‰èµ„æºéƒ½å…ˆä¸‹è½½ä¸‹æ¥ï¼Œè¿™ä¹Ÿå±žäºŽæ‡’åŠ è½½æ–¹å¼ï¼Œé¿å…äº†å†…å­˜æµªè´¹ã€‚ ä½†æ‡’æ±‰å¼çš„ç¼ºç‚¹å°±æ˜¯å°†ç¨‹åºåŠ è½½æ—¶é—´ä»Žå¯åŠ¨æ—¶å»¶åŽåˆ°äº†è¿è¡Œæ—¶ï¼Œè™½ç„¶å¯åŠ¨æ—¶é—´ç¼©çŸ­äº†ï¼Œä½†æˆ‘ä»¬æµè§ˆé¡µé¢æ—¶å°±ä¼šçœ‹åˆ°æ•°æ®çš„ loading è¿‡ç¨‹ã€‚å¦‚æžœç”¨é¥¿æ±‰å¼å°†é¡µé¢æå‰åŠ è½½å¥½ï¼Œæˆ‘ä»¬æµè§ˆæ—¶å°±ä¼šç‰¹åˆ«çš„é¡ºç•…ï¼Œä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ QQã€å¾®ä¿¡ appï¼Œä½œä¸ºå³æ—¶é€šè®¯çš„å·¥å…·è½¯ä»¶ï¼Œå®ƒä»¬ä¼šåœ¨å¯åŠ¨æ—¶ç«‹å³åˆ·æ–°æ‰€æœ‰çš„æ•°æ®ï¼Œä¿è¯ç”¨æˆ·çœ‹åˆ°æœ€æ–°æœ€å…¨çš„å†…å®¹ã€‚è‘—åçš„è½¯ä»¶å¤§å¸ˆ Martin åœ¨ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ä¸€ä¹¦ä¸­ä¹Ÿè¯´åˆ°ï¼šä¸æå€¡ä½¿ç”¨æ‡’åŠ è½½æ–¹å¼ï¼Œå› ä¸ºç¨‹åºåº”è¯¥å°†æž„å»ºä¸Žä½¿ç”¨åˆ†ç¦»ï¼Œè¾¾åˆ°è§£è€¦ã€‚é¥¿æ±‰å¼åœ¨å£°æ˜Žæ—¶ç›´æŽ¥åˆå§‹åŒ–å˜é‡çš„æ–¹å¼ä¹Ÿæ›´ç›´è§‚æ˜“æ‡‚ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨é¥¿æ±‰å¼è¿˜æ˜¯æ‡’æ±‰å¼æ—¶ï¼Œéœ€è¦æƒè¡¡åˆ©å¼Šã€‚ ä¸€èˆ¬çš„å»ºè®®æ˜¯ï¼šå¯¹äºŽæž„å»ºä¸å¤æ‚ï¼ŒåŠ è½½å®ŒæˆåŽä¼šç«‹å³ä½¿ç”¨çš„å•ä¾‹å¯¹è±¡ï¼ŒæŽ¨èä½¿ç”¨é¥¿æ±‰å¼ã€‚å¯¹äºŽæž„å»ºè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ä½¿ç”¨æ­¤ç±»éƒ½ä¼šç”¨åˆ°çš„å•ä¾‹å¯¹è±¡ï¼ŒæŽ¨èä½¿ç”¨æ‡’æ±‰å¼ã€‚ ä¸‰ã€å»ºé€ åž‹æ¨¡å¼ Builder Construct a complex object from simple objects step by step. å»ºé€ åž‹æ¨¡å¼ç”¨äºŽåˆ›å»ºè¿‡ç¨‹ç¨³å®šï¼Œä½†é…ç½®å¤šå˜çš„å¯¹è±¡ã€‚åœ¨ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­çš„å®šä¹‰æ˜¯ï¼šå°†ä¸€ä¸ªå¤æ‚çš„æž„å»ºä¸Žå…¶è¡¨ç¤ºç›¸åˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æž„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ ç»å…¸çš„ã€Œå»ºé€ è€…-æŒ‡æŒ¥è€…ã€æ¨¡å¼çŽ°åœ¨å·²ç»ä¸å¤ªå¸¸ç”¨äº†ï¼ŒçŽ°åœ¨å»ºé€ è€…æ¨¡å¼ä¸»è¦ç”¨æ¥é€šè¿‡é“¾å¼è°ƒç”¨ç”Ÿæˆä¸åŒçš„é…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åˆ¶ä½œä¸€æ¯çç å¥¶èŒ¶ã€‚å®ƒçš„åˆ¶ä½œè¿‡ç¨‹æ˜¯ç¨³å®šçš„ï¼Œé™¤äº†å¿…é¡»è¦çŸ¥é“å¥¶èŒ¶çš„ç§ç±»å’Œè§„æ ¼å¤–ï¼Œæ˜¯å¦åŠ çç å’Œæ˜¯å¦åŠ å†°æ˜¯å¯é€‰çš„ã€‚ä½¿ç”¨å»ºé€ è€…æ¨¡å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class MilkTea &#123; private final String type; private final String size; private final boolean pearl; private final boolean ice; private MilkTea(Builder builder) &#123; this.type = builder.type; this.size = builder.size; this.pearl = builder.pearl; this.ice = builder.ice; &#125; public String getType() &#123; return type; &#125; public String getSize() &#123; return size; &#125; public boolean isPearl() &#123; return pearl; &#125; public boolean isIce() &#123; return ice; &#125; public static class Builder &#123; private final String type; private String size = "ä¸­æ¯"; private boolean pearl = true; private boolean ice = false; public Builder(String type) &#123; this.type = type; &#125; public Builder size(String size) &#123; this.size = size; return this; &#125; public Builder pearl(boolean pearl) &#123; this.pearl = pearl; return this; &#125; public Builder ice(boolean cold) &#123; this.ice = cold; return this; &#125; public MilkTea build() &#123; return new MilkTea(this); &#125; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† MilkTea çš„æž„é€ æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰çš„ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸èƒ½é€šè¿‡ new æž„å»ºå‡º MilkTea å®žä¾‹ï¼Œåªèƒ½é€šè¿‡ Builder æž„å»ºã€‚å¯¹äºŽå¿…é¡»é…ç½®çš„å±žæ€§ï¼Œé€šè¿‡ Builder çš„æž„é€ æ–¹æ³•ä¼ å…¥ï¼Œå¯é€‰çš„å±žæ€§é€šè¿‡ Builder çš„é“¾å¼è°ƒç”¨æ–¹æ³•ä¼ å…¥ï¼Œå¦‚æžœä¸é…ç½®ï¼Œå°†ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä¹Ÿå°±æ˜¯ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°ã€‚æ ¹æ®ä¸åŒçš„é…ç½®å¯ä»¥åˆ¶ä½œå‡ºä¸åŒçš„å¥¶èŒ¶ï¼š123456789101112131415161718192021222324252627282930313233343536public class User &#123; private void buyMilkTea() &#123; MilkTea milkTea = new MilkTea.Builder("åŽŸå‘³").build(); show(milkTea); MilkTea chocolate =new MilkTea.Builder("å·§å…‹åŠ›å‘³") .ice(false) .build(); show(chocolate); MilkTea strawberry = new MilkTea.Builder("è‰èŽ“å‘³") .size("å¤§æ¯") .pearl(false) .ice(true) .build(); show(strawberry); &#125; private void show(MilkTea milkTea) &#123; String pearl; if (milkTea.isPearl()) pearl = "åŠ çç "; else pearl = "ä¸åŠ çç "; String ice; if (milkTea.isIce()) &#123; ice = "åŠ å†°"; &#125; else &#123; ice = "ä¸åŠ å†°"; &#125; System.out.println("ä¸€ä»½" + milkTea.getSize() + "ã€" + pearl + "ã€" + ice + "çš„" + milkTea.getType() + "å¥¶èŒ¶"); &#125;&#125; è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š123ä¸€ä»½ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°çš„åŽŸå‘³å¥¶èŒ¶ä¸€ä»½ä¸­æ¯ã€åŠ çç ã€ä¸åŠ å†°çš„å·§å…‹åŠ›å‘³å¥¶èŒ¶ä¸€ä»½å¤§æ¯ã€ä¸åŠ çç ã€åŠ å†°çš„è‰èŽ“å‘³å¥¶èŒ¶ ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„å¥½å¤„æ˜¯ä¸ç”¨æ‹…å¿ƒå¿˜äº†æŒ‡å®šæŸä¸ªé…ç½®ï¼Œä¿è¯äº†æž„å»ºè¿‡ç¨‹æ˜¯ç¨³å®šçš„ã€‚åœ¨ OkHttpã€Retrofit ç­‰è‘—åæ¡†æž¶çš„æºç ä¸­éƒ½ä½¿ç”¨åˆ°äº†å»ºé€ è€…æ¨¡å¼ã€‚ å››ã€åŽŸåž‹æ¨¡å¼ Prototype Cloning an object by reducing the cost of creation. åŽŸåž‹æ¨¡å¼ï¼šç”¨åŽŸåž‹å®žä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŽŸåž‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ Java ä¸­ï¼ŒObject çš„ clone() æ–¹æ³•å°±å±žäºŽåŽŸåž‹æ¨¡å¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸€å¤©ï¼Œå‘¨æ°ä¼¦åˆ°å¥¶èŒ¶åº—ç‚¹äº†ä¸€ä»½ä¸åŠ å†°çš„åŽŸå‘³å¥¶èŒ¶ï¼Œä½ è¯´æˆ‘æ˜¯å‘¨æ°ä¼¦çš„å¿ å®žç²‰ï¼Œæˆ‘ä¹Ÿè¦ä¸€ä»½è·Ÿå‘¨æ°ä¼¦ä¸€æ ·çš„ã€‚ç”¨ç¨‹åºè¡¨ç¤ºå¦‚ä¸‹ï¼š å¥¶èŒ¶ç±»ï¼š1234public class MilkTea &#123; public String type; public boolean ice;&#125; ä¸‹å•ï¼š1234567private void order()&#123; MilkTea milkTeaOfJay = new MilkTea(); milkTeaOfJay.type = "åŽŸå‘³"; milkTeaOfJay.ice = false; MilkTea yourMilkTea = milkTeaOfJay;&#125; å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°†å‘¨æ°ä¼¦çš„å¥¶èŒ¶ç›´æŽ¥èµ‹å€¼åˆ°ä½ çš„å¥¶èŒ¶ä¸Šå°±è¡Œäº†ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬å¹¶ä¸éœ€è¦ clone æ–¹æ³•ã€‚ä½†æ˜¯è¿™æ ·çœŸçš„æ˜¯å¤åˆ¶äº†ä¸€ä»½å¥¶èŒ¶å—ï¼Ÿ å½“ç„¶ä¸æ˜¯ï¼ŒJava çš„èµ‹å€¼åªæ˜¯ä¼ é€’åœ°å€ã€‚è¿™æ ·èµ‹å€¼ä¹‹åŽï¼ŒyourMilkTea ä»ç„¶æŒ‡å‘çš„å‘¨æ°ä¼¦çš„å¥¶èŒ¶ï¼Œå¹¶ä¸ä¼šå¤šä¸€ä»½ä¸€æ ·çš„å¥¶èŒ¶ã€‚ é‚£ä¹ˆæˆ‘ä»¬è¦æ€Žä¹ˆåšæ‰èƒ½ç‚¹ä¸€ä»½ä¸€æ ·çš„å¥¶èŒ¶å‘¢ï¼Ÿå°†ç¨‹åºä¿®æ”¹å¦‚ä¸‹å°±å¯ä»¥äº†ï¼š123456789private void order()&#123; MilkTea milkTeaOfJay = new MilkTea(); milkTeaOfJay.type = "åŽŸå‘³"; milkTeaOfJay.ice = false; MilkTea yourMilkTea = new MilkTea(); yourMilkTea.type = "åŽŸå‘³"; yourMilkTea.ice = false;&#125; åªæœ‰è¿™æ ·ï¼ŒyourMilkTea æ‰æ˜¯ new å‡ºæ¥çš„ä¸€ä»½å…¨æ–°çš„å¥¶èŒ¶ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœæœ‰ä¸€åƒä¸ªç²‰ä¸éƒ½éœ€è¦ç‚¹å’Œå‘¨æ°ä¼¦ä¸€æ ·çš„å¥¶èŒ¶çš„è¯ï¼ŒæŒ‰ç…§çŽ°åœ¨çš„å†™æ³•å°±éœ€è¦ new ä¸€åƒæ¬¡ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªæ–°çš„å¯¹è±¡èµ‹å€¼ä¸€åƒæ¬¡ï¼Œé€ æˆå¤§é‡çš„é‡å¤ã€‚ æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æžœå‘¨æ°ä¼¦ä¸´æ—¶å†³å®šåŠ ä¸ªå†°ï¼Œé‚£ä¹ˆç²‰ä¸ä»¬çš„å¥¶èŒ¶é…ç½®ä¹Ÿè¦è·Ÿç€ä¿®æ”¹ï¼š123456789101112private void order()&#123; MilkTea milkTeaOfJay = new MilkTea(); milkTeaOfJay.type = "åŽŸå‘³"; milkTeaOfJay.ice = true; MilkTea yourMilkTea = new MilkTea(); yourMilkTea.type = "åŽŸå‘³"; yourMilkTea.ice = true; // å°†ä¸€åƒä¸ªç²‰ä¸çš„ ice éƒ½ä¿®æ”¹ä¸º true ...&#125; å¤§æ‰¹é‡çš„ä¿®æ”¹æ— ç–‘æ˜¯éžå¸¸ä¸‘é™‹çš„åšæ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦ clone æ–¹æ³•çš„ç†ç”±ï¼ è¿ç”¨åŽŸåž‹æ¨¡å¼ï¼Œåœ¨ MilkTea ä¸­æ–°å¢ž clone æ–¹æ³•ï¼š1234567891011public class MilkTea&#123; public String type; public boolean ice; public MilkTea clone()&#123; MilkTea milkTea = new MilkTea(); milkTea.type = this.type; milkTea.ice = this.ice; return milkTea; &#125;&#125; ä¸‹å•ï¼š12345678910private void order()&#123; MilkTea milkTeaOfJay = new MilkTea(); milkTeaOfJay.type = "åŽŸå‘³"; milkTeaOfJay.ice = false; MilkTea yourMilkTea = milkTeaOfJay.clone(); // ä¸€åƒä½ç²‰ä¸éƒ½è°ƒç”¨ milkTeaOfJay çš„ clone æ–¹æ³•å³å¯ ...&#125; è¿™å°±æ˜¯åŽŸåž‹æ¨¡å¼ï¼ŒJava ä¸­æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè®©æˆ‘ä»¬å¹¶ä¸éœ€è¦æ‰‹å†™ clone æ–¹æ³•ã€‚è¿™ä¸ªè¯­æ³•ç³–å°±æ˜¯ Cloneable æŽ¥å£ï¼Œæˆ‘ä»¬åªè¦è®©éœ€è¦æ‹·è´çš„ç±»å®žçŽ°æ­¤æŽ¥å£å³å¯ã€‚12345678910public class MilkTea implements Cloneable&#123; public String type; public boolean ice; @NonNull @Override protected MilkTea clone() throws CloneNotSupportedException &#123; return (MilkTea) super.clone(); &#125;&#125; å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJava è‡ªå¸¦çš„ clone æ–¹æ³•æ˜¯æµ…æ‹·è´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´è°ƒç”¨æ­¤å¯¹è±¡çš„ clone æ–¹æ³•ï¼Œåªæœ‰åŸºæœ¬ç±»åž‹çš„å‚æ•°ä¼šè¢«æ‹·è´ä¸€ä»½ï¼ŒéžåŸºæœ¬ç±»åž‹çš„å¯¹è±¡ä¸ä¼šè¢«æ‹·è´ä¸€ä»½ï¼Œè€Œæ˜¯ç»§ç»­ä½¿ç”¨ä¼ é€’å¼•ç”¨çš„æ–¹å¼ã€‚å¦‚æžœéœ€è¦å®žçŽ°æ·±æ‹·è´ï¼Œå¿…é¡»è¦è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹ clone æ–¹æ³•æ‰è¡Œã€‚ Conclusion of Creational patternåˆ›å»ºåž‹æ¨¡å¼æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œå®ƒä»¬çš„ä½œç”¨å°±æ˜¯ä¸ºäº†äº§ç”Ÿå®žä¾‹å¯¹è±¡ï¼Œç®—æ˜¯å„ç§å·¥ä½œçš„ç¬¬ä¸€æ­¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬å†™çš„æ˜¯é¢å‘å¯¹è±¡çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡äº†ã€‚ ç®€å•å·¥åŽ‚æ¨¡å¼æœ€ç®€å•ï¼›å·¥åŽ‚æ¨¡å¼åœ¨ç®€å•å·¥åŽ‚æ¨¡å¼çš„åŸºç¡€ä¸Šå¢žåŠ äº†é€‰æ‹©å·¥åŽ‚çš„ç»´åº¦ï¼Œéœ€è¦ç¬¬ä¸€æ­¥é€‰æ‹©åˆé€‚çš„å·¥åŽ‚ï¼›æŠ½è±¡å·¥åŽ‚æ¨¡å¼æœ‰äº§å“æ—çš„æ¦‚å¿µï¼Œå¦‚æžœå„ä¸ªäº§å“æ˜¯å­˜åœ¨å…¼å®¹æ€§é—®é¢˜çš„ï¼Œå°±è¦ç”¨æŠ½è±¡å·¥åŽ‚æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼å°±ä¸è¯´äº†ï¼Œä¸ºäº†ä¿è¯å…¨å±€ä½¿ç”¨çš„æ˜¯åŒä¸€å¯¹è±¡ï¼Œä¸€æ–¹é¢æ˜¯å®‰å…¨æ€§è€ƒè™‘ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†èŠ‚çœèµ„æºï¼›å»ºé€ è€…æ¨¡å¼ä¸“é—¨å¯¹ä»˜å±žæ€§å¾ˆå¤šçš„é‚£ç§ç±»ï¼Œä¸ºäº†è®©ä»£ç æ›´ä¼˜ç¾Žï¼›åŽŸåž‹æ¨¡å¼ç”¨å¾—æœ€å°‘ï¼Œäº†è§£å’Œ Object ç±»ä¸­çš„ clone() æ–¹æ³•ç›¸å…³çš„çŸ¥è¯†å³å¯ã€‚ ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†è®¾è®¡æ¨¡å¼çš„ 5 ç§æž„å»ºåž‹æ¨¡å¼ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ 11 ç§è¡Œä¸ºåž‹æ¨¡å¼å’Œ 7 ç§ç»“æž„åž‹æ¨¡å¼ï¼Œæˆ‘ä»¬å°†åœ¨ä»¥åŽçš„æ–‡ç« ä¸­ç»§ç»­å­¦ä¹ ã€‚ å¦‚ä½•ç”¨ã€Œè®¾è®¡æ¨¡å¼ã€åˆ¶ä½œçç å¥¶èŒ¶ï¼Ÿâ€“ åŠ›æ‰£ï¼ˆLeetCodeï¼‰ Taiwan]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Design Patterns</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GGG]]></title>
    <url>%2F2019%2F05%2F11%2FGRE%2F</url>
    <content type="text"><![CDATA[GRE Study Plans and GuidesMagoosh GRE Blog GRE Study Plans and Guides Manhattan Prep PP1&amp;PP2å®˜æ–¹é€çš„å…©æ¬¡æ¨¡è€ƒ Verbal: Googleæœå°‹: è€ƒæ»¡åˆ†å·å“¥å¡«ç©ºæ©Ÿç¶“1000é¡Œ Quant: çŒ´å“¥é›£é¡Œ]]></content>
      <categories>
        <category>Application</category>
      </categories>
      <tags>
        <tag>Application</tag>
        <tag>GRE</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java]]></title>
    <url>%2F2019%2F04%2F28%2FJava%2F</url>
    <content type="text"><![CDATA[JAVE SEä¹è§‚é”ã€æ‚²è§‚é”ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼ JAVE EEJava TutorialSpring Boot Tutoiral resourceé¢é•œ jvmè™›æ“¬æ©Ÿ Thinking in java åŸºç¡€é¢˜ç›® ç‰›å®¢ç½‘Javaé¢è¯•å®å…¸ [åŒ—èˆªå¤§ä½¬æ”¶é›†çš„èµ„æºï¼Œé‡Œé¢æœ‰jvmè™šæ‹Ÿæœºä»€ä¹ˆçš„]ï¼ˆhttps://space.bilibili.com/73012391ï¼‰åœ£åœ° ç›¸é—œå·¥ç¨‹å¯¦ä½œæŒ‡å°Žç‰›äººè®¡åˆ’â€”â€”å¶ç¥žJavaçŸ¥ä¹Žç±»èµ„è®¯ç½‘ç«™å®žæˆ˜ï¼ˆé«˜çº§ï¼‰ ç‰›äººè®¡åˆ’â€”â€”å¶ç¥žJavaçŸ¥ä¹Žç±»èµ„è®¯ç½‘ç«™å®žæˆ˜ï¼ˆé«˜çº§ï¼‰ å·¥ç¨‹è¦–é »è¬›è§£[åŒ—èˆªå¤§ä½¬æ”¶é›†çš„èµ„æºï¼Œé‡Œé¢æœ‰jvmè™šæ‹Ÿæœºä»€ä¹ˆçš„]ï¼ˆhttps://space.bilibili.com/73012391/channel/detail?cid=71336ï¼‰]]></content>
      <categories>
        <category>Diary</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Algorithm]]></title>
    <url>%2F2019%2F04%2F19%2FAlgorithm%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆå£°æ˜Žä¸€ç‚¹ï¼Œé¢è¯•æ˜¯é¢è¯•ï¼Œåšé¢˜æ˜¯åšé¢˜ï¼Œåšé¢˜æ˜¯é¢è¯•çš„å¿…è¦æ¡ä»¶ã€‚æŽ¥ä¸‹æ¥ ï¼Œå°±æˆ‘åšäº†è¿™äº›é¢˜çš„æ„Ÿæ‚Ÿï¼Œä¸»è¦æ˜¯ç»™è‡ªå·±åšä¸ªçºªå¿µï¼Œä¹Ÿåˆ†äº«ä¸‹æˆ‘çš„è§é—»ã€‚ 1 è¯´è¯´æˆ‘è®¤è¯†çš„åˆ·é¢˜å¥—è£…ç¼–è¾‘å™¨ ï¼š vscode sublime éƒ½è¡Œ, ä¸è¿‡æˆ‘åå¥½IDEAçš„åŽŸå› æ˜¯å› ä¸ºå¯ä»¥å†™å•å…ƒæµ‹è¯•,è¿™å¯¹æˆ‘å¤ä¹ ,è°ƒè¯•å¹¶éªŒè¯æˆ‘çš„ä»£ç æ­£ç¡®æ€§å¾ˆé‡è¦ã€‚IDEA ä¹Ÿå¯ä»¥è°ƒæˆæ–‡æœ¬ç¼–è¾‘æ¨¡å¼ï¼Œ ç‚¹å‡»IDEAå³ä¸‹è§’çš„å¸½å­å›¾æ ‡ï¼Œå–æ¶ˆcode auto completeã€‚å–æ¶ˆsyntax æˆ–è€… highlightéƒ½è¡Œã€‚ 250é“åŒ…å«å†…å®¹ï¼š2ä¸ªtopç³»åˆ—ä¸ºä¸»+å¤–åŠ ä¸€äº›é«˜é¢‘é¢˜ç›®å’Œè‡ªå·±è®¤ä¸ºè–„å¼±çš„é¢˜ç›® 2 leetcodeå¤–æŒ‚æ’ä»¶ ï¼š ç›®å‰ æœ‰äº†å·²ç»å¼€å‘äº†leetcodeåˆ·é¢˜æ’ä»¶ï¼Œä¸éœ€è¦å–ç½‘é¡µç«¯æµè§ˆï¼Œç›´æŽ¥ç¼–è¾‘å™¨é‡Œé¢æµè§ˆï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚https://github.com/shuzijun/leetcode-editor ç½‘é¡µç«¯çš„ä¸€ä¸ªæ²¹çŒ´æ’ä»¶ : è‡ªåŠ¨åˆ‡æ¢å›½åŒºå’Œç¾ŽåŒº ï¼Œ æœç´¢ç­”æ¡ˆ ï¼Œ ä¸ªäººç”¨çš„è¿˜ç®—ä¸é”™ ã€‚ å…·ä½“åŠŸèƒ½è‡ªå·±è£…ä¸ªæ²¹çŒ´æ’ä»¶ ï¼Œè‡ªå·±çŽ©çŽ©å§https://greasyfork.org/zh-CN/scr â€¦ 3%E5%8A%A9%E6%89%8B 3 æŽ¨èå‚è€ƒç­”æ¡ˆï¼š grandyangçš„æ–‡å­—è§£ç­” å’Œ èŠ±èŠ±é…±çš„è§†é¢‘ ä¸ºä¸»ã€‚è¿˜æœ‰ æ°´ä¸­çš„é±¼ , LEE215 ç­‰ä¸ªäººä¸»è§‚è¯„ä»·ï¼šèŠ±èŠ±é…±åšçš„è§†é¢‘åŸºæœ¬å¾ˆç²¾å“ï¼Œè¦†ç›–çš„é¢˜ç›®éƒ½æ¯”è¾ƒå…¨äº†ï¼Œä¹Ÿåšäº†åˆ†ç±»ã€‚é€‚åˆå°ç™½å’Œä¸€å®šåˆ·é¢˜ç»éªŒçš„äººã€‚æ¯ä¸ªè§†é¢‘æ—¶é•¿åŸºæœ¬æŽ§åˆ¶åœ¨20minä»¥å†…ï¼Œè®²çš„å¾ˆå¥½ï¼Œå¥½åœ¨é™¤äº† ç»™ä½ è§£é¢˜æ€è·¯å’Œå¤æ‚åº¦ç®€ç•¥åˆ†æžï¼Œè¿˜ä¼šèžä¼šè´¯é€šï¼Œè¿žå¸¦åœ¨è§†é¢‘å†… æç¤ºå¹¶æ”¾å‡ºç›¸å…³ç±»ä¼¼çš„é¢˜ç›®çš„YouTubeè§†é¢‘é“¾æŽ¥ã€‚èŠ±èŠ±é…±æœ¬äººçš„å±¥åŽ† æˆ‘ä¹Ÿç®—æœè¿‡ï¼Œ çœ‹ä»–çš„è§£ç­” å¾ˆæ”¾å¿ƒï¼ç­”æ¡ˆçš„åŸºæœ¬ç‰ˆæœ¬æ˜¯ C++ä¸€å®šæœ‰ã€‚ Pythonå’ŒJAVA çŽ°åœ¨ä¹Ÿå¸¦ä¸Šäº†ã€‚å”¯ä¸€ç¼ºç‚¹å°±æ˜¯:æ²¡æœ‰è¯„è®ºåŒºï¼ŒYouTubeè§†é¢‘ä¸‹é¢è´´ä»£ç ä¹Ÿä¸å¤ªå¥½ã€‚ ç„¶åŽå†æ¥è¯´è¯´ï¼Œgrandyangçš„ï¼Œ æ–‡å­—æè¿°åŠŸåº• æˆ‘è®¤ä¸ºæ—©æœŸç‰ˆæœ¬å¯èƒ½ä¸å¤ªè¡Œï¼ŒåŽæœŸç‰ˆæœ¬éƒ½æ˜¯ä¸é”™çš„ã€‚ä»–çš„æ–‡å­—æ€§é¢˜è§£æ€è·¯æè¿° å¯ä»¥ è®©ä½ åœ¨5minå†…äº†è§£è¿™é“é¢˜ç›®çš„å¤§è‡´è§£é¢˜æ€è·¯ï¼Œä¸ç”¨è´¹å¿ƒæ€çœ‹ä½ å¯èƒ½è®¤ä¸º20minå¾ˆé•¿ä¼šè®©ä½ ç¡è§‰çš„è§†é¢‘è§£ç­”ã€‚grandyang å°½é‡éƒ½æä¾›ä¸€é¢˜å¤šè§£ï¼Œå¹¶åœ¨æ–‡ç« æœ«å°¾é™„ä¸ŠåŽŸé¢˜é“¾æŽ¥å’Œ JAVA Cç‰ˆæœ¬çš„voteæ•°è¾ƒé«˜çš„ç­”æ¡ˆã€‚å½“ç„¶ï¼Œæˆ‘åŽè¯´grangdyangï¼Œæ˜¯å› ä¸ºæˆ‘ä¸ªäººè§‰å¾—ä»–çš„éƒ¨åˆ†ç­”æ¡ˆï¼Œæ²¡è®²åˆ°å…³é”®ç‚¹å­ä¸Šã€‚ã€‚ã€‚æ¯”å¦‚DPç±»åž‹çš„ èƒŒåŒ…é—®é¢˜ ï¼Œä¸¾ä¸ªä¾‹å­ 312 burst ballon åŒºé—´DPæ‰€ä»¥ï¼Œ grandyangçš„ç­”æ¡ˆçš„ç¼ºç‚¹æ˜¯åœ¨äºŽï¼Œ æœ‰äº›ç»å…¸é¢˜ç›® å¯èƒ½å¹¶æ²¡æœ‰ å¸®åŠ©ä½ äº†è§£è¿™ç±»åž‹é—®é¢˜çš„æœ¬è´¨ã€‚æœ€åŽï¼Œè¿™åªæ˜¯æˆ‘çš„ä¸ªäººçœ‹æ³•ï¼Œä»Žå¿ƒé‡Œé¢ä¸Šæ¥è¯´ï¼Œæˆ‘å¾ˆæ„Ÿè°¢ä¸¤ä½æä¾›è¿™ä¹ˆæ£’çš„ç­”æ¡ˆã€‚ LEE215 ä¸é”™äº† ï¼Œä¸è¿‡æ²¡æœ‰æ€è·¯è®²è§£ï¼Œå¸æ”¶çš„å…»åˆ†æ¯”è¾ƒå°‘ã€‚ä½†æ˜¯ä»£ç å†™çš„æ˜¯æ•´æ´ï¼å…¶ä»–æ”¶è´¹çš„è§†é¢‘ï¼Œæˆ‘ç›´è¨€å¾ˆåžƒåœ¾ ï¼Œç¼´çº³æ™ºå•†ç¨Žã€‚ã€‚ã€‚ã€‚èµ°æ·å¾„ä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯é‚£äº›å¼¯è·¯ä½ æœ€åŽè¿˜æ˜¯è¦èµ°ï¼Œä¸ºä»€ä¹ˆç¡¬è¦æŠŠä»–ä»¬åˆ†ç¦»å¼€ï¼Œå…ˆèµ°æ·å¾„å‘¢ï¼Ÿ 4 å…³äºŽå­¦ä¹ ææ–™ï¼šé™¤äº†leetcodeè¿˜æœ‰ä»€ä¹ˆå¯ä»¥çœ‹çœ‹çš„ï¼Ÿè¿™ä¸ªé—®é¢˜ï¼Œæ¯”è¾ƒéš¾å›žç­”ã€‚æˆ‘ä¹‹å‰ä¹Ÿä¹°äº†åˆ˜æ±ä½³çš„ç®—æ³•ç«žèµ›å…¥é—¨ç»å…¸ï¼ˆç¬¬2ç‰ˆï¼‰ è¿˜æœ‰é…å¥—ç­”æ¡ˆå’Œè®­ç»ƒé›†ã€‚https://book.douban.com/subject/25902102/æœ€åŽä¹Ÿæ²¡ä»”ç»†åŽ»å­¦ï¼Œä¸è¿‡å½“åšå‚è€ƒä¹¦ä¹Ÿè¿˜æ˜¯ä¸é”™çš„ã€‚å‰æœŸæˆ‘è¿˜åŽ»äº†è§£äº†USACO CODEFORCE HDOJ POJ ZOJ TopCoder ç­‰ç­‰æ˜¯å¹²å•¥çš„ã€‚è‡³äºŽç¼–ç¨‹ä¹‹ç¾Žå’Œå¾®è½¯æŠ€æœ¯é¢è¯•å¿ƒå¾— å‰‘æŒ‡offeræˆ‘æ²¡å­¦è¿‡ å¥½åƒæœ‰äº›ç»å…¸é¢˜ç›®å°±æ˜¯ä»Žè¿™é‡Œå‡ºçš„ã€‚ è¿™é‡Œï¼Œæˆ‘æƒ³æŽ¨èä¸‹ https://oi-wiki.org è¿™ä¸ªé¢å‘åˆé«˜ä¸­çš„OIERçš„ç½‘ç«™ï¼Œ ç½‘ç«™å‘èµ·äººç›®æµ‹æ˜¯THUçš„ã€‚ã€‚ è¿™ä¸ªç½‘ç«™ï¼Œæˆ‘èŽ·å–äº†ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Ÿæˆ‘ä»ŽOIçš„è§†è§’ï¼Œå°†leetcodeé¢˜ç›®ç½®äºŽ OIé¢†åŸŸï¼Œçœ‹çœ‹ä¸»è¦è€ƒå¯Ÿä»€ä¹ˆã€‚æ¯•ç«Ÿleetcodeä¸€å®šç¨‹åº¦ä¸Šå°±ä»£è¡¨é¢è¯•ç®—æ³•é¢˜éƒ¨åˆ†çš„è€ƒå¯Ÿé¡¹ç›®å˜›dpåˆ†ç±» å­—ç¬¦ä¸²å¤„ç† æ•°è®º åŸºç¡€çš„æ•°æ®ç»“æž„ ä½è¿ç®—çš„åŸºæœ¬å’Œçµæ´»åº”ç”¨ï¼Œçº¿æ®µæ ‘ æ ‘çŠ¶æ•°ç»„ åŒºé—´DP æ ‘å½¢DP RMQ STè¡¨ç­‰äº†è§£æˆ–ç†è§£ å¦å¤–ï¼Œå°±æ˜¯å´”æ·»ç¿¼å¤§ä½¬çš„èƒŒåŒ…ä¹è®²V2ï¼Œæˆ‘ä¸ªäººçš„å­¦ä¹ èƒ½åŠ›åœç•™åœ¨ç¬¬å…­ç« ï¼Œç¬¬ä¸ƒç« åŠä»¥åŽçš„ å¬ä¸å¤ªæ‡‚ã€‚ã€‚ã€‚å‰é¢å‡ ç« ç›¸å½“ç»å…¸ï¼Œæ˜¯åŸ¹å…»æˆ‘DPå¯è’™çš„ä¸€ä¸ªå°å†Œå­ã€‚æ„Ÿè°¢è¿™ä½å¤§ä½¬ æ’’èŠ±ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸æš‚æ—¶æƒ³åˆ°çš„å°±è¿™äº›ã€‚ 5 ç®—æ³•å’Œæ•°æ®ç»“æž„å­¦ä¹ åº”è¯¥æœ‰æ€Žä¹ˆæ ·çš„é¡ºåºï¼š æˆ‘ä¸ªäººçŠ¯çš„é”™è¯¯å°±æ˜¯å‰æœŸåˆ·é¢˜è´¨é‡å’Œæ•ˆçŽ‡å¤ªä½Žï¼ŒåŸ‹äº†å¾ˆå¤šé›·ã€‚é¦–å…ˆ äºŒåˆ†æŸ¥æ‰¾ å·¦é—­å³å¼€çš„lower_boundå†™æ³•ä¸€å®šè¦ç†è§£ ã€‚è¿™æ˜¯ä¸€ç§æ€æƒ³ã€‚è€Œä¸æ˜¯ç®€å•çš„æŸ¥æ‰¾æ•°å€¼ï¼ï¼æŽ’åºçš„è¯ï¼Œå¿«æŽ’ å’Œå¿«æŽ’çš„åˆ‡åˆ† é»˜å†™ç¨‹åº¦å§ï¼Œ3å‘å¿«æŽ’å’Œå½’å¹¶æŽ’åº ä¹Ÿè¦èƒ½é»˜å†™å’¯ ï¼Œå…¶ä»–è‡ªå·±çœ‹ç€åŠžå§ æŽ¥ä¸‹æ¥è°ˆè°ˆ æ ˆå’Œé˜Ÿåˆ—çš„è¿ç”¨çš„åŸºäºŽæ ˆLIFOçš„æ•°æ®ç»“æž„ç‰¹ç‚¹ï¼ŒDFSçš„éžé€’å½’è‚¯å®šç”¨æ ˆå•¦ï¼Œå•è°ƒæ€§æ ˆ çš„è¿ç”¨ è¿™ä¸ªè‡ªå·±åŽ»ä½“ä¼šå§ã€‚é˜Ÿåˆ—çš„è¯ FIFOç‰¹ç‚¹ï¼Œ BFS è‚¯å®šç”¨å¾—ä¸Šäº† ã€‚ BFSé—®é¢˜ æ¯”å¦‚è¯¾ç¨‹è¡¨ï¼ŒæŽ¥é›¨æ°´â…¡ ä¼˜å…ˆé˜Ÿåˆ— ç”¨åœ¨å“ªé‡Œ ï¼Ÿ top kç³»åˆ—é—®é¢˜ ä»¥åŠ ä¾èµ–äºŽä¼˜å…ˆé˜Ÿåˆ—çš„BFSéåŽ†äºŒå‰å †å’ŒäºŒå‰æ ‘ ï¼Œé«˜åº¦ï¼Œ æ·±åº¦ ï¼Œå¶å­ç»“ç‚¹ ï¼Œéžå¶å­èŠ‚ç‚¹ ï¼Œè¿™ä¸ªéœ€è¦ç†æ¸…æ¥š ã€‚äºŒå‰æ ‘ åŸºæœ¬ä¸Šç”¨é€’å½’ä¸ºä¸»äº† ã€‚éåŽ†æ–¹å¼ï¼šé€’å½’ï¼Œéžé€’å½’ï¼ŒmorriséåŽ† ï¼Œ é«˜åº¦å’Œæ·±åº¦è®¡ç®— ã€‚é“¾è¡¨çš„è¯ è€ƒå¯Ÿçš„æ¯”è¾ƒå°‘ çŽ¯æ£€æµ‹ ç¿»è½¬é“¾è¡¨ å¿…é¡»ä¼šå§ ï¼Œå“‘èŠ‚ç‚¹dummynodeçš„è¿ç”¨ã€‚æ ‘çŠ¶æ•°ç»„ STè¡¨ å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€å¢žæ€æƒ³çš„è¿ç”¨å§ï¼Œè¿™ä¸ªåœ¨å´”æ·»ç¿¼å¤§ä½¬çš„èƒŒåŒ…ä¹è®²é‡Œé¢æœ‰æåŠï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä¸ç”¨å­¦ï¼Œå°è¯•ä¸‹è¿˜è¡Œã€‚UFçš„è¯ ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œè¿™ä¸ªè¿˜å¥½äº†ï¼Œç¢°åˆ°çš„æ¯”è¾ƒç®€å•ï¼Œè¦ä¹ˆè¿žé€šæ€§åˆ¤æ–­ï¼Œè¦ä¹ˆè¿žé€šå›¾ä¸ªæ•°è®¡ç®—ã€‚ 6 åˆ·é¢˜ç”¨ä»€ä¹ˆè¯­è¨€ï¼š ä»ŽåŠŸåˆ©æ€§è§’åº¦æ¥çœ‹ JAVA C++æ¯”è¾ƒç¨³äº†ï¼Œæ¯•ç«Ÿleetcodeç­”æ¡ˆ è¯­è¨€ç‰ˆæœ¬ä¹Ÿæ˜¯è¿™2ç§æœ€ä¸ºå¸¸è§ã€‚Python ç­”æ¡ˆ ä»£ç æ˜¯å°‘ï¼Œ ä»£ç å°‘å¹¶ä¸ä»£è¡¨ ä½ å°±èƒ½å®¹æ˜“ç†è§£è¿™ä¸ªç­”æ¡ˆã€‚æ‰€ä»¥ç»å¸¸leetcodeè®¨è®ºåŒºä¼šæœ‰show å‡ è¡ŒPythonä»£ç  solution æˆ‘è§‰å¾—è¿™å¹¶æ²¡æœ‰æä¾›æœ‰æ•ˆçš„ä¿¡æ¯ã€‚ 7 è¯´è¯´leetcodeçš„tagåˆ†ç±»ï¼š æˆ‘è®¤ä¸ºå”¯ä¸€ä¸€ç‚¹åšçš„ä¸å¥½çš„æ˜¯DPåˆ†ç±»dpæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®å¤§çš„æ¦‚å¿µï¼Œç»†åˆ†ä¸‹æ¥æœ‰å¾ˆå¤šç§ç»å…¸çš„DPï¼Œè®©äººå°è±¡æ·±åˆ»çš„è‚¡ç¥¨ç³»åˆ— çƒ§æ°”çƒ æ•°ç»„åˆ‡å‰²æ±‚æœ€å€¼é—®é¢˜å…¶ä»–tagå½’ç±»æˆ‘è®¤ä¸ºéƒ½okayä»¥ä¸‹å†…å®¹éœ€è¦ç§¯åˆ†é«˜äºŽ 50 æ‚¨å·²ç»å¯ä»¥æµè§ˆ 8 leetcodeç”¨å›½åŒºè¿˜æ˜¯ç¾ŽåŒºï¼Ÿæˆ‘çŽ°åœ¨ç”¨å›½åŒºã€‚ä¸è¿‡æˆ‘å€¾å‘äºŽè¿˜æ˜¯ç”¨ç¾ŽåŒºå§ã€‚æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾å“ˆå“ˆç¾ŽåŒºæ¯•ç«Ÿæœ‰é«˜è´¨é‡çš„è®¨è®ºï¼Œå›½åŒºæ¯”è¾ƒå°‘ï¼Œè€Œä¸”å¯ä»¥è®­ç»ƒ è‹±æ–‡ç®—æ³•é¢˜çš„ é˜…è¯»ç†è§£å˜›2333æœ€è¿‘ï¼Œå›½åŒºå‡ºäº†ä¸€ä¸ªå¾ˆå¼±åŒ–çš„ appã€‚ 9 æˆ‘çš„åšé¢˜ç­–ç•¥ï¼š5-10minä¸ä¼šï¼Œç›´æŽ¥çœ‹ç­”æ¡ˆï¼Œçœ‹grandyangæˆ–è€…èŠ±èŠ±é…±çš„ã€‚èµ·åˆï¼Œæˆ‘è¿˜ä¸å¥½æ„æ€ã€‚åŽæ¥ï¼Œæˆ‘å‘çŽ°ä½ çœ‹äº†è¿™é“é¢˜ç›®ç¡®å®žå°±ä¼šåšäº†ï¼Œä»¥åŽç¢°åˆ°ï¼Œå¤§æ¦‚çŽ‡è¿˜æ˜¯ä¼šåšçš„ï¼Œèµ·ç æœ‰æ€è·¯ï¼Œæ¯•ç«Ÿè‡ªå·±æ‰‹æŠ„æˆ–è€…ç†è§£è¿‡æ„Ÿæ‚Ÿï¼šè¿˜æ˜¯è‡ªå·±åšçš„é¢˜ç›®å°‘ï¼Œå¯¹é¢˜ç›®çš„å—…è§‰ä¸å¤ªè¡Œã€‚åŠ›æ±‚æŸä¸ªYouTubeåŸ¹è®­æœºæž„è®²çš„ äº‰å–åšåˆ°ä¸€é¢˜å¤šè§£å’Œå¤šé¢˜ä¸€è§£æˆ–è€…è¯´é€šç”¨è§£ï¼Œé€šç”¨æ¨¡ç‰ˆ ç½®äºŽç»†åŒ–çš„åšé¢˜ç­–ç•¥ï¼š ä¸ªäººç»éªŒæ¯”è¾ƒå°‘ã€‚åŸºæœ¬è·¯å­ å°±æ˜¯å…ˆæƒ³æƒ³çœ‹è§£é¢˜ æ€è·¯ ï¼Œå£°æ˜Ž æ•°æ®ç»“æž„å˜é‡ï¼Œåˆå§‹åŒ–èµ‹å€¼ ï¼ˆ0ï¼Œ-1ï¼Œ+âˆžï¼Œ-âˆžï¼‰ã€‚æ‹›åˆ°å¾ªçŽ¯è°ƒèŠ‚æˆ–è€…é€’å½’æ›´æ–°æ¡ä»¶æœ€åŽè¿­ä»£ä¸‹ã€‚ã€‚ã€‚ è‡³äºŽ æ‹…å¿§15minå°±æ”¾å¼ƒæ€è€ƒï¼Œä»¥åŽå‡ºæ–°é¢˜ï¼Œä½ è¿˜æ˜¯å¯èƒ½ä¾æ—§åšä¸å‡ºæ¥ï¼Ÿè¿™ä¸ªå˜›ï¼Œæˆ‘è®¤ä¸ºä¸€åŠå¯¹ä¸€åŠï¼Œ15minä»¥å†…æƒ³ä¸å‡ºï¼Œå°±ç›´æŽ¥çœ‹ç­”æ¡ˆï¼Œç¡®å®žæ²¡æœ‰åŸ¹å…»å‡ºè§£é¢˜ä¸æŠ•é™çš„æ„å¿—åŠ›ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¥½å¤„ï¼Œåœ¨äºŽè§å¤šè¯†å¹¿ðŸ˜„ã€‚ 10 é‚£äº›ä¾æ—§ææƒ§çš„é¢˜ç›®ç±»åž‹ï¼š å­—ç¬¦ä¸²çš„ æ¨¡å¼åŒ¹é…ï¼Œ æ ˆåœ¨è®¡ç®—å™¨çš„å¤æ‚åº”ç”¨ï¼Œæ•°è®ºé¢˜ç›®ï¼ˆæ•°è®ºçš„é¢˜ç›®ï¼ŒåŸºæœ¬ä¸Šå±žäºŽä¼šå°±æ˜¯ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šï¼Œæ­»ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼‰ã€‚DPå¥—DPæˆ–è€… 2ä¸ªDPçš„é¢˜ç›® ï¼Œ éš¾å‘ 11 å…³äºŽè¾¹ç•Œï¼Œ cornercase çš„æ•æ„Ÿåº¦ï¼Œ æˆ‘ç›®å‰ä¸å¤ªä¼šæƒ³åˆ°ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚æ•°ç»„æˆ‘åº”è¯¥ base 0 è¿˜æ˜¯ base 1 è¿˜æœ‰off by one errorï¼Œè¿™ä¸ªæ²¡å¤šå°‘ç»éªŒã€‚ å¾ªçŽ¯æ¡ä»¶ åˆ°åº• å°äºŽ è¿˜æ˜¯ å°äºŽç­‰äºŽ ? æˆ‘å°±æ˜¯ç”¨ä¾‹è¯æ³•ï¼Œä¸¾ä¸ªæ™®é€šçš„ä¾‹å­ï¼Œé—®é¢˜è§„æ¨¡1åˆ°5ä¸ªå†…ä¸ºå®œï¼ŒåŽ»åˆ¤å®šæ¡ä»¶å°äºŽè¿˜æ˜¯å°äºŽç­‰äºŽã€‚ 12 å¦‚ä½•äºŒåˆ·ï¼Œå¤ä¹ å’Œå›žé¡¾ï¼Œè¿™ä¸ªåšleetcodeé¢˜ç›®ä¹‹å‰ï¼Œå°±æƒ³è¦å†™å•å…ƒæµ‹è¯•ã€‚assert è‡ªå·±ç­”æ¡ˆçš„è¾“å…¥å’Œè¾“å‡º ï¼Œæ–¹ä¾¿æˆ‘ä»¥åŽå¿«é€Ÿå›žå¿†å®šä½æŸç±»è¡Œé¢˜ç›®çš„ç­”æ¡ˆã€‚å› ä¸ºleetcodeç½‘é¡µç‰ˆ æäº¤è®°å½•é‡Œé¢æ‰¾è‡ªå·±çš„ç­”æ¡ˆ ä¸æ–¹ä¾¿ã€‚ä¹Ÿæœ‰äººåšExcle, è®°å½•è‡ªå·±çš„è§£é¢˜å…³é”®ç‚¹ã€‚ 13 ç†è§£å’Œè®°å¿†ï¼šæˆ‘ç›®å‰è„‘å­ä¸­è®°å¿†çš„å°±æ˜¯ äºŒåˆ† å¿«æŽ’åˆ‡åˆ† ï¼Œä¸€äº›BFSï¼ŒDFS,DPæ¨¡ç‰ˆï¼ŒJAVAå¸¸ç”¨æ•°æ®ç»“æž„çš„APIï¼Œå°½é‡ç†è§£å…¸åž‹ç±»åž‹çš„æ€è·¯ï¼Œåšåˆ°ä¸‡å˜ä¸ç¦»å…¶å®—å§ 2333ï¼Œ14 ç®—æ³•é¢˜ä¸æ˜¯æ•°å­¦é¢˜ï¼ŒæŽ¨å¯¼å¯ä»¥ï¼Œè¯æ˜Žæˆ‘è¿˜æ˜¯æ”¾å¼ƒäº† GGã€‚ã€‚ã€‚ã€‚15 æŽ¥ä¸‹åŽ» æˆ‘è¦å·©å›ºç§¯ç´¯ï¼ŒäºŒåˆ·ä¸‰åˆ·ï¼Œ å­¦ä¼šç®€è¦åˆ†æžæ—¶ç©ºå¤æ‚åº¦ï¼Œå†™å†™è‡ªå·±æƒ³å‡ºæ¥çš„test caseã€‚å†™çš„æ¯”è¾ƒä¹±ï¼Œæƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œï¼Œå°½é‡å†™è‡ªå·±ä¹‹å‰æ¯”è¾ƒå›°æƒ‘æˆ–è€…çº ç»“çš„ç‚¹ ï¼Œè®°å½•è‡ªå·±çš„æ€è€ƒå’Œå®žè·µã€‚ æœ€åŽå¼ºè°ƒä¸€ç‚¹å°±æ˜¯ é¢è¯•è¿˜æ˜¯é¢è¯•ï¼Œåšé¢˜è¿˜æ˜¯åšé¢˜ã€‚ã€‚ã€‚ æŽ¨èèŠ±èŠ±é…±çš„ï¼Œå…è´¹çš„åšçš„è¿˜è¿™ä¹ˆå¥½ã€‚æœ‰æœºä¼šï¼Œä¸€å®šè¦æ”¯æŒä¸‹ï¼Œè¿˜æœ‰grandyangçš„ã€‚~~æ’’èŠ± ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸~~ æœ€åŽï¼Œå¸Œæœ›æœ‰äººæ‰¹åˆ¤ä¸‹æˆ‘çš„æ€è·¯æ„Ÿæ‚Ÿ ç¥æ„¿å¤§å®¶åˆ·é¢˜æ‰“BOSS é€šå…³ã€‚èµ°å‘äººç”Ÿå·…å³°å“ˆå“ˆ å¿…çŸ¥å¿…ä¼šï¼šæ•°æ®ç»“æž„ä¸Žç®—æ³• Algorithms + Data Structures = Programs, â€” Niklaus Wirth ç›®å‰æ¥è¯´ï¼Œç¨‹åºå‘˜çš„é¢è¯•é—¨æ§›è¶Šæ¥è¶Šé«˜ï¼Œå¾ˆå¤šä¸€çº¿äº’è”ç½‘å…¬å¸çš„æŠ€æœ¯é¢è¯•ï¼Œéƒ½æˆ–å¤šæˆ–å°‘ä¼šè€ƒå¯Ÿæ•°æ®ç»“æž„ä¸Žç®—æ³•ç›¸å…³çš„é¢˜ç›®ï¼ŒæŽŒæ¡æ•°æ®ç»“æž„ä¸Žç®—æ³•å°¤ä¸ºé‡è¦ã€‚å¦‚æžœä½ ä¸æƒ³æ°¸è¿œåšä¸€åâ€œä»£ç æ¬è¿å·¥â€ï¼Œé‚£å°±èŠ±ç‚¹æ—¶é—´ä¸€èµ·æ¥å­¦ä¹ å§ã€‚æœ¬é¡¹ç›®æ¶µç›–æ•°æ®ç»“æž„ä¸Žç®—æ³•æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼Œå†…å®¹å°†åœ¨åŽç»­ä¸æ–­æ›´æ–°ï¼Œæ¬¢è¿ŽæŒç»­å…³æ³¨é¡¹ç›®æœ€æ–°åŠ¨æ€ã€‚ æ•°æ®ç»“æž„ä¸Žç®—æ³•æ¦‚è¿°çº¿æ€§ç»“æž„ä¸Žéžçº¿æ€§ç»“æž„ çº¿æ€§ç»“æž„ éžçº¿æ€§ç»“æž„ ç¨€ç–æ•°æ®å’Œé˜Ÿåˆ—ç¨€ç–æ•°ç»„ çœ‹ä¸€ä¸ªå®žé™…çš„éœ€æ±‚ åŸºæœ¬ä»‹ç» åº”ç”¨å®žä¾‹ é˜Ÿåˆ— é˜Ÿåˆ—çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯ é˜Ÿåˆ—ä»‹ç» æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—çš„æ€è·¯ æ•°ç»„æ¨¡æ‹ŸçŽ¯å½¢é˜Ÿåˆ— é“¾è¡¨é“¾è¡¨ä»‹ç»å•é“¾è¡¨åº”ç”¨å®žä¾‹å•é“¾è¡¨å¤§åŽ‚é¢è¯•é¢˜åŒå‘é“¾è¡¨åº”ç”¨å®žä¾‹å•å‘çŽ¯å½¢é“¾è¡¨åº”ç”¨åœºæ™¯å•å‘çŽ¯å½¢é“¾è¡¨ä»‹ç»çº¦ç‘Ÿå¤«é—®é¢˜æ ˆæ ˆçš„ä¸€ä¸ªå®žé™…éœ€æ±‚æ ˆçš„ä»‹ç»æ ˆçš„åº”ç”¨åœºæ™¯æ ˆçš„å¿«é€Ÿå…¥é—¨æ ˆå®žçŽ°ç»¼åˆè®¡ç®—å™¨é€†æ³¢å…°è®¡ç®—å™¨ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåŽç¼€è¡¨è¾¾å¼é€’å½’é€’å½’ä¸Žé€’å½’è°ƒç”¨æœºåˆ¶é€’å½’-è¿·å®«é—®é¢˜é€’å½’-å…«çš‡åŽé—®é¢˜ï¼ˆå›žæº¯ç®—æ³•ï¼‰æŽ’åºç®—æ³•æŽ’åºç®—æ³•ä»‹ç»ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦å†’æ³¡æŽ’åºé€‰æ‹©æŽ’åºæ’å…¥æŽ’åºå¸Œå°”æŽ’åºå¿«é€ŸæŽ’åºå½’å¹¶æŽ’åºåŸºæ•°æŽ’åºå¸¸ç”¨æŽ’åºç®—æ³•å¯¹æ¯”æ€»ç»“æŸ¥æ‰¾ç®—æ³•çº¿æ€§æŸ¥æ‰¾ç®—æ³•äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ’å€¼æŸ¥æ‰¾ç®—æ³•æ–æ³¢é‚£å¥‘ï¼ˆé»„é‡‘åˆ†å‰²æ³•ï¼‰æŸ¥æ‰¾ç®—æ³•å“ˆå¸Œè¡¨å“ˆå¸Œè¡¨çš„åŸºæœ¬ä»‹ç»Google å…¬å¸çš„ä¸€ä¸ªä¸Šæœºé¢˜æ ‘ç»“æž„äºŒå‰æ ‘ ä¸ºä»€ä¹ˆéœ€æ±‚æ ‘è¿™ç§æ•°æ®ç»“æž„ äºŒå‰æ ‘éåŽ†ï¼šå‰åºã€ä¸­åºã€åŽç»­ äºŒå‰æ ‘æŸ¥æ‰¾ä¸Žåˆ é™¤ é¡ºåºå­˜å‚¨äºŒå‰æ ‘ é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„æ¦‚å¿µ é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„éåŽ† é¡ºåºå­˜å‚¨äºŒå‰æ ‘åº”ç”¨å®žä¾‹ çº¿ç´¢åŒ–äºŒå‰æ ‘ å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ çº¿ç´¢äºŒå‰æ ‘åŸºæœ¬ä»‹ç» çº¿ç´¢äºŒå‰æ ‘åº”ç”¨æ¡ˆä¾‹ éåŽ†çº¿ç´¢åŒ–äºŒå‰æ ‘ æ ‘ç»“æž„åº”ç”¨å †æŽ’åºèµ«å¤«æ›¼æ ‘èµ«å¤«æ›¼ç¼–ç  æ•°æ®åŽ‹ç¼©ä¸Žè§£åŽ‹ æ–‡ä»¶åŽ‹ç¼©ä¸Žè§£åŽ‹ äºŒå‰æŽ’åºæ ‘å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL æ ‘ï¼‰ å·¦æ—‹ å³æ—‹ åŒæ—‹è½¬ å¤šè·¯æŸ¥æ‰¾æ ‘äºŒå‰æ ‘ä¸Ž B æ ‘æ ‘B æ ‘ã€B+ æ ‘å’Œ B* æ ‘å›¾å›¾åŸºæœ¬ä»‹ç»å›¾çš„è¡¨ç¤ºæ–¹å¼å›¾çš„æ·±åº¦ä¼˜å…ˆéåŽ†å›¾çš„å¹¿åº¦ä¼˜å…ˆéåŽ†å›¾çš„æ·±åº¦ä¼˜å…ˆ VS å¹¿åº¦ä¼˜å…ˆ10 å¤§å¸¸ç”¨ç®—æ³•äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆéžé€’å½’ï¼‰åˆ†æ²»ç®—æ³•åŠ¨æ€è§„åˆ’ç®—æ³•KMP ç®—æ³•è´ªå¿ƒç®—æ³•æ™®é‡Œå§†ç®—æ³•å…‹é²æ–¯å¡å°”ç®—æ³•è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•å¼—æ´›ä¼Šå¾·ç®—æ³•é©¬è¸æ£‹ç›˜ç®—æ³•å…¥é–€è³‡æ–™ UCBçš„ç¥žè¯¾ CS61Bï¼ŒCS61Bè¿™ä¸ªè¯¾å±žäºŽè¿›é˜¶ç‰ˆçš„javaåŸºç¡€ç­ï¼ˆå’ŒCS61Aæ˜¯ä¸€ä¸ªç³»åˆ—çš„ï¼Œ61Aä¼šè®²ä¸€äº›åŸºæœ¬JAVAçš„è¯­æ³•ï¼‰ï¼Œä¸»è¦è®²æ•°æ®ç»“æž„ï¼Œä¸è¿‡è¿™è¯¾loadè¿˜æ˜¯å¾ˆé‡çš„ï¼Œä½œä¸šå’ŒPjéƒ½æ˜¯ç²¾æŒ‘ç»†é€‰ï¼Œç»è¿‡å²æœˆæ‰“ç£¨å‡ºæ¥çš„ç²¾å“ã€‚ Solutions CS61B 2019 CS61B CS 61Bä¸€ç•ä¸‰åˆ†åœ°è¨Žè«–äº¤æµ å°ç£ç›®éŒ„ï¼šæ¼”ç®—æ³•èˆ‡è³‡æ–™çµæ§‹ Cornell CS2110 UQERé‡åŒ–äº¤æ˜“ ç°¡å–®çš„æ¼”ç®—æ³•ç­†è¨˜ â€“ ç¬¬ä¸€é›† å¤§ä½¬å€‘çš„åˆ·é¡Œæ—¥è¨˜å’Œè¬›è§£å…³å…³åˆ·é¢˜æ—¥è®° https://blog.csdn.net/scarlett_guan/article/list/1?t=1&amp; Luckyè²“çš„ UVAï¼ˆACMï¼‰åœ’åœ° èŠ±èŠ±é…± leetcodeåˆ·é¢˜æ—¥è®° æœ‰youtubeè§†é¢‘ ç®—æ³•å¯¼è®º ç¬¬15ç«  åŠ¨æ€è§„åˆ’ å°æ—­è®²è§£ LeetCode 53. Maximum Subarray åˆ†æ²»ç­–ç•¥ åƒè€ƒè³‡æ–™å’Œæ›¸ç±ðŸ“šã€Šç®—æ³•ä¹‹ç¾Žâ€”â€”éšåŒ¿åœ¨æ•°æ®ç»“æž„èƒŒåŽçš„è¯­è¨€ã€‹ï¼Œå…¨æ–‡ç›®å½•ã€â€œ45ä¸ªç®—æ³•â€ç›®å½•ã€â€œ22ä¸ªç»å…¸é—®é¢˜ç›®å½•â€ã€‚è®°å½•å­¦ä¹ ä»£ç å®žçŽ°ï¼Œå‚è€ƒï¼šhttp://www.cnblogs.com/ranjiewen/p/6082573.html é€™è£¡æ˜¯åˆ·é¡Œå€‰åº«å’Œç›¸é—œè³‡æ–™[å·¥ä½œä¿¡æ¯] åˆ·é¢˜ç»éªŒè´´ CPE TAIWAN Certificate UVA OJ UVa submit codeçš„å®žå†µ ç›¸é—œæ´»å‹•äº¤å¤§ç®—æ³•å†¬ä»¤è¥ blog123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117çœŸçš„ç•¢æ¥­äº†! æ‰¾åˆ°é©ç•¶çš„BLOGå¯ä»¥å¯«æ±è¥¿å•¦~~~å°±æ˜¯GOOGLEçš„BLOGGER!æœ‰å¥½å¤šPluginå¯ä»¥ç”¨ã€templateå¯ä»¥è‡ªå·±è¨­å®š, åœ¨æ²’æœ‰ç¶²é ç©ºé–“ä¸‹, è¦ºå¾—é€™è »ä¸éŒ¯çš„.æ­¤ç¯‡æ˜¯åƒè€ƒNPSCè£œå®Œè¨ˆç•«ï¼Œçµåˆå…¶å…§å®¹èˆ‡æˆ‘çš„ç¨®ç¨®è§£é¡Œçš„å­¸ç¿’éŽç¨‹èˆ‡æ–¹æ³•ï½žèº«é‚Šçš„åŒå­¸æˆ–å­¸å¼Ÿå¦¹å¸¸æœƒå•å¦‚ä½•å­¸ç¨‹å¼ã€æé«˜ç¨‹å¼è¨­è¨ˆèƒ½åŠ›æˆ–è€…å¦‚ä½•è§£é¡Œã€‚ æˆ‘ä¸æ˜¯åƒä¸­å¤®MORRISã€æ¸…å¤§æ¥Šæ˜“éœ–ã€å°å¤§ä»¥åŠå…¶ä»–å„ç¨®æ€ªç‰©ç­‰åœ‹æ‰‹ï¼Œä½†æ˜¯åœ¨é€™å¤šå¹´ä¾†è§£é¡Œçš„éŽç¨‹æœ‰è¨±å¤šèªªä¸å®Œçš„å¿ƒå¾—èˆ‡æƒ³æ³•ï¼Œåœ¨æ­¤åˆ†äº«çµ¦æƒ³æŒ‘æˆ°ç¨‹å¼è¨­è¨ˆæ¯”è³½çš„äººï¼Œç•¶ä½œä¸€å€‹å­¸ç¿’é€”å¾‘çš„åƒè€ƒã€‚ ä»¥ä¸‹å…§å®¹æ˜¯ä»¥ç¨‹å¼è§£é¡Œæ–¹å‘ç‚ºä¸»çš„å­¸ç¿’éŽç¨‹èˆ‡æ–¹æ³•ï¼Œç„¡æ³•æ¶µè“‹æ‰€æœ‰ç¨‹å¼è¨­è¨ˆçš„å­¸ç¿’æ–¹æ³•ï¼Œä½†æˆ‘æƒ³å…±é€šé»žæ˜¯ä¸€æ¨£çš„ã€‚1. å…ˆç†Ÿç·´C/C++æˆ–JAVAåŸºæœ¬èªžæ³•ï¼š æ‰¾ä¸€æœ¬ä½ è¦ºå¾—çœ‹èµ·ä¾†æœ€èˆ’æœçš„æ›¸ï¼Œä¸è¦èªªåŽ»æ‰¾ä»€éº¼å¾ˆæœ‰åçš„è–ç¶“æœ¬ä¹‹é¡žçš„ï¼Œé™¤éžåº•å­å·²ç¶“å¾ˆå¥½ï¼Œå¯ä»¥å†ä¾†ç ”è®€æœ‰æ·±åº¦çš„æ›¸ã€‚æœ€æœ€æœ€æœ€æœ€åŸºæœ¬çš„æ˜¯éœ€è¦ä»¥ä¸‹ï¼ˆå¾ˆé‡è¦æ‰€ä»¥å¼·èª¿ï¼‰ï¼šæ‡‚æ¨™æº–è¼¸å…¥è¼¸å‡ºã€è®Šæ•¸å®£å‘Šã€if-elseã€switchã€while(do-while)ã€forç­‰æµç¨‹æŽ§åˆ¶èªžæ³•ã€é™£åˆ—ã€å­—ä¸²ã€structçš„ä½¿ç”¨ï¼ˆC/C++ï¼‰ã€classçš„ä½¿ç”¨(JAVAã€c++ï¼‰ä»¥åŠç°¡å–®çš„æŽ’åºæ³•ã€‚é€²éšŽä¸€é»žå°±å†å­¸è‡ªå®šå‡½æ•¸ã€éžè¿´å‡½æ•¸ç­‰ï¼Œé€™éšŽæ®µä¸»è¦æ˜¯å­¸ç¿’ç¨‹å¼çš„èªžæ³•ï¼Œè®“ä½ çš„æƒ³æ³•å¯ä»¥å¾ˆå¿«åœ°åŒ–æˆç¨‹å¼ç¢¼ï¼Œä¸ç”¨é¦¬ä¸Šèªªæƒ³å¯«å¾ˆå›°é›£çš„ç¨‹å¼ã€‚2.é€²å…¥ç·šä¸Šç¨‹å¼è§£é¡Œç³»çµ±ç·´ç¿’å­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨"çœ‹"çš„å°±èƒ½å­¸æœƒï¼Œå­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨"çœ‹"çš„å°±èƒ½å­¸æœƒï¼Œå­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨"çœ‹"çš„å°±èƒ½å­¸æœƒï¼Œå­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨"çœ‹"çš„å°±èƒ½å­¸æœƒï¼Œå­¸ç¨‹å¼çµ•å°ä¸åªæ˜¯è¦ç”¨"çœ‹"çš„å°±èƒ½å­¸æœƒï¼Œï¼ˆå¾ˆé‡è¦æ‰€ä»¥æˆ‘å¯«äº”è¡Œï¼‰ æœ‰äº›é‡è¦èª²ç¨‹åªæœ‰è¬›ç†è«–è€Œæ²’å¯¦éš›æ“åˆ€å¯«ç¨‹å¼ï¼Œå¯¦åœ¨æ˜¯ç„¡æ³•æ·±åˆ»äº†è§£å…¶ä¸­çš„å¥§å¦™è€Œç„¡æ³•æˆé•·ï¼Œç‰¹åˆ¥æ˜¯é‡åˆ°éœ€è¦ debug çš„æŠ€å·§æ˜¯æ›¸ä¸Šä¸æœƒæ•™çš„ï¼å› ç‚ºæ²’æœ‰äººæœƒæœ‰é‚£å€‹è€å¿ƒå¹«ä½ æª¢æŸ¥æ‰€æœ‰çš„ç¨‹å¼æ˜¯ä¸æ˜¯æœ‰ bugï¼Œæ‰€ä»¥æ‰¾ä¸€å€‹å¯ä»¥è‡ªå‹• Judge çš„ç³»çµ±æ˜¯å¾ˆé‡è¦çš„ï½žæ–°æ‰‹çš„è©±ï¼ŒæŽ¨è–¦å…©å€‹å¹³å°ç¬¬ä¸€å€‹ï¼šã€Œé«˜ä¸­ç”Ÿç¨‹å¼è§£é¡Œç³»çµ±ã€http://zerojudge.tw/ æ­·å²éžå¸¸æ‚ ä¹…çš„å°ç£ä¸­æ–‡è§£é¡Œç³»çµ±ï¼Œæ˜¯ç”±é«˜é›„å¸«ç¯„å¤§å­¸ç¶“ç‡Ÿï¼Œè£¡é¢çš„é¡Œåº«å¤§éƒ½æ˜¯ä¸­æ–‡ï¼Œä¹Ÿæ˜¯é«˜ä¸­è·å­¸ç”Ÿå¸¸ç”¨çš„è§£é¡Œè¨“ç·´å¹³å°ï¼Œè¨±å¤šTOIã€IOIåœ‹æ‰‹å¤§éƒ½åœ¨é€™èµ·æ­¥ã€‚å¯æƒœé¡Œç›®ä¸¦æ²’æœ‰åšé›£æ˜“åº¦åˆ†é¡žï¼Œå³ä½¿åœ¨åŸºç¤Žé¡Œåº«çš„é¡Œç›®ä¹Ÿæœ‰å¾ˆé›£çš„ï¼Œéœ€è¦æœ‰äººæŒ‡å°Žæœƒæ¯”è¼ƒæ¸…æ¥šã€‚ç¬¬äºŒå€‹ï¼šã€ŒITSAçš„E-TUTORã€http://e-tutor.itsa.org.tw/e-Tutor/ è¿‘å¹´ä¾†æ–°çš„ä¸­æ–‡è§£é¡Œç³»çµ±ï¼Œç¶²ç«™ä¸Šæœ‰ä¸­è‹±æ–‡çš„é¡Œç›®ï¼Œæ¯ç¨®é¡Œç›®åˆæœ‰åˆ†å„é¡žåž‹çš„é¡Œç›®ï¼Œæ›´æ˜¯æœ‰åšé›£æ˜“åº¦çš„å€éš”ï¼Œè®“å­¸è§£é¡Œçš„ä½¿ç”¨è€…æœ‰å€‹æ¸…æ¥šçš„æ–¹å‘ã€‚å¯æƒœé€™å¹³å°ç¼ºé»žæ˜¯å¸¸æœ‰é¡Œç›®çš„æ•˜è¿°ä¸å®Œæ•´ï¼Œæ¯”å¦‚è¼¸å…¥æ¸¬è³‡çš„ç¯„åœæ²’èªªæ˜Žç­‰ï¼Œæœƒçµ¦ä½¿ç”¨è€…é¡å¤–çš„å›°æ“¾ã€‚3.é–‹å§‹å­¸ç¿’è³‡æ–™çµæ§‹ã€æ¼”ç®—æ³• åŸºæœ¬é¡Œè§£åˆ°ä¸€å€‹ç¨‹åº¦ï¼Œæœƒç™¼ç¾å­¸çš„æ±è¥¿ä¸å¤ ç”¨ï¼Œé€™æ™‚å€™å°±è¦é€²å…¥ä¸‹ä¸€å€‹éšŽæ®µ,é–‹å§‹å­¸ç¿’è³‡æ–™çµæ§‹å’Œæ¼”ç®—æ³•äº†ã€‚ é€™éƒ¨åˆ†ä¸€æ¨£æ˜¯åŽ»æ›¸åº—æ‰¾ä¸€æœ¬ä½ çœ‹å¾—é †çœ¼çš„æ›¸,ä»¥æˆ‘å€‹äººè€Œè¨€ï¼Œåœ¨è³‡æ–™çµæ§‹çš„éƒ¨åˆ†ï¼Œé™¤äº†æœ‰åŽŸæ–‡è–ç¶“æœ¬Ellis Horowitzå¯«çš„Fundamentals of Data Structures in C(æˆ–C++)æˆ‘æœ‰å¦å¤–è²·è”¡æ˜Žå¿—çš„ã€Œè³‡æ–™çµæ§‹--ä½¿ç”¨C++(ä¹Ÿæœ‰C++ã€JAVAç‰ˆ)ã€å¦å¤–æœ‰ç¶²å‹æŽ¨è–¦èƒ¡æ˜­æ°‘çš„ã€Œåœ–è§£è³‡æ–™çµæ§‹ã€é¸ä¸€æœ¬å³å¯ï¼Œä¸»è¦æ˜¯çœ‹æ‡‚è³‡æ–™çµæ§‹çš„è§€å¿µ,æ›¸è£¡ç¨‹å¼ç¢¼å¸Œæœ›æ˜¯èƒ½ç ”è®€ï¼Œæœ€å¥½æ˜¯å¯¦ä½œã€‚è€Œæœ‰äº›æ¨¹çš„ç« ç¯€è£¡é¢, åªè¦çœ‹åˆ°äºŒå…ƒæ¨¹(åŒ…æ‹¬äºŒå…ƒæœå°‹æ¨¹ã€Heap)å°±å¤ äº†,å¾Œé¢AVL-Treeã€2-3-4 Treeã€B-Treeç­‰å¯ä»¥ä¸ç”¨çœ‹ï¼ŒåŸºæœ¬ä¸Šè§£é¡Œä¸æœƒç”¨åˆ°ã€‚ æ¼”ç®—æ³•çš„æ›¸, ä¹‹å‰æˆ‘ä¸Šèª²åŽŸæ–‡æ›¸æ˜¯ç”¨ Anany V. Levitinå¯«çš„Introduction to the Design &amp; Analysis of Algorithmsï¼Œè€Œä¸­æ–‡æ›¸æŽ¨è–¦è”¡å®—ç¿°çš„ã€Œæ¼”ç®—æ³•ï¼šä½¿ç”¨C++è™›æ“¬ç¢¼ã€ï¼Œé€™æœ¬çš„å…§å®¹è®“æˆ‘å­¸åˆ°å¾ˆå¤šã€‚è§£é¡Œçš„ç¨‹å¼æœ€å¸¸æœƒç”¨çš„æ¼”ç®—æ³•åŒ…å«å„å€‹æ“Šç ´æ³• ï¼ˆDivide-and-Conquerï¼‰ã€å‹•æ…‹è¦åŠƒ(Dynamic Programming)ã€è²ªå©ªæ¼”ç®—æ³•(Greedy)ã€å›žæº¯(Backtracking)ã€åˆ†æ”¯ç•Œé™æ³•(Branch-and-Bound)ç­‰ï¼Œæœ‰æ™‚è§£é¡Œé‡åˆ°çš„å•é¡Œå¯ä»¥ç”¨å¾ˆå¤šç¨®æ¼”ç®—æ³•è§£ã€‚è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„æ›¸è®€å®Œå¾Œï¼Œé‚„ä¸è¶³çš„å¯ä»¥åˆ°ã€Œæ¼”ç®—æ³•ç­†è¨˜ã€æŒ–è³‡æ–™http://www.csie.ntnu.edu.tw/~u91029/é€™ç¶²ç«™é™ªæˆ‘å¥½å¹¾å¹´ï¼Œä¹Ÿæœ‰æˆ‘å¹«ç«™é•·debugæ–‡ç« çš„ç—•è·¡ï¼Œå¯æƒœç¾åœ¨çµ‚æ­¢ç‡Ÿé‹ï¼Œæœ‰é»žå¯æƒœï½žæ¼”ç®—æ³•è–ç¶“æœ¬æ˜¯MITæ•™æŽˆCormenå¯«çš„Introduction to Algorithmsï¼Œä»¥å°æ¸…äº¤æˆè³‡è¨Šå·¥ç¨‹å­¸ç”Ÿä»¥åŠåœ‹æ‰‹ï¼Œå¹¾ä¹Žéƒ½çœ‹é€™æœ¬å­¸èµ·ï¼Œæ›¸çš„å…§å®¹è¬›çš„å¾ˆå®Œæ•´ï¼Œèªªæ˜¯è–ç¶“æœ¬ä¸ç‚ºéŽï¼ŒçœŸçš„è¦è®€å¯ä»¥å•ƒé€™æœ¬ï¼Œä½†ä¸å»ºè­°è®€ä¸­æ–‡ç¿»è­¯æœ¬ï¼Œç¿»è­¯çš„å¾ˆçˆ›ã€‚4.ä½¿ç”¨é€²éšŽçš„ç·šä¸Šç¨‹å¼è§£é¡Œç³»çµ± ç¬¬äºŒæ®µæåˆ°é«˜ä¸­ç”Ÿç¨‹å¼è§£é¡Œç³»çµ±(ZeroJudge)ã€E-TUTORé›–ç„¶è£¡é¢éƒ¨åˆ†é¡Œç›®æ¯”è¼ƒç°¡å–®ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å»ºç«‹è‡ªä¿¡å¿ƒã€å­¸ç¿’åŸºæœ¬è§£é¡Œæ–¹æ³•ã€‚ä½†åˆ°é”æŸä¸€ç¨‹åº¦å¾Œï¼Œæœ‰äº›é¡Œç›®æœƒå¾ˆé›£ã€ç”šè‡³å­¸ç¿’æˆé•·çš„å¹«åŠ©ä¸å¤§ï¼Œæ­¤æ™‚å¯ä»¥æ”¹åˆ°å…¶ä»–ç¶²ç«™ç·´ç¿’ã€‚ é¦–å…ˆæœ€æŽ¨è–¦çš„å°±æ˜¯æœ€å¤šäººç”¨éŽï¼Œ ä¿—ç¨± ACM çš„ UVa Online Judge,http://uva.onlinejudge.org/è€Œã€ŒLuckyè²“çš„ACMåœ’åœ°ã€æœ‰æä¾›ä¸€äº›é¡Œç›®çš„ä¸­è­¯é‚„æœ‰é›£æ˜“åº¦åˆ†ç´š,http://luckycat.kshs.kh.edu.tw/å¯ä»¥æ­é…ä½¿ç”¨ã€‚ç•¶ç„¶æ˜¯å¸Œæœ›èƒ½çœ‹åŽŸæ–‡ç›´æŽ¥è§£é¡Œæ˜¯æœ€å¥½ï¼Œç•¢ç«Ÿåœ‹éš›è§£é¡Œå…¨éƒ½æ˜¯ç”¨è‹±æ–‡å‡ºé¡Œã€‚ ç¬¬ äºŒå€‹æ˜¯Uhuntï¼Œé€™ä¸æ˜¯æ–°çš„è§£é¡Œç³»çµ±ï¼Œè€Œæ˜¯UVaçš„å¯¦æ³ç³»çµ±ï¼Œæ˜¯ç”±æ–°åŠ å¡å¤§å­¸çš„è§£é¡Œåœ˜éšŠæ‰€å»ºç«‹çš„ç¶²ç«™ï¼Œæä¾›ç¾åœ¨å…¨ä¸–ç•Œæœ‰å“ªäº›äººåœ¨è§£é¡Œã€è§£é¡Œç‹€æ³å¦‚ä½•ã€æŽ’ åå¦‚ä½•ã€ç¨‹å¼åŸ·è¡Œæ™‚é–“å¤šé•·ï¼Œå°æˆ‘è€Œè¨€æ˜¯å€‹å¾ˆåˆºæ¿€çš„ç¶²ç«™ï¼Œä¸”é•·ä¹…ä¸‹ä¾†æœƒçœ‹è¦‹ä¸€äº›å¾ˆå¥‡æ€ªçš„ç†ŸIDã€‚è€Œuhuntä¸Šä¸­é–“æœ‰ä¸€å€‹Competitive Programming Exercisesï¼Œæ˜¯æ–°åŠ å¡è§£é¡Œåœ˜éšŠæ‰€åˆ†é¡žçš„é¡Œç›®ï¼Œæœ‰åˆ†å¥½é¡Œç›®é¡žåž‹èˆ‡é›£æ˜“åº¦ï¼Œä¹Ÿæ˜¯æä¾›ä½¿ç”¨è€…å¾ˆå®Œæ•´çš„è§£é¡Œæ–¹å‘ã€‚5. é€²éšŽè§£é¡Œæ›¸ç± å‰é¢æçš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•æ›¸ç±ï¼Œåªæ˜¯ï¼‚åŸºç¤ŽçŸ¥è­˜ï¼‚è€Œå·²ï¼Œæœ‰æ™‚å­¸å®Œå¾Œé‚„æ˜¯ç„¡æ³•å°æŸäº›é¡Œç›®æƒ³å‡ºæ–¹æ³•ï¼Œæ­¤æ™‚æŽ¨è–¦å¹¾æœ¬æ›¸ç±ã€‚ç¬¬ä¸€æ˜¯åŠ‰æ±ä½³æ’°å¯«çš„ã€Œç®—æ³•ç«žèµ›å…¥é—¨ç»å…¸ã€è·Ÿã€Œç®—æ³•ç«žèµ›å…¥é—¨ç»å…¸â€”â€”è®­ç»ƒæŒ‡å—ã€ï¼Œ åœ¨å°ç£åŽ»å¹´æœ‰ä»£ç†å‡ºç¹é«”ç‰ˆï¼Œåç¨±åˆ†åˆ¥ç‚ºã€Šæå‡ç¨‹å¼è¨­è¨ˆçš„é‚è¼¯æ€è€ƒåŠ›â”€åœ‹éš›ç¨‹å¼è¨­è¨ˆç«¶è³½ä¹‹æ¼”ç®—æ³•åŽŸç†ã€é¡Œåž‹ã€è§£é¡ŒæŠ€å·§èˆ‡é‡é»žè§£æžã€‹èˆ‡ã€Šæå‡ç¨‹å¼è¨­è¨ˆçš„è§£é¡Œæ€ è€ƒåŠ›â”€åœ‹éš›æ¼”ç®—æ³•ç¨‹å¼è¨­è¨ˆç«¶è³½è¨“ç·´æŒ‡å—ã€‹ã€‚é€™å…©æœ¬æ›¸è€Œè¨€ï¼Œåˆå­¸è€…å…ˆè®€ã€Œç®—æ³•ç«žèµ›å…¥é—¨ç»å…¸ã€ï¼Œè®€å®Œå¾Œå†ä¾†è®€ã€Œç®—æ³•ç«žèµ›å…¥é—¨ç»å…¸â€”â€”è®­ç»ƒæŒ‡å—ã€ã€‚æ›¸çš„å…§å®¹å°±æ˜¯ å°ˆé–€è¬›è§£å¦‚ä½•å°‡åŸºæœ¬çš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çŸ¥è­˜ä¾†è§£æ±ºç¨‹å¼è§£é¡Œçš„é¡Œç›®ã€‚ä»¥Uvaè€Œè¨€ï¼Œé¡Œç›®æ˜¯è®ŠåŒ–å¤šç«¯ï¼Œæœ‰äº›é¡Œç›®è‹¥æ²’æœ‰äººæŒ‡å°Žç¢ºå¯¦å¾ˆé›£è‡ªå·±æƒ³å‡ºä¾†ï¼Œè€Œé€™äº›æ›¸æä¾› å¾ˆå¤šæ•´åˆè³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„æ¦‚å¿µï¼Œæå‡è§£é¡Œè€…çš„æ€è·¯ã€‚å¦å¤–ä¸€é¡Œï¼ŒåŠ‰æ±ä½³èµ·åˆæ˜¯ä¸­åœ‹çš„è§£é¡Œåœ‹æ‰‹ï¼Œç¾ä»»ä¸­åœ‹å°ˆæ¥­è§£é¡Œæ•™ç·´èˆ‡ACM-ICPCå‘½é¡Œå§”å“¡ï¼Œä¸­åœ‹è³‡è¨Šå­¸ç”Ÿå¹¾ä¹Žéƒ½è½éŽä»–åå­—ã€‚ä»–å¯«äº†é€™äº›æ›¸æ›´æ˜¯å¸¶å‹•ä¸­åœ‹çš„è§£é¡Œæ°£æ°›ï¼Œæ¯å¹´ä¸Šæµ·äº¤é€šå¤§å­¸å¹¾ä¹Žéƒ½æœƒé€²åˆ°ACM-ICPCæ±ºè³½çš„å‰å¹¾åï¼ŒçœŸçš„æ˜¯å¾ˆææ€–ã€‚ç¬¬äºŒæœ¬æ˜¯æ—¥æœ¬åœ‹æ‰‹å¯«çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ–ãƒƒã‚¯ï¼Œå°ç£ä¹Ÿæœ‰ä»£ç†æˆç¿»è­¯æ›¸ï¼Œå«åšã€ŠåŸ¹é¤Šèˆ‡é›éŠç¨‹å¼è¨­è¨ˆçš„é‚è¼¯è…¦ï¼šä¸–ç•Œç´šç¨‹å¼è¨­è¨ˆå¤§è³½çš„çŸ¥è­˜ã€å¿ƒå¾—èˆ‡è§£é¡Œåˆ†äº«ã€‹ï¼Œä¹Ÿæ˜¯è·ŸåŠ‰æ±ä½³å¯«å¾—å·®ä¸å¤šï¼Œåªæ˜¯é€™æœ¬æ›¸æ˜¯æ‹¿POJè·ŸGCJçš„é¡Œç›®ä¾†è¬›è§£ã€‚6. å­¸æµ·ç„¡æ¶¯ ä»¥è§£é¡Œè€Œè¨€ï¼Œåˆå­¸è€…æœ€å®¹æ˜“çŠ¯çš„éŒ¯ï¼Œä»¥ç‚ºåªçœ‹æ›¸å°±æ‡‚ä»€éº¼å«åšè³‡æ–™çµæ§‹æˆ–æ¼”ç®—æ³•ï¼Œç”šè‡³åªæŒ‘ç°¡å–®é¡Œä¾†åšï¼Œé€™æ¨£æ˜¯æ°¸é ä¸æœƒæˆé•·ã€‚ä»¥æˆ‘å€‹äººè€Œè¨€ï¼Œå¤§å­¸çš„è³‡æ–™çµæ§‹èˆ‡æ¼”ç®— æ³•éƒ½æ˜¯æœ‰å¯«ç¨‹å¼ä½œæ¥­ï¼Œä¸”ä½”ç¸½æˆç¸¾å¾ˆé‡ï¼Œä¸å¯«å¥½å°±æ˜¯ç­‰è‘—è¢«ç•¶æŽ‰ï¼Œå› æ­¤æœ‰å¾ˆå¤šæ™‚é–“èŠ±åœ¨å­¸å¥½è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„ç†è«–èˆ‡ç¨‹å¼è¨­è¨ˆã€‚å¾žå¤§äºŒé–‹å§‹å°±è·Ÿè‘—å­¸é•·å§é€²å…¥è§£é¡Œ æ¯”è³½é€™ä¸€æ¢ä¸æ­¸è·¯ï¼ˆï¼Ÿï¼‰ï¼Œèµ·åˆçœŸçš„å¦‚åŒå‰é¢æåˆ°ï¼Œå³ä½¿èª²ç¨‹å­¸éŽè³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„åŸºç¤ŽçŸ¥è­˜ï¼Œå»é‚„æ˜¯ä¸æœƒè½‰æ›æˆè§£é¡Œçš„æ–¹æ³•ï¼Œæ„æ€å°±æ˜¯è§£é¡Œå¯«å¤ªå°‘ï¼Œä¸”åˆç¢°å¾—å¤ª ç°¡å–®ï¼Œæ‰æ²’æœ‰é€²æ­¥ã€‚ä¹‹å¾Œåˆ°äº†å¤§ä¸‰ï¼Œå¤§æ¦‚ä¹Ÿæ‰è§£äº†ä¸€ç™¾å¤šé¡ŒUvaé¡Œç›®ï¼Œä½†è¦ºå¾—å­¸çš„é‚„æ˜¯å°‘ã€‚ç›´åˆ°è½‰å­¸è‡³é•·æ¦®ï¼Œçªç„¶æœ‰å€‹ç™¼ç¥žç¶“çš„å‹•åŠ›ï¼Œé–‹å§‹ç˜‹ç‹‚è§£é¡Œï¼ŒçœŸæ­£é«”æœƒåˆ° è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•çš„å¯¦ä½œèƒ½åŠ›èˆ‡å¥§å¦™ä¹‹è™•ï¼ŒçŸ­çŸ­ä¸€å¹´å¤šè§£äº†ï¼”ç™¾é¡Œï¼Œé€™è¶ŸéŽç¨‹é›–ç„¶è¾›è‹¦ï¼Œä½†æ˜¯å»éžå¸¸å€¼å¾—ï¼ å¾žä»¥å‰åŽ»ä¸­å±±ã€æˆå¤§çš„å…¨åœ‹å¤§å°ˆç¨‹å¼ç«¶ è³½ã€å—å€ç¨‹å¼ç«¶è³½ç­‰æ¯”è³½ï¼Œå¸¸å¸¸çœ‹è¦‹å¾ˆç†Ÿæ‚‰çš„æˆå¤§é¸æ‰‹è‡‰å­”ï¼Œç›´åˆ°ç¾åœ¨é‡åˆ°çš„åŒä¸€è¼©èˆ‡æ–°ä¸€ä»£çš„å¼·é¸æ‰‹ï¼Œé€™è¶Ÿæ¯”è³½éŽç¨‹å€¼å¾—å›žæ†¶ã€‚æœ€å¾Œä»Šå¹´çš„ITSAæ¡‚å† è³½ä»æ²’ç² çŽï¼Œä½†ä¹Ÿé‚„æ˜¯å€¼å¾—äº†ï¼Œè‡³å°‘è·Ÿæˆå¤§åŒè§£æ•¸é‚„è »é«˜èˆˆ(?)ã€‚è€ŒCPE(å¤§å­¸ç¨‹å¼èƒ½åŠ›æª¢å®š)åœ¨ä¸Šç¦®æ‹œäºŒæ‹¿ä¸‹A+çš„æˆç¸¾ï¼Œä¹Ÿæ˜¯äº†ç„¡éºæ†¾ï¼ å¸Œæœ›é€™ç¯‡æ–‡ç« æœ‰èƒ½å¹«åŠ©åˆ°æœ‰å…±åŒå¿—è¶£åœ¨è§£é¡Œä¸Šçš„äººï¼Œæ›´å¸Œæœ›èƒ½å¸¶å‹•ç¨‹å¼è§£é¡Œæ°£æ°›ï¼Œè§£é¡Œåªæœ‰å¥½è™•æ²’å£žè™•ï¼Œä¹Ÿå¦‚æ¼”ç®—æ³•ç­†è¨˜æ‰€è¿°ï¼Œè§£é¡Œèƒ½å­¸åˆ°ä»¥ä¸‹é€™äº”ç¨®èƒ½åŠ›ï¼š ä¸€ã€æ™ºåŠ›æ€è€ƒï¼šè—‰ç”±æ™ºåŠ›æ¸¬é©—å•é¡Œã€ç›Šæ™ºéŠæˆ²ï¼ˆå¦‚æ•¸ç¨ã€å­”æ˜Žæ£‹ã€å€‰åº«ç•ªï¼‰ã€æ•¸å­¸ç§‘æ™®æ›¸ç­‰ç­‰ï¼Œå¯ä»¥æ´»çµ¡å¤§è…¦æ€è·¯ï¼ŒåŸ¹é¤Šè§€å¯Ÿå•é¡Œèˆ‡åˆ†æžå•é¡Œçš„èƒ½åŠ›ã€‚ äºŒã€æ•¸å­¸ï¼šå¾žå­¸æ ¡æ•™ç§‘æ›¸å¯ä»¥å­¸åˆ°å¾ˆå¤šæ•¸å­¸æ¦‚å¿µã€æ•¸å­¸æ–¹æ³•ã€ç”šè‡³æ˜¯æ•¸å­¸å…¬å¼ï¼Œå¥—ç”¨åœ¨å•é¡Œä¸Šé¢ä¾†è§£æ±ºå•é¡Œã€‚ ä¸‰ã€è¨ˆç®—å­¸ï¼šå¾žå­¸æ ¡æ•™ç§‘æ›¸å’Œç¶²è·¯ä¸Šçš„è³‡æºï¼Œå¯ä»¥å­¸åˆ°å¾ˆå¤šè¨ˆç®—æ–¹æ³•ï¼Œå¥—ç”¨åœ¨å•é¡Œä¸Šé¢ä¾†è§£æ±ºå•é¡Œã€‚ å››ã€ç¨‹å¼èªžè¨€ï¼šå¾žç¨‹å¼èªžè¨€çš„æ›¸ç±ï¼ˆ C++ Primer ã€ Effective C++ ã€ç¨‹å¼è¨­è¨ˆå¸«çš„è‡ªæˆ‘ä¿®é¤Šï¼‰ã€è¨ˆç®—æ©Ÿæ¦‚è«–ç­‰æ›¸ä¸­å­¸ç¿’ã€‚ äº”ã€ç¨‹å¼è¨­è¨ˆï¼šå¾ž open source èˆ‡å…¶ä»–äººå¯«çš„ç¨‹å¼ç¢¼ä¸­å­¸ç¿’ä¸€äº›å¯«ç¨‹å¼çš„åŽŸå‰‡ä»¥åŠæ¼‚äº®çš„å¯«æ³•ã€‚æ‰€ä»¥ï¼Œè§£é¡ŒZ&gt;Bæ˜¯ç™¾åˆ†ç™¾æ­£ç¢ºçš„!7. ç–‘å• ä¹Ÿæœ‰äººæœƒå•ï¼Œåšè§£é¡Œé‚£éº¼å¤šå°å¯¦éš›æ’°å¯«å°ˆé¡Œï¼ˆç³»çµ±ï¼‰æœ‰ç”¨å—Žï¼Ÿé€™è¦å›žç­”ã€Œéƒ¨åˆ†æœ‰ç”¨ã€ï¼Œç•¢ç«Ÿä¸€å€‹ç³»çµ±å°±æ˜¯è¦è§£æ±ºä¸€å¤§å †å•é¡Œé›†åˆçš„å·¥ç¨‹æ–¹æ³•ï¼Œè€Œè§£é¡Œåªæœ‰è§£ä¸€éƒ¨åˆ†å°å• é¡Œã€‚ä½†æ˜¯å­¸éŽæ¼”ç®—æ³•æœƒçŸ¥é“ï¼Œè¦æƒ³è¾¦æ³•æŠŠå•é¡Œåˆ‡æˆå­å•é¡Œä¾†è§£æ±ºï¼Œåšç³»çµ±ä¹Ÿä¸€æ¨£ï¼Œæ¯ä¸€å€‹ç³»çµ±å¯ä»¥åˆ‡æˆå„ç¨®åŠŸèƒ½çš„å­ç³»çµ±ï¼Œæ¯ä¸€å­ç³»çµ±æ˜¯é‡å°ç‰¹å®šå•é¡Œä½œè§£æ±ºçš„æ–¹ æ¡ˆã€‚å› æ­¤ä¸€å€‹å­ç³»çµ±çš„åŠŸèƒ½å®Œæ•´ï¼Œæ­£æ˜¯ä¸€å€‹ï¼ˆæ•¸å€‹ï¼‰ç¨‹å¼çš„åŸ·è¡Œèƒ½åŠ›ï¼Œè€Œç¨‹å¼åˆå¦‚ä¸€ä½Niklaus Wirthå¤§å¸«æ‰€èªªï¼šã€Œç¨‹å¼ ï¼ æ¼”ç®—æ³•ï¼‹è³‡æ–™çµæ§‹ã€ã€‚å¥½å¾—ç¨‹å¼å¯ä»¥æ•´åˆå‡ºä¸€å€‹å¥½çš„ç³»çµ±ï¼Œé€™æ˜¯æˆ‘å€‹äººå°ç³»çµ±å¯¦ä½œçš„è§€å¿µï¼Œæ‰€ä»¥è§£é¡Œå­¸çš„å¥½ï¼Œä»ç„¶å°åšç³»çµ±æœ‰å¹« åŠ©ã€‚åªæ˜¯æœ‰äº›æ˜¯è§£é¡Œå­¸ä¸åˆ°çš„ï¼Œæ¯”å¦‚å¦‚ä½•ä½¿ç”¨APIä¾†åšå®Œæˆä¸€å€‹å­ç³»çµ±çš„åŠŸèƒ½ï¼Œå¿…é ˆè¦æœ‰é–±è®€æ–‡ä»¶çš„èƒ½åŠ›ï¼Œè§£é¡Œä¸Šæ²’æœ‰é–±è®€æ–‡ä»¶çš„å­¸ç¿’æ–¹æ³•ã€‚-------- 2014/6/16è£œå……--------- é€™é™£å­æŽ¥è§¸åˆ°2048 botå¤§è³½ï¼Œåœ¨é€™éŽç¨‹å­¸åˆ°ä½•è¬‚å°æŠ—æœå°‹çš„branch-and-boundæ¼”ç®—æ³•ï¼ŒåŒ…å«minimaxã€alpha-beta pruneã€expectimaxã€negascoutç­‰æ–¹æ³•ã€‚ç›®å‰ACMé¡Œç›®çš„è§£é¡Œæˆ‘é‚„æ²’é‡åˆ°å‰ªæžçš„é¡Œç›®ï¼Œè—‰ç”±é€™2048æ¯”è³½çš„æ©Ÿæœƒï¼Œå­¸åˆ°äº†å‰ªæžçš„ç²¾ç¥žï¼åªæ˜¯åœ‹å…§ç ”ç©¶å–®ä½å¤ªå¼·äº†ï¼Œäº¤å¤§çš„å±…ç„¶èƒ½åå¹¾%çš„16384 Tile....è¶…å¥½å¥‡ä»–å€‘æ¼”ç®—æ³•èƒ½å¿«ç‹ æº–åˆ°æ­¤æˆç¸¾ã€‚ 123456789101112131415161718191. æ¾„æ¸…é—®é¢˜(clarification) é‡å¤é—®é¢˜ï¼ŒæŠŠç™½æ¿åˆ†æˆä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†åˆ—å‡ºæ‰€æœ‰çš„æ¡ä»¶ï¼šè¾“å…¥è¾“å‡ºæ˜¯ä»€ä¹ˆ(ç±»åž‹ï¼Œpattern)ï¼Œæ•°æ®å¤§å°ç­‰ï¼›ç¬¬äºŒéƒ¨åˆ†ç”¨æ¥åšæ¼”ç®—ï¼Œç¬¬ä¸‰éƒ¨åˆ†ç”¨æ¥å†™ä»£ç ã€‚2. å¼€å§‹åœ¨ç™½æ¿ç¬¬äºŒéƒ¨åˆ†ç ”ç©¶é¢è¯•å®˜ç»™ä½ çš„ä¾‹å­ï¼Œä¸ºé¢è¯•å®˜åˆ†æžé—®é¢˜ï¼Œæ¯”å¦‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³å“ªäº›å­é—®é¢˜ï¼Œç„¶åŽçœ‹èƒ½å¦å¾—åˆ°ä¸€ä¸ªbrute forceçš„è§£ï¼Œè¿™é‡Œå°±æ˜¯æ£€æŸ¥æ‰€æœ‰çš„pairï¼ŒO(n^2)çš„å¤æ‚åº¦ã€‚3. é¢è¯•å®˜è‚¯å®šä¼šå«ä½ ä¼˜åŒ–ï¼Œè¿™æ—¶ä½ å°±è¦ç§¯æžæ€è€ƒï¼ŒåŒæ—¶è¯´å‡ºä½ åœ¨æƒ³ä»€ä¹ˆï¼Œæ¯”å¦‚å¯ä¸å¯ä»¥ä¸ç”¨æ£€æŸ¥pairï¼Œæ‰¾æ¯ä¸ªæ•°å’Œtarget numberçš„å·®å€¼æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œè¿™æ ·åªéœ€è¦éåŽ†ä¸€éå°±è¡Œäº†å‘€ï¼Œä¸ºäº†æ›´å¿«æ£€æŸ¥å‡ºæ¥å·®å€¼æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ç”¨å“ˆå¸Œè¡¨å®žçŽ°æœ€å¥½æƒ…å†µO(1)çš„æŸ¥è¯¢é€Ÿåº¦ã€‚4. é¢è¯•å®˜è¡¨ç¤ºä»–è®¤å¯ä½ ï¼Œè¿™ä¸ªæ—¶å€™ä½ è¦æ€»ç»“ä¸€ä¸‹ä½ çš„è§£é¢˜æ­¥éª¤1,2,3ï¼Œç„¶åŽåœ¨æ¯ä¸€ä¸ªæ­¥éª¤ä¸‹ï¼Œä¹¦å†™å¯¹åº”çš„ä»£ç ï¼Œä¸­é—´ä¸éœ€è¦è¯´å¤ªå¤šè¯ï¼Œæ¯ä¸€ä¸ªblockå†™ä¹‹å‰äº¤ä»£ä¸€ä¸‹ï¼Œå†™å®ŒåŽæ€»ç»“ä¸€ä¸‹å°±è¡Œï¼Œæ¯å®Œæˆä¸€ä¸ªè¦æ±‚ï¼Œåœ¨ç™½æ¿ç¬¬ä¸€éƒ¨åˆ†å¯¹åº”çš„åœ°æ–¹æ‰“é’©ã€‚5. å¯ä»¥ä½¿ç”¨ä¸åŒé¢œè‰²çš„ç¬”ï¼Œæ ‡æ³¨ä¸åŒçš„éƒ¨åˆ†ã€‚6. å†™å®Œä»¥åŽï¼Œè·‘å‡ ä¸ªæœ‰ä»£è¡¨æ€§çš„test caseï¼Œæ—¶ç©ºå¤æ‚åº¦åˆ†æžã€‚7. æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ³¨æ„å¥½å˜é‡å’Œå‡½æ•°çš„å‘½åï¼Œå°‘ç”¨å…¨å±€å˜é‡ï¼Œå¤§çš„å‡½æ•°ä¸€å®šè¦æ‹†åˆ†æˆè‹¥å¹²å­å‡½æ•°ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒçš„ä»»åŠ¡ï¼Œè¿™æ ·ä»£ç å¯è¯»æ€§é«˜ï¼Œä¿®æ”¹èµ·æ¥ä¹Ÿéžå¸¸æ–¹ä¾¿ï¼Œæ¯”å¦‚è¯´é¢è¯•å®˜è¯´ä½ Aå‡½æ•°é‡Œæœ‰ä¸ªbugï¼Œä½ å¯ä»¥è¿…é€Ÿå®šä½åˆ°Aå‡½æ•°çš„ä½ç½®ã€‚å¤§å®¶å¯ä»¥æœç´¢ä¸€äº›å…³äºŽgood coding practiceçš„æ–‡ç« ã€‚å®žé™…ç¢°åˆ°çš„é¢˜ç›®å¯èƒ½ä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œä½ çš„æ€è·¯å¯èƒ½ä¼šå¡ä½ï¼Œä¸è¦æ…Œã€‚é¢è¯•å®˜æƒ³è¦çœ‹åˆ°çš„å°±æ˜¯ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯å‘Šè¯‰é¢è¯•å®˜ä½ çš„æ–¹å‘ï¼Œä½ å¡ä½çš„åœ°æ–¹åœ¨å“ªé‡Œï¼Œè€Œä¸æ˜¯è‡ªå·±é—·å¤´æƒ³ã€‚ä½ è¿™ä¹ˆåšé‡Šæ”¾äº†ä¸€ä¸ªç§¯æžçš„æ²Ÿé€šä¿¡å·ï¼Œé‚£ä¹ˆé¢è¯•å®˜è‡ªç„¶ä¹Ÿä¼šç»™ä½ ç§¯æžçš„å›žåº”ã€‚æ­¤å¤–ï¼Œå¦‚æžœé¢è¯•å®˜æ‰“æ–­äº†ä½ ï¼Œé—®ä½ what about doing something in this way....è¿™å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªæç¤ºå‘Šè¯‰ä½ çš„æ–¹æ³•ä¸å¯¹ã€‚è¯·ä½ ä¸€å®šï¼Œä¸€å®šï¼Œä¸€å®šæŒ‰ç…§é¢è¯•å®˜è¯´çš„åšï¼å³ä¾¿ä½ è§‰å¾—ä½ çš„æ–¹æ³•é©¬ä¸Šå°±è¦åšå‡ºæ¥äº†ã€‚è¦çŸ¥é“ç®—æ³•é¢˜å°±å¥½æ¯”èµ°è¿·å®«ï¼Œä½ ç”¨ä½ çš„æ–¹æ³•å‘çŽ°å‡ºå£å¥½åƒå°±åœ¨çœ¼å‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé¢è¯•å®˜æé†’ä½ å°è¯•å¦ä¸€ç§æ–¹æ¡ˆï¼Œè€Œä½ éœ€è¦å¾€å›žèµ°å¾ˆå¤šæ­¥ã€‚å¾ˆå¤šäººè¿™ä¸ªæ—¶å€™æ ¹æœ¬å°±å¬ä¸è¿›é¢è¯•å®˜çš„è¯ï¼Œè§‰å¾—è‡ªå·±çš„æ–¹æ³•è‚¯å®šè¡Œï¼Œæ®Šä¸çŸ¥é¢è¯•å®˜çŸ¥é“æ•´ä¸ªè¿·å®«æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œè€Œä½ çœ‹ä¼¼æ­£ç¡®çš„é‚£æ¡è·¯ï¼Œå¾ˆå¯èƒ½æœ€ç»ˆæ˜¯ä¸€æ¡æ­»è·¯ã€‚å¦‚æžœä½ ä¸€æ„å­¤è¡Œï¼Œä½ çš„feedbackç»å¯¹æ˜¯ä¸å¥½çš„ã€‚]]></content>
      <categories>
        <category>Foundation</category>
      </categories>
      <tags>
        <tag>Algorithms</tag>
        <tag>Foundation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Application]]></title>
    <url>%2F2019%2F04%2F19%2FApplication%2F</url>
    <content type="text"><![CDATA[2019 Fall MS CS ä¸­ä½ŽGPAé¸æ ¡ADMISSION UT AUSTINhttps://www.1point3acres.com/bbs/thread-566249-1-1.htmlå¦‚ä½•å†™å¥½ä¸€ç¯‡æŽ¨èä¿¡çš„åˆç¨¿ RoolingMS in CS@university of ChicagoMS in CS@BrownMS in CS@University of RochesterCS@Brandeis CONVERT GradE UCI CONVERT GUIDE LINE ASIAN Prof Guide After abroad THE MISTAKE WHEN U APPLY FOR U é¸æ ¡å®šä½ç¶“é©—å¸–https://zhuanlan.zhihu.com/p/83669147ç¾Žå›½å­¦æ ¡æŽ’å YOCKET Indian Application Recommend [ç”³è¯·æ€»ç»“] 19fall cs phd é€€å­¦é‡ç”³/èƒŒæ™¯æå‡/é€‰æ ¡ç­–ç•¥/ç§‘ç ”ç›¸å…³ å®šä½ åŽäº”| SE | ä¸­** | å¤§åŽ‚åšSpark 3å¹´ | å…¨èšå¾· æ±‚å»ºè®® School INFO Northwestern University CE/CSæ•´ä½“ä»‹ç»&amp;ä¸å®Œå…¨è¯¾ç¨‹ä»‹ç»ï¼ˆNWU, NU, è¥¿åŒ—ï¼‰ å®šä½California &gt; Big Seattle &gt; Texas &gt; Boston 11: Dartmouth UCI NEU Tandon PennState Tufts UCD UMT UVA UCR NWU 5 NCSU UTD ASU UCSC UCR å½©ç¥¨: CMU SV-SE, UCSD CS, Rice MCS (Stanford UCLA UCB cornell )3+4å†²åˆº: UCSD ECE, Columbia CS, UMich CS, Tandon CS, Dartmouth Gatech CSE 6ä¸»ç”³: USC CS28, NEU CS PennState ucdavis UvA umass sbu uci mcs UMT utah9ä¿åº•: NEU CS-align syrauce ASU NCSU UCSC(utd osu)6+2 nwu å†²åˆºï¼šMSE @CMUï¼›MCS @UCSDï¼›MCS @Riceï¼›MSE @University of Michiganï¼ŒAnn Arborï¼›MCS @USCä¸»ç”³ï¼šMCS @UCIï¼›MCS @UCRï¼›MCS @UWï¼›MCS @NYUï¼›MCS @NEUä¿åº•ï¼šMCS @Boston Universityï¼›MCS @Syracuseï¼›MCS @GWU https://www.mccormick.northwestern.edu/artificial-intelligence/admissions/ nwu msai POOLå½©ç¥¨(3)ï¼š CMU SV-SE EECS Meng UCB Stanford å†²åˆº(3) UCSD MSCS USC 28 Cornell CS Meng ä¸»ç”³(8)ï¼š Rice MCSä¸­åœ‹äººå¤šï¼Œè½‰æ¥­å‹å–„ï¼Œç”³è«‹é›£åº¦è¼ƒä½Žï¼ˆçŒœæ˜¯top 20æœ€å¥½ä¸Šçš„ï¼‰ã€‚æ”¶å¤§æ¦‚80â€“100å€‹ï¼Œå¥³ç”Ÿæ“šèªªFBå…¨çµ¦å¯¦ç¿’é¢è©¦ã€‚æˆ‘ä¸ŸMCSæœ‰ä¸Šï¼ŒMSæ˜¯çµ¦å¿µPhDçš„ä¸­é€”ç™¼çš„å­¸ä½ UCI MCS/SE NYU MSCSæˆ‘æ˜¯è¯´Tandon/NYU Computing, Entrepreneurship and Innovation NEU MSCSDoes have the Campus of SV Dartmouth MSCS Penn state UCD MCS ä¿åº•(7)ï¼š UvA UCSC MSCS ASU MSCS NCSU MCS UT Dellas UCR MCS/SE Rochester MSCS Career[æ‰¾å·¥å°±ä¸š] [å·¥ä½œä¿¡æ¯] 30+å…¬å¸ MLE é¢è¯•å‡†å¤‡ç»éªŒåˆ†äº«ï¼Œå·²æœ‰Uber, DiDi, èš‚èšOffer]]></content>
      <categories>
        <category>Application</category>
      </categories>
      <tags>
        <tag>Application</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TOEFL]]></title>
    <url>%2F2019%2F04%2F19%2FTOEFL%2F</url>
    <content type="text"><![CDATA[ä¸è¦åŠ å…¥è‡ªå·±çš„è§‚ç‚¹ï¼ï¼ï¼æ‰˜ç¦æ˜¯ä¸ºäº†æµ‹è¯•ä½ çš„è¯­è¨€æ°´å¹³ï¼Œè€ŒéžGREæµ‹è¯•ä½ çš„é€»è¾‘èƒ½åŠ›ã€‚ æ‰˜ç¦çš„éš¾åº¦å¤§æ¦‚ç›¸å½“äºŽå°å­¦äº”å¹´çº§å­¦ç”Ÿçš„ç§‘æ™®éš¾åº¦ æ‰˜ç¦å¤§å¤šæ•°é¢˜æä¸Žçºªå¾‹ç‰‡ç›¸è¿‘ï¼ŒæŽ¨èç§‘å­¦ç¾Žå›½äººï¼Œä»¥åŠThe Story of US ç­‰å„ç§çºªå¾‹ç‰‡ï¼ˆè™½ç„¶ç”Ÿç‰©ç±»çœ‹èµ·æ¥æœ‰ä¸€ç‚¹æ— èŠï¼‰ 2019å¹´æš‘å‡æ–°ä¸œæ–¹èµ„æ–™ TOEFLè€ƒè©¦è³‡æ–™åº« (æ–°é€²åŒå­¸è«‹å„ªå…ˆçœ‹) Listening ESL_Labæ‰˜ç¦å¬åŠ›åœ¨çº¿ç»ƒä¹  Ted-ED 12345678910111213141516çŸ¥é“å®šä½ï¼Œè®°å¿†é‡ç‚¹å•è¯ï¼Œç²¾å¬TPO.Step 1: ç›´æŽ¥æŠŠä¸€ç¯‡å¬åŠ›é¢˜ç›®åšå®Œï¼Œä½†æ˜¯åšå®Œä¸è¦å¯¹ç­”æ¡ˆã€‚Step 2ï¼šé˜…è¯»å¬åŠ›åŽŸæ–‡ï¼Œåˆ’å‡ºå…¶ä¸­çš„é€»è¾‘è¯ã€‚Step 3ï¼šå¯¹ç…§é¢˜ç›®ï¼Œåœ¨åŽŸæ–‡ä¸­æ‰¾åˆ°å‡ºé¢˜ç‚¹çš„ä½ç½®ã€‚ï¼ˆè¿™ä¸€æ­¥ä½ ä¼šå‘çŽ°å¤§å¤šæ•°å‡ºé¢˜ç‚¹éƒ½åœ¨é€»è¾‘è¯åŽé¢ã€‚ï¼‰Step 4ï¼šé¢˜ç›®é€‰é¡¹åˆ†æžï¼Œå³æ‰¾åˆ°äº†å‡ºé¢˜ç‚¹ä¹‹åŽå†åŽ»ä»”ç»†åˆ†æžæ¯ä¸€ä¸ªé€‰é¡¹ï¼Œé‡æ–°åšæ¯é“é¢˜ç›®(è®°å¾—è¿™æ—¶ä½ è¿˜æ²¡æœ‰å¯¹ç­”æ¡ˆï¼‰äº‹å®žä¸Šè¿™ä¸€æ­¥ç›¸å½“äºŽåœ¨åšé˜…è¯»ç†è§£ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå¦‚æžœä½ å‘çŽ°å“ªé“é¢˜çš„ç­”æ¡ˆå’Œä¹‹å‰çº¯å¬çš„æ—¶å€™ä¸ä¸€æ ·ï¼Œå¯ä»¥åˆ†æžä¸€ä¸‹ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼ˆå¤šåŠæ˜¯æœ‰åœ°æ–¹æ²¡å¬æ˜Žç™½ï¼Œæˆ–è€…ä¿¡æ¯ç†è§£é”™ä½äº†ï¼‰ã€‚Step 5ï¼šå¯¹ç­”æ¡ˆï¼Œçœ‹çœ‹çº¯å¬çš„æ—¶å€™å’Œåšé˜…è¯»ç†è§£æ—¶å„è‡ªé”™äº†å¤šå°‘ï¼Œä»”ç»†åˆ†æžé”™é¢˜çš„åŽŸå› ã€‚Step 6 : ä»”ç»†é˜…è¯»å¬åŠ›åŽŸæ–‡ï¼Œä¿è¯å°†å…¶ç†è§£é€å½»ï¼ˆæ²¡æœ‰ç”Ÿè¯ï¼Œæ²¡æœ‰è¯»ä¸æ‡‚çš„å¥å­ï¼‰Step 7ï¼šè·Ÿè¯»ï¼Œé€å¥æ¨¡ä»¿å‘éŸ³ï¼Œç„¶åŽæ•´æ®µè·Ÿè¯»ï¼Œç›´åˆ°è„±ç¨¿ã€‚Step 8ï¼šç²¾å¬åŽŸæ–‡ï¼Œé‡ç‚¹å…³æ³¨é€»è¾‘èŠ‚ç‚¹ä»¥åŠè€ƒç‚¹å¤„çš„å†…å®¹ï¼Œåå¤å¬ï¼Œç›´åˆ°å®Œå…¨åƒé€ä¸ºæ­¢ã€‚æ‰˜ç¦æ¯ç¯‡å¬åŠ›é•¿3~6åˆ†é’Ÿï¼Œè¿™æ ·ä¸€å¥—æµç¨‹ä¸‹æ¥ï¼Œæ¯ç¯‡å¤§æ¦‚è€—æ—¶45~60åˆ†é’Ÿã€‚æ¯å¤©æŒ‘å‡ºæ•´å—çš„ä¸‰ä¸ªå°æ—¶ï¼Œç»ƒä¸Šé‚£ä¹ˆ3~4ç¯‡ï¼ŒåŠä¸ªæœˆèƒ½ç»ƒæŽ¥è¿‘50ç¯‡ï¼Œè¿™æ ·çŸ­æœŸå¤§å¯†åº¦çš„è®­ç»ƒï¼Œæ‰ä¼šæœ‰ç«‹æ†è§å½±çš„æ•ˆæžœã€‚æœ‰çš„ç­’å­å•Šï¼Œéš”å¤©ç»ƒé‚£ä¹ˆä¸€ä¸¤ç¯‡ï¼Œè¿™æ˜¯ä¼‘é—²..ä¸æ˜¯è®­ç»ƒã€‚ è¯´æ€»ç»“è‡ªå·±çš„æ¨¡ç‰ˆ é»„é‡‘å£è¯­80é¢˜ 7ä¸ªä½ ä¸èƒ½ä¸çŸ¥é“çš„â€œè‹±è¯­è¿žè¯»â€è§„åˆ™ å£è¯­ç½‘ç«™ Readingå®šä½ è¯æ±‡ï¼šé€‰æ„æ€ç›¸è¿‘çš„ï¼Œä¸ä¼šå†åŽ»å¥—è¯­å¢ƒï¼Œåˆ©ç”¨è¯æ€§æ¥æŽ’é™¤å¥å­ç®€åŒ–ï¼š ç®€åŒ–å¥å­æ€»ç»“ï¼ˆå…­é€‰ä¸‰ï¼‰ ï¼š è¯´çš„å¤šæ˜¯é€‰é¡¹ï¼Œå¤ªç»†èŠ‚çš„ä¸€èˆ¬ä¸é€‰æŽ¨æ–­é¢˜ï¼šä»Žä»–çš„åé¢å’Œæ­£é¢æ¥æŽ¨æ–­æ’å…¥é¢˜ï¼šçœ‹è¯­å¢ƒï¼Œçœ‹è¿žæŽ¥å¤„ ç±»ä¼¼As example, But, For some reason. ScienceDaily å†™æ€»ç»“è‡ªå·±çš„æ¨¡ç‰ˆä½ åŒæ„å¤§å­¦åº”è¯¥å¼€ä»€ä¹ˆè¯¾å— ç‹¬ç«‹å†™ä½œ Do you agree or disagree with the following statement: Universities should require every graduation students to take public speaking courses. Give specific examples and details to support your answer. Sample Answer: As we all know, course settings of universities have always been a focal point of the public attention. Recently, it has become a hotly-debated question that whether or not college students should take compulsory public speaking classes. (èƒŒæ™¯å¼•å…¥)Some people argue that delivering speech in public can help a student develop an open personality filled with courage. So it is necessary for university students to take this course. (ä»–äººè§‚ç‚¹) However, in my opinion, turning public speaking course into a compulsory one can be a terrible decision. (æˆ‘çš„è§‚ç‚¹)My view point is based on the following reasons and examples. (è¿‡æ¸¡å¥) To begin with, public speaking, as a kind of skill, is actually needed only in certain occupations. (åˆ†è®ºç‚¹ä¸€)A politician or an entertainer may sometimes need to present himself facing a crowd of people, while other people such as engineers and programmers would have no opportunity to use this skill during his career life. (å±•å¼€å¥)For example, one of my schoolmates who is now working in a mobile game company once shared his life with us during our meeting. He needs to spend almost all his working time facing his computer, coding and thinking. With such a heavy workload, only little time was left for him to social with his colleagues and friends. It is obvious that learning how to give an excellent speech in public is useless for him. Therefore, we can see that public speaking isnâ€™t an essential skill needed by people who are responsible for certain kinds of jobs. (å…·ä½“ç»†èŠ‚ä¾‹è¯) Moreover, requiring students to take public speaking courses doesnâ€™t mean they can successfully get this skill when the class is over. (åˆ†è®ºç‚¹äºŒ)It is universally acknowledged that different individual owns different personality. Some people are naturally open and willing to give their opinion in public. In contrast, others may be shy and inclined to share their thoughts only to a small group of people. (å±•å¼€å¥)When I was still a college student, I took part in a club which gathered a group of young people interested in psychology. Some club members were outgoing and good at social. Due to their nature, jobs related with broadcasting and external connection were usually assigned to them. In the club, there were also some students with introvertive personality. They were responsible for some rigorous tasks such as accounting and some strict paperwork. Both groups performed well. If we hand accounting jobs to the outgoing group or force the quiet group social, the operation of our club might turn into a mess. Similarly, if those people who are not open enough are forced to take public speaking course, it might just be a waste of time. (å…·ä½“ç»†èŠ‚ä¾‹è¯) Admittedly, public speaking course can help develop a personality which is required to be a leader. (æ‰¿è®¤åé¢è§‚ç‚¹æœ‰ç†)It is necessary for a leader to deliver a speech full of emotion and appeal to his team members. (å±•å¼€)Take Jack Ma, the boss of Alibaba, as an example. We all know that Jack Ma established Alibaba, an e-commerce company when he was in obscure. At that time, he was a college English teacher and usually gave lectures in a class in front of hundreds of adult students. Adequate public teaching experience equipped him with a charming and attractive personality, which might contribute a lot as he recruiting people to set up his e-business. Most people didnâ€™t held an optimistic attitude towards e-commerce, so I regarded the leadership of Jack Ma himself as a significant factor resulting in the success of their initial team building. (å…·ä½“ç»†èŠ‚ä¾‹è¯) To conclude, public speaking course is not a necessary one during studentsâ€™ college years. (é‡è¿°æ€»è®ºç‚¹)Not every students actually need this skill. In addition, not all the pupils can become a successful public speaker after such kind of training. (é‡è¿°ç¬¬ä¸€äºŒä¸ªåˆ†è®ºç‚¹)Nevertheless, for students who have the ambition to be a leader in his future, taking public speaking course can effectively help him to get an attractive figure.(é‡è¿°è®©æ­¥æ®µè®ºç‚¹)æŽç¬‘æ¥çš„èŒƒæ–‡ æ‰˜ç¦å¯«ä½œå¿ƒå¾— TypeRacer (Writting ç·´æ‰“å­—é€Ÿåº¦ç”¨) XX XX é¦–æ®µ è¡¨æ˜Žä½ çš„è§‚ç‚¹(oï¾Ÿvï¾Ÿ)ãƒŽ ç¬¬äºŒæ®µ è®©æ­¥ï¼Œè¯´æ­¤è§‚ç‚¹è¿˜æ˜¯æœ‰ä¸€å®šçš„åˆç†æ€§ ç¬¬ä¸‰æ®µ å•åä¾‹1ï¼ˆåŒæ ·å¥½æˆ–è€…æ›´å¥½ï¼‰ ç¬¬å››æ®µ å•åä¾‹2ï¼ˆåŒæ ·å¥½æˆ–è€…æ›´å¥½ï¼‰ å°¾ç«¯ æ€»ç»“ Vocabulary Barronâ€™s 800 High-Frequency GRE Word List Course è€ƒæ»¡åˆ† Learn English FREE with USA Learns https://www.engvid.com/ æ‰˜ç¦ç»å¸¸è€ƒåˆ°çš„å‡ ä¸ªç‚¹ï¼š12345678ç”Ÿç‰©ï¼š çŒ›çŠ¸è±¡ å†°å·ï¼Œè¿å¾™MIGRATION è¿˜æœ‰ALLURE PREY USING BAIT BY PREDATORã€‚å¤©æ–‡ï¼šå°¤å…¶æ˜¯æœ¨æ˜Ÿå’Œå®ƒæœ€å¸¸è¢«æåˆ°çš„ä¸‰é¢—å«æ˜Ÿï¼ŒIO,åŽ†å²ï¼šä¸€èˆ¬ä¸ºç¾Žè‹±å’Œç½—é©¬åŽ†å²ã€‚beaverå’Œbisonåœ¨ç¾Žå›½åŽ†å²ä¸Šä¸¾è¶³è½»é‡çš„å½±å“ã€‚anthropologyè€ƒå¤ï¼šä¸€èˆ¬ä¼šè¯´ä»€ä¹ˆä»€ä¹ˆè¯æ˜Žä»€ä¹ˆä»€ä¹ˆï¼Œç„¶åŽæ•™æŽˆåˆç»™å‡ºç›¸åè§‚ç‚¹ã€‚å¸¸è§å£è¯­å’Œå†™ä½œï¼Œè¿˜æœ‰è‹ç¾Žå°”äººå‘æ˜Žæ–‡å­—ã€‚]]></content>
      <categories>
        <category>Application</category>
      </categories>
      <tags>
        <tag>Application</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mind Map In Java Environmentals]]></title>
    <url>%2F2019%2F03%2F31%2FMind-Map-In-Java-Environmentals%2F</url>
    <content type="text"><![CDATA[]]></content>
  </entry>
  <entry>
    <title><![CDATA[107_FALL]]></title>
    <url>%2F2019%2F03%2F22%2F107_FALL%2F</url>
    <content type="text"><![CDATA[TAIWAN TECH 107 FALL107 Transcripts GPA Calculator MOVIE LIST é—œæ–¼HEXOè¶…å…¨çš„å»ºç«™å…§å®¹ Learn Git Branching Online ã€å½•å–æ•°æ®-CSã€‘å¡è€åŸºæ¢…éš†å¤§å­¦ CMU Computer Sciences Masterè®¡ç®—æœºç§‘å­¦ç¡•å£«ï¼ˆ2018Fall)](https://www.douban.com/note/670723222/)åˆ©ç”¨Githubåˆ†æ”¯å¤‡ä»½Hexoæºæ–‡ä»¶ Thinking In Java NCTU_CSIE_HANDBOOK Taiwan Tech HANDBOOK DATA STRUCTURE AND Algorithms https://regapp.nctu.edu.tw/Views/User/UserLoginäº¤é€šå¤§å­¸ç·šä¸Šæäº¤ç”³è«‹æ–‡ä»¶ 115å®¶ç”µå­ç§‘æŠ€ä¼ä¸šå¾…é‡ BurnDown chart CS2006301 è¨ˆç®—æ©Ÿçµ„ç¹” Computer OrganizationMidterm 4.16Homework2 4.9PRACTICEKOREAN SOLUTIONHANDBOOKTAIWAN_TECH HANDBOOKCONVERT THE FLOAT NUMBER CS3001301 AlgorithmsMidterm 4.16Project2 4.10KOREAN ALGORITHMS HANDBOOKç®—æ³•å¯¼è®ºç¬”è®°åŠ¨æ€è§„åˆ’DPè¯¦è§£-é’¢æ¡åˆ‡å‰²çš„åˆ†æžä¸Žå®žçŽ° CS3007701 å¤šåª’é«”è³‡è¨Šç³»çµ±å°Žè«– Introduction to MultimediaInformation SystemsMidterm 4.11HANDBOOKHistogram Equalization Histogram CDF PDF CS3010301 è³‡æ–™åº«ç³»çµ± Database SystemsCourse website5/28 Final will be held on 6/11 in class.5/14 Homework 4 posted4/30 Prof. Ming-Chih Hung of Northwest Missouri State University will give a talk titled â€œGIS, Graphs, and Relational Databaseâ€ on 5/21 in class.4/26 Homework 3 posted.3/28 Mid-term will be held on 4/23 in class.3/28 Homework 2 posted.3/21 Homework 1 posted.2/19 First class CS3020301 Compiler DesignCourse websiteRegular OR NOT PKUå°åº¦ðŸ‡®ðŸ‡³ Neso Academy CS499A001 å¯¦å‹™å°ˆé¡Œ(ä¸Š) Special Projects (I) CS5144701 æ·±åº¦å­¸ç¿’å¯¦å‹™ Practices of Deep Learning BA2911701 è«‡åˆ¤å­¸ Negotiation CC1309301 ç¶“å…¸èˆ‡å‰µæ„ Classics and Creativity PE139B053 é«”è‚²(é‡é‡è¨“ç·´)(ä¸‹) Physical Education(Weight Training) (II) TCG029301 è‡¨çµ‚é—œæ‡·ç¤¾å€å¯¦ç¿’ Practical Training in Community for Hospice and Palliative CareMidterm report 5/1 æœ¬äººå°æ–¼å°ç£åœ°å€ç¤¾å€é•·ç…§2.0è¨ˆåŠƒçš„çœ‹æ³•å’Œè¿·æ€ TCG047301 é¤Šç”Ÿé†«å­¸ Fitness and Health for Good Life TCG068301 é ˜å°Žèˆ‡ç”Ÿæ´» Leadership and LifeFinal 6/17Assignment2 5/20Group meeting 4/22Assignment1 4/1]]></content>
      <categories>
        <category>Diary</category>
      </categories>
      <tags>
        <tag>Taiwan</tag>
        <tag>Taiwan Tech</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Core Java Volume I(10th Edition)]]></title>
    <url>%2F2019%2F02%2F10%2FCore-Java-Volume-I-10th-Edition%2F</url>
    <content type="text"><![CDATA[JAVAæ ¸å¿ƒæŠ€æœ¯å·ä¸€ (ç¬¬åç‰ˆ)ä¸‹é¢æ˜¯éœ€è¦æ³¨æ„çš„ï¼š åªæœ‰æ–¹æ³•åå’Œå‚æ•°ç±»åž‹å«åšæ–¹æ³•çš„ç­¾åï¼Œ ä¸åŒçš„è¿”å›žç±»åž‹å€¼ä¸èƒ½ä½œä¸ºæ–¹æ³•çš„ç­¾åã€‚(4.6.1) è¿™æ˜¯åŸŸä¸Žå±€éƒ¨å˜é‡çš„ä¸»è¦ä¸åŒç‚¹ã€‚ å¿…é¡»æ˜Žç¡®åœ°åˆå§‹åŒ–æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœæ²¡æœ‰åˆå§‹åŒ–ç±»ä¸­çš„åŸŸï¼Œ å°†ä¼šè¢«è‡ªåŠ¨åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆ0ã€ false æˆ– null )ã€‚(4.6.2) åˆå§‹åŒ–å—æˆ–é™æ€çš„åˆå§‹åŒ–å—åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰§è¡Œé‡Œé¢çš„ä»£ç ã€‚(4.6.7) ä»Žç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œ åµŒå¥—çš„åŒ…ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚(4.7)ä¾‹å¦‚ï¼šjava.util åŒ…ä¸Žjava.util.jar åŒ…æ¯«æ— å…³ç³»ã€‚æ¯ä¸€ä¸ªéƒ½æ‹¥æœ‰ç‹¬ç«‹çš„ç±»é›†åˆã€‚import java.util.* è¯­å¥ä¸èƒ½å¯¼å…¥java.util.jaråŒ…ä¸­çš„ç±». æ ‡è®°ä¸º public çš„éƒ¨åˆ†å¯ä»¥è¢«ä»»æ„çš„ç±»ä½¿ç”¨ï¼›æ ‡è®°ä¸º private çš„éƒ¨åˆ†åªèƒ½è¢«å®šä¹‰å®ƒä»¬çš„ç±»ä½¿ç”¨ã€‚å¦‚æžœæ²¡æœ‰æŒ‡å®š public æˆ– private, è¿™ ä¸ª éƒ¨åˆ†ï¼ˆç±»ã€æ–¹æ³•æˆ–å˜é‡ï¼‰å¯ä»¥è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•è®¿é—®ã€‚ ä½¿ç”¨super è°ƒç”¨æž„é€ å™¨çš„è¯­å¥å¿…é¡»æ˜¯å­ç±»æž„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚(5.1.3) åœ¨è¦†ç›–ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå­ç±»æ–¹æ³•ä¸èƒ½ä½ŽäºŽè¶…ç±»æ–¹æ³•çš„å¯è§æ€§ã€‚ï¼ˆ5.1.6ï¼‰ å¦‚æžœå°†ä¸€ä¸ªç±»å£°æ˜Žä¸º finalï¼Œ åªæœ‰å…¶ä¸­çš„æ–¹æ³•è‡ªåŠ¨åœ°æˆä¸º final, è€Œä¸åŒ…æ‹¬åŸŸã€‚(5.1.7) å¦‚æžœæ–¹æ³•å¾ˆç®€çŸ­ã€ è¢«é¢‘ç¹è°ƒç”¨ä¸”æ²¡æœ‰çœŸ()æ­£åœ°è¢«è¦†ç›–ï¼Œ é‚£ä¹ˆå³æ—¶ç¼–è¯‘å™¨å°±ä¼šå°†è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†…è”å¤„ç†ã€‚(5.1.7) å°†ä¸€ä¸ªå­ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªè¶…ç±»å˜é‡ï¼Œ ç¼–è¯‘å™¨æ˜¯å…è®¸çš„ã€‚ä½†å°†ä¸€ä¸ªè¶…ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªå­ç±»å˜é‡ï¼Œ å¿…é¡»è¿›è¡Œç±»åž‹è½¬æ¢ ã€‚(5.1.8) å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§ â€”- protectedã€‚(5.1.10) instanceofé€šè¿‡è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼æ¥æŒ‡å‡ºï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯è¿™ä¸ªç‰¹å®šç±»æˆ–è€…æ˜¯å®ƒçš„å­ç±»çš„ä¸€ä¸ªå®žä¾‹ã€‚ Objectç±»ä¸­çš„equalsæ–¹æ³•å°†åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰ç›¸åŒçš„å¼•ç”¨ã€‚ä½†æ˜¯å¯¹äºŽå¤§å¤šæ•°ç±»æ¥è¯´å¹¶æ²¡æœ‰æ„ä¹‰ã€‚(5.2.1) æ•°ç»„ç»§æ‰¿äº† object ç±»çš„ toString æ–¹æ³•ï¼Œæ•°ç»„ç±»åž‹å°†æŒ‰ç…§æ—§çš„æ ¼å¼æ‰“å°ï¼Œç”Ÿæˆå­—ç¬¦ä¸²â€œ [I@la46e30â€ ï¼Œä¿®æ­£çš„æ–¹å¼æ˜¯è°ƒç”¨é™æ€æ–¹æ³• Arrays.toString ArrayList å¦‚æžœå·²ç»æ¸…æ¥šæˆ–èƒ½å¤Ÿä¼°è®¡å‡ºæ•°ç»„å¯èƒ½å­˜å‚¨çš„å…ƒç´ æ•°é‡ï¼Œ å°±å¯ä»¥åœ¨å¡«å……æ•°ç»„ä¹‹å‰è°ƒensureCapacityæ–¹æ³•ï¼š å¯¹è±¡åŒ…è£…å™¨ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå¯¹è±¡åŒ…è£…å™¨ç±»è¿˜æ˜¯ final ,è£…ç®±å’Œæ‹†ç®±æ˜¯ç¼–è¯‘å™¨è®¤å¯çš„ã€‚ å…è®¸å°†ä¸€ä¸ªæ•°ç»„ä¼ é€’ç»™å¯å˜å‚æ•°æ–¹æ³•çš„æœ€åŽä¸€ä¸ªå‚æ•°ã€‚mainæ–¹æ³• javapæ˜¯ Java classæ–‡ä»¶åˆ†è§£å™¨ï¼Œå¯ä»¥åç¼–è¯‘ï¼ˆå³å¯¹javacç¼–è¯‘çš„æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼‰ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹javaç¼–è¯‘å™¨ç”Ÿæˆçš„å­—èŠ‚ç ã€‚ç”¨äºŽåˆ†è§£classæ–‡ä»¶ã€‚ javap -p &lt;ç±»æ–‡ä»¶&gt; Classç±»ä¸­çš„newlnstance( )è°ƒç”¨é»˜è®¤çš„æž„é€ å™¨ï¼Œå¦‚æžœè¿™ä¸ªç±»æ²¡æœ‰é»˜è®¤çš„æž„é€ å™¨ï¼Œ å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚æžœæƒ³è¦æä¾›å‚æ•°ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨Constructorä¸­åå­—ç›¸åŒçš„çš„æ–¹æ³•ã€‚ ä¸€ä¸ª Class å¯¹è±¡å®žé™…ä¸Šè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç±»åž‹ï¼Œ è€Œè¿™ä¸ªç±»åž‹æœªå¿…ä¸€å®šæ˜¯ä¸€ç§ç±»ã€‚ lambda è¡¨è¾¾å¼ä¸­æ•èŽ·çš„å˜é‡å¿…é¡»å®žé™…ä¸Šæ˜¯æœ€ç»ˆå˜é‡ lambda è¡¨è¾¾å¼çš„ä½“ä¸ŽåµŒå¥—å—æœ‰ç›¸åŒçš„ä½œç”¨åŸŸã€‚ å¼ºçƒˆå»ºè®®è§£è€¦åˆ try/catch å’Œ try/finally è¯­å¥å— Java è¯­ è¨€ è§„ èŒƒ å°† æ´¾ ç”Ÿ äºŽ Error ç±» æˆ– RuntimeException ç±»çš„æ‰€æœ‰å¼‚å¸¸ç§°ä¸ºéžå—æŸ¥( unchecked ) å¼‚å¸¸ï¼Œ æ‰€æœ‰å…¶ä»–çš„å¼‚å¸¸ç§°ä¸ºå—æŸ¥ï¼ˆchecked) å¼‚å¸¸ã€‚ for each å¾ªçŽ¯å¯ä»¥ä¸Žä»»ä½•å®žçŽ°äº† Iterable æŽ¥å£çš„å¯¹è±¡ä¸€èµ·å·¥ä½œ, ä½†æ˜¯Collection æŽ¥å£æ‰©å±•äº† Iterable æŽ¥å£ã€‚ å››ç§å¾ªçŽ¯ 12345671. arrayList.iterator().forEachRemaining(System.out::println); 2. arrayList.forEach(System.out::println); 3. for (String str : arrayList) System.out.println(str); 4. Iterator it = arrayList.iterator(); while(it.hasNext()) System.out.println(it.next()); æ ‡è®°æŽ¥å£ RandomAccess ç”¨å®ƒæ¥æµ‹è¯•ä¸€ä¸ªç‰¹å®šçš„é›†åˆæ˜¯å¦æ”¯æŒé«˜æ•ˆçš„éšæœºè®¿é—® åœ¨ArrayListçš„æ— å‚æž„é€ å‡½æ•°ä¸Šçš„æ³¨é‡Š Constructs an empty list with an initial capacity of ten. åˆå§‹åŒ–çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£çš„åˆ›å»º10ä¸ªç©ºé—´ï¼Œè¿™æ˜¯æƒ°æ€§åˆå§‹æ¨¡å¼å¯¹è±¡ï¼Œåœ¨è¿™ç¯‡.å’Œè¿™ç¯‡æ–‡ç« ä¸­å¯ä»¥ä¸€æŽ¢ç©¶ç«Ÿã€‚ å†…éƒ¨ç±»çš„å¯¹è±¡æœ‰ä¸€ä¸ªéšå¼å¼•ç”¨ï¼Œ å®ƒå¼•ç”¨äº†å®žä¾‹åŒ–è¯¥å†…éƒ¨å¯¹è±¡çš„å¤–å›´ç±»å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªæŒ‡é’ˆï¼Œ å¯ä»¥è®¿é—®å¤–å›´ç±»å¯¹è±¡çš„å…¨éƒ¨çŠ¶æ€ï¼Œä½†æ˜¯staticå†…éƒ¨ç±»å¹¶æ²¡æœ‰ã€‚ å±€éƒ¨ç±»è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ã€‚å®ƒä»¬ä¸ä»…èƒ½å¤Ÿè®¿é—®åŒ…å«å®ƒä»¬çš„å¤–éƒ¨ç±»ï¼Œ è¿˜å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡ã€‚ä¸è¿‡ï¼Œ é‚£äº›å±€éƒ¨å˜é‡å¿…é¡»äº‹å®žä¸Šä¸º final åŒæ‹¬å·åˆå§‹åŒ– ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹çš„å‚æ•° ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ add æ–¹æ³•åªä¾èµ–äºŽè¿­ä»£å™¨çš„ä½ç½®ï¼Œ è€Œ remove æ–¹æ³•ä¾èµ–äºŽè¿­ä»£å™¨çš„çŠ¶æ€ã€‚ Vector ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œsynchronized å¦‚æžœ a_equals(b) ä¸º true, a ä¸Ž b å¿…é¡»å…·æœ‰ç›¸åŒçš„æ•£åˆ—ç ã€‚ ä½œè€…ï¼š NeverThå‡ºå¤„ï¼šhttps://www.cnblogs.com/neverth/p/11760936.html]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
</search>
